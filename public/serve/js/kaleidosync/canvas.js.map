{"version":3,"sources":["kaleidosync/canvas.js"],"names":["Canvas","canvas","isMobile","window","matchMedia","matches","width","innerWidth","height","innerHeight","node","document","getElementById","removeAttribute","ctx","getContext","stars","background","raf","initialized","isPainting","style","transform","el","push","clearRect","draw","forEach","requestAnimationFrame","paint","bind","cancelAnimationFrame","startPaint"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA,M;AACJ,oBAAYC,MAAZ,EAAoB;AAAA;;AAClB,WAAKC,QAAL,GAAgBC,OAAOC,UAAP,CAAkB,oBAAlB,EAAwCC,OAAxD;AACA,WAAKC,KAAL,GAAa,KAAKJ,QAAL,GAAgBC,OAAOI,UAAP,GAAoB,CAApC,GAAwCJ,OAAOI,UAA5D;AACA,WAAKC,MAAL,GAAc,KAAKN,QAAL,GAAgBC,OAAOM,WAAP,GAAqB,CAArC,GAAyCN,OAAOM,WAA9D;AACA,WAAKC,IAAL,GAAYC,SAASC,cAAT,CAAwBX,MAAxB,CAAZ;AACA,WAAKS,IAAL,CAAUG,eAAV,CAA0B,OAA1B;AACA,WAAKH,IAAL,CAAUJ,KAAV,GAAkB,KAAKA,KAAvB;AACA,WAAKI,IAAL,CAAUF,MAAV,GAAmB,KAAKA,MAAxB;AACA,WAAKM,GAAL,GAAW,KAAKJ,IAAL,CAAUK,UAAV,CAAqB,IAArB,CAAX;AACA,WAAKC,KAAL,GAAa,EAAb;AACA,WAAKC,UAAL,GAAkB,EAAlB;AACA,WAAKC,GAAL;AACA,WAAKC,WAAL,GAAmB,KAAnB;AACA,WAAKC,UAAL,GAAkB,KAAlB;;AAEA,UAAI,KAAKlB,QAAT,EAAmB;AACjB,aAAKQ,IAAL,CAAUW,KAAV,CAAgBC,SAAhB,GAA4B,6CAA5B;AACD;AACF;;;;8BAEOC,E,EAAI;AACV,aAAKP,KAAL,CAAWQ,IAAX,CAAgBD,EAAhB;AACD;;;oCAEaA,E,EAAI;AAChB,aAAKN,UAAL,GAAkBM,EAAlB;AACD;;;8BAEO;AAAA;;AACN,aAAKT,GAAL,CAASW,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKnB,KAA9B,EAAqC,KAAKE,MAA1C;AACA,aAAKS,UAAL,CAAgBS,IAAhB,CAAqB,KAAKZ,GAA1B;AACA,aAAKE,KAAL,CAAWW,OAAX,CAAmB,UAACJ,EAAD;AAAA,iBAAQA,GAAGG,IAAH,CAAQ,MAAKZ,GAAb,CAAR;AAAA,SAAnB;AACA,aAAKI,GAAL,GAAWU,sBAAsB,KAAKC,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAtB,CAAX;AACD;;;mCAEY;AACX,YAAI,CAAC,KAAKV,UAAV,EAAsB;AACpB,eAAKS,KAAL;AACA,eAAKT,UAAL,GAAkB,IAAlB;AACD;AACF;;;kCAEW;AACV,YAAI,KAAKA,UAAT,EAAqB;AACnBW,+BAAqB,KAAKb,GAA1B;AACA,eAAKE,UAAL,GAAkB,KAAlB;AACD;AACF;;;6BAEM;AACL,YAAI,KAAKD,WAAL,KAAqB,KAAzB,EAAgC;AAC9B,eAAKa,UAAL;AACA,eAAKZ,UAAL,GAAkB,IAAlB;AACA,eAAKD,WAAL,GAAmB,IAAnB;AACD;AACF;;;;;;oBAGYnB,M","file":"canvas.js","sourcesContent":["class Canvas {\n  constructor(canvas) {\n    this.isMobile = window.matchMedia('(max-width: 480px)').matches\n    this.width = this.isMobile ? window.innerWidth * 2 : window.innerWidth\n    this.height = this.isMobile ? window.innerHeight * 2 : window.innerHeight\n    this.node = document.getElementById(canvas)\n    this.node.removeAttribute('style')\n    this.node.width = this.width\n    this.node.height = this.height\n    this.ctx = this.node.getContext('2d')\n    this.stars = []\n    this.background = {}\n    this.raf\n    this.initialized = false\n    this.isPainting = false\n\n    if (this.isMobile) {\n      this.node.style.transform = 'scale(.5) translateY(-50%) translateX(-50%)'\n    }\n  }\n\n  addStar(el) {\n    this.stars.push(el)\n  }\n\n  addBackground(el) {\n    this.background = el\n  }\n\n  paint() {\n    this.ctx.clearRect(0, 0, this.width, this.height)\n    this.background.draw(this.ctx);\n    this.stars.forEach((el) => el.draw(this.ctx))\n    this.raf = requestAnimationFrame(this.paint.bind(this))\n  }\n\n  startPaint() {\n    if (!this.isPainting) {\n      this.paint()\n      this.isPainting = true\n    }\n  }\n\n  stopPaint() {\n    if (this.isPainting) {\n      cancelAnimationFrame(this.raf)\n      this.isPainting = false\n    }\n  }\n\n  init() {\n    if (this.initialized === false) {\n      this.startPaint()\n      this.isPainting = true\n      this.initialized = true\n    }\n  }\n}\n\nexport default Canvas"]}