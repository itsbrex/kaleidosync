{"version":3,"file":"audius.playlists._id_-DL9qhKOa.js","sources":["../../node_modules/@wearesage/vue/src/composables/audio/useGetAudiusPlaylistById.ts","../../node_modules/@wearesage/vue/src/assets/images/vinyl.png","../../node_modules/@wearesage/vue/src/components/common/Vinyl.vue","../../node_modules/@wearesage/vue/src/components/audius/AudiusPlaylistHeader.vue","../../node_modules/@wearesage/vue/src/components/audius/AudiusPlaylistBody.vue","../../node_modules/@wearesage/vue/src/components/common/Record.vue","../../src/pages/audius.playlists.[id].vue"],"sourcesContent":["import { ref, watch, type ComputedRef, type Ref } from \"vue\";\nimport { useAudius } from \"../../stores/audius\";\n\nexport function useGetAudiusPlaylistById(id: Ref | ComputedRef<string>) {\n  const audius = useAudius();\n  const playlist = ref<any>(null);\n\n  async function fetchPlaylist() {\n    if (!id.value) return;\n    playlist.value = await audius.fetchPlaylistById(id.value);\n  }\n\n  watch(() => id.value, fetchPlaylist, { immediate: true });\n\n  return playlist;\n}\n","export default \"__VITE_ASSET__Czsat0wD__\"","<template>\n  <div class=\"vinyl\" :class=\"{ playing }\">\n    <div class=\"overlays\"></div>\n    <div class=\"hole\"></div>\n    <img class=\"bg\" src=\"../../assets/images/vinyl.png\" />\n    <div class=\"center\">\n      <img class=\"album\" :src=\"src\" />\n      <div class=\"inner\"></div>\n      <div class=\"inner-2\"></div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { size, src, playing } = defineProps<{ size?: any; src: string; volume?: number; playing?: boolean }>();\n</script>\n\n<style lang=\"scss\" scoped>\n$BLACK: #111;\n\n.vinyl {\n  @include flex;\n  position: absolute;\n  width: v-bind(size);\n  height: v-bind(size);\n  border-radius: 100%;\n  position: relative;\n  overflow: hidden;\n}\n\n.overlays {\n  @include flex;\n  position: absolute;\n  @include size(100%);\n  // will-change: transform, opacity;\n  &:before {\n    @include position(absolute, 0 30% 0 30%);\n    z-index: 1000;\n    background: linear-gradient(to right, transparent, rgba($orange, 0.15), rgba($pink, 0));\n    content: \"\";\n    // mix-blend-mode: lighten;\n  }\n\n  &:after {\n    @include position(absolute, 0 0% 0 0%);\n    z-index: 1000;\n    background: linear-gradient(to right, transparent, rgba($purple, 0.15), rgba($pink, 0));\n    content: \"\";\n    mix-blend-mode: color-dodge;\n  }\n}\n\n.bg {\n  @include size(100%);\n  position: absolute;\n  // mix-blend-mode: overlay;\n}\n\n.center {\n  @include size(50%);\n  @include flex;\n  overflow: hidden;\n  position: absolute;\n  z-index: 1000;\n  background: linear-gradient(to top right, rgba(darken($pink, 10%), 0.5), rgba(lighten($purple, 10%), 0.8)), $black;\n  border-radius: 100%;\n  box-shadow: inset 0 -0.1vw 0px 0.1vw lighten($red, 20%), inset 0 0.1vw 0.1vw 0.1vw darken($pink, 20%);\n  border: 0.1vw solid $blue;\n  &:after {\n    @include position(absolute, 0 0 0 0);\n    z-index: 1000;\n    background: linear-gradient(to right, transparent, rgba($black, 0.2), transparent);\n    mix-blend-mode: color-dodge;\n    content: \"\";\n  }\n\n  &:before {\n    @include position(absolute, 0 30% 0 30%);\n    z-index: 1000;\n    background: linear-gradient(to right, transparent, rgba($purple, 1), transparent);\n    content: \"\";\n    mix-blend-mode: screen;\n    opacity: 0.3;\n  }\n}\n\n.inner {\n  @include size(70%);\n  background: linear-gradient(to top right, rgba(darken($red, 10%), 0.5), rgba(lighten($purple, 10%), 0.8));\n  position: absolute;\n  box-shadow: inset 0 -0.05vw 0px 0.05vw lighten($blue, 20%), inset 0 0.05vw 0.05vw 0.05vw darken($red, 20%);\n  border: 0.05vw solid $red;\n  border-radius: 100%;\n}\n\n.inner-2 {\n  @include size(80%);\n  background: linear-gradient(to top right, rgba(darken($red, 10%), 0.5), rgba(lighten($purple, 10%), 0.8));\n  position: absolute;\n  box-shadow: 0 -0.05vw 0px 0.05vw lighten($purple, 20%), 0 0.05vw 0.05vw 0.05vw darken($red, 20%);\n  border: 0.05vw solid $red;\n  border-radius: 100%;\n}\n\n.hole {\n  @include size(8%);\n  background: $BLACK;\n  position: absolute;\n  border-radius: 100%;\n  z-index: 2000;\n  box-shadow: inset 0 -0.05vw 0px 0.05vw lighten($purple, 20%), inset 0 0.05vw 0.05vw 0.05vw darken($white, 20%);\n}\n\n.album {\n  @include position(absolute, 0 0 0 0, 999);\n  @include size(100%);\n  border-radius: 100%;\n  overflow: hidden;\n  opacity: 0.5;\n}\n</style>\n","<template>\n  <header v-if=\"playlist\">\n    <h1>{{ playlist.playlist_name }}</h1>\n    <h2>{{ playlist.user.handle }}</h2>\n    <IconButton \n      icon=\"play\" \n      label=\"Play All\"\n      @click=\"() => $emit('play-playlist', playlist)\"\n      class=\"play-button\"\n    />\n  </header>\n</template>\n\n<script setup lang=\"ts\">\nimport IconButton from \"../common/IconButton.vue\";\n\ndefineProps<{ playlist: any }>();\n\ndefineEmits<{\n  'play-playlist': [playlist: any];\n}>();\n</script>\n\n<style lang=\"scss\" scoped>\nheader {\n  @include flex-row(center, end);\n  @include box(3 0, 1);\n  width: 100%;\n  border-bottom: 1px solid $purple;\n}\n\nh1 {\n  font-size: 4rem;\n  text-transform: lowercase;\n}\n\nh2 {\n  color: $pink;\n  margin: 0 auto 0 0;\n}\n\n.play-button {\n  margin-left: auto;\n}\n</style>\n","<template>\n  <Column is=\"section\" :padding=\"3\" :gap=\"3\" cascade>\n    <AudiusPlaylistHeader :playlist=\"playlist\" @play-playlist=\"handlePlayPlaylist\" />\n    <AudiusTrackList :tracks=\"playlist?.tracks\" @play-track=\"handlePlayTrack\" />\n  </Column>\n</template>\n\n<script setup lang=\"ts\">\nimport Column from \"../layout/Column.vue\";\nimport AudiusPlaylistHeader from \"./AudiusPlaylistHeader.vue\";\nimport AudiusTrackList from \"./AudiusTrackList.vue\";\n\ndefineProps<{ playlist: any }>();\n\n// We'll get the track adapter from the parent page, so emit the events up\nconst emit = defineEmits<{\n  'play-playlist': [playlist: any];\n  'play-track': [track: any, index: number];\n}>();\n\nfunction handlePlayPlaylist(playlist: any) {\n  // Forward the event to parent\n  emit('play-playlist', playlist);\n}\n\nfunction handlePlayTrack(track: any, index: number) {\n  // Forward the event to parent\n  emit('play-track', track, index);\n}</script>\n\n<style lang=\"scss\" scoped>\nsection {\n  @include flex-column(start, start);\n  @include box(0 3, 2);\n  position: relative;\n  max-width: 1000px;\n  margin: 50vh auto 3rem auto;\n}\n</style>\n","<template>\n  <div class=\"record\">\n    <div class=\"vinyl-container\">\n      <Vinyl :src=\"src\" :playing=\"playing\" :volume=\"volume\" />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Vinyl from \"../common/Vinyl.vue\";\n\nwithDefaults(\n  defineProps<{\n    playing?: boolean;\n    volume?: number;\n    src?: string;\n    size?: string;\n  }>(),\n  {\n    src: `/images/native-speaker.jpg`,\n    size: \"150vh\"\n  }\n);\n</script>\n\n<style lang=\"scss\" scoped>\n.record {\n  @include position(absolute, 0 0 0 0, 0);\n}\n\n.vinyl-container {\n  @include size(100%);\n  @include flex;\n  animation: rotate 33.3333s linear infinite;\n  position: relative;\n}\n\n.vinyl {\n  position: absolute;\n  width: v-bind(size);\n  height: v-bind(size);\n  box-shadow: 0 0 10rem darken($black, 10%);\n}\n</style>\n","<template>\n  <View>\n    <Column v-if=\"playlist\" width=\"100vw\" cascade>\n      <Record :src=\"playlist.artwork?.['1000x1000']\" size=\"120vh\" />\n      <AudiusPlaylistBody \n        :playlist=\"playlist\"\n        @play-playlist=\"handlePlayPlaylist\"\n        @play-track=\"handlePlayTrack\"\n      />\n    </Column>\n  </View>\n</template>\n\n<script setup lang=\"ts\">\nimport { View, Column, Record, AudiusPlaylistBody, useRouteParamId, useGetAudiusPlaylistById, useQueue, useSources, useRouter, adaptTrack } from \"@wearesage/vue\";\nimport { AudioSource } from \"@wearesage/shared\";\nimport type { QueueTrack } from \"@wearesage/vue\";\n\nconst id = useRouteParamId();\nconst playlist = useGetAudiusPlaylistById(id);\nconst queue = useQueue();\nconst sources = useSources();\nconst router = useRouter();\n\n/**\n * Convert adapted track to queue format\n */\nfunction toQueueTrack(universalTrack: any): QueueTrack {\n  return {\n    id: universalTrack.id,\n    source: universalTrack.source,\n    sourceId: universalTrack.sourceId,\n    title: universalTrack.title,\n    artist: universalTrack.artist,\n    album: universalTrack.album,\n    duration: universalTrack.duration,\n    artwork: universalTrack.artwork,\n    rawData: universalTrack.rawData,\n  };\n}\n\nasync function handlePlayPlaylist(playlist: any) {\n  if (!playlist.tracks || playlist.tracks.length === 0) {\n    console.warn('Playlist has no tracks');\n    return;\n  }\n\n  console.log('ðŸŽµ Playing Audius playlist:', playlist.playlist_name, `(${playlist.tracks.length} tracks)`);\n  \n  // Convert all tracks to queue format\n  const queueTracks: QueueTrack[] = playlist.tracks\n    .map((track: any) => adaptTrack(track, AudioSource.AUDIUS))\n    .filter((track: any): track is any => track !== null)\n    .map((track: any) => toQueueTrack(track));\n  \n  if (queueTracks.length === 0) {\n    console.error('No valid tracks found in playlist');\n    return;\n  }\n  \n  // Ensure Audius is selected as the source FIRST (this will clear old queue)\n  if (sources.source !== AudioSource.AUDIUS) {\n    await sources.selectSource(AudioSource.AUDIUS);\n  }\n  \n  // THEN set the queue with all tracks\n  queue.setQueue(queueTracks, 0);\n  \n  // Start playback\n  if (!queue.queue.isPlaying) {\n    queue.togglePlayPause();\n  }\n  \n  router.push('/visualizer');\n}\n\nasync function handlePlayTrack(track: any, index: number) {\n  const universalTrack = adaptTrack(track, AudioSource.AUDIUS);\n  if (!universalTrack) return;\n  \n  // Switch source FIRST (this will clear the old queue)\n  if (sources.source !== AudioSource.AUDIUS) {\n    await sources.selectSource(AudioSource.AUDIUS);\n  }\n  \n  // THEN set the new track in the queue\n  const queueTrack = toQueueTrack(universalTrack);\n  queue.setQueue([queueTrack], 0);\n  \n  if (!queue.queue.isPlaying) {\n    queue.togglePlayPause();\n  }\n  router.push('/visualizer');\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.record {\n  transform: translateY(-15vh) !important;\n}\n\nmain {\n  height: 100vh;\n  overflow-y: auto;\n}\n</style>\n\n<route lang=\"json\">\n{\n  \"name\": \"Audius Playlist Detail\",\n  \"meta\": {\n    \"description\": \"view an Audius playlist\",\n    \"requiresAuth\": true\n  }\n}\n</route>\n"],"names":["useGetAudiusPlaylistById","id","audius","useAudius","playlist","ref","fetchPlaylist","watch","_imports_0","_createElementBlock","_normalizeClass","playing","_createElementVNode","_hoisted_1","src","_toDisplayString","_createVNode","IconButton","_cache","$emit","emit","__emit","handlePlayPlaylist","handlePlayTrack","track","index","_createBlock","Column","AudiusPlaylistHeader","AudiusTrackList","_openBlock","_hoisted_2","Vinyl","volume","useRouteParamId","queue","useQueue","sources","useSources","router","useRouter","toQueueTrack","universalTrack","queueTracks","adaptTrack","AudioSource","queueTrack","_unref","View","Record","AudiusPlaylistBody"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}