{"version":3,"file":"audius-DCwfeDZg.js","sources":["../../node_modules/@wearesage/vue/src/composables/data/useDebouncedSearch.ts","../../node_modules/@wearesage/vue/src/stores/audius.ts"],"sourcesContent":["import { watch, ref } from \"vue\";\n\nexport function useDebouncedSearch(search: any, timeoutDuration = 300) {\n  const query = ref(\"\");\n  const results = ref<any[]>([]);\n  const timeout = ref();\n\n  watch(\n    () => query.value,\n    async (val) => {\n      if (val.length > 2) {\n        clearTimeout(timeout.value);\n        timeout.value = setTimeout(async () => {\n          results.value = await search(query.value);\n        }, timeoutDuration);\n      } else {\n        results.value = [];\n      }\n    }\n  );\n\n  return {\n    query,\n    results,\n  };\n}\n","import { defineStore, acceptHMRUpdate } from \"pinia\";\nimport { ref } from \"vue\";\nimport { api } from \"../api/client\";\nimport { useDebouncedSearch } from \"../composables/data/useDebouncedSearch\";\n\nconst RANGES = [\"week\", \"month\", \"year\"] as const;\n\ntype Range = (typeof RANGES)[number];\n\nexport const useAudius = defineStore(\"audius\", () => {\n  const { query, results } = useDebouncedSearch(search);\n  const trending = ref({\n    tracks: { week: [], month: [], year: [] },\n    playlists: { week: [], month: [], year: [] },\n  });\n\n  async function search(query: string) {\n    const response = await api.get(`/api/audius/search/${query}`);\n    return response.data;\n  }\n\n  async function fetchUser(handle: string) {\n    const response = await api.get(`/api/audius/users/${handle}`);\n    return response.data;\n  }\n\n  async function fetchPlaylistById(id: string) {\n    const response = await api.get(`/api/audius/playlists/${id}`);\n    return response.data;\n  }\n\n  async function fetchTrendingPlaylists(range: Range) {\n    const response = await api.get(`/api/audius/playlists/trending/${range}`);\n    return response.data;\n  }\n\n  async function fetchTrendingTracks(range: Range) {\n    const response = await api.get(`/api/audius/tracks/trending/${range}`);\n    return response.data;\n  }\n\n  async function fetchAllTrendingPlaylists() {\n    const [week, month, year] = await Promise.all(RANGES.map((range) => fetchTrendingPlaylists(range)));\n    return { week, month, year };\n  }\n\n  async function fetchAllTrendingTracks() {\n    const [week, month, year] = await Promise.all(RANGES.map((range) => fetchTrendingTracks(range)));\n    return { week, month, year };\n  }\n\n  async function fetchTrending() {\n    const [tracks, playlists] = await Promise.all([fetchAllTrendingTracks(), fetchAllTrendingPlaylists()]);\n\n    trending.value = {\n      tracks,\n      playlists,\n    };\n  }\n\n  async function getTrackStream(trackId: string) {\n    const response = await api.get(`/api/audius/stream/${trackId}`);\n    return response.data;\n  }\n\n  return {\n    fetchTrendingPlaylists,\n    fetchTrendingTracks,\n    fetchAllTrendingPlaylists,\n    fetchAllTrendingTracks,\n    fetchTrending,\n    fetchPlaylistById,\n    fetchUser,\n    getTrackStream,\n    trending,\n    query,\n    results,\n  };\n});\n\nif (import.meta.hot) {\n  import.meta.hot.accept(acceptHMRUpdate(useAudius, import.meta.hot));\n}\n"],"names":["useDebouncedSearch","search","timeoutDuration","query","ref","results","timeout","watch","val","RANGES","useAudius","defineStore","trending","api","fetchUser","handle","fetchPlaylistById","id","fetchTrendingPlaylists","range","fetchTrendingTracks","fetchAllTrendingPlaylists","week","month","year","fetchAllTrendingTracks","fetchTrending","tracks","playlists","getTrackStream","trackId"],"mappings":"+DAEO,SAASA,EAAmBC,EAAaC,EAAkB,IAAK,CACrE,MAAMC,EAAQC,EAAI,EAAE,EACdC,EAAUD,EAAW,EAAE,EACvBE,EAAUF,EAAA,EAEhB,OAAAG,EACE,IAAMJ,EAAM,MACZ,MAAOK,GAAQ,CACTA,EAAI,OAAS,GACf,aAAaF,EAAQ,KAAK,EAC1BA,EAAQ,MAAQ,WAAW,SAAY,CACrCD,EAAQ,MAAQ,MAAMJ,EAAOE,EAAM,KAAK,CAAA,EACvCD,CAAe,GAElBG,EAAQ,MAAQ,CAAA,CAClB,CACF,EAGK,CACL,MAAAF,EACA,QAAAE,CAAA,CAEJ,CCpBA,MAAMI,EAAS,CAAC,OAAQ,QAAS,MAAM,EAI1BC,EAAYC,EAAY,SAAU,IAAM,CACnD,KAAM,CAAE,MAAAR,EAAO,QAAAE,GAAYL,EAAmBC,CAAM,EAC9CW,EAAWR,EAAI,CACnB,OAAQ,CAAE,KAAM,CAAA,EAAI,MAAO,CAAA,EAAI,KAAM,EAAC,EACtC,UAAW,CAAE,KAAM,CAAA,EAAI,MAAO,CAAA,EAAI,KAAM,CAAA,CAAC,CAAE,CAC5C,EAED,eAAeH,EAAOE,EAAe,CAEnC,OADiB,MAAMU,EAAI,IAAI,sBAAsBV,CAAK,EAAE,GAC5C,IAAA,CAGlB,eAAeW,EAAUC,EAAgB,CAEvC,OADiB,MAAMF,EAAI,IAAI,qBAAqBE,CAAM,EAAE,GAC5C,IAAA,CAGlB,eAAeC,EAAkBC,EAAY,CAE3C,OADiB,MAAMJ,EAAI,IAAI,yBAAyBI,CAAE,EAAE,GAC5C,IAAA,CAGlB,eAAeC,EAAuBC,EAAc,CAElD,OADiB,MAAMN,EAAI,IAAI,kCAAkCM,CAAK,EAAE,GACxD,IAAA,CAGlB,eAAeC,EAAoBD,EAAc,CAE/C,OADiB,MAAMN,EAAI,IAAI,+BAA+BM,CAAK,EAAE,GACrD,IAAA,CAGlB,eAAeE,GAA4B,CACzC,KAAM,CAACC,EAAMC,EAAOC,CAAI,EAAI,MAAM,QAAQ,IAAIf,EAAO,IAAKU,GAAUD,EAAuBC,CAAK,CAAC,CAAC,EAClG,MAAO,CAAE,KAAAG,EAAM,MAAAC,EAAO,KAAAC,CAAA,CAAK,CAG7B,eAAeC,GAAyB,CACtC,KAAM,CAACH,EAAMC,EAAOC,CAAI,EAAI,MAAM,QAAQ,IAAIf,EAAO,IAAKU,GAAUC,EAAoBD,CAAK,CAAC,CAAC,EAC/F,MAAO,CAAE,KAAAG,EAAM,MAAAC,EAAO,KAAAC,CAAA,CAAK,CAG7B,eAAeE,GAAgB,CAC7B,KAAM,CAACC,EAAQC,CAAS,EAAI,MAAM,QAAQ,IAAI,CAACH,EAAA,EAA0BJ,EAAA,CAA2B,CAAC,EAErGT,EAAS,MAAQ,CACf,OAAAe,EACA,UAAAC,CAAA,CACF,CAGF,eAAeC,EAAeC,EAAiB,CAE7C,OADiB,MAAMjB,EAAI,IAAI,sBAAsBiB,CAAO,EAAE,GAC9C,IAAA,CAGlB,MAAO,CACL,uBAAAZ,EACA,oBAAAE,EACA,0BAAAC,EACA,uBAAAI,EACA,cAAAC,EACA,kBAAAV,EACA,UAAAF,EACA,eAAAe,EACA,SAAAjB,EACA,MAAAT,EACA,QAAAE,CAAA,CAEJ,CAAC","x_google_ignoreList":[0,1]}