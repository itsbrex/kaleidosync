import{A as K,r as b,B as q,d as I,C as G,D as Q,c as _,a as y,R,n as V,b as v,h as f,g as a,T as h,e as $,i as g,t as U,l as m,E as Y,o as c,_ as P,G as O,p as L,u as t,m as W,H as J,I as Z,v as ee,J as j,z as te,K as se,x as oe,j as ae,w as C,V as ne}from"./index-xeh6oSzU.js";import{C as le}from"./Column-DJFcBtXG.js";import{A,R as re}from"./index-D0Qh0Tnp.js";import{M as x}from"./MenuHeader-CWykPqDq.js";/* empty css                                                             */function ue(){return[...new URLSearchParams(location.search).entries()].reduce((u,[r,n])=>(u[r]=n,u),{})}function ie(){const M=K(),u=b("https://beta.kaleidosync.com"),{copy:r}=q({source:u});async function n(){if(navigator?.canShare({url:u.value})){navigator?.share({url:u.value});return}await r(),M.message("Link copied to clipboard!")}return n}const ce={key:0,class:"logout"},de={class:"acct"},fe=I({__name:"AccountPill",setup(M){const u=G();Q();const r=b(!1),n=_(()=>u.walletAddress?`${u.walletAddress.slice(0,6)}...${u.walletAddress.slice(-4)}`:"");function s(){r.value}async function k(){await u.signOut()}function i(){r.value=!0}function l(){r.value=!1}return(S,d)=>(c(),y(R,{class:V(["account-pill",{logout:r.value}]),justify:"center",align:"center",onClick:s},{default:v(()=>[d[0]||(d[0]=f("i",{class:"online"},null,-1)),a(h,{name:"fade"},{default:v(()=>[r.value?(c(),$("span",ce," SIGN OUT ")):g("",!0)]),_:1}),f("span",de,U(n.value),1),a(m,{onClick:Y(k,["stop"]),onMouseover:i,onMouseout:l,icon:"logout",small:""})]),_:1,__:[0]},8,["class"]))}}),pe=P(fe,[["__scopeId","data-v-f90150f4"]]),ve=I({__name:"AudioSourceButton",emits:["click"],setup(M){const u=O(),r=L(),n=_(()=>u.showMenuLabels),s=_(()=>n.value?r.prettySource??"Audio Source":null);return(k,i)=>(c(),y(t(m),{onClick:i[0]||(i[0]=l=>k.$emit("click")),class:V({[`source_${t(r)?.source}`]:t(r)?.source!==void 0}),icon:t(r).sourceIcon,label:s.value},null,8,["class","icon","label"]))}}),me=P(ve,[["__scopeId","data-v-4490f9fe"]]),ke={class:"track-artwork"},_e=["src","alt"],ge={key:1,class:"artwork-placeholder"},Se={class:"track-title"},ye={class:"title"},we={key:0,class:"artist"},be={key:0,class:"none"},he=I({__name:"TrackDisplay",setup(M){const u=W(),r=L(),n=O(),s=_(()=>{const e=u.currentTrack;return console.log("üñºÔ∏è TrackDisplay currentTrack updated:",e),e}),k=_(()=>n.alwaysShowTrack?!0:r.source===J.SPOTIFY),i=_(()=>s.value?.title||"Unknown Track"),l=_(()=>s.value?.artist||"Unknown Artist");_(()=>s.value?.album);const S=_(()=>{const e=s.value?.artwork;return console.log("üñºÔ∏è TrackDisplay artwork debug:",{hasTrack:!!s.value,artwork:e,medium:e?.medium,large:e?.large,small:e?.small,track:s.value}),e?.medium||e?.large||e?.small});_(()=>{const e=s.value?.durationSeconds;if(!e)return null;const o=Math.floor(e/60),w=e%60;return`${o}:${w.toString().padStart(2,"0")}`}),_(()=>{const e=s.value?.progress;return e?Math.round(e*100):0}),_(()=>{const e=s.value?.position;if(!e)return"0:00";const o=Math.floor(e/1e3),w=Math.floor(o/60),T=o%60;return`${w}:${T.toString().padStart(2,"0")}`});function d(e){console.warn("üñºÔ∏è Artwork failed to load:",e.target?.src)}return(e,o)=>(c(),y(t(R),{class:"track-display",align:"center",justify:"center"},{default:v(()=>[a(h,{name:"fade"},{default:v(()=>[s.value?(c(),y(t(R),{key:0,center:""},{default:v(()=>[f("div",ke,[S.value?(c(),$("img",{key:0,src:S.value,alt:`${i.value} by ${l.value}`,onError:d},null,40,_e)):(c(),$("div",ge,[a(t(Z),{icon:"vinyl"})]))]),a(t(R),{justify:"center",padding:"1",gap:"1",class:"meta"},{default:v(()=>[f("h3",Se,[f("span",ye,U(i.value),1),o[0]||(o[0]=ee()),o[1]||(o[1]=f("em",null," | ",-1)),l.value?(c(),$("span",we,U(l.value),1)):g("",!0)])]),_:1})]),_:1})):g("",!0)]),_:1}),a(h,{name:"fade"},{default:v(()=>[!s.value&&k.value?(c(),$("h3",be,"No track currently playing")):g("",!0)]),_:1})]),_:1}))}}),$e=P(he,[["__scopeId","data-v-d754f602"]]),Me="/images/radio-paradise/main-mix.jpg",Ae="/images/radio-paradise/mellow-mix.jpg",Ce="/images/radio-paradise/rock-mix.jpg",Ie="/images/radio-paradise/global-mix.jpg",Te={key:0},Pe={key:0},Le={class:"file-container"},Re=I({__name:"AudioSources",emits:["select-source","close","select-radio-paradise"],setup(M,{emit:u}){const r=u,n=b(!1),s=b(),k=L();function i(){n.value=!n.value}function l(d){const e=re[d];r("select-radio-paradise",{station:e}),n.value=!1}async function S(d){const e=d.target,o=e.files;if(o&&o.length>0){console.log(`üìÅ Selected ${o.length} file(s):`);for(let w=0;w<o.length;w++)console.log(`üìÅ - ${o[w].name} (${o[w].type})`);await k.selectSource(A.FILE),await k.loadFiles(o),r("close")}e.value=""}return(d,e)=>(c(),$("div",null,[a(h,{name:"fade"},{default:v(()=>[n.value?(c(),$("nav",Te,[a(x,{title:"Choose your station",onClose:i}),a(t(le),{cascade:"",gap:".5"},{default:v(()=>[f("button",{class:"rp-btn",onClick:e[0]||(e[0]=o=>l("MAIN_MIX"))},e[9]||(e[9]=[f("img",{src:Me},null,-1)])),f("button",{class:"rp-btn",onClick:e[1]||(e[1]=o=>l("MELLOW_MIX"))},e[10]||(e[10]=[f("img",{src:Ae},null,-1)])),f("button",{class:"rp-btn",onClick:e[2]||(e[2]=o=>l("ROCK_MIX"))},e[11]||(e[11]=[f("img",{src:Ce},null,-1)])),f("button",{class:"rp-btn",onClick:e[3]||(e[3]=o=>l("GLOBAL_MIX"))},e[12]||(e[12]=[f("img",{src:Ie},null,-1)]))]),_:1})])):g("",!0)]),_:1}),a(h,{name:"fade"},{default:v(()=>[n.value?g("",!0):(c(),$("nav",Pe,[a(x,{onClose:e[4]||(e[4]=o=>d.$emit("close")),title:"choose your audio source"}),a(t(m),{icon:"spotify",onClick:e[5]||(e[5]=o=>d.$emit("select-source",t(A).SPOTIFY)),label:"Spotify"}),a(t(m),{icon:"audius",onClick:e[6]||(e[6]=o=>d.$emit("select-source",t(A).AUDIUS)),label:"Audius"}),a(t(m),{icon:"radio-paradise",onClick:i,label:"Radio Paradise"}),a(t(m),{icon:"kexp",onClick:e[7]||(e[7]=o=>d.$emit("select-source",t(A).KEXP)),label:"KEXP"}),a(t(m),{icon:"microphone",onClick:e[8]||(e[8]=o=>d.$emit("select-source",t(A).MICROPHONE)),label:"Microphone"}),f("span",Le,[a(t(m),{icon:"upload",label:"File"}),f("input",{ref_key:"fileInput",ref:s,type:"file",multiple:"",accept:"audio/*",onChange:S},null,544)])]))]),_:1})]))}}),Oe=P(Re,[["__scopeId","data-v-75ef01a0"]]),Ue=I({__name:"Menu",emits:["open-sources"],setup(M){const u=j(),r=L(),n=ie(),s=O();return(k,i)=>(c(),$("nav",null,[a(t(me),{onClick:i[0]||(i[0]=l=>k.$emit("open-sources"))}),t(r).source===t(A).AUDIUS?(c(),y(t(m),{key:0,to:"/audius",label:t(s).showMenuLabels?"Library":void 0,icon:"vinyl"},null,8,["label"])):g("",!0),a(t(m),{to:"/design",icon:"sliders",label:t(s).showMenuLabels?"Design":void 0},null,8,["label"]),a(t(m),{to:"/settings",icon:"settings",label:t(s).showMenuLabels?"Settings":void 0},null,8,["label"]),a(t(m),{onClick:t(n),icon:"share",label:t(s).showMenuLabels?"Share":void 0},null,8,["onClick","label"]),t(u).fullscreenSupported?(c(),y(t(m),{key:1,onClick:t(u).toggleFullscreen,icon:"fullscreen",label:t(s).showMenuLabels?"Fullscreen":void 0},null,8,["onClick","label"])):g("",!0)]))}}),De=P(Ue,[["__scopeId","data-v-5727870d"]]),F=2e3,Ee=I({__name:"visualizer",setup(M){const u=ae(),r=j(),n=L(),s=te(),k=O(),i=b(!n.source),l=b(!i.value),S=b(!1),{ArrowUp:d,ArrowDown:e,ArrowLeft:o,ArrowRight:w}=se(),T=b(null),D=b(null);oe(async()=>{ue().spotify==="connected"&&(n.selectSource(A.SPOTIFY),u.cleanQuery("spotify"),N(),E())}),C(()=>r.mouse,()=>{S.value||i.value||(clearTimeout(T.value),l.value=!0,T.value=setTimeout(()=>{l.value=!1},F))}),C(l,p=>{p?s.stopMagicInterval():s.startMagicInterval()},{immediate:!0}),C(()=>s.sketch,()=>E()),C(o,p=>{p&&s.selectPreviousSketch("keyboard")}),C(d,p=>{p&&s.selectPreviousSketch("keyboard")}),C(w,p=>{p&&s.selectNextSketch("keyboard")}),C(e,p=>{p&&s.selectNextSketch("keyboard")});function E(){clearTimeout(T.value),clearTimeout(D.value),S.value=!0,l.value=!1,D.value=setTimeout(()=>{S.value=!1},F/2)}function H(){l.value=!1,i.value=!0}function N(){i.value=!1,l.value=!0}function X(p){n.selectSource(p),i.value=!1,l.value=!1}function z(p){n.selectRadioParadiseStation(p.station),n.selectSource(A.RADIO_PARADISE),i.value=!1,l.value=!1}return(p,Fe)=>(c(),y(t(ne),null,{default:v(()=>[a(h,{name:"fade-up"},{default:v(()=>[l.value||i.value?(c(),y(t(pe),{key:0})):g("",!0)]),_:1}),a(h,{name:"fade"},{default:v(()=>[l.value&&!S.value?(c(),y(t(De),{key:0,onOpenSources:H})):g("",!0)]),_:1}),a(h,{name:"fade"},{default:v(()=>[i.value?(c(),y(t(Oe),{key:0,onClose:N,onSelectSource:X,onSelectRadioParadise:z})):g("",!0)]),_:1}),a(h,{name:"fade-down"},{default:v(()=>[l.value&&!S.value&&t(n).source||t(k).alwaysShowTrack?(c(),y(t($e),{key:0})):g("",!0)]),_:1})]),_:1}))}}),Ne="Visualizer",xe={description:"the main visualizer",requiresAuth:!0},B={name:Ne,meta:xe};typeof B=="function"&&B(Ee);export{Ee as default};
//# sourceMappingURL=visualizer-C_L3-rgc.js.map
