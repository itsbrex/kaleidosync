{"version":3,"file":"index-DAcWn00f.js","sources":["../../node_modules/@reown/appkit-controllers/dist/esm/src/utils/SwapCalculationUtil.js","../../node_modules/@reown/appkit-controllers/dist/esm/src/controllers/SwapController.js","../../node_modules/@reown/appkit-ui/dist/esm/src/composites/wui-token-button/styles.js","../../node_modules/@reown/appkit-ui/dist/esm/src/composites/wui-token-button/index.js"],"sourcesContent":["// -- Types --------------------------------------------- //\nimport { NumberUtil } from '@reown/appkit-common';\n// -- Util ---------------------------------------- //\nexport const SwapCalculationUtil = {\n    getGasPriceInEther(gas, gasPrice) {\n        const totalGasCostInWei = gasPrice * gas;\n        const totalGasCostInEther = Number(totalGasCostInWei) / 1e18;\n        return totalGasCostInEther;\n    },\n    getGasPriceInUSD(networkPrice, gas, gasPrice) {\n        const totalGasCostInEther = SwapCalculationUtil.getGasPriceInEther(gas, gasPrice);\n        const networkPriceInUSD = NumberUtil.bigNumber(networkPrice);\n        const gasCostInUSD = networkPriceInUSD.times(totalGasCostInEther);\n        return gasCostInUSD.toNumber();\n    },\n    getPriceImpact({ sourceTokenAmount, sourceTokenPriceInUSD, toTokenPriceInUSD, toTokenAmount }) {\n        const inputValue = NumberUtil.bigNumber(sourceTokenAmount).times(sourceTokenPriceInUSD);\n        const outputValue = NumberUtil.bigNumber(toTokenAmount).times(toTokenPriceInUSD);\n        const priceImpact = inputValue.minus(outputValue).div(inputValue).times(100);\n        return priceImpact.toNumber();\n    },\n    getMaxSlippage(slippage, toTokenAmount) {\n        const slippageToleranceDecimal = NumberUtil.bigNumber(slippage).div(100);\n        const maxSlippageAmount = NumberUtil.multiply(toTokenAmount, slippageToleranceDecimal);\n        return maxSlippageAmount.toNumber();\n    },\n    getProviderFee(sourceTokenAmount, feePercentage = 0.0085) {\n        const providerFee = NumberUtil.bigNumber(sourceTokenAmount).times(feePercentage);\n        return providerFee.toString();\n    },\n    isInsufficientNetworkTokenForGas(networkBalanceInUSD, gasPriceInUSD) {\n        const gasPrice = gasPriceInUSD || '0';\n        if (NumberUtil.bigNumber(networkBalanceInUSD).eq(0)) {\n            return true;\n        }\n        return NumberUtil.bigNumber(NumberUtil.bigNumber(gasPrice)).gt(networkBalanceInUSD);\n    },\n    isInsufficientSourceTokenForSwap(sourceTokenAmount, sourceTokenAddress, balance) {\n        const sourceTokenBalance = balance?.find(token => token.address === sourceTokenAddress)\n            ?.quantity?.numeric;\n        const isInSufficientBalance = NumberUtil.bigNumber(sourceTokenBalance || '0').lt(sourceTokenAmount);\n        return isInSufficientBalance;\n    },\n    getToTokenAmount({ sourceToken, toToken, sourceTokenPrice, toTokenPrice, sourceTokenAmount }) {\n        if (sourceTokenAmount === '0') {\n            return '0';\n        }\n        if (!sourceToken || !toToken) {\n            return '0';\n        }\n        const sourceTokenDecimals = sourceToken.decimals;\n        const sourceTokenPriceInUSD = sourceTokenPrice;\n        const toTokenDecimals = toToken.decimals;\n        const toTokenPriceInUSD = toTokenPrice;\n        if (toTokenPriceInUSD <= 0) {\n            return '0';\n        }\n        // Calculate the provider fee (0.85% of the source token amount)\n        const providerFee = NumberUtil.bigNumber(sourceTokenAmount).times(0.0085);\n        // Adjust the source token amount by subtracting the provider fee\n        const adjustedSourceTokenAmount = NumberUtil.bigNumber(sourceTokenAmount).minus(providerFee);\n        // Proceed with conversion using the adjusted source token amount\n        const sourceAmountInSmallestUnit = adjustedSourceTokenAmount.times(NumberUtil.bigNumber(10).pow(sourceTokenDecimals));\n        const priceRatio = NumberUtil.bigNumber(sourceTokenPriceInUSD).div(toTokenPriceInUSD);\n        const decimalDifference = sourceTokenDecimals - toTokenDecimals;\n        const toTokenAmountInSmallestUnit = sourceAmountInSmallestUnit\n            .times(priceRatio)\n            .div(NumberUtil.bigNumber(10).pow(decimalDifference));\n        const toTokenAmount = toTokenAmountInSmallestUnit.div(NumberUtil.bigNumber(10).pow(toTokenDecimals));\n        const amount = toTokenAmount.toFixed(toTokenDecimals).toString();\n        return amount;\n    }\n};\n//# sourceMappingURL=SwapCalculationUtil.js.map","import { proxy, subscribe as sub } from 'valtio/vanilla';\nimport { subscribeKey as subKey } from 'valtio/vanilla/utils';\nimport { NumberUtil } from '@reown/appkit-common';\nimport { ConstantsUtil as CommonConstantsUtil } from '@reown/appkit-common';\nimport { W3mFrameRpcConstants } from '@reown/appkit-wallet/utils';\nimport { BalanceUtil } from '../utils/BalanceUtil.js';\nimport { getActiveNetworkTokenAddress, getPreferredAccountType } from '../utils/ChainControllerUtil.js';\nimport { ConstantsUtil } from '../utils/ConstantsUtil.js';\nimport { CoreHelperUtil } from '../utils/CoreHelperUtil.js';\nimport { SwapApiUtil } from '../utils/SwapApiUtil.js';\nimport { SwapCalculationUtil } from '../utils/SwapCalculationUtil.js';\nimport { withErrorBoundary } from '../utils/withErrorBoundary.js';\nimport { AccountController } from './AccountController.js';\nimport { AlertController } from './AlertController.js';\nimport { BlockchainApiController } from './BlockchainApiController.js';\nimport { ChainController } from './ChainController.js';\nimport { ConnectionController } from './ConnectionController.js';\nimport { ConnectorController } from './ConnectorController.js';\nimport { EventsController } from './EventsController.js';\nimport { RouterController } from './RouterController.js';\nimport { SnackController } from './SnackController.js';\n// -- Constants ---------------------------------------- //\nexport const INITIAL_GAS_LIMIT = 150000;\nexport const TO_AMOUNT_DECIMALS = 6;\nclass TransactionError extends Error {\n    constructor(message, shortMessage) {\n        super(message);\n        this.name = 'TransactionError';\n        this.shortMessage = shortMessage;\n    }\n}\n// -- State --------------------------------------------- //\nconst initialState = {\n    // Loading states\n    initializing: false,\n    initialized: false,\n    loadingPrices: false,\n    loadingQuote: false,\n    loadingApprovalTransaction: false,\n    loadingBuildTransaction: false,\n    loadingTransaction: false,\n    // Error states\n    fetchError: false,\n    // Approval & Swap transaction states\n    approvalTransaction: undefined,\n    swapTransaction: undefined,\n    transactionError: undefined,\n    // Input values\n    sourceToken: undefined,\n    sourceTokenAmount: '',\n    sourceTokenPriceInUSD: 0,\n    toToken: undefined,\n    toTokenAmount: '',\n    toTokenPriceInUSD: 0,\n    networkPrice: '0',\n    networkBalanceInUSD: '0',\n    networkTokenSymbol: '',\n    inputError: undefined,\n    // Request values\n    slippage: ConstantsUtil.CONVERT_SLIPPAGE_TOLERANCE,\n    // Tokens\n    tokens: undefined,\n    popularTokens: undefined,\n    suggestedTokens: undefined,\n    foundTokens: undefined,\n    myTokensWithBalance: undefined,\n    tokensPriceMap: {},\n    // Calculations\n    gasFee: '0',\n    gasPriceInUSD: 0,\n    priceImpact: undefined,\n    maxSlippage: undefined,\n    providerFee: undefined\n};\nconst state = proxy(initialState);\n// -- Controller ---------------------------------------- //\nconst controller = {\n    state,\n    subscribe(callback) {\n        return sub(state, () => callback(state));\n    },\n    subscribeKey(key, callback) {\n        return subKey(state, key, callback);\n    },\n    getParams() {\n        const caipAddress = ChainController.state.activeCaipAddress;\n        const namespace = ChainController.state.activeChain;\n        const address = CoreHelperUtil.getPlainAddress(caipAddress);\n        const networkAddress = getActiveNetworkTokenAddress();\n        const connectorId = ConnectorController.getConnectorId(namespace);\n        if (!address) {\n            throw new Error('No address found to swap the tokens from.');\n        }\n        const invalidToToken = !state.toToken?.address || !state.toToken?.decimals;\n        const invalidSourceToken = !state.sourceToken?.address ||\n            !state.sourceToken?.decimals ||\n            !NumberUtil.bigNumber(state.sourceTokenAmount).gt(0);\n        const invalidSourceTokenAmount = !state.sourceTokenAmount;\n        return {\n            networkAddress,\n            fromAddress: address,\n            fromCaipAddress: caipAddress,\n            sourceTokenAddress: state.sourceToken?.address,\n            toTokenAddress: state.toToken?.address,\n            toTokenAmount: state.toTokenAmount,\n            toTokenDecimals: state.toToken?.decimals,\n            sourceTokenAmount: state.sourceTokenAmount,\n            sourceTokenDecimals: state.sourceToken?.decimals,\n            invalidToToken,\n            invalidSourceToken,\n            invalidSourceTokenAmount,\n            availableToSwap: caipAddress && !invalidToToken && !invalidSourceToken && !invalidSourceTokenAmount,\n            isAuthConnector: connectorId === CommonConstantsUtil.CONNECTOR_ID.AUTH\n        };\n    },\n    setSourceToken(sourceToken) {\n        if (!sourceToken) {\n            state.sourceToken = sourceToken;\n            state.sourceTokenAmount = '';\n            state.sourceTokenPriceInUSD = 0;\n            return;\n        }\n        state.sourceToken = sourceToken;\n        SwapController.setTokenPrice(sourceToken.address, 'sourceToken');\n    },\n    setSourceTokenAmount(amount) {\n        state.sourceTokenAmount = amount;\n    },\n    setToToken(toToken) {\n        if (!toToken) {\n            state.toToken = toToken;\n            state.toTokenAmount = '';\n            state.toTokenPriceInUSD = 0;\n            return;\n        }\n        state.toToken = toToken;\n        SwapController.setTokenPrice(toToken.address, 'toToken');\n    },\n    setToTokenAmount(amount) {\n        state.toTokenAmount = amount\n            ? NumberUtil.formatNumberToLocalString(amount, TO_AMOUNT_DECIMALS)\n            : '';\n    },\n    async setTokenPrice(address, target) {\n        let price = state.tokensPriceMap[address] || 0;\n        if (!price) {\n            state.loadingPrices = true;\n            price = await SwapController.getAddressPrice(address);\n        }\n        if (target === 'sourceToken') {\n            state.sourceTokenPriceInUSD = price;\n        }\n        else if (target === 'toToken') {\n            state.toTokenPriceInUSD = price;\n        }\n        if (state.loadingPrices) {\n            state.loadingPrices = false;\n        }\n        if (SwapController.getParams().availableToSwap) {\n            SwapController.swapTokens();\n        }\n    },\n    switchTokens() {\n        if (state.initializing || !state.initialized) {\n            return;\n        }\n        const newSourceToken = state.toToken ? { ...state.toToken } : undefined;\n        const newToToken = state.sourceToken ? { ...state.sourceToken } : undefined;\n        const newSourceTokenAmount = newSourceToken && state.toTokenAmount === '' ? '1' : state.toTokenAmount;\n        SwapController.setSourceToken(newSourceToken);\n        SwapController.setToToken(newToToken);\n        SwapController.setSourceTokenAmount(newSourceTokenAmount);\n        SwapController.setToTokenAmount('');\n        SwapController.swapTokens();\n    },\n    resetState() {\n        state.myTokensWithBalance = initialState.myTokensWithBalance;\n        state.tokensPriceMap = initialState.tokensPriceMap;\n        state.initialized = initialState.initialized;\n        state.sourceToken = initialState.sourceToken;\n        state.sourceTokenAmount = initialState.sourceTokenAmount;\n        state.sourceTokenPriceInUSD = initialState.sourceTokenPriceInUSD;\n        state.toToken = initialState.toToken;\n        state.toTokenAmount = initialState.toTokenAmount;\n        state.toTokenPriceInUSD = initialState.toTokenPriceInUSD;\n        state.networkPrice = initialState.networkPrice;\n        state.networkTokenSymbol = initialState.networkTokenSymbol;\n        state.networkBalanceInUSD = initialState.networkBalanceInUSD;\n        state.inputError = initialState.inputError;\n        state.myTokensWithBalance = initialState.myTokensWithBalance;\n    },\n    resetValues() {\n        const { networkAddress } = SwapController.getParams();\n        const networkToken = state.tokens?.find(token => token.address === networkAddress);\n        SwapController.setSourceToken(networkToken);\n        SwapController.setToToken(undefined);\n    },\n    getApprovalLoadingState() {\n        return state.loadingApprovalTransaction;\n    },\n    clearError() {\n        state.transactionError = undefined;\n    },\n    async initializeState() {\n        if (state.initializing) {\n            return;\n        }\n        state.initializing = true;\n        if (!state.initialized) {\n            try {\n                await SwapController.fetchTokens();\n                state.initialized = true;\n            }\n            catch (error) {\n                state.initialized = false;\n                SnackController.showError('Failed to initialize swap');\n                RouterController.goBack();\n            }\n        }\n        state.initializing = false;\n    },\n    async fetchTokens() {\n        const { networkAddress } = SwapController.getParams();\n        await SwapController.getTokenList();\n        await SwapController.getNetworkTokenPrice();\n        await SwapController.getMyTokensWithBalance();\n        const networkToken = state.tokens?.find(token => token.address === networkAddress);\n        if (networkToken) {\n            state.networkTokenSymbol = networkToken.symbol;\n            SwapController.setSourceToken(networkToken);\n            SwapController.setSourceTokenAmount('1');\n        }\n    },\n    async getTokenList() {\n        const tokens = await SwapApiUtil.getTokenList();\n        state.tokens = tokens;\n        state.popularTokens = tokens.sort((aTokenInfo, bTokenInfo) => {\n            if (aTokenInfo.symbol < bTokenInfo.symbol) {\n                return -1;\n            }\n            if (aTokenInfo.symbol > bTokenInfo.symbol) {\n                return 1;\n            }\n            return 0;\n        });\n        state.suggestedTokens = tokens.filter(token => {\n            if (ConstantsUtil.SWAP_SUGGESTED_TOKENS.includes(token.symbol)) {\n                return true;\n            }\n            return false;\n        }, {});\n    },\n    async getAddressPrice(address) {\n        const existPrice = state.tokensPriceMap[address];\n        if (existPrice) {\n            return existPrice;\n        }\n        const response = await BlockchainApiController.fetchTokenPrice({\n            addresses: [address]\n        });\n        const fungibles = response?.fungibles || [];\n        const allTokens = [...(state.tokens || []), ...(state.myTokensWithBalance || [])];\n        const symbol = allTokens?.find(token => token.address === address)?.symbol;\n        const price = fungibles.find(p => p.symbol.toLowerCase() === symbol?.toLowerCase())?.price || 0;\n        const priceAsFloat = parseFloat(price.toString());\n        state.tokensPriceMap[address] = priceAsFloat;\n        return priceAsFloat;\n    },\n    async getNetworkTokenPrice() {\n        const { networkAddress } = SwapController.getParams();\n        const response = await BlockchainApiController.fetchTokenPrice({\n            addresses: [networkAddress]\n        }).catch(() => {\n            SnackController.showError('Failed to fetch network token price');\n            return { fungibles: [] };\n        });\n        const token = response.fungibles?.[0];\n        const price = token?.price.toString() || '0';\n        state.tokensPriceMap[networkAddress] = parseFloat(price);\n        state.networkTokenSymbol = token?.symbol || '';\n        state.networkPrice = price;\n    },\n    async getMyTokensWithBalance(forceUpdate) {\n        const balances = await BalanceUtil.getMyTokensWithBalance(forceUpdate);\n        const swapBalances = SwapApiUtil.mapBalancesToSwapTokens(balances);\n        if (!swapBalances) {\n            return;\n        }\n        await SwapController.getInitialGasPrice();\n        SwapController.setBalances(swapBalances);\n    },\n    setBalances(balances) {\n        const { networkAddress } = SwapController.getParams();\n        const caipNetwork = ChainController.state.activeCaipNetwork;\n        if (!caipNetwork) {\n            return;\n        }\n        const networkToken = balances.find(token => token.address === networkAddress);\n        balances.forEach(token => {\n            state.tokensPriceMap[token.address] = token.price || 0;\n        });\n        state.myTokensWithBalance = balances.filter(token => token.address.startsWith(caipNetwork.caipNetworkId));\n        state.networkBalanceInUSD = networkToken\n            ? NumberUtil.multiply(networkToken.quantity.numeric, networkToken.price).toString()\n            : '0';\n    },\n    async getInitialGasPrice() {\n        const res = await SwapApiUtil.fetchGasPrice();\n        if (!res) {\n            return { gasPrice: null, gasPriceInUSD: null };\n        }\n        switch (ChainController.state?.activeCaipNetwork?.chainNamespace) {\n            case 'solana':\n                state.gasFee = res.standard ?? '0';\n                state.gasPriceInUSD = NumberUtil.multiply(res.standard, state.networkPrice)\n                    .div(1e9)\n                    .toNumber();\n                return {\n                    gasPrice: BigInt(state.gasFee),\n                    gasPriceInUSD: Number(state.gasPriceInUSD)\n                };\n            case 'eip155':\n            default:\n                // eslint-disable-next-line no-case-declarations\n                const value = res.standard ?? '0';\n                // eslint-disable-next-line no-case-declarations\n                const gasFee = BigInt(value);\n                // eslint-disable-next-line no-case-declarations\n                const gasLimit = BigInt(INITIAL_GAS_LIMIT);\n                // eslint-disable-next-line no-case-declarations\n                const gasPrice = SwapCalculationUtil.getGasPriceInUSD(state.networkPrice, gasLimit, gasFee);\n                state.gasFee = value;\n                state.gasPriceInUSD = gasPrice;\n                return { gasPrice: gasFee, gasPriceInUSD: gasPrice };\n        }\n    },\n    // -- Swap -------------------------------------- //\n    async swapTokens() {\n        const address = AccountController.state.address;\n        const sourceToken = state.sourceToken;\n        const toToken = state.toToken;\n        const haveSourceTokenAmount = NumberUtil.bigNumber(state.sourceTokenAmount).gt(0);\n        if (!haveSourceTokenAmount) {\n            SwapController.setToTokenAmount('');\n        }\n        if (!toToken || !sourceToken || state.loadingPrices || !haveSourceTokenAmount) {\n            return;\n        }\n        state.loadingQuote = true;\n        const amountDecimal = NumberUtil.bigNumber(state.sourceTokenAmount)\n            .times(10 ** sourceToken.decimals)\n            .round(0);\n        try {\n            const quoteResponse = await BlockchainApiController.fetchSwapQuote({\n                userAddress: address,\n                from: sourceToken.address,\n                to: toToken.address,\n                gasPrice: state.gasFee,\n                amount: amountDecimal.toString()\n            });\n            state.loadingQuote = false;\n            const quoteToAmount = quoteResponse?.quotes?.[0]?.toAmount;\n            if (!quoteToAmount) {\n                AlertController.open({\n                    shortMessage: 'Incorrect amount',\n                    longMessage: 'Please enter a valid amount'\n                }, 'error');\n                return;\n            }\n            const toTokenAmount = NumberUtil.bigNumber(quoteToAmount)\n                .div(10 ** toToken.decimals)\n                .toString();\n            SwapController.setToTokenAmount(toTokenAmount);\n            const isInsufficientToken = SwapController.hasInsufficientToken(state.sourceTokenAmount, sourceToken.address);\n            if (isInsufficientToken) {\n                state.inputError = 'Insufficient balance';\n            }\n            else {\n                state.inputError = undefined;\n                SwapController.setTransactionDetails();\n            }\n        }\n        catch (error) {\n            state.loadingQuote = false;\n            state.inputError = 'Insufficient balance';\n        }\n    },\n    // -- Create Transactions -------------------------------------- //\n    async getTransaction() {\n        const { fromCaipAddress, availableToSwap } = SwapController.getParams();\n        const sourceToken = state.sourceToken;\n        const toToken = state.toToken;\n        if (!fromCaipAddress || !availableToSwap || !sourceToken || !toToken || state.loadingQuote) {\n            return undefined;\n        }\n        try {\n            state.loadingBuildTransaction = true;\n            const hasAllowance = await SwapApiUtil.fetchSwapAllowance({\n                userAddress: fromCaipAddress,\n                tokenAddress: sourceToken.address,\n                sourceTokenAmount: state.sourceTokenAmount,\n                sourceTokenDecimals: sourceToken.decimals\n            });\n            let transaction = undefined;\n            if (hasAllowance) {\n                transaction = await SwapController.createSwapTransaction();\n            }\n            else {\n                transaction = await SwapController.createAllowanceTransaction();\n            }\n            state.loadingBuildTransaction = false;\n            state.fetchError = false;\n            return transaction;\n        }\n        catch (error) {\n            RouterController.goBack();\n            SnackController.showError('Failed to check allowance');\n            state.loadingBuildTransaction = false;\n            state.approvalTransaction = undefined;\n            state.swapTransaction = undefined;\n            state.fetchError = true;\n            return undefined;\n        }\n    },\n    async createAllowanceTransaction() {\n        const { fromCaipAddress, sourceTokenAddress, toTokenAddress } = SwapController.getParams();\n        if (!fromCaipAddress || !toTokenAddress) {\n            return undefined;\n        }\n        if (!sourceTokenAddress) {\n            throw new Error('createAllowanceTransaction - No source token address found.');\n        }\n        try {\n            const response = await BlockchainApiController.generateApproveCalldata({\n                from: sourceTokenAddress,\n                to: toTokenAddress,\n                userAddress: fromCaipAddress\n            });\n            const transaction = {\n                data: response.tx.data,\n                to: CoreHelperUtil.getPlainAddress(response.tx.from),\n                gasPrice: BigInt(response.tx.eip155.gasPrice),\n                value: BigInt(response.tx.value),\n                toAmount: state.toTokenAmount\n            };\n            state.swapTransaction = undefined;\n            state.approvalTransaction = {\n                data: transaction.data,\n                to: transaction.to,\n                gasPrice: transaction.gasPrice,\n                value: transaction.value,\n                toAmount: transaction.toAmount\n            };\n            return {\n                data: transaction.data,\n                to: transaction.to,\n                gasPrice: transaction.gasPrice,\n                value: transaction.value,\n                toAmount: transaction.toAmount\n            };\n        }\n        catch (error) {\n            RouterController.goBack();\n            SnackController.showError('Failed to create approval transaction');\n            state.approvalTransaction = undefined;\n            state.swapTransaction = undefined;\n            state.fetchError = true;\n            return undefined;\n        }\n    },\n    async createSwapTransaction() {\n        const { networkAddress, fromCaipAddress, sourceTokenAmount } = SwapController.getParams();\n        const sourceToken = state.sourceToken;\n        const toToken = state.toToken;\n        if (!fromCaipAddress || !sourceTokenAmount || !sourceToken || !toToken) {\n            return undefined;\n        }\n        const amount = ConnectionController.parseUnits(sourceTokenAmount, sourceToken.decimals)?.toString();\n        try {\n            const response = await BlockchainApiController.generateSwapCalldata({\n                userAddress: fromCaipAddress,\n                from: sourceToken.address,\n                to: toToken.address,\n                amount: amount,\n                disableEstimate: true\n            });\n            const isSourceTokenIsNetworkToken = sourceToken.address === networkAddress;\n            const gas = BigInt(response.tx.eip155.gas);\n            const gasPrice = BigInt(response.tx.eip155.gasPrice);\n            const transaction = {\n                data: response.tx.data,\n                to: CoreHelperUtil.getPlainAddress(response.tx.to),\n                gas,\n                gasPrice,\n                value: isSourceTokenIsNetworkToken ? BigInt(amount ?? '0') : BigInt('0'),\n                toAmount: state.toTokenAmount\n            };\n            state.gasPriceInUSD = SwapCalculationUtil.getGasPriceInUSD(state.networkPrice, gas, gasPrice);\n            state.approvalTransaction = undefined;\n            state.swapTransaction = transaction;\n            return transaction;\n        }\n        catch (error) {\n            RouterController.goBack();\n            SnackController.showError('Failed to create transaction');\n            state.approvalTransaction = undefined;\n            state.swapTransaction = undefined;\n            state.fetchError = true;\n            return undefined;\n        }\n    },\n    // -- Send Transactions --------------------------------- //\n    async sendTransactionForApproval(data) {\n        const { fromAddress, isAuthConnector } = SwapController.getParams();\n        state.loadingApprovalTransaction = true;\n        const approveLimitMessage = `Approve limit increase in your wallet`;\n        if (isAuthConnector) {\n            RouterController.pushTransactionStack({\n                onSuccess() {\n                    SnackController.showLoading(approveLimitMessage);\n                }\n            });\n        }\n        else {\n            SnackController.showLoading(approveLimitMessage);\n        }\n        try {\n            await ConnectionController.sendTransaction({\n                address: fromAddress,\n                to: data.to,\n                data: data.data,\n                value: data.value,\n                chainNamespace: 'eip155'\n            });\n            await SwapController.swapTokens();\n            await SwapController.getTransaction();\n            state.approvalTransaction = undefined;\n            state.loadingApprovalTransaction = false;\n        }\n        catch (err) {\n            const error = err;\n            state.transactionError = error?.shortMessage;\n            state.loadingApprovalTransaction = false;\n            SnackController.showError(error?.shortMessage || 'Transaction error');\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SWAP_APPROVAL_ERROR',\n                properties: {\n                    message: error?.shortMessage || error?.message || 'Unknown',\n                    network: ChainController.state.activeCaipNetwork?.caipNetworkId || '',\n                    swapFromToken: SwapController.state.sourceToken?.symbol || '',\n                    swapToToken: SwapController.state.toToken?.symbol || '',\n                    swapFromAmount: SwapController.state.sourceTokenAmount || '',\n                    swapToAmount: SwapController.state.toTokenAmount || '',\n                    isSmartAccount: getPreferredAccountType('eip155') === W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT\n                }\n            });\n        }\n    },\n    async sendTransactionForSwap(data) {\n        if (!data) {\n            return undefined;\n        }\n        const { fromAddress, toTokenAmount, isAuthConnector } = SwapController.getParams();\n        state.loadingTransaction = true;\n        const snackbarPendingMessage = `Swapping ${state.sourceToken?.symbol} to ${NumberUtil.formatNumberToLocalString(toTokenAmount, 3)} ${state.toToken?.symbol}`;\n        const snackbarSuccessMessage = `Swapped ${state.sourceToken?.symbol} to ${NumberUtil.formatNumberToLocalString(toTokenAmount, 3)} ${state.toToken?.symbol}`;\n        if (isAuthConnector) {\n            RouterController.pushTransactionStack({\n                onSuccess() {\n                    RouterController.replace('Account');\n                    SnackController.showLoading(snackbarPendingMessage);\n                    controller.resetState();\n                }\n            });\n        }\n        else {\n            SnackController.showLoading('Confirm transaction in your wallet');\n        }\n        try {\n            const forceUpdateAddresses = [state.sourceToken?.address, state.toToken?.address].join(',');\n            const transactionHash = await ConnectionController.sendTransaction({\n                address: fromAddress,\n                to: data.to,\n                data: data.data,\n                value: data.value,\n                chainNamespace: 'eip155'\n            });\n            state.loadingTransaction = false;\n            SnackController.showSuccess(snackbarSuccessMessage);\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SWAP_SUCCESS',\n                properties: {\n                    network: ChainController.state.activeCaipNetwork?.caipNetworkId || '',\n                    swapFromToken: SwapController.state.sourceToken?.symbol || '',\n                    swapToToken: SwapController.state.toToken?.symbol || '',\n                    swapFromAmount: SwapController.state.sourceTokenAmount || '',\n                    swapToAmount: SwapController.state.toTokenAmount || '',\n                    isSmartAccount: getPreferredAccountType('eip155') === W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT\n                }\n            });\n            controller.resetState();\n            if (!isAuthConnector) {\n                RouterController.replace('Account');\n            }\n            controller.getMyTokensWithBalance(forceUpdateAddresses);\n            return transactionHash;\n        }\n        catch (err) {\n            const error = err;\n            state.transactionError = error?.shortMessage;\n            state.loadingTransaction = false;\n            SnackController.showError(error?.shortMessage || 'Transaction error');\n            EventsController.sendEvent({\n                type: 'track',\n                event: 'SWAP_ERROR',\n                properties: {\n                    message: error?.shortMessage || error?.message || 'Unknown',\n                    network: ChainController.state.activeCaipNetwork?.caipNetworkId || '',\n                    swapFromToken: SwapController.state.sourceToken?.symbol || '',\n                    swapToToken: SwapController.state.toToken?.symbol || '',\n                    swapFromAmount: SwapController.state.sourceTokenAmount || '',\n                    swapToAmount: SwapController.state.toTokenAmount || '',\n                    isSmartAccount: getPreferredAccountType('eip155') === W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT\n                }\n            });\n            return undefined;\n        }\n    },\n    // -- Checks -------------------------------------------- //\n    hasInsufficientToken(sourceTokenAmount, sourceTokenAddress) {\n        const isInsufficientSourceTokenForSwap = SwapCalculationUtil.isInsufficientSourceTokenForSwap(sourceTokenAmount, sourceTokenAddress, state.myTokensWithBalance);\n        return isInsufficientSourceTokenForSwap;\n    },\n    // -- Calculations -------------------------------------- //\n    setTransactionDetails() {\n        const { toTokenAddress, toTokenDecimals } = SwapController.getParams();\n        if (!toTokenAddress || !toTokenDecimals) {\n            return;\n        }\n        state.gasPriceInUSD = SwapCalculationUtil.getGasPriceInUSD(state.networkPrice, BigInt(state.gasFee), BigInt(INITIAL_GAS_LIMIT));\n        state.priceImpact = SwapCalculationUtil.getPriceImpact({\n            sourceTokenAmount: state.sourceTokenAmount,\n            sourceTokenPriceInUSD: state.sourceTokenPriceInUSD,\n            toTokenPriceInUSD: state.toTokenPriceInUSD,\n            toTokenAmount: state.toTokenAmount\n        });\n        state.maxSlippage = SwapCalculationUtil.getMaxSlippage(state.slippage, state.toTokenAmount);\n        state.providerFee = SwapCalculationUtil.getProviderFee(state.sourceTokenAmount);\n    }\n};\n// Export the controller wrapped with our error boundary\nexport const SwapController = withErrorBoundary(controller);\n//# sourceMappingURL=SwapController.js.map","import { css } from 'lit';\nexport default css `\n  :host {\n    display: block;\n  }\n\n  :host > button {\n    gap: var(--wui-spacing-xxs);\n    padding: var(--wui-spacing-xs);\n    padding-right: var(--wui-spacing-1xs);\n    height: 40px;\n    border-radius: var(--wui-border-radius-l);\n    background: var(--wui-color-gray-glass-002);\n    border-width: 0px;\n    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);\n  }\n\n  :host > button wui-image {\n    width: 24px;\n    height: 24px;\n    border-radius: var(--wui-border-radius-s);\n    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);\n  }\n`;\n//# sourceMappingURL=styles.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { LitElement, html } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport '../../components/wui-image/index.js';\nimport '../../components/wui-text/index.js';\nimport { elementStyles, resetStyles } from '../../utils/ThemeUtil.js';\nimport { customElement } from '../../utils/WebComponentsUtil.js';\nimport '../wui-icon-box/index.js';\nimport styles from './styles.js';\nlet WuiTokenButton = class WuiTokenButton extends LitElement {\n    constructor() {\n        super(...arguments);\n        this.text = '';\n    }\n    render() {\n        return html `\n      <button>\n        ${this.tokenTemplate()}\n        <wui-text variant=\"paragraph-600\" color=\"fg-100\">${this.text}</wui-text>\n      </button>\n    `;\n    }\n    tokenTemplate() {\n        if (this.imageSrc) {\n            return html `<wui-image src=${this.imageSrc}></wui-image>`;\n        }\n        return html `\n      <wui-icon-box\n        size=\"sm\"\n        iconColor=\"fg-200\"\n        backgroundColor=\"fg-300\"\n        icon=\"networkPlaceholder\"\n      ></wui-icon-box>\n    `;\n    }\n};\nWuiTokenButton.styles = [resetStyles, elementStyles, styles];\n__decorate([\n    property()\n], WuiTokenButton.prototype, \"imageSrc\", void 0);\n__decorate([\n    property()\n], WuiTokenButton.prototype, \"text\", void 0);\nWuiTokenButton = __decorate([\n    customElement('wui-token-button')\n], WuiTokenButton);\nexport { WuiTokenButton };\n//# sourceMappingURL=index.js.map"],"names":["SwapCalculationUtil","gas","gasPrice","totalGasCostInWei","networkPrice","totalGasCostInEther","NumberUtil","sourceTokenAmount","sourceTokenPriceInUSD","toTokenPriceInUSD","toTokenAmount","inputValue","outputValue","slippage","slippageToleranceDecimal","feePercentage","networkBalanceInUSD","gasPriceInUSD","sourceTokenAddress","balance","sourceTokenBalance","token","sourceToken","toToken","sourceTokenPrice","toTokenPrice","sourceTokenDecimals","toTokenDecimals","providerFee","sourceAmountInSmallestUnit","priceRatio","decimalDifference","INITIAL_GAS_LIMIT","TO_AMOUNT_DECIMALS","initialState","ConstantsUtil","state","proxy","controller","callback","sub","key","subKey","caipAddress","ChainController","namespace","address","CoreHelperUtil","networkAddress","getActiveNetworkTokenAddress","connectorId","ConnectorController","invalidToToken","invalidSourceToken","invalidSourceTokenAmount","CommonConstantsUtil","SwapController","amount","target","price","newSourceToken","newToToken","newSourceTokenAmount","networkToken","SnackController","RouterController","tokens","SwapApiUtil","aTokenInfo","bTokenInfo","existPrice","fungibles","BlockchainApiController","symbol","p","priceAsFloat","forceUpdate","balances","BalanceUtil","swapBalances","caipNetwork","res","value","gasFee","gasLimit","AccountController","haveSourceTokenAmount","amountDecimal","quoteResponse","quoteToAmount","AlertController","fromCaipAddress","availableToSwap","hasAllowance","transaction","toTokenAddress","response","ConnectionController","isSourceTokenIsNetworkToken","data","fromAddress","isAuthConnector","approveLimitMessage","err","error","EventsController","getPreferredAccountType","W3mFrameRpcConstants","snackbarPendingMessage","snackbarSuccessMessage","forceUpdateAddresses","transactionHash","withErrorBoundary","styles","css","__decorate","decorators","desc","c","r","d","i","WuiTokenButton","LitElement","html","resetStyles","elementStyles","property","customElement"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}