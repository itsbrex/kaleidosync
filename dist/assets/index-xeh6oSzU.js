const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-BqKgfAgK.js","assets/if-defined-DlTid8OG.js","assets/index-DxnriG3M.js","assets/index-_BiY2HJ4.js","assets/ref-D-yuKeea.js","assets/index-CILjpBgV.js","assets/index-lREVjLtT.js","assets/index-BuWDF8Nt.js","assets/index-CgFMynro.js","assets/index-Cgz4xfK4.js","assets/index-DhmUn2IF.js","assets/index-CV2w0fZP.js","assets/email-BLVhkGyv.js","assets/index-DMNICIgx.js","assets/socials-C0yI5LDZ.js","assets/index-DH-un47l.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DLU39T15.js","assets/index-zZmqK8Dj.js","assets/index-CNYAJdJr.js","assets/index-s7dO8VZb.js","assets/swaps-JbaZCBpS.js","assets/index-Ch5K5jeE.js","assets/index-BWKrlHFf.js","assets/index-DAcWn00f.js","assets/send-Clke3WpO.js","assets/index-BivH6iNH.js","assets/index-DxXqiEiB.js","assets/receive-mKjJuG_y.js","assets/index-DNWBG0jq.js","assets/onramp-CnB6aGkd.js","assets/index-CWGfwXFB.js","assets/index-CCs5CaNi.js","assets/index-Ct1wYfeS.js","assets/transactions-C60bbiwv.js","assets/index-k4br0d9j.js","assets/index-B3nrOkeb.js","assets/index-B60BOmoh.js","assets/index-B7krVUij.js","assets/index-BR1bSxWO.js","assets/w3m-modal-Ccz4UsDL.js","assets/audio-_CqgTru1.js","assets/useAudioAnalyser-L8BEAKYW.js","assets/useAudioMetadata-Zh08VHOY.js","assets/browser-CE8oubu2.js","assets/audius.users._id_-Dqco_tQM.js","assets/audius-DGwImyxT.js","assets/AudiusTrackList-Cg1eBcPU.js","assets/Column-DJFcBtXG.js","assets/AudiusArtwork-CG5yGJ0F.js","assets/audius.users-BSyDayBw.css","assets/audius.playlists._id_-DXLRU9XV.js","assets/index-D0Qh0Tnp.js","assets/audius.playlists-DmM4RijU.css","assets/g._id_-DMBRZxJR.js","assets/Sketch.vue_vue_type_script_setup_true_lang-FIcsQPgM.js","assets/visualizer-C_L3-rgc.js","assets/MenuHeader-CWykPqDq.js","assets/Menu--VYiYpO7.css","assets/settings-D_NAWqNn.js","assets/settings-BN0asP6V.css","assets/design-DNMzqvOE.js","assets/design-TCkWpbg2.css","assets/audius-Bkhrw88f.js","assets/audius-BjOln0PO.css","assets/index-Dzbx7dgp.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const pK="modulepreload",mK=function(n){return"/"+n},eI={},Ct=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=o(t.map(l=>{if(l=mK(l),l in eI)return;eI[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":pK,u||(d.as="script"),d.crossOrigin="",d.href=l,c&&d.setAttribute("nonce",c),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function AC(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const sr={},n0=[],$a=()=>{},gK=()=>!1,B_=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),CC=n=>n.startsWith("onUpdate:"),bi=Object.assign,TC=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},yK=Object.prototype.hasOwnProperty,$n=(n,e)=>yK.call(n,e),Ht=Array.isArray,r0=n=>F_(n)==="[object Map]",jL=n=>F_(n)==="[object Set]",Gt=n=>typeof n=="function",Dr=n=>typeof n=="string",iu=n=>typeof n=="symbol",ar=n=>n!==null&&typeof n=="object",GL=n=>(ar(n)||Gt(n))&&Gt(n.then)&&Gt(n.catch),KL=Object.prototype.toString,F_=n=>KL.call(n),wK=n=>F_(n).slice(8,-1),YL=n=>F_(n)==="[object Object]",IC=n=>Dr(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,zm=AC(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$_=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},vK=/-(\w)/g,aa=$_(n=>n.replace(vK,(e,t)=>t?t.toUpperCase():"")),bK=/\B([A-Z])/g,xf=$_(n=>n.replace(bK,"-$1").toLowerCase()),z_=$_(n=>n.charAt(0).toUpperCase()+n.slice(1)),oE=$_(n=>n?`on${z_(n)}`:""),ch=(n,e)=>!Object.is(n,e),aE=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Ax=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},_K=n=>{const e=parseFloat(n);return isNaN(e)?n:e},EK=n=>{const e=Dr(n)?Number(n):NaN;return isNaN(e)?n:e};let tI;const H_=()=>tI||(tI=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Dh(n){if(Ht(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Dr(r)?CK(r):Dh(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Dr(n)||ar(n))return n}const xK=/;(?![^(]*\))/g,SK=/:([^]+)/,AK=/\/\*[^]*?\*\//g;function CK(n){const e={};return n.replace(AK,"").split(xK).forEach(t=>{if(t){const r=t.split(SK);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Io(n){let e="";if(Dr(n))e=n;else if(Ht(n))for(let t=0;t<n.length;t++){const r=Io(n[t]);r&&(e+=r+" ")}else if(ar(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const TK="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",IK=AC(TK);function XL(n){return!!n||n===""}const ZL=n=>!!(n&&n.__v_isRef===!0),Rc=n=>Dr(n)?n:n==null?"":Ht(n)||ar(n)&&(n.toString===KL||!Gt(n.toString))?ZL(n)?Rc(n.value):JSON.stringify(n,JL,2):String(n),JL=(n,e)=>ZL(e)?JL(n,e.value):r0(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[cE(r,s)+" =>"]=i,t),{})}:jL(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>cE(t))}:iu(e)?cE(e):ar(e)&&!Ht(e)&&!YL(e)?String(e):e,cE=(n,e="")=>{var t;return iu(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let is;class QL{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=is,!e&&is&&(this.index=(is.scopes||(is.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=is;try{return is=this,e()}finally{is=t}}}on(){++this._on===1&&(this.prevScope=is,is=this)}off(){this._on>0&&--this._on===0&&(is=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function eU(n){return new QL(n)}function V_(){return is}function MC(n,e=!1){is&&is.cleanups.push(n)}let rr;const lE=new WeakSet;class tU{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,is&&is.active&&is.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,lE.has(this)&&(lE.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||rU(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nI(this),iU(this);const e=rr,t=za;rr=this,za=!0;try{return this.fn()}finally{sU(this),rr=e,za=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)NC(e);this.deps=this.depsTail=void 0,nI(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?lE.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cx(this)&&this.run()}get dirty(){return Cx(this)}}let nU=0,Hm,Vm;function rU(n,e=!1){if(n.flags|=8,e){n.next=Vm,Vm=n;return}n.next=Hm,Hm=n}function RC(){nU++}function PC(){if(--nU>0)return;if(Vm){let e=Vm;for(Vm=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Hm;){let e=Hm;for(Hm=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function iU(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function sU(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),NC(r),MK(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Cx(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(oU(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function oU(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Mg)||(n.globalVersion=Mg,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Cx(n))))return;n.flags|=2;const e=n.dep,t=rr,r=za;rr=n,za=!0;try{iU(n);const i=n.fn(n._value);(e.version===0||ch(i,n._value))&&(n.flags|=128,n._value=i,e.version++)}catch(i){throw e.version++,i}finally{rr=t,za=r,sU(n),n.flags&=-3}}function NC(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)NC(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function MK(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let za=!0;const aU=[];function ql(){aU.push(za),za=!1}function jl(){const n=aU.pop();za=n===void 0?!0:n}function nI(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=rr;rr=void 0;try{e()}finally{rr=t}}}let Mg=0;class RK{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class W_{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!rr||!za||rr===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==rr)t=this.activeLink=new RK(rr,this),rr.deps?(t.prevDep=rr.depsTail,rr.depsTail.nextDep=t,rr.depsTail=t):rr.deps=rr.depsTail=t,cU(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=rr.depsTail,t.nextDep=void 0,rr.depsTail.nextDep=t,rr.depsTail=t,rr.deps===t&&(rr.deps=r)}return t}trigger(e){this.version++,Mg++,this.notify(e)}notify(e){RC();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{PC()}}}function cU(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)cU(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const B3=new WeakMap,Hd=Symbol(""),Tx=Symbol(""),Rg=Symbol("");function ss(n,e,t){if(za&&rr){let r=B3.get(n);r||B3.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new W_),i.map=r,i.key=t),i.track()}}function Il(n,e,t,r,i,s){const o=B3.get(n);if(!o){Mg++;return}const a=c=>{c&&c.trigger()};if(RC(),e==="clear")o.forEach(a);else{const c=Ht(n),l=c&&IC(t);if(c&&t==="length"){const u=Number(r);o.forEach((h,d)=>{(d==="length"||d===Rg||!iu(d)&&d>=u)&&a(h)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),l&&a(o.get(Rg)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Hd)),r0(n)&&a(o.get(Tx)));break;case"delete":c||(a(o.get(Hd)),r0(n)&&a(o.get(Tx)));break;case"set":r0(n)&&a(o.get(Hd));break}}PC()}function PK(n,e){const t=B3.get(n);return t&&t.get(e)}function Vf(n){const e=fn(n);return e===n?e:(ss(e,"iterate",Rg),ra(n)?e:e.map(ki))}function q_(n){return ss(n=fn(n),"iterate",Rg),n}const NK={__proto__:null,[Symbol.iterator](){return uE(this,Symbol.iterator,ki)},concat(...n){return Vf(this).concat(...n.map(e=>Ht(e)?Vf(e):e))},entries(){return uE(this,"entries",n=>(n[1]=ki(n[1]),n))},every(n,e){return el(this,"every",n,e,void 0,arguments)},filter(n,e){return el(this,"filter",n,e,t=>t.map(ki),arguments)},find(n,e){return el(this,"find",n,e,ki,arguments)},findIndex(n,e){return el(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return el(this,"findLast",n,e,ki,arguments)},findLastIndex(n,e){return el(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return el(this,"forEach",n,e,void 0,arguments)},includes(...n){return hE(this,"includes",n)},indexOf(...n){return hE(this,"indexOf",n)},join(n){return Vf(this).join(n)},lastIndexOf(...n){return hE(this,"lastIndexOf",n)},map(n,e){return el(this,"map",n,e,void 0,arguments)},pop(){return M1(this,"pop")},push(...n){return M1(this,"push",n)},reduce(n,...e){return rI(this,"reduce",n,e)},reduceRight(n,...e){return rI(this,"reduceRight",n,e)},shift(){return M1(this,"shift")},some(n,e){return el(this,"some",n,e,void 0,arguments)},splice(...n){return M1(this,"splice",n)},toReversed(){return Vf(this).toReversed()},toSorted(n){return Vf(this).toSorted(n)},toSpliced(...n){return Vf(this).toSpliced(...n)},unshift(...n){return M1(this,"unshift",n)},values(){return uE(this,"values",ki)}};function uE(n,e,t){const r=q_(n),i=r[e]();return r!==n&&!ra(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const OK=Array.prototype;function el(n,e,t,r,i,s){const o=q_(n),a=o!==n&&!ra(n),c=o[e];if(c!==OK[e]){const h=c.apply(n,s);return a?ki(h):h}let l=t;o!==n&&(a?l=function(h,d){return t.call(this,ki(h),d,n)}:t.length>2&&(l=function(h,d){return t.call(this,h,d,n)}));const u=c.call(o,l,r);return a&&i?i(u):u}function rI(n,e,t,r){const i=q_(n);let s=t;return i!==n&&(ra(n)?t.length>3&&(s=function(o,a,c){return t.call(this,o,a,c,n)}):s=function(o,a,c){return t.call(this,o,ki(a),c,n)}),i[e](s,...r)}function hE(n,e,t){const r=fn(n);ss(r,"iterate",Rg);const i=r[e](...t);return(i===-1||i===!1)&&OC(t[0])?(t[0]=fn(t[0]),r[e](...t)):i}function M1(n,e,t=[]){ql(),RC();const r=fn(n)[e].apply(n,t);return PC(),jl(),r}const kK=AC("__proto__,__v_isRef,__isVue"),lU=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(iu));function DK(n){iu(n)||(n=String(n));const e=fn(this);return ss(e,"has",n),e.hasOwnProperty(n)}class uU{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?gU:mU:s?pU:fU).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ht(e);if(!i){let c;if(o&&(c=NK[t]))return c;if(t==="hasOwnProperty")return DK}const a=Reflect.get(e,t,or(e)?e:r);return(iu(t)?lU.has(t):kK(t))||(i||ss(e,"get",t),s)?a:or(a)?o&&IC(t)?a:a.value:ar(a)?i?Qo(a):Uc(a):a}}class hU extends uU{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const c=wh(s);if(!ra(r)&&!wh(r)&&(s=fn(s),r=fn(r)),!Ht(e)&&or(s)&&!or(r))return c?!1:(s.value=r,!0)}const o=Ht(e)&&IC(t)?Number(t)<e.length:$n(e,t),a=Reflect.set(e,t,r,or(e)?e:i);return e===fn(i)&&(o?ch(r,s)&&Il(e,"set",t,r):Il(e,"add",t,r)),a}deleteProperty(e,t){const r=$n(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Il(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!iu(t)||!lU.has(t))&&ss(e,"has",t),r}ownKeys(e){return ss(e,"iterate",Ht(e)?"length":Hd),Reflect.ownKeys(e)}}class dU extends uU{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const LK=new hU,UK=new dU,BK=new hU(!0),FK=new dU(!0),Ix=n=>n,Qy=n=>Reflect.getPrototypeOf(n);function $K(n,e,t){return function(...r){const i=this.__v_raw,s=fn(i),o=r0(s),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,l=i[n](...r),u=t?Ix:e?F3:ki;return!e&&ss(s,"iterate",c?Tx:Hd),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ew(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function zK(n,e){const t={get(i){const s=this.__v_raw,o=fn(s),a=fn(i);n||(ch(i,a)&&ss(o,"get",i),ss(o,"get",a));const{has:c}=Qy(o),l=e?Ix:n?F3:ki;if(c.call(o,i))return l(s.get(i));if(c.call(o,a))return l(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!n&&ss(fn(i),"iterate",Hd),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=fn(s),a=fn(i);return n||(ch(i,a)&&ss(o,"has",i),ss(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,c=fn(a),l=e?Ix:n?F3:ki;return!n&&ss(c,"iterate",Hd),a.forEach((u,h)=>i.call(s,l(u),l(h),o))}};return bi(t,n?{add:ew("add"),set:ew("set"),delete:ew("delete"),clear:ew("clear")}:{add(i){!e&&!ra(i)&&!wh(i)&&(i=fn(i));const s=fn(this);return Qy(s).has.call(s,i)||(s.add(i),Il(s,"add",i,i)),this},set(i,s){!e&&!ra(s)&&!wh(s)&&(s=fn(s));const o=fn(this),{has:a,get:c}=Qy(o);let l=a.call(o,i);l||(i=fn(i),l=a.call(o,i));const u=c.call(o,i);return o.set(i,s),l?ch(s,u)&&Il(o,"set",i,s):Il(o,"add",i,s),this},delete(i){const s=fn(this),{has:o,get:a}=Qy(s);let c=o.call(s,i);c||(i=fn(i),c=o.call(s,i)),a&&a.call(s,i);const l=s.delete(i);return c&&Il(s,"delete",i,void 0),l},clear(){const i=fn(this),s=i.size!==0,o=i.clear();return s&&Il(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=$K(i,n,e)}),t}function j_(n,e){const t=zK(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get($n(t,i)&&i in r?t:r,i,s)}const HK={get:j_(!1,!1)},VK={get:j_(!1,!0)},WK={get:j_(!0,!1)},qK={get:j_(!0,!0)},fU=new WeakMap,pU=new WeakMap,mU=new WeakMap,gU=new WeakMap;function jK(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function GK(n){return n.__v_skip||!Object.isExtensible(n)?0:jK(wK(n))}function Uc(n){return wh(n)?n:G_(n,!1,LK,HK,fU)}function KK(n){return G_(n,!1,BK,VK,pU)}function Qo(n){return G_(n,!0,UK,WK,mU)}function YK(n){return G_(n,!0,FK,qK,gU)}function G_(n,e,t,r,i){if(!ar(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=GK(n);if(s===0)return n;const o=i.get(n);if(o)return o;const a=new Proxy(n,s===2?r:t);return i.set(n,a),a}function lh(n){return wh(n)?lh(n.__v_raw):!!(n&&n.__v_isReactive)}function wh(n){return!!(n&&n.__v_isReadonly)}function ra(n){return!!(n&&n.__v_isShallow)}function OC(n){return n?!!n.__v_raw:!1}function fn(n){const e=n&&n.__v_raw;return e?fn(e):n}function kC(n){return!$n(n,"__v_skip")&&Object.isExtensible(n)&&Ax(n,"__v_skip",!0),n}const ki=n=>ar(n)?Uc(n):n,F3=n=>ar(n)?Qo(n):n;function or(n){return n?n.__v_isRef===!0:!1}function Ae(n){return yU(n,!1)}function Tt(n){return yU(n,!0)}function yU(n,e){return or(n)?n:new XK(n,e)}class XK{constructor(e,t){this.dep=new W_,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:fn(e),this._value=t?e:ki(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||ra(e)||wh(e);e=r?e:fn(e),ch(e,t)&&(this._rawValue=e,this._value=r?e:ki(e),this.dep.trigger())}}function ht(n){return or(n)?n.value:n}function Ot(n){return Gt(n)?n():ht(n)}const ZK={get:(n,e,t)=>e==="__v_raw"?n:ht(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return or(i)&&!or(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function wU(n){return lh(n)?n:new Proxy(n,ZK)}class JK{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new W_,{get:r,set:i}=e(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function vU(n){return new JK(n)}function bU(n){const e=Ht(n)?new Array(n.length):{};for(const t in n)e[t]=EU(n,t);return e}class QK{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return PK(fn(this._object),this._key)}}class eY{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function _U(n,e,t){return or(n)?n:Gt(n)?new eY(n):ar(n)&&arguments.length>1?EU(n,e,t):Ae(n)}function EU(n,e,t){const r=n[e];return or(r)?r:new QK(n,e,t)}class tY{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new W_(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mg-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&rr!==this)return rU(this,!0),!0}get value(){const e=this.dep.track();return oU(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function nY(n,e,t=!1){let r,i;return Gt(n)?r=n:(r=n.get,i=n.set),new tY(r,i,t)}const tw={},$3=new WeakMap;let dd;function rY(n,e=!1,t=dd){if(t){let r=$3.get(t);r||$3.set(t,r=[]),r.push(n)}}function iY(n,e,t=sr){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:c}=t,l=E=>i?E:ra(E)||i===!1||i===0?Xu(E,1):Xu(E);let u,h,d,f,p=!1,m=!1;if(or(n)?(h=()=>n.value,p=ra(n)):lh(n)?(h=()=>l(n),p=!0):Ht(n)?(m=!0,p=n.some(E=>lh(E)||ra(E)),h=()=>n.map(E=>{if(or(E))return E.value;if(lh(E))return l(E);if(Gt(E))return c?c(E,2):E()})):Gt(n)?e?h=c?()=>c(n,2):n:h=()=>{if(d){ql();try{d()}finally{jl()}}const E=dd;dd=u;try{return c?c(n,3,[f]):n(f)}finally{dd=E}}:h=$a,e&&i){const E=h,x=i===!0?1/0:i;h=()=>Xu(E(),x)}const g=V_(),y=()=>{u.stop(),g&&g.active&&TC(g.effects,u)};if(s&&e){const E=e;e=(...x)=>{E(...x),y()}}let b=m?new Array(n.length).fill(tw):tw;const w=E=>{if(!(!(u.flags&1)||!u.dirty&&!E))if(e){const x=u.run();if(i||p||(m?x.some((C,R)=>ch(C,b[R])):ch(x,b))){d&&d();const C=dd;dd=u;try{const R=[x,b===tw?void 0:m&&b[0]===tw?[]:b,f];b=x,c?c(e,3,R):e(...R)}finally{dd=C}}}else u.run()};return a&&a(w),u=new tU(h),u.scheduler=o?()=>o(w,!1):w,f=E=>rY(E,!1,u),d=u.onStop=()=>{const E=$3.get(u);if(E){if(c)c(E,4);else for(const x of E)x();$3.delete(u)}},e?r?w(!0):b=u.run():o?o(w.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function Xu(n,e=1/0,t){if(e<=0||!ar(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,or(n))Xu(n.value,e,t);else if(Ht(n))for(let r=0;r<n.length;r++)Xu(n[r],e,t);else if(jL(n)||r0(n))n.forEach(r=>{Xu(r,e,t)});else if(YL(n)){for(const r in n)Xu(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Xu(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function sy(n,e,t,r){try{return r?n(...r):n()}catch(i){oy(i,e,t)}}function Ga(n,e,t,r){if(Gt(n)){const i=sy(n,e,t,r);return i&&GL(i)&&i.catch(s=>{oy(s,e,t)}),i}if(Ht(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Ga(n[s],e,t,r));return i}}function oy(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||sr;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](n,c,l)===!1)return}a=a.parent}if(s){ql(),sy(s,null,10,[n,c,l]),jl();return}}sY(n,t,i,r,o)}function sY(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const _s=[];let wc=-1;const i0=[];let Uu=null,kp=0;const xU=Promise.resolve();let z3=null;function K_(n){const e=z3||xU;return n?e.then(this?n.bind(this):n):e}function oY(n){let e=wc+1,t=_s.length;for(;e<t;){const r=e+t>>>1,i=_s[r],s=Pg(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function DC(n){if(!(n.flags&1)){const e=Pg(n),t=_s[_s.length-1];!t||!(n.flags&2)&&e>=Pg(t)?_s.push(n):_s.splice(oY(e),0,n),n.flags|=1,SU()}}function SU(){z3||(z3=xU.then(TU))}function AU(n){Ht(n)?i0.push(...n):Uu&&n.id===-1?Uu.splice(kp+1,0,n):n.flags&1||(i0.push(n),n.flags|=1),SU()}function iI(n,e,t=wc+1){for(;t<_s.length;t++){const r=_s[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;_s.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function CU(n){if(i0.length){const e=[...new Set(i0)].sort((t,r)=>Pg(t)-Pg(r));if(i0.length=0,Uu){Uu.push(...e);return}for(Uu=e,kp=0;kp<Uu.length;kp++){const t=Uu[kp];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Uu=null,kp=0}}const Pg=n=>n.id==null?n.flags&2?-1:1/0:n.id;function TU(n){try{for(wc=0;wc<_s.length;wc++){const e=_s[wc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),sy(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;wc<_s.length;wc++){const e=_s[wc];e&&(e.flags&=-2)}wc=-1,_s.length=0,CU(),z3=null,(_s.length||i0.length)&&TU()}}let Li=null,IU=null;function H3(n){const e=Li;return Li=n,IU=n&&n.type.__scopeId||null,e}function Wn(n,e=Li,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&mI(-1);const s=H3(e);let o;try{o=n(...i)}finally{H3(s),r._d&&mI(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function zh(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(ql(),Ga(c,t,8,[n.el,a,n,e]),jl())}}const aY=Symbol("_vte"),MU=n=>n.__isTeleport,Bu=Symbol("_leaveCb"),nw=Symbol("_enterCb");function cY(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return No(()=>{n.isMounted=!0}),X_(()=>{n.isUnmounting=!0}),n}const Fo=[Function,Array],RU={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fo,onEnter:Fo,onAfterEnter:Fo,onEnterCancelled:Fo,onBeforeLeave:Fo,onLeave:Fo,onAfterLeave:Fo,onLeaveCancelled:Fo,onBeforeAppear:Fo,onAppear:Fo,onAfterAppear:Fo,onAppearCancelled:Fo},PU=n=>{const e=n.subTree;return e.component?PU(e.component):e},lY={name:"BaseTransition",props:RU,setup(n,{slots:e}){const t=Bc(),r=cY();return()=>{const i=e.default&&kU(e.default(),!0);if(!i||!i.length)return;const s=NU(i),o=fn(n),{mode:a}=o;if(r.isLeaving)return dE(s);const c=sI(s);if(!c)return dE(s);let l=Mx(c,o,r,t,h=>l=h);c.type!==os&&Ng(c,l);let u=t.subTree&&sI(t.subTree);if(u&&u.type!==os&&!vd(c,u)&&PU(t).type!==os){let h=Mx(u,o,r,t);if(Ng(u,h),a==="out-in"&&c.type!==os)return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete h.afterLeave,u=void 0},dE(s);a==="in-out"&&c.type!==os?h.delayLeave=(d,f,p)=>{const m=OU(r,u);m[String(u.key)]=u,d[Bu]=()=>{f(),d[Bu]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{p(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function NU(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==os){e=t;break}}return e}const uY=lY;function OU(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Mx(n,e,t,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:d,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:g,onAppear:y,onAfterAppear:b,onAppearCancelled:w}=e,E=String(n.key),x=OU(t,n),C=(_,A)=>{_&&Ga(_,r,9,A)},R=(_,A)=>{const M=A[1];C(_,A),Ht(_)?_.every(D=>D.length<=1)&&M():_.length<=1&&M()},k={mode:o,persisted:a,beforeEnter(_){let A=c;if(!t.isMounted)if(s)A=g||c;else return;_[Bu]&&_[Bu](!0);const M=x[E];M&&vd(n,M)&&M.el[Bu]&&M.el[Bu](),C(A,[_])},enter(_){let A=l,M=u,D=h;if(!t.isMounted)if(s)A=y||l,M=b||u,D=w||h;else return;let P=!1;const v=_[nw]=S=>{P||(P=!0,S?C(D,[_]):C(M,[_]),k.delayedLeave&&k.delayedLeave(),_[nw]=void 0)};A?R(A,[_,v]):v()},leave(_,A){const M=String(n.key);if(_[nw]&&_[nw](!0),t.isUnmounting)return A();C(d,[_]);let D=!1;const P=_[Bu]=v=>{D||(D=!0,A(),v?C(m,[_]):C(p,[_]),_[Bu]=void 0,x[M]===n&&delete x[M])};x[M]=n,f?R(f,[_,P]):P()},clone(_){const A=Mx(_,e,t,r,i);return i&&i(A),A}};return k}function dE(n){if(ay(n))return n=vh(n),n.children=null,n}function sI(n){if(!ay(n))return MU(n.type)&&n.children?NU(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Gt(t.default))return t.default()}}function Ng(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Ng(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function kU(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===ni?(o.patchFlag&128&&i++,r=r.concat(kU(o.children,e,a))):(e||o.type!==os)&&r.push(a!=null?vh(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ar(n,e){return Gt(n)?bi({name:n.name},e,{setup:n}):n}function LC(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Wm(n,e,t,r,i=!1){if(Ht(n)){n.forEach((p,m)=>Wm(p,e&&(Ht(e)?e[m]:e),t,r,i));return}if(s0(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Wm(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?WC(r.component):r.el,o=i?null:s,{i:a,r:c}=n,l=e&&e.r,u=a.refs===sr?a.refs={}:a.refs,h=a.setupState,d=fn(h),f=h===sr?()=>!1:p=>$n(d,p);if(l!=null&&l!==c&&(Dr(l)?(u[l]=null,f(l)&&(h[l]=null)):or(l)&&(l.value=null)),Gt(c))sy(c,a,12,[o,u]);else{const p=Dr(c),m=or(c);if(p||m){const g=()=>{if(n.f){const y=p?f(c)?h[c]:u[c]:c.value;i?Ht(y)&&TC(y,s):Ht(y)?y.includes(s)||y.push(s):p?(u[c]=[s],f(c)&&(h[c]=u[c])):(c.value=[s],n.k&&(u[n.k]=c.value))}else p?(u[c]=o,f(c)&&(h[c]=o)):m&&(c.value=o,n.k&&(u[n.k]=o))};o?(g.id=-1,yo(g,t)):g()}}}const oI=n=>n.nodeType===8;H_().requestIdleCallback;H_().cancelIdleCallback;function hY(n,e){if(oI(n)&&n.data==="["){let t=1,r=n.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(oI(r))if(r.data==="]"){if(--t===0)break}else r.data==="["&&t++;r=r.nextSibling}}else e(n)}const s0=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function iqe(n){Gt(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:c}=n;let l=null,u,h=0;const d=()=>(h++,l=null,f()),f=()=>{let p;return l||(p=l=e().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),c)return new Promise((g,y)=>{c(m,()=>g(d()),()=>y(m),h+1)});throw m}).then(m=>p!==l&&l?l:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),u=m,m)))};return Ar({name:"AsyncComponentWrapper",__asyncLoader:f,__asyncHydrate(p,m,g){const y=s?()=>{const w=s(()=>{g()},E=>hY(p,E));w&&(m.bum||(m.bum=[])).push(w),(m.u||(m.u=[])).push(()=>!0)}:g;u?y():f().then(()=>!m.isUnmounted&&y())},get __asyncResolved(){return u},setup(){const p=ri;if(LC(p),u)return()=>fE(u,p);const m=w=>{l=null,oy(w,p,13,!r)};if(a&&p.suspense||w0)return f().then(w=>()=>fE(w,p)).catch(w=>(m(w),()=>r?en(r,{error:w}):null));const g=Ae(!1),y=Ae(),b=Ae(!!i);return i&&setTimeout(()=>{b.value=!1},i),o!=null&&setTimeout(()=>{if(!g.value&&!y.value){const w=new Error(`Async component timed out after ${o}ms.`);m(w),y.value=w}},o),f().then(()=>{g.value=!0,p.parent&&ay(p.parent.vnode)&&p.parent.update()}).catch(w=>{m(w),y.value=w}),()=>{if(g.value&&u)return fE(u,p);if(y.value&&r)return en(r,{error:y.value});if(t&&!b.value)return en(t)}}})}function fE(n,e){const{ref:t,props:r,children:i,ce:s}=e.vnode,o=en(n,r,i);return o.ref=t,o.ce=s,delete e.vnode.ce,o}const ay=n=>n.type.__isKeepAlive;function dY(n,e){DU(n,"a",e)}function fY(n,e){DU(n,"da",e)}function DU(n,e,t=ri){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Y_(e,r,t),t){let i=t.parent;for(;i&&i.parent;)ay(i.parent.vnode)&&pY(r,e,t,i),i=i.parent}}function pY(n,e,t,r){const i=Y_(e,n,r,!0);ca(()=>{TC(r[e],i)},t)}function Y_(n,e,t=ri,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{ql();const a=cy(t),c=Ga(e,t,n,o);return a(),jl(),c});return r?i.unshift(s):i.push(s),s}}const su=n=>(e,t=ri)=>{(!w0||n==="sp")&&Y_(n,(...r)=>e(...r),t)},mY=su("bm"),No=su("m"),LU=su("bu"),gY=su("u"),X_=su("bum"),ca=su("um"),yY=su("sp"),wY=su("rtg"),vY=su("rtc");function bY(n,e=ri){Y_("ec",n,e)}const UU="components";function _Y(n,e){return FU(UU,n,!0,e)||n}const BU=Symbol.for("v-ndc");function UC(n){return Dr(n)?FU(UU,n,!1)||n:n||BU}function FU(n,e,t=!0,r=!1){const i=Li||ri;if(i){const s=i.type;{const a=aX(s,!1);if(a&&(a===e||a===aa(e)||a===z_(aa(e))))return s}const o=aI(i[n]||s[n],e)||aI(i.appContext[n],e);return!o&&r?s:o}}function aI(n,e){return n&&(n[e]||n[aa(e)]||n[z_(aa(e))])}function $U(n,e,t,r){let i;const s=t,o=Ht(n);if(o||Dr(n)){const a=o&&lh(n);let c=!1,l=!1;a&&(c=!ra(n),l=wh(n),n=q_(n)),i=new Array(n.length);for(let u=0,h=n.length;u<h;u++)i[u]=e(c?l?F3(ki(n[u])):ki(n[u]):n[u],u,void 0,s)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,s)}else if(ar(n))if(n[Symbol.iterator])i=Array.from(n,(a,c)=>e(a,c,void 0,s));else{const a=Object.keys(n);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];i[c]=e(n[u],u,c,s)}}else i=[];return i}function As(n,e,t={},r,i){if(Li.ce||Li.parent&&s0(Li.parent)&&Li.parent.ce)return e!=="default"&&(t.name=e),Re(),si(ni,null,[en("slot",t,r&&r())],64);let s=n[e];s&&s._c&&(s._d=!1),Re();const o=s&&zU(s(t)),a=t.key||o&&o.key,c=si(ni,{key:(a&&!iu(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&n._===1?64:-2);return!i&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),s&&s._c&&(s._d=!0),c}function zU(n){return n.some(e=>kg(e)?!(e.type===os||e.type===ni&&!zU(e.children)):!0)?n:null}const Rx=n=>n?aB(n)?WC(n):Rx(n.parent):null,qm=bi(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Rx(n.parent),$root:n=>Rx(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>VU(n),$forceUpdate:n=>n.f||(n.f=()=>{DC(n.update)}),$nextTick:n=>n.n||(n.n=K_.bind(n.proxy)),$watch:n=>WY.bind(n)}),pE=(n,e)=>n!==sr&&!n.__isScriptSetup&&$n(n,e),EY={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=n;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(pE(r,e))return o[e]=1,r[e];if(i!==sr&&$n(i,e))return o[e]=2,i[e];if((l=n.propsOptions[0])&&$n(l,e))return o[e]=3,s[e];if(t!==sr&&$n(t,e))return o[e]=4,t[e];Nx&&(o[e]=0)}}const u=qm[e];let h,d;if(u)return e==="$attrs"&&ss(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==sr&&$n(t,e))return o[e]=4,t[e];if(d=c.config.globalProperties,$n(d,e))return d[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return pE(i,e)?(i[e]=t,!0):r!==sr&&$n(r,e)?(r[e]=t,!0):$n(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!t[o]||n!==sr&&$n(n,o)||pE(e,o)||(a=s[0])&&$n(a,o)||$n(r,o)||$n(qm,o)||$n(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:$n(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function xY(){return SY().slots}function SY(){const n=Bc();return n.setupContext||(n.setupContext=lB(n))}function Px(n){return Ht(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function AY(n,e){const t=Px(n);for(const r in e){if(r.startsWith("__skip"))continue;let i=t[r];i?Ht(i)||Gt(i)?i=t[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=t[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return t}let Nx=!0;function CY(n){const e=VU(n),t=n.proxy,r=n.ctx;Nx=!1,e.beforeCreate&&cI(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:b,destroyed:w,unmounted:E,render:x,renderTracked:C,renderTriggered:R,errorCaptured:k,serverPrefetch:_,expose:A,inheritAttrs:M,components:D,directives:P,filters:v}=e;if(l&&TY(l,r,null),o)for(const L in o){const U=o[L];Gt(U)&&(r[L]=U.bind(t))}if(i){const L=i.call(t,t);ar(L)&&(n.data=Uc(L))}if(Nx=!0,s)for(const L in s){const U=s[L],V=Gt(U)?U.bind(t,t):Gt(U.get)?U.get.bind(t,t):$a,W=!Gt(U)&&Gt(U.set)?U.set.bind(t):$a,F=Ee({get:V,set:W});Object.defineProperty(r,L,{enumerable:!0,configurable:!0,get:()=>F.value,set:I=>F.value=I})}if(a)for(const L in a)HU(a[L],r,t,L);if(c){const L=Gt(c)?c.call(t):c;Reflect.ownKeys(L).forEach(U=>{jm(U,L[U])})}u&&cI(u,n,"c");function T(L,U){Ht(U)?U.forEach(V=>L(V.bind(t))):U&&L(U.bind(t))}if(T(mY,h),T(No,d),T(LU,f),T(gY,p),T(dY,m),T(fY,g),T(bY,k),T(vY,C),T(wY,R),T(X_,b),T(ca,E),T(yY,_),Ht(A))if(A.length){const L=n.exposed||(n.exposed={});A.forEach(U=>{Object.defineProperty(L,U,{get:()=>t[U],set:V=>t[U]=V})})}else n.exposed||(n.exposed={});x&&n.render===$a&&(n.render=x),M!=null&&(n.inheritAttrs=M),D&&(n.components=D),P&&(n.directives=P),_&&LC(n)}function TY(n,e,t=$a){Ht(n)&&(n=Ox(n));for(const r in n){const i=n[r];let s;ar(i)?"default"in i?s=Wd(i.from||r,i.default,!0):s=Wd(i.from||r):s=Wd(i),or(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function cI(n,e,t){Ga(Ht(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function HU(n,e,t,r){let i=r.includes(".")?nB(t,r):()=>t[r];if(Dr(n)){const s=e[n];Gt(s)&&wt(i,s)}else if(Gt(n))wt(i,n.bind(t));else if(ar(n))if(Ht(n))n.forEach(s=>HU(s,e,t,r));else{const s=Gt(n.handler)?n.handler.bind(t):e[n.handler];Gt(s)&&wt(i,s,n)}}function VU(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let c;return a?c=a:!i.length&&!t&&!r?c=e:(c={},i.length&&i.forEach(l=>V3(c,l,o,!0)),V3(c,e,o)),ar(e)&&s.set(e,c),c}function V3(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&V3(n,s,t,!0),i&&i.forEach(o=>V3(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=IY[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const IY={data:lI,props:uI,emits:uI,methods:Em,computed:Em,beforeCreate:ys,created:ys,beforeMount:ys,mounted:ys,beforeUpdate:ys,updated:ys,beforeDestroy:ys,beforeUnmount:ys,destroyed:ys,unmounted:ys,activated:ys,deactivated:ys,errorCaptured:ys,serverPrefetch:ys,components:Em,directives:Em,watch:RY,provide:lI,inject:MY};function lI(n,e){return e?n?function(){return bi(Gt(n)?n.call(this,this):n,Gt(e)?e.call(this,this):e)}:e:n}function MY(n,e){return Em(Ox(n),Ox(e))}function Ox(n){if(Ht(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ys(n,e){return n?[...new Set([].concat(n,e))]:e}function Em(n,e){return n?bi(Object.create(null),n,e):e}function uI(n,e){return n?Ht(n)&&Ht(e)?[...new Set([...n,...e])]:bi(Object.create(null),Px(n),Px(e??{})):e}function RY(n,e){if(!n)return e;if(!e)return n;const t=bi(Object.create(null),n);for(const r in e)t[r]=ys(n[r],e[r]);return t}function WU(){return{app:null,config:{isNativeTag:gK,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let PY=0;function NY(n,e){return function(r,i=null){Gt(r)||(r=bi({},r)),i!=null&&!ar(i)&&(i=null);const s=WU(),o=new WeakSet,a=[];let c=!1;const l=s.app={_uid:PY++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:lX,get config(){return s.config},set config(u){},use(u,...h){return o.has(u)||(u&&Gt(u.install)?(o.add(u),u.install(l,...h)):Gt(u)&&(o.add(u),u(l,...h))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,h){return h?(s.components[u]=h,l):s.components[u]},directive(u,h){return h?(s.directives[u]=h,l):s.directives[u]},mount(u,h,d){if(!c){const f=l._ceVNode||en(r,i);return f.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),n(f,u,d),c=!0,l._container=u,u.__vue_app__=l,WC(f.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Ga(a,l._instance,16),n(null,l._container),delete l._container.__vue_app__)},provide(u,h){return s.provides[u]=h,l},runWithContext(u){const h=Vd;Vd=l;try{return u()}finally{Vd=h}}};return l}}let Vd=null;function jm(n,e){if(ri){let t=ri.provides;const r=ri.parent&&ri.parent.provides;r===t&&(t=ri.provides=Object.create(r)),t[n]=e}}function Wd(n,e,t=!1){const r=ri||Li;if(r||Vd){let i=Vd?Vd._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Gt(e)?e.call(r&&r.proxy):e}}function BC(){return!!(ri||Li||Vd)}const qU={},jU=()=>Object.create(qU),GU=n=>Object.getPrototypeOf(n)===qU;function OY(n,e,t,r=!1){const i={},s=jU();n.propsDefaults=Object.create(null),KU(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:KK(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function kY(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=fn(i),[c]=n.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Z_(n.emitsOptions,d))continue;const f=e[d];if(c)if($n(s,d))f!==s[d]&&(s[d]=f,l=!0);else{const p=aa(d);i[p]=kx(c,a,p,f,n,!1)}else f!==s[d]&&(s[d]=f,l=!0)}}}else{KU(n,e,i,s)&&(l=!0);let u;for(const h in a)(!e||!$n(e,h)&&((u=xf(h))===h||!$n(e,u)))&&(c?t&&(t[h]!==void 0||t[u]!==void 0)&&(i[h]=kx(c,a,h,void 0,n,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!$n(e,h))&&(delete s[h],l=!0)}l&&Il(n.attrs,"set","")}function KU(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(zm(c))continue;const l=e[c];let u;i&&$n(i,u=aa(c))?!s||!s.includes(u)?t[u]=l:(a||(a={}))[u]=l:Z_(n.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(s){const c=fn(t),l=a||sr;for(let u=0;u<s.length;u++){const h=s[u];t[h]=kx(i,c,h,l[h],n,!$n(l,h))}}return o}function kx(n,e,t,r,i,s){const o=n[t];if(o!=null){const a=$n(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Gt(c)){const{propsDefaults:l}=i;if(t in l)r=l[t];else{const u=cy(i);r=l[t]=c.call(null,e),u()}}else r=c;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===xf(t))&&(r=!0))}return r}const DY=new WeakMap;function YU(n,e,t=!1){const r=t?DY:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let c=!1;if(!Gt(n)){const u=h=>{c=!0;const[d,f]=YU(h,e,!0);bi(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!c)return ar(n)&&r.set(n,n0),n0;if(Ht(s))for(let u=0;u<s.length;u++){const h=aa(s[u]);hI(h)&&(o[h]=sr)}else if(s)for(const u in s){const h=aa(u);if(hI(h)){const d=s[u],f=o[h]=Ht(d)||Gt(d)?{type:d}:bi({},d),p=f.type;let m=!1,g=!0;if(Ht(p))for(let y=0;y<p.length;++y){const b=p[y],w=Gt(b)&&b.name;if(w==="Boolean"){m=!0;break}else w==="String"&&(g=!1)}else m=Gt(p)&&p.name==="Boolean";f[0]=m,f[1]=g,(m||$n(f,"default"))&&a.push(h)}}const l=[o,a];return ar(n)&&r.set(n,l),l}function hI(n){return n[0]!=="$"&&!zm(n)}const FC=n=>n[0]==="_"||n==="$stable",$C=n=>Ht(n)?n.map(xc):[xc(n)],LY=(n,e,t)=>{if(e._n)return e;const r=Wn((...i)=>$C(e(...i)),t);return r._c=!1,r},XU=(n,e,t)=>{const r=n._ctx;for(const i in n){if(FC(i))continue;const s=n[i];if(Gt(s))e[i]=LY(i,s,r);else if(s!=null){const o=$C(s);e[i]=()=>o}}},ZU=(n,e)=>{const t=$C(e);n.slots.default=()=>t},JU=(n,e,t)=>{for(const r in e)(t||!FC(r))&&(n[r]=e[r])},UY=(n,e,t)=>{const r=n.slots=jU();if(n.vnode.shapeFlag&32){const i=e.__;i&&Ax(r,"__",i,!0);const s=e._;s?(JU(r,e,t),t&&Ax(r,"_",s,!0)):XU(e,r)}else e&&ZU(n,e)},BY=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=sr;if(r.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:JU(i,e,t):(s=!e.$stable,XU(e,i)),o=e}else e&&(ZU(n,e),o={default:1});if(s)for(const a in i)!FC(a)&&o[a]==null&&delete i[a]},yo=ZY;function QU(n){return FY(n)}function FY(n,e){const t=H_();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=$a,insertStaticContent:p}=n,m=(X,Z,H,oe=null,le=null,Q=null,ie=void 0,xe=null,fe=!!Z.dynamicChildren)=>{if(X===Z)return;X&&!vd(X,Z)&&(oe=ce(X),I(X,le,Q,!0),X=null),Z.patchFlag===-2&&(fe=!1,Z.dynamicChildren=null);const{type:me,ref:De,shapeFlag:K}=Z;switch(me){case J_:g(X,Z,H,oe);break;case os:y(X,Z,H,oe);break;case Gm:X==null&&b(Z,H,oe,ie);break;case ni:D(X,Z,H,oe,le,Q,ie,xe,fe);break;default:K&1?x(X,Z,H,oe,le,Q,ie,xe,fe):K&6?P(X,Z,H,oe,le,Q,ie,xe,fe):(K&64||K&128)&&me.process(X,Z,H,oe,le,Q,ie,xe,fe,$e)}De!=null&&le?Wm(De,X&&X.ref,Q,Z||X,!Z):De==null&&X&&X.ref!=null&&Wm(X.ref,null,Q,X,!0)},g=(X,Z,H,oe)=>{if(X==null)r(Z.el=a(Z.children),H,oe);else{const le=Z.el=X.el;Z.children!==X.children&&l(le,Z.children)}},y=(X,Z,H,oe)=>{X==null?r(Z.el=c(Z.children||""),H,oe):Z.el=X.el},b=(X,Z,H,oe)=>{[X.el,X.anchor]=p(X.children,Z,H,oe,X.el,X.anchor)},w=({el:X,anchor:Z},H,oe)=>{let le;for(;X&&X!==Z;)le=d(X),r(X,H,oe),X=le;r(Z,H,oe)},E=({el:X,anchor:Z})=>{let H;for(;X&&X!==Z;)H=d(X),i(X),X=H;i(Z)},x=(X,Z,H,oe,le,Q,ie,xe,fe)=>{Z.type==="svg"?ie="svg":Z.type==="math"&&(ie="mathml"),X==null?C(Z,H,oe,le,Q,ie,xe,fe):_(X,Z,le,Q,ie,xe,fe)},C=(X,Z,H,oe,le,Q,ie,xe)=>{let fe,me;const{props:De,shapeFlag:K,transition:q,dirs:he}=X;if(fe=X.el=o(X.type,Q,De&&De.is,De),K&8?u(fe,X.children):K&16&&k(X.children,fe,null,oe,le,mE(X,Q),ie,xe),he&&zh(X,null,oe,"created"),R(fe,X,X.scopeId,ie,oe),De){for(const z in De)z!=="value"&&!zm(z)&&s(fe,z,null,De[z],Q,oe);"value"in De&&s(fe,"value",null,De.value,Q),(me=De.onVnodeBeforeMount)&&sc(me,oe,X)}he&&zh(X,null,oe,"beforeMount");const ge=$Y(le,q);ge&&q.beforeEnter(fe),r(fe,Z,H),((me=De&&De.onVnodeMounted)||ge||he)&&yo(()=>{me&&sc(me,oe,X),ge&&q.enter(fe),he&&zh(X,null,oe,"mounted")},le)},R=(X,Z,H,oe,le)=>{if(H&&f(X,H),oe)for(let Q=0;Q<oe.length;Q++)f(X,oe[Q]);if(le){let Q=le.subTree;if(Z===Q||iB(Q.type)&&(Q.ssContent===Z||Q.ssFallback===Z)){const ie=le.vnode;R(X,ie,ie.scopeId,ie.slotScopeIds,le.parent)}}},k=(X,Z,H,oe,le,Q,ie,xe,fe=0)=>{for(let me=fe;me<X.length;me++){const De=X[me]=xe?Fu(X[me]):xc(X[me]);m(null,De,Z,H,oe,le,Q,ie,xe)}},_=(X,Z,H,oe,le,Q,ie)=>{const xe=Z.el=X.el;let{patchFlag:fe,dynamicChildren:me,dirs:De}=Z;fe|=X.patchFlag&16;const K=X.props||sr,q=Z.props||sr;let he;if(H&&Hh(H,!1),(he=q.onVnodeBeforeUpdate)&&sc(he,H,Z,X),De&&zh(Z,X,H,"beforeUpdate"),H&&Hh(H,!0),(K.innerHTML&&q.innerHTML==null||K.textContent&&q.textContent==null)&&u(xe,""),me?A(X.dynamicChildren,me,xe,H,oe,mE(Z,le),Q):ie||U(X,Z,xe,null,H,oe,mE(Z,le),Q,!1),fe>0){if(fe&16)M(xe,K,q,H,le);else if(fe&2&&K.class!==q.class&&s(xe,"class",null,q.class,le),fe&4&&s(xe,"style",K.style,q.style,le),fe&8){const ge=Z.dynamicProps;for(let z=0;z<ge.length;z++){const O=ge[z],B=K[O],G=q[O];(G!==B||O==="value")&&s(xe,O,B,G,le,H)}}fe&1&&X.children!==Z.children&&u(xe,Z.children)}else!ie&&me==null&&M(xe,K,q,H,le);((he=q.onVnodeUpdated)||De)&&yo(()=>{he&&sc(he,H,Z,X),De&&zh(Z,X,H,"updated")},oe)},A=(X,Z,H,oe,le,Q,ie)=>{for(let xe=0;xe<Z.length;xe++){const fe=X[xe],me=Z[xe],De=fe.el&&(fe.type===ni||!vd(fe,me)||fe.shapeFlag&198)?h(fe.el):H;m(fe,me,De,null,oe,le,Q,ie,!0)}},M=(X,Z,H,oe,le)=>{if(Z!==H){if(Z!==sr)for(const Q in Z)!zm(Q)&&!(Q in H)&&s(X,Q,Z[Q],null,le,oe);for(const Q in H){if(zm(Q))continue;const ie=H[Q],xe=Z[Q];ie!==xe&&Q!=="value"&&s(X,Q,xe,ie,le,oe)}"value"in H&&s(X,"value",Z.value,H.value,le)}},D=(X,Z,H,oe,le,Q,ie,xe,fe)=>{const me=Z.el=X?X.el:a(""),De=Z.anchor=X?X.anchor:a("");let{patchFlag:K,dynamicChildren:q,slotScopeIds:he}=Z;he&&(xe=xe?xe.concat(he):he),X==null?(r(me,H,oe),r(De,H,oe),k(Z.children||[],H,De,le,Q,ie,xe,fe)):K>0&&K&64&&q&&X.dynamicChildren?(A(X.dynamicChildren,q,H,le,Q,ie,xe),(Z.key!=null||le&&Z===le.subTree)&&eB(X,Z,!0)):U(X,Z,H,De,le,Q,ie,xe,fe)},P=(X,Z,H,oe,le,Q,ie,xe,fe)=>{Z.slotScopeIds=xe,X==null?Z.shapeFlag&512?le.ctx.activate(Z,H,oe,ie,fe):v(Z,H,oe,le,Q,ie,fe):S(X,Z,fe)},v=(X,Z,H,oe,le,Q,ie)=>{const xe=X.component=rX(X,oe,le);if(ay(X)&&(xe.ctx.renderer=$e),iX(xe,!1,ie),xe.asyncDep){if(le&&le.registerDep(xe,T,ie),!X.el){const fe=xe.subTree=en(os);y(null,fe,Z,H)}}else T(xe,X,Z,H,le,Q,ie)},S=(X,Z,H)=>{const oe=Z.component=X.component;if(YY(X,Z,H))if(oe.asyncDep&&!oe.asyncResolved){L(oe,Z,H);return}else oe.next=Z,oe.update();else Z.el=X.el,oe.vnode=Z},T=(X,Z,H,oe,le,Q,ie)=>{const xe=()=>{if(X.isMounted){let{next:K,bu:q,u:he,parent:ge,vnode:z}=X;{const ae=tB(X);if(ae){K&&(K.el=z.el,L(X,K,ie)),ae.asyncDep.then(()=>{X.isUnmounted||xe()});return}}let O=K,B;Hh(X,!1),K?(K.el=z.el,L(X,K,ie)):K=z,q&&aE(q),(B=K.props&&K.props.onVnodeBeforeUpdate)&&sc(B,ge,K,z),Hh(X,!0);const G=fI(X),re=X.subTree;X.subTree=G,m(re,G,h(re.el),ce(re),X,le,Q),K.el=G.el,O===null&&XY(X,G.el),he&&yo(he,le),(B=K.props&&K.props.onVnodeUpdated)&&yo(()=>sc(B,ge,K,z),le)}else{let K;const{el:q,props:he}=Z,{bm:ge,m:z,parent:O,root:B,type:G}=X,re=s0(Z);Hh(X,!1),ge&&aE(ge),!re&&(K=he&&he.onVnodeBeforeMount)&&sc(K,O,Z),Hh(X,!0);{B.ce&&B.ce._def.shadowRoot!==!1&&B.ce._injectChildStyle(G);const ae=X.subTree=fI(X);m(null,ae,H,oe,X,le,Q),Z.el=ae.el}if(z&&yo(z,le),!re&&(K=he&&he.onVnodeMounted)){const ae=Z;yo(()=>sc(K,O,ae),le)}(Z.shapeFlag&256||O&&s0(O.vnode)&&O.vnode.shapeFlag&256)&&X.a&&yo(X.a,le),X.isMounted=!0,Z=H=oe=null}};X.scope.on();const fe=X.effect=new tU(xe);X.scope.off();const me=X.update=fe.run.bind(fe),De=X.job=fe.runIfDirty.bind(fe);De.i=X,De.id=X.uid,fe.scheduler=()=>DC(De),Hh(X,!0),me()},L=(X,Z,H)=>{Z.component=X;const oe=X.vnode.props;X.vnode=Z,X.next=null,kY(X,Z.props,oe,H),BY(X,Z.children,H),ql(),iI(X),jl()},U=(X,Z,H,oe,le,Q,ie,xe,fe=!1)=>{const me=X&&X.children,De=X?X.shapeFlag:0,K=Z.children,{patchFlag:q,shapeFlag:he}=Z;if(q>0){if(q&128){W(me,K,H,oe,le,Q,ie,xe,fe);return}else if(q&256){V(me,K,H,oe,le,Q,ie,xe,fe);return}}he&8?(De&16&&te(me,le,Q),K!==me&&u(H,K)):De&16?he&16?W(me,K,H,oe,le,Q,ie,xe,fe):te(me,le,Q,!0):(De&8&&u(H,""),he&16&&k(K,H,oe,le,Q,ie,xe,fe))},V=(X,Z,H,oe,le,Q,ie,xe,fe)=>{X=X||n0,Z=Z||n0;const me=X.length,De=Z.length,K=Math.min(me,De);let q;for(q=0;q<K;q++){const he=Z[q]=fe?Fu(Z[q]):xc(Z[q]);m(X[q],he,H,null,le,Q,ie,xe,fe)}me>De?te(X,le,Q,!0,!1,K):k(Z,H,oe,le,Q,ie,xe,fe,K)},W=(X,Z,H,oe,le,Q,ie,xe,fe)=>{let me=0;const De=Z.length;let K=X.length-1,q=De-1;for(;me<=K&&me<=q;){const he=X[me],ge=Z[me]=fe?Fu(Z[me]):xc(Z[me]);if(vd(he,ge))m(he,ge,H,null,le,Q,ie,xe,fe);else break;me++}for(;me<=K&&me<=q;){const he=X[K],ge=Z[q]=fe?Fu(Z[q]):xc(Z[q]);if(vd(he,ge))m(he,ge,H,null,le,Q,ie,xe,fe);else break;K--,q--}if(me>K){if(me<=q){const he=q+1,ge=he<De?Z[he].el:oe;for(;me<=q;)m(null,Z[me]=fe?Fu(Z[me]):xc(Z[me]),H,ge,le,Q,ie,xe,fe),me++}}else if(me>q)for(;me<=K;)I(X[me],le,Q,!0),me++;else{const he=me,ge=me,z=new Map;for(me=ge;me<=q;me++){const ze=Z[me]=fe?Fu(Z[me]):xc(Z[me]);ze.key!=null&&z.set(ze.key,me)}let O,B=0;const G=q-ge+1;let re=!1,ae=0;const se=new Array(G);for(me=0;me<G;me++)se[me]=0;for(me=he;me<=K;me++){const ze=X[me];if(B>=G){I(ze,le,Q,!0);continue}let Be;if(ze.key!=null)Be=z.get(ze.key);else for(O=ge;O<=q;O++)if(se[O-ge]===0&&vd(ze,Z[O])){Be=O;break}Be===void 0?I(ze,le,Q,!0):(se[Be-ge]=me+1,Be>=ae?ae=Be:re=!0,m(ze,Z[Be],H,null,le,Q,ie,xe,fe),B++)}const Le=re?zY(se):n0;for(O=Le.length-1,me=G-1;me>=0;me--){const ze=ge+me,Be=Z[ze],He=ze+1<De?Z[ze+1].el:oe;se[me]===0?m(null,Be,H,He,le,Q,ie,xe,fe):re&&(O<0||me!==Le[O]?F(Be,H,He,2):O--)}}},F=(X,Z,H,oe,le=null)=>{const{el:Q,type:ie,transition:xe,children:fe,shapeFlag:me}=X;if(me&6){F(X.component.subTree,Z,H,oe);return}if(me&128){X.suspense.move(Z,H,oe);return}if(me&64){ie.move(X,Z,H,$e);return}if(ie===ni){r(Q,Z,H);for(let K=0;K<fe.length;K++)F(fe[K],Z,H,oe);r(X.anchor,Z,H);return}if(ie===Gm){w(X,Z,H);return}if(oe!==2&&me&1&&xe)if(oe===0)xe.beforeEnter(Q),r(Q,Z,H),yo(()=>xe.enter(Q),le);else{const{leave:K,delayLeave:q,afterLeave:he}=xe,ge=()=>{X.ctx.isUnmounted?i(Q):r(Q,Z,H)},z=()=>{K(Q,()=>{ge(),he&&he()})};q?q(Q,ge,z):z()}else r(Q,Z,H)},I=(X,Z,H,oe=!1,le=!1)=>{const{type:Q,props:ie,ref:xe,children:fe,dynamicChildren:me,shapeFlag:De,patchFlag:K,dirs:q,cacheIndex:he}=X;if(K===-2&&(le=!1),xe!=null&&(ql(),Wm(xe,null,H,X,!0),jl()),he!=null&&(Z.renderCache[he]=void 0),De&256){Z.ctx.deactivate(X);return}const ge=De&1&&q,z=!s0(X);let O;if(z&&(O=ie&&ie.onVnodeBeforeUnmount)&&sc(O,Z,X),De&6)j(X.component,H,oe);else{if(De&128){X.suspense.unmount(H,oe);return}ge&&zh(X,null,Z,"beforeUnmount"),De&64?X.type.remove(X,Z,H,$e,oe):me&&!me.hasOnce&&(Q!==ni||K>0&&K&64)?te(me,Z,H,!1,!0):(Q===ni&&K&384||!le&&De&16)&&te(fe,Z,H),oe&&N(X)}(z&&(O=ie&&ie.onVnodeUnmounted)||ge)&&yo(()=>{O&&sc(O,Z,X),ge&&zh(X,null,Z,"unmounted")},H)},N=X=>{const{type:Z,el:H,anchor:oe,transition:le}=X;if(Z===ni){$(H,oe);return}if(Z===Gm){E(X);return}const Q=()=>{i(H),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(X.shapeFlag&1&&le&&!le.persisted){const{leave:ie,delayLeave:xe}=le,fe=()=>ie(H,Q);xe?xe(X.el,Q,fe):fe()}else Q()},$=(X,Z)=>{let H;for(;X!==Z;)H=d(X),i(X),X=H;i(Z)},j=(X,Z,H)=>{const{bum:oe,scope:le,job:Q,subTree:ie,um:xe,m:fe,a:me,parent:De,slots:{__:K}}=X;dI(fe),dI(me),oe&&aE(oe),De&&Ht(K)&&K.forEach(q=>{De.renderCache[q]=void 0}),le.stop(),Q&&(Q.flags|=8,I(ie,X,Z,H)),xe&&yo(xe,Z),yo(()=>{X.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&X.asyncDep&&!X.asyncResolved&&X.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},te=(X,Z,H,oe=!1,le=!1,Q=0)=>{for(let ie=Q;ie<X.length;ie++)I(X[ie],Z,H,oe,le)},ce=X=>{if(X.shapeFlag&6)return ce(X.component.subTree);if(X.shapeFlag&128)return X.suspense.next();const Z=d(X.anchor||X.el),H=Z&&Z[aY];return H?d(H):Z};let ve=!1;const Te=(X,Z,H)=>{X==null?Z._vnode&&I(Z._vnode,null,null,!0):m(Z._vnode||null,X,Z,null,null,null,H),Z._vnode=X,ve||(ve=!0,iI(),CU(),ve=!1)},$e={p:m,um:I,m:F,r:N,mt:v,mc:k,pc:U,pbc:A,n:ce,o:n};return{render:Te,hydrate:void 0,createApp:NY(Te)}}function mE({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Hh({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function $Y(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function eB(n,e,t=!1){const r=n.children,i=e.children;if(Ht(r)&&Ht(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Fu(i[s]),a.el=o.el),!t&&a.patchFlag!==-2&&eB(o,a)),a.type===J_&&(a.el=o.el),a.type===os&&!a.el&&(a.el=o.el)}}function zY(n){const e=n.slice(),t=[0];let r,i,s,o,a;const c=n.length;for(r=0;r<c;r++){const l=n[r];if(l!==0){if(i=t[t.length-1],n[i]<l){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<l?s=a+1:o=a;l<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function tB(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:tB(e)}function dI(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const HY=Symbol.for("v-scx"),VY=()=>Wd(HY);function ef(n,e){return zC(n,null,e)}function wt(n,e,t){return zC(n,e,t)}function zC(n,e,t=sr){const{immediate:r,deep:i,flush:s,once:o}=t,a=bi({},t),c=e&&r||!e&&s!=="post";let l;if(w0){if(s==="sync"){const f=VY();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!c){const f=()=>{};return f.stop=$a,f.resume=$a,f.pause=$a,f}}const u=ri;a.call=(f,p,m)=>Ga(f,u,p,m);let h=!1;s==="post"?a.scheduler=f=>{yo(f,u&&u.suspense)}:s!=="sync"&&(h=!0,a.scheduler=(f,p)=>{p?f():DC(f)}),a.augmentJob=f=>{e&&(f.flags|=4),h&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const d=iY(n,e,a);return w0&&(l?l.push(d):c&&d()),d}function WY(n,e,t){const r=this.proxy,i=Dr(n)?n.includes(".")?nB(r,n):()=>r[n]:n.bind(r,r);let s;Gt(e)?s=e:(s=e.handler,t=e);const o=cy(this),a=zC(i,s.bind(r),t);return o(),a}function nB(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const qY=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${aa(e)}Modifiers`]||n[`${xf(e)}Modifiers`];function jY(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||sr;let i=t;const s=e.startsWith("update:"),o=s&&qY(r,e.slice(7));o&&(o.trim&&(i=t.map(u=>Dr(u)?u.trim():u)),o.number&&(i=t.map(_K)));let a,c=r[a=oE(e)]||r[a=oE(aa(e))];!c&&s&&(c=r[a=oE(xf(e))]),c&&Ga(c,n,6,i);const l=r[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Ga(l,n,6,i)}}function rB(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!Gt(n)){const c=l=>{const u=rB(l,e,!0);u&&(a=!0,bi(o,u))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!s&&!a?(ar(n)&&r.set(n,null),null):(Ht(s)?s.forEach(c=>o[c]=null):bi(o,s),ar(n)&&r.set(n,o),o)}function Z_(n,e){return!n||!B_(e)?!1:(e=e.slice(2).replace(/Once$/,""),$n(n,e[0].toLowerCase()+e.slice(1))||$n(n,xf(e))||$n(n,e))}function fI(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=n,g=H3(n);let y,b;try{if(t.shapeFlag&4){const E=i||r,x=E;y=xc(l.call(x,E,u,h,f,d,p)),b=a}else{const E=e;y=xc(E.length>1?E(h,{attrs:a,slots:o,emit:c}):E(h,null)),b=e.props?a:GY(a)}}catch(E){Km.length=0,oy(E,n,1),y=en(os)}let w=y;if(b&&m!==!1){const E=Object.keys(b),{shapeFlag:x}=w;E.length&&x&7&&(s&&E.some(CC)&&(b=KY(b,s)),w=vh(w,b,!1,!0))}return t.dirs&&(w=vh(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(t.dirs):t.dirs),t.transition&&Ng(w,t.transition),y=w,H3(g),y}const GY=n=>{let e;for(const t in n)(t==="class"||t==="style"||B_(t))&&((e||(e={}))[t]=n[t]);return e},KY=(n,e)=>{const t={};for(const r in n)(!CC(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function YY(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return r?pI(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!Z_(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?pI(r,o,l):!0:!!o;return!1}function pI(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!Z_(t,s))return!0}return!1}function XY({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const iB=n=>n.__isSuspense;function ZY(n,e){e&&e.pendingBranch?Ht(n)?e.effects.push(...n):e.effects.push(n):AU(n)}const ni=Symbol.for("v-fgt"),J_=Symbol.for("v-txt"),os=Symbol.for("v-cmt"),Gm=Symbol.for("v-stc"),Km=[];let Co=null;function Re(n=!1){Km.push(Co=n?null:[])}function JY(){Km.pop(),Co=Km[Km.length-1]||null}let Og=1;function mI(n,e=!1){Og+=n,n<0&&Co&&e&&(Co.hasOnce=!0)}function sB(n){return n.dynamicChildren=Og>0?Co||n0:null,JY(),Og>0&&Co&&Co.push(n),n}function Oe(n,e,t,r,i,s){return sB(be(n,e,t,r,i,s,!0))}function si(n,e,t,r,i){return sB(en(n,e,t,r,i,!0))}function kg(n){return n?n.__v_isVNode===!0:!1}function vd(n,e){return n.type===e.type&&n.key===e.key}const oB=({key:n})=>n??null,Yv=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Dr(n)||or(n)||Gt(n)?{i:Li,r:n,k:e,f:!!t}:n:null);function be(n,e=null,t=null,r=0,i=null,s=n===ni?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&oB(e),ref:e&&Yv(e),scopeId:IU,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Li};return a?(VC(c,t),s&128&&n.normalize(c)):t&&(c.shapeFlag|=Dr(t)?8:16),Og>0&&!o&&Co&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Co.push(c),c}const en=QY;function QY(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===BU)&&(n=os),kg(n)){const a=vh(n,e,!0);return t&&VC(a,t),Og>0&&!s&&Co&&(a.shapeFlag&6?Co[Co.indexOf(n)]=a:Co.push(a)),a.patchFlag=-2,a}if(cX(n)&&(n=n.__vccOpts),e){e=eX(e);let{class:a,style:c}=e;a&&!Dr(a)&&(e.class=Io(a)),ar(c)&&(OC(c)&&!Ht(c)&&(c=bi({},c)),e.style=Dh(c))}const o=Dr(n)?1:iB(n)?128:MU(n)?64:ar(n)?4:Gt(n)?2:0;return be(n,e,t,r,i,o,s,!0)}function eX(n){return n?OC(n)||GU(n)?bi({},n):n:null}function vh(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:c}=n,l=e?Dg(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:l,key:l&&oB(l),ref:e&&e.ref?t&&s?Ht(s)?s.concat(Yv(e)):[s,Yv(e)]:Yv(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==ni?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&vh(n.ssContent),ssFallback:n.ssFallback&&vh(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&r&&Ng(u,c.clone(u)),u}function Ca(n=" ",e=0){return en(J_,null,n,e)}function HC(n,e){const t=en(Gm,null,n);return t.staticCount=e,t}function bh(n="",e=!1){return e?(Re(),si(os,null,n)):en(os,null,n)}function xc(n){return n==null||typeof n=="boolean"?en(os):Ht(n)?en(ni,null,n.slice()):kg(n)?Fu(n):en(J_,null,String(n))}function Fu(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:vh(n)}function VC(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(Ht(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),VC(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!GU(e)?e._ctx=Li:i===3&&Li&&(Li.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Gt(e)?(e={default:e,_ctx:Li},t=32):(e=String(e),r&64?(t=16,e=[Ca(e)]):t=8);n.children=e,n.shapeFlag|=t}function Dg(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Io([e.class,r.class]));else if(i==="style")e.style=Dh([e.style,r.style]);else if(B_(i)){const s=e[i],o=r[i];o&&s!==o&&!(Ht(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function sc(n,e,t,r=null){Ga(n,e,7,[t,r])}const tX=WU();let nX=0;function rX(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||tX,s={uid:nX++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new QL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:YU(r,i),emitsOptions:rB(r,i),emit:null,emitted:null,propsDefaults:sr,inheritAttrs:r.inheritAttrs,ctx:sr,data:sr,props:sr,attrs:sr,slots:sr,refs:sr,setupState:sr,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=jY.bind(null,s),n.ce&&n.ce(s),s}let ri=null;const Bc=()=>ri||Li;let W3,Dx;{const n=H_(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};W3=e("__VUE_INSTANCE_SETTERS__",t=>ri=t),Dx=e("__VUE_SSR_SETTERS__",t=>w0=t)}const cy=n=>{const e=ri;return W3(n),n.scope.on(),()=>{n.scope.off(),W3(e)}},gI=()=>{ri&&ri.scope.off(),W3(null)};function aB(n){return n.vnode.shapeFlag&4}let w0=!1;function iX(n,e=!1,t=!1){e&&Dx(e);const{props:r,children:i}=n.vnode,s=aB(n);OY(n,r,s,e),UY(n,i,t||e);const o=s?sX(n,e):void 0;return e&&Dx(!1),o}function sX(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,EY);const{setup:r}=t;if(r){ql();const i=n.setupContext=r.length>1?lB(n):null,s=cy(n),o=sy(r,n,0,[n.props,i]),a=GL(o);if(jl(),s(),(a||n.sp)&&!s0(n)&&LC(n),a){if(o.then(gI,gI),e)return o.then(c=>{yI(n,c)}).catch(c=>{oy(c,n,0)});n.asyncDep=o}else yI(n,o)}else cB(n)}function yI(n,e,t){Gt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:ar(e)&&(n.setupState=wU(e)),cB(n)}function cB(n,e,t){const r=n.type;n.render||(n.render=r.render||$a);{const i=cy(n);ql();try{CY(n)}finally{jl(),i()}}}const oX={get(n,e){return ss(n,"get",""),n[e]}};function lB(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,oX),slots:n.slots,emit:n.emit,expose:e}}function WC(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(wU(kC(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in qm)return qm[t](n)},has(e,t){return t in e||t in qm}})):n.proxy}function aX(n,e=!0){return Gt(n)?n.displayName||n.name:n.name||e&&n.__name}function cX(n){return Gt(n)&&"__vccOpts"in n}const Ee=(n,e)=>nY(n,e,w0);function Lx(n,e,t){const r=arguments.length;return r===2?ar(e)&&!Ht(e)?kg(e)?en(n,null,[e]):en(n,e):en(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&kg(t)&&(t=[t]),en(n,e,t))}const lX="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ux;const wI=typeof window<"u"&&window.trustedTypes;if(wI)try{Ux=wI.createPolicy("vue",{createHTML:n=>n})}catch{}const uB=Ux?n=>Ux.createHTML(n):n=>n,uX="http://www.w3.org/2000/svg",hX="http://www.w3.org/1998/Math/MathML",xl=typeof document<"u"?document:null,vI=xl&&xl.createElement("template"),dX={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?xl.createElementNS(uX,n):e==="mathml"?xl.createElementNS(hX,n):t?xl.createElement(n,{is:t}):xl.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>xl.createTextNode(n),createComment:n=>xl.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>xl.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{vI.innerHTML=uB(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=vI.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},uu="transition",R1="animation",Lg=Symbol("_vtc"),hB={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},fX=bi({},RU,hB),pX=n=>(n.displayName="Transition",n.props=fX,n),dB=pX((n,{slots:e})=>Lx(uY,mX(n),e)),Vh=(n,e=[])=>{Ht(n)?n.forEach(t=>t(...e)):n&&n(...e)},bI=n=>n?Ht(n)?n.some(e=>e.length>1):n.length>1:!1;function mX(n){const e={};for(const D in n)D in hB||(e[D]=n[D]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:c=s,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:d=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,p=gX(i),m=p&&p[0],g=p&&p[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:w,onLeave:E,onLeaveCancelled:x,onBeforeAppear:C=y,onAppear:R=b,onAppearCancelled:k=w}=e,_=(D,P,v,S)=>{D._enterCancelled=S,Wh(D,P?u:a),Wh(D,P?l:o),v&&v()},A=(D,P)=>{D._isLeaving=!1,Wh(D,h),Wh(D,f),Wh(D,d),P&&P()},M=D=>(P,v)=>{const S=D?R:b,T=()=>_(P,D,v);Vh(S,[P,T]),_I(()=>{Wh(P,D?c:s),tl(P,D?u:a),bI(S)||EI(P,r,m,T)})};return bi(e,{onBeforeEnter(D){Vh(y,[D]),tl(D,s),tl(D,o)},onBeforeAppear(D){Vh(C,[D]),tl(D,c),tl(D,l)},onEnter:M(!1),onAppear:M(!0),onLeave(D,P){D._isLeaving=!0;const v=()=>A(D,P);tl(D,h),D._enterCancelled?(tl(D,d),AI()):(AI(),tl(D,d)),_I(()=>{D._isLeaving&&(Wh(D,h),tl(D,f),bI(E)||EI(D,r,g,v))}),Vh(E,[D,v])},onEnterCancelled(D){_(D,!1,void 0,!0),Vh(w,[D])},onAppearCancelled(D){_(D,!0,void 0,!0),Vh(k,[D])},onLeaveCancelled(D){A(D),Vh(x,[D])}})}function gX(n){if(n==null)return null;if(ar(n))return[gE(n.enter),gE(n.leave)];{const e=gE(n);return[e,e]}}function gE(n){return EK(n)}function tl(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Lg]||(n[Lg]=new Set)).add(e)}function Wh(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Lg];t&&(t.delete(e),t.size||(n[Lg]=void 0))}function _I(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let yX=0;function EI(n,e,t,r){const i=n._endId=++yX,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:o,timeout:a,propCount:c}=wX(n,e);if(!o)return r();const l=o+"end";let u=0;const h=()=>{n.removeEventListener(l,d),s()},d=f=>{f.target===n&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),n.addEventListener(l,d)}function wX(n,e){const t=window.getComputedStyle(n),r=p=>(t[p]||"").split(", "),i=r(`${uu}Delay`),s=r(`${uu}Duration`),o=xI(i,s),a=r(`${R1}Delay`),c=r(`${R1}Duration`),l=xI(a,c);let u=null,h=0,d=0;e===uu?o>0&&(u=uu,h=o,d=s.length):e===R1?l>0&&(u=R1,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?uu:R1:null,d=u?u===uu?s.length:c.length:0);const f=u===uu&&/\b(transform|all)(,|$)/.test(r(`${uu}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function xI(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>SI(t)+SI(n[r])))}function SI(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function AI(){return document.body.offsetHeight}function vX(n,e,t){const r=n[Lg];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const CI=Symbol("_vod"),bX=Symbol("_vsh"),fB=Symbol("");function _X(n){const e=Bc();if(!e)return;const t=e.ut=(i=n(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>q3(s,i))},r=()=>{const i=n(e.proxy);e.ce?q3(e.ce,i):Bx(e.subTree,i),t(i)};LU(()=>{AU(r)}),No(()=>{wt(r,$a,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),ca(()=>i.disconnect())})}function Bx(n,e){if(n.shapeFlag&128){const t=n.suspense;n=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{Bx(t.activeBranch,e)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)q3(n.el,e);else if(n.type===ni)n.children.forEach(t=>Bx(t,e));else if(n.type===Gm){let{el:t,anchor:r}=n;for(;t&&(q3(t,e),t!==r);)t=t.nextSibling}}function q3(n,e){if(n.nodeType===1){const t=n.style;let r="";for(const i in e)t.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;t[fB]=r}}const EX=/(^|;)\s*display\s*:/;function xX(n,e,t){const r=n.style,i=Dr(t);let s=!1;if(t&&!i){if(e)if(Dr(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Xv(r,a,"")}else for(const o in e)t[o]==null&&Xv(r,o,"");for(const o in t)o==="display"&&(s=!0),Xv(r,o,t[o])}else if(i){if(e!==t){const o=r[fB];o&&(t+=";"+o),r.cssText=t,s=EX.test(t)}}else e&&n.removeAttribute("style");CI in n&&(n[CI]=s?r.display:"",n[bX]&&(r.display="none"))}const TI=/\s*!important$/;function Xv(n,e,t){if(Ht(t))t.forEach(r=>Xv(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=SX(n,e);TI.test(t)?n.setProperty(xf(r),t.replace(TI,""),"important"):n[r]=t}}const II=["Webkit","Moz","ms"],yE={};function SX(n,e){const t=yE[e];if(t)return t;let r=aa(e);if(r!=="filter"&&r in n)return yE[e]=r;r=z_(r);for(let i=0;i<II.length;i++){const s=II[i]+r;if(s in n)return yE[e]=s}return e}const MI="http://www.w3.org/1999/xlink";function RI(n,e,t,r,i,s=IK(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(MI,e.slice(6,e.length)):n.setAttributeNS(MI,e,t):t==null||s&&!XL(t)?n.removeAttribute(e):n.setAttribute(e,s?"":iu(t)?String(t):t)}function PI(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?uB(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=XL(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function AX(n,e,t,r){n.addEventListener(e,t,r)}function CX(n,e,t,r){n.removeEventListener(e,t,r)}const NI=Symbol("_vei");function TX(n,e,t,r,i=null){const s=n[NI]||(n[NI]={}),o=s[e];if(r&&o)o.value=r;else{const[a,c]=IX(e);if(r){const l=s[e]=PX(r,i);AX(n,a,l,c)}else o&&(CX(n,a,o,c),s[e]=void 0)}}const OI=/(?:Once|Passive|Capture)$/;function IX(n){let e;if(OI.test(n)){e={};let r;for(;r=n.match(OI);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):xf(n.slice(2)),e]}let wE=0;const MX=Promise.resolve(),RX=()=>wE||(MX.then(()=>wE=0),wE=Date.now());function PX(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Ga(NX(r,t.value),e,5,[r])};return t.value=n,t.attached=RX(),t}function NX(n,e){if(Ht(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const kI=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,OX=(n,e,t,r,i,s)=>{const o=i==="svg";e==="class"?vX(n,r,o):e==="style"?xX(n,t,r):B_(e)?CC(e)||TX(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):kX(n,e,r,o))?(PI(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&RI(n,e,r,o,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Dr(r))?PI(n,aa(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),RI(n,e,r,o))};function kX(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&kI(e)&&Gt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return kI(e)&&Dr(t)?!1:e in n}const DX=["ctrl","shift","alt","meta"],LX={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>DX.some(t=>n[`${t}Key`]&&!e.includes(t))},UX=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=LX[e[o]];if(a&&a(i,e))return}return n(i,...s)})},BX=bi({patchProp:OX},dX);let DI;function FX(){return DI||(DI=QU(BX))}const $X=(...n)=>{const e=FX().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=HX(r);if(!i)return;const s=e._component;!Gt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,zX(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function zX(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function HX(n){return Dr(n)?document.querySelector(n):n}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let pB;const Q_=n=>pB=n,mB=Symbol();function Fx(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Ym;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Ym||(Ym={}));function VX(){const n=eU(!0),e=n.run(()=>Ae({}));let t=[],r=[];const i=kC({install(s){Q_(i),i._a=s,s.provide(mB,i),s.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const gB=()=>{};function LI(n,e,t,r=gB){n.push(e);const i=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),r())};return!t&&V_()&&MC(i),i}function Wf(n,...e){n.slice().forEach(t=>{t(...e)})}const WX=n=>n(),UI=Symbol(),vE=Symbol();function $x(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];Fx(i)&&Fx(r)&&n.hasOwnProperty(t)&&!or(r)&&!lh(r)?n[t]=$x(i,r):n[t]=r}return n}const qX=Symbol();function jX(n){return!Fx(n)||!Object.prototype.hasOwnProperty.call(n,qX)}const{assign:Du}=Object;function GX(n){return!!(or(n)&&n.effect)}function KX(n,e,t,r){const{state:i,actions:s,getters:o}=e,a=t.state.value[n];let c;function l(){a||(t.state.value[n]=i?i():{});const u=bU(t.state.value[n]);return Du(u,s,Object.keys(o||{}).reduce((h,d)=>(h[d]=kC(Ee(()=>{Q_(t);const f=t._s.get(n);return o[d].call(f,f)})),h),{}))}return c=yB(n,l,e,t,r,!0),c}function yB(n,e,t={},r,i,s){let o;const a=Du({actions:{}},t),c={deep:!0};let l,u,h=[],d=[],f;const p=r.state.value[n];!s&&!p&&(r.state.value[n]={}),Ae({});let m;function g(k){let _;l=u=!1,typeof k=="function"?(k(r.state.value[n]),_={type:Ym.patchFunction,storeId:n,events:f}):($x(r.state.value[n],k),_={type:Ym.patchObject,payload:k,storeId:n,events:f});const A=m=Symbol();K_().then(()=>{m===A&&(l=!0)}),u=!0,Wf(h,_,r.state.value[n])}const y=s?function(){const{state:_}=t,A=_?_():{};this.$patch(M=>{Du(M,A)})}:gB;function b(){o.stop(),h=[],d=[],r._s.delete(n)}const w=(k,_="")=>{if(UI in k)return k[vE]=_,k;const A=function(){Q_(r);const M=Array.from(arguments),D=[],P=[];function v(L){D.push(L)}function S(L){P.push(L)}Wf(d,{args:M,name:A[vE],store:x,after:v,onError:S});let T;try{T=k.apply(this&&this.$id===n?this:x,M)}catch(L){throw Wf(P,L),L}return T instanceof Promise?T.then(L=>(Wf(D,L),L)).catch(L=>(Wf(P,L),Promise.reject(L))):(Wf(D,T),T)};return A[UI]=!0,A[vE]=_,A},E={_p:r,$id:n,$onAction:LI.bind(null,d),$patch:g,$reset:y,$subscribe(k,_={}){const A=LI(h,k,_.detached,()=>M()),M=o.run(()=>wt(()=>r.state.value[n],D=>{(_.flush==="sync"?u:l)&&k({storeId:n,type:Ym.direct,events:f},D)},Du({},c,_)));return A},$dispose:b},x=Uc(E);r._s.set(n,x);const R=(r._a&&r._a.runWithContext||WX)(()=>r._e.run(()=>(o=eU()).run(()=>e({action:w}))));for(const k in R){const _=R[k];if(or(_)&&!GX(_)||lh(_))s||(p&&jX(_)&&(or(_)?_.value=p[k]:$x(_,p[k])),r.state.value[n][k]=_);else if(typeof _=="function"){const A=w(_,k);R[k]=A,a.actions[k]=_}}return Du(x,R),Du(fn(x),R),Object.defineProperty(x,"$state",{get:()=>r.state.value[n],set:k=>{g(_=>{Du(_,k)})}}),r._p.forEach(k=>{Du(x,o.run(()=>k({store:x,app:r._a,pinia:r,options:a})))}),p&&s&&t.hydrate&&t.hydrate(x.$state,p),l=!0,u=!0,x}/*! #__NO_SIDE_EFFECTS__ */function Oo(n,e,t){let r;const i=typeof e=="function";r=i?t:e;function s(o,a){const c=BC();return o=o||(c?Wd(mB,null):null),o&&Q_(o),o=pB,o._s.has(n)||(i?yB(n,e,r,o):KX(n,r,o)),o._s.get(n)}return s.$id=n,s}function Y0(n){return V_()?(MC(n),!0):!1}function BI(){const n=new Set,e=s=>{n.delete(s)};return{on:s=>{n.add(s);const o=()=>e(s);return Y0(o),{off:o}},off:e,trigger:(...s)=>Promise.all(Array.from(n).map(o=>o(...s))),clear:()=>{n.clear()}}}const ly=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const YX=Object.prototype.toString,wB=n=>YX.call(n)==="[object Object]",$u=()=>{},XX=ZX();function ZX(){var n,e;return ly&&((n=window?.navigator)==null?void 0:n.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function JX(...n){if(n.length!==1)return _U(...n);const e=n[0];return typeof e=="function"?Qo(vU(()=>({get:e,set:$u}))):Ae(e)}function QX(n,e){function t(...r){return new Promise((i,s)=>{Promise.resolve(n(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(i).catch(s)})}return t}const eZ=n=>n();function tZ(n,e=!1,t="Timeout"){return new Promise((r,i)=>{setTimeout(e?()=>i(t):r,n)})}function nZ(n){return n}function rZ(n){let e;function t(){return e||(e=n()),e}return t.reset=async()=>{const r=e;e=void 0,r&&await r},t}function bE(n){return Array.isArray(n)?n:[n]}function iZ(n){return Bc()}function sZ(n,e=!0,t){iZ()?No(n,t):e?n():K_(n)}function oZ(n,e,t={}){const{immediate:r=!0,immediateCallback:i=!1}=t,s=Tt(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function c(){s.value=!1,a()}function l(...u){i&&n(),a(),s.value=!0,o=setTimeout(()=>{s.value=!1,o=null,n(...u)},Ot(e))}return r&&(s.value=!0,ly&&l()),Y0(c),{isPending:YK(s),start:l,stop:c}}function FI(n,e,t={}){const{eventFilter:r=eZ,...i}=t,s=QX(r,e);let o,a,c;if(i.flush==="sync"){const l=Tt(!1);a=()=>{},o=u=>{l.value=!0,u(),l.value=!1},c=wt(n,(...u)=>{l.value||s(...u)},i)}else{const l=[],u=Tt(0),h=Tt(0);a=()=>{u.value=h.value},l.push(wt(n,()=>{h.value++},{...i,flush:"sync"})),o=d=>{const f=h.value;d(),u.value+=h.value-f},l.push(wt(n,(...d)=>{const f=u.value>0&&u.value===h.value;u.value=0,h.value=0,!f&&s(...d)},i)),c=()=>{l.forEach(d=>d())}}return{stop:c,ignoreUpdates:o,ignorePrevAsyncUpdates:a}}function aZ(n,e,t){return wt(n,e,{...t,immediate:!0})}const qC=ly?window:void 0,vB=ly?window.document:void 0,bB=ly?window.navigator:void 0;function Sd(n){var e;const t=Ot(n);return(e=t?.$el)!=null?e:t}function Dn(...n){const e=[],t=()=>{e.forEach(a=>a()),e.length=0},r=(a,c,l,u)=>(a.addEventListener(c,l,u),()=>a.removeEventListener(c,l,u)),i=Ee(()=>{const a=bE(Ot(n[0])).filter(c=>c!=null);return a.every(c=>typeof c!="string")?a:void 0}),s=aZ(()=>{var a,c;return[(c=(a=i.value)==null?void 0:a.map(l=>Sd(l)))!=null?c:[qC].filter(l=>l!=null),bE(Ot(i.value?n[1]:n[0])),bE(ht(i.value?n[2]:n[1])),Ot(i.value?n[3]:n[2])]},([a,c,l,u])=>{if(t(),!a?.length||!c?.length||!l?.length)return;const h=wB(u)?{...u}:u;e.push(...a.flatMap(d=>c.flatMap(f=>l.map(p=>r(d,f,p,h)))))},{flush:"post"}),o=()=>{s(),t()};return Y0(t),o}let $I=!1;function cZ(n,e,t={}){const{window:r=qC,ignore:i=[],capture:s=!0,detectIframe:o=!1,controls:a=!1}=t;if(!r)return a?{stop:$u,cancel:$u,trigger:$u}:$u;if(XX&&!$I){$I=!0;const g={passive:!0};Array.from(r.document.body.children).forEach(y=>y.addEventListener("click",$u,g)),r.document.documentElement.addEventListener("click",$u,g)}let c=!0;const l=g=>Ot(i).some(y=>{if(typeof y=="string")return Array.from(r.document.querySelectorAll(y)).some(b=>b===g.target||g.composedPath().includes(b));{const b=Sd(y);return b&&(g.target===b||g.composedPath().includes(b))}});function u(g){const y=Ot(g);return y&&y.$.subTree.shapeFlag===16}function h(g,y){const b=Ot(g),w=b.$.subTree&&b.$.subTree.children;return w==null||!Array.isArray(w)?!1:w.some(E=>E.el===y.target||y.composedPath().includes(E.el))}const d=g=>{const y=Sd(n);if(g.target!=null&&!(!(y instanceof Element)&&u(n)&&h(n,g))&&!(!y||y===g.target||g.composedPath().includes(y))){if("detail"in g&&g.detail===0&&(c=!l(g)),!c){c=!0;return}e(g)}};let f=!1;const p=[Dn(r,"click",g=>{f||(f=!0,setTimeout(()=>{f=!1},0),d(g))},{passive:!0,capture:s}),Dn(r,"pointerdown",g=>{const y=Sd(n);c=!l(g)&&!!(y&&!g.composedPath().includes(y))},{passive:!0}),o&&Dn(r,"blur",g=>{setTimeout(()=>{var y;const b=Sd(n);((y=r.document.activeElement)==null?void 0:y.tagName)==="IFRAME"&&!b?.contains(r.document.activeElement)&&e(g)},0)},{passive:!0})].filter(Boolean),m=()=>p.forEach(g=>g());return a?{stop:m,cancel:()=>{c=!1},trigger:g=>{c=!0,d(g),c=!1}}:m}function lZ(){const n=Tt(!1),e=Bc();return e&&No(()=>{n.value=!0},e),n}function jC(n){const e=lZ();return Ee(()=>(e.value,!!n()))}function zI(n,e={}){const{controls:t=!1,navigator:r=bB}=e,i=jC(()=>r&&"permissions"in r),s=Tt(),o=typeof n=="string"?{name:n}:n,a=Tt(),c=()=>{var u,h;a.value=(h=(u=s.value)==null?void 0:u.state)!=null?h:"prompt"};Dn(s,"change",c,{passive:!0});const l=rZ(async()=>{if(i.value){if(!s.value)try{s.value=await r.permissions.query(o)}catch{s.value=void 0}finally{c()}if(t)return fn(s.value)}});return l(),t?{state:a,isSupported:i,query:l}:a}function sqe(n={}){const{navigator:e=bB,read:t=!1,source:r,copiedDuring:i=1500,legacy:s=!1}=n,o=jC(()=>e&&"clipboard"in e),a=zI("clipboard-read"),c=zI("clipboard-write"),l=Ee(()=>o.value||s),u=Tt(""),h=Tt(!1),d=oZ(()=>h.value=!1,i,{immediate:!1});async function f(){let b=!(o.value&&y(a.value));if(!b)try{u.value=await e.clipboard.readText()}catch{b=!0}b&&(u.value=g())}l.value&&t&&Dn(["copy","cut"],f,{passive:!0});async function p(b=Ot(r)){if(l.value&&b!=null){let w=!(o.value&&y(c.value));if(!w)try{await e.clipboard.writeText(b)}catch{w=!0}w&&m(b),u.value=b,h.value=!0,d.start()}}function m(b){const w=document.createElement("textarea");w.value=b??"",w.style.position="absolute",w.style.opacity="0",document.body.appendChild(w),w.select(),document.execCommand("copy"),w.remove()}function g(){var b,w,E;return(E=(w=(b=document?.getSelection)==null?void 0:b.call(document))==null?void 0:w.toString())!=null?E:""}function y(b){return b==="granted"||b==="prompt"}return{isSupported:l,text:u,copied:h,copy:p}}const HI=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function uZ(n,e={}){const{document:t=vB,autoExit:r=!1}=e,i=Ee(()=>{var b;return(b=Sd(n))!=null?b:t?.documentElement}),s=Tt(!1),o=Ee(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(b=>t&&b in t||i.value&&b in i.value)),a=Ee(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(b=>t&&b in t||i.value&&b in i.value)),c=Ee(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(b=>t&&b in t||i.value&&b in i.value)),l=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(b=>t&&b in t),u=jC(()=>i.value&&t&&o.value!==void 0&&a.value!==void 0&&c.value!==void 0),h=()=>l?t?.[l]===i.value:!1,d=()=>{if(c.value){if(t&&t[c.value]!=null)return t[c.value];{const b=i.value;if(b?.[c.value]!=null)return!!b[c.value]}}return!1};async function f(){if(!(!u.value||!s.value)){if(a.value)if(t?.[a.value]!=null)await t[a.value]();else{const b=i.value;b?.[a.value]!=null&&await b[a.value]()}s.value=!1}}async function p(){if(!u.value||s.value)return;d()&&await f();const b=i.value;o.value&&b?.[o.value]!=null&&(await b[o.value](),s.value=!0)}async function m(){await(s.value?f():p())}const g=()=>{const b=d();(!b||b&&h())&&(s.value=b)},y={capture:!1,passive:!0};return Dn(t,HI,g,y),Dn(()=>Sd(i),HI,g,y),sZ(g,!1),r&&Y0(f),{isSupported:u,isFullscreen:s,enter:p,exit:f,toggle:m}}const hZ={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function oqe(n={}){const{reactive:e=!1,target:t=qC,aliasMap:r=hZ,passive:i=!0,onEventFired:s=$u}=n,o=Uc(new Set),a={toJSON(){return{}},current:o},c=e?Uc(a):a,l=new Set,u=new Set,h=new Set;function d(g,y){g in c&&(e?c[g]=y:c[g].value=y)}function f(){o.clear();for(const g of h)d(g,!1)}function p(g,y){var b,w;const E=(b=g.key)==null?void 0:b.toLowerCase(),C=[(w=g.code)==null?void 0:w.toLowerCase(),E].filter(Boolean);E&&(y?o.add(E):o.delete(E));for(const R of C)h.add(R),d(R,y);E==="shift"&&!y?(u.forEach(R=>{o.delete(R),d(R,!1)}),u.clear()):typeof g.getModifierState=="function"&&g.getModifierState("Shift")&&y&&[...o,...C].forEach(R=>u.add(R)),E==="meta"&&!y?(l.forEach(R=>{o.delete(R),d(R,!1)}),l.clear()):typeof g.getModifierState=="function"&&g.getModifierState("Meta")&&y&&[...o,...C].forEach(R=>l.add(R))}Dn(t,"keydown",g=>(p(g,!0),s(g)),{passive:i}),Dn(t,"keyup",g=>(p(g,!1),s(g)),{passive:i}),Dn("blur",f,{passive:i}),Dn("focus",f,{passive:i});const m=new Proxy(c,{get(g,y,b){if(typeof y!="string")return Reflect.get(g,y,b);if(y=y.toLowerCase(),y in r&&(y=r[y]),!(y in c))if(/[+_-]/.test(y)){const E=y.split(/[+_-]/g).map(x=>x.trim());c[y]=Ee(()=>E.map(x=>Ot(m[x])).every(Boolean))}else c[y]=Tt(!1);const w=Reflect.get(g,y,b);return e?Ot(w):w}});return m}function _E(n,e){Ot(n)&&e(Ot(n))}function dZ(n){let e=[];for(let t=0;t<n.length;++t)e=[...e,[n.start(t),n.end(t)]];return e}function EE(n){return Array.from(n).map(({label:e,kind:t,language:r,mode:i,activeCues:s,cues:o,inBandMetadataTrackDispatchType:a},c)=>({id:c,label:e,kind:t,language:r,mode:i,activeCues:s,cues:o,inBandMetadataTrackDispatchType:a}))}const fZ={src:"",tracks:[]};function aqe(n,e={}){n=JX(n),e={...fZ,...e};const{document:t=vB}=e,r={passive:!0},i=Tt(0),s=Tt(0),o=Tt(!1),a=Tt(1),c=Tt(!1),l=Tt(!1),u=Tt(!1),h=Tt(1),d=Tt(!1),f=Ae([]),p=Ae([]),m=Tt(-1),g=Tt(!1),y=Tt(!1),b=t&&"pictureInPictureEnabled"in t,w=BI(),E=BI(),x=D=>{_E(n,P=>{if(D){const v=typeof D=="number"?D:D.id;P.textTracks[v].mode="disabled"}else for(let v=0;v<P.textTracks.length;++v)P.textTracks[v].mode="disabled";m.value=-1})},C=(D,P=!0)=>{_E(n,v=>{const S=typeof D=="number"?D:D.id;P&&x(),v.textTracks[S].mode="showing",m.value=S})},R=()=>new Promise((D,P)=>{_E(n,async v=>{b&&(g.value?t.exitPictureInPicture().then(D).catch(P):v.requestPictureInPicture().then(D).catch(P))})});ef(()=>{if(!t)return;const D=Ot(n);if(!D)return;const P=Ot(e.src);let v=[];P&&(typeof P=="string"?v=[{src:P}]:Array.isArray(P)?v=P:wB(P)&&(v=[P]),D.querySelectorAll("source").forEach(S=>{S.remove()}),v.forEach(({src:S,type:T,media:L})=>{const U=t.createElement("source");U.setAttribute("src",S),U.setAttribute("type",T||""),U.setAttribute("media",L||""),Dn(U,"error",w.trigger,r),D.appendChild(U)}),D.load())}),wt([n,a],()=>{const D=Ot(n);D&&(D.volume=a.value)}),wt([n,y],()=>{const D=Ot(n);D&&(D.muted=y.value)}),wt([n,h],()=>{const D=Ot(n);D&&(D.playbackRate=h.value)}),ef(()=>{if(!t)return;const D=Ot(e.tracks),P=Ot(n);!D||!D.length||!P||(P.querySelectorAll("track").forEach(v=>v.remove()),D.forEach(({default:v,kind:S,label:T,src:L,srcLang:U},V)=>{const W=t.createElement("track");W.default=v||!1,W.kind=S,W.label=T,W.src=L,W.srclang=U,W.default&&(m.value=V),P.appendChild(W)}))});const{ignoreUpdates:k}=FI(i,D=>{const P=Ot(n);P&&(P.currentTime=D)}),{ignoreUpdates:_}=FI(u,D=>{const P=Ot(n);P&&(D?P.play().catch(v=>{throw E.trigger(v),v}):P.pause())});Dn(n,"timeupdate",()=>k(()=>i.value=Ot(n).currentTime),r),Dn(n,"durationchange",()=>s.value=Ot(n).duration,r),Dn(n,"progress",()=>f.value=dZ(Ot(n).buffered),r),Dn(n,"seeking",()=>o.value=!0,r),Dn(n,"seeked",()=>o.value=!1,r),Dn(n,["waiting","loadstart"],()=>{c.value=!0,_(()=>u.value=!1)},r),Dn(n,"loadeddata",()=>c.value=!1,r),Dn(n,"playing",()=>{c.value=!1,l.value=!1,_(()=>u.value=!0)},r),Dn(n,"ratechange",()=>h.value=Ot(n).playbackRate,r),Dn(n,"stalled",()=>d.value=!0,r),Dn(n,"ended",()=>l.value=!0,r),Dn(n,"pause",()=>_(()=>u.value=!1),r),Dn(n,"play",()=>_(()=>u.value=!0),r),Dn(n,"enterpictureinpicture",()=>g.value=!0,r),Dn(n,"leavepictureinpicture",()=>g.value=!1,r),Dn(n,"volumechange",()=>{const D=Ot(n);D&&(a.value=D.volume,y.value=D.muted)},r);const A=[],M=wt([n],()=>{const D=Ot(n);D&&(M(),A[0]=Dn(D.textTracks,"addtrack",()=>p.value=EE(D.textTracks),r),A[1]=Dn(D.textTracks,"removetrack",()=>p.value=EE(D.textTracks),r),A[2]=Dn(D.textTracks,"change",()=>p.value=EE(D.textTracks),r))});return Y0(()=>A.forEach(D=>D())),{currentTime:i,duration:s,waiting:c,seeking:o,ended:l,stalled:d,buffered:f,playing:u,rate:h,volume:a,muted:y,tracks:p,selectedTrack:m,enableTrack:C,disableTrack:x,supportsPictureInPicture:b,togglePictureInPicture:R,isPictureInPicture:g,onSourceError:w.on,onPlaybackError:E.on}}function pZ([n,e,t,r]){const i=(u,h)=>1-3*h+3*u,s=(u,h)=>3*h-6*u,o=u=>3*u,a=(u,h,d)=>((i(h,d)*u+s(h,d))*u+o(h))*u,c=(u,h,d)=>3*i(h,d)*u*u+2*s(h,d)*u+o(h),l=u=>{let h=u;for(let d=0;d<4;++d){const f=c(h,n,t);if(f===0)return h;const p=a(h,n,t)-u;h-=p/f}return h};return u=>n===e&&t===r?u:a(l(u),e,r)}function VI(n,e,t){return n+t*(e-n)}function xE(n){return(typeof n=="number"?[n]:n)||[]}function mZ(n,e,t,r={}){var i,s;const o=Ot(e),a=Ot(t),c=xE(o),l=xE(a),u=(i=Ot(r.duration))!=null?i:1e3,h=Date.now(),d=Date.now()+u,f=typeof r.transition=="function"?r.transition:(s=Ot(r.transition))!=null?s:nZ,p=typeof f=="function"?f:pZ(f);return new Promise(m=>{n.value=o;const g=()=>{var y;if((y=r.abort)!=null&&y.call(r)){m();return}const b=Date.now(),w=p((b-h)/u),E=xE(n.value).map((x,C)=>VI(c[C],l[C],w));Array.isArray(n.value)?n.value=E.map((x,C)=>{var R,k;return VI((R=c[C])!=null?R:0,(k=l[C])!=null?k:0,w)}):typeof n.value=="number"&&(n.value=E[0]),b<d?requestAnimationFrame(g):(n.value=a,m())};g()})}function gZ(n,e={}){let t=0;const r=()=>{const s=Ot(n);return typeof s=="number"?s:s.map(Ot)},i=Ae(r());return wt(r,async s=>{var o,a;if(Ot(e.disabled))return;const c=++t;if(e.delay&&await tZ(Ot(e.delay)),c!==t)return;const l=Array.isArray(s)?s.map(Ot):Ot(s);(o=e.onStarted)==null||o.call(e),await mZ(i,i.value,l,{...e,abort:()=>{var u;return c!==t||((u=e.abort)==null?void 0:u.call(e))}}),(a=e.onFinished)==null||a.call(e)},{deep:!0}),wt(()=>Ot(e.disabled),s=>{s&&(t++,i.value=r())}),Y0(()=>{t++}),Ee(()=>Ot(e.disabled)?r():i.value)}function Zv(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function yZ(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function _B(n){let e,t,r;n.length!==2?(e=Zv,t=(a,c)=>Zv(n(a),c),r=(a,c)=>n(a)-c):(e=n===Zv||n===yZ?n:wZ,t=n,r=n);function i(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const h=l+u>>>1;t(a[h],c)<0?l=h+1:u=h}while(l<u)}return l}function s(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const h=l+u>>>1;t(a[h],c)<=0?l=h+1:u=h}while(l<u)}return l}function o(a,c,l=0,u=a.length){const h=i(a,c,l,u-1);return h>l&&r(a[h-1],c)>-r(a[h],c)?h-1:h}return{left:i,center:o,right:s}}function wZ(){return 0}function vZ(n){return n===null?NaN:+n}const bZ=_B(Zv),_Z=bZ.right;_B(vZ).center;const EZ=Math.sqrt(50),xZ=Math.sqrt(10),SZ=Math.sqrt(2);function j3(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=EZ?10:s>=xZ?5:s>=SZ?2:1;let a,c,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(n*l),c=Math.round(e*l),a/l<n&&++a,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*o,a=Math.round(n/l),c=Math.round(e/l),a*l<n&&++a,c*l>e&&--c),c<a&&.5<=t&&t<2?j3(n,e,t*2):[a,c,l]}function AZ(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,s,o]=r?j3(e,n,t):j3(n,e,t);if(!(s>=i))return[];const a=s-i+1,c=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)c[l]=(s-l)/-o;else for(let l=0;l<a;++l)c[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)c[l]=(i+l)/-o;else for(let l=0;l<a;++l)c[l]=(i+l)*o;return c}function zx(n,e,t){return e=+e,n=+n,t=+t,j3(n,e,t)[2]}function CZ(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?zx(e,n,t):zx(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function TZ(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function GC(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function EB(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function uy(){}var Ug=.7,G3=1/Ug,o0="\\s*([+-]?\\d+)\\s*",Bg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",IZ=/^#([0-9a-f]{3,8})$/,MZ=new RegExp(`^rgb\\(${o0},${o0},${o0}\\)$`),RZ=new RegExp(`^rgb\\(${Pc},${Pc},${Pc}\\)$`),PZ=new RegExp(`^rgba\\(${o0},${o0},${o0},${Bg}\\)$`),NZ=new RegExp(`^rgba\\(${Pc},${Pc},${Pc},${Bg}\\)$`),OZ=new RegExp(`^hsl\\(${Bg},${Pc},${Pc}\\)$`),kZ=new RegExp(`^hsla\\(${Bg},${Pc},${Pc},${Bg}\\)$`),WI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};GC(uy,tf,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:qI,formatHex:qI,formatHex8:DZ,formatHsl:LZ,formatRgb:jI,toString:jI});function qI(){return this.rgb().formatHex()}function DZ(){return this.rgb().formatHex8()}function LZ(){return xB(this).formatHsl()}function jI(){return this.rgb().formatRgb()}function tf(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=IZ.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?GI(e):t===3?new Js(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?rw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?rw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=MZ.exec(n))?new Js(e[1],e[2],e[3],1):(e=RZ.exec(n))?new Js(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=PZ.exec(n))?rw(e[1],e[2],e[3],e[4]):(e=NZ.exec(n))?rw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=OZ.exec(n))?XI(e[1],e[2]/100,e[3]/100,1):(e=kZ.exec(n))?XI(e[1],e[2]/100,e[3]/100,e[4]):WI.hasOwnProperty(n)?GI(WI[n]):n==="transparent"?new Js(NaN,NaN,NaN,0):null}function GI(n){return new Js(n>>16&255,n>>8&255,n&255,1)}function rw(n,e,t,r){return r<=0&&(n=e=t=NaN),new Js(n,e,t,r)}function UZ(n){return n instanceof uy||(n=tf(n)),n?(n=n.rgb(),new Js(n.r,n.g,n.b,n.opacity)):new Js}function Hx(n,e,t,r){return arguments.length===1?UZ(n):new Js(n,e,t,r??1)}function Js(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}GC(Js,Hx,EB(uy,{brighter(n){return n=n==null?G3:Math.pow(G3,n),new Js(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Ug:Math.pow(Ug,n),new Js(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Js(qd(this.r),qd(this.g),qd(this.b),K3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KI,formatHex:KI,formatHex8:BZ,formatRgb:YI,toString:YI}));function KI(){return`#${Ad(this.r)}${Ad(this.g)}${Ad(this.b)}`}function BZ(){return`#${Ad(this.r)}${Ad(this.g)}${Ad(this.b)}${Ad((isNaN(this.opacity)?1:this.opacity)*255)}`}function YI(){const n=K3(this.opacity);return`${n===1?"rgb(":"rgba("}${qd(this.r)}, ${qd(this.g)}, ${qd(this.b)}${n===1?")":`, ${n})`}`}function K3(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function qd(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ad(n){return n=qd(n),(n<16?"0":"")+n.toString(16)}function XI(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Na(n,e,t,r)}function xB(n){if(n instanceof Na)return new Na(n.h,n.s,n.l,n.opacity);if(n instanceof uy||(n=tf(n)),!n)return new Na;if(n instanceof Na)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-i,c=(s+i)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new Na(o,a,c,n.opacity)}function FZ(n,e,t,r){return arguments.length===1?xB(n):new Na(n,e,t,r??1)}function Na(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}GC(Na,FZ,EB(uy,{brighter(n){return n=n==null?G3:Math.pow(G3,n),new Na(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Ug:Math.pow(Ug,n),new Na(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Js(SE(n>=240?n-240:n+120,i,r),SE(n,i,r),SE(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Na(ZI(this.h),iw(this.s),iw(this.l),K3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=K3(this.opacity);return`${n===1?"hsl(":"hsla("}${ZI(this.h)}, ${iw(this.s)*100}%, ${iw(this.l)*100}%${n===1?")":`, ${n})`}`}}));function ZI(n){return n=(n||0)%360,n<0?n+360:n}function iw(n){return Math.max(0,Math.min(1,n||0))}function SE(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}function $Z(n,e,t,r,i){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*r+o*i)/6}function Vx(n){var e=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),i=n[r],s=n[r+1],o=r>0?n[r-1]:2*i-s,a=r<e-1?n[r+2]:2*s-i;return $Z((t-r/e)*e,o,i,s,a)}}const KC=n=>()=>n;function zZ(n,e){return function(t){return n+t*e}}function HZ(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function VZ(n){return(n=+n)==1?SB:function(e,t){return t-e?HZ(e,t,n):KC(isNaN(e)?t:e)}}function SB(n,e){var t=e-n;return t?zZ(n,t):KC(isNaN(n)?e:n)}const Y3=function n(e){var t=VZ(e);function r(i,s){var o=t((i=Hx(i)).r,(s=Hx(s)).r),a=t(i.g,s.g),c=t(i.b,s.b),l=SB(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=n,r}(1);function WZ(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(s){for(i=0;i<t;++i)r[i]=n[i]*(1-s)+e[i]*s;return r}}function qZ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function jZ(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),s=new Array(t),o;for(o=0;o<r;++o)i[o]=YC(n[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function GZ(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function gi(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function KZ(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=YC(n[i],e[i]):r[i]=e[i];return function(s){for(i in t)r[i]=t[i](s);return r}}var Wx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,AE=new RegExp(Wx.source,"g");function YZ(n){return function(){return n}}function XZ(n){return function(e){return n(e)+""}}function AB(n,e){var t=Wx.lastIndex=AE.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(n=n+"",e=e+"";(r=Wx.exec(n))&&(i=AE.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:gi(r,i)})),t=AE.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?XZ(c[0].x):YZ(e):(e=c.length,function(l){for(var u=0,h;u<e;++u)a[(h=c[u]).i]=h.x(l);return a.join("")})}function YC(n,e){var t=typeof e,r;return e==null||t==="boolean"?KC(e):(t==="number"?gi:t==="string"?(r=tf(e))?(e=r,Y3):AB:e instanceof tf?Y3:e instanceof Date?GZ:qZ(e)?WZ:Array.isArray(e)?jZ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?KZ:gi)(n,e)}function ZZ(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}var JI=180/Math.PI,qx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function CB(n,e,t,r,i,s){var o,a,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*r)&&(t-=n*c,r-=e*c),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,c/=a),n*r<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,n)*JI,skewX:Math.atan(c)*JI,scaleX:o,scaleY:a}}var sw;function JZ(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?qx:CB(e.a,e.b,e.c,e.d,e.e,e.f)}function QZ(n){return n==null||(sw||(sw=document.createElementNS("http://www.w3.org/2000/svg","g")),sw.setAttribute("transform",n),!(n=sw.transform.baseVal.consolidate()))?qx:(n=n.matrix,CB(n.a,n.b,n.c,n.d,n.e,n.f))}function TB(n,e,t,r){function i(l){return l.length?l.pop()+" ":""}function s(l,u,h,d,f,p){if(l!==h||u!==d){var m=f.push("translate(",null,e,null,t);p.push({i:m-4,x:gi(l,h)},{i:m-2,x:gi(u,d)})}else(h||d)&&f.push("translate("+h+e+d+t)}function o(l,u,h,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:gi(l,u)})):u&&h.push(i(h)+"rotate("+u+r)}function a(l,u,h,d){l!==u?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:gi(l,u)}):u&&h.push(i(h)+"skewX("+u+r)}function c(l,u,h,d,f,p){if(l!==h||u!==d){var m=f.push(i(f)+"scale(",null,",",null,")");p.push({i:m-4,x:gi(l,h)},{i:m-2,x:gi(u,d)})}else(h!==1||d!==1)&&f.push(i(f)+"scale("+h+","+d+")")}return function(l,u){var h=[],d=[];return l=n(l),u=n(u),s(l.translateX,l.translateY,u.translateX,u.translateY,h,d),o(l.rotate,u.rotate,h,d),a(l.skewX,u.skewX,h,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,d),l=u=null,function(f){for(var p=-1,m=d.length,g;++p<m;)h[(g=d[p]).i]=g.x(f);return h.join("")}}}var eJ=TB(JZ,"px, ","px)","deg)"),tJ=TB(QZ,", ",")",")");function nJ(n){return function(){return n}}function rJ(n){return+n}var QI=[0,1];function zp(n){return n}function jx(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:nJ(isNaN(e)?NaN:.5)}function iJ(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function sJ(n,e,t){var r=n[0],i=n[1],s=e[0],o=e[1];return i<r?(r=jx(i,r),s=t(o,s)):(r=jx(r,i),s=t(s,o)),function(a){return s(r(a))}}function oJ(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=jx(n[o],n[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var c=_Z(n,a,1,r)-1;return s[c](i[c](a))}}function aJ(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function cJ(){var n=QI,e=QI,t=YC,r,i,s,o=zp,a,c,l;function u(){var d=Math.min(n.length,e.length);return o!==zp&&(o=iJ(n[0],n[d-1])),a=d>2?oJ:sJ,c=l=null,h}function h(d){return d==null||isNaN(d=+d)?s:(c||(c=a(n.map(r),e,t)))(r(o(d)))}return h.invert=function(d){return o(i((l||(l=a(e,n.map(r),gi)))(d)))},h.domain=function(d){return arguments.length?(n=Array.from(d,rJ),u()):n.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),t=ZZ,u()},h.clamp=function(d){return arguments.length?(o=d?!0:zp,u()):o!==zp},h.interpolate=function(d){return arguments.length?(t=d,u()):t},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,f){return r=d,i=f,u()}}function lJ(){return cJ()(zp,zp)}function uJ(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function X3(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function v0(n){return n=X3(Math.abs(n)),n?n[1]:NaN}function hJ(n,e){return function(t,r){for(var i=t.length,s=[],o=0,a=n[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),s.push(t.substring(i-=a,i+a)),!((c+=a+1)>r));)a=n[o=(o+1)%n.length];return s.reverse().join(e)}}function dJ(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var fJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Z3(n){if(!(e=fJ.exec(n)))throw new Error("invalid format: "+n);var e;return new XC({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Z3.prototype=XC.prototype;function XC(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}XC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pJ(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var IB;function mJ(n,e){var t=X3(n,e);if(!t)return n+"";var r=t[0],i=t[1],s=i-(IB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+X3(n,Math.max(0,e+s-1))[0]}function eM(n,e){var t=X3(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const tM={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:uJ,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>eM(n*100,e),r:eM,s:mJ,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function nM(n){return n}var rM=Array.prototype.map,iM=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function gJ(n){var e=n.grouping===void 0||n.thousands===void 0?nM:hJ(rM.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?nM:dJ(rM.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function l(h){h=Z3(h);var d=h.fill,f=h.align,p=h.sign,m=h.symbol,g=h.zero,y=h.width,b=h.comma,w=h.precision,E=h.trim,x=h.type;x==="n"?(b=!0,x="g"):tM[x]||(w===void 0&&(w=12),E=!0,x="g"),(g||d==="0"&&f==="=")&&(g=!0,d="0",f="=");var C=m==="$"?t:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",R=m==="$"?r:/[%p]/.test(x)?o:"",k=tM[x],_=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function A(M){var D=C,P=R,v,S,T;if(x==="c")P=k(M)+P,M="";else{M=+M;var L=M<0||1/M<0;if(M=isNaN(M)?c:k(Math.abs(M),w),E&&(M=pJ(M)),L&&+M==0&&p!=="+"&&(L=!1),D=(L?p==="("?p:a:p==="-"||p==="("?"":p)+D,P=(x==="s"?iM[8+IB/3]:"")+P+(L&&p==="("?")":""),_){for(v=-1,S=M.length;++v<S;)if(T=M.charCodeAt(v),48>T||T>57){P=(T===46?i+M.slice(v+1):M.slice(v))+P,M=M.slice(0,v);break}}}b&&!g&&(M=e(M,1/0));var U=D.length+M.length+P.length,V=U<y?new Array(y-U+1).join(d):"";switch(b&&g&&(M=e(V+M,V.length?y-P.length:1/0),V=""),f){case"<":M=D+M+P+V;break;case"=":M=D+V+M+P;break;case"^":M=V.slice(0,U=V.length>>1)+D+M+P+V.slice(U);break;default:M=V+D+M+P;break}return s(M)}return A.toString=function(){return h+""},A}function u(h,d){var f=l((h=Z3(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(v0(d)/3)))*3,m=Math.pow(10,-p),g=iM[8+p/3];return function(y){return f(m*y)+g}}return{format:l,formatPrefix:u}}var ow,MB,RB;yJ({thousands:",",grouping:[3],currency:["$",""]});function yJ(n){return ow=gJ(n),MB=ow.format,RB=ow.formatPrefix,ow}function wJ(n){return Math.max(0,-v0(Math.abs(n)))}function vJ(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(v0(e)/3)))*3-v0(Math.abs(n)))}function bJ(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,v0(e)-v0(n))+1}function _J(n,e,t,r){var i=CZ(n,e,t),s;switch(r=Z3(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(s=vJ(i,o))&&(r.precision=s),RB(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=bJ(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=wJ(i))&&(r.precision=s-(r.type==="%")*2);break}}return MB(r)}function EJ(n){var e=n.domain;return n.ticks=function(t){var r=e();return AZ(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return _J(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],c,l,u=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);u-- >0;){if(l=zx(o,a,t),l===c)return r[i]=o,r[s]=a,e(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;c=l}return n},n}function Fg(){var n=lJ();return n.copy=function(){return aJ(n,Fg())},TZ.apply(n,arguments),EJ(n)}class Hp{constructor(){this.volumeBuffer=[],this.state={isPrimed:!1,isInitialized:!1,contextState:"suspended",hasUserGesture:!1,volume:1,stream:0,source:null},this.SILENT_AUDIO="/silence.mp3",this.analysisConfig={definitions:[[2.5,.09]],bitDepth:Math.pow(2,10),lowpass:{frequency:7500,Q:.75}},this.getSpotifyVolume=()=>1,this.setupGestureDetection()}static getInstance(){return Hp.instance||(Hp.instance=new Hp),Hp.instance}setupGestureDetection(){if(typeof window>"u")return;const e=["click","touchstart","keydown","mousedown"],t=()=>{this.state.hasUserGesture=!0,console.log("🎵 User gesture detected - AudioContext ready for initialization"),e.forEach(r=>{document.removeEventListener(r,t)})};e.forEach(r=>{document.addEventListener(r,t,{once:!0,passive:!0})})}primeAudioSystem(){if(this.state.isPrimed)return console.log("🎵 Audio system already primed"),!0;if(!this.state.hasUserGesture)return console.warn("🎵 Cannot prime audio system without user gesture"),!1;try{return console.log("🎵 Priming audio system synchronously..."),this.audioContext=new AudioContext,this.audioElement=document.createElement("audio"),this.audioElement.preload="metadata",this.audioElement.crossOrigin="anonymous",this.audioElement.autoplay=!0,this.mediaElementSource=this.audioContext.createMediaElementSource(this.audioElement),this.analyserNode=this.audioContext.createAnalyser(),this.filterNode=this.audioContext.createBiquadFilter(),this.analyserNode.smoothingTimeConstant=0,this.analyserNode.fftSize=this.analysisConfig.bitDepth,this.filterNode.type="lowpass",this.filterNode.frequency.value=this.analysisConfig.lowpass.frequency,this.filterNode.Q.value=this.analysisConfig.lowpass.Q,this.mediaElementSource.connect(this.filterNode),this.filterNode.connect(this.analyserNode),this.mediaElementSource.connect(this.audioContext.destination),this.audioElement.src=this.SILENT_AUDIO,this.state.isPrimed=!0,this.state.contextState=this.audioContext.state,console.log("🎵 Audio system primed successfully!"),!0}catch(e){return console.error("🎵 Failed to prime audio system:",e),!1}}getAudioElement(){return!this.state.isPrimed&&this.state.hasUserGesture&&this.primeAudioSystem(),this.audioElement||null}getAudioContext(){return!this.state.isPrimed&&this.state.hasUserGesture&&this.primeAudioSystem(),this.audioContext||null}getAnalyserNode(){return this.analyserNode||null}setAudioSource(e){if(!this.audioElement)return console.warn("🎵 Audio element not available for setAudioSource"),!1;try{return console.log("🎵 Setting audio source:",e),this.audioElement.src=e,!0}catch(t){return console.error("🎵 Failed to set audio source:",t),!1}}async playAudio(){if(!this.audioElement)return console.warn("🎵 Audio element not available for playAudio"),!1;try{return this.audioContext?.state==="suspended"&&(await this.audioContext.resume(),this.state.contextState=this.audioContext.state),await this.audioElement.play(),console.log("🎵 Audio playing successfully"),!0}catch(e){return e.name==="AbortError"?console.log("🎵 Play interrupted by new load request (normal during track switching)"):e.name==="NotAllowedError"?console.warn("🎵 Play failed: User interaction required for autoplay"):console.error("🎵 Play failed:",e),!1}}pauseAudio(){this.audioElement&&(this.audioElement.pause(),console.log("🎵 Audio paused"))}get rawVolume(){if(!this.state.isPrimed)return 1;if(this.state.source==="spotify")return this.getSpotifyVolume();if(this.state.source===null)return 1;if(!this.analyserBuffer){this.analyserBuffer=new Uint8Array(this.analysisConfig.bitDepth/2);let r=this.analysisConfig.bitDepth/2;for(let i=0;i<r;i++)this.analyserBuffer[i]=0}this.analyserNode?.getByteFrequencyData(this.analyserBuffer);let e=this.analysisConfig.bitDepth/2,t=0;for(let r=0;r<e;r++)t+=this.analyserBuffer[r];return t/e}sampleVolume(e){let t=0;const r=Math.max(this.volumeBuffer.length-1,0),i=Math.max(r-e,0);let s=1/0;for(let o=r;o>=i;o--)t+=this.volumeBuffer[o],this.volumeBuffer[o]<s&&(s=this.volumeBuffer[o]);return[t/e,s]}tick(e){const t=this.rawVolume;this.volumeBuffer.push(t);const r=1e3/e,[i,s]=this.sampleVolume(this.analysisConfig.definitions[0][0]*1e3/r),[o]=this.sampleVolume(this.analysisConfig.definitions[0][1]*1e3/r),a=Number(Math.pow(Fg([s,i],[0,1])(o),(this.state.source==="spotify",1.5)).toFixed(3));if(!isNaN(a)){this.state.volume=a/2;const c=this.state.stream+Math.pow(a,.75)/10;isNaN(c)||(this.state.stream=Number(c.toFixed(3)))}return{volume:this.state.volume,stream:this.state.stream}}setSpotifyVolumeGetter(e){this.getSpotifyVolume=e}setAnalysisDefinitions(e){this.analysisConfig.definitions=e}async stopMicrophoneWithTimeout(e=5e3){if(!this.microphone)return;console.log("🎤 Stopping microphone tracks with timeout protection...");const r=this.microphone.getTracks().map(i=>new Promise(s=>{const o=setTimeout(()=>{console.warn(`🎤 Track stop timeout after ${e}ms, forcing resolution`),s()},e);i.stop();const a=()=>{i.readyState==="ended"?(clearTimeout(o),s()):setTimeout(a,10)};a()}));await Promise.all(r),this.microphone=void 0,console.log("🎤 Microphone tracks stopped successfully"),console.log("🎤 Microphone MediaStream cleared")}async initializeMicrophone(){if(!this.state.isPrimed)return console.warn("🎵 Audio system must be primed before microphone initialization"),!1;if(!this.audioContext||!this.filterNode||!this.analyserNode)return console.error("🎵 Audio infrastructure not available for microphone"),!1;try{return console.log("🎵 Initializing microphone..."),await this.stopMicrophoneWithTimeout(5e3),this.microphone=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this.disconnectCurrentSource(),this.mediaStreamSource=this.audioContext.createMediaStreamSource(this.microphone),this.currentSource=this.mediaStreamSource,this.mediaStreamSource.connect(this.filterNode),this.filterNode.connect(this.analyserNode),this.state.source="microphone",console.log("🎤 Microphone initialized successfully! Source set to:",this.state.source),console.log("🎤 AudioSystemManager state:",{source:this.state.source,isPrimed:this.state.isPrimed}),console.log(`🎵 AudioSystemManager source is now: ${this.state.source}`),!0}catch(e){return console.error("🎵 Failed to initialize microphone:",e),e.name==="NotAllowedError"?console.warn("🎵 Microphone permission denied by user"):e.name==="NotFoundError"&&console.warn("🎵 No microphone device found"),!1}}async initializeAudioElement(){if(!this.state.isPrimed)return console.warn("🎵 Audio system must be primed before audio element initialization"),!1;if(!this.audioElement||!this.mediaElementSource)return console.error("🎵 Audio element not available"),!1;try{return console.log("🎵 Initializing audio element source..."),await this.stopMicrophoneWithTimeout(3e3),this.disconnectCurrentSource(),this.currentSource=this.mediaElementSource,this.mediaElementSource.connect(this.filterNode),this.filterNode.connect(this.analyserNode),this.mediaElementSource.connect(this.audioContext.destination),this.state.source="audio",console.log("🎵 Audio element source initialized successfully!"),console.log(`🎵 AudioSystemManager source is now: ${this.state.source}`),!0}catch(e){return console.error("🎵 Failed to initialize audio element:",e),!1}}async initializeSpotifySource(){console.log("🎵 Switching to Spotify source..."),await this.stopMicrophoneWithTimeout(3e3),this.disconnectCurrentSource(),this.state.source="spotify",console.log("🎵 Spotify source active")}disconnectCurrentSource(){if(this.currentSource){try{this.currentSource.disconnect()}catch{}this.currentSource=void 0}}getState(){return this.audioContext&&(this.state.contextState=this.audioContext.state),{...this.state}}async destroy(){try{await this.stopMicrophoneWithTimeout(3e3),this.audioElement&&(this.audioElement.pause(),this.audioElement.src=""),this.disconnectCurrentSource(),this.mediaElementSource&&this.mediaElementSource.disconnect(),this.mediaStreamSource&&this.mediaStreamSource.disconnect(),this.analyserNode&&this.analyserNode.disconnect(),this.filterNode&&this.filterNode.disconnect(),this.audioContext&&await this.audioContext.close(),this.volumeBuffer=[],this.analyserBuffer=void 0,this.state.isPrimed=!1,this.state.isInitialized=!1,this.state.volume=1,this.state.stream=0,this.state.source=null,console.log("🎵 Audio system cleaned up")}catch(e){console.warn("🎵 Error during audio system cleanup:",e)}}}const cqe=Hp.getInstance();function xJ(n){return n[Math.floor(Math.random()*n.length)]}function Ul(n,e=0,t=1){return n<e?e:n>t?t:n}function SJ(n=0,e=1){return Ul(Math.random()*e,n,e)}function Ec(n){if(n==null||typeof n!="object")return n;if(Array.isArray(n))return n.map(e=>Ec(e));if(n instanceof Date)return new Date(n.getTime());if(n.constructor===Object){const e={};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=Ec(n[t]));return e}return n}function AJ(){return"ontouchstart"in window}function CJ(){return AJ()}function TJ(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function IJ(){return navigator?.standalone||window.matchMedia("(display-mode: standalone)").matches}function sM(n,e){document.documentElement.style.setProperty(n,e)}function Gx(n){return new Promise(e=>{setTimeout(()=>{e(!0)},n)})}function MJ(){const n=[],e=new Date;for(let t=0;t<12;t++){e.setMonth(t);const r=e.toLocaleString("default",{month:"long"}),i=e.toLocaleString("default",{month:"short"});n.push({name:r,abbreviation:i,index:t})}return n}function Lu(n,e){const t=[n,e];return t.x=n,t.y=e,t}function oM(n){return n}const{cbrt:CE,sqrt:TE,PI:qf}=Math,RJ=(n,e,t,r,i)=>{const s=e+t*n,o=s**2+r;if(o>0){const u=TE(o);return CE(s+u)+CE(s-u)-i}const a=CE(TE(s*s-o)),c=s?Math.atan(TE(-o)/s):-qf/2;let l;return t<0?l=(s>0?2*qf:qf)-c:i<0?l=(s>0?2*qf:-3*qf)+c:l=(s>0?0:qf)+c,2*a*Math.cos(l/3)-i},PJ=(n,e,t,r)=>((e*n+3*t)*n+r)*n;function ZC(n,e,t,r){if(!(0<=n&&n<=1&&0<=t&&t<=1))throw new Error("Bezier x values must be in [0, 1] range");if(n===e&&t===r)return oM;const i=6*(3*n-3*t+1),s=6*(t-2*n),o=3*n,a=i*i,c=s*s,l=s/i,u=3*s*o/a-c*s/(a*i),h=2*o/i-c/a,d=h*h*h,f=3/i,p=3*e-3*r+1,m=r-2*e,g=3*e,y=i?RJ:oM;return b=>b===0||b===1?b:PJ(y(b,u,f,d,l),p,m,g)}const aw=[.66,.05,.05,.98],cw=[0,0,.2,1],NJ=ZC(aw[0],aw[1],aw[2],aw[3]);function OJ(n){return NJ(Ul(n))}const kJ=ZC(cw[0],cw[1],cw[2],cw[3]);function PB(n){return kJ(Ul(n))}function lw(n,e=5){return parseFloat(n.toFixed(e))}const DJ=["sides"],LJ=["contrast","ballSize","orbSize","multiplier","brightness","colorSpread","glow"],UJ=["iterator"],BJ=["radius","zoom","colorMultiplier","colorSpread"];function NB(n,e=.7){return LJ.includes(n)?e/8:UJ.includes(n)?e/3:BJ.includes(n)?e/1.5:e}function JC(n){return DJ.includes(n)}function FJ(n,e,t=.7){return JC(n)?1:e-NB(n,t)*e}function $J(n,e,t=.7){return JC(n)?12:e+NB(n,t)*e}function zJ(n,e){return JC(n)?1:0}const Jv={getMin:FJ,getMax:$J,getStep:zJ};function HJ(n,e){const t=Object.keys(n),r=Object.keys(e);(t.length!==r.length||!t.every((s,o)=>s===r[o]))&&console.warn("TWEEN ERROR - Both variants must have the same keys.");const i={};return Object.entries(n).forEach(([s,{value:o}])=>{if(Array.isArray(o)&&Array.isArray(e[s].value)){const a=o.map((c,l)=>gi(c,e[s].value[l]));i[s]=c=>a.map(l=>Number(l(c).toFixed(5)))}else if(typeof o=="number"&&typeof e[s].value=="number"){const a=gi(o,e[s].value);i[s]=c=>Number(a(c).toFixed(5))}else typeof o=="boolean"&&(i[s]=a=>e[s].value)}),s=>t.reduce((o,a)=>(o[a]={value:i[a](s)},o),{})}function VJ(n,e){const t=Ec(n.value);if(t===null)return null;const r=e.type==="number"?parseFloat(e.value):e.value;return t.variants.forEach(i=>{i[e.name]={value:r}}),t}function WJ(n,{name:e,range:[t,r]}){const i=n.value.slice(0,t),s=n.value.slice(r);return i+e+s}const{getMin:qJ,getMax:jJ,getStep:GJ}=Jv;function KJ(n,e=.7){return Object.keys(n).reduce((t,r)=>{const i=n[r];switch(typeof i.value){case"object":t[r]={value:[lw(Math.random(),3),lw(Math.random(),3),lw(Math.random(),3)]};break;case"boolean":t[r]={value:i.value};break;case"number":if(GJ(r,i.value)===1)t[r]={value:i.value};else{const s=qJ(r,i.value,e),o=jJ(r,i.value,e),a=SJ(s,o);t[r]={value:lw(a,5)}}break}return t},{})}function OB(n,e){return function(){return n.apply(e,arguments)}}const{toString:YJ}=Object.prototype,{getPrototypeOf:QC}=Object,{iterator:e5,toStringTag:kB}=Symbol,t5=(n=>e=>{const t=YJ.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ec=n=>(n=n.toLowerCase(),e=>t5(e)===n),n5=n=>e=>typeof e===n,{isArray:X0}=Array,$g=n5("undefined");function XJ(n){return n!==null&&!$g(n)&&n.constructor!==null&&!$g(n.constructor)&&no(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const DB=ec("ArrayBuffer");function ZJ(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&DB(n.buffer),e}const JJ=n5("string"),no=n5("function"),LB=n5("number"),r5=n=>n!==null&&typeof n=="object",QJ=n=>n===!0||n===!1,Qv=n=>{if(t5(n)!=="object")return!1;const e=QC(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(kB in n)&&!(e5 in n)},eQ=ec("Date"),tQ=ec("File"),nQ=ec("Blob"),rQ=ec("FileList"),iQ=n=>r5(n)&&no(n.pipe),sQ=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||no(n.append)&&((e=t5(n))==="formdata"||e==="object"&&no(n.toString)&&n.toString()==="[object FormData]"))},oQ=ec("URLSearchParams"),[aQ,cQ,lQ,uQ]=["ReadableStream","Request","Response","Headers"].map(ec),hQ=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hy(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),X0(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function UB(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Cd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,BB=n=>!$g(n)&&n!==Cd;function Kx(){const{caseless:n}=BB(this)&&this||{},e={},t=(r,i)=>{const s=n&&UB(e,i)||i;Qv(e[s])&&Qv(r)?e[s]=Kx(e[s],r):Qv(r)?e[s]=Kx({},r):X0(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&hy(arguments[r],t);return e}const dQ=(n,e,t,{allOwnKeys:r}={})=>(hy(e,(i,s)=>{t&&no(i)?n[s]=OB(i,t):n[s]=i},{allOwnKeys:r}),n),fQ=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),pQ=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},mQ=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&QC(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},gQ=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},yQ=n=>{if(!n)return null;if(X0(n))return n;let e=n.length;if(!LB(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},wQ=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&QC(Uint8Array)),vQ=(n,e)=>{const r=(n&&n[e5]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},bQ=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},_Q=ec("HTMLFormElement"),EQ=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),aM=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),xQ=ec("RegExp"),FB=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};hy(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},SQ=n=>{FB(n,(e,t)=>{if(no(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(no(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},AQ=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return X0(n)?r(n):r(String(n).split(e)),t},CQ=()=>{},TQ=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function IQ(n){return!!(n&&no(n.append)&&n[kB]==="FormData"&&n[e5])}const MQ=n=>{const e=new Array(10),t=(r,i)=>{if(r5(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=X0(r)?[]:{};return hy(r,(o,a)=>{const c=t(o,i+1);!$g(c)&&(s[a]=c)}),e[i]=void 0,s}}return r};return t(n,0)},RQ=ec("AsyncFunction"),PQ=n=>n&&(r5(n)||no(n))&&no(n.then)&&no(n.catch),$B=((n,e)=>n?setImmediate:e?((t,r)=>(Cd.addEventListener("message",({source:i,data:s})=>{i===Cd&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Cd.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",no(Cd.postMessage)),NQ=typeof queueMicrotask<"u"?queueMicrotask.bind(Cd):typeof process<"u"&&process.nextTick||$B,OQ=n=>n!=null&&no(n[e5]),Pe={isArray:X0,isArrayBuffer:DB,isBuffer:XJ,isFormData:sQ,isArrayBufferView:ZJ,isString:JJ,isNumber:LB,isBoolean:QJ,isObject:r5,isPlainObject:Qv,isReadableStream:aQ,isRequest:cQ,isResponse:lQ,isHeaders:uQ,isUndefined:$g,isDate:eQ,isFile:tQ,isBlob:nQ,isRegExp:xQ,isFunction:no,isStream:iQ,isURLSearchParams:oQ,isTypedArray:wQ,isFileList:rQ,forEach:hy,merge:Kx,extend:dQ,trim:hQ,stripBOM:fQ,inherits:pQ,toFlatObject:mQ,kindOf:t5,kindOfTest:ec,endsWith:gQ,toArray:yQ,forEachEntry:vQ,matchAll:bQ,isHTMLForm:_Q,hasOwnProperty:aM,hasOwnProp:aM,reduceDescriptors:FB,freezeMethods:SQ,toObjectSet:AQ,toCamelCase:EQ,noop:CQ,toFiniteNumber:TQ,findKey:UB,global:Cd,isContextDefined:BB,isSpecCompliantForm:IQ,toJSONObject:MQ,isAsyncFn:RQ,isThenable:PQ,setImmediate:$B,asap:NQ,isIterable:OQ};function rn(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Pe.inherits(rn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Pe.toJSONObject(this.config),code:this.code,status:this.status}}});const zB=rn.prototype,HB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{HB[n]={value:n}});Object.defineProperties(rn,HB);Object.defineProperty(zB,"isAxiosError",{value:!0});rn.from=(n,e,t,r,i,s)=>{const o=Object.create(zB);return Pe.toFlatObject(n,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),rn.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const kQ=null;function Yx(n){return Pe.isPlainObject(n)||Pe.isArray(n)}function VB(n){return Pe.endsWith(n,"[]")?n.slice(0,-2):n}function cM(n,e,t){return n?n.concat(e).map(function(i,s){return i=VB(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function DQ(n){return Pe.isArray(n)&&!n.some(Yx)}const LQ=Pe.toFlatObject(Pe,{},null,function(e){return/^is[A-Z]/.test(e)});function i5(n,e,t){if(!Pe.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Pe.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!Pe.isUndefined(g[m])});const r=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&Pe.isSpecCompliantForm(e);if(!Pe.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(Pe.isDate(p))return p.toISOString();if(Pe.isBoolean(p))return p.toString();if(!c&&Pe.isBlob(p))throw new rn("Blob is not supported. Use a Buffer instead.");return Pe.isArrayBuffer(p)||Pe.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,g){let y=p;if(p&&!g&&typeof p=="object"){if(Pe.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(Pe.isArray(p)&&DQ(p)||(Pe.isFileList(p)||Pe.endsWith(m,"[]"))&&(y=Pe.toArray(p)))return m=VB(m),y.forEach(function(w,E){!(Pe.isUndefined(w)||w===null)&&e.append(o===!0?cM([m],E,s):o===null?m:m+"[]",l(w))}),!1}return Yx(p)?!0:(e.append(cM(g,m,s),l(p)),!1)}const h=[],d=Object.assign(LQ,{defaultVisitor:u,convertValue:l,isVisitable:Yx});function f(p,m){if(!Pe.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(p),Pe.forEach(p,function(y,b){(!(Pe.isUndefined(y)||y===null)&&i.call(e,y,Pe.isString(b)?b.trim():b,m,d))===!0&&f(y,m?m.concat(b):[b])}),h.pop()}}if(!Pe.isObject(n))throw new TypeError("data must be an object");return f(n),e}function lM(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function e7(n,e){this._pairs=[],n&&i5(n,this,e)}const WB=e7.prototype;WB.append=function(e,t){this._pairs.push([e,t])};WB.toString=function(e){const t=e?function(r){return e.call(this,r,lM)}:lM;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function UQ(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qB(n,e,t){if(!e)return n;const r=t&&t.encode||UQ;Pe.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=Pe.isURLSearchParams(e)?e.toString():new e7(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class uM{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Pe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const jB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},BQ=typeof URLSearchParams<"u"?URLSearchParams:e7,FQ=typeof FormData<"u"?FormData:null,$Q=typeof Blob<"u"?Blob:null,zQ={isBrowser:!0,classes:{URLSearchParams:BQ,FormData:FQ,Blob:$Q},protocols:["http","https","file","blob","url","data"]},t7=typeof window<"u"&&typeof document<"u",Xx=typeof navigator=="object"&&navigator||void 0,HQ=t7&&(!Xx||["ReactNative","NativeScript","NS"].indexOf(Xx.product)<0),VQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",WQ=t7&&window.location.href||"http://localhost",qQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:t7,hasStandardBrowserEnv:HQ,hasStandardBrowserWebWorkerEnv:VQ,navigator:Xx,origin:WQ},Symbol.toStringTag,{value:"Module"})),as={...qQ,...zQ};function jQ(n,e){return i5(n,new as.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return as.isNode&&Pe.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function GQ(n){return Pe.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function KQ(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function GB(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=t.length;return o=!o&&Pe.isArray(i)?i.length:o,c?(Pe.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Pe.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&Pe.isArray(i[o])&&(i[o]=KQ(i[o])),!a)}if(Pe.isFormData(n)&&Pe.isFunction(n.entries)){const t={};return Pe.forEachEntry(n,(r,i)=>{e(GQ(r),i,t,0)}),t}return null}function YQ(n,e,t){if(Pe.isString(n))try{return(e||JSON.parse)(n),Pe.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const dy={transitional:jB,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Pe.isObject(e);if(s&&Pe.isHTMLForm(e)&&(e=new FormData(e)),Pe.isFormData(e))return i?JSON.stringify(GB(e)):e;if(Pe.isArrayBuffer(e)||Pe.isBuffer(e)||Pe.isStream(e)||Pe.isFile(e)||Pe.isBlob(e)||Pe.isReadableStream(e))return e;if(Pe.isArrayBufferView(e))return e.buffer;if(Pe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return jQ(e,this.formSerializer).toString();if((a=Pe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return i5(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),YQ(e)):e}],transformResponse:[function(e){const t=this.transitional||dy.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Pe.isResponse(e)||Pe.isReadableStream(e))return e;if(e&&Pe.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?rn.from(a,rn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:as.classes.FormData,Blob:as.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Pe.forEach(["delete","get","head","post","put","patch"],n=>{dy.headers[n]={}});const XQ=Pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ZQ=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&XQ[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},hM=Symbol("internals");function P1(n){return n&&String(n).trim().toLowerCase()}function e3(n){return n===!1||n==null?n:Pe.isArray(n)?n.map(e3):String(n)}function JQ(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const QQ=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function IE(n,e,t,r,i){if(Pe.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!Pe.isString(e)){if(Pe.isString(r))return e.indexOf(r)!==-1;if(Pe.isRegExp(r))return r.test(e)}}function eee(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function tee(n,e){const t=Pe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let ro=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,c,l){const u=P1(c);if(!u)throw new Error("header name must be a non-empty string");const h=Pe.findKey(i,u);(!h||i[h]===void 0||l===!0||l===void 0&&i[h]!==!1)&&(i[h||c]=e3(a))}const o=(a,c)=>Pe.forEach(a,(l,u)=>s(l,u,c));if(Pe.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Pe.isString(e)&&(e=e.trim())&&!QQ(e))o(ZQ(e),t);else if(Pe.isObject(e)&&Pe.isIterable(e)){let a={},c,l;for(const u of e){if(!Pe.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[l=u[0]]=(c=a[l])?Pe.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=P1(e),e){const r=Pe.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return JQ(i);if(Pe.isFunction(t))return t.call(this,i,r);if(Pe.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=P1(e),e){const r=Pe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||IE(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=P1(o),o){const a=Pe.findKey(r,o);a&&(!t||IE(r,r[a],a,t))&&(delete r[a],i=!0)}}return Pe.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||IE(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return Pe.forEach(this,(i,s)=>{const o=Pe.findKey(r,s);if(o){t[o]=e3(i),delete t[s];return}const a=e?eee(s):String(s).trim();a!==s&&delete t[s],t[a]=e3(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Pe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&Pe.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[hM]=this[hM]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=P1(o);r[a]||(tee(i,o),r[a]=!0)}return Pe.isArray(e)?e.forEach(s):s(e),this}};ro.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Pe.reduceDescriptors(ro.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});Pe.freezeMethods(ro);function ME(n,e){const t=this||dy,r=e||t,i=ro.from(r.headers);let s=r.data;return Pe.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function KB(n){return!!(n&&n.__CANCEL__)}function Z0(n,e,t){rn.call(this,n??"canceled",rn.ERR_CANCELED,e,t),this.name="CanceledError"}Pe.inherits(Z0,rn,{__CANCEL__:!0});function YB(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new rn("Request failed with status code "+t.status,[rn.ERR_BAD_REQUEST,rn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function nee(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function ree(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=r[s];o||(o=l),t[i]=c,r[i]=l;let h=s,d=0;for(;h!==i;)d+=t[h++],h=h%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),l-o<e)return;const f=u&&l-u;return f?Math.round(d*1e3/f):void 0}}function iee(n,e){let t=0,r=1e3/e,i,s;const o=(l,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),n.apply(null,l)};return[(...l)=>{const u=Date.now(),h=u-t;h>=r?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const J3=(n,e,t=3)=>{let r=0;const i=ree(50,250);return iee(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,l=i(c),u=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(h)},t)},dM=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},fM=n=>(...e)=>Pe.asap(()=>n(...e)),see=as.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,as.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(as.origin),as.navigator&&/(msie|trident)/i.test(as.navigator.userAgent)):()=>!0,oee=as.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];Pe.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Pe.isString(r)&&o.push("path="+r),Pe.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function aee(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function cee(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function XB(n,e,t){let r=!aee(e);return n&&(r||t==!1)?cee(n,e):e}const pM=n=>n instanceof ro?{...n}:n;function nf(n,e){e=e||{};const t={};function r(l,u,h,d){return Pe.isPlainObject(l)&&Pe.isPlainObject(u)?Pe.merge.call({caseless:d},l,u):Pe.isPlainObject(u)?Pe.merge({},u):Pe.isArray(u)?u.slice():u}function i(l,u,h,d){if(Pe.isUndefined(u)){if(!Pe.isUndefined(l))return r(void 0,l,h,d)}else return r(l,u,h,d)}function s(l,u){if(!Pe.isUndefined(u))return r(void 0,u)}function o(l,u){if(Pe.isUndefined(u)){if(!Pe.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,h){if(h in e)return r(l,u);if(h in n)return r(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u,h)=>i(pM(l),pM(u),h,!0)};return Pe.forEach(Object.keys(Object.assign({},n,e)),function(u){const h=c[u]||i,d=h(n[u],e[u],u);Pe.isUndefined(d)&&h!==a||(t[u]=d)}),t}const ZB=n=>{const e=nf({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=ro.from(o),e.url=qB(XB(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(Pe.isFormData(t)){if(as.hasStandardBrowserEnv||as.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(as.hasStandardBrowserEnv&&(r&&Pe.isFunction(r)&&(r=r(e)),r||r!==!1&&see(e.url))){const l=i&&s&&oee.read(s);l&&o.set(i,l)}return e},lee=typeof XMLHttpRequest<"u",uee=lee&&function(n){return new Promise(function(t,r){const i=ZB(n);let s=i.data;const o=ro.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,h,d,f,p;function m(){f&&f(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function y(){if(!g)return;const w=ro.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:w,config:n,request:g};YB(function(R){t(R),m()},function(R){r(R),m()},x),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(r(new rn("Request aborted",rn.ECONNABORTED,n,g)),g=null)},g.onerror=function(){r(new rn("Network Error",rn.ERR_NETWORK,n,g)),g=null},g.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const x=i.transitional||jB;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),r(new rn(E,x.clarifyTimeoutError?rn.ETIMEDOUT:rn.ECONNABORTED,n,g)),g=null},s===void 0&&o.setContentType(null),"setRequestHeader"in g&&Pe.forEach(o.toJSON(),function(E,x){g.setRequestHeader(x,E)}),Pe.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),a&&a!=="json"&&(g.responseType=i.responseType),l&&([d,p]=J3(l,!0),g.addEventListener("progress",d)),c&&g.upload&&([h,f]=J3(c),g.upload.addEventListener("progress",h),g.upload.addEventListener("loadend",f)),(i.cancelToken||i.signal)&&(u=w=>{g&&(r(!w||w.type?new Z0(null,n,g):w),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const b=nee(i.url);if(b&&as.protocols.indexOf(b)===-1){r(new rn("Unsupported protocol "+b+":",rn.ERR_BAD_REQUEST,n));return}g.send(s||null)})},hee=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(l){if(!i){i=!0,a();const u=l instanceof Error?l:this.reason;r.abort(u instanceof rn?u:new Z0(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new rn(`timeout ${e} of ms exceeded`,rn.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),n=null)};n.forEach(l=>l.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>Pe.asap(a),c}},dee=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},fee=async function*(n,e){for await(const t of pee(n))yield*dee(t,e)},pee=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},mM=(n,e,t,r)=>{const i=fee(n,e);let s=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){a(),c.close();return}let h=u.byteLength;if(t){let d=s+=h;t(d)}c.enqueue(new Uint8Array(u))}catch(l){throw a(l),l}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},s5=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",JB=s5&&typeof ReadableStream=="function",mee=s5&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),QB=(n,...e)=>{try{return!!n(...e)}catch{return!1}},gee=JB&&QB(()=>{let n=!1;const e=new Request(as.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),gM=64*1024,Zx=JB&&QB(()=>Pe.isReadableStream(new Response("").body)),Q3={stream:Zx&&(n=>n.body)};s5&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Q3[e]&&(Q3[e]=Pe.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new rn(`Response type '${e}' is not supported`,rn.ERR_NOT_SUPPORT,r)})})})(new Response);const yee=async n=>{if(n==null)return 0;if(Pe.isBlob(n))return n.size;if(Pe.isSpecCompliantForm(n))return(await new Request(as.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Pe.isArrayBufferView(n)||Pe.isArrayBuffer(n))return n.byteLength;if(Pe.isURLSearchParams(n)&&(n=n+""),Pe.isString(n))return(await mee(n)).byteLength},wee=async(n,e)=>{const t=Pe.toFiniteNumber(n.getContentLength());return t??yee(e)},vee=s5&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:h="same-origin",fetchOptions:d}=ZB(n);l=l?(l+"").toLowerCase():"text";let f=hee([i,s&&s.toAbortSignal()],o),p;const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&gee&&t!=="get"&&t!=="head"&&(g=await wee(u,r))!==0){let x=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(Pe.isFormData(r)&&(C=x.headers.get("content-type"))&&u.setContentType(C),x.body){const[R,k]=dM(g,J3(fM(c)));r=mM(x.body,gM,R,k)}}Pe.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;p=new Request(e,{...d,signal:f,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:y?h:void 0});let b=await fetch(p,d);const w=Zx&&(l==="stream"||l==="response");if(Zx&&(a||w&&m)){const x={};["status","statusText","headers"].forEach(_=>{x[_]=b[_]});const C=Pe.toFiniteNumber(b.headers.get("content-length")),[R,k]=a&&dM(C,J3(fM(a),!0))||[];b=new Response(mM(b.body,gM,R,()=>{k&&k(),m&&m()}),x)}l=l||"text";let E=await Q3[Pe.findKey(Q3,l)||"text"](b,n);return!w&&m&&m(),await new Promise((x,C)=>{YB(x,C,{data:E,headers:ro.from(b.headers),status:b.status,statusText:b.statusText,config:n,request:p})})}catch(y){throw m&&m(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new rn("Network Error",rn.ERR_NETWORK,n,p),{cause:y.cause||y}):rn.from(y,y&&y.code,n,p)}}),Jx={http:kQ,xhr:uee,fetch:vee};Pe.forEach(Jx,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const yM=n=>`- ${n}`,bee=n=>Pe.isFunction(n)||n===null||n===!1,eF={getAdapter:n=>{n=Pe.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!bee(t)&&(r=Jx[(o=String(t)).toLowerCase()],r===void 0))throw new rn(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(yM).join(`
`):" "+yM(s[0]):"as no adapter specified";throw new rn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Jx};function RE(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Z0(null,n)}function wM(n){return RE(n),n.headers=ro.from(n.headers),n.data=ME.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),eF.getAdapter(n.adapter||dy.adapter)(n).then(function(r){return RE(n),r.data=ME.call(n,n.transformResponse,r),r.headers=ro.from(r.headers),r},function(r){return KB(r)||(RE(n),r&&r.response&&(r.response.data=ME.call(n,n.transformResponse,r.response),r.response.headers=ro.from(r.response.headers))),Promise.reject(r)})}const tF="1.10.0",o5={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{o5[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const vM={};o5.transitional=function(e,t,r){function i(s,o){return"[Axios v"+tF+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new rn(i(o," has been removed"+(t?" in "+t:"")),rn.ERR_DEPRECATED);return t&&!vM[o]&&(vM[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};o5.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function _ee(n,e,t){if(typeof n!="object")throw new rn("options must be an object",rn.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],c=a===void 0||o(a,s,n);if(c!==!0)throw new rn("option "+s+" must be "+c,rn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new rn("Unknown option "+s,rn.ERR_BAD_OPTION)}}const t3={assertOptions:_ee,validators:o5},oc=t3.validators;let jd=class{constructor(e){this.defaults=e||{},this.interceptors={request:new uM,response:new uM}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=nf(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&t3.assertOptions(r,{silentJSONParsing:oc.transitional(oc.boolean),forcedJSONParsing:oc.transitional(oc.boolean),clarifyTimeoutError:oc.transitional(oc.boolean)},!1),i!=null&&(Pe.isFunction(i)?t.paramsSerializer={serialize:i}:t3.assertOptions(i,{encode:oc.function,serialize:oc.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),t3.assertOptions(t,{baseUrl:oc.spelling("baseURL"),withXsrfToken:oc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Pe.merge(s.common,s[t.method]);s&&Pe.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),t.headers=ro.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,h=0,d;if(!c){const p=[wM.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),d=p.length,u=Promise.resolve(t);h<d;)u=u.then(p[h++],p[h++]);return u}d=a.length;let f=t;for(h=0;h<d;){const p=a[h++],m=a[h++];try{f=p(f)}catch(g){m.call(this,g);break}}try{u=wM.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=l.length;h<d;)u=u.then(l[h++],l[h++]);return u}getUri(e){e=nf(this.defaults,e);const t=XB(e.baseURL,e.url,e.allowAbsoluteUrls);return qB(t,e.params,e.paramsSerializer)}};Pe.forEach(["delete","get","head","options"],function(e){jd.prototype[e]=function(t,r){return this.request(nf(r||{},{method:e,url:t,data:(r||{}).data}))}});Pe.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(nf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}jd.prototype[e]=t(),jd.prototype[e+"Form"]=t(!0)});let Eee=class nF{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Z0(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new nF(function(i){e=i}),cancel:e}}};function xee(n){return function(t){return n.apply(null,t)}}function See(n){return Pe.isObject(n)&&n.isAxiosError===!0}const Qx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qx).forEach(([n,e])=>{Qx[e]=n});function rF(n){const e=new jd(n),t=OB(jd.prototype.request,e);return Pe.extend(t,jd.prototype,e,{allOwnKeys:!0}),Pe.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return rF(nf(n,i))},t}const Lr=rF(dy);Lr.Axios=jd;Lr.CanceledError=Z0;Lr.CancelToken=Eee;Lr.isCancel=KB;Lr.VERSION=tF;Lr.toFormData=i5;Lr.AxiosError=rn;Lr.Cancel=Lr.CanceledError;Lr.all=function(e){return Promise.all(e)};Lr.spread=xee;Lr.isAxiosError=See;Lr.mergeConfig=nf;Lr.AxiosHeaders=ro;Lr.formToJSON=n=>GB(Pe.isHTMLForm(n)?new FormData(n):n);Lr.getAdapter=eF.getAdapter;Lr.HttpStatusCode=Qx;Lr.default=Lr;const{Axios:hqe,AxiosError:dqe,CanceledError:fqe,isCancel:pqe,CancelToken:mqe,VERSION:gqe,all:yqe,Cancel:wqe,isAxiosError:vqe,spread:bqe,toFormData:_qe,AxiosHeaders:Eqe,HttpStatusCode:xqe,formToJSON:Sqe,getAdapter:Aqe,mergeConfig:Cqe}=Lr;let zu=[],n3=()=>null,r3=()=>({});const fy=Ae(window.location.pathname),b0=Ae(new URLSearchParams(window.location.search)),a5=Ae(window.location.hash);window.addEventListener("popstate",()=>{fy.value=window.location.pathname,b0.value=new URLSearchParams(window.location.search),a5.value=window.location.hash});const c5=Ee(()=>{const n=fy.value,e=n3(n),t=e?r3(e.path,n):{},r=Object.fromEntries(b0.value.entries()),i=a5.value;return{path:n,params:t,query:r,hash:i,meta:e?.meta||{},name:e?.name,matched:e}});function iF(n,e,t=!1){const r=new URL(n,window.location.origin);e&&Object.entries(e).forEach(([s,o])=>{r.searchParams.set(s,o)}),history[t?"replaceState":"pushState"]({},"",r.toString()),fy.value=r.pathname,b0.value=r.searchParams,a5.value=r.hash}function n7(n,e){iF(n,e,!1)}function r7(n,e){iF(n,e,!0)}function i7(){history.back()}function s7(){history.forward()}function o7(n){history.go(n)}function a7(n){const e=Array.isArray(n)?n:[n],t=new URLSearchParams(b0.value);e.forEach(i=>t.delete(i));const r=new URL(fy.value,window.location.origin);r.search=t.toString(),history.replaceState({},"",r.toString()),b0.value=t}async function Aee(n){if(n)zu=n.routes,n3=n.matchRoute,r3=n.extractParams,console.log("🔥 Sage Router: Loaded",zu.length,"routes from parameter");else try{await Gx(50);const t=await import("../routes.generated.ts");zu=t.routes,n3=t.matchRoute,r3=t.extractParams,console.log("🔥 Sage Router: Loaded",zu.length,"routes via dynamic import")}catch{console.log("🔧 Sage Router: No generated routes found, using empty routes (will be provided by consuming app)"),zu=[],n3=()=>null,r3=()=>({})}return typeof window<"u"&&(window.__SAGE_ROUTER__.routes=zu),{currentRoute:c5,push:n7,replace:r7,back:i7,forward:s7,go:o7,cleanQuery:a7}}function J0(){return c5}function l5(){return{push:n7,replace:r7,back:i7,forward:s7,go:o7,cleanQuery:a7}}function Cee(){console.log("🔍 Sage Router Debug:"),console.log("Current Route:",c5.value),console.log("Available Routes:",zu),console.log("Path:",fy.value),console.log("Query:",Object.fromEntries(b0.value)),console.log("Hash:",a5.value)}typeof window<"u"&&(window.__SAGE_ROUTER__={currentRoute:c5,push:n7,replace:r7,back:i7,forward:s7,go:o7,cleanQuery:a7,debug:Cee,routes:zu});const bM=3e3,py=Oo("toast",()=>{const n=Ae(null),e=Ae(!1),t=Ae(null),r=Ae(null);async function i(o,a=null){n.value="message",t.value=o,e.value=!0,r.value=a,await Gx(bM),e.value=!1}async function s(o,a=null){n.value="error",t.value=o,e.value=!0,r.value=a,await Gx(bM),e.value=!1}return{visible:e,type:n,text:t,image:r,message:i,error:s}}),Tee=Symbol(),_M=Object.getPrototypeOf,eS=new WeakMap,Iee=n=>n&&(eS.has(n)?eS.get(n):_M(n)===Object.prototype||_M(n)===Array.prototype),Mee=n=>Iee(n)&&n[Tee]||null,EM=(n,e=!0)=>{eS.set(n,e)},eb={},PE=n=>typeof n=="object"&&n!==null,Hu=new WeakMap,xm=new WeakSet,Ree=(n=Object.is,e=(l,u)=>new Proxy(l,u),t=l=>PE(l)&&!xm.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},i=new WeakMap,s=(l,u,h=r)=>{const d=i.get(l);if(d?.[0]===u)return d[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return EM(f,!0),i.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const m=Reflect.get(l,p),{enumerable:g}=Reflect.getOwnPropertyDescriptor(l,p),y={value:m,enumerable:g,configurable:!0};if(xm.has(m))EM(m,!1);else if(m instanceof Promise)delete y.value,y.get=()=>h(m);else if(Hu.has(m)){const[b,w]=Hu.get(m);y.value=s(b,w(),h)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!PE(l))throw new Error("object required");const u=o.get(l);if(u)return u;let h=a[0];const d=new Set,f=(_,A=++a[0])=>{h!==A&&(h=A,d.forEach(M=>M(_,A)))};let p=a[1];const m=(_=++a[1])=>(p!==_&&!d.size&&(p=_,y.forEach(([A])=>{const M=A[1](_);M>h&&(h=M)})),h),g=_=>(A,M)=>{const D=[...A];D[1]=[_,...D[1]],f(D,M)},y=new Map,b=(_,A)=>{if((eb?"production":void 0)!=="production"&&y.has(_))throw new Error("prop listener already exists");if(d.size){const M=A[3](g(_));y.set(_,[A,M])}else y.set(_,[A])},w=_=>{var A;const M=y.get(_);M&&(y.delete(_),(A=M[1])==null||A.call(M))},E=_=>(d.add(_),d.size===1&&y.forEach(([M,D],P)=>{if((eb?"production":void 0)!=="production"&&D)throw new Error("remove already exists");const v=M[3](g(P));y.set(P,[M,v])}),()=>{d.delete(_),d.size===0&&y.forEach(([M,D],P)=>{D&&(D(),y.set(P,[M]))})}),x=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),R=e(x,{deleteProperty(_,A){const M=Reflect.get(_,A);w(A);const D=Reflect.deleteProperty(_,A);return D&&f(["delete",[A],M]),D},set(_,A,M,D){const P=Reflect.has(_,A),v=Reflect.get(_,A,D);if(P&&(n(v,M)||o.has(M)&&n(v,o.get(M))))return!0;w(A),PE(M)&&(M=Mee(M)||M);let S=M;if(M instanceof Promise)M.then(T=>{M.status="fulfilled",M.value=T,f(["resolve",[A],T])}).catch(T=>{M.status="rejected",M.reason=T,f(["reject",[A],T])});else{!Hu.has(M)&&t(M)&&(S=c(M));const T=!xm.has(S)&&Hu.get(S);T&&b(A,T)}return Reflect.set(_,A,S,D),f(["set",[A],M,v]),!0}});o.set(l,R);const k=[x,m,s,E];return Hu.set(R,k),Reflect.ownKeys(l).forEach(_=>{const A=Object.getOwnPropertyDescriptor(l,_);"value"in A&&(R[_]=l[_],delete A.value,delete A.writable),Object.defineProperty(x,_,A)}),R})=>[c,Hu,xm,n,e,t,r,i,s,o,a],[Pee]=Ree();function Qn(n={}){return Pee(n)}function _i(n,e,t){const r=Hu.get(n);(eb?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let i;const s=[],o=r[3];let a=!1;const l=o(u=>{s.push(u),i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function zg(n,e){const t=Hu.get(n);(eb?"production":void 0)!=="production"&&!t&&console.warn("Please use proxy object");const[r,i,s]=t;return s(r,i(),e)}function _h(n){return xm.add(n),n}function Ei(n,e,t,r){let i=n[e];return _i(n,()=>{const s=n[e];Object.is(i,s)||t(i=s)})}function Nee(n){const e=Qn({data:Array.from([]),has(t){return this.data.some(r=>r[0]===t)},set(t,r){const i=this.data.find(s=>s[0]===t);return i?i[1]=r:this.data.push([t,r]),this},get(t){var r;return(r=this.data.find(i=>i[0]===t))==null?void 0:r[1]},delete(t){const r=this.data.findIndex(i=>i[0]===t);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(t){this.data.forEach(r=>{t(r[1],r[0],this)})},keys(){return this.data.map(t=>t[0]).values()},values(){return this.data.map(t=>t[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function my(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var xM={};const _e={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof xM<"u"?xM.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},Hg={caipNetworkIdToNumber(n){return n?Number(n.split(":")[1]):void 0},parseEvmChainId(n){return typeof n=="string"?this.caipNetworkIdToNumber(n):n},getNetworksByNamespace(n,e){return n?.filter(t=>t.chainNamespace===e)||[]},getFirstNetworkByNamespace(n,e){return this.getNetworksByNamespace(n,e)[0]},getNetworkNameByCaipNetworkId(n,e){if(!e)return;const t=n.find(i=>i.caipNetworkId===e);if(t)return t.name;const[r]=e.split(":");return _e.CHAIN_NAME_MAP?.[r]||void 0}};var Oee=20,kee=1,rf=1e6,SM=1e6,Dee=-7,Lee=21,Uee=!1,gy="[big.js] ",Af=gy+"Invalid ",u5=Af+"decimal places",Bee=Af+"rounding mode",sF=gy+"Division by zero",jn={},Nc=void 0,Fee=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function oF(){function n(e){var t=this;if(!(t instanceof n))return e===Nc?oF():new n(e);if(e instanceof n)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(n.strict===!0&&typeof e!="bigint")throw TypeError(Af+"value");e=e===0&&1/e<0?"-0":String(e)}$ee(t,e)}t.constructor=n}return n.prototype=jn,n.DP=Oee,n.RM=kee,n.NE=Dee,n.PE=Lee,n.strict=Uee,n.roundDown=0,n.roundHalfUp=1,n.roundHalfEven=2,n.roundUp=3,n}function $ee(n,e){var t,r,i;if(!Fee.test(e))throw Error(Af+"number");for(n.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),i=e.length,r=0;r<i&&e.charAt(r)=="0";)++r;if(r==i)n.c=[n.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(n.e=t-r-1,n.c=[],t=0;r<=i;)n.c[t++]=+e.charAt(r++)}return n}function Cf(n,e,t,r){var i=n.c;if(t===Nc&&(t=n.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(Bee);if(e<1)r=t===3&&(r||!!i[0])||e===0&&(t===1&&i[0]>=5||t===2&&(i[0]>5||i[0]===5&&(r||i[1]!==Nc))),i.length=1,r?(n.e=n.e-e+1,i[0]=1):i[0]=n.e=0;else if(e<i.length){if(r=t===1&&i[e]>=5||t===2&&(i[e]>5||i[e]===5&&(r||i[e+1]!==Nc||i[e-1]&1))||t===3&&(r||!!i[0]),i.length=e,r){for(;++i[--e]>9;)if(i[e]=0,e===0){++n.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return n}function Tf(n,e,t){var r=n.e,i=n.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>s)for(r-=s;r--;)i+="0";else r<s&&(i=i.slice(0,r)+"."+i.slice(r));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return n.s<0&&t?"-"+i:i}jn.abs=function(){var n=new this.constructor(this);return n.s=1,n};jn.cmp=function(n){var e,t=this,r=t.c,i=(n=new t.constructor(n)).c,s=t.s,o=n.s,a=t.e,c=n.e;if(!r[0]||!i[0])return r[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=i.length)?a:c,s=-1;++s<o;)if(r[s]!=i[s])return r[s]>i[s]^e?1:-1;return a==c?0:a>c^e?1:-1};jn.div=function(n){var e=this,t=e.constructor,r=e.c,i=(n=new t(n)).c,s=e.s==n.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>rf)throw Error(u5);if(!i[0])throw Error(sF);if(!r[0])return n.s=s,n.c=[n.e=0],n;var a,c,l,u,h,d=i.slice(),f=a=i.length,p=r.length,m=r.slice(0,a),g=m.length,y=n,b=y.c=[],w=0,E=o+(y.e=e.e-n.e)+1;for(y.s=s,s=E<0?0:E,d.unshift(0);g++<a;)m.push(0);do{for(l=0;l<10;l++){if(a!=(g=m.length))u=a>g?1:-1;else for(h=-1,u=0;++h<a;)if(i[h]!=m[h]){u=i[h]>m[h]?1:-1;break}if(u<0){for(c=g==a?i:d;g;){if(m[--g]<c[g]){for(h=g;h&&!m[--h];)m[h]=9;--m[h],m[g]+=10}m[g]-=c[g]}for(;!m[0];)m.shift()}else break}b[w++]=u?l:++l,m[0]&&u?m[g]=r[f]||0:m=[r[f]]}while((f++<p||m[0]!==Nc)&&s--);return!b[0]&&w!=1&&(b.shift(),y.e--,E--),w>E&&Cf(y,E,t.RM,m[0]!==Nc),y};jn.eq=function(n){return this.cmp(n)===0};jn.gt=function(n){return this.cmp(n)>0};jn.gte=function(n){return this.cmp(n)>-1};jn.lt=function(n){return this.cmp(n)<0};jn.lte=function(n){return this.cmp(n)<1};jn.minus=jn.sub=function(n){var e,t,r,i,s=this,o=s.constructor,a=s.s,c=(n=new o(n)).s;if(a!=c)return n.s=-c,s.plus(n);var l=s.c.slice(),u=s.e,h=n.c,d=n.e;if(!l[0]||!h[0])return h[0]?n.s=-c:l[0]?n=new o(s):n.s=1,n;if(a=u-d){for((i=a<0)?(a=-a,r=l):(d=u,r=h),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(t=((i=l.length<h.length)?l:h).length,a=c=0;c<t;c++)if(l[c]!=h[c]){i=l[c]<h[c];break}if(i&&(r=l,l=h,h=r,n.s=-n.s),(c=(t=h.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;t>a;){if(l[--t]<h[t]){for(e=t;e&&!l[--e];)l[e]=9;--l[e],l[t]+=10}l[t]-=h[t]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--d;return l[0]||(n.s=1,l=[d=0]),n.c=l,n.e=d,n};jn.mod=function(n){var e,t=this,r=t.constructor,i=t.s,s=(n=new r(n)).s;if(!n.c[0])throw Error(sF);return t.s=n.s=1,e=n.cmp(t)==1,t.s=i,n.s=s,e?new r(t):(i=r.DP,s=r.RM,r.DP=r.RM=0,t=t.div(n),r.DP=i,r.RM=s,this.minus(t.times(n)))};jn.neg=function(){var n=new this.constructor(this);return n.s=-n.s,n};jn.plus=jn.add=function(n){var e,t,r,i=this,s=i.constructor;if(n=new s(n),i.s!=n.s)return n.s=-n.s,i.minus(n);var o=i.e,a=i.c,c=n.e,l=n.c;if(!a[0]||!l[0])return l[0]||(a[0]?n=new s(i):n.s=i.s),n;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,t=0;e;a[e]%=10)t=(a[--e]=a[e]+l[e]+t)/10|0;for(t&&(a.unshift(t),++c),e=a.length;a[--e]===0;)a.pop();return n.c=a,n.e=c,n};jn.pow=function(n){var e=this,t=new e.constructor("1"),r=t,i=n<0;if(n!==~~n||n<-SM||n>SM)throw Error(Af+"exponent");for(i&&(n=-n);n&1&&(r=r.times(e)),n>>=1,!!n;)e=e.times(e);return i?t.div(r):r};jn.prec=function(n,e){if(n!==~~n||n<1||n>rf)throw Error(Af+"precision");return Cf(new this.constructor(this),n,e)};jn.round=function(n,e){if(n===Nc)n=0;else if(n!==~~n||n<-rf||n>rf)throw Error(u5);return Cf(new this.constructor(this),n+this.e+1,e)};jn.sqrt=function(){var n,e,t,r=this,i=r.constructor,s=r.s,o=r.e,a=new i("0.5");if(!r.c[0])return new i(r);if(s<0)throw Error(gy+"No square root");s=Math.sqrt(+Tf(r,!0,!0)),s===0||s===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),n=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):n=new i(s+""),o=n.e+(i.DP+=4);do t=n,n=a.times(t.plus(r.div(t)));while(t.c.slice(0,o).join("")!==n.c.slice(0,o).join(""));return Cf(n,(i.DP-=4)+n.e+1,i.RM)};jn.times=jn.mul=function(n){var e,t=this,r=t.constructor,i=t.c,s=(n=new r(n)).c,o=i.length,a=s.length,c=t.e,l=n.e;if(n.s=t.s==n.s?1:-1,!i[0]||!s[0])return n.c=[n.e=0],n;for(n.e=c+l,o<a&&(e=i,i=s,s=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+s[c]*i[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++n.e:e.shift(),c=e.length;!e[--c];)e.pop();return n.c=e,n};jn.toExponential=function(n,e){var t=this,r=t.c[0];if(n!==Nc){if(n!==~~n||n<0||n>rf)throw Error(u5);for(t=Cf(new t.constructor(t),++n,e);t.c.length<n;)t.c.push(0)}return Tf(t,!0,!!r)};jn.toFixed=function(n,e){var t=this,r=t.c[0];if(n!==Nc){if(n!==~~n||n<0||n>rf)throw Error(u5);for(t=Cf(new t.constructor(t),n+t.e+1,e),n=n+t.e+1;t.c.length<n;)t.c.push(0)}return Tf(t,!1,!!r)};jn[Symbol.for("nodejs.util.inspect.custom")]=jn.toJSON=jn.toString=function(){var n=this,e=n.constructor;return Tf(n,n.e<=e.NE||n.e>=e.PE,!!n.c[0])};jn.toNumber=function(){var n=+Tf(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(n.toString()))throw Error(gy+"Imprecise conversion");return n};jn.toPrecision=function(n,e){var t=this,r=t.constructor,i=t.c[0];if(n!==Nc){if(n!==~~n||n<1||n>rf)throw Error(Af+"precision");for(t=Cf(new r(t),n,e);t.c.length<n;)t.c.push(0)}return Tf(t,n<=t.e||t.e<=r.NE||t.e>=r.PE,!!i)};jn.valueOf=function(){var n=this,e=n.constructor;if(e.strict===!0)throw Error(gy+"valueOf disallowed");return Tf(n,n.e<=e.NE||n.e>=e.PE,!0)};var N1=oF();const zee={bigNumber(n){return n?new N1(n):new N1(0)},multiply(n,e){if(n===void 0||e===void 0)return new N1(0);const t=new N1(n),r=new N1(e);return t.times(r)},formatNumberToLocalString(n,e=2){return n===void 0?"0.00":typeof n=="number"?n.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(n).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(n){return n===void 0?0:parseFloat(n.replace(/,/gu,""))}},Hee=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Vee=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Wee=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],qee={getERC20Abi:n=>_e.USDT_CONTRACT_ADDRESSES.includes(n)?Wee:Hee,getSwapAbi:()=>Vee},Es={validateCaipAddress(n){if(n.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return n},parseCaipAddress(n){const e=n.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${n}`);const[t,r,i]=e;if(!t||!r||!i)throw new Error(`Invalid CAIP-10 address: ${n}`);return{chainNamespace:t,chainId:r,address:i}},parseCaipNetworkId(n){const e=n.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${n}`);const[t,r]=e;if(!t||!r)throw new Error(`Invalid CAIP-2 network id: ${n}`);return{chainNamespace:t,chainId:r}}},Xt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function NE(n){if(!n)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${n}:connected_connector_id`}const Vt={setItem(n,e){Sm()&&e!==void 0&&localStorage.setItem(n,e)},getItem(n){if(Sm())return localStorage.getItem(n)||void 0},removeItem(n){Sm()&&localStorage.removeItem(n)},clear(){Sm()&&localStorage.clear()}};function Sm(){return typeof window<"u"&&typeof localStorage<"u"}function kl(n,e){return e==="light"?{"--w3m-accent":n?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":n?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var AM={};const OE=(typeof process<"u"&&typeof AM<"u"?AM.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",aF=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],jee="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Ln={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:OE,SECURE_SITE_DASHBOARD:`${OE}/dashboard`,SECURE_SITE_FAVICON:`${OE}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},je={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(n,e){return Date.now()-n>e},getActiveNetworkProps(){const n=je.getActiveNamespace(),e=je.getActiveCaipNetworkId(),t=e?e.split(":")[1]:void 0,r=t?isNaN(Number(t))?t:Number(t):void 0;return{namespace:n,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:n,href:e}){try{Vt.setItem(Xt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:n}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const n=Vt.getItem(Xt.DEEPLINK_CHOICE);if(n)return JSON.parse(n)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Vt.removeItem(Xt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(n){try{Vt.setItem(Xt.ACTIVE_NAMESPACE,n)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(n){try{Vt.setItem(Xt.ACTIVE_CAIP_NETWORK_ID,n),je.setActiveNamespace(n.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Vt.getItem(Xt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Vt.removeItem(Xt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(n){try{const e=NE(n);Vt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(n){try{const e=je.getRecentWallets();e.find(r=>r.id===n.id)||(e.unshift(n),e.length>2&&e.pop(),Vt.setItem(Xt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const n=Vt.getItem(Xt.RECENT_WALLETS);return n?JSON.parse(n):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(n,e){try{const t=NE(n);Vt.setItem(t,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Vt.getItem(Xt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(n){if(n)try{const e=NE(n);return Vt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",n)}},setConnectedSocialProvider(n){try{Vt.setItem(Xt.CONNECTED_SOCIAL,n)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Vt.getItem(Xt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Vt.removeItem(Xt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Vt.getItem(Xt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return Vt.getItem(Xt.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(n){try{Vt.setItem(Xt.CONNECTION_STATUS,n)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Vt.getItem(Xt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const n=Vt.getItem(Xt.CONNECTED_NAMESPACES);return n?.length?n.split(","):[]}catch{return[]}},setConnectedNamespaces(n){try{const e=Array.from(new Set(n));Vt.setItem(Xt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(n){try{const e=je.getConnectedNamespaces();e.includes(n)||(e.push(n),je.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(n){try{const e=je.getConnectedNamespaces(),t=e.indexOf(n);t>-1&&(e.splice(t,1),je.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Vt.getItem(Xt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(n){try{Vt.setItem(Xt.TELEGRAM_SOCIAL_PROVIDER,n)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Vt.removeItem(Xt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let n={};try{const e=Vt.getItem(Xt.PORTFOLIO_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromBalanceCache(n){try{const e=je.getBalanceCache();Vt.setItem(Xt.PORTFOLIO_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getBalanceCacheForCaipAddress(n){try{const t=je.getBalanceCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;je.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateBalanceCache(n){try{const e=je.getBalanceCache();e[n.caipAddress]=n,Vt.setItem(Xt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",n)}},getNativeBalanceCache(){let n={};try{const e=Vt.getItem(Xt.NATIVE_BALANCE_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromNativeBalanceCache(n){try{const e=je.getBalanceCache();Vt.setItem(Xt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getNativeBalanceCacheForCaipAddress(n){try{const t=je.getNativeBalanceCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",n),je.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateNativeBalanceCache(n){try{const e=je.getNativeBalanceCache();e[n.caipAddress]=n,Vt.setItem(Xt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",n)}},getEnsCache(){let n={};try{const e=Vt.getItem(Xt.ENS_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return n},getEnsFromCacheForAddress(n){try{const t=je.getEnsCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;je.removeEnsFromCache(n)}catch{console.info("Unable to get ens name from cache",n)}},updateEnsCache(n){try{const e=je.getEnsCache();e[n.address]=n,Vt.setItem(Xt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",n)}},removeEnsFromCache(n){try{const e=je.getEnsCache();Vt.setItem(Xt.ENS_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove ens name from cache",n)}},getIdentityCache(){let n={};try{const e=Vt.getItem(Xt.IDENTITY_CACHE);n=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return n},getIdentityFromCacheForAddress(n){try{const t=je.getIdentityCache()[n];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;je.removeIdentityFromCache(n)}catch{console.info("Unable to get identity from cache",n)}},updateIdentityCache(n){try{const e=je.getIdentityCache();e[n.address]={identity:n.identity,timestamp:n.timestamp},Vt.setItem(Xt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",n)}},removeIdentityFromCache(n){try{const e=je.getIdentityCache();Vt.setItem(Xt.IDENTITY_CACHE,JSON.stringify({...e,[n]:void 0}))}catch{console.info("Unable to remove identity from cache",n)}},clearAddressCache(){try{Vt.removeItem(Xt.PORTFOLIO_CACHE),Vt.removeItem(Xt.NATIVE_BALANCE_CACHE),Vt.removeItem(Xt.ENS_CACHE),Vt.removeItem(Xt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(n){try{Vt.setItem(Xt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(n))}catch{console.info("Unable to set preferred account types",n)}},getPreferredAccountTypes(){try{const n=Vt.getItem(Xt.PREFERRED_ACCOUNT_TYPES);return n?JSON.parse(n):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(n,e){try{const t=je.getConnections(),r=t[e]??[],i=new Map;for(const o of r)i.set(o.connectorId,{...o});for(const o of n){const a=i.get(o.connectorId),c=o.connectorId===_e.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(h=>h.address.toLowerCase())),u=o.accounts.filter(h=>!l.has(h.address.toLowerCase()));a.accounts.push(...u)}else i.set(o.connectorId,{...o})}const s={...t,[e]:Array.from(i.values())};Vt.setItem(Xt.CONNECTIONS,JSON.stringify(s))}catch(t){console.error("Unable to sync connections to storage",t)}},getConnections(){try{const n=Vt.getItem(Xt.CONNECTIONS);return n?JSON.parse(n):{}}catch(n){return console.error("Unable to get connections from storage",n),{}}},deleteAddressFromConnection({connectorId:n,address:e,namespace:t}){try{const r=je.getConnections(),i=r[t]??[],s=new Map(i.map(a=>[a.connectorId,a])),o=s.get(n);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?s.delete(n):s.set(n,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Vt.setItem(Xt.CONNECTIONS,JSON.stringify({...r,[t]:Array.from(s.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${n}" in namespace "${t}"`)}},getDisconnectedConnectorIds(){try{const n=Vt.getItem(Xt.DISCONNECTED_CONNECTOR_IDS);return n?JSON.parse(n):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(n,e){try{const t=je.getDisconnectedConnectorIds(),r=t[e]??[];r.push(n),Vt.setItem(Xt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...t,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${n}" for namespace "${e}"`)}},removeDisconnectedConnectorId(n,e){try{const t=je.getDisconnectedConnectorIds();let r=t[e]??[];r=r.filter(i=>i.toLowerCase()!==n.toLowerCase()),Vt.setItem(Xt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...t,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${n}" for namespace "${e}"`)}},isConnectorDisconnected(n,e){try{return(je.getDisconnectedConnectorIds()[e]??[]).some(i=>i.toLowerCase()===n.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${n}" for namespace "${e}"`)}return!1}},_t={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(n,e=""){return n?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const n=window?.navigator.userAgent.toLowerCase();return _t.isMobile()&&n.includes("android")},isIos(){if(!this.isMobile())return!1;const n=window?.navigator.userAgent.toLowerCase();return n.includes("iphone")||n.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(n){return n?n-Date.now()<=Ln.TEN_SEC_MS:!0},isAllowedRetry(n,e=Ln.ONE_SEC_MS){return Date.now()-n>=e},copyToClopboard(n){navigator.clipboard.writeText(n)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(_t.isClient()&&window.self!==window.top)try{const n=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(n){const t=new URL(n),r=new URL(e);return t.hostname===r.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Ln.FOUR_MINUTES_MS},getNetworkId(n){return n?.split(":")[1]},getPlainAddress(n){return n?.split(":")[2]},async wait(n){return new Promise(e=>{setTimeout(e,n)})},debounce(n,e=500){let t;return(...r)=>{function i(){n(...r)}t&&clearTimeout(t),t=setTimeout(i,e)}},isHttpUrl(n){return n.startsWith("http://")||n.startsWith("https://")},formatNativeUrl(n,e,t=null){if(_t.isHttpUrl(n))return this.formatUniversalUrl(n,e);let r=n,i=t;r.includes("://")||(r=n.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),i&&!i?.endsWith("/")&&(i=`${i}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const s=encodeURIComponent(e);return{redirect:`${r}wc?uri=${s}`,redirectUniversalLink:i?`${i}wc?uri=${s}`:void 0,href:r}},formatUniversalUrl(n,e){if(!_t.isHttpUrl(n))return this.formatNativeUrl(n,e);let t=n;t.endsWith("/")||(t=`${t}/`);const r=encodeURIComponent(e);return{redirect:`${t}wc?uri=${r}`,href:t}},getOpenTargetForPlatform(n){return n==="popupWindow"?n:this.isTelegram()?je.getTelegramSocialProvider()?"_top":"_blank":n},openHref(n,e,t){window?.open(n,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},returnOpenHref(n,e,t){return window?.open(n,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const n=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(n||e)},async preloadImage(n){const e=new Promise((t,r)=>{const i=new Image;i.onload=t,i.onerror=r,i.crossOrigin="anonymous",i.src=n});return Promise.race([e,_t.wait(2e3)])},formatBalance(n,e){let t="0.000";if(typeof n=="string"){const r=Number(n);if(r){const i=Math.floor(r*1e3)/1e3;i&&(t=i.toString())}}return`${t}${e?` ${e}`:""}`},formatBalance2(n,e){let t;if(n==="0")t="0";else if(typeof n=="string"){const r=Number(n);r&&(t=r.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:t??"0",rest:t==="0"?"000":"",symbol:e}},getApiUrl(){return _e.W3M_API_URL},getBlockchainApiUrl(){return _e.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return _e.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})},parseError(n){return typeof n=="string"?n:typeof n?.issues?.[0]?.message=="string"?n.issues[0].message:n instanceof Error?n.message:"Unknown error"},sortRequestedNetworks(n,e=[]){const t={};return e&&n&&(n.forEach((r,i)=>{t[r]=i}),e.sort((r,i)=>{const s=t[r.id],o=t[i.id];return s!==void 0&&o!==void 0?s-o:s!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(n){let e=0;for(const t of n)e+=t.value??0;return e},formatTokenBalance(n){const e=n.toFixed(2),[t,r]=e.split(".");return{dollars:t,pennies:r}},isAddress(n,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(n)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(n)||/^(?:0x)?[0-9A-F]{40}$/iu.test(n))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(n);default:return!1}},uniqueBy(n,e){const t=new Set;return n.filter(r=>{const i=r[e];return t.has(i)?!1:(t.add(i),!0)})},generateSdkVersion(n,e,t){const i=n.length===0?Ln.ADAPTER_TYPES.UNIVERSAL:n.map(s=>s.adapterType).join(",");return`${e}-${i}-${t}`},createAccount(n,e,t,r,i){return{namespace:n,address:e,type:t,publicKey:r,path:i}},isCaipAddress(n){if(typeof n!="string")return!1;const e=n.split(":"),t=e[0];return e.filter(Boolean).length===3&&t in _e.CHAIN_NAME_MAP},getAccount(n){return n?typeof n=="string"?{address:n,chainId:void 0}:{address:n.address,chainId:n.chainId}:{address:void 0,chainId:void 0}},isMac(){const n=window?.navigator.userAgent.toLowerCase();return n.includes("macintosh")&&!n.includes("safari")},formatTelegramSocialLoginUrl(n){const e=`--${encodeURIComponent(window?.location.href)}`,t="state=";if(new URL(n).host==="auth.magic.link"){const i="provider_authorization_url=",s=n.substring(n.indexOf(i)+i.length),o=this.injectIntoUrl(decodeURIComponent(s),t,e);return n.replace(s,encodeURIComponent(o))}return this.injectIntoUrl(n,t,e)},injectIntoUrl(n,e,t){const r=n.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${n}`);const i=n.indexOf("&",r),s=e.length,o=i!==-1?i:n.length,a=n.substring(0,r+s),c=n.substring(r+s,o),l=n.substring(i),u=c+t;return a+u+l}};async function O1(...n){const e=await fetch(...n);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class yy{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:r,...i}){const s=this.createUrl(i);return(await O1(s,{method:"GET",headers:e,signal:t,cache:r})).json()}async getBlob({headers:e,signal:t,...r}){const i=this.createUrl(r);return(await O1(i,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:r,...i}){const s=this.createUrl(i);return(await O1(s,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:t,signal:r,...i}){const s=this.createUrl(i);return(await O1(s,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:t,signal:r,...i}){const s=this.createUrl(i);return(await O1(s,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:t}){const r=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([i,s])=>{s&&r.searchParams.append(i,s)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const Gee={getFeatureValue(n,e){const t=e?.[n];return t===void 0?Ln.DEFAULT_FEATURES[n]:t},filterSocialsByPlatform(n){if(!n||!n.length)return n;if(_t.isTelegram()){if(_t.isIos())return n.filter(e=>e!=="google");if(_t.isMac())return n.filter(e=>e!=="x");if(_t.isAndroid())return n.filter(e=>!["facebook","x"].includes(e))}return n}},Dt=Qn({features:Ln.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Ln.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Fe={state:Dt,subscribeKey(n,e){return Ei(Dt,n,e)},setOptions(n){Object.assign(Dt,n)},setRemoteFeatures(n){if(!n)return;const e={...Dt.remoteFeatures,...n};Dt.remoteFeatures=e,Dt.remoteFeatures?.socials&&(Dt.remoteFeatures.socials=Gee.filterSocialsByPlatform(Dt.remoteFeatures.socials))},setFeatures(n){if(!n)return;Dt.features||(Dt.features=Ln.DEFAULT_FEATURES);const e={...Dt.features,...n};Dt.features=e},setProjectId(n){Dt.projectId=n},setCustomRpcUrls(n){Dt.customRpcUrls=n},setAllWallets(n){Dt.allWallets=n},setIncludeWalletIds(n){Dt.includeWalletIds=n},setExcludeWalletIds(n){Dt.excludeWalletIds=n},setFeaturedWalletIds(n){Dt.featuredWalletIds=n},setTokens(n){Dt.tokens=n},setTermsConditionsUrl(n){Dt.termsConditionsUrl=n},setPrivacyPolicyUrl(n){Dt.privacyPolicyUrl=n},setCustomWallets(n){Dt.customWallets=n},setIsSiweEnabled(n){Dt.isSiweEnabled=n},setIsUniversalProvider(n){Dt.isUniversalProvider=n},setSdkVersion(n){Dt.sdkVersion=n},setMetadata(n){Dt.metadata=n},setDisableAppend(n){Dt.disableAppend=n},setEIP6963Enabled(n){Dt.enableEIP6963=n},setDebug(n){Dt.debug=n},setEnableWalletConnect(n){Dt.enableWalletConnect=n},setEnableWalletGuide(n){Dt.enableWalletGuide=n},setEnableAuthLogger(n){Dt.enableAuthLogger=n},setEnableWallets(n){Dt.enableWallets=n},setPreferUniversalLinks(n){Dt.experimental_preferUniversalLinks=n},setSIWX(n){if(n)for(const[e,t]of Object.entries(Ln.SIWX_DEFAULTS))n[e]??=t;Dt.siwx=n},setConnectMethodsOrder(n){Dt.features={...Dt.features,connectMethodsOrder:n}},setWalletFeaturesOrder(n){Dt.features={...Dt.features,walletFeaturesOrder:n}},setSocialsOrder(n){Dt.remoteFeatures={...Dt.remoteFeatures,socials:n}},setCollapseWallets(n){Dt.features={...Dt.features,collapseWallets:n}},setEnableEmbedded(n){Dt.enableEmbedded=n},setAllowUnsupportedChain(n){Dt.allowUnsupportedChain=n},setManualWCControl(n){Dt.manualWCControl=n},setEnableNetworkSwitch(n){Dt.enableNetworkSwitch=n},setEnableReconnect(n){Dt.enableReconnect=n},setDefaultAccountTypes(n={}){Object.entries(n).forEach(([e,t])=>{t&&(Dt.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(n){Dt.universalProviderConfigOverride=n},getUniversalProviderConfigOverride(){return Dt.universalProviderConfigOverride},getSnapshot(){return zg(Dt)}},Kee=Object.freeze({enabled:!0,events:[]}),Yee=new yy({baseUrl:_t.getAnalyticsUrl(),clientId:null}),Xee=5,Zee=60*1e3,hu=Qn({...Kee}),Jee={state:hu,subscribeKey(n,e){return Ei(hu,n,e)},async sendError(n,e){if(!hu.enabled)return;const t=Date.now();if(hu.events.filter(s=>{const o=new Date(s.properties.timestamp||"").getTime();return t-o<Zee}).length>=Xee)return;const i={type:"error",event:e,properties:{errorType:n.name,errorMessage:n.message,stackTrace:n.stack,timestamp:new Date().toISOString()}};hu.events.push(i);try{if(typeof window>"u")return;const{projectId:s,sdkType:o,sdkVersion:a}=Fe.state;await Yee.post({path:"/e",params:{projectId:s,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:_t.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:n.name,errorMessage:n.message,stackTrace:n.stack}}})}catch{}},enable(){hu.enabled=!0},disable(){hu.enabled=!1},clearEvents(){hu.events=[]}};class _0 extends Error{constructor(e,t,r){super(e),this.name="AppKitError",this.category=t,this.originalError=r,Object.setPrototypeOf(this,_0.prototype);let i=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const s=r.stack,o=s.indexOf(`
`);if(o>-1){const a=s.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,i=!0}}i||(Error.captureStackTrace?Error.captureStackTrace(this,_0):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function CM(n,e){const t=n instanceof _0?n:new _0(n instanceof Error?n.message:String(n),e,n);throw Jee.sendError(t,t.category),t}function ko(n,e="INTERNAL_SDK_ERROR"){const t={};return Object.keys(n).forEach(r=>{const i=n[r];if(typeof i=="function"){let s=i;i.constructor.name==="AsyncFunction"?s=async(...o)=>{try{return await i(...o)}catch(a){return CM(a,e)}}:s=(...o)=>{try{return i(...o)}catch(a){return CM(a,e)}},t[r]=s}else t[r]=i}),t}var E0={};const Qee="https://secure.walletconnect.org/sdk",ete=(typeof process<"u"&&typeof E0<"u"?E0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Qee,tte=(typeof process<"u"&&typeof E0<"u"?E0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",nte=(typeof process<"u"&&typeof E0<"u"?E0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",St={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},ai={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Ac={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},rte={handleMobileDeeplinkRedirect(n,e){const t=window.location.href,r=encodeURIComponent(t);if(n===Ac.PHANTOM.id&&!("phantom"in window)){const i=t.startsWith("https")?"https":"http",s=t.split("/")[2],o=encodeURIComponent(`${i}://${s}`);window.location.href=`${Ac.PHANTOM.url}/ul/browse/${r}?ref=${o}`}n===Ac.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ac.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===_e.CHAIN.SOLANA&&n===Ac.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ac.COINBASE.url}/dapp?cb_url=${r}`)}},fo=Qn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),ite={state:fo,subscribeNetworkImages(n){return _i(fo.networkImages,()=>n(fo.networkImages))},subscribeKey(n,e){return Ei(fo,n,e)},subscribe(n){return _i(fo,()=>n(fo))},setWalletImage(n,e){fo.walletImages[n]=e},setNetworkImage(n,e){fo.networkImages[n]=e},setChainImage(n,e){fo.chainImages[n]=e},setConnectorImage(n,e){fo.connectorImages={...fo.connectorImages,[n]:e}},setTokenImage(n,e){fo.tokenImages[n]=e},setCurrencyImage(n,e){fo.currencyImages[n]=e}},Xo=ko(ite),ste={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},kE=Qn({networkImagePromises:{}}),cF={async fetchWalletImage(n){if(n)return await Nt._fetchWalletImage(n),this.getWalletImageById(n)},async fetchNetworkImage(n){if(!n)return;const e=this.getNetworkImageById(n);return e||(kE.networkImagePromises[n]||(kE.networkImagePromises[n]=Nt._fetchNetworkImage(n)),await kE.networkImagePromises[n],this.getNetworkImageById(n))},getWalletImageById(n){if(n)return Xo.state.walletImages[n]},getWalletImage(n){if(n?.image_url)return n?.image_url;if(n?.image_id)return Xo.state.walletImages[n.image_id]},getNetworkImage(n){if(n?.assets?.imageUrl)return n?.assets?.imageUrl;if(n?.assets?.imageId)return Xo.state.networkImages[n.assets.imageId]},getNetworkImageById(n){if(n)return Xo.state.networkImages[n]},getConnectorImage(n){if(n?.imageUrl)return n.imageUrl;if(n?.info?.icon)return n.info.icon;if(n?.imageId)return Xo.state.connectorImages[n.imageId]},getChainImage(n){return Xo.state.networkImages[ste[n]]}},du=Qn({message:"",variant:"info",open:!1}),ote={state:du,subscribeKey(n,e){return Ei(du,n,e)},open(n,e){const{debug:t}=Fe.state,{shortMessage:r,longMessage:i}=n;t&&(du.message=r,du.variant=e,du.open=!0),i&&console.error(typeof i=="function"?i():i)},close(){du.open=!1,du.message="",du.variant="info"}},ir=ko(ote),ate=_t.getAnalyticsUrl(),cte=new yy({baseUrl:ate,clientId:null}),lte=["MODAL_CREATED"],nl=Qn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),qn={state:nl,subscribe(n){return _i(nl,()=>n(nl))},getSdkProperties(){const{projectId:n,sdkType:e,sdkVersion:t}=Fe.state;return{projectId:n,st:e,sv:t||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(n){try{const e=At.state.address;if(lte.includes(n.data.event)||typeof window>"u")return;await cte.post({path:"/e",params:qn.getSdkProperties(),body:{eventId:_t.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:n.timestamp,props:{...n.data,address:e}}}),nl.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===_e.HTTP_STATUS_CODES.FORBIDDEN&&!nl.reportedErrors.FORBIDDEN&&(ir.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Sm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),nl.reportedErrors.FORBIDDEN=!0)}},sendEvent(n){nl.timestamp=Date.now(),nl.data=n,Fe.state.features?.analytics&&qn._sendAnalyticsEvent(nl)}},ute=_t.getApiUrl(),Ls=new yy({baseUrl:ute,clientId:null}),hte=40,TM=4,dte=20,tn=Qn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Nt={state:tn,subscribeKey(n,e){return Ei(tn,n,e)},_getSdkProperties(){const{projectId:n,sdkType:e,sdkVersion:t}=Fe.state;return{projectId:n,st:e||"appkit",sv:t||"html-wagmi-4.2.2"}},_filterOutExtensions(n){return Fe.state.isUniversalProvider?n.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):n},async _fetchWalletImage(n){const e=`${Ls.baseUrl}/getWalletImage/${n}`,t=await Ls.getBlob({path:e,params:Nt._getSdkProperties()});Xo.setWalletImage(n,URL.createObjectURL(t))},async _fetchNetworkImage(n){const e=`${Ls.baseUrl}/public/getAssetImage/${n}`,t=await Ls.getBlob({path:e,params:Nt._getSdkProperties()});Xo.setNetworkImage(n,URL.createObjectURL(t))},async _fetchConnectorImage(n){const e=`${Ls.baseUrl}/public/getAssetImage/${n}`,t=await Ls.getBlob({path:e,params:Nt._getSdkProperties()});Xo.setConnectorImage(n,URL.createObjectURL(t))},async _fetchCurrencyImage(n){const e=`${Ls.baseUrl}/public/getCurrencyImage/${n}`,t=await Ls.getBlob({path:e,params:Nt._getSdkProperties()});Xo.setCurrencyImage(n,URL.createObjectURL(t))},async _fetchTokenImage(n){const e=`${Ls.baseUrl}/public/getTokenImage/${n}`,t=await Ls.getBlob({path:e,params:Nt._getSdkProperties()});Xo.setTokenImage(n,URL.createObjectURL(t))},_filterWalletsByPlatform(n){return _t.isMobile()?n?.filter(t=>t.mobile_link||t.id===Ac.COINBASE.id?!0:ee.state.activeChain==="solana"&&(t.id===Ac.SOLFLARE.id||t.id===Ac.PHANTOM.id)):n},async fetchProjectConfig(){return(await Ls.get({path:"/appkit/v1/config",params:Nt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:n}=await Ls.get({path:"/projects/v1/origins",params:Nt._getSdkProperties()});return n}catch(n){if(n instanceof Error&&n.cause instanceof Response){const e=n.cause.status;if(e===_e.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:n});if(e>=_e.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:n});return[]}return[]}},async fetchNetworkImages(){const e=ee.getAllRequestedCaipNetworks()?.map(({assets:t})=>t?.imageId).filter(Boolean).filter(t=>!cF.getNetworkImageById(t));e&&await Promise.allSettled(e.map(t=>Nt._fetchNetworkImage(t)))},async fetchConnectorImages(){const{connectors:n}=rt.state,e=n.map(({imageId:t})=>t).filter(Boolean);await Promise.allSettled(e.map(t=>Nt._fetchConnectorImage(t)))},async fetchCurrencyImages(n=[]){await Promise.allSettled(n.map(e=>Nt._fetchCurrencyImage(e)))},async fetchTokenImages(n=[]){await Promise.allSettled(n.map(e=>Nt._fetchTokenImage(e)))},async fetchWallets(n){const e=n.exclude??[];Nt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ac).map(s=>s.id));const r=await Ls.get({path:"/getWallets",params:{...Nt._getSdkProperties(),...n,page:String(n.page),entries:String(n.entries),include:n.include?.join(","),exclude:e.join(",")}});return{data:Nt._filterWalletsByPlatform(r?.data)||[],count:r?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:n}=Fe.state;if(n?.length){const e={...Nt._getSdkProperties(),page:1,entries:n?.length??TM,include:n},{data:t}=await Nt.fetchWallets(e),r=[...t].sort((s,o)=>n.indexOf(s.id)-n.indexOf(o.id)),i=r.map(s=>s.image_id).filter(Boolean);await Promise.allSettled(i.map(s=>Nt._fetchWalletImage(s))),tn.featured=r,tn.allFeatured=r}},async fetchRecommendedWallets(){try{tn.isFetchingRecommendedWallets=!0;const{includeWalletIds:n,excludeWalletIds:e,featuredWalletIds:t}=Fe.state,r=[...e??[],...t??[]].filter(Boolean),i=ee.getRequestedCaipNetworkIds().join(","),s={page:1,entries:TM,include:n,exclude:r,chains:i},{data:o,count:a}=await Nt.fetchWallets(s),c=je.getRecentWallets(),l=o.map(h=>h.image_id).filter(Boolean),u=c.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(h=>Nt._fetchWalletImage(h))),tn.recommended=o,tn.allRecommended=o,tn.count=a??0}catch{}finally{tn.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:n}){const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:r}=Fe.state,i=ee.getRequestedCaipNetworkIds().join(","),s=[...tn.recommended.map(({id:u})=>u),...t??[],...r??[]].filter(Boolean),o={page:n,entries:hte,include:e,exclude:s,chains:i},{data:a,count:c}=await Nt.fetchWallets(o),l=a.slice(0,dte).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Nt._fetchWalletImage(u))),tn.wallets=_t.uniqueBy([...tn.wallets,...Nt._filterOutExtensions(a)],"id").filter(u=>u.chains?.some(h=>i.includes(h))),tn.count=c>tn.count?c:tn.count,tn.page=n},async initializeExcludedWallets({ids:n}){const e={page:1,entries:n.length,include:n},{data:t}=await Nt.fetchWallets(e);t&&t.forEach(r=>{tn.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:n,badge:e}){const{includeWalletIds:t,excludeWalletIds:r}=Fe.state,i=ee.getRequestedCaipNetworkIds().join(",");tn.search=[];const s={page:1,entries:100,search:n?.trim(),badge_type:e,include:t,exclude:r,chains:i},{data:o}=await Nt.fetchWallets(s);qn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:n??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Nt._fetchWalletImage(c)),_t.wait(300)]),tn.search=Nt._filterOutExtensions(o)},initPromise(n,e){const t=tn.promises[n];return t||(tn.promises[n]=e())},prefetch({fetchConnectorImages:n=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:t=!0,fetchNetworkImages:r=!0}={}){const i=[n&&Nt.initPromise("connectorImages",Nt.fetchConnectorImages),e&&Nt.initPromise("featuredWallets",Nt.fetchFeaturedWallets),t&&Nt.initPromise("recommendedWallets",Nt.fetchRecommendedWallets),r&&Nt.initPromise("networkImages",Nt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){Fe.state.features?.analytics&&Nt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:n}=await Ls.get({path:"/getAnalyticsConfig",params:Nt._getSdkProperties()});Fe.setFeatures({analytics:n})}catch{Fe.setFeatures({analytics:!1})}},filterByNamespaces(n){if(!n?.length){tn.featured=tn.allFeatured,tn.recommended=tn.allRecommended;return}const e=ee.getRequestedCaipNetworkIds().join(",");tn.featured=tn.allFeatured.filter(t=>t.chains?.some(r=>e.includes(r))),tn.recommended=tn.allRecommended.filter(t=>t.chains?.some(r=>e.includes(r))),tn.filteredWallets=tn.wallets.filter(t=>t.chains?.some(r=>e.includes(r)))},clearFilterByNamespaces(){tn.filteredWallets=[]},setFilterByNamespace(n){if(!n){tn.featured=tn.allFeatured,tn.recommended=tn.allRecommended;return}const e=ee.getRequestedCaipNetworkIds().join(",");tn.featured=tn.allFeatured.filter(t=>t.chains?.some(r=>e.includes(r))),tn.recommended=tn.allRecommended.filter(t=>t.chains?.some(r=>e.includes(r))),tn.filteredWallets=tn.wallets.filter(t=>t.chains?.some(r=>e.includes(r)))}},Yn=Qn({view:"Connect",history:["Connect"],transactionStack:[]}),fte={state:Yn,subscribeKey(n,e){return Ei(Yn,n,e)},pushTransactionStack(n){Yn.transactionStack.push(n)},popTransactionStack(n){const e=Yn.transactionStack.pop();if(!e)return;const{onSuccess:t,onError:r,onCancel:i}=e;switch(n){case"success":t?.();break;case"error":r?.(),Wt.goBack();break;case"cancel":i?.(),Wt.goBack();break}},push(n,e){n!==Yn.view&&(Yn.view=n,Yn.history.push(n),Yn.data=e)},reset(n,e){Yn.view=n,Yn.history=[n],Yn.data=e},replace(n,e){Yn.history.at(-1)===n||(Yn.view=n,Yn.history[Yn.history.length-1]=n,Yn.data=e)},goBack(){const n=ee.state.activeCaipAddress,e=Wt.state.view==="ConnectingFarcaster",t=!n&&e;if(Yn.history.length>1){Yn.history.pop();const[r]=Yn.history.slice(-1);r&&(n&&r==="Connect"?Yn.view="Account":Yn.view=r)}else Rn.close();Yn.data?.wallet&&(Yn.data.wallet=void 0),setTimeout(()=>{if(t){At.setFarcasterUrl(void 0,ee.state.activeChain);const r=rt.getAuthConnector();r?.provider?.reload();const i=zg(Fe.state);r?.provider?.syncDappData?.({metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType})}},100)},goBackToIndex(n){if(Yn.history.length>1){Yn.history=Yn.history.slice(0,n+1);const[e]=Yn.history.slice(-1);e&&(Yn.view=e)}},goBackOrCloseModal(){Wt.state.history.length>1?Wt.goBack():Rn.close()}},Wt=ko(fte),rl=Qn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),tS={state:rl,subscribe(n){return _i(rl,()=>n(rl))},setThemeMode(n){rl.themeMode=n;try{const e=rt.getAuthConnector();if(e){const t=tS.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:n,themeVariables:t,w3mThemeVariables:kl(t,n)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(n){rl.themeVariables={...rl.themeVariables,...n};try{const e=rt.getAuthConnector();if(e){const t=tS.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:kl(rl.themeVariables,rl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return zg(rl)}},Ks=ko(tS),lF={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Cn=Qn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...lF},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),pte={state:Cn,subscribe(n){return _i(Cn,()=>{n(Cn)})},subscribeKey(n,e){return Ei(Cn,n,e)},initialize(n){n.forEach(e=>{const t=je.getConnectedConnectorId(e);t&&rt.setConnectorId(t,e)})},setActiveConnector(n){n&&(Cn.activeConnector=_h(n))},setConnectors(n){n.filter(i=>!Cn.allConnectors.some(s=>s.id===i.id&&rt.getConnectorName(s.name)===rt.getConnectorName(i.name)&&s.chain===i.chain)).forEach(i=>{i.type!=="MULTI_CHAIN"&&Cn.allConnectors.push(_h(i))});const t=rt.getEnabledNamespaces(),r=rt.getEnabledConnectors(t);Cn.connectors=rt.mergeMultiChainConnectors(r)},filterByNamespaces(n){Object.keys(Cn.filterByNamespaceMap).forEach(e=>{Cn.filterByNamespaceMap[e]=!1}),n.forEach(e=>{Cn.filterByNamespaceMap[e]=!0}),rt.updateConnectorsForEnabledNamespaces()},filterByNamespace(n,e){Cn.filterByNamespaceMap[n]=e,rt.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const n=rt.getEnabledNamespaces(),e=rt.getEnabledConnectors(n),t=rt.areAllNamespacesEnabled();Cn.connectors=rt.mergeMultiChainConnectors(e),t?Nt.clearFilterByNamespaces():Nt.filterByNamespaces(n)},getEnabledNamespaces(){return Object.entries(Cn.filterByNamespaceMap).filter(([n,e])=>e).map(([n])=>n)},getEnabledConnectors(n){return Cn.allConnectors.filter(e=>n.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Cn.filterByNamespaceMap).every(n=>n)},mergeMultiChainConnectors(n){const e=rt.generateConnectorMapByName(n),t=[];return e.forEach(r=>{const i=r[0],s=i?.id===_e.CONNECTOR_ID.AUTH;r.length>1&&i?t.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...r],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:i?.id||""}):i&&t.push(i)}),t},generateConnectorMapByName(n){const e=new Map;return n.forEach(t=>{const{name:r}=t,i=rt.getConnectorName(r);if(!i)return;const s=e.get(i)||[];s.find(a=>a.chain===t.chain)||s.push(t),e.set(i,s)}),e},getConnectorName(n){return n&&({"Trust Wallet":"Trust"}[n]||n)},getUniqueConnectorsByName(n){const e=[];return n.forEach(t=>{e.find(r=>r.chain===t.chain)||e.push(t)}),e},addConnector(n){if(n.id===_e.CONNECTOR_ID.AUTH){const e=n,t=zg(Fe.state),r=Ks.getSnapshot().themeMode,i=Ks.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType}),e?.provider?.syncTheme({themeMode:r,themeVariables:i,w3mThemeVariables:kl(i,r)}),rt.setConnectors([n])}else rt.setConnectors([n])},getAuthConnector(n){const e=n||ee.state.activeChain,t=Cn.connectors.find(r=>r.id===_e.CONNECTOR_ID.AUTH);if(t)return t?.connectors?.length?t.connectors.find(i=>i.chain===e):t},getAnnouncedConnectorRdns(){return Cn.connectors.filter(n=>n.type==="ANNOUNCED").map(n=>n.info?.rdns)},getConnectorById(n){return Cn.allConnectors.find(e=>e.id===n)},getConnector(n,e){return Cn.allConnectors.filter(r=>r.chain===ee.state.activeChain).find(r=>r.explorerId===n||r.info?.rdns===e)},syncIfAuthConnector(n){if(n.id!=="ID_AUTH")return;const e=n,t=zg(Fe.state),r=Ks.getSnapshot().themeMode,i=Ks.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:i,w3mThemeVariables:kl(i,r)})},getConnectorsByNamespace(n){const e=Cn.allConnectors.filter(t=>t.chain===n);return rt.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(n){return ee.checkIfSmartAccountEnabled()&&Ms(n)===ai.ACCOUNT_TYPES.EOA},selectWalletConnector(n){const e=rt.getConnector(n.id,n.rdns),t=ee.state.activeChain;rte.handleMobileDeeplinkRedirect(e?.explorerId||n.id,t),e?Wt.push("ConnectingExternal",{connector:e}):Wt.push("ConnectingWalletConnect",{wallet:n})},getConnectors(n){return n?rt.getConnectorsByNamespace(n):rt.mergeMultiChainConnectors(Cn.allConnectors)},setFilterByNamespace(n){Cn.filterByNamespace=n,Cn.connectors=rt.getConnectors(n),Nt.setFilterByNamespace(n)},setConnectorId(n,e){n&&(Cn.activeConnectorIds={...Cn.activeConnectorIds,[e]:n},je.setConnectedConnectorId(e,n))},removeConnectorId(n){Cn.activeConnectorIds={...Cn.activeConnectorIds,[n]:void 0},je.deleteConnectedConnectorId(n)},getConnectorId(n){if(n)return Cn.activeConnectorIds[n]},isConnected(n){return n?!!Cn.activeConnectorIds[n]:Object.values(Cn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Cn.activeConnectorIds={...lF}}},rt=ko(pte),mte=1e3,k1={checkNamespaceConnectorId(n,e){return rt.getConnectorId(n)===e},isSocialProvider(n){return Ln.DEFAULT_REMOTE_FEATURES.socials.includes(n)},connectWalletConnect({walletConnect:n,connector:e,closeModalOnConnect:t=!0,redirectViewOnModalClose:r="Connect",onOpen:i,onConnect:s}){return new Promise((o,a)=>{if(n&&rt.setActiveConnector(e),i?.(_t.isMobile()&&n),r){const l=Rn.subscribeKey("open",u=>{u||(Wt.state.view!==r&&Wt.replace(r),l(),a(new Error("Modal closed")))})}const c=ee.subscribeKey("activeCaipAddress",l=>{l&&(s?.(),t&&Rn.close(),c(),o(Es.parseCaipAddress(l)))})})},connectExternal(n){return new Promise((e,t)=>{const r=ee.subscribeKey("activeCaipAddress",i=>{i&&(Rn.close(),r(),e(Es.parseCaipAddress(i)))});ct.connectExternal(n,n.chain).catch(()=>{r(),t(new Error("Connection rejected"))})})},connectSocial({social:n,closeModalOnConnect:e=!0,onOpenFarcaster:t,onConnect:r}){let i=At.state.socialWindow,s=At.state.socialProvider,o=!1,a=null;const c=ee.subscribeKey("activeCaipAddress",l=>{l&&(e&&Rn.close(),c())});return new Promise((l,u)=>{async function h(f){if(f.data?.resultUri)if(f.origin===_e.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",h,!1);try{const p=rt.getAuthConnector();if(p&&!o){i&&(i.close(),At.setSocialWindow(void 0,ee.state.activeChain),i=At.state.socialWindow),o=!0;const m=f.data.resultUri;s&&qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:s}});const g=ee.state.activeCaipNetwork;if(await p.provider.connectSocial({uri:m,chainId:g?.caipNetworkId}),s){je.setConnectedSocialProvider(s),await ct.connectExternal({id:p.id,type:p.type,socialUri:m},p.chain);const y=ee.state.activeCaipAddress;if(!y){u(new Error("Failed to connect"));return}l(Es.parseCaipAddress(y)),qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:s}})}}}catch{s&&qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:s}}),u(new Error("Failed to connect"))}}else s&&qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:s}})}async function d(){if(n&&(At.setSocialProvider(n,ee.state.activeChain),s=At.state.socialProvider,qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:s}})),s==="farcaster"){t?.();const f=Rn.subscribeKey("open",m=>{!m&&n==="farcaster"&&(u(new Error("Popup closed")),r?.(),f())}),p=rt.getAuthConnector();if(p&&!At.state.farcasterUrl)try{const{url:m}=await p.provider.getFarcasterUri();At.setFarcasterUrl(m,ee.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=rt.getAuthConnector();a=_t.returnOpenHref(`${_e.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&s){const{uri:p}=await f.provider.getSocialRedirectUri({provider:s});if(a&&p){At.setSocialWindow(a,ee.state.activeChain),i=At.state.socialWindow,a.location.href=p;const m=setInterval(()=>{i?.closed&&!o&&(u(new Error("Popup closed")),clearInterval(m))},1e3);window.addEventListener("message",h,!1)}else a?.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a?.close()}}}d()})},connectEmail({closeModalOnConnect:n=!0,redirectViewOnModalClose:e="Connect",onOpen:t,onConnect:r}){return new Promise((i,s)=>{if(t?.(),e){const a=Rn.subscribeKey("open",c=>{c||(Wt.state.view!==e&&Wt.replace(e),a(),s(new Error("Modal closed")))})}const o=ee.subscribeKey("activeCaipAddress",a=>{a&&(r?.(),n&&Rn.close(),o(),i(Es.parseCaipAddress(a)))})})},async updateEmail(){const n=je.getConnectedConnectorId(ee.state.activeChain),e=rt.getAuthConnector();if(!e)throw new Error("No auth connector found");if(n!==_e.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const t=e.provider.getEmail()??"";return Wt.push("UpdateEmailWallet",{email:t,redirectView:void 0}),new Promise((r,i)=>{const s=setInterval(()=>{const a=e.provider.getEmail()??"";a!==t&&(Rn.close(),clearInterval(s),o(),r({email:a}))},mte),o=Rn.subscribeKey("open",a=>{a||(Wt.state.view!=="Connect"&&Wt.push("Connect"),clearInterval(s),o(),i(new Error("Modal closed")))})})},canSwitchToSmartAccount(n){return ee.checkIfSmartAccountEnabled()&&Ms(n)===ai.ACCOUNT_TYPES.EOA}};function uF(){const n=ee.state.activeCaipNetwork?.chainNamespace||"eip155",e=ee.state.activeCaipNetwork?.id||1,t=Ln.NATIVE_TOKEN_ADDRESS[n];return`${n}:${e}:${t}`}function Ms(n){return ee.getAccountData(n)?.preferredAccountType}const tb={getConnectionStatus(n,e){const t=rt.state.activeConnectorIds[e],r=ct.getConnections(e);return!!t&&n.connectorId===t?"connected":r.some(o=>o.connectorId.toLowerCase()===n.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:n,connectorId:e,addresses:t}){return n.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&t){const s=r.accounts.filter(o=>!t.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:s}}return r})},excludeExistingConnections(n,e){const t=new Set(n);return e.filter(r=>!t.has(r.connectorId))},getConnectionsByConnectorId(n,e){return n.filter(t=>t.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(n){const e=!!Fe.state.remoteFeatures?.multiWallet,t=rt.state.activeConnectorIds[n],r=ct.getConnections(n),s=(ct.state.recentConnections.get(n)??[]).filter(a=>rt.getConnectorById(a.connectorId)),o=tb.excludeExistingConnections([...r.map(a=>a.connectorId),...t?[t]:[]],s);return e?{connections:r,recentConnections:o}:{connections:r.filter(a=>a.connectorId.toLowerCase()===t?.toLowerCase()),recentConnections:[]}}},fd=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Zr=Qn({...fd}),gte={state:Zr,subscribeKey(n,e){return Ei(Zr,n,e)},showLoading(n,e={}){this._showMessage({message:n,variant:"loading",...e})},showSuccess(n){this._showMessage({message:n,variant:"success"})},showSvg(n,e){this._showMessage({message:n,svg:e})},showError(n){const e=_t.parseError(n);this._showMessage({message:e,variant:"error"})},hide(){Zr.message=fd.message,Zr.variant=fd.variant,Zr.svg=fd.svg,Zr.open=fd.open,Zr.autoClose=fd.autoClose},_showMessage({message:n,svg:e,variant:t="success",autoClose:r=fd.autoClose}){Zr.open?(Zr.open=!1,setTimeout(()=>{Zr.message=n,Zr.variant=t,Zr.svg=e,Zr.open=!0,Zr.autoClose=r},150)):(Zr.message=n,Zr.variant=t,Zr.svg=e,Zr.open=!0,Zr.autoClose=r)}},Ic=gte,er=Qn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),yte={state:er,subscribe(n){return _i(er,()=>n(er))},setLastNetworkInView(n){er.lastNetworkInView=n},async fetchTransactions(n,e){if(!n)throw new Error("Transactions can't be fetched without an accountAddress");er.loading=!0;try{const t=await Lt.fetchTransactions({account:n,cursor:er.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:ee.state.activeCaipNetwork?.caipNetworkId}),r=Am.filterSpamTransactions(t.data),i=Am.filterByConnectedChain(r),s=[...er.transactions,...i];er.loading=!1,e==="coinbase"?er.coinbaseTransactions=Am.groupTransactionsByYearAndMonth(er.coinbaseTransactions,t.data):(er.transactions=s,er.transactionsByYear=Am.groupTransactionsByYearAndMonth(er.transactionsByYear,i)),er.empty=s.length===0,er.next=t.next?t.next:void 0}catch{const r=ee.state.activeChain;qn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:n,projectId:Fe.state.projectId,cursor:er.next,isSmartAccount:Ms(r)===ai.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ic.showError("Failed to fetch transactions"),er.loading=!1,er.empty=!0,er.next=void 0}},groupTransactionsByYearAndMonth(n={},e=[]){const t=n;return e.forEach(r=>{const i=new Date(r.metadata.minedAt).getFullYear(),s=new Date(r.metadata.minedAt).getMonth(),o=t[i]??{},c=(o[s]??[]).filter(l=>l.id!==r.id);t[i]={...o,[s]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),t},filterSpamTransactions(n){return n.filter(e=>!e.transfers.every(r=>r.nft_info?.flags.is_spam===!0))},filterByConnectedChain(n){const e=ee.state.activeCaipNetwork?.caipNetworkId;return n.filter(r=>r.metadata.chain===e)},clearCursor(){er.next=void 0},resetTransactions(){er.transactions=[],er.transactionsByYear={},er.lastNetworkInView=void 0,er.loading=!1,er.empty=!1,er.next=void 0}},Am=ko(yte,"API_ERROR"),Tn=Qn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let qh;const wte={state:Tn,subscribe(n){return _i(Tn,()=>n(Tn))},subscribeKey(n,e){return Ei(Tn,n,e)},_getClient(){return Tn._client},setClient(n){Tn._client=_h(n)},initialize(n){const e=n.map(t=>t.namespace).filter(Boolean);ct.syncStorageConnections(e)},syncStorageConnections(n){const e=je.getConnections(),t=n??Array.from(ee.state.chains.keys());for(const r of t){const i=e[r]??[],s=new Map(Tn.recentConnections);s.set(r,i),Tn.recentConnections=s}},getConnections(n){return n?Tn.connections.get(n)??[]:[]},hasAnyConnection(n){const e=ct.state.connections;return Array.from(e.values()).flatMap(t=>t).some(({connectorId:t})=>t===n)},async connectWalletConnect(){if(_t.isTelegram()||_t.isSafari()&&_t.isIos()){if(qh){await qh,qh=void 0;return}if(!_t.isPairingExpired(Tn?.wcPairingExpiry)){const n=Tn.wcUri;Tn.wcUri=n;return}qh=ct._getClient()?.connectWalletConnect?.().catch(()=>{}),ct.state.status="connecting",await qh,qh=void 0,Tn.wcPairingExpiry=void 0,ct.state.status="connected"}else await ct._getClient()?.connectWalletConnect?.()},async connectExternal(n,e,t=!0){const r=await ct._getClient()?.connectExternal?.(n);return t&&ee.setActiveNamespace(e),r},async reconnectExternal(n){await ct._getClient()?.reconnectExternal?.(n);const e=n.chain||ee.state.activeChain;e&&rt.setConnectorId(n.id,e)},async setPreferredAccountType(n,e){Rn.setLoading(!0,ee.state.activeChain);const t=rt.getAuthConnector();t&&(At.setPreferredAccountType(n,e),await t.provider.setPreferredAccount(n),je.setPreferredAccountTypes(Object.entries(ee.state.chains).reduce((r,[i,s])=>{const o=i,a=Ms(o);return a!==void 0&&(r[o]=a),r},{})),await ct.reconnectExternal(t),Rn.setLoading(!1,ee.state.activeChain),qn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:n,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(n){return ct._getClient()?.signMessage(n)},parseUnits(n,e){return ct._getClient()?.parseUnits(n,e)},formatUnits(n,e){return ct._getClient()?.formatUnits(n,e)},async sendTransaction(n){return ct._getClient()?.sendTransaction(n)},async getCapabilities(n){return ct._getClient()?.getCapabilities(n)},async grantPermissions(n){return ct._getClient()?.grantPermissions(n)},async walletGetAssets(n){return ct._getClient()?.walletGetAssets(n)??{}},async estimateGas(n){return ct._getClient()?.estimateGas(n)},async writeContract(n){return ct._getClient()?.writeContract(n)},async getEnsAddress(n){return ct._getClient()?.getEnsAddress(n)},async getEnsAvatar(n){return ct._getClient()?.getEnsAvatar(n)},checkInstalled(n){return ct._getClient()?.checkInstalled?.(n)||!1},resetWcConnection(){Tn.wcUri=void 0,Tn.wcPairingExpiry=void 0,Tn.wcLinking=void 0,Tn.recentWallet=void 0,Tn.status="disconnected",Am.resetTransactions(),je.deleteWalletConnectDeepLink()},resetUri(){Tn.wcUri=void 0,Tn.wcPairingExpiry=void 0,qh=void 0},finalizeWcConnection(){const{wcLinking:n,recentWallet:e}=ct.state;n&&je.setWalletConnectDeepLink(n),e&&je.setAppKitRecent(e),qn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:n?"mobile":"qrcode",name:Wt.state.data?.wallet?.name||"Unknown"}})},setWcBasic(n){Tn.wcBasic=n},setUri(n){Tn.wcUri=n,Tn.wcPairingExpiry=_t.getPairingExpiry()},setWcLinking(n){Tn.wcLinking=n},setWcError(n){Tn.wcError=n,Tn.buffering=!1},setRecentWallet(n){Tn.recentWallet=n},setBuffering(n){Tn.buffering=n},setStatus(n){Tn.status=n},setIsSwitchingConnection(n){Tn.isSwitchingConnection=n},async disconnect({id:n,namespace:e,initialDisconnect:t}={}){try{await ct._getClient()?.disconnect({id:n,chainNamespace:e,initialDisconnect:t})}catch(r){throw new _0("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(n,e){const t=new Map(Tn.connections);t.set(e,n),Tn.connections=t},async handleAuthAccountSwitch({address:n,namespace:e}){const t=At.state.user?.accounts?.find(i=>i.type==="smartAccount"),r=t&&t.address.toLowerCase()===n.toLowerCase()&&k1.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await ct.setPreferredAccountType(r,e)},async handleActiveConnection({connection:n,namespace:e,address:t}){const r=rt.getConnectorById(n.connectorId),i=n.connectorId===_e.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${n.connectorId}`);if(i)i&&t&&await ct.handleAuthAccountSwitch({address:t,namespace:e});else return(await ct.connectExternal({id:r.id,type:r.type,provider:r.provider,address:t,chain:e},e))?.address;return t},async handleDisconnectedConnection({connection:n,namespace:e,address:t,closeModalOnConnect:r}){const i=rt.getConnectorById(n.connectorId),s=n.auth?.name?.toLowerCase(),o=n.connectorId===_e.CONNECTOR_ID.AUTH,a=n.connectorId===_e.CONNECTOR_ID.WALLET_CONNECT;if(!i)throw new Error(`No connector found for connection: ${n.connectorId}`);let c;if(o)if(s&&k1.isSocialProvider(s)){const{address:l}=await k1.connectSocial({social:s,closeModalOnConnect:r,onOpenFarcaster(){Rn.open({view:"ConnectingFarcaster"})},onConnect(){Wt.replace("ProfileWallets")}});c=l}else{const{address:l}=await k1.connectEmail({closeModalOnConnect:r,onOpen(){Rn.open({view:"EmailLogin"})},onConnect(){Wt.replace("ProfileWallets")}});c=l}else if(a){const{address:l}=await k1.connectWalletConnect({walletConnect:!0,connector:i,closeModalOnConnect:r,onOpen(u){Rn.open({view:u?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Wt.replace("ProfileWallets")}});c=l}else{const l=await ct.connectExternal({id:i.id,type:i.type,provider:i.provider,chain:e},e);l&&(c=l.address)}return o&&t&&await ct.handleAuthAccountSwitch({address:t,namespace:e}),c},async switchConnection({connection:n,address:e,namespace:t,closeModalOnConnect:r,onChange:i}){let s;const o=At.getCaipAddress(t);if(o){const{address:c}=Es.parseCaipAddress(o);s=c}const a=tb.getConnectionStatus(n,t);switch(a){case"connected":case"active":{const c=await ct.handleActiveConnection({connection:n,namespace:t,address:e});if(s&&c){const l=c.toLowerCase()!==s.toLowerCase();i?.({address:c,namespace:t,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ct.handleDisconnectedConnection({connection:n,namespace:t,address:e,closeModalOnConnect:r});c&&i?.({address:c,namespace:t,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}},ct=ko(wte),jf=Qn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Oc={state:jf,subscribe(n){return _i(jf,()=>n(jf))},subscribeOpen(n){return Ei(jf,"open",n)},set(n){Object.assign(jf,{...jf,...n})}},vte={async getTokenList(){const n=ee.state.activeCaipNetwork;return(await Lt.fetchSwapTokens({chainId:n?.caipNetworkId}))?.tokens?.map(r=>({...r,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const n=ee.state.activeCaipNetwork;if(!n)return null;try{switch(n.chainNamespace){case"solana":const e=(await ct?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await Lt.fetchGasPrice({chainId:n.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:n,userAddress:e,sourceTokenAmount:t,sourceTokenDecimals:r}){const i=await Lt.fetchSwapAllowance({tokenAddress:n,userAddress:e});if(i?.allowance&&t&&r){const s=ct.parseUnits(t,r)||0;return BigInt(i.allowance)>=s}return!1},async getMyTokensWithBalance(n){const e=await z7.getMyTokensWithBalance(n);return At.setTokenBalance(e,ee.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(n){return n?.map(e=>({...e,address:e?.address?e.address:uF(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},zn=Qn({tokenBalances:[],loading:!1}),bte={state:zn,subscribe(n){return _i(zn,()=>n(zn))},subscribeKey(n,e){return Ei(zn,n,e)},setToken(n){n&&(zn.token=_h(n))},setTokenAmount(n){zn.sendTokenAmount=n},setReceiverAddress(n){zn.receiverAddress=n},setReceiverProfileImageUrl(n){zn.receiverProfileImageUrl=n},setReceiverProfileName(n){zn.receiverProfileName=n},setNetworkBalanceInUsd(n){zn.networkBalanceInUSD=n},setLoading(n){zn.loading=n},async sendToken(){try{switch(On.setLoading(!0),ee.state.activeCaipNetwork?.chainNamespace){case"eip155":await On.sendEvmToken();return;case"solana":await On.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{On.setLoading(!1)}},async sendEvmToken(){const n=ee.state.activeChain,e=Ms(n);if(!On.state.sendTokenAmount||!On.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!On.state.token)throw new Error("A token is required");On.state.token?.address?(qn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===ai.ACCOUNT_TYPES.SMART_ACCOUNT,token:On.state.token.address,amount:On.state.sendTokenAmount,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}),await On.sendERC20Token({receiverAddress:On.state.receiverAddress,tokenAddress:On.state.token.address,sendTokenAmount:On.state.sendTokenAmount,decimals:On.state.token.quantity.decimals})):(qn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===ai.ACCOUNT_TYPES.SMART_ACCOUNT,token:On.state.token.symbol||"",amount:On.state.sendTokenAmount,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}),await On.sendNativeToken({receiverAddress:On.state.receiverAddress,sendTokenAmount:On.state.sendTokenAmount,decimals:On.state.token.quantity.decimals}))},async fetchTokenBalance(n){zn.loading=!0;const e=ee.state.activeCaipNetwork?.caipNetworkId,t=ee.state.activeCaipNetwork?.chainNamespace,r=ee.state.activeCaipAddress,i=r?_t.getPlainAddress(r):void 0;if(zn.lastRetry&&!_t.isAllowedRetry(zn.lastRetry,30*Ln.ONE_SEC_MS))return zn.loading=!1,[];try{if(i&&e&&t){const s=await z7.getMyTokensWithBalance();return zn.tokenBalances=s,zn.lastRetry=void 0,s}}catch(s){zn.lastRetry=Date.now(),n?.(s),Ic.showError("Token Balance Unavailable")}finally{zn.loading=!1}return[]},fetchNetworkBalance(){if(zn.tokenBalances.length===0)return;const n=vte.mapBalancesToSwapTokens(zn.tokenBalances);if(!n)return;const e=n.find(t=>t.address===uF());e&&(zn.networkBalanceInUSD=e?zee.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(n){Wt.pushTransactionStack({});const e=n.receiverAddress,t=At.state.address,r=ct.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));await ct.sendTransaction({chainNamespace:"eip155",to:e,address:t,data:"0x",value:r??BigInt(0)}),qn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ms("eip155")===ai.ACCOUNT_TYPES.SMART_ACCOUNT,token:On.state.token?.symbol||"",amount:n.sendTokenAmount,network:ee.state.activeCaipNetwork?.caipNetworkId||""}}),ct._getClient()?.updateBalance("eip155"),On.resetSend()},async sendERC20Token(n){Wt.pushTransactionStack({onSuccess(){Wt.replace("Account")}});const e=ct.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));if(At.state.address&&n.sendTokenAmount&&n.receiverAddress&&n.tokenAddress){const t=_t.getPlainAddress(n.tokenAddress);await ct.writeContract({fromAddress:At.state.address,tokenAddress:t,args:[n.receiverAddress,e??BigInt(0)],method:"transfer",abi:qee.getERC20Abi(t),chainNamespace:"eip155"}),On.resetSend()}},async sendSolanaToken(){if(!On.state.sendTokenAmount||!On.state.receiverAddress)throw new Error("An amount and receiver address are required");Wt.pushTransactionStack({onSuccess(){Wt.replace("Account")}}),await ct.sendTransaction({chainNamespace:"solana",to:On.state.receiverAddress,value:On.state.sendTokenAmount}),ct._getClient()?.updateBalance("solana"),On.resetSend()},resetSend(){zn.token=void 0,zn.sendTokenAmount=void 0,zn.receiverAddress=void 0,zn.receiverProfileImageUrl=void 0,zn.receiverProfileName=void 0,zn.loading=!1,zn.tokenBalances=[]}},On=ko(bte),DE={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},uw={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ut=Qn({chains:Nee(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),_te={state:ut,subscribe(n){return _i(ut,()=>{n(ut)})},subscribeKey(n,e){return Ei(ut,n,e)},subscribeChainProp(n,e,t){let r;return _i(ut.chains,()=>{const i=t||ut.activeChain;if(i){const s=ut.chains.get(i)?.[n];r!==s&&(r=s,e(s))}})},initialize(n,e,t){const{chainId:r,namespace:i}=je.getActiveNetworkProps(),s=e?.find(u=>u.id.toString()===r?.toString()),a=n.find(u=>u?.namespace===i)||n?.[0],c=n.map(u=>u.namespace).filter(u=>u!==void 0),l=Fe.state.enableEmbedded?new Set([...c]):new Set([...e?.map(u=>u.chainNamespace)??[]]);(n?.length===0||!a)&&(ut.noAdapters=!0),ut.noAdapters||(ut.activeChain=a?.namespace,ut.activeCaipNetwork=s,ee.setChainNetworkData(a?.namespace,{caipNetwork:s}),ut.activeChain&&Oc.set({activeChain:a?.namespace})),l.forEach(u=>{const h=e?.filter(p=>p.chainNamespace===u),d=je.getPreferredAccountTypes()||{},f={...Fe.state.defaultAccountTypes,...d};ee.state.chains.set(u,{namespace:u,networkState:Qn({...uw,caipNetwork:h?.[0]}),accountState:Qn({...DE,preferredAccountType:f[u]}),caipNetworks:h??[],...t}),ee.setRequestedCaipNetworks(h??[],u)})},removeAdapter(n){if(ut.activeChain===n){const e=Array.from(ut.chains.entries()).find(([t])=>t!==n);if(e){const t=e[1]?.caipNetworks?.[0];t&&ee.setActiveCaipNetwork(t)}}ut.chains.delete(n)},addAdapter(n,{networkControllerClient:e,connectionControllerClient:t},r){ut.chains.set(n.namespace,{namespace:n.namespace,networkState:{...uw,caipNetwork:r[0]},accountState:DE,caipNetworks:r,connectionControllerClient:t,networkControllerClient:e}),ee.setRequestedCaipNetworks(r?.filter(i=>i.chainNamespace===n.namespace)??[],n.namespace)},addNetwork(n){const e=ut.chains.get(n.chainNamespace);if(e){const t=[...e.caipNetworks||[]];e.caipNetworks?.find(r=>r.id===n.id)||t.push(n),ut.chains.set(n.chainNamespace,{...e,caipNetworks:t}),ee.setRequestedCaipNetworks(t,n.chainNamespace),rt.filterByNamespace(n.chainNamespace,!0)}},removeNetwork(n,e){const t=ut.chains.get(n);if(t){const r=ut.activeCaipNetwork?.id===e,i=[...t.caipNetworks?.filter(s=>s.id!==e)||[]];r&&t?.caipNetworks?.[0]&&ee.setActiveCaipNetwork(t.caipNetworks[0]),ut.chains.set(n,{...t,caipNetworks:i}),ee.setRequestedCaipNetworks(i||[],n),i.length===0&&rt.filterByNamespace(n,!1)}},setAdapterNetworkState(n,e){const t=ut.chains.get(n);t&&(t.networkState={...t.networkState||uw,...e},ut.chains.set(n,t))},setChainAccountData(n,e,t=!0){if(!n)throw new Error("Chain is required to update chain account data");const r=ut.chains.get(n);if(r){const i={...r.accountState||DE,...e};ut.chains.set(n,{...r,accountState:i}),(ut.chains.size===1||ut.activeChain===n)&&(e.caipAddress&&(ut.activeCaipAddress=e.caipAddress),At.replaceState(i))}},setChainNetworkData(n,e){if(!n)return;const t=ut.chains.get(n);if(t){const r={...t.networkState||uw,...e};ut.chains.set(n,{...t,networkState:r})}},setAccountProp(n,e,t,r=!0){ee.setChainAccountData(t,{[n]:e},r)},setActiveNamespace(n){ut.activeChain=n;const e=n?ut.chains.get(n):void 0,t=e?.networkState?.caipNetwork;t?.id&&n&&(ut.activeCaipAddress=e?.accountState?.caipAddress,ut.activeCaipNetwork=t,ee.setChainNetworkData(n,{caipNetwork:t}),je.setActiveCaipNetworkId(t?.caipNetworkId),Oc.set({activeChain:n,selectedNetworkId:t?.caipNetworkId}))},setActiveCaipNetwork(n){if(!n)return;ut.activeChain!==n.chainNamespace&&ee.setIsSwitchingNamespace(!0);const e=ut.chains.get(n.chainNamespace);ut.activeChain=n.chainNamespace,ut.activeCaipNetwork=n,ee.setChainNetworkData(n.chainNamespace,{caipNetwork:n}),e?.accountState?.address?ut.activeCaipAddress=`${n.chainNamespace}:${n.id}:${e?.accountState?.address}`:ut.activeCaipAddress=void 0,ee.setAccountProp("caipAddress",ut.activeCaipAddress,n.chainNamespace),e&&At.replaceState(e.accountState),On.resetSend(),Oc.set({activeChain:ut.activeChain,selectedNetworkId:ut.activeCaipNetwork?.caipNetworkId}),je.setActiveCaipNetworkId(n.caipNetworkId),!ee.checkIfSupportedNetwork(n.chainNamespace)&&Fe.state.enableNetworkSwitch&&!Fe.state.allowUnsupportedChain&&!ct.state.wcBasic&&ee.showUnsupportedChainUI()},addCaipNetwork(n){if(!n)return;const e=ut.chains.get(n.chainNamespace);e&&e?.caipNetworks?.push(n)},async switchActiveNamespace(n){if(!n)return;const e=n!==ee.state.activeChain,t=ee.getNetworkData(n)?.caipNetwork,r=ee.getCaipNetworkByNamespace(n,t?.id);e&&r&&await ee.switchActiveNetwork(r)},async switchActiveNetwork(n){const t=!ee.state.chains.get(ee.state.activeChain)?.caipNetworks?.some(i=>i.id===ut.activeCaipNetwork?.id),r=ee.getNetworkControllerClient(n.chainNamespace);if(r){try{await r.switchCaipNetwork(n),t&&Rn.close()}catch{Wt.goBack()}qn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:n.caipNetworkId}})}},getNetworkControllerClient(n){const e=n||ut.activeChain,t=ut.chains.get(e);if(!t)throw new Error("Chain adapter not found");if(!t.networkControllerClient)throw new Error("NetworkController client not set");return t.networkControllerClient},getConnectionControllerClient(n){const e=n||ut.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const t=ut.chains.get(e);if(!t?.connectionControllerClient)throw new Error("ConnectionController client not set");return t.connectionControllerClient},getAccountProp(n,e){let t=ut.activeChain;if(e&&(t=e),!t)return;const r=ut.chains.get(t)?.accountState;if(r)return r[n]},getNetworkProp(n,e){const t=ut.chains.get(e)?.networkState;if(t)return t[n]},getRequestedCaipNetworks(n){const e=ut.chains.get(n),{approvedCaipNetworkIds:t=[],requestedCaipNetworks:r=[]}=e?.networkState||{};return _t.sortRequestedNetworks(t,r)},getAllRequestedCaipNetworks(){const n=[];return ut.chains.forEach(e=>{const t=ee.getRequestedCaipNetworks(e.namespace);n.push(...t)}),n},setRequestedCaipNetworks(n,e){ee.setAdapterNetworkState(e,{requestedCaipNetworks:n});const r=ee.getAllRequestedCaipNetworks().map(s=>s.chainNamespace),i=Array.from(new Set(r));rt.filterByNamespaces(i)},getAllApprovedCaipNetworkIds(){const n=[];return ut.chains.forEach(e=>{const t=ee.getApprovedCaipNetworkIds(e.namespace);n.push(...t)}),n},getActiveCaipNetwork(n){return n?ut.chains.get(n)?.networkState?.caipNetwork:ut.activeCaipNetwork},getActiveCaipAddress(){return ut.activeCaipAddress},getApprovedCaipNetworkIds(n){return ut.chains.get(n)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(n){const t=await ee.getNetworkControllerClient()?.getApprovedCaipNetworksData();ee.setAdapterNetworkState(n,{approvedCaipNetworkIds:t?.approvedCaipNetworkIds,supportsAllNetworks:t?.supportsAllNetworks})},checkIfSupportedNetwork(n,e){const t=e||ut.activeCaipNetwork,r=ee.getRequestedCaipNetworks(n);return r.length?r?.some(i=>i.id===t?.id):!0},checkIfSupportedChainId(n){return ut.activeChain?ee.getRequestedCaipNetworks(ut.activeChain)?.some(t=>t.id===n):!0},setSmartAccountEnabledNetworks(n,e){ee.setAdapterNetworkState(e,{smartAccountEnabledNetworks:n})},checkIfSmartAccountEnabled(){const n=Hg.caipNetworkIdToNumber(ut.activeCaipNetwork?.caipNetworkId),e=ut.activeChain;return!e||!n?!1:!!ee.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(n))},showUnsupportedChainUI(){Rn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const n=ut.activeCaipNetwork;return!!(n?.chainNamespace&&Ln.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(n.chainNamespace))},resetNetwork(n){ee.setAdapterNetworkState(n,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(n){const e=n;if(!e)throw new Error("Chain is required to set account prop");const t=ee.getAccountProp("preferredAccountType",e);ut.activeCaipAddress=void 0,ee.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:t,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),rt.removeConnectorId(e)},setIsSwitchingNamespace(n){ut.isSwitchingNamespace=n},getFirstCaipNetworkSupportsAuthConnector(){const n=[];let e;if(ut.chains.forEach(t=>{_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(r=>r===t.namespace)&&t.namespace&&n.push(t.namespace)}),n.length>0){const t=n[0];return e=t?ut.chains.get(t)?.caipNetworks?.[0]:void 0,e}},getAccountData(n){return n?ee.state.chains.get(n)?.accountState:At.state},getNetworkData(n){const e=n||ut.activeChain;if(e)return ee.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(n,e){if(!n)return;const t=ee.state.chains.get(n),r=t?.caipNetworks?.find(i=>i.id===e);return r||t?.networkState?.caipNetwork||t?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const n=rt.state.filterByNamespace;return(n?[ut.chains.get(n)]:Array.from(ut.chains.values())).flatMap(t=>t?.caipNetworks||[]).map(t=>t.caipNetworkId)},getCaipNetworks(n){return n?ee.getRequestedCaipNetworks(n):ee.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(n){ut.lastConnectedSIWECaipNetwork=n},getLastConnectedSIWECaipNetwork(){return ut.lastConnectedSIWECaipNetwork}},ee=ko(_te),Ete={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},hF=_t.getBlockchainApiUrl(),Us=Qn({clientId:null,api:new yy({baseUrl:hF,clientId:null}),supportedChains:{http:[],ws:[]}}),Lt={state:Us,async get(n){const{st:e,sv:t}=Lt.getSdkProperties(),r=Fe.state.projectId,i={...n.params||{},st:e,sv:t,projectId:r};return Us.api.get({...n,params:i})},getSdkProperties(){const{sdkType:n,sdkVersion:e}=Fe.state;return{st:n||"unknown",sv:e||"unknown"}},async isNetworkSupported(n){if(!n)return!1;try{Us.supportedChains.http.length||await Lt.getSupportedNetworks()}catch{return!1}return Us.supportedChains.http.includes(n)},async getSupportedNetworks(){try{const n=await Lt.get({path:"v1/supported-chains"});return Us.supportedChains=n,n}catch{return Us.supportedChains}},async fetchIdentity({address:n,caipNetworkId:e}){if(!await Lt.isNetworkSupported(e))return{avatar:"",name:""};const r=je.getIdentityFromCacheForAddress(n);if(r)return r;const i=await Lt.get({path:`/v1/identity/${n}`,params:{sender:ee.state.activeCaipAddress?_t.getPlainAddress(ee.state.activeCaipAddress):void 0}});return je.updateIdentityCache({address:n,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:n,cursor:e,onramp:t,signal:r,cache:i,chainId:s}){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Lt.get({path:`/v1/account/${n}/history`,params:{cursor:e,onramp:t,chainId:s},signal:r,cache:i}):{data:[],next:void 0}},async fetchSwapQuote({amount:n,userAddress:e,from:t,to:r,gasPrice:i}){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Lt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:n,userAddress:e,from:t,to:r,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:n}){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Lt.get({path:"/v1/convert/tokens",params:{chainId:n}}):{tokens:[]}},async fetchTokenPrice({addresses:n}){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Us.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:n,projectId:Fe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:n,userAddress:e}){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Lt.get({path:"/v1/convert/allowance",params:{tokenAddress:n,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:n}){const{st:e,sv:t}=Lt.getSdkProperties();if(!await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return Lt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:n,st:e,sv:t}})},async generateSwapCalldata({amount:n,from:e,to:t,userAddress:r,disableEstimate:i}){if(!await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Us.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:n,eip155:{slippage:Ln.CONVERT_SLIPPAGE_TOLERANCE},projectId:Fe.state.projectId,from:e,to:t,userAddress:r,disableEstimate:i}})},async generateApproveCalldata({from:n,to:e,userAddress:t}){const{st:r,sv:i}=Lt.getSdkProperties();if(!await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Lt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:t,from:n,to:e,st:r,sv:i}})},async getBalance(n,e,t){const{st:r,sv:i}=Lt.getSdkProperties();if(!await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return Ic.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${n}`,a=je.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Lt.get({path:`/v1/account/${n}/balance`,params:{currency:"usd",chainId:e,forceUpdate:t,st:r,sv:i}});return je.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(n){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Lt.get({path:`/v1/profile/account/${n}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:n}){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Lt.get({path:`/v1/profile/reverse/${n}`,params:{sender:At.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(n){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Lt.get({path:`/v1/profile/suggestions/${n}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:n,address:e,message:t,signature:r}){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Us.api.post({path:"/v1/profile/account",body:{coin_type:n,address:e,message:t,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:n,partnerUserId:e,defaultNetwork:t,purchaseAmount:r,paymentAmount:i}){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?(await Us.api.post({path:"/v1/generators/onrampurl",params:{projectId:Fe.state.projectId},body:{destinationWallets:n,defaultNetwork:t,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:i}})).url:""},async getOnrampOptions(){if(!await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Lt.get({path:"/v1/onramp/options"})}catch{return Ete}},async getOnrampQuote({purchaseCurrency:n,paymentCurrency:e,amount:t,network:r}){try{return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?await Us.api.post({path:"/v1/onramp/quote",params:{projectId:Fe.state.projectId},body:{purchaseCurrency:n,paymentCurrency:e,amount:t,network:r}}):null}catch{return{coinbaseFee:{amount:t,currency:e.id},networkFee:{amount:t,currency:e.id},paymentSubtotal:{amount:t,currency:e.id},paymentTotal:{amount:t,currency:e.id},purchaseAmount:{amount:t,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(n){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Lt.get({path:`/v1/sessions/${n}`}):[]},async revokeSmartSession(n,e,t){return await Lt.isNetworkSupported(ee.state.activeCaipNetwork?.caipNetworkId)?Us.api.post({path:`/v1/sessions/${n}/revoke`,params:{projectId:Fe.state.projectId},body:{pci:e,signature:t}}):{success:!1}},setClientId(n){Us.clientId=n,Us.api=new yy({baseUrl:hF,clientId:n})}},xte="1.0.8";let da=class nS extends Error{constructor(e,t={}){const r=t.cause instanceof nS?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof nS&&t.cause.docsPath||t.docsPath,s=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${xte}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}};function ou(n,e){return n.exec(e)?.groups}const dF=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,fF=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,pF=/^\(.+?\).*?$/,IM=/^tuple(?<array>(\[(\d*)\])*)$/;function rS(n){let e=n.type;if(IM.test(n.type)&&"components"in n){e="(";const t=n.components.length;for(let i=0;i<t;i++){const s=n.components[i];e+=rS(s),i<t-1&&(e+=", ")}const r=ou(IM,n.type);return e+=`)${r?.array??""}`,rS({...n,type:e})}return"indexed"in n&&n.indexed&&(e=`${e} indexed`),n.name?`${e} ${n.name}`:e}function D1(n){let e="";const t=n.length;for(let r=0;r<t;r++){const i=n[r];e+=rS(i),r!==t-1&&(e+=", ")}return e}function Ste(n){return n.type==="function"?`function ${n.name}(${D1(n.inputs)})${n.stateMutability&&n.stateMutability!=="nonpayable"?` ${n.stateMutability}`:""}${n.outputs?.length?` returns (${D1(n.outputs)})`:""}`:n.type==="event"?`event ${n.name}(${D1(n.inputs)})`:n.type==="error"?`error ${n.name}(${D1(n.inputs)})`:n.type==="constructor"?`constructor(${D1(n.inputs)})${n.stateMutability==="payable"?" payable":""}`:n.type==="fallback"?`fallback() external${n.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const mF=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Ate(n){return mF.test(n)}function Cte(n){return ou(mF,n)}const gF=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Tte(n){return gF.test(n)}function Ite(n){return ou(gF,n)}const yF=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Mte(n){return yF.test(n)}function Rte(n){return ou(yF,n)}const wF=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function vF(n){return wF.test(n)}function Pte(n){return ou(wF,n)}const bF=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Nte(n){return bF.test(n)}function Ote(n){return ou(bF,n)}const _F=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function kte(n){return _F.test(n)}function Dte(n){return ou(_F,n)}const Lte=/^receive\(\) external payable$/;function Ute(n){return Lte.test(n)}const Bte=new Set(["indexed"]),iS=new Set(["calldata","memory","storage"]);class Fte extends da{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class $te extends da{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class zte extends da{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Hte extends da{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Vte extends da{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Wte extends da{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class qte extends da{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Q0 extends da{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class jte extends da{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Gte extends da{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Kte extends da{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Yte extends da{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Xte(n,e,t){let r="";if(t)for(const i of Object.entries(t)){if(!i)continue;let s="";for(const o of i[1])s+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${i[0]}{${s}})`}return e?`${e}:${n}${r}`:n}const LE=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Zte(n,e={}){if(Mte(n))return Jte(n,e);if(Tte(n))return Qte(n,e);if(Ate(n))return ene(n,e);if(Nte(n))return tne(n,e);if(kte(n))return nne(n);if(Ute(n))return{type:"receive",stateMutability:"payable"};throw new jte({signature:n})}function Jte(n,e={}){const t=Rte(n);if(!t)throw new Q0({signature:n,type:"function"});const r=Oa(t.parameters),i=[],s=r.length;for(let a=0;a<s;a++)i.push(sf(r[a],{modifiers:iS,structs:e,type:"function"}));const o=[];if(t.returns){const a=Oa(t.returns),c=a.length;for(let l=0;l<c;l++)o.push(sf(a[l],{modifiers:iS,structs:e,type:"function"}))}return{name:t.name,type:"function",stateMutability:t.stateMutability??"nonpayable",inputs:i,outputs:o}}function Qte(n,e={}){const t=Ite(n);if(!t)throw new Q0({signature:n,type:"event"});const r=Oa(t.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(sf(r[o],{modifiers:Bte,structs:e,type:"event"}));return{name:t.name,type:"event",inputs:i}}function ene(n,e={}){const t=Cte(n);if(!t)throw new Q0({signature:n,type:"error"});const r=Oa(t.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(sf(r[o],{structs:e,type:"error"}));return{name:t.name,type:"error",inputs:i}}function tne(n,e={}){const t=Ote(n);if(!t)throw new Q0({signature:n,type:"constructor"});const r=Oa(t.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(sf(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:t.stateMutability??"nonpayable",inputs:i}}function nne(n){const e=Dte(n);if(!e)throw new Q0({signature:n,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const rne=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ine=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,sne=/^u?int$/;function sf(n,e){const t=Xte(n,e?.type,e?.structs);if(LE.has(t))return LE.get(t);const r=pF.test(n),i=ou(r?ine:rne,n);if(!i)throw new zte({param:n});if(i.name&&ane(i.name))throw new Hte({param:n,name:i.name});const s=i.name?{name:i.name}:{},o=i.modifier==="indexed"?{indexed:!0}:{},a=e?.structs??{};let c,l={};if(r){c="tuple";const h=Oa(i.type),d=[],f=h.length;for(let p=0;p<f;p++)d.push(sf(h[p],{structs:a}));l={components:d}}else if(i.type in a)c="tuple",l={components:a[i.type]};else if(sne.test(i.type))c=`${i.type}256`;else if(c=i.type,e?.type!=="struct"&&!EF(c))throw new $te({type:c});if(i.modifier){if(!e?.modifiers?.has?.(i.modifier))throw new Vte({param:n,type:e?.type,modifier:i.modifier});if(iS.has(i.modifier)&&!cne(c,!!i.array))throw new Wte({param:n,type:e?.type,modifier:i.modifier})}const u={type:`${c}${i.array??""}`,...s,...o,...l};return LE.set(t,u),u}function Oa(n,e=[],t="",r=0){const i=n.trim().length;for(let s=0;s<i;s++){const o=n[s],a=n.slice(s+1);switch(o){case",":return r===0?Oa(a,[...e,t.trim()]):Oa(a,e,`${t}${o}`,r);case"(":return Oa(a,e,`${t}${o}`,r+1);case")":return Oa(a,e,`${t}${o}`,r-1);default:return Oa(a,e,`${t}${o}`,r)}}if(t==="")return e;if(r!==0)throw new Yte({current:t,depth:r});return e.push(t.trim()),e}function EF(n){return n==="address"||n==="bool"||n==="function"||n==="string"||dF.test(n)||fF.test(n)}const one=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function ane(n){return n==="address"||n==="bool"||n==="function"||n==="string"||n==="tuple"||dF.test(n)||fF.test(n)||one.test(n)}function cne(n,e){return e||n==="bytes"||n==="string"||n==="tuple"}function lne(n){const e={},t=n.length;for(let o=0;o<t;o++){const a=n[o];if(!vF(a))continue;const c=Pte(a);if(!c)throw new Q0({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],h=l.length;for(let d=0;d<h;d++){const p=l[d].trim();if(!p)continue;const m=sf(p,{type:"struct"});u.push(m)}if(!u.length)throw new Gte({signature:a});e[c.name]=u}const r={},i=Object.entries(e),s=i.length;for(let o=0;o<s;o++){const[a,c]=i[o];r[a]=xF(c,e)}return r}const une=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function xF(n,e,t=new Set){const r=[],i=n.length;for(let s=0;s<i;s++){const o=n[s];if(pF.test(o.type))r.push(o);else{const c=ou(une,o.type);if(!c?.type)throw new qte({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(t.has(u))throw new Kte({type:u});r.push({...o,type:`tuple${l??""}`,components:xF(e[u]??[],e,new Set([...t,u]))})}else if(EF(u))r.push(o);else throw new Fte({type:u})}}return r}function SF(n){const e=lne(n),t=[],r=n.length;for(let i=0;i<r;i++){const s=n[i];vF(s)||t.push(Zte(s,e))}return t}function wr(n,e,t){const r=n[e.name];if(typeof r=="function")return r;const i=n[t];return typeof i=="function"?i:s=>e(n,s)}function Eh(n,{includeName:e=!1}={}){if(n.type!=="function"&&n.type!=="event"&&n.type!=="error")throw new Ene(n.type);return`${n.name}(${h5(n.inputs,{includeName:e})})`}function h5(n,{includeName:e=!1}={}){return n?n.map(t=>hne(t,{includeName:e})).join(e?", ":","):""}function hne(n,{includeName:e}){return n.type.startsWith("tuple")?`(${h5(n.components,{includeName:e})})${n.type.slice(5)}`:n.type+(e&&n.name?` ${n.name}`:"")}function xh(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function Yr(n){return xh(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const AF="2.31.6";let UE={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${AF}`},We=class sS extends Error{constructor(e,t={}){const r=t.cause instanceof sS?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof sS&&t.cause.docsPath||t.docsPath,s=UE.getDocsUrl?.({...t,docsPath:i}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...UE.version?[`Version: ${UE.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=AF}walk(e){return CF(this,e)}};function CF(n,e){return e?.(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?CF(n.cause,e):e?null:n}class dne extends We{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class MM extends We{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class TF extends We{constructor({data:e,params:t,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${h5(t,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=r}}class d5 extends We{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class fne extends We{constructor({expectedLength:e,givenLength:t,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${t}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class pne extends We{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Yr(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class mne extends We{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Tqe extends We{constructor(e,{docsPath:t}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:t,name:"AbiErrorInputsNotFoundError"})}}class Iqe extends We{constructor(e,{docsPath:t}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:t,name:"AbiErrorNotFoundError"})}}class IF extends We{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class gne extends We{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class MF extends We{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiEventSignatureNotFoundError"})}}class nb extends We{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class yne extends We{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}}class Mqe extends We{constructor(e,{docsPath:t}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiFunctionSignatureNotFoundError"})}}class wne extends We{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Eh(e.abiItem)}\`, and`,`\`${t.type}\` in \`${Eh(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class Rqe extends We{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}}class oS extends We{constructor({abiItem:e,data:t,params:r,size:i}){super([`Data size of ${i} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${h5(r,{includeName:!0})})`,`Data:   ${t} (${i} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=r,this.size=i}}class RF extends We{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${Eh(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class vne extends We{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiEncodingType"})}}class bne extends We{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiDecodingType"})}}class _ne extends We{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class Ene extends We{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class PF extends We{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let NF=class extends We{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};class RM extends We{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${t} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function e1(n,{dir:e,size:t=32}={}){return typeof n=="string"?uh(n,{dir:e,size:t}):xne(n,{dir:e,size:t})}function uh(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new NF({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function xne(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new NF({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let i=0;i<t;i++){const s=e==="right";r[s?i:t-i-1]=n[s?i:n.length-i-1]}return r}let OF=class extends We{constructor({max:e,min:t,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}};class Sne extends We{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let Ane=class extends We{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Gl(n,{dir:e="left"}={}){let t=typeof n=="string"?n.replace("0x",""):n,r=0;for(let i=0;i<t.length-1&&t[e==="left"?i:t.length-i-1].toString()==="0";i++)r++;return t=e==="left"?t.slice(r):t.slice(0,t.length-r),typeof n=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}function tc(n,{size:e}){if(Yr(n)>e)throw new Ane({givenSize:Yr(n),maxSize:e})}function ka(n,e={}){const{signed:t}=e;e.size&&tc(n,{size:e.size});const r=BigInt(n);if(!t)return r;const i=(n.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Sh(n,e={}){return Number(ka(n,e))}function kF(n,e={}){let t=Fc(n);return e.size&&(tc(t,{size:e.size}),t=Gl(t,{dir:"right"})),new TextDecoder().decode(t)}const Cne=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Ha(n,e={}){return typeof n=="number"||typeof n=="bigint"?mt(n,e):typeof n=="string"?f5(n,e):typeof n=="boolean"?DF(n,e):Rs(n,e)}function DF(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(tc(t,{size:e.size}),e1(t,{size:e.size})):t}function Rs(n,e={}){let t="";for(let i=0;i<n.length;i++)t+=Cne[n[i]];const r=`0x${t}`;return typeof e.size=="number"?(tc(r,{size:e.size}),e1(r,{dir:"right",size:e.size})):r}function mt(n,e={}){const{signed:t,size:r}=e,i=BigInt(n);let s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&t?-s-1n:0;if(s&&i>s||i<o){const c=typeof n=="bigint"?"n":"";throw new OF({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:t,size:r,value:`${n}${c}`})}const a=`0x${(t&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?e1(a,{size:r}):a}const Tne=new TextEncoder;function f5(n,e={}){const t=Tne.encode(n);return Rs(t,e)}const Ine=new TextEncoder;function p5(n,e={}){return typeof n=="number"||typeof n=="bigint"?Rne(n,e):typeof n=="boolean"?Mne(n,e):xh(n)?Fc(n,e):LF(n,e)}function Mne(n,e={}){const t=new Uint8Array(1);return t[0]=Number(n),typeof e.size=="number"?(tc(t,{size:e.size}),e1(t,{size:e.size})):t}const il={zero:48,nine:57,A:65,F:70,a:97,f:102};function PM(n){if(n>=il.zero&&n<=il.nine)return n-il.zero;if(n>=il.A&&n<=il.F)return n-(il.A-10);if(n>=il.a&&n<=il.f)return n-(il.a-10)}function Fc(n,e={}){let t=n;e.size&&(tc(t,{size:e.size}),t=e1(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=PM(r.charCodeAt(a++)),l=PM(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new We(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[o]=c*16+l}return s}function Rne(n,e){const t=mt(n,e);return Fc(t)}function LF(n,e={}){const t=Ine.encode(n);return typeof e.size=="number"?(tc(t,{size:e.size}),e1(t,{dir:"right",size:e.size})):t}const hw=BigInt(2**32-1),NM=BigInt(32);function Pne(n,e=!1){return e?{h:Number(n&hw),l:Number(n>>NM&hw)}:{h:Number(n>>NM&hw)|0,l:Number(n&hw)|0}}function UF(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:a}=Pne(n[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const OM=(n,e,t)=>n>>>t,kM=(n,e,t)=>n<<32-t|e>>>t,Gf=(n,e,t)=>n>>>t|e<<32-t,Kf=(n,e,t)=>n<<32-t|e>>>t,dw=(n,e,t)=>n<<64-t|e>>>t-32,fw=(n,e,t)=>n>>>t-32|e<<64-t,Nne=(n,e,t)=>n<<t|e>>>32-t,One=(n,e,t)=>e<<t|n>>>32-t,kne=(n,e,t)=>e<<t-32|n>>>64-t,Dne=(n,e,t)=>n<<t-32|e>>>64-t;function sl(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const Lne=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Une=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Bne=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Fne=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,$ne=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),zne=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Yf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function c7(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Vg(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function la(n,...e){if(!c7(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function Hne(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Vg(n.outputLen),Vg(n.blockLen)}function x0(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function BF(n,e){la(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Vne(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Ah(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function BE(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ac(n,e){return n<<32-e|n>>>e}const Wne=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function qne(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function jne(n){for(let e=0;e<n.length;e++)n[e]=qne(n[e]);return n}const DM=Wne?n=>n:jne,FF=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Gne=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function S0(n){if(la(n),FF)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=Gne[n[t]];return e}const ol={_0:48,_9:57,A:65,F:70,a:97,f:102};function LM(n){if(n>=ol._0&&n<=ol._9)return n-ol._0;if(n>=ol.A&&n<=ol.F)return n-(ol.A-10);if(n>=ol.a&&n<=ol.f)return n-(ol.a-10)}function l7(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(FF)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=LM(n.charCodeAt(s)),a=LM(n.charCodeAt(s+1));if(o===void 0||a===void 0){const c=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Kne(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function m5(n){return typeof n=="string"&&(n=Kne(n)),la(n),n}function Dl(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];la(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}class u7{}function h7(n){const e=r=>n().update(m5(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function $F(n=32){if(Yf&&typeof Yf.getRandomValues=="function")return Yf.getRandomValues(new Uint8Array(n));if(Yf&&typeof Yf.randomBytes=="function")return Uint8Array.from(Yf.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const Yne=BigInt(0),L1=BigInt(1),Xne=BigInt(2),Zne=BigInt(7),Jne=BigInt(256),Qne=BigInt(113),zF=[],HF=[],VF=[];for(let n=0,e=L1,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],zF.push(2*(5*r+t)),HF.push((n+1)*(n+2)/2%64);let i=Yne;for(let s=0;s<7;s++)e=(e<<L1^(e>>Zne)*Qne)%Jne,e&Xne&&(i^=L1<<(L1<<BigInt(s))-L1);VF.push(i)}const WF=UF(VF,!0),ere=WF[0],tre=WF[1],UM=(n,e,t)=>t>32?kne(n,e,t):Nne(n,e,t),BM=(n,e,t)=>t>32?Dne(n,e,t):One(n,e,t);function nre(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],h=UM(l,u,1)^t[a],d=BM(l,u,1)^t[a+1];for(let f=0;f<50;f+=10)n[o+f]^=h,n[o+f+1]^=d}let i=n[2],s=n[3];for(let o=0;o<24;o++){const a=HF[o],c=UM(i,s,a),l=BM(i,s,a),u=zF[o];i=n[u],s=n[u+1],n[u]=c,n[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=ere[r],n[1]^=tre[r]}Ah(t)}class d7 extends u7{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,Vg(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Vne(this.state)}clone(){return this._cloneInto()}keccak(){DM(this.state32),nre(this.state32,this.rounds),DM(this.state32),this.posOut=0,this.pos=0}update(e){x0(this),e=m5(e),la(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){x0(this,!1),la(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Vg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(BF(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ah(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new d7(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const rre=(n,e,t)=>h7(()=>new d7(e,n,t)),qF=rre(1,136,256/8);function wy(n,e){const t=e||"hex",r=qF(xh(n,{strict:!1})?p5(n):n);return t==="bytes"?r:Ha(r)}const ire=n=>wy(p5(n));function sre(n){return ire(n)}function ore(n){let e=!0,t="",r=0,i="",s=!1;for(let o=0;o<n.length;o++){const a=n[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(i))i="";else if(i+=a,a===")"){s=!0;break}continue}if(a===" "){n[o-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}i+=a,t+=a}}if(!s)throw new We("Unable to normalize signature.");return i}const are=n=>{const e=typeof n=="string"?n:Ste(n);return ore(e)};function jF(n){return sre(are(n))}const f7=jF;class ao extends We{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let g5=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const FE=new g5(8192);function y5(n,e){if(FE.has(`${n}.${e}`))return FE.get(`${n}.${e}`);const t=e?`${e}${n.toLowerCase()}`:n.substring(2).toLowerCase(),r=wy(LF(t),"bytes"),i=(e?t.substring(`${e}0x`.length):t).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(r[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return FE.set(`${n}.${e}`,s),s}function Td(n,e){if(!$i(n,{strict:!1}))throw new ao({address:n});return y5(n,e)}const cre=/^0x[a-fA-F0-9]{40}$/,$E=new g5(8192);function $i(n,e){const{strict:t=!0}=e??{},r=`${n}.${t}`;if($E.has(r))return $E.get(r);const i=cre.test(n)?n.toLowerCase()===n?!0:t?y5(n)===n:!0:!1;return $E.set(r,i),i}function A0(n){return typeof n[0]=="string"?au(n):lre(n)}function lre(n){let e=0;for(const i of n)e+=i.length;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}function au(n){return`0x${n.reduce((e,t)=>e+t.replace("0x",""),"")}`}function Wg(n,e,t,{strict:r}={}){return xh(n,{strict:!1})?ure(n,e,t,{strict:r}):YF(n,e,t,{strict:r})}function GF(n,e){if(typeof e=="number"&&e>0&&e>Yr(n)-1)throw new PF({offset:e,position:"start",size:Yr(n)})}function KF(n,e,t){if(typeof e=="number"&&typeof t=="number"&&Yr(n)!==t-e)throw new PF({offset:t,position:"end",size:Yr(n)})}function YF(n,e,t,{strict:r}={}){GF(n,e);const i=n.slice(e,t);return r&&KF(i,e,t),i}function ure(n,e,t,{strict:r}={}){GF(n,e);const i=`0x${n.replace("0x","").slice((e??0)*2,(t??n.length)*2)}`;return r&&KF(i,e,t),i}const Dqe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,hre=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function XF(n,e){if(n.length!==e.length)throw new mne({expectedLength:n.length,givenLength:e.length});const t=dre({params:n,values:e}),r=m7(t);return r.length===0?"0x":r}function dre({params:n,values:e}){const t=[];for(let r=0;r<n.length;r++)t.push(p7({param:n[r],value:e[r]}));return t}function p7({param:n,value:e}){const t=g7(n.type);if(t){const[r,i]=t;return pre(e,{length:r,param:{...n,type:i}})}if(n.type==="tuple")return vre(e,{param:n});if(n.type==="address")return fre(e);if(n.type==="bool")return gre(e);if(n.type.startsWith("uint")||n.type.startsWith("int")){const r=n.type.startsWith("int"),[,,i="256"]=hre.exec(n.type)??[];return yre(e,{signed:r,size:Number(i)})}if(n.type.startsWith("bytes"))return mre(e,{param:n});if(n.type==="string")return wre(e);throw new vne(n.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function m7(n){let e=0;for(let s=0;s<n.length;s++){const{dynamic:o,encoded:a}=n[s];o?e+=32:e+=Yr(a)}const t=[],r=[];let i=0;for(let s=0;s<n.length;s++){const{dynamic:o,encoded:a}=n[s];o?(t.push(mt(e+i,{size:32})),r.push(a),i+=Yr(a)):t.push(a)}return A0([...t,...r])}function fre(n){if(!$i(n))throw new ao({address:n});return{dynamic:!1,encoded:uh(n.toLowerCase())}}function pre(n,{length:e,param:t}){const r=e===null;if(!Array.isArray(n))throw new _ne(n);if(!r&&n.length!==e)throw new fne({expectedLength:e,givenLength:n.length,type:`${t.type}[${e}]`});let i=!1;const s=[];for(let o=0;o<n.length;o++){const a=p7({param:t,value:n[o]});a.dynamic&&(i=!0),s.push(a)}if(r||i){const o=m7(s);if(r){const a=mt(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?A0([a,o]):a}}if(i)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:A0(s.map(({encoded:o})=>o))}}function mre(n,{param:e}){const[,t]=e.type.split("bytes"),r=Yr(n);if(!t){let i=n;return r%32!==0&&(i=uh(i,{dir:"right",size:Math.ceil((n.length-2)/2/32)*32})),{dynamic:!0,encoded:A0([uh(mt(r,{size:32})),i])}}if(r!==Number.parseInt(t))throw new pne({expectedSize:Number.parseInt(t),value:n});return{dynamic:!1,encoded:uh(n,{dir:"right"})}}function gre(n){if(typeof n!="boolean")throw new We(`Invalid boolean value: "${n}" (type: ${typeof n}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:uh(DF(n))}}function yre(n,{signed:e,size:t=256}){if(typeof t=="number"){const r=2n**(BigInt(t)-(e?1n:0n))-1n,i=e?-r-1n:0n;if(n>r||n<i)throw new OF({max:r.toString(),min:i.toString(),signed:e,size:t/8,value:n.toString()})}return{dynamic:!1,encoded:mt(n,{size:32,signed:e})}}function wre(n){const e=f5(n),t=Math.ceil(Yr(e)/32),r=[];for(let i=0;i<t;i++)r.push(uh(Wg(e,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:A0([uh(mt(Yr(e),{size:32})),...r])}}function vre(n,{param:e}){let t=!1;const r=[];for(let i=0;i<e.components.length;i++){const s=e.components[i],o=Array.isArray(n)?i:s.name,a=p7({param:s,value:n[o]});r.push(a),a.dynamic&&(t=!0)}return{dynamic:t,encoded:t?m7(r):A0(r.map(({encoded:i})=>i))}}function g7(n){const e=n.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const y7=n=>Wg(jF(n),0,4);function w7(n){const{abi:e,args:t=[],name:r}=n,i=xh(r,{strict:!1}),s=e.filter(a=>i?a.type==="function"?y7(a)===r:a.type==="event"?f7(a)===r:!1:"name"in a&&a.name===r);if(s.length===0)return;if(s.length===1)return s[0];let o;for(const a of s){if(!("inputs"in a))continue;if(!t||t.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==t.length)continue;if(t.every((l,u)=>{const h="inputs"in a&&a.inputs[u];return h?aS(l,h):!1})){if(o&&"inputs"in o&&o.inputs){const l=ZF(a.inputs,o.inputs,t);if(l)throw new wne({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||s[0]}function aS(n,e){const t=typeof n,r=e.type;switch(r){case"address":return $i(n,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((i,s)=>aS(Object.values(n)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?t==="string"||n instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(n)&&n.every(i=>aS(i,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ZF(n,e,t){for(const r in n){const i=n[r],s=e[r];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return ZF(i.components,s.components,t[r]);const o=[i.type,s.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?$i(t[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?$i(t[r],{strict:!1}):!1)return o}}function bre(n,{method:e}){const t={};return n.transport.type==="fallback"&&n.transport.onResponse?.(({method:r,response:i,status:s,transport:o})=>{s==="success"&&e===r&&(t[i]=o.request)}),r=>t[r]||n.request}function Gc(n){return typeof n=="string"?{address:n,type:"json-rpc"}:n}const FM="/docs/contract/encodeFunctionData";function _re(n){const{abi:e,args:t,functionName:r}=n;let i=e[0];if(r){const s=w7({abi:e,args:t,name:r});if(!s)throw new nb(r,{docsPath:FM});i=s}if(i.type!=="function")throw new nb(void 0,{docsPath:FM});return{abi:[i],functionName:y7(Eh(i))}}function w5(n){const{args:e}=n,{abi:t,functionName:r}=n.abi.length===1&&n.functionName?.startsWith("0x")?n:_re(n),i=t[0],s=r,o="inputs"in i&&i.inputs?XF(i.inputs,e??[]):void 0;return au([s,o??"0x"])}const Ere={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},xre={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Sre={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class $M extends We{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class JF extends We{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Are extends We{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Cre={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Are({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(n){if(n<0||n>this.bytes.length-1)throw new JF({length:this.bytes.length,position:n})},decrementPosition(n){if(n<0)throw new $M({offset:n});const e=this.position-n;this.assertPosition(e),this.position=e},getReadCount(n){return this.positionReadCount.get(n||this.position)||0},incrementPosition(n){if(n<0)throw new $M({offset:n});const e=this.position+n;this.assertPosition(e),this.position=e},inspectByte(n){const e=n??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(n,e){const t=e??this.position;return this.assertPosition(t+n-1),this.bytes.subarray(t,t+n)},inspectUint8(n){const e=n??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(n){const e=n??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(n){const e=n??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(n){const e=n??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushBytes(n){this.assertPosition(this.position+n.length-1),this.bytes.set(n,this.position),this.position+=n.length},pushUint8(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushUint16(n){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,n),this.position+=2},pushUint24(n){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,n>>8),this.dataView.setUint8(this.position+2,n&255),this.position+=3},pushUint32(n){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,n),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const n=this.inspectByte();return this.position++,n},readBytes(n,e){this.assertReadLimit(),this._touch();const t=this.inspectBytes(n);return this.position+=e??n,t},readUint8(){this.assertReadLimit(),this._touch();const n=this.inspectUint8();return this.position+=1,n},readUint16(){this.assertReadLimit(),this._touch();const n=this.inspectUint16();return this.position+=2,n},readUint24(){this.assertReadLimit(),this._touch();const n=this.inspectUint24();return this.position+=3,n},readUint32(){this.assertReadLimit(),this._touch();const n=this.inspectUint32();return this.position+=4,n},get remaining(){return this.bytes.length-this.position},setPosition(n){const e=this.position;return this.assertPosition(n),this.position=n,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const n=this.getReadCount();this.positionReadCount.set(this.position,n+1),n>0&&this.recursiveReadCount++}};function v7(n,{recursiveReadLimit:e=8192}={}){const t=Object.create(Cre);return t.bytes=n,t.dataView=new DataView(n.buffer,n.byteOffset,n.byteLength),t.positionReadCount=new Map,t.recursiveReadLimit=e,t}function Tre(n,e={}){typeof e.size<"u"&&tc(n,{size:e.size});const t=Rs(n,e);return ka(t,e)}function Ire(n,e={}){let t=n;if(typeof e.size<"u"&&(tc(t,{size:e.size}),t=Gl(t)),t.length>1||t[0]>1)throw new Sne(t);return!!t[0]}function Bl(n,e={}){typeof e.size<"u"&&tc(n,{size:e.size});const t=Rs(n,e);return Sh(t,e)}function Mre(n,e={}){let t=n;return typeof e.size<"u"&&(tc(t,{size:e.size}),t=Gl(t,{dir:"right"})),new TextDecoder().decode(t)}function v5(n,e){const t=typeof e=="string"?Fc(e):e,r=v7(t);if(Yr(t)===0&&n.length>0)throw new d5;if(Yr(e)&&Yr(e)<32)throw new TF({data:typeof e=="string"?e:Rs(e),params:n,size:Yr(e)});let i=0;const s=[];for(let o=0;o<n.length;++o){const a=n[o];r.setPosition(i);const[c,l]=a0(r,a,{staticPosition:0});i+=l,s.push(c)}return s}function a0(n,e,{staticPosition:t}){const r=g7(e.type);if(r){const[i,s]=r;return Pre(n,{...e,type:s},{length:i,staticPosition:t})}if(e.type==="tuple")return Dre(n,e,{staticPosition:t});if(e.type==="address")return Rre(n);if(e.type==="bool")return Nre(n);if(e.type.startsWith("bytes"))return Ore(n,e,{staticPosition:t});if(e.type.startsWith("uint")||e.type.startsWith("int"))return kre(n,e);if(e.type==="string")return Lre(n,{staticPosition:t});throw new bne(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const zM=32,cS=32;function Rre(n){const e=n.readBytes(32);return[y5(Rs(YF(e,-20))),32]}function Pre(n,e,{length:t,staticPosition:r}){if(!t){const o=Bl(n.readBytes(cS)),a=r+o,c=a+zM;n.setPosition(a);const l=Bl(n.readBytes(zM)),u=qg(e);let h=0;const d=[];for(let f=0;f<l;++f){n.setPosition(c+(u?f*32:h));const[p,m]=a0(n,e,{staticPosition:c});h+=m,d.push(p)}return n.setPosition(r+32),[d,32]}if(qg(e)){const o=Bl(n.readBytes(cS)),a=r+o,c=[];for(let l=0;l<t;++l){n.setPosition(a+l*32);const[u]=a0(n,e,{staticPosition:a});c.push(u)}return n.setPosition(r+32),[c,32]}let i=0;const s=[];for(let o=0;o<t;++o){const[a,c]=a0(n,e,{staticPosition:r+i});i+=c,s.push(a)}return[s,i]}function Nre(n){return[Ire(n.readBytes(32),{size:32}),32]}function Ore(n,e,{staticPosition:t}){const[r,i]=e.type.split("bytes");if(!i){const o=Bl(n.readBytes(32));n.setPosition(t+o);const a=Bl(n.readBytes(32));if(a===0)return n.setPosition(t+32),["0x",32];const c=n.readBytes(a);return n.setPosition(t+32),[Rs(c),32]}return[Rs(n.readBytes(Number.parseInt(i),32)),32]}function kre(n,e){const t=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),i=n.readBytes(32);return[r>48?Tre(i,{signed:t}):Bl(i,{signed:t}),32]}function Dre(n,e,{staticPosition:t}){const r=e.components.length===0||e.components.some(({name:o})=>!o),i=r?[]:{};let s=0;if(qg(e)){const o=Bl(n.readBytes(cS)),a=t+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];n.setPosition(a+s);const[u,h]=a0(n,l,{staticPosition:a});s+=h,i[r?c:l?.name]=u}return n.setPosition(t+32),[i,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=a0(n,a,{staticPosition:t});i[r?o:a?.name]=c,s+=l}return[i,s]}function Lre(n,{staticPosition:e}){const t=Bl(n.readBytes(32)),r=e+t;n.setPosition(r);const i=Bl(n.readBytes(32));if(i===0)return n.setPosition(e+32),["",32];const s=n.readBytes(i,32),o=Mre(Gl(s));return n.setPosition(e+32),[o,32]}function qg(n){const{type:e}=n;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return n.components?.some(qg);const t=g7(n.type);return!!(t&&qg({...n,type:t[1]}))}function Ure(n){const{abi:e,data:t}=n,r=Wg(t,0,4);if(r==="0x")throw new d5;const s=[...e||[],xre,Sre].find(o=>o.type==="error"&&r===y7(Eh(o)));if(!s)throw new IF(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?v5(s.inputs,Wg(t,4)):void 0,errorName:s.name}}const ia=(n,e,t)=>JSON.stringify(n,(r,i)=>typeof i=="bigint"?i.toString():i,t);function QF({abiItem:n,args:e,includeFunctionName:t=!0,includeName:r=!1}){if("name"in n&&"inputs"in n&&n.inputs)return`${t?n.name:""}(${n.inputs.map((i,s)=>`${r&&i.name?`${i.name}: `:""}${typeof e[s]=="object"?ia(e[s]):e[s]}`).join(", ")})`}const Bre={gwei:9,wei:18},Fre={ether:-9,wei:9},$re={ether:-18,gwei:-9};function t1(n,e){let t=n.toString();const r=t.startsWith("-");r&&(t=t.slice(1)),t=t.padStart(e,"0");let[i,s]=[t.slice(0,t.length-e),t.slice(t.length-e)];return s=s.replace(/(0+)$/,""),`${r?"-":""}${i||"0"}${s?`.${s}`:""}`}function b7(n,e="wei"){return t1(n,Bre[e])}function io(n,e="wei"){return t1(n,Fre[e])}class zre extends We{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Hre extends We{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function HM(n){return n.reduce((e,{slot:t,value:r})=>`${e}        ${t}: ${r}
`,"")}function Vre(n){return n.reduce((e,{address:t,...r})=>{let i=`${e}    ${t}:
`;return r.nonce&&(i+=`      nonce: ${r.nonce}
`),r.balance&&(i+=`      balance: ${r.balance}
`),r.code&&(i+=`      code: ${r.code}
`),r.state&&(i+=`      state:
`,i+=HM(r.state)),r.stateDiff&&(i+=`      stateDiff:
`,i+=HM(r.stateDiff)),i},`  State Override:
`).slice(0,-1)}function vy(n){const e=Object.entries(n).map(([r,i])=>i===void 0||i===!1?null:[r,i]).filter(Boolean),t=e.reduce((r,[i])=>Math.max(r,i.length),0);return e.map(([r,i])=>`  ${`${r}:`.padEnd(t+1)}  ${i}`).join(`
`)}class Wre extends We{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class qre extends We{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class jre extends We{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",vy(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Gre extends We{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class Kre extends We{constructor(e,{account:t,docsPath:r,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d}){const f=vy({chain:i&&`${i?.name} (id: ${i?.id})`,from:t?.address,to:h,value:typeof d<"u"&&`${b7(d)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${io(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${io(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${io(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class e$ extends We{constructor({blockHash:e,blockNumber:t,blockTag:r,hash:i,index:s}){let o="Transaction";r&&s!==void 0&&(o=`Transaction at block time "${r}" at index "${s}"`),e&&s!==void 0&&(o=`Transaction at block hash "${e}" at index "${s}"`),t&&s!==void 0&&(o=`Transaction at block number "${t}" at index "${s}"`),i&&(o=`Transaction with hash "${i}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class t$ extends We{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class Yre extends We{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Xre=n=>n,_7=n=>n;class Zre extends We{constructor(e,{account:t,docsPath:r,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d,stateOverride:f}){const p=t?Gc(t):void 0;let m=vy({from:p?.address,to:h,value:typeof d<"u"&&`${b7(d)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${io(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${io(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${io(l)} gwei`,nonce:u});f&&(m+=`
${Vre(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class n$ extends We{constructor(e,{abi:t,args:r,contractAddress:i,docsPath:s,functionName:o,sender:a}){const c=w7({abi:t,args:r,name:o}),l=c?QF({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Eh(c,{includeName:!0}):void 0,h=vy({address:i&&Xre(i),function:u,args:l&&l!=="()"&&`${[...Array(o?.length??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],h&&"Contract Call:",h].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=r,this.cause=e,this.contractAddress=i,this.functionName=o,this.sender=a}}class Jre extends We{constructor({abi:e,data:t,functionName:r,message:i}){let s,o,a,c;if(t&&t!=="0x")try{o=Ure({abi:e,data:t});const{abiItem:u,errorName:h,args:d}=o;if(h==="Error")c=d[0];else if(h==="Panic"){const[f]=d;c=Ere[f]}else{const f=u?Eh(u,{includeName:!0}):void 0,p=u&&d?QF({abiItem:u,args:d,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array(h?.length??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){s=u}else i&&(c=i);let l;s instanceof IF&&(l=s.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:s,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=t,this.reason=c,this.signature=l}}class Qre extends We{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class eie extends We{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class E7 extends We{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class Xm extends We{constructor({body:e,cause:t,details:r,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[s&&`Status: ${s}`,`URL: ${_7(o)}`,e&&`Request body: ${ia(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class x7 extends We{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${_7(r)}`,`Request body: ${ia(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class VM extends We{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${_7(t)}`,`Request body: ${ia(e)}`],name:"TimeoutError"})}}const tie=-1;class co extends We{constructor(e,{code:t,docsPath:r,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:i||e?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof x7?e.code:t??tie}}class Do extends co{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class jg extends co{constructor(e){super(e,{code:jg.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(jg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Gg extends co{constructor(e){super(e,{code:Gg.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Gg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Kg extends co{constructor(e,{method:t}={}){super(e,{code:Kg.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(Kg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Yg extends co{constructor(e){super(e,{code:Yg.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Yg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class of extends co{constructor(e){super(e,{code:of.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(of,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Xg extends co{constructor(e){super(e,{code:Xg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Xg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Zg extends co{constructor(e){super(e,{code:Zg.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Zg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class hh extends co{constructor(e){super(e,{code:hh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(hh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class C0 extends co{constructor(e){super(e,{code:C0.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(C0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Id extends co{constructor(e,{method:t}={}){super(e,{code:Id.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(Id,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class T0 extends co{constructor(e){super(e,{code:T0.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(T0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Jg extends co{constructor(e){super(e,{code:Jg.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Jg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class ei extends Do{constructor(e){super(e,{code:ei.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(ei,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Qg extends Do{constructor(e){super(e,{code:Qg.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Qg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class e2 extends Do{constructor(e,{method:t}={}){super(e,{code:e2.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(e2,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class t2 extends Do{constructor(e){super(e,{code:t2.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(t2,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class n2 extends Do{constructor(e){super(e,{code:n2.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(n2,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class $c extends Do{constructor(e){super(e,{code:$c.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty($c,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class r2 extends Do{constructor(e){super(e,{code:r2.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(r2,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class i2 extends Do{constructor(e){super(e,{code:i2.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(i2,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class s2 extends Do{constructor(e){super(e,{code:s2.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(s2,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class o2 extends Do{constructor(e){super(e,{code:o2.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(o2,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class a2 extends Do{constructor(e){super(e,{code:a2.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(a2,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class c2 extends Do{constructor(e){super(e,{code:c2.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(c2,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class l2 extends Do{constructor(e){super(e,{code:l2.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(l2,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class nie extends co{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const rie=3;function rb(n,{abi:e,address:t,args:r,docsPath:i,functionName:s,sender:o}){const a=n instanceof E7?n:n instanceof We?n.walk(p=>"data"in p)||n.walk():{},{code:c,data:l,details:u,message:h,shortMessage:d}=a,f=n instanceof d5?new Qre({functionName:s}):[rie,of.code].includes(c)&&(l||u||h||d)?new Jre({abi:e,data:typeof l=="object"?l.data:l,functionName:s,message:a instanceof x7?u:d??h}):n;return new n$(f,{abi:e,args:r,contractAddress:t,docsPath:i,functionName:s,sender:o})}function iie(n){const e=wy(`0x${n.substring(4)}`).substring(26);return y5(`0x${e}`)}async function sie({hash:n,signature:e}){const t=xh(n)?n:Ha(n),{secp256k1:r}=await Ct(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>_oe);return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,f=Number(d??h),p=WM(f);return new r.Signature(ka(l),ka(u)).addRecoveryBit(p)}const o=xh(e)?e:Ha(e);if(Yr(o)!==65)throw new Error("invalid signature length");const a=Sh(`0x${o.slice(130)}`),c=WM(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function WM(n){if(n===0||n===1)return n;if(n===27)return 0;if(n===28)return 1;throw new Error("Invalid yParityOrV value")}async function oie({hash:n,signature:e}){return iie(await sie({hash:n,signature:e}))}function Ch(n,e="hex"){const t=r$(n),r=v7(new Uint8Array(t.length));return t.encode(r),e==="hex"?Rs(r.bytes):r.bytes}function r$(n){return Array.isArray(n)?aie(n.map(e=>r$(e))):cie(n)}function aie(n){const e=n.reduce((i,s)=>i+s.length,0),t=i$(e);return{length:e<=55?1+e:1+t+e,encode(i){e<=55?i.pushByte(192+e):(i.pushByte(247+t),t===1?i.pushUint8(e):t===2?i.pushUint16(e):t===3?i.pushUint24(e):i.pushUint32(e));for(const{encode:s}of n)s(i)}}}function cie(n){const e=typeof n=="string"?Fc(n):n,t=i$(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length,encode(i){e.length===1&&e[0]<128?i.pushBytes(e):e.length<=55?(i.pushByte(128+e.length),i.pushBytes(e)):(i.pushByte(183+t),t===1?i.pushUint8(e.length):t===2?i.pushUint16(e.length):t===3?i.pushUint24(e.length):i.pushUint32(e.length),i.pushBytes(e))}}}function i$(n){if(n<2**8)return 1;if(n<2**16)return 2;if(n<2**24)return 3;if(n<2**32)return 4;throw new We("Length is too large.")}function lie(n){const{chainId:e,nonce:t,to:r}=n,i=n.contractAddress??n.address,s=wy(au(["0x05",Ch([e?mt(e):"0x",i,t?mt(t):"0x"])]));return r==="bytes"?Fc(s):s}async function s$(n){const{authorization:e,signature:t}=n;return oie({hash:lie(e),signature:t??e})}class uie extends We{constructor(e,{account:t,docsPath:r,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:d}){const f=vy({from:t?.address,to:h,value:typeof d<"u"&&`${b7(d)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${io(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${io(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${io(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Md extends We{constructor({cause:e,message:t}={}){const r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Md,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Md,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class af extends We{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${io(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(af,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class lS extends We{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${io(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(lS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class uS extends We{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(uS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class hS extends We{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(hS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class dS extends We{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(dS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class fS extends We{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(fS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class pS extends We{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(pS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class mS extends We{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(mS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class gS extends We{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(gS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class u2 extends We{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${io(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${io(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(u2,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class b5 extends We{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function S7(n,e){const t=(n.details||"").toLowerCase(),r=n instanceof We?n.walk(i=>i?.code===Md.code):n;return r instanceof We?new Md({cause:n,message:r.details}):Md.nodeMessage.test(t)?new Md({cause:n,message:n.details}):af.nodeMessage.test(t)?new af({cause:n,maxFeePerGas:e?.maxFeePerGas}):lS.nodeMessage.test(t)?new lS({cause:n,maxFeePerGas:e?.maxFeePerGas}):uS.nodeMessage.test(t)?new uS({cause:n,nonce:e?.nonce}):hS.nodeMessage.test(t)?new hS({cause:n,nonce:e?.nonce}):dS.nodeMessage.test(t)?new dS({cause:n,nonce:e?.nonce}):fS.nodeMessage.test(t)?new fS({cause:n}):pS.nodeMessage.test(t)?new pS({cause:n,gas:e?.gas}):mS.nodeMessage.test(t)?new mS({cause:n,gas:e?.gas}):gS.nodeMessage.test(t)?new gS({cause:n}):u2.nodeMessage.test(t)?new u2({cause:n,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new b5({cause:n})}function hie(n,{docsPath:e,...t}){const r=(()=>{const i=S7(n,t);return i instanceof b5?n:i})();return new uie(r,{docsPath:e,...t})}function A7(n,{format:e}){if(!e)return{};const t={};function r(s){const o=Object.keys(s);for(const a of o)a in n&&(t[a]=n[a]),s[a]&&typeof s[a]=="object"&&!Array.isArray(s[a])&&r(s[a])}const i=e(n||{});return r(i),t}function C7(n,e){return({exclude:t,format:r})=>({exclude:t,format:i=>{const s=e(i);if(t)for(const o of t)delete s[o];return{...s,...r(i)}},type:n})}const die={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function T7(n){const e={};return typeof n.authorizationList<"u"&&(e.authorizationList=fie(n.authorizationList)),typeof n.accessList<"u"&&(e.accessList=n.accessList),typeof n.blobVersionedHashes<"u"&&(e.blobVersionedHashes=n.blobVersionedHashes),typeof n.blobs<"u"&&(typeof n.blobs[0]!="string"?e.blobs=n.blobs.map(t=>Rs(t)):e.blobs=n.blobs),typeof n.data<"u"&&(e.data=n.data),typeof n.from<"u"&&(e.from=n.from),typeof n.gas<"u"&&(e.gas=mt(n.gas)),typeof n.gasPrice<"u"&&(e.gasPrice=mt(n.gasPrice)),typeof n.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=mt(n.maxFeePerBlobGas)),typeof n.maxFeePerGas<"u"&&(e.maxFeePerGas=mt(n.maxFeePerGas)),typeof n.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=mt(n.maxPriorityFeePerGas)),typeof n.nonce<"u"&&(e.nonce=mt(n.nonce)),typeof n.to<"u"&&(e.to=n.to),typeof n.type<"u"&&(e.type=die[n.type]),typeof n.value<"u"&&(e.value=mt(n.value)),e}function fie(n){return n.map(e=>({address:e.address,r:e.r?mt(BigInt(e.r)):e.r,s:e.s?mt(BigInt(e.s)):e.s,chainId:mt(e.chainId),nonce:mt(e.nonce),...typeof e.yParity<"u"?{yParity:mt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:mt(e.v)}:{}}))}function qM(n){if(!(!n||n.length===0))return n.reduce((e,{slot:t,value:r})=>{if(t.length!==66)throw new RM({size:t.length,targetSize:66,type:"hex"});if(r.length!==66)throw new RM({size:r.length,targetSize:66,type:"hex"});return e[t]=r,e},{})}function pie(n){const{balance:e,nonce:t,state:r,stateDiff:i,code:s}=n,o={};if(s!==void 0&&(o.code=s),e!==void 0&&(o.balance=mt(e)),t!==void 0&&(o.nonce=mt(t)),r!==void 0&&(o.state=qM(r)),i!==void 0){if(o.state)throw new Hre;o.stateDiff=qM(i)}return o}function o$(n){if(!n)return;const e={};for(const{address:t,...r}of n){if(!$i(t,{strict:!1}))throw new ao({address:t});if(e[t])throw new zre({address:t});e[t]=pie(r)}return e}const _5=2n**256n-1n;function E5(n){const{account:e,gasPrice:t,maxFeePerGas:r,maxPriorityFeePerGas:i,to:s}=n,o=e?Gc(e):void 0;if(o&&!$i(o.address))throw new ao({address:o.address});if(s&&!$i(s))throw new ao({address:s});if(typeof t<"u"&&(typeof r<"u"||typeof i<"u"))throw new Wre;if(r&&r>_5)throw new af({maxFeePerGas:r});if(i&&r&&i>r)throw new u2({maxFeePerGas:r,maxPriorityFeePerGas:i})}class mie extends We{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class I7 extends We{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class gie extends We{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${io(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class a$ extends We{constructor({blockHash:e,blockNumber:t}){let r="Block";e&&(r=`Block at hash "${e}"`),t&&(r=`Block at number "${t}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const c$={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function x5(n){const e={...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,chainId:n.chainId?Sh(n.chainId):void 0,gas:n.gas?BigInt(n.gas):void 0,gasPrice:n.gasPrice?BigInt(n.gasPrice):void 0,maxFeePerBlobGas:n.maxFeePerBlobGas?BigInt(n.maxFeePerBlobGas):void 0,maxFeePerGas:n.maxFeePerGas?BigInt(n.maxFeePerGas):void 0,maxPriorityFeePerGas:n.maxPriorityFeePerGas?BigInt(n.maxPriorityFeePerGas):void 0,nonce:n.nonce?Sh(n.nonce):void 0,to:n.to?n.to:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,type:n.type?c$[n.type]:void 0,typeHex:n.type?n.type:void 0,value:n.value?BigInt(n.value):void 0,v:n.v?BigInt(n.v):void 0};return n.authorizationList&&(e.authorizationList=wie(n.authorizationList)),e.yParity=(()=>{if(n.yParity)return Number(n.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const yie=C7("transaction",x5);function wie(n){return n.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function l$(n){const e=(n.transactions??[]).map(t=>typeof t=="string"?t:x5(t));return{...n,baseFeePerGas:n.baseFeePerGas?BigInt(n.baseFeePerGas):null,blobGasUsed:n.blobGasUsed?BigInt(n.blobGasUsed):void 0,difficulty:n.difficulty?BigInt(n.difficulty):void 0,excessBlobGas:n.excessBlobGas?BigInt(n.excessBlobGas):void 0,gasLimit:n.gasLimit?BigInt(n.gasLimit):void 0,gasUsed:n.gasUsed?BigInt(n.gasUsed):void 0,hash:n.hash?n.hash:null,logsBloom:n.logsBloom?n.logsBloom:null,nonce:n.nonce?n.nonce:null,number:n.number?BigInt(n.number):null,size:n.size?BigInt(n.size):void 0,timestamp:n.timestamp?BigInt(n.timestamp):void 0,transactions:e,totalDifficulty:n.totalDifficulty?BigInt(n.totalDifficulty):null}}const vie=C7("block",l$);async function h2(n,{blockHash:e,blockNumber:t,blockTag:r,includeTransactions:i}={}){const s=r??"latest",o=i??!1,a=t!==void 0?mt(t):void 0;let c=null;if(e?c=await n.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await n.request({method:"eth_getBlockByNumber",params:[a||s,o]},{dedupe:!!a}),!c)throw new a$({blockHash:e,blockNumber:t});return(n.chain?.formatters?.block?.format||l$)(c)}async function u$(n){const e=await n.request({method:"eth_gasPrice"});return BigInt(e)}async function bie(n,e){const{block:t,chain:r=n.chain,request:i}=e||{};try{const s=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof s=="function"){const a=t||await wr(n,h2,"getBlock")({}),c=await s({block:a,client:n,request:i});if(c===null)throw new Error;return c}if(typeof s<"u")return s;const o=await n.request({method:"eth_maxPriorityFeePerGas"});return ka(o)}catch{const[s,o]=await Promise.all([t?Promise.resolve(t):wr(n,h2,"getBlock")({}),wr(n,u$,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new I7;const a=o-s.baseFeePerGas;return a<0n?0n:a}}async function jM(n,e){const{block:t,chain:r=n.chain,request:i,type:s="eip1559"}=e||{},o=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:t,client:n,request:i}):r?.fees?.baseFeeMultiplier??1.2)();if(o<1)throw new mie;const c=10**(o.toString().split(".")[1]?.length??0),l=d=>d*BigInt(Math.ceil(o*c))/BigInt(c),u=t||await wr(n,h2,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const d=await r.fees.estimateFeesPerGas({block:t,client:n,multiply:l,request:i,type:s});if(d!==null)return d}if(s==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new I7;const d=typeof i?.maxPriorityFeePerGas=="bigint"?i.maxPriorityFeePerGas:await bie(n,{block:u,chain:r,request:i}),f=l(u.baseFeePerGas);return{maxFeePerGas:i?.maxFeePerGas??f+d,maxPriorityFeePerGas:d}}return{gasPrice:i?.gasPrice??l(await wr(n,u$,"getGasPrice")({}))}}async function _ie(n,{address:e,blockTag:t="latest",blockNumber:r}){const i=await n.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?mt(r):t]},{dedupe:!!r});return Sh(i)}function M7(n){const{kzg:e}=n,t=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),r=typeof n.blobs[0]=="string"?n.blobs.map(s=>Fc(s)):n.blobs,i=[];for(const s of r)i.push(Uint8Array.from(e.blobToKzgCommitment(s)));return t==="bytes"?i:i.map(s=>Rs(s))}function R7(n){const{kzg:e}=n,t=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),r=typeof n.blobs[0]=="string"?n.blobs.map(o=>Fc(o)):n.blobs,i=typeof n.commitments[0]=="string"?n.commitments.map(o=>Fc(o)):n.commitments,s=[];for(let o=0;o<r.length;o++){const a=r[o],c=i[o];s.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return t==="bytes"?s:s.map(o=>Rs(o))}function Eie(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=r?4:0,l=r?0:4;n.setUint32(e+c,o,r),n.setUint32(e+l,a,r)}function xie(n,e,t){return n&e^~n&t}function Sie(n,e,t){return n&e^n&t^e&t}class h$ extends u7{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=BE(this.buffer)}update(e){x0(this),e=m5(e),la(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=BE(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){x0(this),BF(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,Ah(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)t[h]=0;Eie(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=BE(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const fu=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qi=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Aie=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pu=new Uint32Array(64);class Cie extends h${constructor(e=32){super(64,e,8,!1),this.A=fu[0]|0,this.B=fu[1]|0,this.C=fu[2]|0,this.D=fu[3]|0,this.E=fu[4]|0,this.F=fu[5]|0,this.G=fu[6]|0,this.H=fu[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,r,i,s,o,a,c]}set(e,t,r,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)pu[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const d=pu[h-15],f=pu[h-2],p=ac(d,7)^ac(d,18)^d>>>3,m=ac(f,17)^ac(f,19)^f>>>10;pu[h]=m+pu[h-7]+p+pu[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=ac(a,6)^ac(a,11)^ac(a,25),f=u+d+xie(a,c,l)+Aie[h]+pu[h]|0,m=(ac(r,2)^ac(r,13)^ac(r,22))+Sie(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+m|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Ah(pu)}destroy(){this.set(0,0,0,0,0,0,0,0),Ah(this.buffer)}}const d$=UF(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Tie=d$[0],Iie=d$[1],mu=new Uint32Array(80),gu=new Uint32Array(80);class Mie extends h${constructor(e=64){super(128,e,16,!1),this.Ah=qi[0]|0,this.Al=qi[1]|0,this.Bh=qi[2]|0,this.Bl=qi[3]|0,this.Ch=qi[4]|0,this.Cl=qi[5]|0,this.Dh=qi[6]|0,this.Dl=qi[7]|0,this.Eh=qi[8]|0,this.El=qi[9]|0,this.Fh=qi[10]|0,this.Fl=qi[11]|0,this.Gh=qi[12]|0,this.Gl=qi[13]|0,this.Hh=qi[14]|0,this.Hl=qi[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:f,Gl:p,Hh:m,Hl:g}=this;return[e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g]}set(e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=g|0}process(e,t){for(let w=0;w<16;w++,t+=4)mu[w]=e.getUint32(t),gu[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const E=mu[w-15]|0,x=gu[w-15]|0,C=Gf(E,x,1)^Gf(E,x,8)^OM(E,x,7),R=Kf(E,x,1)^Kf(E,x,8)^kM(E,x,7),k=mu[w-2]|0,_=gu[w-2]|0,A=Gf(k,_,19)^dw(k,_,61)^OM(k,_,6),M=Kf(k,_,19)^fw(k,_,61)^kM(k,_,6),D=Bne(R,M,gu[w-7],gu[w-16]),P=Fne(D,C,A,mu[w-7],mu[w-16]);mu[w]=P|0,gu[w]=D|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:f,Fl:p,Gh:m,Gl:g,Hh:y,Hl:b}=this;for(let w=0;w<80;w++){const E=Gf(h,d,14)^Gf(h,d,18)^dw(h,d,41),x=Kf(h,d,14)^Kf(h,d,18)^fw(h,d,41),C=h&f^~h&m,R=d&p^~d&g,k=$ne(b,x,R,Iie[w],gu[w]),_=zne(k,y,E,C,Tie[w],mu[w]),A=k|0,M=Gf(r,i,28)^dw(r,i,34)^dw(r,i,39),D=Kf(r,i,28)^fw(r,i,34)^fw(r,i,39),P=r&s^r&a^s&a,v=i&o^i&c^o&c;y=m|0,b=g|0,m=f|0,g=p|0,f=h|0,p=d|0,{h,l:d}=sl(l|0,u|0,_|0,A|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const S=Lne(A,D,v);r=Une(S,_,M,P),i=S|0}({h:r,l:i}=sl(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=sl(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=sl(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=sl(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=sl(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=sl(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:g}=sl(this.Gh|0,this.Gl|0,m|0,g|0),{h:y,l:b}=sl(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,i,s,o,a,c,l,u,h,d,f,p,m,g,y,b)}roundClean(){Ah(mu,gu)}destroy(){Ah(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const f$=h7(()=>new Cie),Rie=h7(()=>new Mie),yS=f$;function Pie(n,e){return yS(xh(n,{strict:!1})?p5(n):n)}function Nie(n){const{commitment:e,version:t=1}=n,r=n.to??(typeof e=="string"?"hex":"bytes"),i=Pie(e);return i.set([t],0),r==="bytes"?i:Rs(i)}function p$(n){const{commitments:e,version:t}=n,r=n.to??(typeof e[0]=="string"?"hex":"bytes"),i=[];for(const s of e)i.push(Nie({commitment:s,to:r,version:t}));return i}const GM=6,m$=32,P7=4096,g$=m$*P7,KM=g$*GM-1-1*P7*GM,y$=1;class Oie extends We{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class w$ extends We{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class kie extends We{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}}class Die extends We{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${y$}`,`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}}function Lie(n){const e=n.to??(typeof n.data=="string"?"hex":"bytes"),t=typeof n.data=="string"?Fc(n.data):n.data,r=Yr(t);if(!r)throw new w$;if(r>KM)throw new Oie({maxSize:KM,size:r});const i=[];let s=!0,o=0;for(;s;){const a=v7(new Uint8Array(g$));let c=0;for(;c<P7;){const l=t.slice(o,o+(m$-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),s=!1;break}c++,o+=31}i.push(a)}return e==="bytes"?i.map(a=>a.bytes):i.map(a=>Rs(a.bytes))}function v$(n){const{data:e,kzg:t,to:r}=n,i=n.blobs??Lie({data:e,to:r}),s=n.commitments??M7({blobs:i,kzg:t,to:r}),o=n.proofs??R7({blobs:i,commitments:s,kzg:t,to:r}),a=[];for(let c=0;c<i.length;c++)a.push({blob:i[c],commitment:s[c],proof:o[c]});return a}function b$(n){if(n.type)return n.type;if(typeof n.authorizationList<"u")return"eip7702";if(typeof n.blobs<"u"||typeof n.blobVersionedHashes<"u"||typeof n.maxFeePerBlobGas<"u"||typeof n.sidecars<"u")return"eip4844";if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")return"eip1559";if(typeof n.gasPrice<"u")return typeof n.accessList<"u"?"eip2930":"legacy";throw new jre({transaction:n})}async function _$(n){const e=await n.request({method:"eth_chainId"},{dedupe:!0});return Sh(e)}const E$=["blobVersionedHashes","chainId","fees","gas","nonce","type"],YM=new Map;async function N7(n,e){const{account:t=n.account,blobs:r,chain:i,gas:s,kzg:o,nonce:a,nonceManager:c,parameters:l=E$,type:u}=e,h=t&&Gc(t),d={...e,...h?{from:h?.address}:{}};let f;async function p(){return f||(f=await wr(n,h2,"getBlock")({blockTag:"latest"}),f)}let m;async function g(){return m||(i?i.id:typeof e.chainId<"u"?e.chainId:(m=await wr(n,_$,"getChainId")({}),m))}if(l.includes("nonce")&&typeof a>"u"&&h)if(c){const y=await g();d.nonce=await c.consume({address:h.address,chainId:y,client:n})}else d.nonce=await wr(n,_ie,"getTransactionCount")({address:h.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=M7({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=p$({commitments:y,to:"hex"});d.blobVersionedHashes=b}if(l.includes("sidecars")){const b=R7({blobs:r,commitments:y,kzg:o}),w=v$({blobs:r,commitments:y,proofs:b,to:"hex"});d.sidecars=w}}if(l.includes("chainId")&&(d.chainId=await g()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{d.type=b$(d)}catch{let y=YM.get(n.uid);typeof y>"u"&&(y=typeof(await p())?.baseFeePerGas=="bigint",YM.set(n.uid,y)),d.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(d.type!=="legacy"&&d.type!=="eip2930"){if(typeof d.maxFeePerGas>"u"||typeof d.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:w}=await jM(n,{block:y,chain:i,request:d});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<w)throw new gie({maxPriorityFeePerGas:w});d.maxPriorityFeePerGas=w,d.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new I7;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await jM(n,{block:y,chain:i,request:d,type:"legacy"});d.gasPrice=b}}return l.includes("gas")&&typeof s>"u"&&(d.gas=await wr(n,S$,"estimateGas")({...d,account:h&&{address:h.address,type:"json-rpc"}})),E5(d),delete d.parameters,d}async function x$(n,{address:e,blockNumber:t,blockTag:r="latest"}){const i=typeof t=="bigint"?mt(t):void 0,s=await n.request({method:"eth_getBalance",params:[e,i||r]});return BigInt(s)}async function S$(n,e){const{account:t=n.account}=e,r=t?Gc(t):void 0;try{let M=function(P){const{block:v,request:S,rpcStateOverride:T}=P;return n.request({method:"eth_estimateGas",params:T?[S,v??"latest",T]:v?[S,v]:[S]})};const{accessList:i,authorizationList:s,blobs:o,blobVersionedHashes:a,blockNumber:c,blockTag:l,data:u,gas:h,gasPrice:d,maxFeePerBlobGas:f,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:g,value:y,stateOverride:b,...w}=await N7(n,{...e,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),x=(typeof c=="bigint"?mt(c):void 0)||l,C=o$(b),R=await(async()=>{if(w.to)return w.to;if(s&&s.length>0)return await s$({authorization:s[0]}).catch(()=>{throw new We("`to` is required. Could not infer from `authorizationList`")})})();E5(e);const k=n.chain?.formatters?.transactionRequest?.format,A=(k||T7)({...A7(w,{format:k}),from:r?.address,accessList:i,authorizationList:s,blobs:o,blobVersionedHashes:a,data:u,gas:h,gasPrice:d,maxFeePerBlobGas:f,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:g,to:R,value:y});let D=BigInt(await M({block:x,request:A,rpcStateOverride:C}));if(s){const P=await x$(n,{address:A.from}),v=await Promise.all(s.map(async S=>{const{address:T}=S,L=await M({block:x,request:{authorizationList:void 0,data:u,from:r?.address,to:T,value:mt(P)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(L)}));D+=v.reduce((S,T)=>S+T,0n)}return D}catch(i){throw hie(i,{...e,account:r,chain:n.chain})}}function Uie(n,e){if(!$i(n,{strict:!1}))throw new ao({address:n});if(!$i(e,{strict:!1}))throw new ao({address:e});return n.toLowerCase()===e.toLowerCase()}const XM="/docs/contract/decodeEventLog";function Bie(n){const{abi:e,data:t,strict:r,topics:i}=n,s=r??!0,[o,...a]=i;if(!o)throw new gne({docsPath:XM});const c=e.find(m=>m.type==="event"&&o===f7(Eh(m)));if(!(c&&"name"in c)||c.type!=="event")throw new MF(o,{docsPath:XM});const{name:l,inputs:u}=c,h=u?.some(m=>!("name"in m&&m.name)),d=h?[]:{},f=u.map((m,g)=>[m,g]).filter(([m])=>"indexed"in m&&m.indexed);for(let m=0;m<f.length;m++){const[g,y]=f[m],b=a[m];if(!b)throw new RF({abiItem:c,param:g});d[h?y:g.name||y]=Fie({param:g,value:b})}const p=u.filter(m=>!("indexed"in m&&m.indexed));if(p.length>0){if(t&&t!=="0x")try{const m=v5(p,t);if(m)if(h)for(let g=0;g<u.length;g++)d[g]=d[g]??m.shift();else for(let g=0;g<p.length;g++)d[p[g].name]=m[g]}catch(m){if(s)throw m instanceof TF||m instanceof JF?new oS({abiItem:c,data:t,params:p,size:Yr(t)}):m}else if(s)throw new oS({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(d).length>0?d:void 0}}function Fie({param:n,value:e}){return n.type==="string"||n.type==="bytes"||n.type==="tuple"||n.type.match(/^(.*)\[(\d+)?\]$/)?e:(v5([n],e)||[])[0]}function $ie(n){const{abi:e,args:t,logs:r,strict:i=!0}=n,s=(()=>{if(n.eventName)return Array.isArray(n.eventName)?n.eventName:[n.eventName]})();return r.map(o=>{try{const a=e.find(l=>l.type==="event"&&o.topics[0]===f7(l));if(!a)return null;const c=Bie({...o,abi:[a],strict:i});return s&&!s.includes(c.eventName)||!zie({args:c.args,inputs:a.inputs,matchArgs:t})?null:{...c,...o}}catch(a){let c,l;if(a instanceof MF)return null;if(a instanceof oS||a instanceof RF){if(i)return null;c=a.abiItem.name,l=a.abiItem.inputs?.some(u=>!("name"in u&&u.name))}return{...o,args:l?[]:{},eventName:c}}}).filter(Boolean)}function zie(n){const{args:e,inputs:t,matchArgs:r}=n;if(!r)return!0;if(!e)return!1;function i(s,o,a){try{return s.type==="address"?Uie(o,a):s.type==="string"||s.type==="bytes"?wy(p5(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((s,o)=>{if(s==null)return!0;const a=t[o];return a?(Array.isArray(s)?s:[s]).some(l=>i(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([s,o])=>{if(o==null)return!0;const a=t.find(l=>l.name===s);return a?(Array.isArray(o)?o:[o]).some(l=>i(a,l,e[s])):!1}):!1}function A$(n,{args:e,eventName:t}={}){return{...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,logIndex:n.logIndex?Number(n.logIndex):null,transactionHash:n.transactionHash?n.transactionHash:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,...t?{args:e,eventName:t}:{}}}const zE="/docs/contract/decodeFunctionResult";function O7(n){const{abi:e,args:t,functionName:r,data:i}=n;let s=e[0];if(r){const a=w7({abi:e,args:t,name:r});if(!a)throw new nb(r,{docsPath:zE});s=a}if(s.type!=="function")throw new nb(void 0,{docsPath:zE});if(!s.outputs)throw new yne(s.name,{docsPath:zE});const o=v5(s.outputs,i);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k7=BigInt(0),wS=BigInt(1);function cf(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function pw(n){const e=n.toString(16);return e.length&1?"0"+e:e}function C$(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?k7:BigInt("0x"+n)}function S5(n){return C$(S0(n))}function d2(n){return la(n),C$(S0(Uint8Array.from(n).reverse()))}function D7(n,e){return l7(n.toString(16).padStart(e*2,"0"))}function A5(n,e){return D7(n,e).reverse()}function $r(n,e,t){let r;if(typeof e=="string")try{r=l7(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(c7(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}const HE=n=>typeof n=="bigint"&&k7<=n;function Hie(n,e,t){return HE(n)&&HE(e)&&HE(t)&&e<=n&&n<t}function Vp(n,e,t,r){if(!Hie(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function Vie(n){let e;for(e=0;n>k7;n>>=wS,e+=1);return e}const C5=n=>(wS<<BigInt(n))-wS;function Wie(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),i=f=>Uint8Array.of(f);let s=r(n),o=r(n),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...f)=>t(o,s,...f),u=(f=r(0))=>{o=l(i(0),f),s=l(),f.length!==0&&(o=l(i(1),f),s=l())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){s=l();const m=s.slice();p.push(m),f+=s.length}return Dl(...p)};return(f,p)=>{c(),u(f);let m;for(;!(m=p(h()));)u();return c(),m}}function by(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){const a=n[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(t).forEach(([i,s])=>r(i,s,!0))}function ib(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const qie="0.1.1";function jie(){return qie}let T$=class vS extends Error{constructor(e,t={}){const r=(()=>{if(t.cause instanceof vS){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause&&"details"in t.cause&&typeof t.cause.details=="string"?t.cause.details:t.cause?.message?t.cause.message:t.details})(),i=t.cause instanceof vS&&t.cause.docsPath||t.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${jie()}`}),this.cause=t.cause,this.details=r,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return I$(this,e)}};function I$(n,e){return e?.(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause?I$(n.cause,e):e?null:n}function Gie(n,e={}){const{dir:t,size:r=32}=e;if(r===0)return n;const i=n.replace("0x","");if(i.length>r*2)throw new Xie({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[t==="right"?"padEnd":"padStart"](r*2,"0")}`}function Al(n,e={}){const{signed:t,size:r}=e,i=BigInt(n);let s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&t?-s-1n:0;if(s&&i>s||i<o){const l=typeof n=="bigint"?"n":"";throw new Yie({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:t,size:r,value:`${n}${l}`})}const c=`0x${(t&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Kie(c,r):c}function Kie(n,e){return Gie(n,{dir:"left",size:e})}let Yie=class extends T${constructor({max:e,min:t,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Xie=class extends T${constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Zie(n){return{address:n.address,amount:Al(n.amount),index:Al(n.index),validatorIndex:Al(n.validatorIndex)}}function Jie(n){return{...typeof n.baseFeePerGas=="bigint"&&{baseFeePerGas:Al(n.baseFeePerGas)},...typeof n.blobBaseFee=="bigint"&&{blobBaseFee:Al(n.blobBaseFee)},...typeof n.feeRecipient=="string"&&{feeRecipient:n.feeRecipient},...typeof n.gasLimit=="bigint"&&{gasLimit:Al(n.gasLimit)},...typeof n.number=="bigint"&&{number:Al(n.number)},...typeof n.prevRandao=="bigint"&&{prevRandao:Al(n.prevRandao)},...typeof n.time=="bigint"&&{time:Al(n.time)},...n.withdrawals&&{withdrawals:n.withdrawals.map(Zie)}}}const bS=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Bqe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],Qie="0x82ad56cb",ese="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",tse="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";class _S extends We{constructor({blockNumber:e,chain:t,contract:r}){super(`Chain "${t.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class nse extends We{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class rse extends We{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class M$ extends We{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class T5 extends We{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const VE="/docs/contract/encodeDeployData";function R$(n){const{abi:e,args:t,bytecode:r}=n;if(!t||t.length===0)return r;const i=e.find(o=>"type"in o&&o.type==="constructor");if(!i)throw new dne({docsPath:VE});if(!("inputs"in i))throw new MM({docsPath:VE});if(!i.inputs||i.inputs.length===0)throw new MM({docsPath:VE});const s=XF(i.inputs,t);return au([r,s])}function P$({blockNumber:n,chain:e,contract:t}){const r=e?.contracts?.[t];if(!r)throw new _S({chain:e,contract:{name:t}});if(n&&r.blockCreated&&r.blockCreated>n)throw new _S({blockNumber:n,chain:e,contract:{name:t,blockCreated:r.blockCreated}});return r.address}function ise(n,{docsPath:e,...t}){const r=(()=>{const i=S7(n,t);return i instanceof b5?n:i})();return new Zre(r,{docsPath:e,...t})}function N$(){let n=()=>{},e=()=>{};return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}const WE=new Map;function O$({fn:n,id:e,shouldSplitBatch:t,wait:r=0,sort:i}){const s=async()=>{const u=c();o();const h=u.map(({args:d})=>d);h.length!==0&&n(h).then(d=>{i&&Array.isArray(d)&&d.sort(i);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p?.([d[f],d])}}).catch(d=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p?.(d)}})},o=()=>WE.delete(e),a=()=>c().map(({args:u})=>u),c=()=>WE.get(e)||[],l=u=>WE.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:h,resolve:d,reject:f}=N$();return t?.([...a(),u])&&s(),c().length>0?(l({args:u,resolve:d,reject:f}),h):(l({args:u,resolve:d,reject:f}),setTimeout(s,r),h)}}}async function k$(n,e){const{account:t=n.account,authorizationList:r,batch:i=!!n.batch?.multicall,blockNumber:s,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:h,factory:d,factoryData:f,gas:p,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:w,to:E,value:x,stateOverride:C,...R}=e,k=t?Gc(t):void 0;if(u&&(d||f))throw new We("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&E)throw new We("Cannot provide both `code` & `to` as parameters.");const _=u&&h,A=d&&f&&E&&h,M=_||A,D=_?ase({code:u,data:h}):A?cse({data:h,factory:d,factoryData:f,to:E}):h;try{E5(e);const v=(typeof s=="bigint"?mt(s):void 0)||o,S=l?Jie(l):void 0,T=o$(C),L=n.chain?.formatters?.transactionRequest?.format,V=(L||T7)({...A7(R,{format:L}),from:k?.address,accessList:a,authorizationList:r,blobs:c,data:D,gas:p,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:w,to:M?void 0:E,value:x});if(i&&sse({request:V})&&!T&&!S)try{return await ose(n,{...V,blockNumber:s,blockTag:o})}catch(I){if(!(I instanceof M$)&&!(I instanceof _S))throw I}const W=(()=>{const I=[V,v];return T&&S?[...I,T,S]:T?[...I,T]:S?[...I,{},S]:I})(),F=await n.request({method:"eth_call",params:W});return F==="0x"?{data:void 0}:{data:F}}catch(P){const v=lse(P),{offchainLookup:S,offchainLookupSignature:T}=await Ct(async()=>{const{offchainLookup:L,offchainLookupSignature:U}=await import("./ccip-BHJdgQds.js");return{offchainLookup:L,offchainLookupSignature:U}},[]);if(n.ccipRead!==!1&&v?.slice(0,10)===T&&E)return{data:await S(n,{data:v,to:E})};throw M&&v?.slice(0,10)==="0x101bb98d"?new eie({factory:d}):ise(P,{...e,account:k,chain:n.chain})}}function sse({request:n}){const{data:e,to:t,...r}=n;return!(!e||e.startsWith(Qie)||!t||Object.values(r).filter(i=>typeof i<"u").length>0)}async function ose(n,e){const{batchSize:t=1024,wait:r=0}=typeof n.batch?.multicall=="object"?n.batch.multicall:{},{blockNumber:i,blockTag:s="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!n.chain)throw new M$;l=P$({blockNumber:i,chain:n.chain,contract:"multicall3"})}const h=(typeof i=="bigint"?mt(i):void 0)||s,{schedule:d}=O$({id:`${n.uid}.${h}`,wait:r,shouldSplitBatch(m){return m.reduce((y,{data:b})=>y+(b.length-2),0)>t*2},fn:async m=>{const g=m.map(w=>({allowFailure:!0,callData:w.data,target:w.to})),y=w5({abi:bS,args:[g],functionName:"aggregate3"}),b=await n.request({method:"eth_call",params:[{data:y,to:l},h]});return O7({abi:bS,args:[g],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:f,success:p}]=await d({data:o,to:c});if(!p)throw new E7({data:f});return f==="0x"?{data:void 0}:{data:f}}function ase(n){const{code:e,data:t}=n;return R$({abi:SF(["constructor(bytes, bytes)"]),bytecode:ese,args:[e,t]})}function cse(n){const{data:e,factory:t,factoryData:r,to:i}=n;return R$({abi:SF(["constructor(address, bytes, address, bytes)"]),bytecode:tse,args:[i,e,t,r]})}function lse(n){if(!(n instanceof We))return;const e=n.walk();return typeof e?.data=="object"?e.data?.data:e.data}async function D$(n,e){const{abi:t,address:r,args:i,functionName:s,...o}=e,a=w5({abi:t,args:i,functionName:s});try{const{data:c}=await wr(n,k$,"call")({...o,data:a,to:r});return O7({abi:t,args:i,functionName:s,data:c||"0x"})}catch(c){throw rb(c,{abi:t,address:r,args:i,docsPath:"/docs/contract/readContract",functionName:s})}}const qE=new Map,ZM=new Map;let use=0;function sb(n,e,t){const r=++use,i=()=>qE.get(n)||[],s=()=>{const u=i();qE.set(n,u.filter(h=>h.id!==r))},o=()=>{const u=i();if(!u.some(d=>d.id===r))return;const h=ZM.get(n);if(u.length===1&&h){const d=h();d instanceof Promise&&d.catch(()=>{})}s()},a=i();if(qE.set(n,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...h)=>{const d=i();if(d.length!==0)for(const f of d)f.fns[u]?.(...h)};const l=t(c);return typeof l=="function"&&ZM.set(n,l),o}async function ob(n){return new Promise(e=>setTimeout(e,n))}function L$(n,{emitOnBegin:e,initialWaitTime:t,interval:r}){let i=!0;const s=()=>i=!1;return(async()=>{let a;e&&(a=await n({unpoll:s}));const c=await t?.(a)??r;await ob(c);const l=async()=>{i&&(await n({unpoll:s}),await ob(r),l())};l()})(),s}const hse=new Map,dse=new Map;function fse(n){const e=(i,s)=>({clear:()=>s.delete(i),get:()=>s.get(i),set:o=>s.set(i,o)}),t=e(n,hse),r=e(n,dse);return{clear:()=>{t.clear(),r.clear()},promise:t,response:r}}async function pse(n,{cacheKey:e,cacheTime:t=Number.POSITIVE_INFINITY}){const r=fse(e),i=r.response.get();if(i&&t>0&&new Date().getTime()-i.created.getTime()<t)return i.data;let s=r.promise.get();s||(s=n(),r.promise.set(s));try{const o=await s;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const mse=n=>`blockNumber.${n}`;async function gse(n,{cacheTime:e=n.cacheTime}={}){const t=await pse(()=>n.request({method:"eth_blockNumber"}),{cacheKey:mse(n.uid),cacheTime:e});return BigInt(t)}async function yse(n,{filter:e}){const t="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const i=r.map(s=>A$(s));return!("abi"in e)||!e.abi?i:$ie({abi:e.abi,logs:i,strict:t})}async function wse(n,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}class L7 extends We{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class jE extends We{constructor({docsPath:e,metaMessages:t,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}function vse({chain:n,currentChainId:e}){if(!n)throw new rse;if(e!==n.id)throw new nse({chain:n,currentChainId:e})}function bse(n,{docsPath:e,...t}){const r=(()=>{const i=S7(n,t);return i instanceof b5?n:i})();return new Kre(r,{docsPath:e,...t})}async function _se(n,{serializedTransaction:e}){return n.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const GE=new g5(128);async function U$(n,e){const{account:t=n.account,chain:r=n.chain,accessList:i,authorizationList:s,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:h,maxPriorityFeePerGas:d,nonce:f,type:p,value:m,...g}=e;if(typeof t>"u")throw new L7({docsPath:"/docs/actions/wallet/sendTransaction"});const y=t?Gc(t):null;try{E5(e);const b=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await s$({authorization:s[0]}).catch(()=>{throw new We("`to` is required. Could not infer from `authorizationList`.")})})();if(y?.type==="json-rpc"||y===null){let w;r!==null&&(w=await wr(n,_$,"getChainId")({}),vse({currentChainId:w,chain:r}));const E=n.chain?.formatters?.transactionRequest?.format,C=(E||T7)({...A7(g,{format:E}),accessList:i,authorizationList:s,blobs:o,chainId:w,data:a,from:y?.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:h,maxPriorityFeePerGas:d,nonce:f,to:b,type:p,value:m}),R=GE.get(n.uid),k=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await n.request({method:k,params:[C]},{retryCount:0})}catch(_){if(R===!1)throw _;const A=_;if(A.name==="InvalidInputRpcError"||A.name==="InvalidParamsRpcError"||A.name==="MethodNotFoundRpcError"||A.name==="MethodNotSupportedRpcError")return await n.request({method:"wallet_sendTransaction",params:[C]},{retryCount:0}).then(M=>(GE.set(n.uid,!0),M)).catch(M=>{const D=M;throw D.name==="MethodNotFoundRpcError"||D.name==="MethodNotSupportedRpcError"?(GE.set(n.uid,!1),A):D});throw A}}if(y?.type==="local"){const w=await wr(n,N7,"prepareTransactionRequest")({account:y,accessList:i,authorizationList:s,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:h,maxPriorityFeePerGas:d,nonce:f,nonceManager:y.nonceManager,parameters:[...E$,"sidecars"],type:p,value:m,...g,to:b}),E=r?.serializers?.transaction,x=await y.signTransaction(w,{serializer:E});return await wr(n,_se,"sendRawTransaction")({serializedTransaction:x})}throw y?.type==="smart"?new jE({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new jE({docsPath:"/docs/actions/wallet/sendTransaction",type:y?.type})}catch(b){throw b instanceof jE?b:bse(b,{...e,account:y,chain:e.chain||void 0})}}async function Ese(n,e){const{abi:t,account:r=n.account,address:i,args:s,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new L7({docsPath:"/docs/contract/writeContract"});const l=r?Gc(r):null,u=w5({abi:t,args:s,functionName:a});try{return await wr(n,U$,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:i,account:l,...c})}catch(h){throw rb(h,{abi:t,address:i,args:s,docsPath:"/docs/contract/writeContract",functionName:a,sender:l?.address})}}const xse={"0x0":"reverted","0x1":"success"};function B$(n){const e={...n,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,contractAddress:n.contractAddress?n.contractAddress:null,cumulativeGasUsed:n.cumulativeGasUsed?BigInt(n.cumulativeGasUsed):null,effectiveGasPrice:n.effectiveGasPrice?BigInt(n.effectiveGasPrice):null,gasUsed:n.gasUsed?BigInt(n.gasUsed):null,logs:n.logs?n.logs.map(t=>A$(t)):null,to:n.to?n.to:null,transactionIndex:n.transactionIndex?Sh(n.transactionIndex):null,status:n.status?xse[n.status]:null,type:n.type?c$[n.type]||n.type:null};return n.blobGasPrice&&(e.blobGasPrice=BigInt(n.blobGasPrice)),n.blobGasUsed&&(e.blobGasUsed=BigInt(n.blobGasUsed)),e}const Sse=C7("transactionReceipt",B$),ES=256;let mw=ES,gw;function F$(n=11){if(!gw||mw+n>ES*2){gw="",mw=0;for(let e=0;e<ES;e++)gw+=(256+Math.random()*256|0).toString(16).substring(1)}return gw.substring(mw,mw+++n)}function $$(n){const{batch:e,chain:t,ccipRead:r,key:i="base",name:s="Base Client",type:o="base"}=n,a=t?.blockTime??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=n.pollingInterval??c,u=n.cacheTime??l,h=n.account?Gc(n.account):void 0,{config:d,request:f,value:p}=n.transport({chain:t,pollingInterval:l}),m={...d,...p},g={account:h,batch:e,cacheTime:u,ccipRead:r,chain:t,key:i,name:s,pollingInterval:l,request:f,transport:m,type:o,uid:F$()};function y(b){return w=>{const E=w(b);for(const C in g)delete E[C];const x={...b,...E};return Object.assign(x,{extend:y(x)})}}return Object.assign(g,{extend:y(g)})}const yw=new g5(8192);function Ase(n,{enabled:e=!0,id:t}){if(!e||!t)return n();if(yw.get(t))return yw.get(t);const r=n().finally(()=>yw.delete(t));return yw.set(t,r),r}function ab(n,{delay:e=100,retryCount:t=2,shouldRetry:r=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await ob(u),o({count:a+1})};try{const l=await n();i(l)}catch(l){if(a<t&&await r({count:a,error:l}))return c({error:l});s(l)}};o()})}function Cse(n,e={}){return async(t,r={})=>{const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=t;if(s?.exclude?.includes(l))throw new Id(new Error("method not supported"),{method:l});if(s?.include&&!s.include.includes(l))throw new Id(new Error("method not supported"),{method:l});const u=i?f5(`${c}.${ia(t)}`):void 0;return Ase(()=>ab(async()=>{try{return await n(t)}catch(h){const d=h;switch(d.code){case jg.code:throw new jg(d);case Gg.code:throw new Gg(d);case Kg.code:throw new Kg(d,{method:t.method});case Yg.code:throw new Yg(d);case of.code:throw new of(d);case Xg.code:throw new Xg(d);case Zg.code:throw new Zg(d);case hh.code:throw new hh(d);case C0.code:throw new C0(d);case Id.code:throw new Id(d,{method:t.method});case T0.code:throw new T0(d);case Jg.code:throw new Jg(d);case ei.code:throw new ei(d);case Qg.code:throw new Qg(d);case e2.code:throw new e2(d);case t2.code:throw new t2(d);case n2.code:throw new n2(d);case $c.code:throw new $c(d);case r2.code:throw new r2(d);case i2.code:throw new i2(d);case s2.code:throw new s2(d);case o2.code:throw new o2(d);case a2.code:throw new a2(d);case c2.code:throw new c2(d);case l2.code:throw new l2(d);case 5e3:throw new ei(d);default:throw h instanceof We?h:new nie(d)}}},{delay:({count:h,error:d})=>{if(d&&d instanceof Xm){const f=d?.headers?.get("Retry-After");if(f?.match(/\d/))return Number.parseInt(f)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Tse(h)}),{enabled:i,id:u})}}function Tse(n){return"code"in n&&typeof n.code=="number"?n.code===-1||n.code===T0.code||n.code===of.code:n instanceof Xm&&n.status?n.status===403||n.status===408||n.status===413||n.status===429||n.status===500||n.status===502||n.status===503||n.status===504:!0}function U7({key:n,methods:e,name:t,request:r,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},c){const l=F$();return{config:{key:n,methods:e,name:t,request:r,retryCount:i,retryDelay:s,timeout:o,type:a},request:Cse(r,{methods:e,retryCount:i,retryDelay:s,uid:l}),value:c}}function Ise(n,e={}){const{key:t="custom",methods:r,name:i="Custom Provider",retryDelay:s}=e;return({retryCount:o})=>U7({key:t,methods:r,name:i,request:n.request.bind(n),retryCount:e.retryCount??o,retryDelay:s,type:"custom"})}function JM(n,e={}){const{key:t="fallback",name:r="Fallback",rank:i=!1,shouldThrow:s=Mse,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...h})=>{let d=n,f=()=>{};const p=U7({key:t,name:r,async request({method:m,params:g}){let y;const b=async(w=0)=>{const E=d[w]({...h,chain:c,retryCount:0,timeout:u});try{const x=await E.request({method:m,params:g});return f({method:m,params:g,response:x,transport:E,status:"success"}),x}catch(x){if(f({error:x,method:m,params:g,transport:E,status:"error"}),s(x)||w===d.length-1||(y??=d.slice(w+1).some(C=>{const{include:R,exclude:k}=C({chain:c}).config.methods||{};return R?R.includes(m):k?!k.includes(m):!0}),!y))throw x;return b(w+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:m=>f=m,transports:d.map(m=>m({chain:c,retryCount:0}))});if(i){const m=typeof i=="object"?i:{};Rse({chain:c,interval:m.interval??l,onTransports:g=>d=g,ping:m.ping,sampleCount:m.sampleCount,timeout:m.timeout,transports:d,weights:m.weights})}return p}}function Mse(n){return!!("code"in n&&typeof n.code=="number"&&(n.code===C0.code||n.code===ei.code||Md.nodeMessage.test(n.message)||n.code===5e3))}function Rse({chain:n,interval:e=4e3,onTransports:t,ping:r,sampleCount:i=10,timeout:s=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],h=async()=>{const d=await Promise.all(o.map(async m=>{const g=m({chain:n,retryCount:0,timeout:s}),y=Date.now();let b,w;try{await(r?r({transport:g}):g.request({method:"net_listening"})),w=1}catch{w=0}finally{b=Date.now()}return{latency:b-y,success:w}}));u.push(d),u.length>i&&u.shift();const f=Math.max(...u.map(m=>Math.max(...m.map(({latency:g})=>g)))),p=o.map((m,g)=>{const y=u.map(C=>C[g].latency),w=1-y.reduce((C,R)=>C+R,0)/y.length/f,E=u.map(C=>C[g].success),x=E.reduce((C,R)=>C+R,0)/E.length;return x===0?[0,g]:[l*w+c*x,g]}).sort((m,g)=>g[0]-m[0]);t(p.map(([,m])=>o[m])),await ob(e),h()};h()}class Pse extends We{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function z$(n,{errorInstance:e=new Error("timed out"),timeout:t,signal:r}){return new Promise((i,s)=>{(async()=>{let o;try{const a=new AbortController;t>0&&(o=setTimeout(()=>{r?a.abort():s(e)},t)),i(await n({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&s(e),s(a)}finally{clearTimeout(o)}})()})}function Nse(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const QM=Nse();function Ose(n,e={}){return{async request(t){const{body:r,onRequest:i=e.onRequest,onResponse:s=e.onResponse,timeout:o=e.timeout??1e4}=t,a={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await z$(async({signal:f})=>{const p={...a,body:Array.isArray(r)?ia(r.map(b=>({jsonrpc:"2.0",id:b.id??QM.take(),...b}))):ia({jsonrpc:"2.0",id:r.id??QM.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?f:null)},m=new Request(n,p),g=await i?.(m,p)??{...p,url:n};return await fetch(g.url??n,g)},{errorInstance:new VM({body:r,url:n}),timeout:o,signal:!0});s&&await s(h);let d;if(h.headers.get("Content-Type")?.startsWith("application/json"))d=await h.json();else{d=await h.text();try{d=JSON.parse(d||"{}")}catch(f){if(h.ok)throw f;d={error:d}}}if(!h.ok)throw new Xm({body:r,details:ia(d.error)||h.statusText,headers:h.headers,status:h.status,url:n});return d}catch(h){throw h instanceof Xm||h instanceof VM?h:new Xm({body:r,cause:h,url:n})}}}}function ww(n,e={}){const{batch:t,fetchOptions:r,key:i="http",methods:s,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:h,retryCount:d,timeout:f})=>{const{batchSize:p=1e3,wait:m=0}=typeof t=="object"?t:{},g=e.retryCount??d,y=f??e.timeout??1e4,b=n||h?.rpcUrls.default.http[0];if(!b)throw new Pse;const w=Ose(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return U7({key:i,methods:s,name:o,async request({method:E,params:x}){const C={method:E,params:x},{schedule:R}=O$({id:b,wait:m,shouldSplitBatch(M){return M.length>p},fn:M=>w.request({body:M}),sort:(M,D)=>M.id-D.id}),k=async M=>t?R(M):[await w.request({body:M})],[{error:_,result:A}]=await k(C);if(u)return{error:_,result:A};if(_)throw new x7({body:C,error:_,url:b});return A},retryCount:g,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}async function kse(n){const e=bre(n,{method:"eth_newPendingTransactionFilter"}),t=await n.request({method:"eth_newPendingTransactionFilter"});return{id:t,request:e(t),type:"transaction"}}function B7(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}function Dse(n){const{authorizationList:e}=n;if(e)for(const t of e){const{chainId:r}=t,i=t.address;if(!$i(i))throw new ao({address:i});if(r<0)throw new T5({chainId:r})}F7(n)}function Lse(n){const{blobVersionedHashes:e}=n;if(e){if(e.length===0)throw new w$;for(const t of e){const r=Yr(t),i=Sh(Wg(t,0,1));if(r!==32)throw new kie({hash:t,size:r});if(i!==y$)throw new Die({hash:t,version:i})}}F7(n)}function F7(n){const{chainId:e,maxPriorityFeePerGas:t,maxFeePerGas:r,to:i}=n;if(e<=0)throw new T5({chainId:e});if(i&&!$i(i))throw new ao({address:i});if(r&&r>_5)throw new af({maxFeePerGas:r});if(t&&r&&t>r)throw new u2({maxFeePerGas:r,maxPriorityFeePerGas:t})}function Use(n){const{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:i,to:s}=n;if(e<=0)throw new T5({chainId:e});if(s&&!$i(s))throw new ao({address:s});if(t||i)throw new We("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>_5)throw new af({maxFeePerGas:r})}function Bse(n){const{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:i,to:s}=n;if(s&&!$i(s))throw new ao({address:s});if(typeof e<"u"&&e<=0)throw new T5({chainId:e});if(t||i)throw new We("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>_5)throw new af({maxFeePerGas:r})}function I5(n){if(!n||n.length===0)return[];const e=[];for(let t=0;t<n.length;t++){const{address:r,storageKeys:i}=n[t];for(let s=0;s<i.length;s++)if(i[s].length-2!==64)throw new Gre({storageKey:i[s]});if(!$i(r,{strict:!1}))throw new ao({address:r});e.push([r,i])}return e}function Fse(n,e){const t=b$(n);return t==="eip1559"?Hse(n,e):t==="eip2930"?Vse(n,e):t==="eip4844"?zse(n,e):t==="eip7702"?$se(n,e):Wse(n,e)}function $se(n,e){const{authorizationList:t,chainId:r,gas:i,nonce:s,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:h}=n;Dse(n);const d=I5(u),f=qse(t);return au(["0x04",Ch([mt(r),s?mt(s):"0x",l?mt(l):"0x",c?mt(c):"0x",i?mt(i):"0x",o??"0x",a?mt(a):"0x",h??"0x",d,f,..._y(n,e)])])}function zse(n,e){const{chainId:t,gas:r,nonce:i,to:s,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:h}=n;Lse(n);let d=n.blobVersionedHashes,f=n.sidecars;if(n.blobs&&(typeof d>"u"||typeof f>"u")){const w=typeof n.blobs[0]=="string"?n.blobs:n.blobs.map(C=>Rs(C)),E=n.kzg,x=M7({blobs:w,kzg:E});if(typeof d>"u"&&(d=p$({commitments:x})),typeof f>"u"){const C=R7({blobs:w,commitments:x,kzg:E});f=v$({blobs:w,commitments:x,proofs:C})}}const p=I5(u),m=[mt(t),i?mt(i):"0x",l?mt(l):"0x",c?mt(c):"0x",r?mt(r):"0x",s??"0x",o?mt(o):"0x",h??"0x",p,a?mt(a):"0x",d??[],..._y(n,e)],g=[],y=[],b=[];if(f)for(let w=0;w<f.length;w++){const{blob:E,commitment:x,proof:C}=f[w];g.push(E),y.push(x),b.push(C)}return au(["0x03",Ch(f?[m,g,y,b]:m)])}function Hse(n,e){const{chainId:t,gas:r,nonce:i,to:s,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:u}=n;F7(n);const h=I5(l),d=[mt(t),i?mt(i):"0x",c?mt(c):"0x",a?mt(a):"0x",r?mt(r):"0x",s??"0x",o?mt(o):"0x",u??"0x",h,..._y(n,e)];return au(["0x02",Ch(d)])}function Vse(n,e){const{chainId:t,gas:r,data:i,nonce:s,to:o,value:a,accessList:c,gasPrice:l}=n;Use(n);const u=I5(c),h=[mt(t),s?mt(s):"0x",l?mt(l):"0x",r?mt(r):"0x",o??"0x",a?mt(a):"0x",i??"0x",u,..._y(n,e)];return au(["0x01",Ch(h)])}function Wse(n,e){const{chainId:t=0,gas:r,data:i,nonce:s,to:o,value:a,gasPrice:c}=n;Bse(n);let l=[s?mt(s):"0x",c?mt(c):"0x",r?mt(r):"0x",o??"0x",a?mt(a):"0x",i??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(t>0)return BigInt(t*2)+BigInt(35n+e.v-27n);const f=27n+(e.v===27n?0n:1n);if(e.v!==f)throw new qre({v:e.v});return f})(),h=Gl(e.r),d=Gl(e.s);l=[...l,mt(u),h==="0x00"?"0x":h,d==="0x00"?"0x":d]}else t>0&&(l=[...l,mt(t),"0x","0x"]);return Ch(l)}function _y(n,e){const t=e??n,{v:r,yParity:i}=t;if(typeof t.r>"u")return[];if(typeof t.s>"u")return[];if(typeof r>"u"&&typeof i>"u")return[];const s=Gl(t.r),o=Gl(t.s);return[typeof i=="number"?i?mt(1):"0x":r===0n?"0x":r===1n?mt(1):r===27n?"0x":mt(1),s==="0x00"?"0x":s,o==="0x00"?"0x":o]}function qse(n){if(!n||n.length===0)return[];const e=[];for(const t of n){const{chainId:r,nonce:i,...s}=t,o=t.address;e.push([r?Ha(r):"0x",o,i?Ha(i):"0x",..._y({},s)])}return e}class jse extends We{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Gse(n,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(n))throw new jse({value:n});let[t,r="0"]=n.split(".");const i=t.startsWith("-");if(i&&(t=t.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(t=`${BigInt(t)+1n}`),r="";else if(r.length>e){const[s,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):r=`${s}${c}`,r.length>e&&(r=r.slice(1),t=`${BigInt(t)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${i?"-":""}${t}${r}`)}async function H$(n,{blockHash:e,blockNumber:t,blockTag:r,hash:i,index:s}){const o=r||"latest",a=t!==void 0?mt(t):void 0;let c=null;if(i?c=await n.request({method:"eth_getTransactionByHash",params:[i]},{dedupe:!0}):e?c=await n.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,mt(s)]},{dedupe:!0}):c=await n.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,mt(s)]},{dedupe:!!a}),!c)throw new e$({blockHash:e,blockNumber:t,blockTag:o,hash:i,index:s});return(n.chain?.formatters?.transaction?.format||x5)(c)}async function eR(n,{hash:e}){const t=await n.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!t)throw new t$({hash:e});return(n.chain?.formatters?.transactionReceipt?.format||B$)(t)}async function Kse(n,e){const{account:t,allowFailure:r=!0,batchSize:i,blockNumber:s,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=i??(typeof n.batch?.multicall=="object"&&n.batch.multicall.batchSize||1024);let h=a;if(!h){if(!n.chain)throw new Error("client chain not configured. multicallAddress is required.");h=P$({blockNumber:s,chain:n.chain,contract:"multicall3"})}const d=[[]];let f=0,p=0;for(let y=0;y<l.length;y++){const{abi:b,address:w,args:E,functionName:x}=l[y];try{const C=w5({abi:b,args:E,functionName:x});p+=(C.length-2)/2,u>0&&p>u&&d[f].length>0&&(f++,p=(C.length-2)/2,d[f]=[]),d[f]=[...d[f],{allowFailure:!0,callData:C,target:w}]}catch(C){const R=rb(C,{abi:b,address:w,args:E,docsPath:"/docs/contract/multicall",functionName:x,sender:t});if(!r)throw R;d[f]=[...d[f],{allowFailure:!0,callData:"0x",target:w}]}}const m=await Promise.allSettled(d.map(y=>wr(n,D$,"readContract")({abi:bS,account:t,address:h,args:[y],blockNumber:s,blockTag:o,functionName:"aggregate3",stateOverride:c}))),g=[];for(let y=0;y<m.length;y++){const b=m[y];if(b.status==="rejected"){if(!r)throw b.reason;for(let E=0;E<d[y].length;E++)g.push({status:"failure",error:b.reason,result:void 0});continue}const w=b.value;for(let E=0;E<w.length;E++){const{returnData:x,success:C}=w[E],{callData:R}=d[y][E],{abi:k,address:_,functionName:A,args:M}=l[g.length];try{if(R==="0x")throw new d5;if(!C)throw new E7({data:x});const D=O7({abi:k,args:M,data:x,functionName:A});g.push(r?{result:D,status:"success"}:D)}catch(D){const P=rb(D,{abi:k,address:_,args:M,docsPath:"/docs/contract/multicall",functionName:A});if(!r)throw P;g.push({error:P,result:void 0,status:"failure"})}}}if(g.length!==l.length)throw new We("multicall results mismatch");return g}class V$ extends u7{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Hne(e);const r=m5(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Ah(s)}update(e){return x0(this),this.iHash.update(e),this}digestInto(e){x0(this),la(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const W$=(n,e,t)=>new V$(n,e).update(t).digest();W$.create=(n,e)=>new V$(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qs=BigInt(0),Ui=BigInt(1),Rd=BigInt(2),Yse=BigInt(3),q$=BigInt(4),j$=BigInt(5),G$=BigInt(8);function zr(n,e){const t=n%e;return t>=Qs?t:e+t}function Nr(n,e,t){let r=n;for(;e-- >Qs;)r*=r,r%=t;return r}function tR(n,e){if(n===Qs)throw new Error("invert: expected non-zero number");if(e<=Qs)throw new Error("invert: expected positive modulus, got "+e);let t=zr(n,e),r=e,i=Qs,s=Ui;for(;t!==Qs;){const a=r/t,c=r%t,l=i-s*a;r=t,t=c,i=s,s=l}if(r!==Ui)throw new Error("invert: does not exist");return zr(i,e)}function K$(n,e){const t=(n.ORDER+Ui)/q$,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function Xse(n,e){const t=(n.ORDER-j$)/G$,r=n.mul(e,Rd),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,Rd),i),a=n.mul(s,n.sub(o,n.ONE));if(!n.eql(n.sqr(a),e))throw new Error("Cannot find square root");return a}function Zse(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-Ui,t=0;for(;e%Rd===Qs;)e/=Rd,t++;let r=Rd;const i=n1(n);for(;nR(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return K$;let s=i.pow(r,e);const o=(e+Ui)/Rd;return function(c,l){if(c.is0(l))return l;if(nR(c,l)!==1)throw new Error("Cannot find square root");let u=t,h=c.mul(c.ONE,s),d=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let p=1,m=c.sqr(d);for(;!c.eql(m,c.ONE);)if(p++,m=c.sqr(m),p===u)throw new Error("Cannot find square root");const g=Ui<<BigInt(u-p-1),y=c.pow(h,g);u=p,h=c.sqr(y),d=c.mul(d,h),f=c.mul(f,y)}return f}}function Jse(n){return n%q$===Yse?K$:n%G$===j$?Xse:Zse(n)}const Qse=(n,e)=>(zr(n,e)&Ui)===Ui,eoe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function toe(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=eoe.reduce((r,i)=>(r[i]="function",r),e);return by(n,t),n}function noe(n,e,t){if(t<Qs)throw new Error("invalid exponent, negatives unsupported");if(t===Qs)return n.ONE;if(t===Ui)return e;let r=n.ONE,i=e;for(;t>Qs;)t&Ui&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Ui;return r}function Y$(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,a,c)=>n.is0(a)?o:(r[c]=o,n.mul(o,a)),n.ONE),s=n.inv(i);return e.reduceRight((o,a,c)=>n.is0(a)?o:(r[c]=n.mul(o,r[c]),n.mul(o,a)),s),r}function nR(n,e){const t=(n.ORDER-Ui)/Rd,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function roe(n,e){e!==void 0&&Vg(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function n1(n,e,t=!1,r={}){if(n<=Qs)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(i=u.BITS),u.sqrt&&(s=u.sqrt),typeof u.isLE=="boolean"&&(t=u.isLE)}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:o,nByteLength:a}=roe(n,i);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:n,isLE:t,BITS:o,BYTES:a,MASK:C5(o),ZERO:Qs,ONE:Ui,create:u=>zr(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Qs<=u&&u<n},is0:u=>u===Qs,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Ui)===Ui,neg:u=>zr(-u,n),eql:(u,h)=>u===h,sqr:u=>zr(u*u,n),add:(u,h)=>zr(u+h,n),sub:(u,h)=>zr(u-h,n),mul:(u,h)=>zr(u*h,n),pow:(u,h)=>noe(l,u,h),div:(u,h)=>zr(u*tR(h,n),n),sqrN:u=>u*u,addN:(u,h)=>u+h,subN:(u,h)=>u-h,mulN:(u,h)=>u*h,inv:u=>tR(u,n),sqrt:s||(u=>(c||(c=Jse(n)),c(l,u))),toBytes:u=>t?A5(u,a):D7(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return t?d2(u):S5(u)},invertBatch:u=>Y$(l,u),cmov:(u,h,d)=>d?h:u});return Object.freeze(l)}function X$(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Z$(n){const e=X$(n);return e+Math.ceil(e/2)}function ioe(n,e,t=!1){const r=n.length,i=X$(e),s=Z$(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?d2(n):S5(n),a=zr(o,e-Ui)+Ui;return t?A5(a,i):D7(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const I0=BigInt(0),Pd=BigInt(1);function Zm(n,e){const t=e.negate();return n?t:e}function J$(n,e,t){const r=e==="pz"?o=>o.pz:o=>o.ez,i=Y$(n.Fp,t.map(r));return t.map((o,a)=>o.toAffine(i[a])).map(n.fromAffine)}function Q$(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function KE(n,e){Q$(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=C5(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function rR(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let a=Number(n&i),c=n>>o;a>r&&(a-=s,c+=Pd);const l=e*r,u=l+Math.abs(a)-1,h=a===0,d=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:h,isNeg:d,isNegF:f,offsetF:l}}function soe(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function ooe(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const YE=new WeakMap,ez=new WeakMap;function XE(n){return ez.get(n)||1}function iR(n){if(n!==I0)throw new Error("invalid wNAF")}function tz(n,e){return{constTimeNegate:Zm,hasPrecomputes(t){return XE(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>I0;)r&Pd&&(i=i.add(s)),s=s.double(),r>>=Pd;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=KE(r,e),o=[];let a=t,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,r,i){let s=n.ZERO,o=n.BASE;const a=KE(t,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:h,isNeg:d,isNegF:f,offsetF:p}=rR(i,c,a);i=l,h?o=o.add(Zm(f,r[p])):s=s.add(Zm(d,r[u]))}return iR(i),{p:s,f:o}},wNAFUnsafe(t,r,i,s=n.ZERO){const o=KE(t,e);for(let a=0;a<o.windows&&i!==I0;a++){const{nextN:c,offset:l,isZero:u,isNeg:h}=rR(i,a,o);if(i=c,!u){const d=r[l];s=s.add(h?d.negate():d)}}return iR(i),s},getPrecomputes(t,r,i){let s=YE.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&(typeof i=="function"&&(s=i(s)),YE.set(r,s))),s},wNAFCached(t,r,i){const s=XE(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=XE(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){Q$(r,e),ez.set(t,r),YE.delete(t)}}}function aoe(n,e,t,r){let i=e,s=n.ZERO,o=n.ZERO;for(;t>I0||r>I0;)t&Pd&&(s=s.add(i)),r&Pd&&(o=o.add(i)),i=i.double(),t>>=Pd,r>>=Pd;return{p1:s,p2:o}}function nz(n,e,t,r){soe(t,n),ooe(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,a=Vie(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=C5(c),u=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let f=h;f>=0;f-=c){u.fill(o);for(let m=0;m<s;m++){const g=r[m],y=Number(g>>BigInt(f)&l);u[y]=u[y].add(t[m])}let p=o;for(let m=u.length-1,g=o;m>0;m--)g=g.add(u[m]),p=p.add(g);if(d=d.add(p),f!==0)for(let m=0;m<c;m++)d=d.double()}return d}function sR(n,e){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return toe(e),e}else return n1(n)}function rz(n,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>I0))throw new Error(`CURVE.${a} must be positive bigint`)}const r=sR(e.p,t.Fp),i=sR(e.n,t.Fn),o=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function oR(n){n.lowS!==void 0&&cf("lowS",n.lowS),n.prehash!==void 0&&cf("prehash",n.prehash)}class coe extends Error{constructor(e=""){super(e)}}const Cl={Err:coe,_tlv:{encode:(n,e)=>{const{Err:t}=Cl;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=pw(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?pw(i.length/2|128):"";return pw(n)+s+i+e},decode(n,e){const{Err:t}=Cl;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new t("tlv.decode: length bytes not complete");if(l[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=Cl;if(n<Jm)throw new e("integer: negative integers are not allowed");let t=pw(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=Cl;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return S5(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=Cl,i=$r("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(l)}},hexFromSig(n){const{_tlv:e,_int:t}=Cl,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},Jm=BigInt(0),Qm=BigInt(1),loe=BigInt(2),vw=BigInt(3),uoe=BigInt(4);function hoe(n,e,t){function r(i){const s=n.sqr(i),o=n.mul(s,i);return n.add(n.add(o,n.mul(i,e)),t)}return r}function iz(n,e,t){const{BYTES:r}=n;function i(s){let o;if(typeof s=="bigint")o=s;else{let a=$r("private key",s);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=n.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof s}`)}}if(t&&(o=n.create(o)),!n.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function doe(n,e={}){const{Fp:t,Fn:r}=rz("weierstrass",n,e),{h:i,n:s}=n;by(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(n.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(k,_,A){const{x:M,y:D}=_.toAffine(),P=t.toBytes(M);if(cf("isCompressed",A),A){a();const v=!t.isOdd(D);return Dl(sz(v),P)}else return Dl(Uint8Array.of(4),P,t.toBytes(D))}function l(k){la(k);const _=t.BYTES,A=_+1,M=2*_+1,D=k.length,P=k[0],v=k.subarray(1);if(D===A&&(P===2||P===3)){const S=t.fromBytes(v);if(!t.isValid(S))throw new Error("bad point: is not on curve, wrong x");const T=d(S);let L;try{L=t.sqrt(T)}catch(W){const F=W instanceof Error?": "+W.message:"";throw new Error("bad point: is not on curve, sqrt error"+F)}a();const U=t.isOdd(L);return(P&1)===1!==U&&(L=t.neg(L)),{x:S,y:L}}else if(D===M&&P===4){const S=t.fromBytes(v.subarray(_*0,_*1)),T=t.fromBytes(v.subarray(_*1,_*2));if(!f(S,T))throw new Error("bad point: is not on curve");return{x:S,y:T}}else throw new Error(`bad point: got length ${D}, expected compressed=${A} or uncompressed=${M}`)}const u=e.toBytes||c,h=e.fromBytes||l,d=hoe(t,n.a,n.b);function f(k,_){const A=t.sqr(_),M=d(k);return t.eql(A,M)}if(!f(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const p=t.mul(t.pow(n.a,vw),uoe),m=t.mul(t.sqr(n.b),BigInt(27));if(t.is0(t.add(p,m)))throw new Error("bad curve params: a or b");function g(k,_,A=!1){if(!t.isValid(_)||A&&t.is0(_))throw new Error(`bad point coordinate ${k}`);return _}function y(k){if(!(k instanceof x))throw new Error("ProjectivePoint expected")}const b=ib((k,_)=>{const{px:A,py:M,pz:D}=k;if(t.eql(D,t.ONE))return{x:A,y:M};const P=k.is0();_==null&&(_=P?t.ONE:t.inv(D));const v=t.mul(A,_),S=t.mul(M,_),T=t.mul(D,_);if(P)return{x:t.ZERO,y:t.ZERO};if(!t.eql(T,t.ONE))throw new Error("invZ was invalid");return{x:v,y:S}}),w=ib(k=>{if(k.is0()){if(e.allowInfinityPoint&&!t.is0(k.py))return;throw new Error("bad point: ZERO")}const{x:_,y:A}=k.toAffine();if(!t.isValid(_)||!t.isValid(A))throw new Error("bad point: x or y not field elements");if(!f(_,A))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function E(k,_,A,M,D){return A=new x(t.mul(A.px,k),A.py,A.pz),_=Zm(M,_),A=Zm(D,A),_.add(A)}class x{constructor(_,A,M){this.px=g("x",_),this.py=g("y",A,!0),this.pz=g("z",M),Object.freeze(this)}static fromAffine(_){const{x:A,y:M}=_||{};if(!_||!t.isValid(A)||!t.isValid(M))throw new Error("invalid affine point");if(_ instanceof x)throw new Error("projective point not allowed");return t.is0(A)&&t.is0(M)?x.ZERO:new x(A,M,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){return J$(x,"pz",_)}static fromBytes(_){return la(_),x.fromHex(_)}static fromHex(_){const A=x.fromAffine(h($r("pointHex",_)));return A.assertValidity(),A}static fromPrivateKey(_){const A=iz(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return x.BASE.multiply(A(_))}static msm(_,A){return nz(x,r,_,A)}precompute(_=8,A=!0){return R.setWindowSize(this,_),A||this.multiply(vw),this}_setWindowSize(_){this.precompute(_)}assertValidity(){w(this)}hasEvenY(){const{y:_}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(_)}equals(_){y(_);const{px:A,py:M,pz:D}=this,{px:P,py:v,pz:S}=_,T=t.eql(t.mul(A,S),t.mul(P,D)),L=t.eql(t.mul(M,S),t.mul(v,D));return T&&L}negate(){return new x(this.px,t.neg(this.py),this.pz)}double(){const{a:_,b:A}=n,M=t.mul(A,vw),{px:D,py:P,pz:v}=this;let S=t.ZERO,T=t.ZERO,L=t.ZERO,U=t.mul(D,D),V=t.mul(P,P),W=t.mul(v,v),F=t.mul(D,P);return F=t.add(F,F),L=t.mul(D,v),L=t.add(L,L),S=t.mul(_,L),T=t.mul(M,W),T=t.add(S,T),S=t.sub(V,T),T=t.add(V,T),T=t.mul(S,T),S=t.mul(F,S),L=t.mul(M,L),W=t.mul(_,W),F=t.sub(U,W),F=t.mul(_,F),F=t.add(F,L),L=t.add(U,U),U=t.add(L,U),U=t.add(U,W),U=t.mul(U,F),T=t.add(T,U),W=t.mul(P,v),W=t.add(W,W),U=t.mul(W,F),S=t.sub(S,U),L=t.mul(W,V),L=t.add(L,L),L=t.add(L,L),new x(S,T,L)}add(_){y(_);const{px:A,py:M,pz:D}=this,{px:P,py:v,pz:S}=_;let T=t.ZERO,L=t.ZERO,U=t.ZERO;const V=n.a,W=t.mul(n.b,vw);let F=t.mul(A,P),I=t.mul(M,v),N=t.mul(D,S),$=t.add(A,M),j=t.add(P,v);$=t.mul($,j),j=t.add(F,I),$=t.sub($,j),j=t.add(A,D);let te=t.add(P,S);return j=t.mul(j,te),te=t.add(F,N),j=t.sub(j,te),te=t.add(M,D),T=t.add(v,S),te=t.mul(te,T),T=t.add(I,N),te=t.sub(te,T),U=t.mul(V,j),T=t.mul(W,N),U=t.add(T,U),T=t.sub(I,U),U=t.add(I,U),L=t.mul(T,U),I=t.add(F,F),I=t.add(I,F),N=t.mul(V,N),j=t.mul(W,j),I=t.add(I,N),N=t.sub(F,N),N=t.mul(V,N),j=t.add(j,N),F=t.mul(I,j),L=t.add(L,F),F=t.mul(te,j),T=t.mul($,T),T=t.sub(T,F),F=t.mul($,I),U=t.mul(te,U),U=t.add(U,F),new x(T,L,U)}subtract(_){return this.add(_.negate())}is0(){return this.equals(x.ZERO)}multiply(_){const{endo:A}=e;if(!r.isValidNot0(_))throw new Error("invalid scalar: out of range");let M,D;const P=v=>R.wNAFCached(this,v,x.normalizeZ);if(A){const{k1neg:v,k1:S,k2neg:T,k2:L}=A.splitScalar(_),{p:U,f:V}=P(S),{p:W,f:F}=P(L);D=V.add(F),M=E(A.beta,U,W,v,T)}else{const{p:v,f:S}=P(_);M=v,D=S}return x.normalizeZ([M,D])[0]}multiplyUnsafe(_){const{endo:A}=e,M=this;if(!r.isValid(_))throw new Error("invalid scalar: out of range");if(_===Jm||M.is0())return x.ZERO;if(_===Qm)return M;if(R.hasPrecomputes(this))return this.multiply(_);if(A){const{k1neg:D,k1:P,k2neg:v,k2:S}=A.splitScalar(_),{p1:T,p2:L}=aoe(x,M,P,S);return E(A.beta,T,L,D,v)}else return R.wNAFCachedUnsafe(M,_)}multiplyAndAddUnsafe(_,A,M){const D=this.multiplyUnsafe(A).add(_.multiplyUnsafe(M));return D.is0()?void 0:D}toAffine(_){return b(this,_)}isTorsionFree(){const{isTorsionFree:_}=e;return i===Qm?!0:_?_(x,this):R.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:_}=e;return i===Qm?this:_?_(x,this):this.multiplyUnsafe(i)}toBytes(_=!0){return cf("isCompressed",_),this.assertValidity(),u(x,this,_)}toRawBytes(_=!0){return this.toBytes(_)}toHex(_=!0){return S0(this.toBytes(_))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}x.BASE=new x(n.Gx,n.Gy,t.ONE),x.ZERO=new x(t.ZERO,t.ONE,t.ZERO),x.Fp=t,x.Fn=r;const C=r.BITS,R=tz(x,e.endo?Math.ceil(C/2):C);return x}function sz(n){return Uint8Array.of(n?2:3)}function foe(n,e,t={}){by(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||$F,i=e.hmac||((M,...D)=>W$(e.hash,M,Dl(...D))),{Fp:s,Fn:o}=n,{ORDER:a,BITS:c}=o;function l(M){const D=a>>Qm;return M>D}function u(M){return l(M)?o.neg(M):M}function h(M,D){if(!o.isValidNot0(D))throw new Error(`invalid signature ${M}: out of range 1..CURVE.n`)}class d{constructor(D,P,v){h("r",D),h("s",P),this.r=D,this.s=P,v!=null&&(this.recovery=v),Object.freeze(this)}static fromCompact(D){const P=o.BYTES,v=$r("compactSignature",D,P*2);return new d(o.fromBytes(v.subarray(0,P)),o.fromBytes(v.subarray(P,P*2)))}static fromDER(D){const{r:P,s:v}=Cl.toSig($r("DER",D));return new d(P,v)}assertValidity(){}addRecoveryBit(D){return new d(this.r,this.s,D)}recoverPublicKey(D){const P=s.ORDER,{r:v,s:S,recovery:T}=this;if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");if(a*loe<P&&T>1)throw new Error("recovery id is ambiguous for h>1 curve");const U=T===2||T===3?v+a:v;if(!s.isValid(U))throw new Error("recovery id 2 or 3 invalid");const V=s.toBytes(U),W=n.fromHex(Dl(sz((T&1)===0),V)),F=o.inv(U),I=w($r("msgHash",D)),N=o.create(-I*F),$=o.create(S*F),j=n.BASE.multiplyUnsafe(N).add(W.multiplyUnsafe($));if(j.is0())throw new Error("point at infinify");return j.assertValidity(),j}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,o.neg(this.s),this.recovery):this}toBytes(D){if(D==="compact")return Dl(o.toBytes(this.r),o.toBytes(this.s));if(D==="der")return l7(Cl.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return S0(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return S0(this.toBytes("compact"))}}const f=iz(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),p={isValidPrivateKey(M){try{return f(M),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const M=a;return ioe(r(Z$(M)),M)},precompute(M=8,D=n.BASE){return D.precompute(M,!1)}};function m(M,D=!0){return n.fromPrivateKey(M).toBytes(D)}function g(M){if(typeof M=="bigint")return!1;if(M instanceof n)return!0;const P=$r("key",M).length,v=s.BYTES,S=v+1,T=2*v+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===S))return P===S||P===T}function y(M,D,P=!0){if(g(M)===!0)throw new Error("first arg must be private key");if(g(D)===!1)throw new Error("second arg must be public key");return n.fromHex(D).multiply(f(M)).toBytes(P)}const b=e.bits2int||function(M){if(M.length>8192)throw new Error("input is too large");const D=S5(M),P=M.length*8-c;return P>0?D>>BigInt(P):D},w=e.bits2int_modN||function(M){return o.create(b(M))},E=C5(c);function x(M){return Vp("num < 2^"+c,M,Jm,E),o.toBytes(M)}function C(M,D,P=R){if(["recovered","canonical"].some($=>$ in P))throw new Error("sign() legacy options not supported");const{hash:v}=e;let{lowS:S,prehash:T,extraEntropy:L}=P;S==null&&(S=!0),M=$r("msgHash",M),oR(P),T&&(M=$r("prehashed msgHash",v(M)));const U=w(M),V=f(D),W=[x(V),x(U)];if(L!=null&&L!==!1){const $=L===!0?r(s.BYTES):L;W.push($r("extraEntropy",$))}const F=Dl(...W),I=U;function N($){const j=b($);if(!o.isValidNot0(j))return;const te=o.inv(j),ce=n.BASE.multiply(j).toAffine(),ve=o.create(ce.x);if(ve===Jm)return;const Te=o.create(te*o.create(I+ve*V));if(Te===Jm)return;let $e=(ce.x===ve?0:2)|Number(ce.y&Qm),pe=Te;return S&&l(Te)&&(pe=u(Te),$e^=1),new d(ve,pe,$e)}return{seed:F,k2sig:N}}const R={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function _(M,D,P=R){const{seed:v,k2sig:S}=C(M,D,P);return Wie(e.hash.outputLen,o.BYTES,i)(v,S)}n.BASE.precompute(8);function A(M,D,P,v=k){const S=M;D=$r("msgHash",D),P=$r("publicKey",P),oR(v);const{lowS:T,prehash:L,format:U}=v;if("strict"in v)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&!["compact","der","js"].includes(U))throw new Error('format must be "compact", "der" or "js"');const V=typeof S=="string"||c7(S),W=!V&&!U&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!V&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let F,I;try{if(W)if(U===void 0||U==="js")F=new d(S.r,S.s);else throw new Error("invalid format");if(V){try{U!=="compact"&&(F=d.fromDER(S))}catch(pe){if(!(pe instanceof Cl.Err))throw pe}!F&&U!=="der"&&(F=d.fromCompact(S))}I=n.fromHex(P)}catch{return!1}if(!F||T&&F.hasHighS())return!1;L&&(D=e.hash(D));const{r:N,s:$}=F,j=w(D),te=o.inv($),ce=o.create(j*te),ve=o.create(N*te),Te=n.BASE.multiplyUnsafe(ce).add(I.multiplyUnsafe(ve));return Te.is0()?!1:o.create(Te.x)===N}return Object.freeze({getPublicKey:m,getSharedSecret:y,sign:_,verify:A,utils:p,Point:n,Signature:d})}function poe(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=n1(e.n,n.nBitLength),i={Fp:t,Fn:r,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:i}}function moe(n){const{CURVE:e,curveOpts:t}=poe(n),r={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:r}}function goe(n,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:n})}function yoe(n){const{CURVE:e,curveOpts:t,ecdsaOpts:r}=moe(n),i=doe(e,t),s=foe(i,r,t);return goe(n,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function woe(n,e){const t=r=>yoe({...n,hash:r});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cb={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const voe=BigInt(1),xS=BigInt(2),aR=(n,e)=>(n+e/xS)/e;function boe(n){const e=cb.p,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,u=l*l*n%e,h=Nr(u,t,e)*u%e,d=Nr(h,t,e)*u%e,f=Nr(d,xS,e)*l%e,p=Nr(f,i,e)*f%e,m=Nr(p,s,e)*p%e,g=Nr(m,a,e)*m%e,y=Nr(g,c,e)*g%e,b=Nr(y,a,e)*m%e,w=Nr(b,t,e)*u%e,E=Nr(w,o,e)*p%e,x=Nr(E,r,e)*l%e,C=Nr(x,xS,e);if(!SS.eql(SS.sqr(C),n))throw new Error("Cannot find square root");return C}const SS=n1(cb.p,void 0,void 0,{sqrt:boe}),$7=woe({...cb,Fp:SS,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=cb.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-voe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=aR(s*n,e),c=aR(-r*n,e);let l=zr(n-a*t-c*i,e),u=zr(-a*r-c*s,e);const h=l>o,d=u>o;if(h&&(l=e-l),d&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},f$),_oe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:$7},Symbol.toStringTag,{value:"Module"}));function Eoe(n,{emitOnBegin:e=!1,emitMissed:t=!1,onBlockNumber:r,onError:i,poll:s,pollingInterval:o=n.pollingInterval}){const a=typeof s<"u"?s:!(n.transport.type==="webSocket"||n.transport.type==="ipc"||n.transport.type==="fallback"&&(n.transport.transports[0].config.type==="webSocket"||n.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const h=ia(["watchBlockNumber",n.uid,e,t,o]);return sb(h,{onBlockNumber:r,onError:i},d=>L$(async()=>{try{const f=await wr(n,gse,"getBlockNumber")({cacheTime:0});if(c){if(f===c)return;if(f-c>1&&t)for(let p=c+1n;p<f;p++)d.onBlockNumber(p,c),c=p}(!c||f>c)&&(d.onBlockNumber(f,c),c=f)}catch(f){d.onError?.(f)}},{emitOnBegin:e,interval:o}))})():(()=>{const h=ia(["watchBlockNumber",n.uid,e,t]);return sb(h,{onBlockNumber:r,onError:i},d=>{let f=!0,p=()=>f=!1;return(async()=>{try{const m=(()=>{if(n.transport.type==="fallback"){const y=n.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:n.transport}return n.transport})(),{unsubscribe:g}=await m.subscribe({params:["newHeads"],onData(y){if(!f)return;const b=ka(y.result?.number);d.onBlockNumber(b,c),c=b},onError(y){d.onError?.(y)}});p=g,f||p()}catch(m){i?.(m)}})(),()=>p()})})()}async function xoe(n,{confirmations:e=1,hash:t,onReplaced:r,pollingInterval:i=n.pollingInterval,retryCount:s=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=ia(["waitForTransactionReceipt",n.uid,t]);let l,u,h,d=!1,f,p;const{promise:m,resolve:g,reject:y}=N$(),b=a?setTimeout(()=>{p(),f(),y(new Yre({hash:t}))},a):void 0;return f=sb(c,{onReplaced:r,resolve:g,reject:y},w=>{p=wr(n,Eoe,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:i,async onBlockNumber(E){const x=R=>{clearTimeout(b),p(),R(),f()};let C=E;if(!d)try{if(h){if(e>1&&(!h.blockNumber||C-h.blockNumber+1n<e))return;x(()=>w.resolve(h));return}if(l||(d=!0,await ab(async()=>{l=await wr(n,H$,"getTransaction")({hash:t}),l.blockNumber&&(C=l.blockNumber)},{delay:o,retryCount:s}),d=!1),h=await wr(n,eR,"getTransactionReceipt")({hash:t}),e>1&&(!h.blockNumber||C-h.blockNumber+1n<e))return;x(()=>w.resolve(h))}catch(R){if(R instanceof e$||R instanceof t$){if(!l){d=!1;return}try{u=l,d=!0;const k=await ab(()=>wr(n,h2,"getBlock")({blockNumber:C,includeTransactions:!0}),{delay:o,retryCount:s,shouldRetry:({error:M})=>M instanceof a$});d=!1;const _=k.transactions.find(({from:M,nonce:D})=>M===u.from&&D===u.nonce);if(!_||(h=await wr(n,eR,"getTransactionReceipt")({hash:_.hash}),e>1&&(!h.blockNumber||C-h.blockNumber+1n<e)))return;let A="replaced";_.to===u.to&&_.value===u.value&&_.input===u.input?A="repriced":_.from===_.to&&_.value===0n&&(A="cancelled"),x(()=>{w.onReplaced?.({reason:A,replacedTransaction:u,transaction:_,transactionReceipt:h}),w.resolve(h)})}catch(k){x(()=>w.reject(k))}}else x(()=>w.reject(R))}}})}),m}function Soe(n,{batch:e=!0,onError:t,onTransactions:r,poll:i,pollingInterval:s=n.pollingInterval}){return(typeof i<"u"?i:n.transport.type!=="webSocket"&&n.transport.type!=="ipc")?(()=>{const l=ia(["watchPendingTransactions",n.uid,e,s]);return sb(l,{onTransactions:r,onError:t},u=>{let h;const d=L$(async()=>{try{if(!h)try{h=await wr(n,kse,"createPendingTransactionFilter")({});return}catch(p){throw d(),p}const f=await wr(n,yse,"getFilterChanges")({filter:h});if(f.length===0)return;if(e)u.onTransactions(f);else for(const p of f)u.onTransactions([p])}catch(f){u.onError?.(f)}},{emitOnBegin:!0,interval:s});return async()=>{h&&await wr(n,wse,"uninstallFilter")({filter:h}),d()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:h}=await n.transport.subscribe({params:["newPendingTransactions"],onData(d){if(!l)return;const f=d.result;r([f])},onError(d){t?.(d)}});u=h,l||u()}catch(h){t?.(h)}})(),()=>u()})()}async function Aoe(n,{account:e=n.account,message:t}){if(!e)throw new L7({docsPath:"/docs/actions/wallet/signMessage"});const r=Gc(e);if(r.signMessage)return r.signMessage({message:t});const i=typeof t=="string"?f5(t):t.raw instanceof Uint8Array?Ha(t.raw):t.raw;return n.request({method:"personal_sign",params:[i,r.address]},{retryCount:0})}const ZE={createBalance(n,e){const t={name:n.metadata.name||"",symbol:n.metadata.symbol||"",decimals:n.metadata.decimals||0,value:n.metadata.value||0,price:n.metadata.price||0,iconUrl:n.metadata.iconUrl||""};return{name:t.name,symbol:t.symbol,chainId:e,address:n.address==="native"?void 0:this.convertAddressToCAIP10Address(n.address,e),value:t.value,price:t.price,quantity:{decimals:t.decimals.toString(),numeric:this.convertHexToBalance({hex:n.balance,decimals:t.decimals})},iconUrl:t.iconUrl}},convertHexToBalance({hex:n,decimals:e}){return t1(BigInt(n),e)},convertAddressToCAIP10Address(n,e){return`${e}:${n}`},createCAIP2ChainId(n,e){return`${e}:${parseInt(n,16)}`},getChainIdHexFromCAIP2ChainId(n){const e=n.split(":");if(e.length<2||!e[1])return"0x0";const t=e[1],r=parseInt(t,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(n){return typeof n!="object"||n===null?!1:Object.values(n).every(e=>Array.isArray(e)&&e.every(t=>this.isValidAsset(t)))},isValidAsset(n){return typeof n=="object"&&n!==null&&typeof n.address=="string"&&typeof n.balance=="string"&&(n.type==="ERC20"||n.type==="NATIVE")&&typeof n.metadata=="object"&&n.metadata!==null&&typeof n.metadata.name=="string"&&typeof n.metadata.symbol=="string"&&typeof n.metadata.decimals=="number"&&typeof n.metadata.price=="number"&&typeof n.metadata.iconUrl=="string"}},z7={async getMyTokensWithBalance(n){const e=At.state.address,t=ee.state.activeCaipNetwork,r=rt.getConnectorId("eip155")===_e.CONNECTOR_ID.AUTH;if(!e||!t)return[];const i=`${t.caipNetworkId}:${e}`,s=je.getBalanceCacheForCaipAddress(i);if(s)return s.balances;if(t.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,t);if(a)return this.filterLowQualityTokens(a)}const o=await Lt.getBalance(e,t.caipNetworkId,n);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(n,e){try{const t=ZE.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await ct.getCapabilities(n))?.[t]?.assetDiscovery?.supported)return null;const i=await ct.walletGetAssets({account:n,chainFilter:[t]});if(!ZE.isWalletGetAssetsResponse(i))return null;const o=(i[t]||[]).map(a=>ZE.createBalance(a,e.caipNetworkId));return je.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${n}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(n){return n.filter(e=>e.quantity.decimals!=="0")}},cc=Qn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),Coe={state:cc,replaceState(n){n&&Object.assign(cc,_h(n))},subscribe(n){return ee.subscribeChainProp("accountState",e=>{if(e)return n(e)})},subscribeKey(n,e,t){let r;return ee.subscribeChainProp("accountState",i=>{if(i){const s=i[n];r!==s&&(r=s,e(s))}},t)},setStatus(n,e){ee.setAccountProp("status",n,e)},getCaipAddress(n){return ee.getAccountProp("caipAddress",n)},setCaipAddress(n,e){const t=n?_t.getPlainAddress(n):void 0;e===ee.state.activeChain&&(ee.state.activeCaipAddress=n),ee.setAccountProp("caipAddress",n,e),ee.setAccountProp("address",t,e)},setBalance(n,e,t){ee.setAccountProp("balance",n,t),ee.setAccountProp("balanceSymbol",e,t)},setProfileName(n,e){ee.setAccountProp("profileName",n,e)},setProfileImage(n,e){ee.setAccountProp("profileImage",n,e)},setUser(n,e){ee.setAccountProp("user",n,e)},setAddressExplorerUrl(n,e){ee.setAccountProp("addressExplorerUrl",n,e)},setSmartAccountDeployed(n,e){ee.setAccountProp("smartAccountDeployed",n,e)},setCurrentTab(n){ee.setAccountProp("currentTab",n,ee.state.activeChain)},setTokenBalance(n,e){n&&ee.setAccountProp("tokenBalance",n,e)},setShouldUpdateToAddress(n,e){ee.setAccountProp("shouldUpdateToAddress",n,e)},addAddressLabel(n,e,t){const r=ee.getAccountProp("addressLabels",t)||new Map;r.set(n,e),ee.setAccountProp("addressLabels",r,t)},removeAddressLabel(n,e){const t=ee.getAccountProp("addressLabels",e)||new Map;t.delete(n),ee.setAccountProp("addressLabels",t,e)},setConnectedWalletInfo(n,e){ee.setAccountProp("connectedWalletInfo",n,e,!1)},setPreferredAccountType(n,e){ee.setAccountProp("preferredAccountType",n,e)},setSocialProvider(n,e){n&&ee.setAccountProp("socialProvider",n,e)},setSocialWindow(n,e){ee.setAccountProp("socialWindow",n?_h(n):void 0,e)},setFarcasterUrl(n,e){ee.setAccountProp("farcasterUrl",n,e)},async fetchTokenBalance(n){cc.balanceLoading=!0;const e=ee.state.activeCaipNetwork?.caipNetworkId,t=ee.state.activeCaipNetwork?.chainNamespace,r=ee.state.activeCaipAddress,i=r?_t.getPlainAddress(r):void 0;if(cc.lastRetry&&!_t.isAllowedRetry(cc.lastRetry,30*Ln.ONE_SEC_MS))return cc.balanceLoading=!1,[];try{if(i&&e&&t){const s=await z7.getMyTokensWithBalance();return At.setTokenBalance(s,t),cc.lastRetry=void 0,cc.balanceLoading=!1,s}}catch(s){cc.lastRetry=Date.now(),n?.(s),Ic.showError("Token Balance Unavailable")}finally{cc.balanceLoading=!1}return[]},resetAccount(n){ee.resetAccount(n)}},At=ko(Coe),Toe={onSwitchNetwork({network:n,ignoreSwitchConfirmation:e=!1}){const t=ee.state.activeCaipNetwork,r=Wt.state.data;if(n.id===t?.id)return;const s=At.getCaipAddress(ee.state.activeChain),o=n.chainNamespace!==ee.state.activeChain,a=At.getCaipAddress(n.chainNamespace),l=rt.getConnectorId(ee.state.activeChain)===_e.CONNECTOR_ID.AUTH,u=_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(h=>h===n.chainNamespace);e||l&&u?Wt.push("SwitchNetwork",{...r,network:n}):s&&o&&!a?Wt.push("SwitchActiveChain",{switchToChain:n.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:n}):Wt.push("SwitchNetwork",{...r,network:n})}},Bs=Qn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Ioe={state:Bs,subscribe(n){return _i(Bs,()=>n(Bs))},subscribeKey(n,e){return Ei(Bs,n,e)},async open(n){const e=n?.namespace,t=ee.state.activeChain,r=e&&e!==t,i=ee.getAccountData(n?.namespace)?.caipAddress;if(ct.state.wcBasic?Nt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Nt.prefetch(),rt.setFilterByNamespace(n?.namespace),Rn.setLoading(!0,e),e&&r){const s=ee.getNetworkData(e)?.caipNetwork||ee.getRequestedCaipNetworks(e)[0];s&&Toe.onSwitchNetwork({network:s,ignoreSwitchConfirmation:!0})}else{const s=ee.state.noAdapters;Fe.state.manualWCControl||s&&!i?_t.isMobile()?Wt.reset("AllWallets"):Wt.reset("ConnectingWalletConnectBasic"):n?.view?Wt.reset(n.view,n.data):i?Wt.reset("Account"):Wt.reset("Connect")}Bs.open=!0,Oc.set({open:!0}),qn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const n=Fe.state.enableEmbedded,e=!!ee.state.activeCaipAddress;Bs.open&&qn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Bs.open=!1,Wt.reset("Connect"),Rn.clearLoading(),n?e?Wt.replace("Account"):Wt.push("Connect"):Oc.set({open:!1}),ct.resetUri()},setLoading(n,e){e&&Bs.loadingNamespaceMap.set(e,n),Bs.loading=n,Oc.set({loading:n})},clearLoading(){Bs.loadingNamespaceMap.clear(),Bs.loading=!1},shake(){Bs.shake||(Bs.shake=!0,setTimeout(()=>{Bs.shake=!1},500))}},Rn=ko(Ioe),eg={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},AS={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Moe={providers:aF,selectedProvider:null,error:null,purchaseCurrency:eg,paymentCurrency:AS,purchaseCurrencies:[eg],paymentCurrencies:[],quotesLoading:!1},En=Qn(Moe),Roe={state:En,subscribe(n){return _i(En,()=>n(En))},subscribeKey(n,e){return Ei(En,n,e)},setSelectedProvider(n){if(n&&n.name==="meld"){const e=ee.state.activeChain,t=e===_e.CHAIN.SOLANA?"SOL":"USDC",r=ee.getAccountProp("address",e)??"",i=new URL(n.url);i.searchParams.append("publicKey",jee),i.searchParams.append("destinationCurrencyCode",t),i.searchParams.append("walletAddress",r),i.searchParams.append("externalCustomerId",Fe.state.projectId),En.selectedProvider={...n,url:i.toString()}}else En.selectedProvider=n},setOnrampProviders(n){if(Array.isArray(n)&&n.every(e=>typeof e=="string")){const e=n,t=aF.filter(r=>e.includes(r.name));En.providers=t}else En.providers=[]},setPurchaseCurrency(n){En.purchaseCurrency=n},setPaymentCurrency(n){En.paymentCurrency=n},setPurchaseAmount(n){CS.state.purchaseAmount=n},setPaymentAmount(n){CS.state.paymentAmount=n},async getAvailableCurrencies(){const n=await Lt.getOnrampOptions();En.purchaseCurrencies=n.purchaseCurrencies,En.paymentCurrencies=n.paymentCurrencies,En.paymentCurrency=n.paymentCurrencies[0]||AS,En.purchaseCurrency=n.purchaseCurrencies[0]||eg,await Nt.fetchCurrencyImages(n.paymentCurrencies.map(e=>e.id)),await Nt.fetchTokenImages(n.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){En.quotesLoading=!0;try{const n=await Lt.getOnrampQuote({purchaseCurrency:En.purchaseCurrency,paymentCurrency:En.paymentCurrency,amount:En.paymentAmount?.toString()||"0",network:En.purchaseCurrency?.symbol});return En.quotesLoading=!1,En.purchaseAmount=Number(n?.purchaseAmount.amount),n}catch(n){return En.error=n.message,En.quotesLoading=!1,null}finally{En.quotesLoading=!1}},resetState(){En.selectedProvider=null,En.error=null,En.purchaseCurrency=eg,En.paymentCurrency=AS,En.purchaseCurrencies=[eg],En.paymentCurrencies=[],En.paymentAmount=void 0,En.purchaseAmount=void 0,En.quotesLoading=!1}},CS=ko(Roe),cR=2147483648,Poe={convertEVMChainIdToCoinType(n){if(n>=cR)throw new Error("Invalid chainId");return(cR|n)>>>0}},$o=Qn({suggestions:[],loading:!1}),Noe={state:$o,subscribe(n){return _i($o,()=>n($o))},subscribeKey(n,e){return Ei($o,n,e)},async resolveName(n){try{return await Lt.lookupEnsName(n)}catch(e){const t=e;throw new Error(t?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(n){try{return await Lt.lookupEnsName(n),!0}catch{return!1}},async getSuggestions(n){try{$o.loading=!0,$o.suggestions=[];const e=await Lt.getEnsNameSuggestions(n);return $o.suggestions=e.suggestions.map(t=>({...t,name:t.name}))||[],$o.suggestions}catch(e){const t=tg.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(t)}finally{$o.loading=!1}},async getNamesForAddress(n){try{if(!ee.state.activeCaipNetwork)return[];const t=je.getEnsFromCacheForAddress(n);if(t)return t;const r=await Lt.reverseLookupEnsName({address:n});return je.updateEnsCache({address:n,ens:r,timestamp:Date.now()}),r}catch(e){const t=tg.parseEnsApiError(e,"Error fetching names for address");throw new Error(t)}},async registerName(n){const e=ee.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const t=At.state.address,r=rt.getAuthConnector();if(!t||!r)throw new Error("Address or auth connector not found");$o.loading=!0;try{const i=JSON.stringify({name:n,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Wt.pushTransactionStack({onCancel(){Wt.replace("RegisterAccountName")}});const s=await ct.signMessage(i);$o.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=Poe.convertEVMChainIdToCoinType(Number(o));await Lt.registerEnsName({coinType:a,address:t,signature:s,message:i}),At.setProfileName(n,e.chainNamespace),Wt.replace("RegisterAccountNameSuccess")}catch(i){const s=tg.parseEnsApiError(i,`Error registering name ${n}`);throw Wt.replace("RegisterAccountName"),new Error(s)}finally{$o.loading=!1}},validateName(n){return/^[a-zA-Z0-9-]{4,}$/u.test(n)},parseEnsApiError(n,e){return n?.reasons?.[0]?.description||e}},tg=ko(Noe);var bw={exports:{}},lR;function Ooe(){if(lR)return bw.exports;lR=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(x,C,R){return Function.prototype.apply.call(x,C,R)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:t=function(x){return Object.getOwnPropertyNames(x)};function r(E){console&&console.warn&&console.warn(E)}var i=Number.isNaN||function(x){return x!==x};function s(){s.init.call(this)}bw.exports=s,bw.exports.once=y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(E){if(typeof E!="number"||E<0||i(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");o=E}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||i(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this};function c(E){return E._maxListeners===void 0?s.defaultMaxListeners:E._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(x){for(var C=[],R=1;R<arguments.length;R++)C.push(arguments[R]);var k=x==="error",_=this._events;if(_!==void 0)k=k&&_.error===void 0;else if(!k)return!1;if(k){var A;if(C.length>0&&(A=C[0]),A instanceof Error)throw A;var M=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw M.context=A,M}var D=_[x];if(D===void 0)return!1;if(typeof D=="function")e(D,this,C);else for(var P=D.length,v=p(D,P),R=0;R<P;++R)e(v[R],this,C);return!0};function l(E,x,C,R){var k,_,A;if(a(C),_=E._events,_===void 0?(_=E._events=Object.create(null),E._eventsCount=0):(_.newListener!==void 0&&(E.emit("newListener",x,C.listener?C.listener:C),_=E._events),A=_[x]),A===void 0)A=_[x]=C,++E._eventsCount;else if(typeof A=="function"?A=_[x]=R?[C,A]:[A,C]:R?A.unshift(C):A.push(C),k=c(E),k>0&&A.length>k&&!A.warned){A.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=E,M.type=x,M.count=A.length,r(M)}return E}s.prototype.addListener=function(x,C){return l(this,x,C,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(x,C){return l(this,x,C,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(E,x,C){var R={fired:!1,wrapFn:void 0,target:E,type:x,listener:C},k=u.bind(R);return k.listener=C,R.wrapFn=k,k}s.prototype.once=function(x,C){return a(C),this.on(x,h(this,x,C)),this},s.prototype.prependOnceListener=function(x,C){return a(C),this.prependListener(x,h(this,x,C)),this},s.prototype.removeListener=function(x,C){var R,k,_,A,M;if(a(C),k=this._events,k===void 0)return this;if(R=k[x],R===void 0)return this;if(R===C||R.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete k[x],k.removeListener&&this.emit("removeListener",x,R.listener||C));else if(typeof R!="function"){for(_=-1,A=R.length-1;A>=0;A--)if(R[A]===C||R[A].listener===C){M=R[A].listener,_=A;break}if(_<0)return this;_===0?R.shift():m(R,_),R.length===1&&(k[x]=R[0]),k.removeListener!==void 0&&this.emit("removeListener",x,M||C)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(x){var C,R,k;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[x]),this;if(arguments.length===0){var _=Object.keys(R),A;for(k=0;k<_.length;++k)A=_[k],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=R[x],typeof C=="function")this.removeListener(x,C);else if(C!==void 0)for(k=C.length-1;k>=0;k--)this.removeListener(x,C[k]);return this};function d(E,x,C){var R=E._events;if(R===void 0)return[];var k=R[x];return k===void 0?[]:typeof k=="function"?C?[k.listener||k]:[k]:C?g(k):p(k,k.length)}s.prototype.listeners=function(x){return d(this,x,!0)},s.prototype.rawListeners=function(x){return d(this,x,!1)},s.listenerCount=function(E,x){return typeof E.listenerCount=="function"?E.listenerCount(x):f.call(E,x)},s.prototype.listenerCount=f;function f(E){var x=this._events;if(x!==void 0){var C=x[E];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function p(E,x){for(var C=new Array(x),R=0;R<x;++R)C[R]=E[R];return C}function m(E,x){for(;x+1<E.length;x++)E[x]=E[x+1];E.pop()}function g(E){for(var x=new Array(E.length),C=0;C<x.length;++C)x[C]=E[C].listener||E[C];return x}function y(E,x){return new Promise(function(C,R){function k(A){E.removeListener(x,_),R(A)}function _(){typeof E.removeListener=="function"&&E.removeListener("error",k),C([].slice.call(arguments))}w(E,x,_,{once:!0}),x!=="error"&&b(E,k,{once:!0})})}function b(E,x,C){typeof E.on=="function"&&w(E,"error",x,C)}function w(E,x,C,R){if(typeof E.on=="function")R.once?E.once(x,C):E.on(x,C);else if(typeof E.addEventListener=="function")E.addEventListener(x,function k(_){R.once&&E.removeEventListener(x,k),C(_)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return bw.exports}var fa=Ooe();const H7=Sf(fa);var JE={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var TS=function(n,e){return TS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},TS(n,e)};function koe(n,e){TS(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var IS=function(){return IS=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},IS.apply(this,arguments)};function Doe(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Loe(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function Uoe(n,e){return function(t,r){e(t,r,n)}}function Boe(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Foe(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function $oe(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function zoe(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function Hoe(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function MS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oz(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function Voe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(oz(arguments[e]));return n}function Woe(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function f2(n){return this instanceof f2?(this.v=n,this):new f2(n)}function qoe(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(f){return new Promise(function(p,m){s.push([d,f,p,m])>1||a(d,f)})})}function a(d,f){try{c(r[d](f))}catch(p){h(s[0][3],p)}}function c(d){d.value instanceof f2?Promise.resolve(d.value.v).then(l,u):h(s[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,f){d(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function joe(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:f2(n[i](o)),done:i==="return"}:s?s(o):o}:s}}function Goe(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof MS=="function"?MS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Koe(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function Yoe(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Xoe(n){return n&&n.__esModule?n:{default:n}}function Zoe(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function Joe(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const Qoe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return IS},__asyncDelegator:joe,__asyncGenerator:qoe,__asyncValues:Goe,__await:f2,__awaiter:Foe,__classPrivateFieldGet:Zoe,__classPrivateFieldSet:Joe,__createBinding:zoe,__decorate:Loe,__exportStar:Hoe,__extends:koe,__generator:$oe,__importDefault:Xoe,__importStar:Yoe,__makeTemplateObject:Koe,__metadata:Boe,__param:Uoe,__read:oz,__rest:Doe,__spread:Voe,__spreadArrays:Woe,__values:MS},Symbol.toStringTag,{value:"Module"})),M5=my(Qoe);var QE={},U1={},uR;function eae(){if(uR)return U1;uR=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return U1.delay=n,U1}var jh={},e6={},Gh={},hR;function tae(){return hR||(hR=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.ONE_THOUSAND=Gh.ONE_HUNDRED=void 0,Gh.ONE_HUNDRED=100,Gh.ONE_THOUSAND=1e3),Gh}var t6={},dR;function nae(){return dR||(dR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(t6)),t6}var fR;function az(){return fR||(fR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=M5;e.__exportStar(tae(),n),e.__exportStar(nae(),n)}(e6)),e6}var pR;function rae(){if(pR)return jh;pR=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.fromMiliseconds=jh.toMiliseconds=void 0;const n=az();function e(r){return r*n.ONE_THOUSAND}jh.toMiliseconds=e;function t(r){return Math.floor(r/n.ONE_THOUSAND)}return jh.fromMiliseconds=t,jh}var mR;function iae(){return mR||(mR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=M5;e.__exportStar(eae(),n),e.__exportStar(rae(),n)}(QE)),QE}var Xf={},gR;function sae(){if(gR)return Xf;gR=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:i})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}return Xf.Watch=n,Xf.default=n,Xf}var n6={},B1={},yR;function oae(){if(yR)return B1;yR=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.IWatch=void 0;class n{}return B1.IWatch=n,B1}var wR;function aae(){return wR||(wR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),M5.__exportStar(oae(),n)}(n6)),n6}var vR;function cae(){return vR||(vR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=M5;e.__exportStar(iae(),n),e.__exportStar(sae(),n),e.__exportStar(aae(),n),e.__exportStar(az(),n)}(JE)),JE}var et=cae();class If{}let lae=class extends If{constructor(e){super()}};const bR=et.FIVE_SECONDS,Mf={pulse:"heartbeat_pulse"};let uae=class cz extends lae{constructor(e){super(e),this.events=new fa.EventEmitter,this.interval=bR,this.interval=e?.interval||bR}static async init(e){const t=new cz(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),et.toMiliseconds(this.interval))}pulse(){this.events.emit(Mf.pulse)}};const hae=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,dae=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,fae=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function pae(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){mae(n);return}return e}function mae(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function _w(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!fae.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(hae.test(n)||dae.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,pae)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function gae(n){return!n||typeof n.then!="function"?Promise.resolve(n):n}function pi(n,...e){try{return gae(n(...e))}catch(t){return Promise.reject(t)}}function yae(n){const e=typeof n;return n===null||e!=="object"&&e!=="function"}function wae(n){const e=Object.getPrototypeOf(n);return!e||e.isPrototypeOf(Object)}function i3(n){if(yae(n))return String(n);if(wae(n)||Array.isArray(n))return JSON.stringify(n);if(typeof n.toJSON=="function")return i3(n.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const RS="base64:";function vae(n){return typeof n=="string"?n:RS+Eae(n)}function bae(n){return typeof n!="string"||!n.startsWith(RS)?n:_ae(n.slice(RS.length))}function _ae(n){return globalThis.Buffer?Buffer.from(n,"base64"):Uint8Array.from(globalThis.atob(n),e=>e.codePointAt(0))}function Eae(n){return globalThis.Buffer?Buffer.from(n).toString("base64"):globalThis.btoa(String.fromCodePoint(...n))}function qs(n){return n&&n.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function xae(...n){return qs(n.join(":"))}function Ew(n){return n=qs(n),n?n+":":""}function Sae(n,e){if(e===void 0)return!0;let t=0,r=n.indexOf(":");for(;r>-1;)t++,r=n.indexOf(":",r+1);return t<=e}function Aae(n,e){return e?n.startsWith(e)&&n[n.length-1]!=="$":n[n.length-1]!=="$"}const Cae="memory",Tae=()=>{const n=new Map;return{name:Cae,getInstance:()=>n,hasItem(e){return n.has(e)},getItem(e){return n.get(e)??null},getItemRaw(e){return n.get(e)??null},setItem(e,t){n.set(e,t)},setItemRaw(e,t){n.set(e,t)},removeItem(e){n.delete(e)},getKeys(){return[...n.keys()]},clear(){n.clear()},dispose(){n.clear()}}};function Iae(n={}){const e={mounts:{"":n.driver||Tae()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(h=>h.startsWith(l)||u&&l.startsWith(h)).map(h=>({relativeBase:l.length>h.length?l.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),i=(l,u)=>{if(e.watching){u=qs(u);for(const h of e.watchListeners)h(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await _R(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,h)=>{const d=new Map,f=p=>{let m=d.get(p.base);return m||(m={driver:p.driver,base:p.base,items:[]},d.set(p.base,m)),m};for(const p of l){const m=typeof p=="string",g=qs(m?p:p.key),y=m?void 0:p.value,b=m||!p.options?u:{...u,...p.options},w=t(g);f(w).items.push({key:g,value:y,relativeKey:w.relativeKey,options:b})}return Promise.all([...d.values()].map(p=>h(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=qs(l);const{relativeKey:h,driver:d}=t(l);return pi(d.hasItem,h,u)},getItem(l,u={}){l=qs(l);const{relativeKey:h,driver:d}=t(l);return pi(d.getItem,h,u).then(f=>_w(f))},getItems(l,u={}){return a(l,u,h=>h.driver.getItems?pi(h.driver.getItems,h.items.map(d=>({key:d.relativeKey,options:d.options})),u).then(d=>d.map(f=>({key:xae(h.base,f.key),value:_w(f.value)}))):Promise.all(h.items.map(d=>pi(h.driver.getItem,d.relativeKey,d.options).then(f=>({key:d.key,value:_w(f)})))))},getItemRaw(l,u={}){l=qs(l);const{relativeKey:h,driver:d}=t(l);return d.getItemRaw?pi(d.getItemRaw,h,u):pi(d.getItem,h,u).then(f=>bae(f))},async setItem(l,u,h={}){if(u===void 0)return c.removeItem(l);l=qs(l);const{relativeKey:d,driver:f}=t(l);f.setItem&&(await pi(f.setItem,d,i3(u),h),f.watch||i("update",l))},async setItems(l,u){await a(l,u,async h=>{if(h.driver.setItems)return pi(h.driver.setItems,h.items.map(d=>({key:d.relativeKey,value:i3(d.value),options:d.options})),u);h.driver.setItem&&await Promise.all(h.items.map(d=>pi(h.driver.setItem,d.relativeKey,i3(d.value),d.options)))})},async setItemRaw(l,u,h={}){if(u===void 0)return c.removeItem(l,h);l=qs(l);const{relativeKey:d,driver:f}=t(l);if(f.setItemRaw)await pi(f.setItemRaw,d,u,h);else if(f.setItem)await pi(f.setItem,d,vae(u),h);else return;f.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=qs(l);const{relativeKey:h,driver:d}=t(l);d.removeItem&&(await pi(d.removeItem,h,u),(u.removeMeta||u.removeMata)&&await pi(d.removeItem,h+"$",u),d.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=qs(l);const{relativeKey:h,driver:d}=t(l),f=Object.create(null);if(d.getMeta&&Object.assign(f,await pi(d.getMeta,h,u)),!u.nativeOnly){const p=await pi(d.getItem,h+"$",u).then(m=>_w(m));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,h={}){return this.setItem(l+"$",u,h)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){l=Ew(l);const h=r(l,!0);let d=[];const f=[];let p=!0;for(const g of h){g.driver.flags?.maxDepth||(p=!1);const y=await pi(g.driver.getKeys,g.relativeBase,u);for(const b of y){const w=g.mountpoint+qs(b);d.some(E=>w.startsWith(E))||f.push(w)}d=[g.mountpoint,...d.filter(b=>!b.startsWith(g.mountpoint))]}const m=u.maxDepth!==void 0&&!p;return f.filter(g=>(!m||Sae(g,u.maxDepth))&&Aae(g,l))},async clear(l,u={}){l=Ew(l),await Promise.all(r(l,!1).map(async h=>{if(h.driver.clear)return pi(h.driver.clear,h.relativeBase,u);if(h.driver.removeItem){const d=await h.driver.getKeys(h.relativeBase||"",u);return Promise.all(d.map(f=>h.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>ER(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Ew(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((h,d)=>d.length-h.length)),e.mounts[l]=u,e.watching&&Promise.resolve(_R(u,i,l)).then(h=>{e.unwatch[l]=h}).catch(console.error),c},async unmount(l,u=!0){l=Ew(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),u&&await ER(e.mounts[l]),e.mountpoints=e.mountpoints.filter(h=>h!==l),delete e.mounts[l])},getMount(l=""){l=qs(l)+":";const u=t(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=qs(l),r(l,u.parents).map(d=>({driver:d.driver,base:d.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,h={})=>c.setItem(l,u,h),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function _R(n,e,t){return n.watch?n.watch((r,i)=>e(r,t+i)):()=>{}}async function ER(n){typeof n.dispose=="function"&&await pi(n.dispose)}function Rf(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function lz(n,e){let t;const r=()=>{if(t)return t;const i=indexedDB.open(n);return i.onupgradeneeded=()=>i.result.createObjectStore(e),t=Rf(i),t.then(s=>{s.onclose=()=>t=void 0},()=>{}),t};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let r6;function Ey(){return r6||(r6=lz("keyval-store","keyval")),r6}function xR(n,e=Ey()){return e("readonly",t=>Rf(t.get(n)))}function Mae(n,e,t=Ey()){return t("readwrite",r=>(r.put(e,n),Rf(r.transaction)))}function Rae(n,e=Ey()){return e("readwrite",t=>(t.delete(n),Rf(t.transaction)))}function Pae(n=Ey()){return n("readwrite",e=>(e.clear(),Rf(e.transaction)))}function Nae(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Rf(n.transaction)}function Oae(n=Ey()){return n("readonly",e=>{if(e.getAllKeys)return Rf(e.getAllKeys());const t=[];return Nae(e,r=>t.push(r.key)).then(()=>t)})}const kae=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),Dae=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function lf(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return Dae(n)}catch{return n}}function Kl(n){return typeof n=="string"?n:kae(n)||""}const Lae="idb-keyval";var Uae=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",t=i=>e+i;let r;return n.dbName&&n.storeName&&(r=lz(n.dbName,n.storeName)),{name:Lae,options:n,async hasItem(i){return!(typeof await xR(t(i),r)>"u")},async getItem(i){return await xR(t(i),r)??null},setItem(i,s){return Mae(t(i),s,r)},removeItem(i){return Rae(t(i),r)},getKeys(){return Oae(r)},clear(){return Pae(r)}}};const Bae="WALLET_CONNECT_V2_INDEXED_DB",Fae="keyvaluestorage";let $ae=class{constructor(){this.indexedDb=Iae({driver:Uae({dbName:Bae,storeName:Fae})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Kl(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var i6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s3={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,r){this[t]=String(r)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(r){t[r]=void 0,delete t[r]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof i6<"u"&&i6.localStorage?s3.exports=i6.localStorage:typeof window<"u"&&window.localStorage?s3.exports=window.localStorage:s3.exports=new e})();function zae(n){var e;return[n[0],lf((e=n[1])!=null?e:"")]}let Hae=class{constructor(){this.localStorage=s3.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(zae)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return lf(t)}async setItem(e,t){this.localStorage.setItem(e,Kl(t))}async removeItem(e){this.localStorage.removeItem(e)}};const Vae="wc_storage_version",SR=1,Wae=async(n,e,t)=>{const r=Vae,i=await e.getItem(r);if(i&&i>=SR){t(e);return}const s=await n.getKeys();if(!s.length){t(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await n.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,SR),t(e),qae(n,o)},qae=async(n,e)=>{e.length&&e.forEach(async t=>{await n.removeItem(t)})};let jae=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new Hae;this.storage=e;try{const t=new $ae;Wae(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var s6,AR;function Gae(){if(AR)return s6;AR=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}s6=e;function e(t,r,i){var s=i&&i.stringify||n,o=1;if(typeof t=="object"&&t!==null){var a=r.length+o;if(a===1)return t;var c=new Array(a);c[0]=s(t);for(var l=1;l<a;l++)c[l]=s(r[l]);return c.join(" ")}if(typeof t!="string")return t;var u=r.length;if(u===0)return t;for(var h="",d=1-o,f=-1,p=t&&t.length||0,m=0;m<p;){if(t.charCodeAt(m)===37&&m+1<p){switch(f=f>-1?f:0,t.charCodeAt(m+1)){case 100:case 102:if(d>=u||r[d]==null)break;f<m&&(h+=t.slice(f,m)),h+=Number(r[d]),f=m+2,m++;break;case 105:if(d>=u||r[d]==null)break;f<m&&(h+=t.slice(f,m)),h+=Math.floor(Number(r[d])),f=m+2,m++;break;case 79:case 111:case 106:if(d>=u||r[d]===void 0)break;f<m&&(h+=t.slice(f,m));var g=typeof r[d];if(g==="string"){h+="'"+r[d]+"'",f=m+2,m++;break}if(g==="function"){h+=r[d].name||"<anonymous>",f=m+2,m++;break}h+=s(r[d]),f=m+2,m++;break;case 115:if(d>=u)break;f<m&&(h+=t.slice(f,m)),h+=String(r[d]),f=m+2,m++;break;case 37:f<m&&(h+=t.slice(f,m)),h+="%",f=m+2,m++,d--;break}++d}++m}return f===-1?t:(f<p&&(h+=t.slice(f)),h)}return s6}var o6,CR;function Kae(){if(CR)return o6;CR=1;const n=Gae();o6=i;const e=x().console||{},t={mapHttpRequest:p,mapHttpResponse:p,wrapRequestSerializer:m,wrapResponseSerializer:m,wrapErrorSerializer:m,req:p,res:p,err:d};function r(C,R){return Array.isArray(C)?C.filter(function(_){return _!=="!stdSerializers.err"}):C===!0?Object.keys(R):!1}function i(C){C=C||{},C.browser=C.browser||{};const R=C.browser.transmit;if(R&&typeof R.send!="function")throw Error("pino: transmit option must have a send function");const k=C.browser.write||e;C.browser.write&&(C.browser.asObject=!0);const _=C.serializers||{},A=r(C.browser.serialize,_);let M=C.browser.serialize;Array.isArray(C.browser.serialize)&&C.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const D=["error","fatal","warn","info","debug","trace"];typeof k=="function"&&(k.error=k.fatal=k.warn=k.info=k.debug=k.trace=k),C.enabled===!1&&(C.level="silent");const P=C.level||"info",v=Object.create(k);v.log||(v.log=g),Object.defineProperty(v,"levelVal",{get:T}),Object.defineProperty(v,"level",{get:L,set:U});const S={transmit:R,serialize:A,asObject:C.browser.asObject,levels:D,timestamp:f(C)};v.levels=i.levels,v.level=P,v.setMaxListeners=v.getMaxListeners=v.emit=v.addListener=v.on=v.prependListener=v.once=v.prependOnceListener=v.removeListener=v.removeAllListeners=v.listeners=v.listenerCount=v.eventNames=v.write=v.flush=g,v.serializers=_,v._serialize=A,v._stdErrSerialize=M,v.child=V,R&&(v._logEvent=h());function T(){return this.level==="silent"?1/0:this.levels.values[this.level]}function L(){return this._level}function U(W){if(W!=="silent"&&!this.levels.values[W])throw Error("unknown level "+W);this._level=W,s(S,v,"error","log"),s(S,v,"fatal","error"),s(S,v,"warn","error"),s(S,v,"info","log"),s(S,v,"debug","log"),s(S,v,"trace","log")}function V(W,F){if(!W)throw new Error("missing bindings for child Pino");F=F||{},A&&W.serializers&&(F.serializers=W.serializers);const I=F.serializers;if(A&&I){var N=Object.assign({},_,I),$=C.browser.serialize===!0?Object.keys(N):A;delete W.serializers,c([W],$,N,this._stdErrSerialize)}function j(te){this._childLevel=(te._childLevel|0)+1,this.error=l(te,W,"error"),this.fatal=l(te,W,"fatal"),this.warn=l(te,W,"warn"),this.info=l(te,W,"info"),this.debug=l(te,W,"debug"),this.trace=l(te,W,"trace"),N&&(this.serializers=N,this._serialize=$),R&&(this._logEvent=h([].concat(te._logEvent.bindings,W)))}return j.prototype=this,new j(this)}return v}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=t,i.stdTimeFunctions=Object.assign({},{nullTime:y,epochTime:b,unixTime:w,isoTime:E});function s(C,R,k,_){const A=Object.getPrototypeOf(R);R[k]=R.levelVal>R.levels.values[k]?g:A[k]?A[k]:e[k]||e[_]||g,o(C,R,k)}function o(C,R,k){!C.transmit&&R[k]===g||(R[k]=function(_){return function(){const M=C.timestamp(),D=new Array(arguments.length),P=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var v=0;v<D.length;v++)D[v]=arguments[v];if(C.serialize&&!C.asObject&&c(D,this._serialize,this.serializers,this._stdErrSerialize),C.asObject?_.call(P,a(this,k,D,M)):_.apply(P,D),C.transmit){const S=C.transmit.level||R.level,T=i.levels.values[S],L=i.levels.values[k];if(L<T)return;u(this,{ts:M,methodLevel:k,methodValue:L,transmitValue:i.levels.values[C.transmit.level||R.level],send:C.transmit.send,val:R.levelVal},D)}}}(R[k]))}function a(C,R,k,_){C._serialize&&c(k,C._serialize,C.serializers,C._stdErrSerialize);const A=k.slice();let M=A[0];const D={};_&&(D.time=_),D.level=i.levels.values[R];let P=(C._childLevel|0)+1;if(P<1&&(P=1),M!==null&&typeof M=="object"){for(;P--&&typeof A[0]=="object";)Object.assign(D,A.shift());M=A.length?n(A.shift(),A):void 0}else typeof M=="string"&&(M=n(A.shift(),A));return M!==void 0&&(D.msg=M),D}function c(C,R,k,_){for(const A in C)if(_&&C[A]instanceof Error)C[A]=i.stdSerializers.err(C[A]);else if(typeof C[A]=="object"&&!Array.isArray(C[A]))for(const M in C[A])R&&R.indexOf(M)>-1&&M in k&&(C[A][M]=k[M](C[A][M]))}function l(C,R,k){return function(){const _=new Array(1+arguments.length);_[0]=R;for(var A=1;A<_.length;A++)_[A]=arguments[A-1];return C[k].apply(this,_)}}function u(C,R,k){const _=R.send,A=R.ts,M=R.methodLevel,D=R.methodValue,P=R.val,v=C._logEvent.bindings;c(k,C._serialize||Object.keys(C.serializers),C.serializers,C._stdErrSerialize===void 0?!0:C._stdErrSerialize),C._logEvent.ts=A,C._logEvent.messages=k.filter(function(S){return v.indexOf(S)===-1}),C._logEvent.level.label=M,C._logEvent.level.value=D,_(M,C._logEvent,P),C._logEvent=h(v)}function h(C){return{ts:0,messages:[],bindings:C||[],level:{label:"",value:0}}}function d(C){const R={type:C.constructor.name,msg:C.message,stack:C.stack};for(const k in C)R[k]===void 0&&(R[k]=C[k]);return R}function f(C){return typeof C.timestamp=="function"?C.timestamp:C.timestamp===!1?y:b}function p(){return{}}function m(C){return C}function g(){}function y(){return!1}function b(){return Date.now()}function w(){return Math.round(Date.now()/1e3)}function E(){return new Date(Date.now()).toISOString()}function x(){function C(R){return typeof R<"u"&&R}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return C(self)||C(window)||C(this)||{}}}return o6}var Dp=Kae();const xy=Sf(Dp),Yae={level:"info"},Sy="custom_context",V7=1e3*1024;let Xae=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},TR=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new Xae(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}},uz=class{constructor(e,t=V7){this.level=e??"error",this.levelValue=Dp.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new TR(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Dp.levels.values.error?console.error(e):t===Dp.levels.values.warn?console.warn(e):t===Dp.levels.values.debug?console.debug(e):t===Dp.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Kl({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new TR(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(Kl({extraMetadata:e})),new Blob(t,{type:"application/json"})}},Zae=class{constructor(e,t=V7){this.baseChunkLogger=new uz(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},Jae=class{constructor(e,t=V7){this.baseChunkLogger=new uz(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Qae=Object.defineProperty,ece=Object.defineProperties,tce=Object.getOwnPropertyDescriptors,IR=Object.getOwnPropertySymbols,nce=Object.prototype.hasOwnProperty,rce=Object.prototype.propertyIsEnumerable,MR=(n,e,t)=>e in n?Qae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lb=(n,e)=>{for(var t in e||(e={}))nce.call(e,t)&&MR(n,t,e[t]);if(IR)for(var t of IR(e))rce.call(e,t)&&MR(n,t,e[t]);return n},ub=(n,e)=>ece(n,tce(e));function r1(n){return ub(lb({},n),{level:n?.level||Yae.level})}function ice(n,e=Sy){return n[e]||""}function sce(n,e,t=Sy){return n[t]=e,n}function lo(n,e=Sy){let t="";return typeof n.bindings>"u"?t=ice(n,e):t=n.bindings().context||"",t}function oce(n,e,t=Sy){const r=lo(n,t);return r.trim()?`${r}/${e}`:e}function ds(n,e,t=Sy){const r=oce(n,e,t),i=n.child({context:r});return sce(i,r,t)}function ace(n){var e,t;const r=new Zae((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:xy(ub(lb({},n.opts),{level:"trace",browser:ub(lb({},(t=n.opts)==null?void 0:t.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function cce(n){var e;const t=new Jae((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:xy(ub(lb({},n.opts),{level:"trace"}),t),chunkLoggerController:t}}function W7(n){return typeof n.loggerOverride<"u"&&typeof n.loggerOverride!="string"?{logger:n.loggerOverride,chunkLoggerController:null}:typeof window<"u"?ace(n):cce(n)}var lce=Object.defineProperty,uce=(n,e,t)=>e in n?lce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,RR=(n,e,t)=>uce(n,typeof e!="symbol"?e+"":e,t);let hce=class extends If{constructor(e){super(),this.opts=e,RR(this,"protocol","wc"),RR(this,"version",2)}};var dce=Object.defineProperty,fce=(n,e,t)=>e in n?dce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pce=(n,e,t)=>fce(n,e+"",t);let mce=class extends If{constructor(e,t){super(),this.core=e,this.logger=t,pce(this,"records",new Map)}},gce=class{constructor(e,t){this.logger=e,this.core=t}},yce=class extends If{constructor(e,t){super(),this.relayer=e,this.logger=t}},wce=class extends If{constructor(e){super()}},vce=class{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}},bce=class extends If{constructor(e,t){super(),this.relayer=e,this.logger=t}},_ce=class extends If{constructor(e,t){super(),this.core=e,this.logger=t}},Ece=class{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}},xce=class{constructor(e,t){this.projectId=e,this.logger=t}},Sce=class{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}};var Ace=Object.defineProperty,Cce=(n,e,t)=>e in n?Ace(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,PR=(n,e,t)=>Cce(n,typeof e!="symbol"?e+"":e,t);let Tce=class{constructor(e){this.opts=e,PR(this,"protocol","wc"),PR(this,"version",2)}},Ice=class{constructor(e){this.client=e}};function Mce(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function hz(n,...e){if(!Mce(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function NR(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Rce(n,e){hz(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Zf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const a6=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);function Pce(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function dz(n){return typeof n=="string"&&(n=Pce(n)),hz(n),n}let Nce=class{clone(){return this._cloneInto()}};function Oce(n){const e=r=>n().update(dz(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function fz(n=32){if(Zf&&typeof Zf.getRandomValues=="function")return Zf.getRandomValues(new Uint8Array(n));if(Zf&&typeof Zf.randomBytes=="function")return Zf.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function kce(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=r?4:0,l=r?0:4;n.setUint32(e+c,o,r),n.setUint32(e+l,a,r)}let Dce=class extends Nce{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=a6(this.buffer)}update(e){NR(this);const{view:t,buffer:r,blockLen:i}=this;e=dz(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=a6(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){NR(this),Rce(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)t[h]=0;kce(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=a6(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}};const xw=BigInt(2**32-1),PS=BigInt(32);function pz(n,e=!1){return e?{h:Number(n&xw),l:Number(n>>PS&xw)}:{h:Number(n>>PS&xw)|0,l:Number(n&xw)|0}}function Lce(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=pz(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const Uce=(n,e)=>BigInt(n>>>0)<<PS|BigInt(e>>>0),Bce=(n,e,t)=>n>>>t,Fce=(n,e,t)=>n<<32-t|e>>>t,$ce=(n,e,t)=>n>>>t|e<<32-t,zce=(n,e,t)=>n<<32-t|e>>>t,Hce=(n,e,t)=>n<<64-t|e>>>t-32,Vce=(n,e,t)=>n>>>t-32|e<<64-t,Wce=(n,e)=>e,qce=(n,e)=>n,jce=(n,e,t)=>n<<t|e>>>32-t,Gce=(n,e,t)=>e<<t|n>>>32-t,Kce=(n,e,t)=>e<<t-32|n>>>64-t,Yce=(n,e,t)=>n<<t-32|e>>>64-t;function Xce(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const Zce=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Jce=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Qce=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),ele=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,tle=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),nle=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,cn={fromBig:pz,split:Lce,toBig:Uce,shrSH:Bce,shrSL:Fce,rotrSH:$ce,rotrSL:zce,rotrBH:Hce,rotrBL:Vce,rotr32H:Wce,rotr32L:qce,rotlSH:jce,rotlSL:Gce,rotlBH:Kce,rotlBL:Yce,add:Xce,add3L:Zce,add3H:Jce,add4L:Qce,add4H:ele,add5H:nle,add5L:tle},[rle,ile]=cn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),yu=new Uint32Array(80),wu=new Uint32Array(80);let sle=class extends Dce{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:f,Gl:p,Hh:m,Hl:g}=this;return[e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g]}set(e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=g|0}process(e,t){for(let w=0;w<16;w++,t+=4)yu[w]=e.getUint32(t),wu[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const E=yu[w-15]|0,x=wu[w-15]|0,C=cn.rotrSH(E,x,1)^cn.rotrSH(E,x,8)^cn.shrSH(E,x,7),R=cn.rotrSL(E,x,1)^cn.rotrSL(E,x,8)^cn.shrSL(E,x,7),k=yu[w-2]|0,_=wu[w-2]|0,A=cn.rotrSH(k,_,19)^cn.rotrBH(k,_,61)^cn.shrSH(k,_,6),M=cn.rotrSL(k,_,19)^cn.rotrBL(k,_,61)^cn.shrSL(k,_,6),D=cn.add4L(R,M,wu[w-7],wu[w-16]),P=cn.add4H(D,C,A,yu[w-7],yu[w-16]);yu[w]=P|0,wu[w]=D|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:f,Fl:p,Gh:m,Gl:g,Hh:y,Hl:b}=this;for(let w=0;w<80;w++){const E=cn.rotrSH(h,d,14)^cn.rotrSH(h,d,18)^cn.rotrBH(h,d,41),x=cn.rotrSL(h,d,14)^cn.rotrSL(h,d,18)^cn.rotrBL(h,d,41),C=h&f^~h&m,R=d&p^~d&g,k=cn.add5L(b,x,R,ile[w],wu[w]),_=cn.add5H(k,y,E,C,rle[w],yu[w]),A=k|0,M=cn.rotrSH(r,i,28)^cn.rotrBH(r,i,34)^cn.rotrBH(r,i,39),D=cn.rotrSL(r,i,28)^cn.rotrBL(r,i,34)^cn.rotrBL(r,i,39),P=r&s^r&a^s&a,v=i&o^i&c^o&c;y=m|0,b=g|0,m=f|0,g=p|0,f=h|0,p=d|0,{h,l:d}=cn.add(l|0,u|0,_|0,A|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const S=cn.add3L(A,D,v);r=cn.add3H(S,_,M,P),i=S|0}({h:r,l:i}=cn.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=cn.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=cn.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=cn.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=cn.add(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=cn.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:g}=cn.add(this.Gh|0,this.Gl|0,m|0,g|0),{h:y,l:b}=cn.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,i,s,o,a,c,l,u,h,d,f,p,m,g,y,b)}roundClean(){yu.fill(0),wu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const ole=Oce(()=>new sle);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const q7=BigInt(0),mz=BigInt(1),ale=BigInt(2);function j7(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function G7(n){if(!j7(n))throw new Error("Uint8Array expected")}function c6(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const cle=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function K7(n){G7(n);let e="";for(let t=0;t<n.length;t++)e+=cle[n[t]];return e}function gz(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?q7:BigInt("0x"+n)}const al={_0:48,_9:57,A:65,F:70,a:97,f:102};function OR(n){if(n>=al._0&&n<=al._9)return n-al._0;if(n>=al.A&&n<=al.F)return n-(al.A-10);if(n>=al.a&&n<=al.f)return n-(al.a-10)}function yz(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=OR(n.charCodeAt(s)),a=OR(n.charCodeAt(s+1));if(o===void 0||a===void 0){const c=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function lle(n){return gz(K7(n))}function o3(n){return G7(n),gz(K7(Uint8Array.from(n).reverse()))}function wz(n,e){return yz(n.toString(16).padStart(e*2,"0"))}function NS(n,e){return wz(n,e).reverse()}function cl(n,e,t){let r;if(typeof e=="string")try{r=yz(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(j7(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function kR(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];G7(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}const l6=n=>typeof n=="bigint"&&q7<=n;function ule(n,e,t){return l6(n)&&l6(e)&&l6(t)&&e<=n&&n<t}function F1(n,e,t,r){if(!ule(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function hle(n){let e;for(e=0;n>q7;n>>=mz,e+=1);return e}const dle=n=>(ale<<BigInt(n-1))-mz,fle={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||j7(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Y7(n,e,t={}){const r=(i,s,o)=>{const a=fle[s];if(typeof a!="function")throw new Error("invalid validator function");const c=n[i];if(!(o&&c===void 0)&&!a(c,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}function DR(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const vi=BigInt(0),Hr=BigInt(1),bd=BigInt(2),ple=BigInt(3),OS=BigInt(4),LR=BigInt(5),UR=BigInt(8);function ti(n,e){const t=n%e;return t>=vi?t:e+t}function mle(n,e,t){if(e<vi)throw new Error("invalid exponent, negatives unsupported");if(t<=vi)throw new Error("invalid modulus");if(t===Hr)return vi;let r=Hr;for(;e>vi;)e&Hr&&(r=r*n%t),n=n*n%t,e>>=Hr;return r}function lc(n,e,t){let r=n;for(;e-- >vi;)r*=r,r%=t;return r}function BR(n,e){if(n===vi)throw new Error("invert: expected non-zero number");if(e<=vi)throw new Error("invert: expected positive modulus, got "+e);let t=ti(n,e),r=e,i=vi,s=Hr;for(;t!==vi;){const o=r/t,a=r%t,c=i-s*o;r=t,t=a,i=s,s=c}if(r!==Hr)throw new Error("invert: does not exist");return ti(i,e)}function gle(n){const e=(n-Hr)/bd;let t,r,i;for(t=n-Hr,r=0;t%bd===vi;t/=bd,r++);for(i=bd;i<n&&mle(i,e,n)!==n-Hr;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+Hr)/OS;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(t+Hr)/bd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),t),u=o.pow(a,s),h=o.pow(a,t);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let d=1;for(let p=o.sqr(h);d<c&&!o.eql(p,o.ONE);d++)p=o.sqr(p);const f=o.pow(l,Hr<<BigInt(c-d-1));l=o.sqr(f),u=o.mul(u,f),h=o.mul(h,l),c=d}return u}}function yle(n){if(n%OS===ple){const e=(n+Hr)/OS;return function(t,r){const i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw new Error("Cannot find square root");return i}}if(n%UR===LR){const e=(n-LR)/UR;return function(t,r){const i=t.mul(r,bd),s=t.pow(i,e),o=t.mul(r,s),a=t.mul(t.mul(o,bd),s),c=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(c),r))throw new Error("Cannot find square root");return c}}return gle(n)}const wle=(n,e)=>(ti(n,e)&Hr)===Hr,vle=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ble(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=vle.reduce((r,i)=>(r[i]="function",r),e);return Y7(n,t)}function _le(n,e,t){if(t<vi)throw new Error("invalid exponent, negatives unsupported");if(t===vi)return n.ONE;if(t===Hr)return e;let r=n.ONE,i=e;for(;t>vi;)t&Hr&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Hr;return r}function Ele(n,e){const t=new Array(e.length),r=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),i),t}function vz(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function bz(n,e,t=!1,r={}){if(n<=vi)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=vz(n,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:n,isLE:t,BITS:i,BYTES:s,MASK:dle(i),ZERO:vi,ONE:Hr,create:c=>ti(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return vi<=c&&c<n},is0:c=>c===vi,isOdd:c=>(c&Hr)===Hr,neg:c=>ti(-c,n),eql:(c,l)=>c===l,sqr:c=>ti(c*c,n),add:(c,l)=>ti(c+l,n),sub:(c,l)=>ti(c-l,n),mul:(c,l)=>ti(c*l,n),pow:(c,l)=>_le(a,c,l),div:(c,l)=>ti(c*BR(l,n),n),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>BR(c,n),sqrt:r.sqrt||(c=>(o||(o=yle(n)),o(a,c))),invertBatch:c=>Ele(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?NS(c,s):wz(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return t?o3(c):lle(c)}});return Object.freeze(a)}const FR=BigInt(0),Sw=BigInt(1);function u6(n,e){const t=e.negate();return n?t:e}function _z(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function h6(n,e){_z(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function xle(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function Sle(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const d6=new WeakMap,Ez=new WeakMap;function f6(n){return Ez.get(n)||1}function Ale(n,e){return{constTimeNegate:u6,hasPrecomputes(t){return f6(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>FR;)r&Sw&&(i=i.add(s)),s=s.double(),r>>=Sw;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=h6(r,e),o=[];let a=t,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,r,i){const{windows:s,windowSize:o}=h6(t,e);let a=n.ZERO,c=n.BASE;const l=BigInt(2**t-1),u=2**t,h=BigInt(t);for(let d=0;d<s;d++){const f=d*o;let p=Number(i&l);i>>=h,p>o&&(p-=u,i+=Sw);const m=f,g=f+Math.abs(p)-1,y=d%2!==0,b=p<0;p===0?c=c.add(u6(y,r[m])):a=a.add(u6(b,r[g]))}return{p:a,f:c}},wNAFUnsafe(t,r,i,s=n.ZERO){const{windows:o,windowSize:a}=h6(t,e),c=BigInt(2**t-1),l=2**t,u=BigInt(t);for(let h=0;h<o;h++){const d=h*a;if(i===FR)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=Sw),f===0)continue;let p=r[d+Math.abs(f)-1];f<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(t,r,i){let s=d6.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&d6.set(r,i(s))),s},wNAFCached(t,r,i){const s=f6(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=f6(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){_z(r,e),Ez.set(t,r),d6.delete(t)}}}function Cle(n,e,t,r){if(xle(t,n),Sle(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=n.ZERO,s=hle(BigInt(t.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let h=l;h>=0;h-=o){c.fill(i);for(let f=0;f<r.length;f++){const p=r[f],m=Number(p>>BigInt(h)&BigInt(a));c[m]=c[m].add(t[f])}let d=i;for(let f=c.length-1,p=i;f>0;f--)p=p.add(c[f]),d=d.add(p);if(u=u.add(d),h!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Tle(n){return ble(n.Fp),Y7(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vz(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const wa=BigInt(0),Fs=BigInt(1),Aw=BigInt(2),Ile=BigInt(8),Mle={zip215:!0};function Rle(n){const e=Tle(n);return Y7(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Ple(n){const e=Rle(n),{Fp:t,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=Aw<<BigInt(a*8)-Fs,u=t.create,h=bz(e.n,e.nBitLength),d=e.uvRatio||((S,T)=>{try{return{isValid:!0,value:t.sqrt(S*t.inv(T))}}catch{return{isValid:!1,value:wa}}}),f=e.adjustScalarBytes||(S=>S),p=e.domain||((S,T,L)=>{if(c6("phflag",L),T.length||L)throw new Error("Contexts/pre-hash are not supported");return S});function m(S,T){F1("coordinate "+S,T,wa,l)}function g(S){if(!(S instanceof w))throw new Error("ExtendedPoint expected")}const y=DR((S,T)=>{const{ex:L,ey:U,ez:V}=S,W=S.is0();T==null&&(T=W?Ile:t.inv(V));const F=u(L*T),I=u(U*T),N=u(V*T);if(W)return{x:wa,y:Fs};if(N!==Fs)throw new Error("invZ was invalid");return{x:F,y:I}}),b=DR(S=>{const{a:T,d:L}=e;if(S.is0())throw new Error("bad point: ZERO");const{ex:U,ey:V,ez:W,et:F}=S,I=u(U*U),N=u(V*V),$=u(W*W),j=u($*$),te=u(I*T),ce=u($*u(te+N)),ve=u(j+u(L*u(I*N)));if(ce!==ve)throw new Error("bad point: equation left != right (1)");const Te=u(U*V),$e=u(W*F);if(Te!==$e)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(T,L,U,V){this.ex=T,this.ey=L,this.ez=U,this.et=V,m("x",T),m("y",L),m("z",U),m("t",V),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof w)throw new Error("extended point not allowed");const{x:L,y:U}=T||{};return m("x",L),m("y",U),new w(L,U,Fs,u(L*U))}static normalizeZ(T){const L=t.invertBatch(T.map(U=>U.ez));return T.map((U,V)=>U.toAffine(L[V])).map(w.fromAffine)}static msm(T,L){return Cle(w,h,T,L)}_setWindowSize(T){C.setWindowSize(this,T)}assertValidity(){b(this)}equals(T){g(T);const{ex:L,ey:U,ez:V}=this,{ex:W,ey:F,ez:I}=T,N=u(L*I),$=u(W*V),j=u(U*I),te=u(F*V);return N===$&&j===te}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:T}=e,{ex:L,ey:U,ez:V}=this,W=u(L*L),F=u(U*U),I=u(Aw*u(V*V)),N=u(T*W),$=L+U,j=u(u($*$)-W-F),te=N+F,ce=te-I,ve=N-F,Te=u(j*ce),$e=u(te*ve),pe=u(j*ve),X=u(ce*te);return new w(Te,$e,X,pe)}add(T){g(T);const{a:L,d:U}=e,{ex:V,ey:W,ez:F,et:I}=this,{ex:N,ey:$,ez:j,et:te}=T;if(L===BigInt(-1)){const xe=u((W-V)*($+N)),fe=u((W+V)*($-N)),me=u(fe-xe);if(me===wa)return this.double();const De=u(F*Aw*te),K=u(I*Aw*j),q=K+De,he=fe+xe,ge=K-De,z=u(q*me),O=u(he*ge),B=u(q*ge),G=u(me*he);return new w(z,O,G,B)}const ce=u(V*N),ve=u(W*$),Te=u(I*U*te),$e=u(F*j),pe=u((V+W)*(N+$)-ce-ve),X=$e-Te,Z=$e+Te,H=u(ve-L*ce),oe=u(pe*X),le=u(Z*H),Q=u(pe*H),ie=u(X*Z);return new w(oe,le,ie,Q)}subtract(T){return this.add(T.negate())}wNAF(T){return C.wNAFCached(this,T,w.normalizeZ)}multiply(T){const L=T;F1("scalar",L,Fs,r);const{p:U,f:V}=this.wNAF(L);return w.normalizeZ([U,V])[0]}multiplyUnsafe(T,L=w.ZERO){const U=T;return F1("scalar",U,wa,r),U===wa?x:this.is0()||U===Fs?this:C.wNAFCachedUnsafe(this,U,w.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,r).is0()}toAffine(T){return y(this,T)}clearCofactor(){const{h:T}=e;return T===Fs?this:this.multiplyUnsafe(T)}static fromHex(T,L=!1){const{d:U,a:V}=e,W=t.BYTES;T=cl("pointHex",T,W),c6("zip215",L);const F=T.slice(),I=T[W-1];F[W-1]=I&-129;const N=o3(F),$=L?l:t.ORDER;F1("pointHex.y",N,wa,$);const j=u(N*N),te=u(j-Fs),ce=u(U*j-V);let{isValid:ve,value:Te}=d(te,ce);if(!ve)throw new Error("Point.fromHex: invalid y coordinate");const $e=(Te&Fs)===Fs,pe=(I&128)!==0;if(!L&&Te===wa&&pe)throw new Error("Point.fromHex: x=0 and x_0=1");return pe!==$e&&(Te=u(-Te)),w.fromAffine({x:Te,y:N})}static fromPrivateKey(T){return _(T).point}toRawBytes(){const{x:T,y:L}=this.toAffine(),U=NS(L,t.BYTES);return U[U.length-1]|=T&Fs?128:0,U}toHex(){return K7(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,Fs,u(e.Gx*e.Gy)),w.ZERO=new w(wa,Fs,Fs,wa);const{BASE:E,ZERO:x}=w,C=Ale(w,a*8);function R(S){return ti(S,r)}function k(S){return R(o3(S))}function _(S){const T=t.BYTES;S=cl("private key",S,T);const L=cl("hashed private key",s(S),2*T),U=f(L.slice(0,T)),V=L.slice(T,2*T),W=k(U),F=E.multiply(W),I=F.toRawBytes();return{head:U,prefix:V,scalar:W,point:F,pointBytes:I}}function A(S){return _(S).pointBytes}function M(S=new Uint8Array,...T){const L=kR(...T);return k(s(p(L,cl("context",S),!!i)))}function D(S,T,L={}){S=cl("message",S),i&&(S=i(S));const{prefix:U,scalar:V,pointBytes:W}=_(T),F=M(L.context,U,S),I=E.multiply(F).toRawBytes(),N=M(L.context,I,W,S),$=R(F+N*V);F1("signature.s",$,wa,r);const j=kR(I,NS($,t.BYTES));return cl("result",j,t.BYTES*2)}const P=Mle;function v(S,T,L,U=P){const{context:V,zip215:W}=U,F=t.BYTES;S=cl("signature",S,2*F),T=cl("message",T),L=cl("publicKey",L,F),W!==void 0&&c6("zip215",W),i&&(T=i(T));const I=o3(S.slice(F,2*F));let N,$,j;try{N=w.fromHex(L,W),$=w.fromHex(S.slice(0,F),W),j=E.multiplyUnsafe(I)}catch{return!1}if(!W&&N.isSmallOrder())return!1;const te=M(V,$.toRawBytes(),N.toRawBytes(),T);return $.add(N.multiplyUnsafe(te)).subtract(j).clearCofactor().equals(w.ZERO)}return E._setWindowSize(8),{CURVE:e,getPublicKey:A,sign:D,verify:v,ExtendedPoint:w,utils:{getExtendedPublicKey:_,randomPrivateKey:()=>o(t.BYTES),precompute(S=8,T=w.BASE){return T._setWindowSize(S),T.multiply(BigInt(3)),T}}}}BigInt(0),BigInt(1);const X7=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),$R=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Nle=BigInt(1),zR=BigInt(2);BigInt(3);const Ole=BigInt(5),kle=BigInt(8);function Dle(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=X7,o=n*n%s*n%s,a=lc(o,zR,s)*o%s,c=lc(a,Nle,s)*n%s,l=lc(c,Ole,s)*c%s,u=lc(l,e,s)*l%s,h=lc(u,t,s)*u%s,d=lc(h,r,s)*h%s,f=lc(d,i,s)*d%s,p=lc(f,i,s)*d%s,m=lc(p,e,s)*l%s;return{pow_p_5_8:lc(m,zR,s)*n%s,b2:o}}function Lle(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Ule(n,e){const t=X7,r=ti(e*e*e,t),i=ti(r*r*e,t),s=Dle(n*i).pow_p_5_8;let o=ti(n*r*s,t);const a=ti(e*o*o,t),c=o,l=ti(o*$R,t),u=a===n,h=a===ti(-n,t),d=a===ti(-n*$R,t);return u&&(o=c),(h||d)&&(o=l),wle(o,t)&&(o=ti(-o,t)),{isValid:u||h,value:o}}const Ble=bz(X7,void 0,!0),Fle={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ble,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:kle,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ole,randomBytes:fz,adjustScalarBytes:Lle,uvRatio:Ule},xz=Ple(Fle),$le="EdDSA",zle="JWT",hb=".",R5="base64url",Sz="utf8",Az="utf8",Hle=":",Vle="did",Wle="key",HR="base58btc",qle="z",jle="K36",Gle=32;function Z7(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Cz(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Z7(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Tz(n,e){e||(e=n.reduce((i,s)=>i+s.length,0));const t=Cz(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return Z7(t)}function Kle(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var a=n.length,c=n.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,g=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,m++;for(var w=(b-y)*u+1>>>0,E=new Uint8Array(w);y!==b;){for(var x=p[y],C=0,R=w-1;(x!==0||C<g)&&R!==-1;R--,C++)x+=256*E[R]>>>0,E[R]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");g=C,y++}for(var k=w-g;k!==w&&E[k]===0;)k++;for(var _=c.repeat(m);k<w;++k)_+=n.charAt(E[k]);return _}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var g=0,y=0;p[m]===c;)g++,m++;for(var b=(p.length-m)*l+1>>>0,w=new Uint8Array(b);p[m];){var E=t[p.charCodeAt(m)];if(E===255)return;for(var x=0,C=b-1;(E!==0||x<y)&&C!==-1;C--,x++)E+=a*w[C]>>>0,w[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=x,m++}if(p[m]!==" "){for(var R=b-y;R!==b&&w[R]===0;)R++;for(var k=new Uint8Array(g+(b-R)),_=g;R!==b;)k[_++]=w[R++];return k}}}function f(p){var m=d(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var Yle=Kle,Xle=Yle;const Iz=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Zle=n=>new TextEncoder().encode(n),Jle=n=>new TextDecoder().decode(n);let Qle=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},eue=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Mz(this,e)}},tue=class{constructor(e){this.decoders=e}or(e){return Mz(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Mz=(n,e)=>new tue({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});let nue=class{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new Qle(e,t,r),this.decoder=new eue(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const P5=({name:n,prefix:e,encode:t,decode:r})=>new nue(n,e,t,r),Ay=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=Xle(t,e);return P5({prefix:n,name:e,encode:r,decode:s=>Iz(i(s))})},rue=(n,e,t,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[n[u]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<t|h,a+=t,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},iue=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,a=0;for(let c=0;c<n.length;++c)for(a=a<<8|n[c],o+=8;o>t;)o-=t,s+=e[i&a>>o];if(o&&(s+=e[i&a<<t-o]),r)for(;s.length*t&7;)s+="=";return s},Hi=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>P5({prefix:e,name:n,encode(i){return iue(i,r,t)},decode(i){return rue(i,r,t,n)}}),sue=P5({prefix:"\0",name:"identity",encode:n=>Jle(n),decode:n=>Zle(n)});var oue=Object.freeze({__proto__:null,identity:sue});const aue=Hi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var cue=Object.freeze({__proto__:null,base2:aue});const lue=Hi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var uue=Object.freeze({__proto__:null,base8:lue});const hue=Ay({prefix:"9",name:"base10",alphabet:"0123456789"});var due=Object.freeze({__proto__:null,base10:hue});const fue=Hi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pue=Hi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var mue=Object.freeze({__proto__:null,base16:fue,base16upper:pue});const gue=Hi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yue=Hi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),wue=Hi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vue=Hi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),bue=Hi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_ue=Hi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Eue=Hi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xue=Hi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Sue=Hi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Aue=Object.freeze({__proto__:null,base32:gue,base32upper:yue,base32pad:wue,base32padupper:vue,base32hex:bue,base32hexupper:_ue,base32hexpad:Eue,base32hexpadupper:xue,base32z:Sue});const Cue=Ay({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Tue=Ay({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Iue=Object.freeze({__proto__:null,base36:Cue,base36upper:Tue});const Mue=Ay({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Rue=Ay({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Pue=Object.freeze({__proto__:null,base58btc:Mue,base58flickr:Rue});const Nue=Hi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Oue=Hi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),kue=Hi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Due=Hi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Lue=Object.freeze({__proto__:null,base64:Nue,base64pad:Oue,base64url:kue,base64urlpad:Due});const Rz=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Uue=Rz.reduce((n,e,t)=>(n[t]=e,n),[]),Bue=Rz.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function Fue(n){return n.reduce((e,t)=>(e+=Uue[t],e),"")}function $ue(n){const e=[];for(const t of n){const r=Bue[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const zue=P5({prefix:"🚀",name:"base256emoji",encode:Fue,decode:$ue});var Hue=Object.freeze({__proto__:null,base256emoji:zue}),Vue=Pz,VR=128,Wue=-128,que=Math.pow(2,31);function Pz(n,e,t){e=e||[],t=t||0;for(var r=t;n>=que;)e[t++]=n&255|VR,n/=128;for(;n&Wue;)e[t++]=n&255|VR,n>>>=7;return e[t]=n|0,Pz.bytes=t-r+1,e}var jue=kS,Gue=128,WR=127;function kS(n,r){var t=0,r=r||0,i=0,s=r,o,a=n.length;do{if(s>=a)throw kS.bytes=0,new RangeError("Could not decode varint");o=n[s++],t+=i<28?(o&WR)<<i:(o&WR)*Math.pow(2,i),i+=7}while(o>=Gue);return kS.bytes=s-r,t}var Kue=Math.pow(2,7),Yue=Math.pow(2,14),Xue=Math.pow(2,21),Zue=Math.pow(2,28),Jue=Math.pow(2,35),Que=Math.pow(2,42),ehe=Math.pow(2,49),the=Math.pow(2,56),nhe=Math.pow(2,63),rhe=function(n){return n<Kue?1:n<Yue?2:n<Xue?3:n<Zue?4:n<Jue?5:n<Que?6:n<ehe?7:n<the?8:n<nhe?9:10},ihe={encode:Vue,decode:jue,encodingLength:rhe},Nz=ihe;const qR=(n,e,t=0)=>(Nz.encode(n,e,t),e),jR=n=>Nz.encodingLength(n),DS=(n,e)=>{const t=e.byteLength,r=jR(n),i=r+jR(t),s=new Uint8Array(i+t);return qR(n,s,0),qR(t,s,r),s.set(e,i),new she(n,t,e,s)};let she=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};const Oz=({name:n,code:e,encode:t})=>new ohe(n,e,t);let ohe=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?DS(this.code,t):t.then(r=>DS(this.code,r))}else throw Error("Unknown type, must be binary type")}};const kz=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),ahe=Oz({name:"sha2-256",code:18,encode:kz("SHA-256")}),che=Oz({name:"sha2-512",code:19,encode:kz("SHA-512")});var lhe=Object.freeze({__proto__:null,sha256:ahe,sha512:che});const Dz=0,uhe="identity",Lz=Iz,hhe=n=>DS(Dz,Lz(n)),dhe={code:Dz,name:uhe,encode:Lz,digest:hhe};var fhe=Object.freeze({__proto__:null,identity:dhe});new TextEncoder,new TextDecoder;const GR={...oue,...cue,...uue,...due,...mue,...Aue,...Iue,...Pue,...Lue,...Hue};({...lhe,...fhe});function Uz(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const KR=Uz("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),p6=Uz("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=Cz(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),Bz={utf8:KR,"utf-8":KR,hex:GR.base16,latin1:p6,ascii:p6,binary:p6,...GR};function N5(n,e="utf8"){const t=Bz[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}function i1(n,e="utf8"){const t=Bz[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Z7(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function YR(n){return lf(N5(i1(n,R5),Sz))}function db(n){return N5(i1(Kl(n),Sz),R5)}function Fz(n){const e=i1(jle,HR),t=qle+N5(Tz([e,n]),HR);return[Vle,Wle,t].join(Hle)}function phe(n){return N5(n,R5)}function mhe(n){return i1(n,R5)}function ghe(n){return i1([db(n.header),db(n.payload)].join(hb),Az)}function yhe(n){return[db(n.header),db(n.payload),phe(n.signature)].join(hb)}function LS(n){const e=n.split(hb),t=YR(e[0]),r=YR(e[1]),i=mhe(e[2]),s=i1(e.slice(0,2).join(hb),Az);return{header:t,payload:r,signature:i,data:s}}function XR(n=fz(Gle)){const e=xz.getPublicKey(n);return{secretKey:Tz([n,e]),publicKey:e}}async function whe(n,e,t,r,i=et.fromMiliseconds(Date.now())){const s={alg:$le,typ:zle},o=Fz(r.publicKey),a=i+t,c={iss:o,sub:n,aud:e,iat:i,exp:a},l=ghe({header:s,payload:c}),u=xz.sign(l,r.secretKey.slice(0,32));return yhe({header:s,payload:c,signature:u})}var ZR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},vhe=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),bhe=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),_he=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),Ehe=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),xhe=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),She=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ahe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,JR=3,Che=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",She]],QR=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function The(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new xhe:typeof navigator<"u"?Mhe(navigator.userAgent):Phe()}function Ihe(n){return n!==""&&Che.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function Mhe(n){var e=Ihe(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Ehe;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<JR&&(i=ZR(ZR([],i,!0),Nhe(JR-i.length),!0)):i=[];var s=i.join("."),o=Rhe(n),a=Ahe.exec(n);return a&&a[1]?new _he(t,s,o,a[1]):new vhe(t,s,o)}function Rhe(n){for(var e=0,t=QR.length;e<t;e++){var r=QR[e],i=r[0],s=r[1],o=s.exec(n);if(o)return i}return null}function Phe(){var n=typeof process<"u"&&process.version;return n?new bhe(process.version.slice(1)):null}function Nhe(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var Zn={},eP;function $z(){if(eP)return Zn;eP=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.getLocalStorage=Zn.getLocalStorageOrThrow=Zn.getCrypto=Zn.getCryptoOrThrow=Zn.getLocation=Zn.getLocationOrThrow=Zn.getNavigator=Zn.getNavigatorOrThrow=Zn.getDocument=Zn.getDocumentOrThrow=Zn.getFromWindowOrThrow=Zn.getFromWindow=void 0;function n(d){let f;return typeof window<"u"&&typeof window[d]<"u"&&(f=window[d]),f}Zn.getFromWindow=n;function e(d){const f=n(d);if(!f)throw new Error(`${d} is not defined in Window`);return f}Zn.getFromWindowOrThrow=e;function t(){return e("document")}Zn.getDocumentOrThrow=t;function r(){return n("document")}Zn.getDocument=r;function i(){return e("navigator")}Zn.getNavigatorOrThrow=i;function s(){return n("navigator")}Zn.getNavigator=s;function o(){return e("location")}Zn.getLocationOrThrow=o;function a(){return n("location")}Zn.getLocation=a;function c(){return e("crypto")}Zn.getCryptoOrThrow=c;function l(){return n("crypto")}Zn.getCrypto=l;function u(){return e("localStorage")}Zn.getLocalStorageOrThrow=u;function h(){return n("localStorage")}return Zn.getLocalStorage=h,Zn}var Yl=$z(),$1={},tP;function Ohe(){if(tP)return $1;tP=1,Object.defineProperty($1,"__esModule",{value:!0}),$1.getWindowMetadata=void 0;const n=$z();function e(){let t,r;try{t=n.getDocumentOrThrow(),r=n.getLocationOrThrow()}catch{return null}function i(){const f=t.getElementsByTagName("link"),p=[];for(let m=0;m<f.length;m++){const g=f[m],y=g.getAttribute("rel");if(y&&y.toLowerCase().indexOf("icon")>-1){const b=g.getAttribute("href");if(b)if(b.toLowerCase().indexOf("https:")===-1&&b.toLowerCase().indexOf("http:")===-1&&b.indexOf("//")!==0){let w=r.protocol+"//"+r.host;if(b.indexOf("/")===0)w+=b;else{const E=r.pathname.split("/");E.pop();const x=E.join("/");w+=x+"/"+b}p.push(w)}else if(b.indexOf("//")===0){const w=r.protocol+b;p.push(w)}else p.push(b)}}return p}function s(...f){const p=t.getElementsByTagName("meta");for(let m=0;m<p.length;m++){const g=p[m],y=["itemprop","property","name"].map(b=>g.getAttribute(b)).filter(b=>b?f.includes(b):!1);if(y.length&&y){const b=g.getAttribute("content");if(b)return b}}return""}function o(){let f=s("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function a(){return s("description","og:description","twitter:description","keywords")}const c=o(),l=a(),u=r.origin,h=i();return{description:l,url:u,icons:h,name:c}}return $1.getWindowMetadata=e,$1}var khe=Ohe();function p2(n,{strict:e=!0}={}){return!n||typeof n!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x")}function US(n){return p2(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}const zz="2.31.0";let m6={getDocsUrl:({docsBaseUrl:n,docsPath:e="",docsSlug:t})=>e?`${n??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${zz}`},O5=class BS extends Error{constructor(e,t={}){const r=t.cause instanceof BS?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof BS&&t.cause.docsPath||t.docsPath,s=m6.getDocsUrl?.({...t,docsPath:i}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...m6.version?[`Version: ${m6.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=zz}walk(e){return Hz(this,e)}};function Hz(n,e){return e?.(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause!==void 0?Hz(n.cause,e):e?null:n}class Vz extends O5{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function s1(n,{dir:e,size:t=32}={}){return typeof n=="string"?Dhe(n,{dir:e,size:t}):Lhe(n,{dir:e,size:t})}function Dhe(n,{dir:e,size:t=32}={}){if(t===null)return n;const r=n.replace("0x","");if(r.length>t*2)throw new Vz({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function Lhe(n,{dir:e,size:t=32}={}){if(t===null)return n;if(n.length>t)throw new Vz({size:n.length,targetSize:t,type:"bytes"});const r=new Uint8Array(t);for(let i=0;i<t;i++){const s=e==="right";r[s?i:t-i-1]=n[s?i:n.length-i-1]}return r}class Uhe extends O5{constructor({max:e,min:t,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class Bhe extends O5{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function o1(n,{size:e}){if(US(n)>e)throw new Bhe({givenSize:US(n),maxSize:e})}function FS(n,e={}){const{signed:t}=e;e.size&&o1(n,{size:e.size});const r=BigInt(n);if(!t)return r;const i=(n.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Fhe(n,e={}){return Number(FS(n,e))}const $he=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function $S(n,e={}){return typeof n=="number"||typeof n=="bigint"?qz(n,e):typeof n=="string"?Vhe(n,e):typeof n=="boolean"?zhe(n,e):Wz(n,e)}function zhe(n,e={}){const t=`0x${Number(n)}`;return typeof e.size=="number"?(o1(t,{size:e.size}),s1(t,{size:e.size})):t}function Wz(n,e={}){let t="";for(let i=0;i<n.length;i++)t+=$he[n[i]];const r=`0x${t}`;return typeof e.size=="number"?(o1(r,{size:e.size}),s1(r,{dir:"right",size:e.size})):r}function qz(n,e={}){const{signed:t,size:r}=e,i=BigInt(n);let s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof n=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&t?-s-1n:0;if(s&&i>s||i<o){const c=typeof n=="bigint"?"n":"";throw new Uhe({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:t,size:r,value:`${n}${c}`})}const a=`0x${(t&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?s1(a,{size:r}):a}const Hhe=new TextEncoder;function Vhe(n,e={}){const t=Hhe.encode(n);return Wz(t,e)}const Whe=new TextEncoder;function qhe(n,e={}){return typeof n=="number"||typeof n=="bigint"?Ghe(n,e):typeof n=="boolean"?jhe(n,e):p2(n)?jz(n,e):Gz(n,e)}function jhe(n,e={}){const t=new Uint8Array(1);return t[0]=Number(n),typeof e.size=="number"?(o1(t,{size:e.size}),s1(t,{size:e.size})):t}const ll={zero:48,nine:57,A:65,F:70,a:97,f:102};function nP(n){if(n>=ll.zero&&n<=ll.nine)return n-ll.zero;if(n>=ll.A&&n<=ll.F)return n-(ll.A-10);if(n>=ll.a&&n<=ll.f)return n-(ll.a-10)}function jz(n,e={}){let t=n;e.size&&(o1(t,{size:e.size}),t=s1(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=nP(r.charCodeAt(a++)),l=nP(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new O5(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[o]=c*16+l}return s}function Ghe(n,e){const t=qz(n,e);return jz(t)}function Gz(n,e={}){const t=Whe.encode(n);return typeof e.size=="number"?(o1(t,{size:e.size}),s1(t,{dir:"right",size:e.size})):t}function Kz(n,e){const t=e||"hex",r=qF(p2(n,{strict:!1})?qhe(n):n);return t==="bytes"?r:$S(r)}class Khe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const g6=new Khe(8192);function Yhe(n,e){if(g6.has(`${n}.${e}`))return g6.get(`${n}.${e}`);const t=n.substring(2).toLowerCase(),r=Kz(Gz(t),"bytes"),i=t.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(r[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return g6.set(`${n}.${e}`,s),s}function Xhe(n){const e=Kz(`0x${n.substring(4)}`).substring(26);return Yhe(`0x${e}`)}async function Zhe({hash:n,signature:e}){const t=p2(n)?n:$S(n),{secp256k1:r}=await Ct(async()=>{const{secp256k1:o}=await import("./secp256k1-B-j5Gbc_.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:h,yParity:d}=e,f=Number(d??h),p=rP(f);return new r.Signature(FS(l),FS(u)).addRecoveryBit(p)}const o=p2(e)?e:$S(e);if(US(o)!==65)throw new Error("invalid signature length");const a=Fhe(`0x${o.slice(130)}`),c=rP(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function rP(n){if(n===0||n===1)return n;if(n===27)return 0;if(n===28)return 1;throw new Error("Invalid yParityOrV value")}async function Jhe({hash:n,signature:e}){return Xhe(await Zhe({hash:n,signature:e}))}function Qhe(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<n.length;l++){const u=n.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,d=0;const f=l.length;for(;d!==f&&l[d]===0;)d++,u++;const p=(f-d)*s+1>>>0,m=new Uint8Array(p);for(;d!==f;){let b=l[d],w=0;for(let E=p-1;(b!==0||w<h)&&E!==-1;E--,w++)b+=256*m[E]>>>0,m[E]=b%t>>>0,b=b/t>>>0;if(b!==0)throw new Error("Non-zero carry");h=w,d++}let g=p-h;for(;g!==p&&m[g]===0;)g++;let y=r.repeat(u);for(;g<p;++g)y+=n.charAt(m[g]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,d=0;for(;l[u]===r;)h++,u++;const f=(l.length-u)*i+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let w=e[b];if(w===255)return;let E=0;for(let x=f-1;(w!==0||E<d)&&x!==-1;x--,E++)w+=t*p[x]>>>0,p[x]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");d=E,u++}let m=f-d;for(;m!==f&&p[m]===0;)m++;const g=new Uint8Array(h+(f-m));let y=h;for(;m!==f;)g[y++]=p[m++];return g}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var ede="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const ii=Qhe(ede);function tde(n){const e=n.length;let t=0,r=0;for(;r<e;){let i=n.charCodeAt(r++);if((i&4294967168)===0){t++;continue}else if((i&4294965248)===0)t+=2;else{if(i>=55296&&i<=56319&&r<e){const s=n.charCodeAt(r);(s&64512)===56320&&(++r,i=((i&1023)<<10)+(s&1023)+65536)}(i&4294901760)===0?t+=3:t+=4}}return t}function nde(n,e,t){const r=n.length;let i=t,s=0;for(;s<r;){let o=n.charCodeAt(s++);if((o&4294967168)===0){e[i++]=o;continue}else if((o&4294965248)===0)e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<r){const a=n.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128):(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128)}e[i++]=o&63|128}}const rde=new TextEncoder,ide=50;function sde(n,e,t){rde.encodeInto(n,e.subarray(t))}function ode(n,e,t){n.length>ide?sde(n,e,t):nde(n,e,t)}const ade=4096;function Yz(n,e,t){let r=e;const i=r+t,s=[];let o="";for(;r<i;){const a=n[r++];if((a&128)===0)s.push(a);else if((a&224)===192){const c=n[r++]&63;s.push((a&31)<<6|c)}else if((a&240)===224){const c=n[r++]&63,l=n[r++]&63;s.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=n[r++]&63,l=n[r++]&63,u=n[r++]&63;let h=(a&7)<<18|c<<12|l<<6|u;h>65535&&(h-=65536,s.push(h>>>10&1023|55296),h=56320|h&1023),s.push(h)}else s.push(a);s.length>=ade&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}const cde=new TextDecoder,lde=200;function ude(n,e,t){const r=n.subarray(e,e+t);return cde.decode(r)}function hde(n,e,t){return t>lde?ude(n,e,t):Yz(n,e,t)}class Cw{constructor(e,t){this.type=e,this.data=t}}class vo extends Error{constructor(e){super(e);const t=Object.create(vo.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:vo.name})}}const z1=4294967295;function dde(n,e,t){const r=t/4294967296,i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function Xz(n,e,t){const r=Math.floor(t/4294967296),i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function Zz(n,e){const t=n.getInt32(e),r=n.getUint32(e+4);return t*4294967296+r}function fde(n,e){const t=n.getUint32(e),r=n.getUint32(e+4);return t*4294967296+r}const pde=-1,mde=4294967296-1,gde=17179869184-1;function yde({sec:n,nsec:e}){if(n>=0&&e>=0&&n<=gde)if(e===0&&n<=mde){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,n),t}else{const t=n/4294967296,r=n&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|t&3),s.setUint32(4,r),i}else{const t=new Uint8Array(12),r=new DataView(t.buffer);return r.setUint32(0,e),Xz(r,4,n),t}}function wde(n){const e=n.getTime(),t=Math.floor(e/1e3),r=(e-t*1e3)*1e6,i=Math.floor(r/1e9);return{sec:t+i,nsec:r-i*1e9}}function vde(n){if(n instanceof Date){const e=wde(n);return yde(e)}else return null}function bde(n){const e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const t=e.getUint32(0),r=e.getUint32(4),i=(t&3)*4294967296+r,s=t>>>2;return{sec:i,nsec:s}}case 12:{const t=Zz(e,4),r=e.getUint32(0);return{sec:t,nsec:r}}default:throw new vo(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${n.length}`)}}function _de(n){const e=bde(n);return new Date(e.sec*1e3+e.nsec/1e6)}const Ede={type:pde,encode:vde,decode:_de};class fb{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Ede)}register({type:e,encode:t,decode:r}){if(e>=0)this.encoders[e]=t,this.decoders[e]=r;else{const i=-1-e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const s=i(e,t);if(s!=null){const o=-1-r;return new Cw(o,s)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const s=i(e,t);if(s!=null){const o=r;return new Cw(o,s)}}}return e instanceof Cw?e:null}decode(e,t,r){const i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new Cw(t,e)}}fb.defaultCodec=new fb;function xde(n){return n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer}function zS(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):xde(n)?new Uint8Array(n):Uint8Array.from(n)}const Sde=100,Ade=2048;let Cde=class Jz{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??fb.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??Sde,this.initialBufferSize=e?.initialBufferSize??Ade,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Jz({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){const t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(e){const t=new ArrayBuffer(e),r=new Uint8Array(t),i=new DataView(t);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=tde(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),ode(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,t){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);const r=zS(e);this.writeU8a(r)}encodeArray(e,t){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of e)this.doEncode(i,t+1)}countWithoutUndefined(e,t){let r=0;for(const i of t)e[i]!==void 0&&r++;return r}encodeMap(e,t){const r=Object.keys(e);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const s of r){const o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,t+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(r);return}const t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),dde(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),Xz(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Tde(n,e){return new Cde(e).encodeSharedRef(n)}function y6(n){return`${n<0?"-":""}0x${Math.abs(n).toString(16).padStart(2,"0")}`}const Ide=16,Mde=16;class Rde{constructor(e=Ide,t=Mde){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){const i=this.caches[r-1];e:for(const s of i){const o=s.bytes;for(let a=0;a<r;a++)if(o[a]!==e[t+a])continue e;return s.str}return null}store(e,t){const r=this.caches[e.length-1],i={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(e,t,r){const i=this.find(e,t,r);if(i!=null)return this.hit++,i;this.miss++;const s=Yz(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,s),s}}const HS="array",ng="map_key",Qz="map_value",Pde=n=>{if(typeof n=="string"||typeof n=="number")return n;throw new vo("The type of key must be string or number but "+typeof n)};class Nde{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=HS,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=ng,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===HS){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===ng||e.type===Qz){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const H1=-1,J7=new DataView(new ArrayBuffer(0)),Ode=new Uint8Array(J7.buffer);try{J7.getInt8(0)}catch(n){if(!(n instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const iP=new RangeError("Insufficient data"),kde=new Rde;let Dde=class eH{constructor(e){this.totalPos=0,this.pos=0,this.view=J7,this.bytes=Ode,this.headByte=H1,this.stack=new Nde,this.entered=!1,this.extensionCodec=e?.extensionCodec??fb.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??z1,this.maxBinLength=e?.maxBinLength??z1,this.maxArrayLength=e?.maxArrayLength??z1,this.maxMapLength=e?.maxMapLength??z1,this.maxExtLength=e?.maxExtLength??z1,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:kde,this.mapKeyConverter=e?.mapKeyConverter??Pde}clone(){return new eH({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=H1,this.stack.reset()}setBuffer(e){const t=zS(e);this.bytes=t,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===H1&&!this.hasRemaining(1))this.setBuffer(e);else{const t=this.bytes.subarray(this.pos),r=zS(e),i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:t,pos:r}=this;return new RangeError(`Extra ${t.byteLength-r} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let t=!1,r;for await(const a of e){if(t)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),t=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${y6(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,t){if(this.entered){yield*this.clone().decodeMultiAsync(e,t);return}try{this.entered=!0;let r=t,i=-1;for await(const s of e){if(t&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){const i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e<160){const i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else{const i=e-160;t=this.decodeString(i,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)this.useBigInt64?t=this.readU64AsBigInt():t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)this.useBigInt64?t=this.readI64AsBigInt():t=this.readI64();else if(e===217){const i=this.lookU8();t=this.decodeString(i,1)}else if(e===218){const i=this.lookU16();t=this.decodeString(i,2)}else if(e===219){const i=this.lookU32();t=this.decodeString(i,4)}else if(e===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else t=[]}else if(e===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else t={}}else if(e===196){const i=this.lookU8();t=this.decodeBinary(i,1)}else if(e===197){const i=this.lookU16();t=this.decodeBinary(i,2)}else if(e===198){const i=this.lookU32();t=this.decodeBinary(i,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){const i=this.lookU8();t=this.decodeExtension(i,1)}else if(e===200){const i=this.lookU16();t=this.decodeExtension(i,2)}else if(e===201){const i=this.lookU32();t=this.decodeExtension(i,4)}else throw new vo(`Unrecognized type byte: ${y6(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===HS)if(i.array[i.position]=t,i.position++,i.position===i.size)t=i.array,r.release(i);else continue e;else if(i.type===ng){if(t==="__proto__")throw new vo("The key __proto__ is not allowed");i.key=this.mapKeyConverter(t),i.type=Qz;continue e}else if(i.map[i.key]=t,i.readCount++,i.readCount===i.size)t=i.map,r.release(i);else{i.key=null,i.type=ng;continue e}}return t}}readHeadByte(){return this.headByte===H1&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=H1}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new vo(`Unrecognized array type byte: ${y6(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new vo(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new vo(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,t){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,t):this.decodeBinary(e,t)}decodeUtf8String(e,t){if(e>this.maxStrLength)throw new vo(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw iP;const r=this.pos+t;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?i=this.keyDecoder.decode(this.bytes,r,e):i=hde(this.bytes,r,e),this.pos+=t+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===ng:!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new vo(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw iP;const r=this.pos+t,i=this.bytes.subarray(r,r+e);return this.pos+=t+e,i}decodeExtension(e,t){if(e>this.maxExtLength)throw new vo(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+t),i=this.decodeBinary(e,t+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=fde(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Zz(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function Lde(n,e){return new Dde(e).decode(n)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ude(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function tH(n,e){return Array.isArray(e)?e.length===0?!0:n?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function pb(n,e){if(typeof e!="string")throw new Error(`${n}: string expected`);return!0}function Q7(n){if(!Number.isSafeInteger(n))throw new Error(`invalid integer: ${n}`)}function VS(n){if(!Array.isArray(n))throw new Error("array expected")}function mb(n,e){if(!tH(!0,e))throw new Error(`${n}: array of strings expected`)}function Bde(n,e){if(!tH(!1,e))throw new Error(`${n}: array of numbers expected`)}function Fde(...n){const e=s=>s,t=(s,o)=>a=>s(o(a)),r=n.map(s=>s.encode).reduceRight(t,e),i=n.map(s=>s.decode).reduce(t,e);return{encode:r,decode:i}}function $de(n){const e=typeof n=="string"?n.split(""):n,t=e.length;mb("alphabet",e);const r=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(VS(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${n}`);return e[s]})),decode:i=>(VS(i),i.map(s=>{pb("alphabet.decode",s);const o=r.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${n}`);return o}))}}function zde(n=""){return pb("join",n),{encode:e=>(mb("join.decode",e),e.join(n)),decode:e=>(pb("join.decode",e),e.split(n))}}function Hde(n,e="="){return Q7(n),pb("padding",e),{encode(t){for(mb("padding.encode",t);t.length*n%8;)t.push(e);return t},decode(t){mb("padding.decode",t);let r=t.length;if(r*n%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if((r-1)*n%8===0)throw new Error("padding: invalid, string has too much padding");return t.slice(0,r)}}}const nH=(n,e)=>e===0?n:nH(e,n%e),gb=(n,e)=>n+(e-nH(n,e)),w6=(()=>{let n=[];for(let e=0;e<40;e++)n.push(2**e);return n})();function sP(n,e,t,r){if(VS(n),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(gb(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${gb(e,t)}`);let i=0,s=0;const o=w6[e],a=w6[t]-1,c=[];for(const l of n){if(Q7(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(i=i<<e|l,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=t;s-=t)c.push((i>>s-t&a)>>>0);const u=w6[s];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<t-s&a,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function Vde(n,e=!1){if(Q7(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(gb(8,n)>32||gb(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!Ude(t))throw new Error("radix2.encode input should be Uint8Array");return sP(Array.from(t),8,n,!e)},decode:t=>(Bde("radix2.decode",t),Uint8Array.from(sP(t,n,8,e)))}}const Wde=Fde(Vde(5),$de("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Hde(5),zde(""));function e9(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function rH(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?e9(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function rg(n,e){e||(e=n.reduce((i,s)=>i+s.length,0));const t=rH(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return e9(t)}function qde(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var a=n.length,c=n.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,g=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,m++;for(var w=(b-y)*u+1>>>0,E=new Uint8Array(w);y!==b;){for(var x=p[y],C=0,R=w-1;(x!==0||C<g)&&R!==-1;R--,C++)x+=256*E[R]>>>0,E[R]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");g=C,y++}for(var k=w-g;k!==w&&E[k]===0;)k++;for(var _=c.repeat(m);k<w;++k)_+=n.charAt(E[k]);return _}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var g=0,y=0;p[m]===c;)g++,m++;for(var b=(p.length-m)*l+1>>>0,w=new Uint8Array(b);p[m];){var E=t[p.charCodeAt(m)];if(E===255)return;for(var x=0,C=b-1;(E!==0||x<y)&&C!==-1;C--,x++)E+=a*w[C]>>>0,w[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=x,m++}if(p[m]!==" "){for(var R=b-y;R!==b&&w[R]===0;)R++;for(var k=new Uint8Array(g+(b-R)),_=g;R!==b;)k[_++]=w[R++];return k}}}function f(p){var m=d(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var jde=qde,Gde=jde;const Kde=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Yde=n=>new TextEncoder().encode(n),Xde=n=>new TextDecoder().decode(n);let Zde=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Jde=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return iH(this,e)}};class Qde{constructor(e){this.decoders=e}or(e){return iH(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const iH=(n,e)=>new Qde({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class efe{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new Zde(e,t,r),this.decoder=new Jde(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const k5=({name:n,prefix:e,encode:t,decode:r})=>new efe(n,e,t,r),Cy=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=Gde(t,e);return k5({prefix:n,name:e,encode:r,decode:s=>Kde(i(s))})},tfe=(n,e,t,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[n[u]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<t|h,a+=t,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},nfe=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,a=0;for(let c=0;c<n.length;++c)for(a=a<<8|n[c],o+=8;o>t;)o-=t,s+=e[i&a>>o];if(o&&(s+=e[i&a<<t-o]),r)for(;s.length*t&7;)s+="=";return s},Vi=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>k5({prefix:e,name:n,encode(i){return nfe(i,r,t)},decode(i){return tfe(i,r,t,n)}}),rfe=k5({prefix:"\0",name:"identity",encode:n=>Xde(n),decode:n=>Yde(n)}),ife=Object.freeze(Object.defineProperty({__proto__:null,identity:rfe},Symbol.toStringTag,{value:"Module"})),sfe=Vi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ofe=Object.freeze(Object.defineProperty({__proto__:null,base2:sfe},Symbol.toStringTag,{value:"Module"})),afe=Vi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),cfe=Object.freeze(Object.defineProperty({__proto__:null,base8:afe},Symbol.toStringTag,{value:"Module"})),lfe=Cy({prefix:"9",name:"base10",alphabet:"0123456789"}),ufe=Object.freeze(Object.defineProperty({__proto__:null,base10:lfe},Symbol.toStringTag,{value:"Module"})),hfe=Vi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dfe=Vi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ffe=Object.freeze(Object.defineProperty({__proto__:null,base16:hfe,base16upper:dfe},Symbol.toStringTag,{value:"Module"})),pfe=Vi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),mfe=Vi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gfe=Vi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),yfe=Vi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wfe=Vi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),vfe=Vi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bfe=Vi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_fe=Vi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Efe=Vi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),xfe=Object.freeze(Object.defineProperty({__proto__:null,base32:pfe,base32hex:wfe,base32hexpad:bfe,base32hexpadupper:_fe,base32hexupper:vfe,base32pad:gfe,base32padupper:yfe,base32upper:mfe,base32z:Efe},Symbol.toStringTag,{value:"Module"})),Sfe=Cy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Afe=Cy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Cfe=Object.freeze(Object.defineProperty({__proto__:null,base36:Sfe,base36upper:Afe},Symbol.toStringTag,{value:"Module"})),Tfe=Cy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ife=Cy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Mfe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Tfe,base58flickr:Ife},Symbol.toStringTag,{value:"Module"})),Rfe=Vi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pfe=Vi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Nfe=Vi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ofe=Vi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),kfe=Object.freeze(Object.defineProperty({__proto__:null,base64:Rfe,base64pad:Pfe,base64url:Nfe,base64urlpad:Ofe},Symbol.toStringTag,{value:"Module"})),sH=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Dfe=sH.reduce((n,e,t)=>(n[t]=e,n),[]),Lfe=sH.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function Ufe(n){return n.reduce((e,t)=>(e+=Dfe[t],e),"")}function Bfe(n){const e=[];for(const t of n){const r=Lfe[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const Ffe=k5({prefix:"🚀",name:"base256emoji",encode:Ufe,decode:Bfe}),$fe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Ffe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const oP={...ife,...ofe,...cfe,...ufe,...ffe,...xfe,...Cfe,...Mfe,...kfe,...$fe};function oH(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const aP=oH("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),v6=oH("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=rH(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),aH={utf8:aP,"utf-8":aP,hex:oP.base16,latin1:v6,ascii:v6,binary:v6,...oP};function ea(n,e="utf8"){const t=aH[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?e9(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function so(n,e="utf8"){const t=aH[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}const zfe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var b6,cP;function cH(){if(cP)return b6;cP=1;const n="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(n);return a}function t(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function i(o,a,c){let l=`
`+o+" = ";for(let u=0;u<a.length;u+=2){if(c===32)l+=r(a[u]).toUpperCase(),l+=" ",l+=r(a[u+1]).toUpperCase();else if(c===64)l+=r(a[u+1]).toUpperCase(),l+=r(a[u]).toUpperCase();else throw new Error("Invalid size "+c);u%6===4?l+=`
`+new Array(o.length+4).join(" "):u<a.length-2&&(l+=" ")}console.log(l)}function s(o,a,c){let l=new Date().getTime();const u=new Uint8Array(a);for(let d=0;d<a;d++)u[d]=d%256;const h=new Date().getTime();console.log("Generated random input in "+(h-l)+"ms"),l=h;for(let d=0;d<c;d++){const f=o(u),p=new Date().getTime(),m=p-l;l=p,console.log("Hashed in "+m+"ms: "+f.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(m/1e3)*100)/100+" MB PER SECOND")}}return b6={normalizeInput:e,toHex:t,debugPrint:i,testSpeed:s},b6}var _6,lP;function Hfe(){if(lP)return _6;lP=1;const n=cH();function e(y,b,w){const E=y[b]+y[w];let x=y[b+1]+y[w+1];E>=4294967296&&x++,y[b]=E,y[b+1]=x}function t(y,b,w,E){let x=y[b]+w;w<0&&(x+=4294967296);let C=y[b+1]+E;x>=4294967296&&C++,y[b]=x,y[b+1]=C}function r(y,b){return y[b]^y[b+1]<<8^y[b+2]<<16^y[b+3]<<24}function i(y,b,w,E,x,C){const R=l[x],k=l[x+1],_=l[C],A=l[C+1];e(c,y,b),t(c,y,R,k);let M=c[E]^c[y],D=c[E+1]^c[y+1];c[E]=D,c[E+1]=M,e(c,w,E),M=c[b]^c[w],D=c[b+1]^c[w+1],c[b]=M>>>24^D<<8,c[b+1]=D>>>24^M<<8,e(c,y,b),t(c,y,_,A),M=c[E]^c[y],D=c[E+1]^c[y+1],c[E]=M>>>16^D<<16,c[E+1]=D>>>16^M<<16,e(c,w,E),M=c[b]^c[w],D=c[b+1]^c[w+1],c[b]=D>>>31^M<<1,c[b+1]=M>>>31^D<<1}const s=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(y){return y*2})),c=new Uint32Array(32),l=new Uint32Array(32);function u(y,b){let w=0;for(w=0;w<16;w++)c[w]=y.h[w],c[w+16]=s[w];for(c[24]=c[24]^y.t,c[25]=c[25]^y.t/4294967296,b&&(c[28]=~c[28],c[29]=~c[29]),w=0;w<32;w++)l[w]=r(y.b,4*w);for(w=0;w<12;w++)i(0,8,16,24,a[w*16+0],a[w*16+1]),i(2,10,18,26,a[w*16+2],a[w*16+3]),i(4,12,20,28,a[w*16+4],a[w*16+5]),i(6,14,22,30,a[w*16+6],a[w*16+7]),i(0,10,20,30,a[w*16+8],a[w*16+9]),i(2,12,22,24,a[w*16+10],a[w*16+11]),i(4,14,16,26,a[w*16+12],a[w*16+13]),i(6,8,18,28,a[w*16+14],a[w*16+15]);for(w=0;w<16;w++)y.h[w]=y.h[w]^c[w]^c[w+16]}const h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function d(y,b,w,E){if(y===0||y>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(b&&b.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(w&&w.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(E&&E.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const x={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:y};h.fill(0),h[0]=y,b&&(h[1]=b.length),h[2]=1,h[3]=1,w&&h.set(w,32),E&&h.set(E,48);for(let C=0;C<16;C++)x.h[C]=s[C]^r(h,C*4);return b&&(f(x,b),x.c=128),x}function f(y,b){for(let w=0;w<b.length;w++)y.c===128&&(y.t+=y.c,u(y,!1),y.c=0),y.b[y.c++]=b[w]}function p(y){for(y.t+=y.c;y.c<128;)y.b[y.c++]=0;u(y,!0);const b=new Uint8Array(y.outlen);for(let w=0;w<y.outlen;w++)b[w]=y.h[w>>2]>>8*(w&3);return b}function m(y,b,w,E,x){w=w||64,y=n.normalizeInput(y),E&&(E=n.normalizeInput(E)),x&&(x=n.normalizeInput(x));const C=d(w,b,E,x);return f(C,y),p(C)}function g(y,b,w,E,x){const C=m(y,b,w,E,x);return n.toHex(C)}return _6={blake2b:m,blake2bHex:g,blake2bInit:d,blake2bUpdate:f,blake2bFinal:p},_6}var E6,uP;function Vfe(){if(uP)return E6;uP=1;const n=cH();function e(p,m){return p[m]^p[m+1]<<8^p[m+2]<<16^p[m+3]<<24}function t(p,m,g,y,b,w){o[p]=o[p]+o[m]+b,o[y]=r(o[y]^o[p],16),o[g]=o[g]+o[y],o[m]=r(o[m]^o[g],12),o[p]=o[p]+o[m]+w,o[y]=r(o[y]^o[p],8),o[g]=o[g]+o[y],o[m]=r(o[m]^o[g],7)}function r(p,m){return p>>>m^p<<32-m}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),s=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(p,m){let g=0;for(g=0;g<8;g++)o[g]=p.h[g],o[g+8]=i[g];for(o[12]^=p.t,o[13]^=p.t/4294967296,m&&(o[14]=~o[14]),g=0;g<16;g++)a[g]=e(p.b,4*g);for(g=0;g<10;g++)t(0,4,8,12,a[s[g*16+0]],a[s[g*16+1]]),t(1,5,9,13,a[s[g*16+2]],a[s[g*16+3]]),t(2,6,10,14,a[s[g*16+4]],a[s[g*16+5]]),t(3,7,11,15,a[s[g*16+6]],a[s[g*16+7]]),t(0,5,10,15,a[s[g*16+8]],a[s[g*16+9]]),t(1,6,11,12,a[s[g*16+10]],a[s[g*16+11]]),t(2,7,8,13,a[s[g*16+12]],a[s[g*16+13]]),t(3,4,9,14,a[s[g*16+14]],a[s[g*16+15]]);for(g=0;g<8;g++)p.h[g]^=o[g]^o[g+8]}function l(p,m){if(!(p>0&&p<=32))throw new Error("Incorrect output length, should be in [1, 32]");const g=m?m.length:0;if(m&&!(g>0&&g<=32))throw new Error("Incorrect key length, should be in [1, 32]");const y={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:p};return y.h[0]^=16842752^g<<8^p,g>0&&(u(y,m),y.c=64),y}function u(p,m){for(let g=0;g<m.length;g++)p.c===64&&(p.t+=p.c,c(p,!1),p.c=0),p.b[p.c++]=m[g]}function h(p){for(p.t+=p.c;p.c<64;)p.b[p.c++]=0;c(p,!0);const m=new Uint8Array(p.outlen);for(let g=0;g<p.outlen;g++)m[g]=p.h[g>>2]>>8*(g&3)&255;return m}function d(p,m,g){g=g||32,p=n.normalizeInput(p);const y=l(g,m);return u(y,p),h(y)}function f(p,m,g){const y=d(p,m,g);return n.toHex(y)}return E6={blake2s:d,blake2sHex:f,blake2sInit:l,blake2sUpdate:u,blake2sFinal:h},E6}var x6,hP;function Wfe(){if(hP)return x6;hP=1;const n=Hfe(),e=Vfe();return x6={blake2b:n.blake2b,blake2bHex:n.blake2bHex,blake2bInit:n.blake2bInit,blake2bUpdate:n.blake2bUpdate,blake2bFinal:n.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},x6}var qfe=Wfe(),jfe={};const Gfe=":";function c0(n){const[e,t]=n.split(Gfe);return{namespace:e,reference:t}}function lH(n,e){return n.includes(":")?[n]:e.chains||[]}var Kfe=Object.defineProperty,Yfe=Object.defineProperties,Xfe=Object.getOwnPropertyDescriptors,dP=Object.getOwnPropertySymbols,Zfe=Object.prototype.hasOwnProperty,Jfe=Object.prototype.propertyIsEnumerable,fP=(n,e,t)=>e in n?Kfe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pP=(n,e)=>{for(var t in e||(e={}))Zfe.call(e,t)&&fP(n,t,e[t]);if(dP)for(var t of dP(e))Jfe.call(e,t)&&fP(n,t,e[t]);return n},Qfe=(n,e)=>Yfe(n,Xfe(e));const epe="ReactNative",To={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},tpe="js";function yb(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Lh(){return!Yl.getDocument()&&!!Yl.getNavigator()&&navigator.product===epe}function npe(){return Lh()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function rpe(){return Lh()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function a1(){return!yb()&&!!Yl.getNavigator()&&!!Yl.getDocument()}function Ty(){return Lh()?To.reactNative:yb()?To.node:a1()?To.browser:To.unknown}function mP(){var n;try{return Lh()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(n=global.Application)==null?void 0:n.applicationId:void 0}catch{return}}function ipe(n,e){const t=new URLSearchParams(n);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const i=e[r];i!==void 0&&t.set(r,i)}return t.toString()}function spe(n){var e,t;const r=uH();try{return n!=null&&n.url&&r.url&&new URL(n.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${n.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),n.url=r.url),(e=n?.icons)!=null&&e.length&&n.icons.length>0&&(n.icons=n.icons.filter(i=>i!=="")),Qfe(pP(pP({},r),n),{url:n?.url||r.url,name:n?.name||r.name,description:n?.description||r.description,icons:(t=n?.icons)!=null&&t.length&&n.icons.length>0?n.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),n||r}}function uH(){return khe.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function ope(){if(Ty()===To.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:r}=global.Platform;return[t,r].join("-")}const n=The();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function ape(){var n;const e=Ty();return e===To.browser?[e,((n=Yl.getLocation())==null?void 0:n.host)||"unknown"].join(":"):e}function hH(n,e,t){const r=ope(),i=ape();return[[n,e].join("-"),[tpe,t].join("-"),r,i].join("/")}function cpe({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=t.split("?"),u=hH(n,e,r),h={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},d=ipe(l[1]||"",h);return l[0]+"?"+d}function Nd(n,e){return n.filter(t=>e.includes(t)).length===n.length}function WS(n){return Object.fromEntries(n.entries())}function qS(n){return new Map(Object.entries(n))}function pd(n=et.FIVE_MINUTES,e){const t=et.toMiliseconds(n||et.FIVE_MINUTES);let r,i,s,o;return{resolve:a=>{s&&r&&(clearTimeout(s),r(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},t),r=a,i=c})}}function nh(n,e,t){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(t)),e);try{const o=await n;r(o)}catch(o){i(o)}clearTimeout(s)})}function dH(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function lpe(n){return dH("topic",n)}function upe(n){return dH("id",n)}function fH(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")r.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return r}function Qr(n,e){return et.fromMiliseconds(Date.now()+et.toMiliseconds(n))}function Vu(n){return Date.now()>=et.toMiliseconds(n)}function Fn(n,e){return`${n}${e?`:${e}`:""}`}function kc(n=[],e=[]){return[...new Set([...n,...e])]}async function hpe({id:n,topic:e,wcDeepLink:t}){var r;try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t,s=i?.href;if(typeof s!="string")return;const o=dpe(s,n,e),a=Ty();if(a===To.browser){if(!((r=Yl.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}fpe(o)}else a===To.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function dpe(n,e,t){const r=`requestId=${e}&sessionTopic=${t}`;n.endsWith("/")&&(n=n.slice(0,-1));let i=`${n}`;if(n.startsWith("https://t.me")){const s=n.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${ype(r,!0)}`}else i=`${i}/wc?${r}`;return i}function fpe(n){let e="_self";gpe()?e="_top":(mpe()||n.startsWith("https://")||n.startsWith("http://"))&&(e="_blank"),window.open(n,e,"noreferrer noopener")}async function ppe(n,e){let t="";try{if(a1()&&(t=localStorage.getItem(e),t))return t;t=await n.getItem(e)}catch(r){console.error(r)}return t}function gP(n,e){if(!n.includes(e))return null;const t=n.split(/([&,?,=])/),r=t.indexOf(e);return t[r+2]}function yP(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function t9(){return typeof process<"u"&&jfe.IS_VITEST==="true"}function mpe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function gpe(){try{return window.self!==window.top}catch{return!1}}function ype(n,e=!1){const t=Buffer.from(n).toString("base64");return e?t.replace(/[=]/g,""):t}function pH(n){return Buffer.from(n,"base64").toString("utf-8")}function wpe(n){return new Promise(e=>setTimeout(e,n))}const Tw=BigInt(2**32-1),wP=BigInt(32);function mH(n,e=!1){return e?{h:Number(n&Tw),l:Number(n>>wP&Tw)}:{h:Number(n>>wP&Tw)|0,l:Number(n&Tw)|0}}function gH(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:a}=mH(n[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const vP=(n,e,t)=>n>>>t,bP=(n,e,t)=>n<<32-t|e>>>t,Wu=(n,e,t)=>n>>>t|e<<32-t,qu=(n,e,t)=>n<<32-t|e>>>t,Cm=(n,e,t)=>n<<64-t|e>>>t-32,Tm=(n,e,t)=>n>>>t-32|e<<64-t,vpe=(n,e)=>e,bpe=(n,e)=>n,_pe=(n,e,t)=>n<<t|e>>>32-t,Epe=(n,e,t)=>e<<t|n>>>32-t,xpe=(n,e,t)=>e<<t-32|n>>>64-t,Spe=(n,e,t)=>n<<t-32|e>>>64-t;function Ma(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const n9=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),r9=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Ape=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Cpe=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,Tpe=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),Ipe=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Jf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function i9(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Xl(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function ua(n,...e){if(!i9(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function s9(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Xl(n.outputLen),Xl(n.blockLen)}function Th(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function o9(n,e){ua(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function m2(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function ha(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function S6(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function uc(n,e){return n<<32-e|n>>>e}const yH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function wH(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}const bl=yH?n=>n:n=>wH(n);function Mpe(n){for(let e=0;e<n.length;e++)n[e]=wH(n[e]);return n}const ju=yH?n=>n:Mpe,vH=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Rpe=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function g2(n){if(ua(n),vH)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=Rpe[n[t]];return e}const ul={_0:48,_9:57,A:65,F:70,a:97,f:102};function _P(n){if(n>=ul._0&&n<=ul._9)return n-ul._0;if(n>=ul.A&&n<=ul.F)return n-(ul.A-10);if(n>=ul.a&&n<=ul.f)return n-(ul.a-10)}function a9(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(vH)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=_P(n.charCodeAt(s)),a=_P(n.charCodeAt(s+1));if(o===void 0||a===void 0){const c=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Ppe(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Va(n){return typeof n=="string"&&(n=Ppe(n)),ua(n),n}function Od(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];ua(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}let D5=class{};function Iy(n){const e=r=>n().update(Va(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Npe(n){const e=(r,i)=>n(i).update(Va(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function c1(n=32){if(Jf&&typeof Jf.getRandomValues=="function")return Jf.getRandomValues(new Uint8Array(n));if(Jf&&typeof Jf.randomBytes=="function")return Uint8Array.from(Jf.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const Ope=BigInt(0),V1=BigInt(1),kpe=BigInt(2),Dpe=BigInt(7),Lpe=BigInt(256),Upe=BigInt(113),bH=[],_H=[],EH=[];for(let n=0,e=V1,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],bH.push(2*(5*r+t)),_H.push((n+1)*(n+2)/2%64);let i=Ope;for(let s=0;s<7;s++)e=(e<<V1^(e>>Dpe)*Upe)%Lpe,e&kpe&&(i^=V1<<(V1<<BigInt(s))-V1);EH.push(i)}const xH=gH(EH,!0),Bpe=xH[0],Fpe=xH[1],EP=(n,e,t)=>t>32?xpe(n,e,t):_pe(n,e,t),xP=(n,e,t)=>t>32?Spe(n,e,t):Epe(n,e,t);function $pe(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],h=EP(l,u,1)^t[a],d=xP(l,u,1)^t[a+1];for(let f=0;f<50;f+=10)n[o+f]^=h,n[o+f+1]^=d}let i=n[2],s=n[3];for(let o=0;o<24;o++){const a=_H[o],c=EP(i,s,a),l=xP(i,s,a),u=bH[o];i=n[u],s=n[u+1],n[u]=c,n[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=Bpe[r],n[1]^=Fpe[r]}ha(t)}let zpe=class SH extends D5{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,Xl(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=m2(this.state)}clone(){return this._cloneInto()}keccak(){ju(this.state32),$pe(this.state32,this.rounds),ju(this.state32),this.posOut=0,this.pos=0}update(e){Th(this),e=Va(e),ua(e);const{blockLen:t,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(t&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Th(this,!1),ua(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Xl(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(o9(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ha(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new SH(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Hpe=(n,e,t)=>Iy(()=>new zpe(e,n,t)),Vpe=Hpe(1,136,256/8);function Wpe(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=r?4:0,l=r?0:4;n.setUint32(e+c,o,r),n.setUint32(e+l,a,r)}function qpe(n,e,t){return n&e^~n&t}function jpe(n,e,t){return n&e^n&t^e&t}let AH=class extends D5{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=S6(this.buffer)}update(e){Th(this),e=Va(e),ua(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=S6(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Th(this),o9(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,ha(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)t[h]=0;Wpe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=S6(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const vu=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ji=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Gi=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Gpe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bu=new Uint32Array(64);let Kpe=class extends AH{constructor(e=32){super(64,e,8,!1),this.A=vu[0]|0,this.B=vu[1]|0,this.C=vu[2]|0,this.D=vu[3]|0,this.E=vu[4]|0,this.F=vu[5]|0,this.G=vu[6]|0,this.H=vu[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,r,i,s,o,a,c]}set(e,t,r,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)bu[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const d=bu[h-15],f=bu[h-2],p=uc(d,7)^uc(d,18)^d>>>3,m=uc(f,17)^uc(f,19)^f>>>10;bu[h]=m+bu[h-7]+p+bu[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=uc(a,6)^uc(a,11)^uc(a,25),f=u+d+qpe(a,c,l)+Gpe[h]+bu[h]|0,p=(uc(r,2)^uc(r,13)^uc(r,22))+jpe(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){ha(bu)}destroy(){this.set(0,0,0,0,0,0,0,0),ha(this.buffer)}};const CH=gH(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Ype=CH[0],Xpe=CH[1],_u=new Uint32Array(80),Eu=new Uint32Array(80);let c9=class extends AH{constructor(e=64){super(128,e,16,!1),this.Ah=Gi[0]|0,this.Al=Gi[1]|0,this.Bh=Gi[2]|0,this.Bl=Gi[3]|0,this.Ch=Gi[4]|0,this.Cl=Gi[5]|0,this.Dh=Gi[6]|0,this.Dl=Gi[7]|0,this.Eh=Gi[8]|0,this.El=Gi[9]|0,this.Fh=Gi[10]|0,this.Fl=Gi[11]|0,this.Gh=Gi[12]|0,this.Gl=Gi[13]|0,this.Hh=Gi[14]|0,this.Hl=Gi[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:d,Gh:f,Gl:p,Hh:m,Hl:g}=this;return[e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g]}set(e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=g|0}process(e,t){for(let w=0;w<16;w++,t+=4)_u[w]=e.getUint32(t),Eu[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const E=_u[w-15]|0,x=Eu[w-15]|0,C=Wu(E,x,1)^Wu(E,x,8)^vP(E,x,7),R=qu(E,x,1)^qu(E,x,8)^bP(E,x,7),k=_u[w-2]|0,_=Eu[w-2]|0,A=Wu(k,_,19)^Cm(k,_,61)^vP(k,_,6),M=qu(k,_,19)^Tm(k,_,61)^bP(k,_,6),D=Ape(R,M,Eu[w-7],Eu[w-16]),P=Cpe(D,C,A,_u[w-7],_u[w-16]);_u[w]=P|0,Eu[w]=D|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:d,Fh:f,Fl:p,Gh:m,Gl:g,Hh:y,Hl:b}=this;for(let w=0;w<80;w++){const E=Wu(h,d,14)^Wu(h,d,18)^Cm(h,d,41),x=qu(h,d,14)^qu(h,d,18)^Tm(h,d,41),C=h&f^~h&m,R=d&p^~d&g,k=Tpe(b,x,R,Xpe[w],Eu[w]),_=Ipe(k,y,E,C,Ype[w],_u[w]),A=k|0,M=Wu(r,i,28)^Cm(r,i,34)^Cm(r,i,39),D=qu(r,i,28)^Tm(r,i,34)^Tm(r,i,39),P=r&s^r&a^s&a,v=i&o^i&c^o&c;y=m|0,b=g|0,m=f|0,g=p|0,f=h|0,p=d|0,{h,l:d}=Ma(l|0,u|0,_|0,A|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const S=n9(A,D,v);r=r9(S,_,M,P),i=S|0}({h:r,l:i}=Ma(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Ma(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Ma(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ma(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:d}=Ma(this.Eh|0,this.El|0,h|0,d|0),{h:f,l:p}=Ma(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:g}=Ma(this.Gh|0,this.Gl|0,m|0,g|0),{h:y,l:b}=Ma(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,i,s,o,a,c,l,u,h,d,f,p,m,g,y,b)}roundClean(){ha(_u,Eu)}destroy(){ha(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Zpe=class extends c9{constructor(){super(48),this.Ah=ji[0]|0,this.Al=ji[1]|0,this.Bh=ji[2]|0,this.Bl=ji[3]|0,this.Ch=ji[4]|0,this.Cl=ji[5]|0,this.Dh=ji[6]|0,this.Dl=ji[7]|0,this.Eh=ji[8]|0,this.El=ji[9]|0,this.Fh=ji[10]|0,this.Fl=ji[11]|0,this.Gh=ji[12]|0,this.Gl=ji[13]|0,this.Hh=ji[14]|0,this.Hl=ji[15]|0}};const Ki=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let Jpe=class extends c9{constructor(){super(32),this.Ah=Ki[0]|0,this.Al=Ki[1]|0,this.Bh=Ki[2]|0,this.Bl=Ki[3]|0,this.Ch=Ki[4]|0,this.Cl=Ki[5]|0,this.Dh=Ki[6]|0,this.Dl=Ki[7]|0,this.Eh=Ki[8]|0,this.El=Ki[9]|0,this.Fh=Ki[10]|0,this.Fl=Ki[11]|0,this.Gh=Ki[12]|0,this.Gl=Ki[13]|0,this.Hh=Ki[14]|0,this.Hl=Ki[15]|0}};const L5=Iy(()=>new Kpe),Qpe=Iy(()=>new c9),e0e=Iy(()=>new Zpe),t0e=Iy(()=>new Jpe),n0e=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Jr=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),pt=new Uint32Array(32);function xu(n,e,t,r,i,s){const o=i[s],a=i[s+1];let c=pt[2*n],l=pt[2*n+1],u=pt[2*e],h=pt[2*e+1],d=pt[2*t],f=pt[2*t+1],p=pt[2*r],m=pt[2*r+1],g=n9(c,u,o);l=r9(g,l,h,a),c=g|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:vpe(m,p),Dl:bpe(m)},{h:f,l:d}=Ma(f,d,m,p),{Bh:h,Bl:u}={Bh:h^f,Bl:u^d},{Bh:h,Bl:u}={Bh:Wu(h,u,24),Bl:qu(h,u,24)},pt[2*n]=c,pt[2*n+1]=l,pt[2*e]=u,pt[2*e+1]=h,pt[2*t]=d,pt[2*t+1]=f,pt[2*r]=p,pt[2*r+1]=m}function Su(n,e,t,r,i,s){const o=i[s],a=i[s+1];let c=pt[2*n],l=pt[2*n+1],u=pt[2*e],h=pt[2*e+1],d=pt[2*t],f=pt[2*t+1],p=pt[2*r],m=pt[2*r+1],g=n9(c,u,o);l=r9(g,l,h,a),c=g|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:Wu(m,p,16),Dl:qu(m,p,16)},{h:f,l:d}=Ma(f,d,m,p),{Bh:h,Bl:u}={Bh:h^f,Bl:u^d},{Bh:h,Bl:u}={Bh:Cm(h,u,63),Bl:Tm(h,u,63)},pt[2*n]=c,pt[2*n+1]=l,pt[2*e]=u,pt[2*e+1]=h,pt[2*t]=d,pt[2*t+1]=f,pt[2*r]=p,pt[2*r+1]=m}function r0e(n,e={},t,r,i){if(Xl(t),n<0||n>t)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:a}=e;if(s!==void 0&&(s.length<1||s.length>t))throw new Error("key length must be undefined or 1.."+t);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==i)throw new Error("personalization must be undefined or "+i)}class i0e extends D5{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Xl(e),Xl(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=m2(this.buffer)}update(e){Th(this),e=Va(e),ua(e);const{blockLen:t,buffer:r,buffer32:i}=this,s=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<s;){this.pos===t&&(ju(i),this.compress(i,0,!1),ju(i),this.pos=0);const l=Math.min(t-this.pos,s-c),u=o+c;if(l===t&&!(u%4)&&c+l<s){const h=new Uint32Array(a,u,Math.floor((s-c)/4));ju(h);for(let d=0;c+t<s;d+=i.length,c+=t)this.length+=t,this.compress(h,d,!1);ju(h);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Th(this),o9(e,this);const{pos:t,buffer32:r}=this;this.finished=!0,ha(this.buffer.subarray(t)),ju(r),this.compress(r,0,!0),ju(r);const i=m2(e);this.get().forEach((s,o)=>i[o]=bl(s))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){const{buffer:t,length:r,finished:i,destroyed:s,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=s,e.finished=i,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class s0e extends i0e{constructor(e={}){const t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=Jr[0]|0,this.v0h=Jr[1]|0,this.v1l=Jr[2]|0,this.v1h=Jr[3]|0,this.v2l=Jr[4]|0,this.v2h=Jr[5]|0,this.v3l=Jr[6]|0,this.v3h=Jr[7]|0,this.v4l=Jr[8]|0,this.v4h=Jr[9]|0,this.v5l=Jr[10]|0,this.v5h=Jr[11]|0,this.v6l=Jr[12]|0,this.v6h=Jr[13]|0,this.v7l=Jr[14]|0,this.v7h=Jr[15]|0,r0e(t,e,64,16,16);let{key:r,personalization:i,salt:s}=e,o=0;if(r!==void 0&&(r=Va(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=Va(s);const a=m2(s);this.v4l^=bl(a[0]),this.v4h^=bl(a[1]),this.v5l^=bl(a[2]),this.v5h^=bl(a[3])}if(i!==void 0){i=Va(i);const a=m2(i);this.v6l^=bl(a[0]),this.v6h^=bl(a[1]),this.v7l^=bl(a[2]),this.v7h^=bl(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:i,v2l:s,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:h,v5h:d,v6l:f,v6h:p,v7l:m,v7h:g}=this;return[e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g]}set(e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g){this.v0l=e|0,this.v0h=t|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=h|0,this.v5h=d|0,this.v6l=f|0,this.v6h=p|0,this.v7l=m|0,this.v7h=g|0}compress(e,t,r){this.get().forEach((c,l)=>pt[l]=c),pt.set(Jr,16);let{h:i,l:s}=mH(BigInt(this.length));pt[24]=Jr[8]^s,pt[25]=Jr[9]^i,r&&(pt[28]=~pt[28],pt[29]=~pt[29]);let o=0;const a=n0e;for(let c=0;c<12;c++)xu(0,4,8,12,e,t+2*a[o++]),Su(0,4,8,12,e,t+2*a[o++]),xu(1,5,9,13,e,t+2*a[o++]),Su(1,5,9,13,e,t+2*a[o++]),xu(2,6,10,14,e,t+2*a[o++]),Su(2,6,10,14,e,t+2*a[o++]),xu(3,7,11,15,e,t+2*a[o++]),Su(3,7,11,15,e,t+2*a[o++]),xu(0,5,10,15,e,t+2*a[o++]),Su(0,5,10,15,e,t+2*a[o++]),xu(1,6,11,12,e,t+2*a[o++]),Su(1,6,11,12,e,t+2*a[o++]),xu(2,7,8,13,e,t+2*a[o++]),Su(2,7,8,13,e,t+2*a[o++]),xu(3,4,9,14,e,t+2*a[o++]),Su(3,4,9,14,e,t+2*a[o++]);this.v0l^=pt[0]^pt[16],this.v0h^=pt[1]^pt[17],this.v1l^=pt[2]^pt[18],this.v1h^=pt[3]^pt[19],this.v2l^=pt[4]^pt[20],this.v2h^=pt[5]^pt[21],this.v3l^=pt[6]^pt[22],this.v3h^=pt[7]^pt[23],this.v4l^=pt[8]^pt[24],this.v4h^=pt[9]^pt[25],this.v5l^=pt[10]^pt[26],this.v5h^=pt[11]^pt[27],this.v6l^=pt[12]^pt[28],this.v6h^=pt[13]^pt[29],this.v7l^=pt[14]^pt[30],this.v7h^=pt[15]^pt[31],ha(pt)}destroy(){this.destroyed=!0,ha(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const o0e=Npe(n=>new s0e(n)),a0e="https://rpc.walletconnect.org/v1";function TH(n){const e=`Ethereum Signed Message:
${n.length}`,t=new TextEncoder().encode(e+n);return"0x"+Buffer.from(Vpe(t)).toString("hex")}async function c0e(n,e,t,r,i,s){switch(t.t){case"eip191":return await l0e(n,e,t.s);case"eip1271":return await u0e(n,e,t.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}async function l0e(n,e,t){return(await Jhe({hash:TH(e),signature:t})).toLowerCase()===n.toLowerCase()}async function u0e(n,e,t,r,i,s){const o=c0(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=t.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),h=(e.startsWith("0x")?e:TH(e)).substring(2),d=a+h+c+u+l,f=await fetch(`${s||a0e}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:h0e(),jsonrpc:"2.0",method:"eth_call",params:[{to:n,data:d},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function h0e(){return Date.now()+Math.floor(Math.random()*1e3)}function d0e(n){const e=atob(n),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);const r=t[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(t.length<i)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");const s=Buffer.from(n,"base64").slice(1,65);return ii.encode(s)}function f0e(n){const e=new Uint8Array(Buffer.from(n,"base64")),t=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),r=new Uint8Array(t.length+e.length);r.set(t),r.set(e,t.length);const i=o0e(r,{dkLen:32});return ii.encode(i)}function SP(n){const e=new Uint8Array(L5(p0e(n)));return ii.encode(e)}function p0e(n){if(n instanceof Uint8Array)return n;if(Array.isArray(n))return new Uint8Array(n);if(typeof n=="object"&&n!=null&&n.data)return new Uint8Array(Object.values(n.data));if(typeof n=="object"&&n)return new Uint8Array(Object.values(n));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function AP(n){const e=Buffer.from(n,"base64"),t=Lde(e).txn;if(!t)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Tde(t),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(r)]),o=t0e(s);return Wde.encode(o).replace(/=+$/,"")}function A6(n){const e=[];let t=BigInt(n);for(;t>=BigInt(128);)e.push(Number(t&BigInt(127)|BigInt(128))),t>>=BigInt(7);return e.push(Number(t)),Buffer.from(e)}function m0e(n){const e=Buffer.from(n.signed.bodyBytes,"base64"),t=Buffer.from(n.signed.authInfoBytes,"base64"),r=Buffer.from(n.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(A6(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(A6(t.length)),i.push(t),i.push(Buffer.from([26])),i.push(A6(r.length)),i.push(r);const s=Buffer.concat(i),o=L5(s);return Buffer.from(o).toString("hex").toUpperCase()}var g0e=Object.defineProperty,y0e=Object.defineProperties,w0e=Object.getOwnPropertyDescriptors,CP=Object.getOwnPropertySymbols,v0e=Object.prototype.hasOwnProperty,b0e=Object.prototype.propertyIsEnumerable,TP=(n,e,t)=>e in n?g0e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_0e=(n,e)=>{for(var t in e||(e={}))v0e.call(e,t)&&TP(n,t,e[t]);if(CP)for(var t of CP(e))b0e.call(e,t)&&TP(n,t,e[t]);return n},E0e=(n,e)=>y0e(n,w0e(e));const x0e="did:pkh:",l9=n=>n?.split(":"),S0e=n=>{const e=n&&l9(n);if(e)return n.includes(x0e)?e[3]:e[1]},jS=n=>{const e=n&&l9(n);if(e)return e[2]+":"+e[3]},wb=n=>{const e=n&&l9(n);if(e)return e.pop()};async function IP(n){const{cacao:e,projectId:t}=n,{s:r,p:i}=e,s=IH(i,i.iss),o=wb(i.iss);return await c0e(o,s,r,jS(i.iss),t)}const IH=(n,e)=>{const t=`${n.domain} wants you to sign in with your Ethereum account:`,r=wb(e);if(!n.aud&&!n.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=n.statement||void 0;const s=`URI: ${n.aud||n.uri}`,o=`Version: ${n.version}`,a=`Chain ID: ${S0e(e)}`,c=`Nonce: ${n.nonce}`,l=`Issued At: ${n.iat}`,u=n.exp?`Expiration Time: ${n.exp}`:void 0,h=n.nbf?`Not Before: ${n.nbf}`:void 0,d=n.requestId?`Request ID: ${n.requestId}`:void 0,f=n.resources?`Resources:${n.resources.map(m=>`
- ${m}`).join("")}`:void 0,p=a3(n.resources);if(p){const m=y2(p);i=O0e(i,m)}return[t,r,"",i,"",s,o,a,c,l,u,h,d,f].filter(m=>m!=null).join(`
`)};function A0e(n){return Buffer.from(JSON.stringify(n)).toString("base64")}function C0e(n){return JSON.parse(Buffer.from(n,"base64").toString("utf-8"))}function uf(n){if(!n)throw new Error("No recap provided, value is undefined");if(!n.att)throw new Error("No `att` property found");const e=Object.keys(n.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const r=n.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function T0e(n,e,t,r={}){return t?.sort((i,s)=>i.localeCompare(s)),{att:{[n]:I0e(e,t,r)}}}function I0e(n,e,t={}){e=e?.sort((i,s)=>i.localeCompare(s));const r=e.map(i=>({[`${n}/${i}`]:[t]}));return Object.assign({},...r)}function MH(n){return uf(n),`urn:recap:${A0e(n).replace(/=/g,"")}`}function y2(n){const e=C0e(n.replace("urn:recap:",""));return uf(e),e}function M0e(n,e,t){const r=T0e(n,e,t);return MH(r)}function R0e(n){return n&&n.includes("urn:recap:")}function P0e(n,e){const t=y2(n),r=y2(e),i=N0e(t,r);return MH(i)}function N0e(n,e){uf(n),uf(e);const t=Object.keys(n.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return t.forEach(i=>{var s,o;Object.keys(((s=n.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[i]=E0e(_0e({},r.att[i]),{[a]:((c=n.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),r}function O0e(n="",e){uf(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(n.includes(t))return n;const r=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,d)=>h.action.localeCompare(d.action));const l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});const u=Object.keys(l).map(h=>(i++,`(${i}) '${h}': '${l[h].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const s=r.join(" "),o=`${t}${s}`;return`${n?n+" ":""}${o}`}function MP(n){var e;const t=y2(n);uf(t);const r=(e=t.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function RP(n){const e=y2(n);uf(e);const t=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&t.push(i[0].chains)})}),[...new Set(t.flat())]}function a3(n){if(!n)return;const e=n?.[n.length-1];return R0e(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function RH(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function GS(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function C6(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Xs(n,...e){if(!RH(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function PP(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function k0e(n,e){Xs(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function dh(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function M0(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function D0e(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}const L0e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function U0e(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function KS(n){if(typeof n=="string")n=U0e(n);else if(RH(n))n=YS(n);else throw new Error("Uint8Array expected, got "+typeof n);return n}function B0e(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function F0e(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}const $0e=(n,e)=>{function t(r,...i){if(Xs(r),!L0e)throw new Error("Non little-endian hardware is not yet supported");if(n.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");n.varSizeNonce?Xs(l):Xs(l,n.nonceLength)}const s=n.tagLength;s&&i[1]!==void 0&&Xs(i[1]);const o=e(r,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Xs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Xs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Xs(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(t,n),t};function NP(n,e,t=!0){if(e===void 0)return new Uint8Array(n);if(e.length!==n)throw new Error("invalid output length, expected "+n+", got: "+e.length);if(t&&!H0e(e))throw new Error("invalid output, must be aligned");return e}function OP(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s);n.setUint32(e+4,o,r),n.setUint32(e+0,a,r)}function z0e(n,e,t){GS(t);const r=new Uint8Array(16),i=D0e(r);return OP(i,0,BigInt(e),t),OP(i,8,BigInt(n),t),r}function H0e(n){return n.byteOffset%4===0}function YS(n){return Uint8Array.from(n)}const PH=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),V0e=PH("expand 16-byte k"),W0e=PH("expand 32-byte k"),q0e=dh(V0e),j0e=dh(W0e);function In(n,e){return n<<e|n>>>32-e}function XS(n){return n.byteOffset%4===0}const Iw=64,G0e=16,NH=2**32-1,kP=new Uint32Array;function K0e(n,e,t,r,i,s,o,a){const c=i.length,l=new Uint8Array(Iw),u=dh(l),h=XS(i)&&XS(s),d=h?dh(i):kP,f=h?dh(s):kP;for(let p=0;p<c;o++){if(n(e,t,r,u,o,a),o>=NH)throw new Error("arx: counter overflow");const m=Math.min(Iw,c-p);if(h&&m===Iw){const g=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<G0e;y++)b=g+y,f[b]=d[b]^u[y];p+=Iw;continue}for(let g=0,y;g<m;g++)y=p+g,s[y]=i[y]^l[g];p+=m}}function Y0e(n,e){const{allowShortKeys:t,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=B0e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return C6(i),C6(o),GS(s),GS(t),(a,c,l,u,h=0)=>{Xs(a),Xs(c),Xs(l);const d=l.length;if(u===void 0&&(u=new Uint8Array(d)),Xs(u),C6(h),h<0||h>=NH)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const f=[];let p=a.length,m,g;if(p===32)f.push(m=YS(a)),g=j0e;else if(p===16&&t)m=new Uint8Array(32),m.set(a),m.set(a,16),g=q0e,f.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);XS(c)||f.push(c=YS(c));const y=dh(m);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,y,dh(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-i;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const E=new Uint8Array(12);E.set(c,s?0:12-c.length),c=E,f.push(c)}const w=dh(c);return K0e(n,g,y,w,l,u,h,o),M0(...f),u}}const Si=(n,e)=>n[e++]&255|(n[e++]&255)<<8;class X0e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=KS(e),Xs(e,32);const t=Si(e,0),r=Si(e,2),i=Si(e,4),s=Si(e,6),o=Si(e,8),a=Si(e,10),c=Si(e,12),l=Si(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Si(e,16+2*u)}process(e,t,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],f=o[6],p=o[7],m=o[8],g=o[9],y=Si(e,t+0),b=Si(e,t+2),w=Si(e,t+4),E=Si(e,t+6),x=Si(e,t+8),C=Si(e,t+10),R=Si(e,t+12),k=Si(e,t+14);let _=s[0]+(y&8191),A=s[1]+((y>>>13|b<<3)&8191),M=s[2]+((b>>>10|w<<6)&8191),D=s[3]+((w>>>7|E<<9)&8191),P=s[4]+((E>>>4|x<<12)&8191),v=s[5]+(x>>>1&8191),S=s[6]+((x>>>14|C<<2)&8191),T=s[7]+((C>>>11|R<<5)&8191),L=s[8]+((R>>>8|k<<8)&8191),U=s[9]+(k>>>5|i),V=0,W=V+_*a+A*(5*g)+M*(5*m)+D*(5*p)+P*(5*f);V=W>>>13,W&=8191,W+=v*(5*d)+S*(5*h)+T*(5*u)+L*(5*l)+U*(5*c),V+=W>>>13,W&=8191;let F=V+_*c+A*a+M*(5*g)+D*(5*m)+P*(5*p);V=F>>>13,F&=8191,F+=v*(5*f)+S*(5*d)+T*(5*h)+L*(5*u)+U*(5*l),V+=F>>>13,F&=8191;let I=V+_*l+A*c+M*a+D*(5*g)+P*(5*m);V=I>>>13,I&=8191,I+=v*(5*p)+S*(5*f)+T*(5*d)+L*(5*h)+U*(5*u),V+=I>>>13,I&=8191;let N=V+_*u+A*l+M*c+D*a+P*(5*g);V=N>>>13,N&=8191,N+=v*(5*m)+S*(5*p)+T*(5*f)+L*(5*d)+U*(5*h),V+=N>>>13,N&=8191;let $=V+_*h+A*u+M*l+D*c+P*a;V=$>>>13,$&=8191,$+=v*(5*g)+S*(5*m)+T*(5*p)+L*(5*f)+U*(5*d),V+=$>>>13,$&=8191;let j=V+_*d+A*h+M*u+D*l+P*c;V=j>>>13,j&=8191,j+=v*a+S*(5*g)+T*(5*m)+L*(5*p)+U*(5*f),V+=j>>>13,j&=8191;let te=V+_*f+A*d+M*h+D*u+P*l;V=te>>>13,te&=8191,te+=v*c+S*a+T*(5*g)+L*(5*m)+U*(5*p),V+=te>>>13,te&=8191;let ce=V+_*p+A*f+M*d+D*h+P*u;V=ce>>>13,ce&=8191,ce+=v*l+S*c+T*a+L*(5*g)+U*(5*m),V+=ce>>>13,ce&=8191;let ve=V+_*m+A*p+M*f+D*d+P*h;V=ve>>>13,ve&=8191,ve+=v*u+S*l+T*c+L*a+U*(5*g),V+=ve>>>13,ve&=8191;let Te=V+_*g+A*m+M*p+D*f+P*d;V=Te>>>13,Te&=8191,Te+=v*h+S*u+T*l+L*c+U*a,V+=Te>>>13,Te&=8191,V=(V<<2)+V|0,V=V+W|0,W=V&8191,V=V>>>13,F+=V,s[0]=W,s[1]=F,s[2]=I,s[3]=N,s[4]=$,s[5]=j,s[6]=te,s[7]=ce,s[8]=ve,s[9]=Te}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+t[a]|0)+(o>>>16)|0,e[a]=o&65535;M0(r)}update(e){PP(this),e=KS(e),Xs(e);const{buffer:t,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}t.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){M0(this.h,this.r,this.buffer,this.pad)}digestInto(e){PP(this),k0e(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}function Z0e(n){const e=(r,i)=>n(i).update(KS(r)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}const J0e=Z0e(n=>new X0e(n));function Q0e(n,e,t,r,i,s=20){let o=n[0],a=n[1],c=n[2],l=n[3],u=e[0],h=e[1],d=e[2],f=e[3],p=e[4],m=e[5],g=e[6],y=e[7],b=i,w=t[0],E=t[1],x=t[2],C=o,R=a,k=c,_=l,A=u,M=h,D=d,P=f,v=p,S=m,T=g,L=y,U=b,V=w,W=E,F=x;for(let N=0;N<s;N+=2)C=C+A|0,U=In(U^C,16),v=v+U|0,A=In(A^v,12),C=C+A|0,U=In(U^C,8),v=v+U|0,A=In(A^v,7),R=R+M|0,V=In(V^R,16),S=S+V|0,M=In(M^S,12),R=R+M|0,V=In(V^R,8),S=S+V|0,M=In(M^S,7),k=k+D|0,W=In(W^k,16),T=T+W|0,D=In(D^T,12),k=k+D|0,W=In(W^k,8),T=T+W|0,D=In(D^T,7),_=_+P|0,F=In(F^_,16),L=L+F|0,P=In(P^L,12),_=_+P|0,F=In(F^_,8),L=L+F|0,P=In(P^L,7),C=C+M|0,F=In(F^C,16),T=T+F|0,M=In(M^T,12),C=C+M|0,F=In(F^C,8),T=T+F|0,M=In(M^T,7),R=R+D|0,U=In(U^R,16),L=L+U|0,D=In(D^L,12),R=R+D|0,U=In(U^R,8),L=L+U|0,D=In(D^L,7),k=k+P|0,V=In(V^k,16),v=v+V|0,P=In(P^v,12),k=k+P|0,V=In(V^k,8),v=v+V|0,P=In(P^v,7),_=_+A|0,W=In(W^_,16),S=S+W|0,A=In(A^S,12),_=_+A|0,W=In(W^_,8),S=S+W|0,A=In(A^S,7);let I=0;r[I++]=o+C|0,r[I++]=a+R|0,r[I++]=c+k|0,r[I++]=l+_|0,r[I++]=u+A|0,r[I++]=h+M|0,r[I++]=d+D|0,r[I++]=f+P|0,r[I++]=p+v|0,r[I++]=m+S|0,r[I++]=g+T|0,r[I++]=y+L|0,r[I++]=b+U|0,r[I++]=w+V|0,r[I++]=E+W|0,r[I++]=x+F|0}const e1e=Y0e(Q0e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t1e=new Uint8Array(16),DP=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(t1e.subarray(t))},n1e=new Uint8Array(32);function LP(n,e,t,r,i){const s=n(e,t,n1e),o=J0e.create(s);i&&DP(o,i),DP(o,r);const a=z0e(r.length,i?i.length:0,!0);o.update(a);const c=o.digest();return M0(s,a),c}const r1e=n=>(e,t,r)=>({encrypt(i,s){const o=i.length;s=NP(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);n(e,t,a,a,1);const c=LP(n,e,t,a,r);return s.set(c,o),M0(c),s},decrypt(i,s){s=NP(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=LP(n,e,t,o,r);if(!F0e(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),n(e,t,s,s,1),M0(c),s}}),OH=$0e({blockSize:64,nonceLength:12,tagLength:16},r1e(e1e));let kH=class extends D5{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,s9(e);const r=Va(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),ha(s)}update(e){return Th(this),this.iHash.update(e),this}digestInto(e){Th(this),ua(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const U5=(n,e,t)=>new kH(n,e).update(t).digest();U5.create=(n,e)=>new kH(n,e);function i1e(n,e,t){return s9(n),t===void 0&&(t=new Uint8Array(n.outputLen)),U5(n,Va(t),Va(e))}const T6=Uint8Array.from([0]),UP=Uint8Array.of();function s1e(n,e,t,r=32){s9(n),Xl(r);const i=n.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/i);t===void 0&&(t=UP);const o=new Uint8Array(s*i),a=U5.create(n,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<s;u++)T6[0]=u+1,c.update(u===0?UP:l).update(t).update(T6).digestInto(l),o.set(l,i*u),a._cloneInto(c);return a.destroy(),c.destroy(),ha(l,T6),o.slice(0,r)}const o1e=(n,e,t,r,i)=>s1e(n,i1e(n,e,t),r,i),B5=L5,u9=BigInt(0),ZS=BigInt(1);function vb(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}function Mw(n){const e=n.toString(16);return e.length&1?"0"+e:e}function DH(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?u9:BigInt("0x"+n)}function F5(n){return DH(g2(n))}function bb(n){return ua(n),DH(g2(Uint8Array.from(n).reverse()))}function h9(n,e){return a9(n.toString(16).padStart(e*2,"0"))}function d9(n,e){return h9(n,e).reverse()}function Ys(n,e,t){let r;if(typeof e=="string")try{r=a9(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(i9(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}const I6=n=>typeof n=="bigint"&&u9<=n;function a1e(n,e,t){return I6(n)&&I6(e)&&I6(t)&&e<=n&&n<t}function JS(n,e,t,r){if(!a1e(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function c1e(n){let e;for(e=0;n>u9;n>>=ZS,e+=1);return e}const $5=n=>(ZS<<BigInt(n))-ZS;function l1e(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=d=>new Uint8Array(d),i=d=>Uint8Array.of(d);let s=r(n),o=r(n),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...d)=>t(o,s,...d),u=(d=r(0))=>{o=l(i(0),d),s=l(),d.length!==0&&(o=l(i(1),d),s=l())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){s=l();const p=s.slice();f.push(p),d+=s.length}return Od(...f)};return(d,f)=>{c(),u(d);let p;for(;!(p=f(h()));)u();return c(),p}}function z5(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,s,o){const a=n[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(t).forEach(([i,s])=>r(i,s,!0))}function BP(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const eo=BigInt(0),Cs=BigInt(1),kd=BigInt(2),u1e=BigInt(3),LH=BigInt(4),UH=BigInt(5),BH=BigInt(8);function Yo(n,e){const t=n%e;return t>=eo?t:e+t}function Ta(n,e,t){let r=n;for(;e-- >eo;)r*=r,r%=t;return r}function FP(n,e){if(n===eo)throw new Error("invert: expected non-zero number");if(e<=eo)throw new Error("invert: expected positive modulus, got "+e);let t=Yo(n,e),r=e,i=eo,s=Cs;for(;t!==eo;){const o=r/t,a=r%t,c=i-s*o;r=t,t=a,i=s,s=c}if(r!==Cs)throw new Error("invert: does not exist");return Yo(i,e)}function FH(n,e){const t=(n.ORDER+Cs)/LH,r=n.pow(e,t);if(!n.eql(n.sqr(r),e))throw new Error("Cannot find square root");return r}function h1e(n,e){const t=(n.ORDER-UH)/BH,r=n.mul(e,kd),i=n.pow(r,t),s=n.mul(e,i),o=n.mul(n.mul(s,kd),i),a=n.mul(s,n.sub(o,n.ONE));if(!n.eql(n.sqr(a),e))throw new Error("Cannot find square root");return a}function d1e(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let e=n-Cs,t=0;for(;e%kd===eo;)e/=kd,t++;let r=kd;const i=l1(n);for(;$P(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return FH;let s=i.pow(r,e);const o=(e+Cs)/kd;return function(a,c){if(a.is0(c))return c;if($P(a,c)!==1)throw new Error("Cannot find square root");let l=t,u=a.mul(a.ONE,s),h=a.pow(c,e),d=a.pow(c,o);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let f=1,p=a.sqr(h);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const m=Cs<<BigInt(l-f-1),g=a.pow(u,m);l=f,u=a.sqr(g),h=a.mul(h,u),d=a.mul(d,g)}return d}}function f1e(n){return n%LH===u1e?FH:n%BH===UH?h1e:d1e(n)}const p1e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m1e(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=p1e.reduce((r,i)=>(r[i]="function",r),e);return z5(n,t),n}function g1e(n,e,t){if(t<eo)throw new Error("invalid exponent, negatives unsupported");if(t===eo)return n.ONE;if(t===Cs)return e;let r=n.ONE,i=e;for(;t>eo;)t&Cs&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Cs;return r}function $H(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((o,a,c)=>n.is0(a)?o:(r[c]=o,n.mul(o,a)),n.ONE),s=n.inv(i);return e.reduceRight((o,a,c)=>n.is0(a)?o:(r[c]=n.mul(o,r[c]),n.mul(o,a)),s),r}function $P(n,e){const t=(n.ORDER-Cs)/kd,r=n.pow(e,t),i=n.eql(r,n.ONE),s=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function y1e(n,e){e!==void 0&&Xl(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function l1(n,e,t=!1,r={}){if(n<=eo)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,s;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(i=u.BITS),u.sqrt&&(s=u.sqrt),typeof u.isLE=="boolean"&&(t=u.isLE)}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:o,nByteLength:a}=y1e(n,i);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:n,isLE:t,BITS:o,BYTES:a,MASK:$5(o),ZERO:eo,ONE:Cs,create:u=>Yo(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return eo<=u&&u<n},is0:u=>u===eo,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Cs)===Cs,neg:u=>Yo(-u,n),eql:(u,h)=>u===h,sqr:u=>Yo(u*u,n),add:(u,h)=>Yo(u+h,n),sub:(u,h)=>Yo(u-h,n),mul:(u,h)=>Yo(u*h,n),pow:(u,h)=>g1e(l,u,h),div:(u,h)=>Yo(u*FP(h,n),n),sqrN:u=>u*u,addN:(u,h)=>u+h,subN:(u,h)=>u-h,mulN:(u,h)=>u*h,inv:u=>FP(u,n),sqrt:s||(u=>(c||(c=f1e(n)),c(l,u))),toBytes:u=>t?d9(u,a):h9(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return t?bb(u):F5(u)},invertBatch:u=>$H(l,u),cmov:(u,h,d)=>d?h:u});return Object.freeze(l)}function zH(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function HH(n){const e=zH(n);return e+Math.ceil(e/2)}function w1e(n,e,t=!1){const r=n.length,i=zH(e),s=HH(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?bb(n):F5(n),a=Yo(o,e-Cs)+Cs;return t?d9(a,i):h9(a,i)}const R0=BigInt(0),Dd=BigInt(1);function ig(n,e){const t=e.negate();return n?t:e}function v1e(n,e,t){const r=s=>s.pz,i=$H(n.Fp,t.map(r));return t.map((s,o)=>s.toAffine(i[o])).map(n.fromAffine)}function VH(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function M6(n,e){VH(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,s=$5(n),o=BigInt(n);return{windows:t,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function zP(n,e,t){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=t;let a=Number(n&i),c=n>>o;a>r&&(a-=s,c+=Dd);const l=e*r,u=l+Math.abs(a)-1,h=a===0,d=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:h,isNeg:d,isNegF:f,offsetF:l}}function b1e(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function _1e(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const R6=new WeakMap,WH=new WeakMap;function P6(n){return WH.get(n)||1}function HP(n){if(n!==R0)throw new Error("invalid wNAF")}function E1e(n,e){return{constTimeNegate:ig,hasPrecomputes(t){return P6(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>R0;)r&Dd&&(i=i.add(s)),s=s.double(),r>>=Dd;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=M6(r,e),o=[];let a=t,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,r,i){let s=n.ZERO,o=n.BASE;const a=M6(t,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:h,isNeg:d,isNegF:f,offsetF:p}=zP(i,c,a);i=l,h?o=o.add(ig(f,r[p])):s=s.add(ig(d,r[u]))}return HP(i),{p:s,f:o}},wNAFUnsafe(t,r,i,s=n.ZERO){const o=M6(t,e);for(let a=0;a<o.windows&&i!==R0;a++){const{nextN:c,offset:l,isZero:u,isNeg:h}=zP(i,a,o);if(i=c,!u){const d=r[l];s=s.add(h?d.negate():d)}}return HP(i),s},getPrecomputes(t,r,i){let s=R6.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&(typeof i=="function"&&(s=i(s)),R6.set(r,s))),s},wNAFCached(t,r,i){const s=P6(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=P6(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){VH(r,e),WH.set(t,r),R6.delete(t)}}}function x1e(n,e,t,r){let i=e,s=n.ZERO,o=n.ZERO;for(;t>R0||r>R0;)t&Dd&&(s=s.add(i)),r&Dd&&(o=o.add(i)),i=i.double(),t>>=Dd,r>>=Dd;return{p1:s,p2:o}}function S1e(n,e,t,r){b1e(t,n),_1e(r,e);const i=t.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,a=c1e(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=$5(c),u=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let d=o;for(let f=h;f>=0;f-=c){u.fill(o);for(let m=0;m<s;m++){const g=r[m],y=Number(g>>BigInt(f)&l);u[y]=u[y].add(t[m])}let p=o;for(let m=u.length-1,g=o;m>0;m--)g=g.add(u[m]),p=p.add(g);if(d=d.add(p),f!==0)for(let m=0;m<c;m++)d=d.double()}return d}function VP(n,e){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return m1e(e),e}else return l1(n)}function A1e(n,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>R0))throw new Error(`CURVE.${o} must be positive bigint`)}const r=VP(e.p,t.Fp),i=VP(e.n,t.Fn),s=["Gx","Gy","a","b"];for(const o of s)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const W1=BigInt(0),Qf=BigInt(1),Rw=BigInt(2);function C1e(n){return z5(n,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...n})}function T1e(n){const e=C1e(n),{P:t,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||c1,l=a?255:448,u=a?32:56,h=BigInt(a?9:5),d=BigInt(a?121665:39081),f=a?Rw**BigInt(254):Rw**BigInt(447),p=a?BigInt(8)*Rw**BigInt(251)-Qf:BigInt(4)*Rw**BigInt(445)-Qf,m=f+p+Qf,g=_=>Yo(_,t),y=b(h);function b(_){return d9(g(_),u)}function w(_){const A=Ys("u coordinate",_,u);return a&&(A[31]&=127),g(bb(A))}function E(_){return bb(i(Ys("scalar",_,u)))}function x(_,A){const M=k(w(A),E(_));if(M===W1)throw new Error("invalid private or public key received");return b(M)}function C(_){return x(_,y)}function R(_,A,M){const D=g(_*(A-M));return A=g(A-D),M=g(M+D),{x_2:A,x_3:M}}function k(_,A){JS("u",_,W1,t),JS("scalar",A,f,m);const M=A,D=_;let P=Qf,v=W1,S=_,T=Qf,L=W1;for(let V=BigInt(l-1);V>=W1;V--){const W=M>>V&Qf;L^=W,{x_2:P,x_3:S}=R(L,P,S),{x_2:v,x_3:T}=R(L,v,T),L=W;const F=P+v,I=g(F*F),N=P-v,$=g(N*N),j=I-$,te=S+T,ce=S-T,ve=g(ce*F),Te=g(te*N),$e=ve+Te,pe=ve-Te;S=g($e*$e),T=g(D*g(pe*pe)),P=g(I*$),v=g(j*(I+g(d*j)))}({x_2:P,x_3:S}=R(L,P,S)),{x_2:v,x_3:T}=R(L,v,T);const U=s(v);return g(P*U)}return{scalarMult:x,scalarMultBase:C,getSharedSecret:(_,A)=>x(_,A),getPublicKey:_=>C(_),utils:{randomPrivateKey:()=>c(u)},GuBytes:y.slice()}}BigInt(0);const I1e=BigInt(1),WP=BigInt(2),M1e=BigInt(3),R1e=BigInt(5);BigInt(8);const qH={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function P1e(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=qH.p,o=n*n%s*n%s,a=Ta(o,WP,s)*o%s,c=Ta(a,I1e,s)*n%s,l=Ta(c,R1e,s)*c%s,u=Ta(l,e,s)*l%s,h=Ta(u,t,s)*u%s,d=Ta(h,r,s)*h%s,f=Ta(d,i,s)*d%s,p=Ta(f,i,s)*d%s,m=Ta(p,e,s)*l%s;return{pow_p_5_8:Ta(m,WP,s)*n%s,b2:o}}function N1e(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const QS=(()=>{const n=qH.p;return T1e({P:n,type:"x25519",powPminus2:e=>{const{pow_p_5_8:t,b2:r}=P1e(e);return Yo(Ta(t,M1e,n)*r,n)},adjustScalarBytes:N1e})})();function qP(n){n.lowS!==void 0&&vb("lowS",n.lowS),n.prehash!==void 0&&vb("prehash",n.prehash)}class O1e extends Error{constructor(e=""){super(e)}}const Tl={Err:O1e,_tlv:{encode:(n,e)=>{const{Err:t}=Tl;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=Mw(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?Mw(i.length/2|128):"";return Mw(n)+s+i+e},decode(n,e){const{Err:t}=Tl;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new t("tlv.decode: length bytes not complete");if(l[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=Tl;if(n<sg)throw new e("integer: negative integers are not allowed");let t=Mw(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=Tl;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return F5(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=Tl,i=Ys("signature",n),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(l)}},hexFromSig(n){const{_tlv:e,_int:t}=Tl,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},sg=BigInt(0),og=BigInt(1),k1e=BigInt(2),Pw=BigInt(3),D1e=BigInt(4);function L1e(n,e,t){function r(i){const s=n.sqr(i),o=n.mul(s,i);return n.add(n.add(o,n.mul(i,e)),t)}return r}function jH(n,e,t){const{BYTES:r}=n;function i(s){let o;if(typeof s=="bigint")o=s;else{let a=Ys("private key",s);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=n.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof s}`)}}if(t&&(o=n.create(o)),!n.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function U1e(n,e={}){const{Fp:t,Fn:r}=A1e("weierstrass",n,e),{h:i,n:s}=n;z5(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(n.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(k,_,A){const{x:M,y:D}=_.toAffine(),P=t.toBytes(M);if(vb("isCompressed",A),A){a();const v=!t.isOdd(D);return Od(GH(v),P)}else return Od(Uint8Array.of(4),P,t.toBytes(D))}function l(k){ua(k);const _=t.BYTES,A=_+1,M=2*_+1,D=k.length,P=k[0],v=k.subarray(1);if(D===A&&(P===2||P===3)){const S=t.fromBytes(v);if(!t.isValid(S))throw new Error("bad point: is not on curve, wrong x");const T=d(S);let L;try{L=t.sqrt(T)}catch(V){const W=V instanceof Error?": "+V.message:"";throw new Error("bad point: is not on curve, sqrt error"+W)}a();const U=t.isOdd(L);return(P&1)===1!==U&&(L=t.neg(L)),{x:S,y:L}}else if(D===M&&P===4){const S=t.fromBytes(v.subarray(_*0,_*1)),T=t.fromBytes(v.subarray(_*1,_*2));if(!f(S,T))throw new Error("bad point: is not on curve");return{x:S,y:T}}else throw new Error(`bad point: got length ${D}, expected compressed=${A} or uncompressed=${M}`)}const u=e.toBytes||c,h=e.fromBytes||l,d=L1e(t,n.a,n.b);function f(k,_){const A=t.sqr(_),M=d(k);return t.eql(A,M)}if(!f(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const p=t.mul(t.pow(n.a,Pw),D1e),m=t.mul(t.sqr(n.b),BigInt(27));if(t.is0(t.add(p,m)))throw new Error("bad curve params: a or b");function g(k,_,A=!1){if(!t.isValid(_)||A&&t.is0(_))throw new Error(`bad point coordinate ${k}`);return _}function y(k){if(!(k instanceof x))throw new Error("ProjectivePoint expected")}const b=BP((k,_)=>{const{px:A,py:M,pz:D}=k;if(t.eql(D,t.ONE))return{x:A,y:M};const P=k.is0();_==null&&(_=P?t.ONE:t.inv(D));const v=t.mul(A,_),S=t.mul(M,_),T=t.mul(D,_);if(P)return{x:t.ZERO,y:t.ZERO};if(!t.eql(T,t.ONE))throw new Error("invZ was invalid");return{x:v,y:S}}),w=BP(k=>{if(k.is0()){if(e.allowInfinityPoint&&!t.is0(k.py))return;throw new Error("bad point: ZERO")}const{x:_,y:A}=k.toAffine();if(!t.isValid(_)||!t.isValid(A))throw new Error("bad point: x or y not field elements");if(!f(_,A))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function E(k,_,A,M,D){return A=new x(t.mul(A.px,k),A.py,A.pz),_=ig(M,_),A=ig(D,A),_.add(A)}class x{constructor(_,A,M){this.px=g("x",_),this.py=g("y",A,!0),this.pz=g("z",M),Object.freeze(this)}static fromAffine(_){const{x:A,y:M}=_||{};if(!_||!t.isValid(A)||!t.isValid(M))throw new Error("invalid affine point");if(_ instanceof x)throw new Error("projective point not allowed");return t.is0(A)&&t.is0(M)?x.ZERO:new x(A,M,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){return v1e(x,"pz",_)}static fromBytes(_){return ua(_),x.fromHex(_)}static fromHex(_){const A=x.fromAffine(h(Ys("pointHex",_)));return A.assertValidity(),A}static fromPrivateKey(_){const A=jH(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return x.BASE.multiply(A(_))}static msm(_,A){return S1e(x,r,_,A)}precompute(_=8,A=!0){return R.setWindowSize(this,_),A||this.multiply(Pw),this}_setWindowSize(_){this.precompute(_)}assertValidity(){w(this)}hasEvenY(){const{y:_}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(_)}equals(_){y(_);const{px:A,py:M,pz:D}=this,{px:P,py:v,pz:S}=_,T=t.eql(t.mul(A,S),t.mul(P,D)),L=t.eql(t.mul(M,S),t.mul(v,D));return T&&L}negate(){return new x(this.px,t.neg(this.py),this.pz)}double(){const{a:_,b:A}=n,M=t.mul(A,Pw),{px:D,py:P,pz:v}=this;let S=t.ZERO,T=t.ZERO,L=t.ZERO,U=t.mul(D,D),V=t.mul(P,P),W=t.mul(v,v),F=t.mul(D,P);return F=t.add(F,F),L=t.mul(D,v),L=t.add(L,L),S=t.mul(_,L),T=t.mul(M,W),T=t.add(S,T),S=t.sub(V,T),T=t.add(V,T),T=t.mul(S,T),S=t.mul(F,S),L=t.mul(M,L),W=t.mul(_,W),F=t.sub(U,W),F=t.mul(_,F),F=t.add(F,L),L=t.add(U,U),U=t.add(L,U),U=t.add(U,W),U=t.mul(U,F),T=t.add(T,U),W=t.mul(P,v),W=t.add(W,W),U=t.mul(W,F),S=t.sub(S,U),L=t.mul(W,V),L=t.add(L,L),L=t.add(L,L),new x(S,T,L)}add(_){y(_);const{px:A,py:M,pz:D}=this,{px:P,py:v,pz:S}=_;let T=t.ZERO,L=t.ZERO,U=t.ZERO;const V=n.a,W=t.mul(n.b,Pw);let F=t.mul(A,P),I=t.mul(M,v),N=t.mul(D,S),$=t.add(A,M),j=t.add(P,v);$=t.mul($,j),j=t.add(F,I),$=t.sub($,j),j=t.add(A,D);let te=t.add(P,S);return j=t.mul(j,te),te=t.add(F,N),j=t.sub(j,te),te=t.add(M,D),T=t.add(v,S),te=t.mul(te,T),T=t.add(I,N),te=t.sub(te,T),U=t.mul(V,j),T=t.mul(W,N),U=t.add(T,U),T=t.sub(I,U),U=t.add(I,U),L=t.mul(T,U),I=t.add(F,F),I=t.add(I,F),N=t.mul(V,N),j=t.mul(W,j),I=t.add(I,N),N=t.sub(F,N),N=t.mul(V,N),j=t.add(j,N),F=t.mul(I,j),L=t.add(L,F),F=t.mul(te,j),T=t.mul($,T),T=t.sub(T,F),F=t.mul($,I),U=t.mul(te,U),U=t.add(U,F),new x(T,L,U)}subtract(_){return this.add(_.negate())}is0(){return this.equals(x.ZERO)}multiply(_){const{endo:A}=e;if(!r.isValidNot0(_))throw new Error("invalid scalar: out of range");let M,D;const P=v=>R.wNAFCached(this,v,x.normalizeZ);if(A){const{k1neg:v,k1:S,k2neg:T,k2:L}=A.splitScalar(_),{p:U,f:V}=P(S),{p:W,f:F}=P(L);D=V.add(F),M=E(A.beta,U,W,v,T)}else{const{p:v,f:S}=P(_);M=v,D=S}return x.normalizeZ([M,D])[0]}multiplyUnsafe(_){const{endo:A}=e,M=this;if(!r.isValid(_))throw new Error("invalid scalar: out of range");if(_===sg||M.is0())return x.ZERO;if(_===og)return M;if(R.hasPrecomputes(this))return this.multiply(_);if(A){const{k1neg:D,k1:P,k2neg:v,k2:S}=A.splitScalar(_),{p1:T,p2:L}=x1e(x,M,P,S);return E(A.beta,T,L,D,v)}else return R.wNAFCachedUnsafe(M,_)}multiplyAndAddUnsafe(_,A,M){const D=this.multiplyUnsafe(A).add(_.multiplyUnsafe(M));return D.is0()?void 0:D}toAffine(_){return b(this,_)}isTorsionFree(){const{isTorsionFree:_}=e;return i===og?!0:_?_(x,this):R.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:_}=e;return i===og?this:_?_(x,this):this.multiplyUnsafe(i)}toBytes(_=!0){return vb("isCompressed",_),this.assertValidity(),u(x,this,_)}toRawBytes(_=!0){return this.toBytes(_)}toHex(_=!0){return g2(this.toBytes(_))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}x.BASE=new x(n.Gx,n.Gy,t.ONE),x.ZERO=new x(t.ZERO,t.ONE,t.ZERO),x.Fp=t,x.Fn=r;const C=r.BITS,R=E1e(x,e.endo?Math.ceil(C/2):C);return x}function GH(n){return Uint8Array.of(n?2:3)}function B1e(n,e,t={}){z5(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||c1,i=e.hmac||((M,...D)=>U5(e.hash,M,Od(...D))),{Fp:s,Fn:o}=n,{ORDER:a,BITS:c}=o;function l(M){const D=a>>og;return M>D}function u(M){return l(M)?o.neg(M):M}function h(M,D){if(!o.isValidNot0(D))throw new Error(`invalid signature ${M}: out of range 1..CURVE.n`)}class d{constructor(D,P,v){h("r",D),h("s",P),this.r=D,this.s=P,v!=null&&(this.recovery=v),Object.freeze(this)}static fromCompact(D){const P=o.BYTES,v=Ys("compactSignature",D,P*2);return new d(o.fromBytes(v.subarray(0,P)),o.fromBytes(v.subarray(P,P*2)))}static fromDER(D){const{r:P,s:v}=Tl.toSig(Ys("DER",D));return new d(P,v)}assertValidity(){}addRecoveryBit(D){return new d(this.r,this.s,D)}recoverPublicKey(D){const P=s.ORDER,{r:v,s:S,recovery:T}=this;if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");if(a*k1e<P&&T>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=T===2||T===3?v+a:v;if(!s.isValid(L))throw new Error("recovery id 2 or 3 invalid");const U=s.toBytes(L),V=n.fromHex(Od(GH((T&1)===0),U)),W=o.inv(L),F=w(Ys("msgHash",D)),I=o.create(-F*W),N=o.create(S*W),$=n.BASE.multiplyUnsafe(I).add(V.multiplyUnsafe(N));if($.is0())throw new Error("point at infinify");return $.assertValidity(),$}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,o.neg(this.s),this.recovery):this}toBytes(D){if(D==="compact")return Od(o.toBytes(this.r),o.toBytes(this.s));if(D==="der")return a9(Tl.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return g2(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return g2(this.toBytes("compact"))}}const f=jH(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),p={isValidPrivateKey(M){try{return f(M),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const M=a;return w1e(r(HH(M)),M)},precompute(M=8,D=n.BASE){return D.precompute(M,!1)}};function m(M,D=!0){return n.fromPrivateKey(M).toBytes(D)}function g(M){if(typeof M=="bigint")return!1;if(M instanceof n)return!0;const D=Ys("key",M).length,P=s.BYTES,v=P+1,S=2*P+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===v))return D===v||D===S}function y(M,D,P=!0){if(g(M)===!0)throw new Error("first arg must be private key");if(g(D)===!1)throw new Error("second arg must be public key");return n.fromHex(D).multiply(f(M)).toBytes(P)}const b=e.bits2int||function(M){if(M.length>8192)throw new Error("input is too large");const D=F5(M),P=M.length*8-c;return P>0?D>>BigInt(P):D},w=e.bits2int_modN||function(M){return o.create(b(M))},E=$5(c);function x(M){return JS("num < 2^"+c,M,sg,E),o.toBytes(M)}function C(M,D,P=R){if(["recovered","canonical"].some($=>$ in P))throw new Error("sign() legacy options not supported");const{hash:v}=e;let{lowS:S,prehash:T,extraEntropy:L}=P;S==null&&(S=!0),M=Ys("msgHash",M),qP(P),T&&(M=Ys("prehashed msgHash",v(M)));const U=w(M),V=f(D),W=[x(V),x(U)];if(L!=null&&L!==!1){const $=L===!0?r(s.BYTES):L;W.push(Ys("extraEntropy",$))}const F=Od(...W),I=U;function N($){const j=b($);if(!o.isValidNot0(j))return;const te=o.inv(j),ce=n.BASE.multiply(j).toAffine(),ve=o.create(ce.x);if(ve===sg)return;const Te=o.create(te*o.create(I+ve*V));if(Te===sg)return;let $e=(ce.x===ve?0:2)|Number(ce.y&og),pe=Te;return S&&l(Te)&&(pe=u(Te),$e^=1),new d(ve,pe,$e)}return{seed:F,k2sig:N}}const R={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function _(M,D,P=R){const{seed:v,k2sig:S}=C(M,D,P);return l1e(e.hash.outputLen,o.BYTES,i)(v,S)}n.BASE.precompute(8);function A(M,D,P,v=k){const S=M;D=Ys("msgHash",D),P=Ys("publicKey",P),qP(v);const{lowS:T,prehash:L,format:U}=v;if("strict"in v)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&!["compact","der","js"].includes(U))throw new Error('format must be "compact", "der" or "js"');const V=typeof S=="string"||i9(S),W=!V&&!U&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!V&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let F,I;try{if(W)if(U===void 0||U==="js")F=new d(S.r,S.s);else throw new Error("invalid format");if(V){try{U!=="compact"&&(F=d.fromDER(S))}catch($e){if(!($e instanceof Tl.Err))throw $e}!F&&U!=="der"&&(F=d.fromCompact(S))}I=n.fromHex(P)}catch{return!1}if(!F||T&&F.hasHighS())return!1;L&&(D=e.hash(D));const{r:N,s:$}=F,j=w(D),te=o.inv($),ce=o.create(j*te),ve=o.create(N*te),Te=n.BASE.multiplyUnsafe(ce).add(I.multiplyUnsafe(ve));return Te.is0()?!1:o.create(Te.x)===N}return Object.freeze({getPublicKey:m,getSharedSecret:y,sign:_,verify:A,utils:p,Point:n,Signature:d})}function F1e(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=l1(e.n,n.nBitLength),i={Fp:t,Fn:r,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:i}}function $1e(n){const{CURVE:e,curveOpts:t}=F1e(n),r={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:r}}function z1e(n,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:n})}function H1e(n){const{CURVE:e,curveOpts:t,ecdsaOpts:r}=$1e(n),i=U1e(e,t),s=B1e(i,r,t);return z1e(n,s)}function eA(n,e){const t=r=>H1e({...n,hash:r});return{...t(e),create:t}}const KH={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},YH={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},XH={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},V1e=l1(KH.p),W1e=l1(YH.p),q1e=l1(XH.p),j1e=eA({...KH,Fp:V1e,lowS:!1},L5);eA({...YH,Fp:W1e,lowS:!1},e0e),eA({...XH,Fp:q1e,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Qpe);const G1e=j1e,ZH="base10",Ts="base16",La="base64pad",Zu="base64url",My="utf8",JH=0,Fl=1,Ry=2,K1e=0,jP=1,ag=12,f9=32;function Y1e(){const n=QS.utils.randomPrivateKey(),e=QS.getPublicKey(n);return{privateKey:so(n,Ts),publicKey:so(e,Ts)}}function tA(){const n=c1(f9);return so(n,Ts)}function X1e(n,e){const t=QS.getSharedSecret(ea(n,Ts),ea(e,Ts)),r=o1e(B5,t,void 0,void 0,f9);return so(r,Ts)}function c3(n){const e=B5(ea(n,Ts));return so(e,Ts)}function Cc(n){const e=B5(ea(n,My));return so(e,Ts)}function QH(n){return ea(`${n}`,ZH)}function hf(n){return Number(so(n,ZH))}function eV(n){return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function tV(n){const e=n.replace(/-/g,"+").replace(/_/g,"/"),t=(4-e.length%4)%4;return e+"=".repeat(t)}function Z1e(n){const e=QH(typeof n.type<"u"?n.type:JH);if(hf(e)===Fl&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?ea(n.senderPublicKey,Ts):void 0,r=typeof n.iv<"u"?ea(n.iv,Ts):c1(ag),i=ea(n.symKey,Ts),s=OH(i,r).encrypt(ea(n.message,My)),o=nV({type:e,sealed:s,iv:r,senderPublicKey:t});return n.encoding===Zu?eV(o):o}function J1e(n){const e=ea(n.symKey,Ts),{sealed:t,iv:r}=w2({encoded:n.encoded,encoding:n.encoding}),i=OH(e,r).decrypt(t);if(i===null)throw new Error("Failed to decrypt");return so(i,My)}function Q1e(n,e){const t=QH(Ry),r=c1(ag),i=ea(n,My),s=nV({type:t,sealed:i,iv:r});return e===Zu?eV(s):s}function eme(n,e){const{sealed:t}=w2({encoded:n,encoding:e});return so(t,My)}function nV(n){if(hf(n.type)===Ry)return so(rg([n.type,n.sealed]),La);if(hf(n.type)===Fl){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return so(rg([n.type,n.senderPublicKey,n.iv,n.sealed]),La)}return so(rg([n.type,n.iv,n.sealed]),La)}function w2(n){const e=(n.encoding||La)===Zu?tV(n.encoded):n.encoded,t=ea(e,La),r=t.slice(K1e,jP),i=jP;if(hf(r)===Fl){const c=i+f9,l=c+ag,u=t.slice(i,c),h=t.slice(c,l),d=t.slice(l);return{type:r,sealed:d,iv:h,senderPublicKey:u}}if(hf(r)===Ry){const c=t.slice(i),l=c1(ag);return{type:r,sealed:c,iv:l}}const s=i+ag,o=t.slice(i,s),a=t.slice(s);return{type:r,sealed:a,iv:o}}function tme(n,e){const t=w2({encoded:n,encoding:e?.encoding});return rV({type:hf(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?so(t.senderPublicKey,Ts):void 0,receiverPublicKey:e?.receiverPublicKey})}function rV(n){const e=n?.type||JH;if(e===Fl){if(typeof n?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof n?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n?.senderPublicKey,receiverPublicKey:n?.receiverPublicKey}}function GP(n){return n.type===Fl&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}function KP(n){return n.type===Ry}function nme(n){const e=Buffer.from(n.x,"base64"),t=Buffer.from(n.y,"base64");return rg([new Uint8Array([4]),e,t])}function rme(n,e){const[t,r,i]=n.split("."),s=Buffer.from(tV(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${t}.${r}`,l=B5(c),u=nme(e);if(!G1e.verify(rg([o,a]),l,u))throw new Error("Invalid signature");return LS(n).payload}const ime="irn";function _b(n){return n?.relay||{protocol:ime}}function Im(n){const e=zfe[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}function sme(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=n[i];t[s]=o}}),t}function YP(n){if(!n.includes("wc:")){const l=pH(n);l!=null&&l.includes("wc:")&&(n=l)}n=n.includes("wc://")?n.replace("wc://",""):n,n=n.includes("wc:")?n.replace("wc:",""):n;const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,r=n.substring(0,e),i=n.substring(e+1,t).split("@"),s=typeof t<"u"?n.substring(t):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:ome(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:sme(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function ome(n){return n.startsWith("//")?n.substring(2):n}function ame(n,e="-"){const t="relay",r={};return Object.keys(n).forEach(i=>{const s=i,o=t+e+s;n[s]&&(r[o]=n[s])}),r}function XP(n){const e=new URLSearchParams,t=ame(n.relay);Object.keys(t).sort().forEach(i=>{e.set(i,t[i])}),e.set("symKey",n.symKey),n.expiryTimestamp&&e.set("expiryTimestamp",n.expiryTimestamp.toString()),n.methods&&e.set("methods",n.methods.join(","));const r=e.toString();return`${n.protocol}:${n.topic}@${n.version}?${r}`}function Nw(n,e,t){return`${n}?wc_ev=${t}&topic=${e}`}var cme=Object.defineProperty,lme=Object.defineProperties,ume=Object.getOwnPropertyDescriptors,ZP=Object.getOwnPropertySymbols,hme=Object.prototype.hasOwnProperty,dme=Object.prototype.propertyIsEnumerable,JP=(n,e,t)=>e in n?cme(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fme=(n,e)=>{for(var t in e||(e={}))hme.call(e,t)&&JP(n,t,e[t]);if(ZP)for(var t of ZP(e))dme.call(e,t)&&JP(n,t,e[t]);return n},pme=(n,e)=>lme(n,ume(e));function u1(n){const e=[];return n.forEach(t=>{const[r,i]=t.split(":");e.push(`${r}:${i}`)}),e}function mme(n){const e=[];return Object.values(n).forEach(t=>{e.push(...u1(t.accounts))}),e}function gme(n,e){const t=[];return Object.values(n).forEach(r=>{u1(r.accounts).includes(e)&&t.push(...r.methods)}),t}function yme(n,e){const t=[];return Object.values(n).forEach(r=>{u1(r.accounts).includes(e)&&t.push(...r.events)}),t}function H5(n){return n.includes(":")}function Wp(n){return H5(n)?n.split(":")[0]:n}function QP(n){var e,t,r;const i={};if(!fh(n))return i;for(const[s,o]of Object.entries(n)){const a=H5(s)?[s]:o.chains,c=o.methods||[],l=o.events||[],u=Wp(s);i[u]=pme(fme({},i[u]),{chains:kc(a,(e=i[u])==null?void 0:e.chains),methods:kc(c,(t=i[u])==null?void 0:t.methods),events:kc(l,(r=i[u])==null?void 0:r.events)})}return i}function wme(n){const e={};return n?.forEach(t=>{var r;const[i,s]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(t),(r=e[i].chains)==null||r.push(`${i}:${s}`)}),e}function eN(n,e){e=e.map(r=>r.replace("did:pkh:",""));const t=wme(e);for(const[r,i]of Object.entries(t))i.methods?i.methods=kc(i.methods,n):i.methods=n,i.events=["chainChanged","accountsChanged"];return t}function vme(n,e){var t,r,i,s,o,a;const c=QP(n),l=QP(e),u={},h=Object.keys(c).concat(Object.keys(l));for(const d of h)u[d]={chains:kc((t=c[d])==null?void 0:t.chains,(r=l[d])==null?void 0:r.chains),methods:kc((i=c[d])==null?void 0:i.methods,(s=l[d])==null?void 0:s.methods),events:kc((o=c[d])==null?void 0:o.events,(a=l[d])==null?void 0:a.events)};return u}const bme={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},_me={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function nt(n,e){const{message:t,code:r}=_me[n];return{message:e?`${t} ${e}`:t,code:r}}function mr(n,e){const{message:t,code:r}=bme[n];return{message:e?`${t} ${e}`:t,code:r}}function $l(n,e){return!!Array.isArray(n)}function fh(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function Oi(n){return typeof n>"u"}function jr(n,e){return e&&Oi(n)?!0:typeof n=="string"&&!!n.trim().length}function p9(n,e){return e&&Oi(n)?!0:typeof n=="number"&&!isNaN(n)}function Eme(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),i=Object.keys(t);let s=!0;return Nd(i,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=n.namespaces[o],u=u1(a),h=t[o];(!Nd(lH(o,h),u)||!Nd(h.methods,c)||!Nd(h.events,l))&&(s=!1)}),s):!1}function Eb(n){return jr(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function xme(n){if(jr(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Eb(t)}}return!1}function Sme(n){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(jr(n,!1)){if(e(n))return!0;const t=pH(n);return e(t)}}catch{}return!1}function Ame(n){var e;return(e=n?.proposer)==null?void 0:e.publicKey}function Cme(n){return n?.topic}function Tme(n,e){let t=null;return jr(n?.publicKey,!1)||(t=nt("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function tN(n){let e=!0;return $l(n)?n.length&&(e=n.every(t=>jr(t,!1))):e=!1,e}function Ime(n,e,t){let r=null;return $l(e)&&e.length?e.forEach(i=>{r||Eb(i)||(r=mr("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Eb(n)||(r=mr("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Mme(n,e,t){let r=null;return Object.entries(n).forEach(([i,s])=>{if(r)return;const o=Ime(i,lH(i,s),`${e} ${t}`);o&&(r=o)}),r}function Rme(n,e){let t=null;return $l(n)?n.forEach(r=>{t||xme(r)||(t=mr("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=mr("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function Pme(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=Rme(r?.accounts,`${e} namespace`);i&&(t=i)}),t}function Nme(n,e){let t=null;return tN(n?.methods)?tN(n?.events)||(t=mr("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=mr("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function iV(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=Nme(r,`${e}, namespace`);i&&(t=i)}),t}function Ome(n,e,t){let r=null;if(n&&fh(n)){const i=iV(n,e);i&&(r=i);const s=Mme(n,e,t);s&&(r=s)}else r=nt("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}function N6(n,e){let t=null;if(n&&fh(n)){const r=iV(n,e);r&&(t=r);const i=Pme(n,e);i&&(t=i)}else t=nt("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function sV(n){return jr(n.protocol,!0)}function kme(n,e){let t=!1;return n?n&&$l(n)&&n.length&&n.forEach(r=>{t=sV(r)}):t=!0,t}function Dme(n){return typeof n=="number"}function Gs(n){return typeof n<"u"&&typeof n!==null}function Lme(n){return!(!n||typeof n!="object"||!n.code||!p9(n.code,!1)||!n.message||!jr(n.message,!1))}function Ume(n){return!(Oi(n)||!jr(n.method,!1))}function Bme(n){return!(Oi(n)||Oi(n.result)&&Oi(n.error)||!p9(n.id,!1)||!jr(n.jsonrpc,!1))}function Fme(n){return!(Oi(n)||!jr(n.name,!1))}function nN(n,e){return!(!Eb(e)||!mme(n).includes(e))}function $me(n,e,t){return jr(t,!1)?gme(n,e).includes(t):!1}function zme(n,e,t){return jr(t,!1)?yme(n,e).includes(t):!1}function rN(n,e,t){let r=null;const i=Hme(n),s=Vme(e),o=Object.keys(i),a=Object.keys(s),c=iN(Object.keys(n)),l=iN(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(r=nt("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Nd(o,a)||(r=nt("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||r)return;const d=u1(e[h].accounts);d.includes(h)||(r=nt("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${d.toString()}`))}),o.forEach(h=>{r||(Nd(i[h].methods,s[h].methods)?Nd(i[h].events,s[h].events)||(r=nt("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${h}`)):r=nt("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${h}`))}),r}function Hme(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:(r=n[t].chains)==null||r.forEach(i=>{e[i]={methods:n[t].methods,events:n[t].events}})}),e}function iN(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Vme(n){const e={};return Object.keys(n).forEach(t=>{t.includes(":")?e[t]=n[t]:u1(n[t].accounts)?.forEach(i=>{e[i]={accounts:n[t].accounts.filter(s=>s.includes(`${i}:`)),methods:n[t].methods,events:n[t].events}})}),e}function Wme(n,e){return p9(n,!1)&&n<=e.max&&n>=e.min}function sN(){const n=Ty();return new Promise(e=>{switch(n){case To.browser:e(qme());break;case To.reactNative:e(jme());break;case To.node:e(Gme());break;default:e(!0)}})}function qme(){return a1()&&navigator?.onLine}async function jme(){return Lh()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function Gme(){return!0}function Kme(n){switch(Ty()){case To.browser:Yme(n);break;case To.reactNative:Xme(n);break}}function Yme(n){!Lh()&&a1()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function Xme(n){Lh()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>n(e?.isConnected))}function Zme(){var n;return a1()&&Yl.getDocument()?((n=Yl.getDocument())==null?void 0:n.visibilityState)==="visible":!0}const O6={};class q1{static get(e){return O6[e]}static set(e,t){O6[e]=t}static delete(e){delete O6[e]}}function Jme(n){const e=ii.decode(n);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Qme({publicKey:n,signature:e,payload:t}){var r;const i=nA(t.method),s=128|parseInt(((r=t.version)==null?void 0:r.toString())||"4"),o=nge(t.address),a=t.era==="00"?new Uint8Array([0]):nA(t.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(t.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${tge(t.tip)}`),h=ige(u),d=new Uint8Array([0,...n,o,...e,...a,...l,...h,...i]),f=rge(d.length+1);return new Uint8Array([...f,s,...d])}function ege(n){const e=nA(n),t=qfe.blake2b(e,void 0,32);return"0x"+Buffer.from(t).toString("hex")}function nA(n){return new Uint8Array(n.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function tge(n){return n.startsWith("0x")?n.slice(2):n}function nge(n){const e=ii.decode(n)[0];return e===42?0:e===60?2:1}function rge(n){if(n<64)return new Uint8Array([n<<2]);if(n<16384){const e=n<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(n<1<<30){const e=n<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function ige(n){if(n<BigInt(1)<<BigInt(6))return new Uint8Array([Number(n<<BigInt(2))]);if(n<BigInt(1)<<BigInt(14)){const e=n<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(n<BigInt(1)<<BigInt(30)){const e=n<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function sge(n){const e=Uint8Array.from(Buffer.from(n.signature,"hex")),t=Jme(n.transaction.address),r=Qme({publicKey:t,signature:e,payload:n.transaction}),i=Buffer.from(r).toString("hex");return ege(i)}const oge="PARSE_ERROR",age="INVALID_REQUEST",cge="METHOD_NOT_FOUND",lge="INVALID_PARAMS",oV="INTERNAL_ERROR",m9="SERVER_ERROR",uge=[-32700,-32600,-32601,-32602,-32603],cg={[oge]:{code:-32700,message:"Parse error"},[age]:{code:-32600,message:"Invalid Request"},[cge]:{code:-32601,message:"Method not found"},[lge]:{code:-32602,message:"Invalid params"},[oV]:{code:-32603,message:"Internal error"},[m9]:{code:-32e3,message:"Server error"}},aV=m9;function hge(n){return uge.includes(n)}function oN(n){return Object.keys(cg).includes(n)?cg[n]:cg[aV]}function dge(n){const e=Object.values(cg).find(t=>t.code===n);return e||cg[aV]}function cV(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var k6={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rA=function(n,e){return rA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},rA(n,e)};function fge(n,e){rA(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var iA=function(){return iA=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},iA.apply(this,arguments)};function pge(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function mge(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function gge(n,e){return function(t,r){e(t,r,n)}}function yge(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function wge(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function vge(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function bge(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function _ge(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function sA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lV(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function Ege(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(lV(arguments[e]));return n}function xge(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function v2(n){return this instanceof v2?(this.v=n,this):new v2(n)}function Sge(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(f){return new Promise(function(p,m){s.push([d,f,p,m])>1||a(d,f)})})}function a(d,f){try{c(r[d](f))}catch(p){h(s[0][3],p)}}function c(d){d.value instanceof v2?Promise.resolve(d.value.v).then(l,u):h(s[0][2],d)}function l(d){a("next",d)}function u(d){a("throw",d)}function h(d,f){d(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Age(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:v2(n[i](o)),done:i==="return"}:s?s(o):o}:s}}function Cge(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof sA=="function"?sA(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Tge(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function Ige(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Mge(n){return n&&n.__esModule?n:{default:n}}function Rge(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function Pge(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const Nge=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return iA},__asyncDelegator:Age,__asyncGenerator:Sge,__asyncValues:Cge,__await:v2,__awaiter:wge,__classPrivateFieldGet:Rge,__classPrivateFieldSet:Pge,__createBinding:bge,__decorate:mge,__exportStar:_ge,__extends:fge,__generator:vge,__importDefault:Mge,__importStar:Ige,__makeTemplateObject:Tge,__metadata:yge,__param:gge,__read:lV,__rest:pge,__spread:Ege,__spreadArrays:xge,__values:sA},Symbol.toStringTag,{value:"Module"})),Oge=my(Nge);var hl={},aN;function kge(){if(aN)return hl;aN=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.isBrowserCryptoAvailable=hl.getSubtleCrypto=hl.getBrowerCrypto=void 0;function n(){return Sc?.crypto||Sc?.msCrypto||{}}hl.getBrowerCrypto=n;function e(){const r=n();return r.subtle||r.webkitSubtle}hl.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return hl.isBrowserCryptoAvailable=t,hl}var dl={},cN;function Dge(){if(cN)return dl;cN=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.isBrowser=dl.isNode=dl.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}dl.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}dl.isNode=e;function t(){return!n()&&!e()}return dl.isBrowser=t,dl}var lN;function Lge(){return lN||(lN=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Oge;e.__exportStar(kge(),n),e.__exportStar(Dge(),n)}(k6)),k6}var Uge=Lge();function vc(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function Ld(n=6){return BigInt(vc(n))}function rh(n,e,t){return{id:t||vc(),jsonrpc:"2.0",method:n,params:e}}function V5(n,e){return{id:n,jsonrpc:"2.0",result:e}}function W5(n,e,t){return{id:n,jsonrpc:"2.0",error:Bge(e)}}function Bge(n,e){return typeof n>"u"?oN(oV):(typeof n=="string"&&(n=Object.assign(Object.assign({},oN(m9)),{message:n})),hge(n.code)&&(n=dge(n.code)),n)}let Fge=class{},$ge=class extends Fge{constructor(){super()}},zge=class extends $ge{constructor(e){super()}};const Hge="^https?:",Vge="^wss?:";function Wge(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function uV(n,e){const t=Wge(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function uN(n){return uV(n,Hge)}function hN(n){return uV(n,Vge)}function qge(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function hV(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function g9(n){return hV(n)&&"method"in n}function q5(n){return hV(n)&&(bc(n)||Go(n))}function bc(n){return"result"in n}function Go(n){return"error"in n}let pa=class extends zge{constructor(e){super(e),this.events=new fa.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(rh(e.method,e.params||[],e.id||Ld().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Go(s)?i(s.error):r(s.result)});try{await this.connection.send(e,t)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),q5(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const jge=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Gge=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",dN=n=>n.split("?")[0],fN=10,Kge=jge();let Yge=class{constructor(e){if(this.url=e,this.events=new fa.EventEmitter,this.registering=!1,!hN(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Kl(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!hN(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const i=Uge.isReactNative()?void 0:{rejectUnauthorized:!qge(e)},s=new Kge(e,[],i);Gge()?s.onerror=o=>{const a=o;r(this.emitError(a.error))}:s.on("error",o=>{r(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),t(s)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?lf(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),s=W5(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return cV(e,dN(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>fN&&this.events.setMaxListeners(fN)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${dN(this.url)}`));return this.events.emit("register_error",t),t}};var Xge={};const dV="wc",fV=2,oA="core",zc=`${dV}@2:${oA}:`,Zge={logger:"error"},Jge={database:":memory:"},Qge="crypto",pN="client_ed25519_seed",e2e=et.ONE_DAY,t2e="keychain",n2e="0.3",r2e="messages",i2e="0.3",mN=et.SIX_HOURS,s2e="publisher",pV="irn",o2e="error",mV="wss://relay.walletconnect.org",a2e="relayer",yi={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},c2e="_subscription",zo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},l2e=.1,aA="2.21.3",hr={link_mode:"link_mode",relay:"relay"},l3={inbound:"inbound",outbound:"outbound"},u2e="0.3",h2e="WALLETCONNECT_CLIENT_ID",gN="WALLETCONNECT_LINK_MODE_APPS",wo={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},d2e="subscription",f2e="0.3",p2e="pairing",m2e="0.3",j1={wc_pairingDelete:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:et.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:et.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:et.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:et.ONE_DAY,prompt:!1,tag:0},res:{ttl:et.ONE_DAY,prompt:!1,tag:0}}},_d={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},va={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},g2e="history",y2e="0.3",w2e="expirer",jo={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},v2e="0.3",b2e="verify-api",_2e="https://verify.walletconnect.com",gV="https://verify.walletconnect.org",lg=gV,E2e=`${lg}/v3`,x2e=[_2e,gV],S2e="echo",A2e="https://echo.walletconnect.com",gc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},_l={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ba={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Kh={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Yh={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},G1={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},C2e=.1,T2e="event-client",I2e=86400,M2e="https://pulse.walletconnect.org/batch";function R2e(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var a=n.length,c=n.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,g=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,m++;for(var w=(b-y)*u+1>>>0,E=new Uint8Array(w);y!==b;){for(var x=p[y],C=0,R=w-1;(x!==0||C<g)&&R!==-1;R--,C++)x+=256*E[R]>>>0,E[R]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");g=C,y++}for(var k=w-g;k!==w&&E[k]===0;)k++;for(var _=c.repeat(m);k<w;++k)_+=n.charAt(E[k]);return _}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var g=0,y=0;p[m]===c;)g++,m++;for(var b=(p.length-m)*l+1>>>0,w=new Uint8Array(b);p[m];){var E=t[p.charCodeAt(m)];if(E===255)return;for(var x=0,C=b-1;(E!==0||x<y)&&C!==-1;C--,x++)E+=a*w[C]>>>0,w[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=x,m++}if(p[m]!==" "){for(var R=b-y;R!==b&&w[R]===0;)R++;for(var k=new Uint8Array(g+(b-R)),_=g;R!==b;)k[_++]=w[R++];return k}}}function f(p){var m=d(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var P2e=R2e,N2e=P2e;const yV=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},O2e=n=>new TextEncoder().encode(n),k2e=n=>new TextDecoder().decode(n);class D2e{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class L2e{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return wV(this,e)}}class U2e{constructor(e){this.decoders=e}or(e){return wV(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const wV=(n,e)=>new U2e({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});let B2e=class{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new D2e(e,t,r),this.decoder=new L2e(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const j5=({name:n,prefix:e,encode:t,decode:r})=>new B2e(n,e,t,r),Py=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=N2e(t,e);return j5({prefix:n,name:e,encode:r,decode:s=>yV(i(s))})},F2e=(n,e,t,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const h=i[n[u]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<t|h,a+=t,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},$2e=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,a=0;for(let c=0;c<n.length;++c)for(a=a<<8|n[c],o+=8;o>t;)o-=t,s+=e[i&a>>o];if(o&&(s+=e[i&a<<t-o]),r)for(;s.length*t&7;)s+="=";return s},Wi=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>j5({prefix:e,name:n,encode(i){return $2e(i,r,t)},decode(i){return F2e(i,r,t,n)}}),z2e=j5({prefix:"\0",name:"identity",encode:n=>k2e(n),decode:n=>O2e(n)});var H2e=Object.freeze({__proto__:null,identity:z2e});const V2e=Wi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var W2e=Object.freeze({__proto__:null,base2:V2e});const q2e=Wi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var j2e=Object.freeze({__proto__:null,base8:q2e});const G2e=Py({prefix:"9",name:"base10",alphabet:"0123456789"});var K2e=Object.freeze({__proto__:null,base10:G2e});const Y2e=Wi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),X2e=Wi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Z2e=Object.freeze({__proto__:null,base16:Y2e,base16upper:X2e});const J2e=Wi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Q2e=Wi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eye=Wi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),tye=Wi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),nye=Wi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rye=Wi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),iye=Wi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),sye=Wi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),oye=Wi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var aye=Object.freeze({__proto__:null,base32:J2e,base32upper:Q2e,base32pad:eye,base32padupper:tye,base32hex:nye,base32hexupper:rye,base32hexpad:iye,base32hexpadupper:sye,base32z:oye});const cye=Py({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lye=Py({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var uye=Object.freeze({__proto__:null,base36:cye,base36upper:lye});const hye=Py({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dye=Py({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var fye=Object.freeze({__proto__:null,base58btc:hye,base58flickr:dye});const pye=Wi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mye=Wi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gye=Wi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yye=Wi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var wye=Object.freeze({__proto__:null,base64:pye,base64pad:mye,base64url:gye,base64urlpad:yye});const vV=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),vye=vV.reduce((n,e,t)=>(n[t]=e,n),[]),bye=vV.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function _ye(n){return n.reduce((e,t)=>(e+=vye[t],e),"")}function Eye(n){const e=[];for(const t of n){const r=bye[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const xye=j5({prefix:"🚀",name:"base256emoji",encode:_ye,decode:Eye});var Sye=Object.freeze({__proto__:null,base256emoji:xye}),Aye=bV,yN=128,Cye=-128,Tye=Math.pow(2,31);function bV(n,e,t){e=e||[],t=t||0;for(var r=t;n>=Tye;)e[t++]=n&255|yN,n/=128;for(;n&Cye;)e[t++]=n&255|yN,n>>>=7;return e[t]=n|0,bV.bytes=t-r+1,e}var Iye=cA,Mye=128,wN=127;function cA(n,r){var t=0,r=r||0,i=0,s=r,o,a=n.length;do{if(s>=a)throw cA.bytes=0,new RangeError("Could not decode varint");o=n[s++],t+=i<28?(o&wN)<<i:(o&wN)*Math.pow(2,i),i+=7}while(o>=Mye);return cA.bytes=s-r,t}var Rye=Math.pow(2,7),Pye=Math.pow(2,14),Nye=Math.pow(2,21),Oye=Math.pow(2,28),kye=Math.pow(2,35),Dye=Math.pow(2,42),Lye=Math.pow(2,49),Uye=Math.pow(2,56),Bye=Math.pow(2,63),Fye=function(n){return n<Rye?1:n<Pye?2:n<Nye?3:n<Oye?4:n<kye?5:n<Dye?6:n<Lye?7:n<Uye?8:n<Bye?9:10},$ye={encode:Aye,decode:Iye,encodingLength:Fye},_V=$ye;const vN=(n,e,t=0)=>(_V.encode(n,e,t),e),bN=n=>_V.encodingLength(n),lA=(n,e)=>{const t=e.byteLength,r=bN(n),i=r+bN(t),s=new Uint8Array(i+t);return vN(n,s,0),vN(t,s,r),s.set(e,i),new zye(n,t,e,s)};let zye=class{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}};const EV=({name:n,code:e,encode:t})=>new Hye(n,e,t);let Hye=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?lA(this.code,t):t.then(r=>lA(this.code,r))}else throw Error("Unknown type, must be binary type")}};const xV=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),Vye=EV({name:"sha2-256",code:18,encode:xV("SHA-256")}),Wye=EV({name:"sha2-512",code:19,encode:xV("SHA-512")});var qye=Object.freeze({__proto__:null,sha256:Vye,sha512:Wye});const SV=0,jye="identity",AV=yV,Gye=n=>lA(SV,AV(n)),Kye={code:SV,name:jye,encode:AV,digest:Gye};var Yye=Object.freeze({__proto__:null,identity:Kye});new TextEncoder,new TextDecoder;const _N={...H2e,...W2e,...j2e,...K2e,...Z2e,...aye,...uye,...fye,...wye,...Sye};({...qye,...Yye});function CV(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Xye(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?CV(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function TV(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const EN=TV("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),D6=TV("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=Xye(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),Zye={utf8:EN,"utf-8":EN,hex:_N.base16,latin1:D6,ascii:D6,binary:D6,..._N};function Jye(n,e="utf8"){const t=Zye[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?CV(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}var Qye=Object.defineProperty,ewe=(n,e,t)=>e in n?Qye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hc=(n,e,t)=>ewe(n,typeof e!="symbol"?e+"":e,t);class twe{constructor(e,t){this.core=e,this.logger=t,hc(this,"keychain",new Map),hc(this,"name",t2e),hc(this,"version",n2e),hc(this,"initialized",!1),hc(this,"storagePrefix",zc),hc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),hc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),hc(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),hc(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=nt("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),hc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=ds(t,this.name)}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,WS(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?qS(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nwe=Object.defineProperty,rwe=(n,e,t)=>e in n?nwe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ai=(n,e,t)=>rwe(n,typeof e!="symbol"?e+"":e,t);class iwe{constructor(e,t,r){this.core=e,this.logger=t,Ai(this,"name",Qge),Ai(this,"keychain"),Ai(this,"randomSessionIdentifier",tA()),Ai(this,"initialized",!1),Ai(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ai(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Ai(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=XR(i);return Fz(s.publicKey)}),Ai(this,"generateKeyPair",()=>{this.isInitialized();const i=Y1e();return this.setPrivateKey(i.publicKey,i.privateKey)}),Ai(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=XR(s),a=this.randomSessionIdentifier;return await whe(a,i,e2e,o)}),Ai(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=X1e(a,s);return this.setSymKey(c,o)}),Ai(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||c3(i);return await this.keychain.set(o,i),o}),Ai(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Ai(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Ai(this,"encode",async(i,s,o)=>{this.isInitialized();const a=rV(o),c=Kl(s);if(KP(a))return Q1e(c,o?.encoding);if(GP(a)){const d=a.senderPublicKey,f=a.receiverPublicKey;i=await this.generateSharedKey(d,f)}const l=this.getSymKey(i),{type:u,senderPublicKey:h}=a;return Z1e({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o?.encoding})}),Ai(this,"decode",async(i,s,o)=>{this.isInitialized();const a=tme(s,o);if(KP(a)){const c=eme(s,o?.encoding);return lf(c)}if(GP(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=J1e({symKey:c,encoded:s,encoding:o?.encoding});return lf(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Ai(this,"getPayloadType",(i,s=La)=>{const o=w2({encoded:i,encoding:s});return hf(o.type)}),Ai(this,"getPayloadSenderPublicKey",(i,s=La)=>{const o=w2({encoded:i,encoding:s});return o.senderPublicKey?so(o.senderPublicKey,Ts):void 0}),this.core=e,this.logger=ds(t,this.name),this.keychain=r||new twe(this.core,this.logger)}get context(){return lo(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(pN)}catch{e=tA(),await this.keychain.set(pN,e)}return Jye(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}}var swe=Object.defineProperty,owe=Object.defineProperties,awe=Object.getOwnPropertyDescriptors,xN=Object.getOwnPropertySymbols,cwe=Object.prototype.hasOwnProperty,lwe=Object.prototype.propertyIsEnumerable,uA=(n,e,t)=>e in n?swe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uwe=(n,e)=>{for(var t in e||(e={}))cwe.call(e,t)&&uA(n,t,e[t]);if(xN)for(var t of xN(e))lwe.call(e,t)&&uA(n,t,e[t]);return n},hwe=(n,e)=>owe(n,awe(e)),po=(n,e,t)=>uA(n,typeof e!="symbol"?e+"":e,t);class dwe extends gce{constructor(e,t){super(e,t),this.logger=e,this.core=t,po(this,"messages",new Map),po(this,"messagesWithoutClientAck",new Map),po(this,"name",r2e),po(this,"version",i2e),po(this,"initialized",!1),po(this,"storagePrefix",zc),po(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),po(this,"set",async(r,i,s)=>{this.isInitialized();const o=Cc(i);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(r,a),s===l3.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,hwe(uwe({},c),{[o]:i}))}return await this.persist(),o}),po(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),po(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),po(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=Cc(i);return typeof s[o]<"u"}),po(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=Cc(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),po(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=ds(e,this.name),this.core=t}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,WS(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,WS(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?qS(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?qS(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}}var fwe=Object.defineProperty,pwe=Object.defineProperties,mwe=Object.getOwnPropertyDescriptors,SN=Object.getOwnPropertySymbols,gwe=Object.prototype.hasOwnProperty,ywe=Object.prototype.propertyIsEnumerable,hA=(n,e,t)=>e in n?fwe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ow=(n,e)=>{for(var t in e||(e={}))gwe.call(e,t)&&hA(n,t,e[t]);if(SN)for(var t of SN(e))ywe.call(e,t)&&hA(n,t,e[t]);return n},L6=(n,e)=>pwe(n,mwe(e)),_a=(n,e,t)=>hA(n,typeof e!="symbol"?e+"":e,t);let wwe=class extends yce{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,_a(this,"events",new fa.EventEmitter),_a(this,"name",s2e),_a(this,"queue",new Map),_a(this,"publishTimeout",et.toMiliseconds(et.ONE_MINUTE)),_a(this,"initialPublishTimeout",et.toMiliseconds(et.ONE_SECOND*15)),_a(this,"needsTransportRestart",!1),_a(this,"publish",async(r,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const a=s?.ttl||mN,c=_b(s),l=s?.prompt||!1,u=s?.tag||0,h=s?.id||Ld().toString(),d={topic:r,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:h,attestation:s?.attestation,tvf:s?.tvf}},f=`Failed to publish payload, please try again. id:${h} tag:${u}`;try{const p=new Promise(async m=>{const g=({id:b})=>{d.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(yi.publish,g),m(d))};this.relayer.events.on(yi.publish,g);const y=nh(new Promise((b,w)=>{this.rpcPublish({topic:r,message:i,ttl:a,prompt:l,tag:u,id:h,attestation:s?.attestation,tvf:s?.tvf}).then(b).catch(E=>{this.logger.warn(E,E?.message),w(E)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${u}`);try{await y,this.events.removeListener(yi.publish,g)}catch(b){this.queue.set(h,L6(Ow({},d),{attempt:1})),this.logger.warn(b,b?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:r,message:i,opts:s}}),await nh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(h)}}),_a(this,"on",(r,i)=>{this.events.on(r,i)}),_a(this,"once",(r,i)=>{this.events.once(r,i)}),_a(this,"off",(r,i)=>{this.events.off(r,i)}),_a(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=ds(t,this.name),this.registerEventListeners()}get context(){return lo(this.logger)}async rpcPublish(e){var t,r,i,s;const{topic:o,message:a,ttl:c=mN,prompt:l,tag:u,id:h,attestation:d,tvf:f}=e,p={method:Im(_b().protocol).publish,params:Ow({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:d},f),id:h};Oi((t=p.params)==null?void 0:t.prompt)&&((r=p.params)==null||delete r.prompt),Oi((i=p.params)==null?void 0:i.tag)&&((s=p.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const m=await this.relayer.request(p);return this.relayer.events.emit(yi.publish,e),this.logger.debug("Successfully Published Payload"),m}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{const r=e.attempt+1;this.queue.set(t,L6(Ow({},e),{attempt:r}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(L6(Ow({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Mf.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(yi.connection_stalled);return}this.checkQueue()}),this.relayer.on(yi.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};var vwe=Object.defineProperty,bwe=(n,e,t)=>e in n?vwe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ep=(n,e,t)=>bwe(n,typeof e!="symbol"?e+"":e,t);class _we{constructor(){ep(this,"map",new Map),ep(this,"set",(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),ep(this,"get",e=>this.map.get(e)||[]),ep(this,"exists",(e,t)=>this.get(e).includes(t)),ep(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const i=r.filter(s=>s!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),ep(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Ewe=Object.defineProperty,xwe=Object.defineProperties,Swe=Object.getOwnPropertyDescriptors,AN=Object.getOwnPropertySymbols,Awe=Object.prototype.hasOwnProperty,Cwe=Object.prototype.propertyIsEnumerable,dA=(n,e,t)=>e in n?Ewe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,K1=(n,e)=>{for(var t in e||(e={}))Awe.call(e,t)&&dA(n,t,e[t]);if(AN)for(var t of AN(e))Cwe.call(e,t)&&dA(n,t,e[t]);return n},U6=(n,e)=>xwe(n,Swe(e)),Jn=(n,e,t)=>dA(n,typeof e!="symbol"?e+"":e,t);class Twe extends bce{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Jn(this,"subscriptions",new Map),Jn(this,"topicMap",new _we),Jn(this,"events",new fa.EventEmitter),Jn(this,"name",d2e),Jn(this,"version",f2e),Jn(this,"pending",new Map),Jn(this,"cached",[]),Jn(this,"initialized",!1),Jn(this,"storagePrefix",zc),Jn(this,"subscribeTimeout",et.toMiliseconds(et.ONE_MINUTE)),Jn(this,"initialSubscribeTimeout",et.toMiliseconds(et.ONE_SECOND*15)),Jn(this,"clientId"),Jn(this,"batchSubscribeTopicsLimit",500),Jn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Jn(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const s=_b(i),o={topic:r,relay:s,transportType:i?.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),Jn(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),Jn(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),Jn(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),Jn(this,"on",(r,i)=>{this.events.on(r,i)}),Jn(this,"once",(r,i)=>{this.events.once(r,i)}),Jn(this,"off",(r,i)=>{this.events.off(r,i)}),Jn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),Jn(this,"start",async()=>{await this.onConnect()}),Jn(this,"stop",async()=>{await this.onDisconnect()}),Jn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Jn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),Jn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Mf.pulse,async()=>{await this.checkPending()}),this.events.on(wo.created,async r=>{const i=wo.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(wo.deleted,async r=>{const i=wo.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=ds(t,this.name),this.clientId=""}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const i=_b(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);const s=mr("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,t,r){var i;(!r||r?.transportType===hr.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const s={method:Im(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if(r?.transportType===hr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},et.toMiliseconds(et.ONE_SECOND)),a;const c=new Promise(async u=>{const h=d=>{d.topic===e&&(this.events.removeListener(wo.created,h),u(d.id))};this.events.on(wo.created,h);try{const d=await nh(new Promise((f,p)=>{this.relayer.request(s).catch(m=>{this.logger.warn(m,m?.message),p(m)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(wo.created,h),u(d)}catch{}}),l=await nh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(yi.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,r={method:Im(t.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await nh(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(yi.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,r={method:Im(t.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await nh(new Promise((s,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(yi.connection_stalled)}return i}rpcUnsubscribe(e,t,r){const i={method:Im(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,U6(K1({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,K1({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,K1({},t)),this.topicMap.set(t.topic,e),this.events.emit(wo.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=nt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(wo.deleted,U6(K1({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(wo.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(wo.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=nt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>U6(K1({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await wpe(et.toMiliseconds(et.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Cc(e+await this.getClientId())}}var Iwe=Object.defineProperty,CN=Object.getOwnPropertySymbols,Mwe=Object.prototype.hasOwnProperty,Rwe=Object.prototype.propertyIsEnumerable,fA=(n,e,t)=>e in n?Iwe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,TN=(n,e)=>{for(var t in e||(e={}))Mwe.call(e,t)&&fA(n,t,e[t]);if(CN)for(var t of CN(e))Rwe.call(e,t)&&fA(n,t,e[t]);return n},Mn=(n,e,t)=>fA(n,typeof e!="symbol"?e+"":e,t);class Pwe extends wce{constructor(e){super(e),Mn(this,"protocol","wc"),Mn(this,"version",2),Mn(this,"core"),Mn(this,"logger"),Mn(this,"events",new fa.EventEmitter),Mn(this,"provider"),Mn(this,"messages"),Mn(this,"subscriber"),Mn(this,"publisher"),Mn(this,"name",a2e),Mn(this,"transportExplicitlyClosed",!1),Mn(this,"initialized",!1),Mn(this,"connectionAttemptInProgress",!1),Mn(this,"relayUrl"),Mn(this,"projectId"),Mn(this,"packageName"),Mn(this,"bundleId"),Mn(this,"hasExperiencedNetworkDisruption",!1),Mn(this,"pingTimeout"),Mn(this,"heartBeatTimeout",et.toMiliseconds(et.THIRTY_SECONDS+et.FIVE_SECONDS)),Mn(this,"reconnectTimeout"),Mn(this,"connectPromise"),Mn(this,"reconnectInProgress",!1),Mn(this,"requestsInFlight",[]),Mn(this,"connectTimeout",et.toMiliseconds(et.ONE_SECOND*15)),Mn(this,"request",async t=>{var r,i;this.logger.debug("Publishing Request Payload");const s=t.id||Ld().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:t.method,topic:(r=t.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${s}:${((i=t.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Mn(this,"resetPingTimeout",()=>{yb()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,r,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),Mn(this,"onPayloadHandler",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),Mn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(yi.connect)}),Mn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Mn(this,"onProviderErrorHandler",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(yi.error,t),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Mn(this,"registerProviderListeners",()=>{this.provider.on(zo.payload,this.onPayloadHandler),this.provider.on(zo.connect,this.onConnectHandler),this.provider.on(zo.disconnect,this.onDisconnectHandler),this.provider.on(zo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ds(e.logger,this.name):xy(r1({level:e.logger||o2e})),this.messages=new dwe(this.logger,e.core),this.subscriber=new Twe(this,this.logger),this.publisher=new wwe(this,this.logger),this.relayUrl=e?.relayUrl||mV,this.projectId=e.projectId,npe()?this.packageName=mP():rpe()&&(this.bundleId=mP()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return lo(this.logger)}get connected(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,t,r;return((r=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:hr.relay},l3.outbound)}async subscribe(e,t){var r,i,s;this.isInitialized(),(!(t!=null&&t.transportType)||t?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((r=t?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=t?.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(wo.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(wo.created,l)}),new Promise(async(u,h)=>{a=await this.subscriber.subscribe(e,TN({internal:{throwOnFailedPublish:o}},t)).catch(d=>{o&&h(d)})||a,u()})]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await nh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await sN())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const r of t)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const i=Qr(et.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(yi.message,e),await this.recordMessageEvent(e,l3.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(zo.disconnect,s),await nh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(zo.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(zo.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(zo.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(r=>setTimeout(r,et.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,r,i,s;if(yb())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new pa(new Yge(cpe({sdkVersion:aA,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),g9(e)){if(!e.method.endsWith(c2e))return;const t=e.params,{topic:r,message:i,publishedAt:s,attestation:o}=t.data,a={topic:r,message:i,publishedAt:s,transportType:hr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(TN({type:"event",event:t.id},a)),this.events.emit(t.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else q5(e)&&this.events.emit(yi.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,l3.inbound),this.events.emit(yi.message,e))}async acknowledgePayload(e){const t=V5(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(zo.payload,this.onPayloadHandler),this.provider.off(zo.connect,this.onConnectHandler),this.provider.off(zo.disconnect,this.onDisconnectHandler),this.provider.off(zo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await sN();Kme(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Mf.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Zme())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(t){this.logger.warn(t,t?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(yi.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},et.toMiliseconds(l2e)))))}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Nwe(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function IN(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function MN(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Owe="[object RegExp]",kwe="[object String]",Dwe="[object Number]",Lwe="[object Boolean]",RN="[object Arguments]",Uwe="[object Symbol]",Bwe="[object Date]",Fwe="[object Map]",$we="[object Set]",zwe="[object Array]",Hwe="[object Function]",Vwe="[object ArrayBuffer]",B6="[object Object]",Wwe="[object Error]",qwe="[object DataView]",jwe="[object Uint8Array]",Gwe="[object Uint8ClampedArray]",Kwe="[object Uint16Array]",Ywe="[object Uint32Array]",Xwe="[object BigUint64Array]",Zwe="[object Int8Array]",Jwe="[object Int16Array]",Qwe="[object Int32Array]",eve="[object BigInt64Array]",tve="[object Float32Array]",nve="[object Float64Array]";function rve(){}function PN(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function ive(n,e,t){return Mm(n,e,void 0,void 0,void 0,void 0,t)}function Mm(n,e,t,r,i,s,o){const a=o(n,e,t,r,i,s);if(a!==void 0)return a;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===e;case"number":return n===e||Object.is(n,e);case"function":return n===e;case"object":return ug(n,e,s,o)}return ug(n,e,s,o)}function ug(n,e,t,r){if(Object.is(n,e))return!0;let i=MN(n),s=MN(e);if(i===RN&&(i=B6),s===RN&&(s=B6),i!==s)return!1;switch(i){case kwe:return n.toString()===e.toString();case Dwe:{const c=n.valueOf(),l=e.valueOf();return Nwe(c,l)}case Lwe:case Bwe:case Uwe:return Object.is(n.valueOf(),e.valueOf());case Owe:return n.source===e.source&&n.flags===e.flags;case Hwe:return n===e}t=t??new Map;const o=t.get(n),a=t.get(e);if(o!=null&&a!=null)return o===e;t.set(n,e),t.set(e,n);try{switch(i){case Fwe:{if(n.size!==e.size)return!1;for(const[c,l]of n.entries())if(!e.has(c)||!Mm(l,e.get(c),c,n,e,t,r))return!1;return!0}case $we:{if(n.size!==e.size)return!1;const c=Array.from(n.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const h=c[u],d=l.findIndex(f=>Mm(h,f,void 0,n,e,t,r));if(d===-1)return!1;l.splice(d,1)}return!0}case zwe:case jwe:case Gwe:case Kwe:case Ywe:case Xwe:case Zwe:case Jwe:case Qwe:case eve:case tve:case nve:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let c=0;c<n.length;c++)if(!Mm(n[c],e[c],c,n,e,t,r))return!1;return!0}case Vwe:return n.byteLength!==e.byteLength?!1:ug(new Uint8Array(n),new Uint8Array(e),t,r);case qwe:return n.byteLength!==e.byteLength||n.byteOffset!==e.byteOffset?!1:ug(new Uint8Array(n),new Uint8Array(e),t,r);case Wwe:return n.name===e.name&&n.message===e.message;case B6:{if(!(ug(n.constructor,e.constructor,t,r)||PN(n)&&PN(e)))return!1;const c=[...Object.keys(n),...IN(n)],l=[...Object.keys(e),...IN(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const h=c[u],d=n[h];if(!Object.hasOwn(e,h))return!1;const f=e[h];if(!Mm(d,f,h,n,e,t,r))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function sve(n,e){return ive(n,e,rve)}var ove=Object.defineProperty,NN=Object.getOwnPropertySymbols,ave=Object.prototype.hasOwnProperty,cve=Object.prototype.propertyIsEnumerable,pA=(n,e,t)=>e in n?ove(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ON=(n,e)=>{for(var t in e||(e={}))ave.call(e,t)&&pA(n,t,e[t]);if(NN)for(var t of NN(e))cve.call(e,t)&&pA(n,t,e[t]);return n},$s=(n,e,t)=>pA(n,typeof e!="symbol"?e+"":e,t);class Pf extends vce{constructor(e,t,r,i=zc,s=void 0){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,$s(this,"map",new Map),$s(this,"version",u2e),$s(this,"cached",[]),$s(this,"initialized",!1),$s(this,"getKey"),$s(this,"storagePrefix",zc),$s(this,"recentlyDeleted",[]),$s(this,"recentlyDeletedLimit",200),$s(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Oi(o)?this.map.set(this.getKey(o),o):Ame(o)?this.map.set(o.id,o):Cme(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),$s(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),$s(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),$s(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>sve(a[c],o[c]))):this.values)),$s(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=ON(ON({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),$s(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=ds(t,this.name),this.storagePrefix=i,this.getKey=s}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:i}=nt("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=nt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=nt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lve=Object.defineProperty,uve=(n,e,t)=>e in n?lve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gn=(n,e,t)=>uve(n,typeof e!="symbol"?e+"":e,t);class hve{constructor(e,t){this.core=e,this.logger=t,gn(this,"name",p2e),gn(this,"version",m2e),gn(this,"events",new H7),gn(this,"pairings"),gn(this,"initialized",!1),gn(this,"storagePrefix",zc),gn(this,"ignoredPayloadTypes",[Fl]),gn(this,"registeredMethods",[]),gn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),gn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),gn(this,"create",async r=>{this.isInitialized();const i=tA(),s=await this.core.crypto.setSymKey(i),o=Qr(et.FIVE_MINUTES),a={protocol:pV},c={topic:s,expiry:o,relay:a,active:!1,methods:r?.methods},l=XP({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:r?.methods});return this.events.emit(_d.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:r?.transportType}),{topic:s,uri:l}}),gn(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[gc.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=YP(r.uri);i.props.properties.topic=s,i.addTrace(gc.pairing_uri_validation_success),i.addTrace(gc.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(gc.existing_pairing),u.active)throw i.setError(_l.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(gc.pairing_not_expired)}const h=c||Qr(et.FIVE_MINUTES),d={topic:s,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(s,h),await this.pairings.set(s,d),i.addTrace(gc.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(_d.create,d),i.addTrace(gc.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(gc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(_l.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(f){throw i.setError(_l.subscribe_pairing_topic_failure),f}return i.addTrace(gc.subscribe_pairing_topic_success),d}),gn(this,"activate",async({topic:r})=>{this.isInitialized();const i=Qr(et.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),gn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=pd();this.events.once(Fn("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),gn(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),gn(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),gn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),gn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",mr("USER_DISCONNECTED")),await this.deletePairing(i))}),gn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(i);return XP({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),gn(this,"sendRequest",async(r,i,s)=>{const o=rh(i,s),a=await this.core.crypto.encode(r,o),c=j1[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),gn(this,"sendResult",async(r,i,s)=>{const o=V5(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=j1[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),gn(this,"sendError",async(r,i,s)=>{const o=W5(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=j1[c]?j1[c].res:j1.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),gn(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,mr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),gn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>Vu(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),gn(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),gn(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),gn(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(_d.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),gn(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{bc(i)?this.events.emit(Fn("pairing_ping",s),{}):Go(i)&&this.events.emit(Fn("pairing_ping",s),{error:i.error})},500)}),gn(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(_d.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),gn(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=mr("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,a),this.logger.error(a)}catch(a){await this.sendError(s,r,a),this.logger.error(a)}}),gn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(mr("WC_METHOD_UNSUPPORTED",r))}),gn(this,"isValidPair",(r,i)=>{var s;if(!Gs(r)){const{message:a}=nt("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(_l.malformed_pairing_uri),new Error(a)}if(!Sme(r.uri)){const{message:a}=nt("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(_l.malformed_pairing_uri),new Error(a)}const o=YP(r?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=nt("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(_l.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=nt("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(_l.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&et.toMiliseconds(o?.expiryTimestamp)<Date.now()){i.setError(_l.pairing_expired);const{message:a}=nt("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),gn(this,"isValidPing",async r=>{if(!Gs(r)){const{message:s}=nt("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),gn(this,"isValidDisconnect",async r=>{if(!Gs(r)){const{message:s}=nt("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),gn(this,"isValidPairingTopic",async r=>{if(!jr(r,!1)){const{message:i}=nt("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=nt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(Vu(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=nt("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=ds(t,this.name),this.pairings=new Pf(this.core,this.logger,this.name,this.storagePrefix)}get context(){return lo(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(yi.message,async e=>{const{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==hr.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(t,r);g9(s)?(this.core.history.set(t,s),await this.onRelayEventRequest({topic:t,payload:s})):q5(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id)),await this.core.relayer.messages.ack(t,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(jo.expired,async e=>{const{topic:t}=fH(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(_d.expire,{topic:t}))})}}var dve=Object.defineProperty,fve=(n,e,t)=>e in n?dve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ci=(n,e,t)=>fve(n,typeof e!="symbol"?e+"":e,t);class pve extends mce{constructor(e,t){super(e,t),this.core=e,this.logger=t,Ci(this,"records",new Map),Ci(this,"events",new fa.EventEmitter),Ci(this,"name",g2e),Ci(this,"version",y2e),Ci(this,"cached",[]),Ci(this,"initialized",!1),Ci(this,"storagePrefix",zc),Ci(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ci(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:Qr(et.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(va.created,o)}),Ci(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=Go(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(va.updated,i))}),Ci(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),Ci(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(va.deleted,s)}}),this.persist()}),Ci(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),Ci(this,"on",(r,i)=>{this.events.on(r,i)}),Ci(this,"once",(r,i)=>{this.events.once(r,i)}),Ci(this,"off",(r,i)=>{this.events.off(r,i)}),Ci(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=ds(t,this.name)}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:rh(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=nt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(va.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=nt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(va.created,e=>{const t=va.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(va.updated,e=>{const t=va.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(va.deleted,e=>{const t=va.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(Mf.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{et.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(va.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}}var mve=Object.defineProperty,gve=(n,e,t)=>e in n?mve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Yi=(n,e,t)=>gve(n,typeof e!="symbol"?e+"":e,t);class yve extends _ce{constructor(e,t){super(e,t),this.core=e,this.logger=t,Yi(this,"expirations",new Map),Yi(this,"events",new fa.EventEmitter),Yi(this,"name",w2e),Yi(this,"version",v2e),Yi(this,"cached",[]),Yi(this,"initialized",!1),Yi(this,"storagePrefix",zc),Yi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Yi(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Yi(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(jo.created,{target:s,expiration:o})}),Yi(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),Yi(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(jo.deleted,{target:i,expiration:s})}}),Yi(this,"on",(r,i)=>{this.events.on(r,i)}),Yi(this,"once",(r,i)=>{this.events.once(r,i)}),Yi(this,"off",(r,i)=>{this.events.off(r,i)}),Yi(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=ds(t,this.name)}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return lpe(e);if(typeof e=="number")return upe(e);const{message:t}=nt("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(jo.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=nt("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=nt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;et.toMiliseconds(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(jo.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Mf.pulse,()=>this.checkExpirations()),this.events.on(jo.created,e=>{const t=jo.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jo.expired,e=>{const t=jo.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jo.deleted,e=>{const t=jo.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}}var wve=Object.defineProperty,vve=(n,e,t)=>e in n?wve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wr=(n,e,t)=>vve(n,typeof e!="symbol"?e+"":e,t);class bve extends Ece{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,Wr(this,"name",b2e),Wr(this,"abortController"),Wr(this,"isDevEnv"),Wr(this,"verifyUrlV3",E2e),Wr(this,"storagePrefix",zc),Wr(this,"version",fV),Wr(this,"publicKey"),Wr(this,"fetchPromise"),Wr(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&et.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Wr(this,"register",async i=>{if(!a1()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Yl.getDocument(),u=this.startAbortTimer(et.ONE_SECOND*5),h=await new Promise((d,f)=>{const p=()=>{window.removeEventListener("message",g),l.body.removeChild(m),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const m=l.createElement("iframe");m.src=c,m.style.display="none",m.addEventListener("error",p,{signal:this.abortController.signal});const g=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(LS(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(m),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",g),d(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(m),window.addEventListener("message",g,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""}),Wr(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(LS(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,c)}),Wr(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(et.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Wr(this,"getVerifyUrl",i=>{let s=i||lg;return x2e.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${lg}`),s=lg),s}),Wr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(et.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),Wr(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Wr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Wr(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Wr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Wr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Wr(this,"validateAttestation",(i,s)=>{const o=rme(i,s.publicKey),a={hasExpired:et.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=ds(t,this.name),this.abortController=new AbortController,this.isDevEnv=t9(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return lo(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),et.toMiliseconds(e))}}var _ve=Object.defineProperty,Eve=(n,e,t)=>e in n?_ve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,kN=(n,e,t)=>Eve(n,typeof e!="symbol"?e+"":e,t);class xve extends xce{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,kN(this,"context",S2e),kN(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=r,c=`${A2e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=ds(t,this.context)}}var Sve=Object.defineProperty,DN=Object.getOwnPropertySymbols,Ave=Object.prototype.hasOwnProperty,Cve=Object.prototype.propertyIsEnumerable,mA=(n,e,t)=>e in n?Sve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Y1=(n,e)=>{for(var t in e||(e={}))Ave.call(e,t)&&mA(n,t,e[t]);if(DN)for(var t of DN(e))Cve.call(e,t)&&mA(n,t,e[t]);return n},hi=(n,e,t)=>mA(n,typeof e!="symbol"?e+"":e,t);class Tve extends Sce{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,hi(this,"context",T2e),hi(this,"storagePrefix",zc),hi(this,"storageVersion",C2e),hi(this,"events",new Map),hi(this,"shouldPersist",!1),hi(this,"init",async()=>{if(!t9())try{const i={eventId:yP(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:hH(this.core.relayer.protocol,this.core.relayer.version,aA)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),hi(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=yP(),u=this.core.projectId||"",h=Date.now(),d=Y1({eventId:l,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,d),this.shouldPersist=!0),d}),hi(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Y1(Y1({},a),this.setMethods(a.eventId))}),hi(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),hi(this,"setEventListeners",()=>{this.core.heartbeat.on(Mf.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{et.fromMiliseconds(Date.now())-et.fromMiliseconds(i.timestamp)>I2e&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),hi(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),hi(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),hi(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),hi(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),hi(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Y1(Y1({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),hi(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),hi(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${M2e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${aA}${s}`,{method:"POST",body:JSON.stringify(i)})}),hi(this,"getAppDomain",()=>uH().url),this.logger=ds(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Ive=Object.defineProperty,LN=Object.getOwnPropertySymbols,Mve=Object.prototype.hasOwnProperty,Rve=Object.prototype.propertyIsEnumerable,gA=(n,e,t)=>e in n?Ive(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,UN=(n,e)=>{for(var t in e||(e={}))Mve.call(e,t)&&gA(n,t,e[t]);if(LN)for(var t of LN(e))Rve.call(e,t)&&gA(n,t,e[t]);return n},tr=(n,e,t)=>gA(n,typeof e!="symbol"?e+"":e,t);let Pve=class IV extends hce{constructor(e){var t;super(e),tr(this,"protocol",dV),tr(this,"version",fV),tr(this,"name",oA),tr(this,"relayUrl"),tr(this,"projectId"),tr(this,"customStoragePrefix"),tr(this,"events",new fa.EventEmitter),tr(this,"logger"),tr(this,"heartbeat"),tr(this,"relayer"),tr(this,"crypto"),tr(this,"storage"),tr(this,"history"),tr(this,"expirer"),tr(this,"pairing"),tr(this,"verify"),tr(this,"echoClient"),tr(this,"linkModeSupportedApps"),tr(this,"eventClient"),tr(this,"initialized",!1),tr(this,"logChunkController"),tr(this,"on",(a,c)=>this.events.on(a,c)),tr(this,"once",(a,c)=>this.events.once(a,c)),tr(this,"off",(a,c)=>this.events.off(a,c)),tr(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),tr(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:hr.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||mV,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=r1({level:typeof e?.logger=="string"&&e.logger?e.logger:Zge.logger,name:oA}),{logger:s,chunkLoggerController:o}=W7({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=ds(s,this.name),this.heartbeat=new uae,this.crypto=new iwe(this,this.logger,e?.keychain),this.history=new pve(this,this.logger),this.expirer=new yve(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new jae(UN(UN({},Jge),e?.storageOptions)),this.relayer=new Pwe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new hve(this,this.logger),this.verify=new bve(this,this.logger,this.storage),this.echoClient=new xve(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Tve(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new IV(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem(h2e,r),t}get context(){return lo(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(gN,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(gN)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(t){console.warn("Failed to get global WalletConnect core",t);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((t=e.opts)==null?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Xge.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const Nve=Pve,MV="wc",RV=2,PV="client",y9=`${MV}@${RV}:${PV}:`,F6={name:PV,logger:"error"},BN="WALLETCONNECT_DEEPLINK_CHOICE",Ove="proposal",FN="Proposal expired",kve="session",tp=et.SEVEN_DAYS,Dve="engine",di={wc_sessionPropose:{req:{ttl:et.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1104},res:{ttl:et.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1106},res:{ttl:et.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:et.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:et.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1112},res:{ttl:et.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1114},res:{ttl:et.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:et.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:et.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1119}}},$6={min:et.FIVE_MINUTES,max:et.SEVEN_DAYS},dc={idle:"IDLE",active:"ACTIVE"},Lve={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Uve="request",Bve=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Fve="wc",$ve="auth",zve="authKeys",Hve="pairingTopics",Vve="requests",G5=`${Fve}@${1.5}:${$ve}:`,u3=`${G5}:PUB_KEY`;var Wve=Object.defineProperty,qve=Object.defineProperties,jve=Object.getOwnPropertyDescriptors,$N=Object.getOwnPropertySymbols,Gve=Object.prototype.hasOwnProperty,Kve=Object.prototype.propertyIsEnumerable,yA=(n,e,t)=>e in n?Wve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ur=(n,e)=>{for(var t in e||(e={}))Gve.call(e,t)&&yA(n,t,e[t]);if($N)for(var t of $N(e))Kve.call(e,t)&&yA(n,t,e[t]);return n},zs=(n,e)=>qve(n,jve(e)),qe=(n,e,t)=>yA(n,typeof e!="symbol"?e+"":e,t);class Yve extends Ice{constructor(e){super(e),qe(this,"name",Dve),qe(this,"events",new H7),qe(this,"initialized",!1),qe(this,"requestQueue",{state:dc.idle,queue:[]}),qe(this,"sessionRequestQueue",{state:dc.idle,queue:[]}),qe(this,"requestQueueDelay",et.ONE_SECOND),qe(this,"expectedPairingMethodMap",new Map),qe(this,"recentlyDeletedMap",new Map),qe(this,"recentlyDeletedLimit",200),qe(this,"relayMessageCache",[]),qe(this,"pendingSessions",new Map),qe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(di)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},et.toMiliseconds(this.requestQueueDelay)))}),qe(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=zs(ur({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=vme(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=i,h,d=!1;try{if(u){const C=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),d=C.active}}catch(C){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),C}if(!u||!d){const{topic:C,uri:R}=await this.client.core.pairing.create();u=C,h=R}if(!u){const{message:C}=nt("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(C)}const f=await this.client.core.crypto.generateKeyPair(),p=di.wc_sessionPropose.req.ttl||et.FIVE_MINUTES,m=Qr(p),g=zs(ur(ur({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:pV}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:vc()}),y=Fn("session_connect",g.id),{reject:b,resolve:w,done:E}=pd(p,FN),x=({id:C})=>{C===g.id&&(this.client.events.off("proposal_expire",x),this.pendingSessions.delete(g.id),this.events.emit(y,{error:{message:FN,code:0}}))};return this.client.events.on("proposal_expire",x),this.events.once(y,({error:C,session:R})=>{this.client.events.off("proposal_expire",x),C?b(C):R&&w(R)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:g,throwOnFailedPublish:!0,clientRpcId:g.id}),await this.setProposal(g.id,g),{uri:h,approval:E}}),qe(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(r){throw this.client.logger.error("pair() failed"),r}}),qe(this,"approve",async t=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=t?.id)==null?void 0:r.toString(),trace:[ba.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(_){throw o.setError(Kh.no_internet_connection),_}try{await this.isValidProposalId(t?.id)}catch(_){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),o.setError(Kh.proposal_not_found),_}try{await this.isValidApprove(t)}catch(_){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Kh.session_approve_namespace_validation_failure),_}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=t,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:m,requiredNamespaces:g,optionalNamespaces:y}=f;let b=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:p});b||(b=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:ba.session_approve_started,properties:{topic:p,trace:[ba.session_approve_started,ba.session_namespaces_validation_success]}}));const w=await this.client.core.crypto.generateKeyPair(),E=m.publicKey,x=await this.client.core.crypto.generateSharedKey(w,E),C=ur(ur(ur({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:w,metadata:this.client.metadata},expiry:Qr(tp)},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),R=hr.relay;b.addTrace(ba.subscribing_session_topic);try{await this.client.core.relayer.subscribe(x,{transportType:R})}catch(_){throw b.setError(Kh.subscribe_session_topic_failure),_}b.addTrace(ba.subscribe_session_topic_success);const k=zs(ur({},C),{topic:x,requiredNamespaces:g,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:C.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:w,transportType:hr.relay});await this.client.session.set(x,k),b.addTrace(ba.store_session);try{b.addTrace(ba.publishing_session_settle),await this.sendRequest({topic:x,method:"wc_sessionSettle",params:C,throwOnFailedPublish:!0}).catch(_=>{throw b?.setError(Kh.session_settle_publish_failure),_}),b.addTrace(ba.session_settle_publish_success),b.addTrace(ba.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:w},throwOnFailedPublish:!0}).catch(_=>{throw b?.setError(Kh.session_approve_publish_failure),_}),b.addTrace(ba.session_approve_publish_success)}catch(_){throw this.client.logger.error(_),this.client.session.delete(x,mr("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(x),_}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:m.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(x,Qr(tp)),{topic:x,acknowledged:()=>Promise.resolve(this.client.session.get(x))}}),qe(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=t;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&await this.sendError({id:r,topic:s,error:i,rpcOpts:di.wc_sessionPropose.reject}),await this.deleteProposal(r)}),qe(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:r,namespaces:i}=t,{done:s,resolve:o,reject:a}=pd(),c=vc(),l=Ld().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Fn("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(r,{namespaces:u}),a(h)}),{acknowledged:s}}),qe(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=t,i=vc(),{done:s,resolve:o,reject:a}=pd();return this.events.once(Fn("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Qr(tp)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),qe(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(g){throw this.client.logger.error("request() -> isValidRequest() failed"),g}const{chainId:r,request:i,topic:s,expiry:o=di.wc_sessionRequest.req.ttl}=t,a=this.client.session.get(s);a?.transportType===hr.relay&&await this.confirmOnlineStateOrThrow();const c=vc(),l=Ld().toString(),{done:u,resolve:h,reject:d}=pd(o,"Request expired. Please try again.");this.events.once(Fn("session_request",c),({error:g,result:y})=>{g?d(g):h(y)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:{request:zs(ur({},i),{expiryTimestamp:Qr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(g=>d(g)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),await u();const m={request:zs(ur({},i),{expiryTimestamp:Qr(o)}),chainId:r};return await Promise.all([new Promise(async g=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:m,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,m)}).catch(y=>d(y)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),g()}),new Promise(async g=>{var y;if(!((y=a.sessionConfig)!=null&&y.disableDeepLink)){const b=await ppe(this.client.core.storage,BN);await hpe({id:c,topic:s,wcDeepLink:b})}g()}),u()]).then(g=>g[2])}),qe(this,"respond",async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:r,response:i}=t,{id:s}=i,o=this.client.session.get(r);o.transportType===hr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);bc(i)?await this.sendResult({id:s,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:a}):Go(i)&&await this.sendError({id:s,topic:r,error:i.error,appLink:a}),this.cleanupAfterResponse(t)}),qe(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=t;if(this.client.session.keys.includes(r)){const i=vc(),s=Ld().toString(),{done:o,resolve:a,reject:c}=pd();this.events.once(Fn("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),qe(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:r,event:i,chainId:s}=t,o=Ld().toString(),a=vc();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),qe(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:r}=t;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:mr("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=nt("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),qe(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(r=>Eme(r,t)))),qe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),qe(this,"authenticate",async(t,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(t);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?hr.link_mode:hr.relay;o===hr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:d,exp:f,nbf:p,methods:m=[],expiry:g}=t,y=[...t.resources||[]],{topic:b,uri:w}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:w}});const E=await this.client.core.crypto.generateKeyPair(),x=c3(E);if(await Promise.all([this.client.auth.authKeys.set(u3,{responseTopic:x,publicKey:E}),this.client.auth.pairingTopics.set(x,{topic:x,pairingTopic:b})]),await this.client.core.relayer.subscribe(x,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),m.length>0){const{namespace:V}=c0(a[0]);let W=M0e(V,"request",m);a3(y)&&(W=P0e(W,y.pop())),y.push(W)}const C=g&&g>di.wc_sessionAuthenticate.req.ttl?g:di.wc_sessionAuthenticate.req.ttl,R={authPayload:{type:d??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:Qr(C)},k={eip155:{chains:a,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},_={requiredNamespaces:{},optionalNamespaces:k,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:Qr(di.wc_sessionPropose.req.ttl),id:vc()},{done:A,resolve:M,reject:D}=pd(C,"Request expired"),P=vc(),v=Fn("session_connect",_.id),S=Fn("session_request",P),T=async({error:V,session:W})=>{this.events.off(S,L),V?D(V):W&&M({session:W})},L=async V=>{var W,F,I;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),V.error){const Te=mr("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return V.error.code===Te.code?void 0:(this.events.off(v,T),D(V.error.message))}await this.deleteProposal(_.id),this.events.off(v,T);const{cacaos:N,responder:$}=V.result,j=[],te=[];for(const Te of N){await IP({cacao:Te,projectId:this.client.core.projectId})||(this.client.logger.error(Te,"Signature verification failed"),D(mr("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:$e}=Te,pe=a3($e.resources),X=[jS($e.iss)],Z=wb($e.iss);if(pe){const H=MP(pe),oe=RP(pe);j.push(...H),X.push(...oe)}for(const H of X)te.push(`${H}:${Z}`)}const ce=await this.client.core.crypto.generateSharedKey(E,$.publicKey);let ve;j.length>0&&(ve={topic:ce,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:$,controller:$.publicKey,expiry:Qr(tp),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:eN([...new Set(j)],[...new Set(te)]),transportType:o},await this.client.core.relayer.subscribe(ce,{transportType:o}),await this.client.session.set(ce,ve),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:$.metadata}),ve=this.client.session.get(ce)),(W=this.client.metadata.redirect)!=null&&W.linkMode&&(F=$.metadata.redirect)!=null&&F.linkMode&&(I=$.metadata.redirect)!=null&&I.universal&&r&&(this.client.core.addLinkModeSupportedApp($.metadata.redirect.universal),this.client.session.update(ce,{transportType:hr.link_mode})),M({auths:N,session:ve})};this.events.once(v,T),this.events.once(S,L);let U;try{if(s){const V=rh("wc_sessionAuthenticate",R,P);this.client.core.history.set(b,V);const W=await this.client.core.crypto.encode("",V,{type:Ry,encoding:Zu});U=Nw(r,b,W)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:R,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:_,expiry:di.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:_.id})])}catch(V){throw this.events.off(v,T),this.events.off(S,L),V}return await this.setProposal(_.id,_),await this.setAuthRequest(P,{request:zs(ur({},R),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:U??w,response:A}}),qe(this,"approveSessionAuthenticate",async t=>{const{id:r,auths:i}=t,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Yh.authenticated_session_approve_started]}});try{this.isInitialized()}catch(g){throw s.setError(G1.no_internet_connection),g}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(G1.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||hr.relay;a===hr.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=c3(c),h={type:Fl,receiverPublicKey:c,senderPublicKey:l},d=[],f=[];for(const g of i){if(!await IP({cacao:g,projectId:this.client.core.projectId})){s.setError(G1.invalid_cacao);const x=mr("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:x,encodeOpts:h}),new Error(x.message)}s.addTrace(Yh.cacaos_verified);const{p:y}=g,b=a3(y.resources),w=[jS(y.iss)],E=wb(y.iss);if(b){const x=MP(b),C=RP(b);d.push(...x),w.push(...C)}for(const x of w)f.push(`${x}:${E}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(Yh.create_authenticated_session_topic);let m;if(d?.length>0){m={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Qr(tp),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:eN([...new Set(d)],[...new Set(f)]),transportType:a},s.addTrace(Yh.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(g){throw s.setError(G1.subscribe_authenticated_session_topic_failure),g}s.addTrace(Yh.subscribe_authenticated_session_topic_success),await this.client.session.set(p,m),s.addTrace(Yh.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Yh.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(g){throw s.setError(G1.authenticated_session_approve_publish_failure),g}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:m}}),qe(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:r,reason:i}=t,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===hr.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=c3(o),l={type:Fl,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:i,encodeOpts:l,rpcOpts:di.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),qe(this,"formatAuthMessage",t=>{this.isInitialized();const{request:r,iss:i}=t;return IH(r,i)}),qe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),qe(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===t.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),qe(this,"deleteSession",async t=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=t,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,mr("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(BN).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,mr("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=dc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),qe(this,"deleteProposal",async(t,r)=>{if(r)try{const i=this.client.proposal.get(t);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(Kh.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,mr("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),qe(this,"deletePendingSessionRequest",async(t,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==t),i&&(this.sessionRequestQueue.state=dc.idle,this.client.events.emit("session_request_expire",{id:t}))}),qe(this,"deletePendingAuthRequest",async(t,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)])}),qe(this,"setExpiry",async(t,r)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,r),await this.client.session.update(t,{expiry:r}))}),qe(this,"setProposal",async(t,r)=>{this.client.core.expirer.set(t,Qr(di.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,r)}),qe(this,"setAuthRequest",async(t,r)=>{const{request:i,pairingTopic:s,transportType:o=hr.relay}=r;this.client.core.expirer.set(t,i.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:t,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),qe(this,"setPendingSessionRequest",async t=>{const{id:r,topic:i,params:s,verifyContext:o}=t,a=s.request.expiryTimestamp||Qr(di.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),qe(this,"sendRequest",async t=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h}=t,d=rh(i,s,c);let f;const p=!!u;try{const y=p?Zu:La;f=await this.client.core.crypto.encode(r,d,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let m;if(Bve.includes(i)){const y=Cc(JSON.stringify(d)),b=Cc(f);m=await this.client.core.verify.register({id:b,decryptedId:y})}const g=di[i].req;if(g.attestation=m,o&&(g.ttl=o),a&&(g.id=a),this.client.core.history.set(r,d),p){const y=Nw(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=di[i].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=zs(ur({},h),{correlationId:d.id}),l?(y.internal=zs(ur({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return d.id}),qe(this,"sendResult",async t=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=t,l=V5(r,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=h?Zu:La;u=await this.client.core.crypto.encode(i,l,zs(ur({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),p}let d,f;try{d=await this.client.core.history.get(i,r);const p=d.request;try{f=this.getTVFParams(r,p.params,s)}catch(m){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${m?.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),p}if(h){const p=Nw(c,i,u);await global.Linking.openURL(p,this.client.name)}else{const p=d.request.method,m=di[p].res;m.tvf=zs(ur({},f),{correlationId:r}),o?(m.internal=zs(ur({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,m)):this.client.core.relayer.publish(i,u,m).catch(g=>this.client.logger.error(g))}await this.client.core.history.resolve(l)}),qe(this,"sendError",async t=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=t,l=W5(r,s);let u;const h=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=h?Zu:La;u=await this.client.core.crypto.encode(i,l,zs(ur({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),f}let d;try{d=await this.client.core.history.get(i,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),f}if(h){const f=Nw(c,i,u);await global.Linking.openURL(f,this.client.name)}else{const f=d.request.method,p=a||di[f].res;this.client.core.relayer.publish(i,u,p)}await this.client.core.history.resolve(l)}),qe(this,"cleanup",async()=>{const t=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;Vu(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&t.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Vu(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...t.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),qe(this,"onProviderMessageEvent",async t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):await this.onRelayMessage(t)}),qe(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),qe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===dc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=dc.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=dc.idle}),qe(this,"processRequest",async t=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:a}=t,c=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),qe(this,"onRelayEventResponse",async t=>{const{topic:r,payload:i,transportType:s}=t,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),qe(this,"onRelayEventUnknownPayload",t=>{const{topic:r}=t,{message:i}=nt("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),qe(this,"shouldIgnorePairingRequest",t=>{const{topic:r,requestMethod:i}=t,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),qe(this,"onSessionProposeRequest",async t=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=t,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(_l.proposal_listener_not_found)),this.isValidConnect(ur({},i.params));const u=a.expiryTimestamp||Qr(di.wc_sessionPropose.req.ttl),h=ur({id:c,pairingTopic:r,expiryTimestamp:u,attestation:s,encryptedId:o},a);await this.setProposal(c,h);const d=await this.getVerifyContext({attestationId:s,hash:Cc(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});l?.addTrace(gc.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:d})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:di.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),qe(this,"onSessionProposeResponse",async(t,r,i)=>{const{id:s}=r;if(bc(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:t,proposalId:s,publicKey:c});const h=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:t})}else if(Go(r)){await this.deleteProposal(s);const o=Fn("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),qe(this,"onSessionSettleRequest",async(t,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:d}=r.params,f=[...this.pendingSessions.values()].find(g=>g.sessionTopic===t);if(!f)return this.client.logger.error(`Pending session not found for topic ${t}`);const p=this.client.proposal.get(f.proposalId),m=zs(ur(ur(ur({topic:t,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),{transportType:hr.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(Fn("session_connect",f.proposalId),{session:m}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:t,result:!0})}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),qe(this,"onSessionSettleResponse",async(t,r)=>{const{id:i}=r;bc(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Fn("session_approve",i),{})):Go(r)&&(await this.client.session.delete(t,mr("USER_DISCONNECTED")),this.events.emit(Fn("session_approve",i),{error:r.error}))}),qe(this,"onSessionUpdateRequest",async(t,r)=>{const{params:i,id:s}=r;try{const o=`${t}_session_update`,a=q1.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:t,error:mr("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ur({topic:t},i));try{q1.set(o,s),await this.client.session.update(t,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:t,result:!0})}catch(c){throw q1.delete(o),c}this.client.events.emit("session_update",{id:s,topic:t,params:i})}catch(o){await this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}}),qe(this,"isRequestOutOfSync",(t,r)=>r.toString().slice(0,-3)<t.toString().slice(0,-3)),qe(this,"onSessionUpdateResponse",(t,r)=>{const{id:i}=r,s=Fn("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);bc(r)?this.events.emit(Fn("session_update",i),{}):Go(r)&&this.events.emit(Fn("session_update",i),{error:r.error})}),qe(this,"onSessionExtendRequest",async(t,r)=>{const{id:i}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Qr(tp)),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_extend",{id:i,topic:t})}catch(s){await this.sendError({id:i,topic:t,error:s}),this.client.logger.error(s)}}),qe(this,"onSessionExtendResponse",(t,r)=>{const{id:i}=r,s=Fn("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);bc(r)?this.events.emit(Fn("session_extend",i),{}):Go(r)&&this.events.emit(Fn("session_extend",i),{error:r.error})}),qe(this,"onSessionPingRequest",async(t,r)=>{const{id:i}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:t})}catch(s){await this.sendError({id:i,topic:t,error:s}),this.client.logger.error(s)}}),qe(this,"onSessionPingResponse",(t,r)=>{const{id:i}=r,s=Fn("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);bc(r)?this.events.emit(Fn("session_ping",i),{}):Go(r)&&this.events.emit(Fn("session_ping",i),{error:r.error})},500)}),qe(this,"onSessionDeleteRequest",async(t,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(yi.publish,async()=>{s(await this.deleteSession({topic:t,id:i}))})}),this.sendResult({id:i,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:mr("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),qe(this,"onSessionRequest",async t=>{var r,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=t,{id:h,params:d}=a;try{await this.isValidRequest(ur({topic:o},d));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Cc(JSON.stringify(rh("wc_sessionRequest",d,h))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),m={id:h,topic:o,params:d,verifyContext:p};await this.setPendingSessionRequest(m),u===hr.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=f.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(f){await this.sendError({id:h,topic:o,error:f}),this.client.logger.error(f)}}),qe(this,"onSessionRequestResponse",(t,r)=>{const{id:i}=r,s=Fn("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);bc(r)?this.events.emit(Fn("session_request",i),{result:r.result}):Go(r)&&this.events.emit(Fn("session_request",i),{error:r.error})}),qe(this,"onSessionEventRequest",async(t,r)=>{const{id:i,params:s}=r;try{const o=`${t}_session_event_${s.event.name}`,a=q1.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ur({topic:t},s)),this.client.events.emit("session_event",{id:i,topic:t,params:s}),q1.set(o,i)}catch(o){await this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}}),qe(this,"onSessionAuthenticateResponse",(t,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:r}),bc(r)?this.events.emit(Fn("session_request",i),{result:r.result}):Go(r)&&this.events.emit(Fn("session_request",i),{error:r.error})}),qe(this,"onSessionAuthenticateRequest",async t=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=t;try{const{requester:l,authPayload:u,expiryTimestamp:h}=s.params,d=await this.getVerifyContext({attestationId:o,hash:Cc(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:d,expiryTimestamp:h};await this.setAuthRequest(s.id,{request:f,pairingTopic:i,transportType:c}),c===hr.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:d})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),d=this.getAppLinkIfEnabled(s.params.requester.metadata,c),f={type:Fl,receiverPublicKey:u,senderPublicKey:h};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:f,rpcOpts:di.wc_sessionAuthenticate.autoReject,appLink:d})}}),qe(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),qe(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=dc.idle,this.processSessionRequestQueue()},et.toMiliseconds(this.requestQueueDelay))}),qe(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===t&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Fn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Fn("session_request",s.request.id),{error:r})})}),qe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===dc.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=dc.active,this.emitSessionRequest(t)}catch(r){this.client.logger.error(r)}}),qe(this,"emitSessionRequest",t=>{this.client.events.emit("session_request",t)}),qe(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===t.topic);r&&this.onSessionProposeRequest({topic:t.topic,payload:rh("wc_sessionPropose",zs(ur({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),qe(this,"isValidConnect",async t=>{if(!Gs(t)){const{message:l}=nt("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=t;if(Oi(r)||await this.isValidPairingTopic(r),!kme(c)){const{message:l}=nt("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Oi(i)&&fh(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(!Oi(s)&&fh(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Oi(o)||this.validateSessionProps(o,"sessionProperties"),!Oi(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),qe(this,"validateNamespaces",(t,r)=>{const i=Ome(t,"connect()",r);if(i)throw new Error(i.message)}),qe(this,"isValidApprove",async t=>{if(!Gs(t))throw new Error(nt("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=t;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=N6(i,"approve()");if(l)throw new Error(l.message);const u=rN(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!jr(s,!0)){const{message:h}=nt("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}if(Oi(o)||this.validateSessionProps(o,"sessionProperties"),!Oi(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(i));if(!Object.keys(a).every(d=>h.has(d)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),qe(this,"isValidReject",async t=>{if(!Gs(t)){const{message:s}=nt("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(s)}const{id:r,reason:i}=t;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Lme(i)){const{message:s}=nt("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),qe(this,"isValidSessionSettleRequest",t=>{if(!Gs(t)){const{message:l}=nt("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(l)}const{relay:r,controller:i,namespaces:s,expiry:o}=t;if(!sV(r)){const{message:l}=nt("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Tme(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=N6(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Vu(o)){const{message:l}=nt("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),qe(this,"isValidUpdate",async t=>{if(!Gs(t)){const{message:c}=nt("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(c)}const{topic:r,namespaces:i}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=N6(i,"update()");if(o)throw new Error(o.message);const a=rN(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),qe(this,"isValidExtend",async t=>{if(!Gs(t)){const{message:i}=nt("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(i)}const{topic:r}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),qe(this,"isValidRequest",async t=>{if(!Gs(t)){const{message:c}=nt("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(c)}const{topic:r,request:i,chainId:s,expiry:o}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!nN(a,s)){const{message:c}=nt("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!Ume(i)){const{message:c}=nt("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!$me(a,s,i.method)){const{message:c}=nt("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!Wme(o,$6)){const{message:c}=nt("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${$6.min} and ${$6.max}`);throw new Error(c)}}),qe(this,"isValidRespond",async t=>{var r;if(!Gs(t)){const{message:o}=nt("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}const{topic:i,response:s}=t;try{await this.isValidSessionTopic(i)}catch(o){throw(r=t?.response)!=null&&r.id&&this.cleanupAfterResponse(t),o}if(!Bme(s)){const{message:o}=nt("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),qe(this,"isValidPing",async t=>{if(!Gs(t)){const{message:i}=nt("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),qe(this,"isValidEmit",async t=>{if(!Gs(t)){const{message:a}=nt("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(a)}const{topic:r,event:i,chainId:s}=t;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!nN(o,s)){const{message:a}=nt("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Fme(i)){const{message:a}=nt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!zme(o,s,i.name)){const{message:a}=nt("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),qe(this,"isValidDisconnect",async t=>{if(!Gs(t)){const{message:i}=nt("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)}),qe(this,"isValidAuthenticate",t=>{const{chains:r,uri:i,domain:s,nonce:o}=t;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!jr(i,!1))throw new Error("uri is required parameter");if(!jr(s,!1))throw new Error("domain is required parameter");if(!jr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>c0(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=c0(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),qe(this,"getVerifyContext",async t=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:a}=t,c={verified:{verifyUrl:o.verifyUrl||lg,validation:"UNKNOWN",origin:o.url||""}};try{if(a===hr.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),qe(this,"validateSessionProps",(t,r)=>{Object.values(t).forEach((i,s)=>{if(i==null){const{message:o}=nt("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(t)[s]}`);throw new Error(o)}})}),qe(this,"getPendingAuthRequest",t=>{const r=this.client.auth.requests.get(t);return typeof r=="object"?r:void 0}),qe(this,"addToRecentlyDeleted",(t,r)=>{if(this.recentlyDeletedMap.set(t,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),qe(this,"checkRecentlyDeleted",t=>{const r=this.recentlyDeletedMap.get(t);if(r){const{message:i}=nt("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${t}`);throw new Error(i)}}),qe(this,"isLinkModeEnabled",(t,r)=>{var i,s,o,a,c,l,u,h,d;return!t||r!==hr.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=t?.redirect)==null?void 0:u.universal)!==void 0&&((h=t?.redirect)==null?void 0:h.universal)!==""&&((d=t?.redirect)==null?void 0:d.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),qe(this,"getAppLinkIfEnabled",(t,r)=>{var i;return this.isLinkModeEnabled(t,r)?(i=t?.redirect)==null?void 0:i.universal:void 0}),qe(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const r=gP(t,"topic")||"",i=decodeURIComponent(gP(t,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:hr.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),qe(this,"registerLinkModeListeners",async()=>{var t;if(t9()||Lh()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),qe(this,"getTVFParams",(t,r,i)=>{var s,o,a;if(!((s=r.request)!=null&&s.method))return{};const c={correlationId:t,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,i);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),qe(this,"isValidContractData",t=>{var r;if(!t)return!1;try{const i=t?.data||((r=t?.[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),qe(this,"extractTxHashesFromResult",(t,r)=>{var i;try{if(!r)return[];const s=t.method,o=Lve[s];if(s==="sui_signTransaction")return[f0e(r.transactionBytes)];if(s==="near_signTransaction")return[SP(r)];if(s==="near_signTransactions")return r.map(c=>SP(c));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=r.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[sge({transaction:t.params.transactionPayload,signature:r.signature})];if(s==="algo_signTxn")return $l(r)?r.map(c=>AP(c)):[AP(r)];if(s==="cosmos_signDirect")return[m0e(r)];if(typeof r=="string")return[r];const a=r[o.key];if($l(a))return s==="solana_signAllTransactions"?a.map(c=>d0e(c)):a;if(typeof a=="string")return[a]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(t))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=nt("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(yi.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:t,message:r,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(u3)?this.client.auth.authKeys.get(u3):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(t,r,{receiverPublicKey:o,encoding:s===hr.link_mode?Zu:La});g9(a)?(this.client.core.history.set(t,a),await this.onRelayEventRequest({topic:t,payload:a,attestation:i,transportType:s,encryptedId:Cc(r)})):q5(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:t,payload:a,transportType:s}),this.client.core.history.delete(t,a.id)):await this.onRelayEventUnknownPayload({topic:t,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(t,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(jo.expired,async e=>{const{topic:t,id:r}=fH(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,nt("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,nt("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(_d.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(_d.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!jr(e,!1)){const{message:t}=nt("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=nt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Vu(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=nt("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!jr(e,!1)){const{message:t}=nt("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=nt("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Vu(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=nt("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=nt("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(jr(e,!1)){const{message:t}=nt("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=nt("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!Dme(e)){const{message:t}=nt("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=nt("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Vu(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=nt("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class Xve extends Pf{constructor(e,t){super(e,t,Ove,y9),this.core=e,this.logger=t}}let Zve=class extends Pf{constructor(e,t){super(e,t,kve,y9),this.core=e,this.logger=t}};class Jve extends Pf{constructor(e,t){super(e,t,Uve,y9,r=>r.id),this.core=e,this.logger=t}}class Qve extends Pf{constructor(e,t){super(e,t,zve,G5,()=>u3),this.core=e,this.logger=t}}class e3e extends Pf{constructor(e,t){super(e,t,Hve,G5),this.core=e,this.logger=t}}class t3e extends Pf{constructor(e,t){super(e,t,Vve,G5,r=>r.id),this.core=e,this.logger=t}}var n3e=Object.defineProperty,r3e=(n,e,t)=>e in n?n3e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,z6=(n,e,t)=>r3e(n,typeof e!="symbol"?e+"":e,t);class i3e{constructor(e,t){this.core=e,this.logger=t,z6(this,"authKeys"),z6(this,"pairingTopics"),z6(this,"requests"),this.authKeys=new Qve(this.core,this.logger),this.pairingTopics=new e3e(this.core,this.logger),this.requests=new t3e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var s3e=Object.defineProperty,o3e=(n,e,t)=>e in n?s3e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yn=(n,e,t)=>o3e(n,typeof e!="symbol"?e+"":e,t);let a3e=class NV extends Tce{constructor(e){super(e),yn(this,"protocol",MV),yn(this,"version",RV),yn(this,"name",F6.name),yn(this,"metadata"),yn(this,"core"),yn(this,"logger"),yn(this,"events",new fa.EventEmitter),yn(this,"engine"),yn(this,"session"),yn(this,"proposal"),yn(this,"pendingRequest"),yn(this,"auth"),yn(this,"signConfig"),yn(this,"on",(r,i)=>this.events.on(r,i)),yn(this,"once",(r,i)=>this.events.once(r,i)),yn(this,"off",(r,i)=>this.events.off(r,i)),yn(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),yn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),yn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),yn(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),yn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),yn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||F6.name,this.metadata=spe(e?.metadata),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:xy(r1({level:e?.logger||F6.logger}));this.core=e?.core||new Nve(e),this.logger=ds(t,this.name),this.session=new Zve(this.core,this.logger),this.proposal=new Xve(this.core,this.logger),this.pendingRequest=new Jve(this.core,this.logger),this.engine=new Yve(this),this.auth=new i3e(this.core,this.logger)}static async init(e){const t=new NV(e);return await t.initialize(),t}get context(){return lo(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},et.toMiliseconds(et.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var kw={exports:{}},zN;function c3e(){return zN||(zN=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Sc<"u"&&Sc,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Sc<"u"&&Sc||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(S){return S&&DataView.prototype.isPrototypeOf(S)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(S){return S&&u.indexOf(Object.prototype.toString.call(S))>-1};function d(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(S)||S==="")throw new TypeError('Invalid character in header field name: "'+S+'"');return S.toLowerCase()}function f(S){return typeof S!="string"&&(S=String(S)),S}function p(S){var T={next:function(){var L=S.shift();return{done:L===void 0,value:L}}};return c.iterable&&(T[Symbol.iterator]=function(){return T}),T}function m(S){this.map={},S instanceof m?S.forEach(function(T,L){this.append(L,T)},this):Array.isArray(S)?S.forEach(function(T){if(T.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+T.length);this.append(T[0],T[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(T){this.append(T,S[T])},this)}m.prototype.append=function(S,T){S=d(S),T=f(T);var L=this.map[S];this.map[S]=L?L+", "+T:T},m.prototype.delete=function(S){delete this.map[d(S)]},m.prototype.get=function(S){return S=d(S),this.has(S)?this.map[S]:null},m.prototype.has=function(S){return this.map.hasOwnProperty(d(S))},m.prototype.set=function(S,T){this.map[d(S)]=f(T)},m.prototype.forEach=function(S,T){for(var L in this.map)this.map.hasOwnProperty(L)&&S.call(T,this.map[L],L,this)},m.prototype.keys=function(){var S=[];return this.forEach(function(T,L){S.push(L)}),p(S)},m.prototype.values=function(){var S=[];return this.forEach(function(T){S.push(T)}),p(S)},m.prototype.entries=function(){var S=[];return this.forEach(function(T,L){S.push([L,T])}),p(S)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function g(S){if(!S._noBody){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}}function y(S){return new Promise(function(T,L){S.onload=function(){T(S.result)},S.onerror=function(){L(S.error)}})}function b(S){var T=new FileReader,L=y(T);return T.readAsArrayBuffer(S),L}function w(S){var T=new FileReader,L=y(T),U=/charset=([A-Za-z0-9_-]+)/.exec(S.type),V=U?U[1]:"utf-8";return T.readAsText(S,V),L}function E(S){for(var T=new Uint8Array(S),L=new Array(T.length),U=0;U<T.length;U++)L[U]=String.fromCharCode(T[U]);return L.join("")}function x(S){if(S.slice)return S.slice(0);var T=new Uint8Array(S.byteLength);return T.set(new Uint8Array(S)),T.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(S){this.bodyUsed=this.bodyUsed,this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:c.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:c.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():c.arrayBuffer&&c.blob&&l(S)?(this._bodyArrayBuffer=x(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||h(S))?this._bodyArrayBuffer=x(S):this._bodyText=S=Object.prototype.toString.call(S):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var S=g(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var S=g(this);return S||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var S=g(this);if(S)return S;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}var R=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function k(S){var T=S.toUpperCase();return R.indexOf(T)>-1?T:S}function _(S,T){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T=T||{};var L=T.body;if(S instanceof _){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,T.headers||(this.headers=new m(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!L&&S._bodyInit!=null&&(L=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new m(T.headers)),this.method=k(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal||function(){if("AbortController"in a){var W=new AbortController;return W.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(T.cache==="no-store"||T.cache==="no-cache")){var U=/([?&])_=[^&]*/;if(U.test(this.url))this.url=this.url.replace(U,"$1_="+new Date().getTime());else{var V=/\?/;this.url+=(V.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function A(S){var T=new FormData;return S.trim().split("&").forEach(function(L){if(L){var U=L.split("="),V=U.shift().replace(/\+/g," "),W=U.join("=").replace(/\+/g," ");T.append(decodeURIComponent(V),decodeURIComponent(W))}}),T}function M(S){var T=new m,L=S.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(U){return U.indexOf(`
`)===0?U.substr(1,U.length):U}).forEach(function(U){var V=U.split(":"),W=V.shift().trim();if(W){var F=V.join(":").trim();try{T.append(W,F)}catch(I){console.warn("Response "+I.message)}}}),T}C.call(_.prototype);function D(S,T){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=T.statusText===void 0?"":""+T.statusText,this.headers=new m(T.headers),this.url=T.url||"",this._initBody(S)}C.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},D.error=function(){var S=new D(null,{status:200,statusText:""});return S.ok=!1,S.status=0,S.type="error",S};var P=[301,302,303,307,308];D.redirect=function(S,T){if(P.indexOf(T)===-1)throw new RangeError("Invalid status code");return new D(null,{status:T,headers:{location:S}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(T,L){this.message=T,this.name=L;var U=Error(T);this.stack=U.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function v(S,T){return new Promise(function(L,U){var V=new _(S,T);if(V.signal&&V.signal.aborted)return U(new o.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function F(){W.abort()}W.onload=function(){var $={statusText:W.statusText,headers:M(W.getAllResponseHeaders()||"")};V.url.indexOf("file://")===0&&(W.status<200||W.status>599)?$.status=200:$.status=W.status,$.url="responseURL"in W?W.responseURL:$.headers.get("X-Request-URL");var j="response"in W?W.response:W.responseText;setTimeout(function(){L(new D(j,$))},0)},W.onerror=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},W.ontimeout=function(){setTimeout(function(){U(new TypeError("Network request timed out"))},0)},W.onabort=function(){setTimeout(function(){U(new o.DOMException("Aborted","AbortError"))},0)};function I($){try{return $===""&&a.location.href?a.location.href:$}catch{return $}}if(W.open(V.method,I(V.url),!0),V.credentials==="include"?W.withCredentials=!0:V.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&(c.blob?W.responseType="blob":c.arrayBuffer&&(W.responseType="arraybuffer")),T&&typeof T.headers=="object"&&!(T.headers instanceof m||a.Headers&&T.headers instanceof a.Headers)){var N=[];Object.getOwnPropertyNames(T.headers).forEach(function($){N.push(d($)),W.setRequestHeader($,f(T.headers[$]))}),V.headers.forEach(function($,j){N.indexOf(j)===-1&&W.setRequestHeader(j,$)})}else V.headers.forEach(function($,j){W.setRequestHeader(j,$)});V.signal&&(V.signal.addEventListener("abort",F),W.onreadystatechange=function(){W.readyState===4&&V.signal.removeEventListener("abort",F)}),W.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return v.polyfill=!0,a.fetch||(a.fetch=v,a.Headers=m,a.Request=_,a.Response=D),o.Headers=m,o.Request=_,o.Response=D,o.fetch=v,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e}(kw,kw.exports)),kw.exports}var l3e=c3e();const HN=Sf(l3e);var u3e=Object.defineProperty,h3e=Object.defineProperties,d3e=Object.getOwnPropertyDescriptors,VN=Object.getOwnPropertySymbols,f3e=Object.prototype.hasOwnProperty,p3e=Object.prototype.propertyIsEnumerable,WN=(n,e,t)=>e in n?u3e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qN=(n,e)=>{for(var t in e||(e={}))f3e.call(e,t)&&WN(n,t,e[t]);if(VN)for(var t of VN(e))p3e.call(e,t)&&WN(n,t,e[t]);return n},jN=(n,e)=>h3e(n,d3e(e));const m3e={Accept:"application/json","Content-Type":"application/json"},g3e="POST",GN={headers:m3e,method:g3e},KN=10;let nc=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new fa.EventEmitter,this.isAvailable=!1,this.registering=!1,!uN(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Kl(e),r=await(await HN(this.url,jN(qN({},GN),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!uN(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Kl({id:1,jsonrpc:"2.0",method:"test",params:[]});await HN(e,jN(qN({},GN),{body:t}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?lf(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),s=W5(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return cV(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>KN&&this.events.setMaxListeners(KN)}};const YN="error",y3e="wss://relay.walletconnect.org",w3e="wc",v3e="universal_provider",Dw=`${w3e}@2:${v3e}:`,OV="https://rpc.walletconnect.org/v1/",Lp="generic",b3e=`${OV}bundler`,ma={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function w9(n){return n==null||typeof n!="object"&&typeof n!="function"}function kV(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function DV(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const _3e="[object RegExp]",LV="[object String]",UV="[object Number]",BV="[object Boolean]",FV="[object Arguments]",E3e="[object Symbol]",x3e="[object Date]",S3e="[object Map]",A3e="[object Set]",C3e="[object Array]",T3e="[object ArrayBuffer]",I3e="[object Object]",M3e="[object DataView]",R3e="[object Uint8Array]",P3e="[object Uint8ClampedArray]",N3e="[object Uint16Array]",O3e="[object Uint32Array]",k3e="[object Int8Array]",D3e="[object Int16Array]",L3e="[object Int32Array]",U3e="[object Float32Array]",B3e="[object Float64Array]";function v9(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function F3e(n,e){return qp(n,void 0,n,new Map,e)}function qp(n,e,t,r=new Map,i=void 0){const s=i?.(n,e,t,r);if(s!=null)return s;if(w9(n))return n;if(r.has(n))return r.get(n);if(Array.isArray(n)){const o=new Array(n.length);r.set(n,o);for(let a=0;a<n.length;a++)o[a]=qp(n[a],a,t,r,i);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;r.set(n,o);for(const[a,c]of n)o.set(a,qp(c,a,t,r,i));return o}if(n instanceof Set){const o=new Set;r.set(n,o);for(const a of n)o.add(qp(a,void 0,t,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(v9(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);r.set(n,o);for(let a=0;a<n.length;a++)o[a]=qp(n[a],a,t,r,i);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return r.set(n,o),Ed(o,n,t,r,i),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return r.set(n,o),Ed(o,n,t,r,i),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return r.set(n,o),Ed(o,n,t,r,i),o}if(n instanceof Error){const o=new n.constructor;return r.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,Ed(o,n,t,r,i),o}if(typeof n=="object"&&$3e(n)){const o=Object.create(Object.getPrototypeOf(n));return r.set(n,o),Ed(o,n,t,r,i),o}return n}function Ed(n,e,t=n,r,i){const s=[...Object.keys(e),...kV(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(n,a);(c==null||c.writable)&&(n[a]=qp(e[a],a,t,r,i))}}function $3e(n){switch(DV(n)){case FV:case C3e:case T3e:case M3e:case BV:case x3e:case U3e:case B3e:case k3e:case D3e:case L3e:case S3e:case UV:case I3e:case _3e:case A3e:case LV:case E3e:case R3e:case P3e:case N3e:case O3e:return!0;default:return!1}}function z3e(n,e){return F3e(n,(t,r,i,s)=>{if(typeof n=="object")switch(Object.prototype.toString.call(n)){case UV:case LV:case BV:{const o=new n.constructor(n?.valueOf());return Ed(o,n),o}case FV:{const o={};return Ed(o,n),o.length=n.length,o[Symbol.iterator]=n[Symbol.iterator],o}default:return}})}function XN(n){return z3e(n)}function ZN(n){return n!==null&&typeof n=="object"&&DV(n)==="[object Arguments]"}function JN(n){return typeof n=="object"&&n!==null}function H3e(){}function V3e(n){return v9(n)}function W3e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const t=n[Symbol.toStringTag];return t==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${t}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function q3e(n){if(w9(n))return n;if(Array.isArray(n)||v9(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const r=new t(n);return r.lastIndex=n.lastIndex,r}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const r=new t(n.message);return r.stack=n.stack,r.name=n.name,r.cause=n.cause,r}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const r=Object.create(e);return Object.assign(r,n)}return n}function j3e(n,...e){const t=e.slice(0,-1),r=e[e.length-1];let i=n;for(let s=0;s<t.length;s++){const o=t[s];i=wA(i,o,r,new Map)}return i}function wA(n,e,t,r){if(w9(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(r.has(e))return q3e(r.get(e));if(r.set(e,n),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...kV(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=n[o];if(ZN(a)&&(a={...a}),ZN(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=XN(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],h=Reflect.ownKeys(c);for(let d=0;d<h.length;d++){const f=h[d];u[f]=c[f]}c=u}else c=[];const l=t(c,a,o,n,e,r);l!=null?n[o]=l:Array.isArray(a)||JN(c)&&JN(a)?n[o]=wA(c,a,t,r):c==null&&W3e(a)?n[o]=wA({},a,t,r):c==null&&V3e(a)?n[o]=XN(a):(c===void 0||a!==void 0)&&(n[o]=a)}return n}function G3e(n,...e){return j3e(n,...e,H3e)}var K3e=Object.defineProperty,Y3e=Object.defineProperties,X3e=Object.getOwnPropertyDescriptors,QN=Object.getOwnPropertySymbols,Z3e=Object.prototype.hasOwnProperty,J3e=Object.prototype.propertyIsEnumerable,eO=(n,e,t)=>e in n?K3e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Lw=(n,e)=>{for(var t in e||(e={}))Z3e.call(e,t)&&eO(n,t,e[t]);if(QN)for(var t of QN(e))J3e.call(e,t)&&eO(n,t,e[t]);return n},Q3e=(n,e)=>Y3e(n,X3e(e));function Ro(n,e,t){var r;const i=c0(n);return((r=e.rpcMap)==null?void 0:r[i.reference])||`${OV}?chainId=${i.namespace}:${i.reference}&projectId=${t}`}function Nf(n){return n.includes(":")?n.split(":")[1]:n}function $V(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function ebe(n,e){const t=Object.keys(e.namespaces).filter(i=>i.includes(n));if(!t.length)return[];const r=[];return t.forEach(i=>{const s=e.namespaces[i].accounts;r.push(...s)}),r}function Uw(n={},e={}){const t=tO(n),r=tO(e);return G3e(t,r)}function tO(n){var e,t,r,i,s;const o={};if(!fh(n))return o;for(const[a,c]of Object.entries(n)){const l=H5(a)?[a]:c.chains,u=c.methods||[],h=c.events||[],d=c.rpcMap||{},f=Wp(a);o[f]=Q3e(Lw(Lw({},o[f]),c),{chains:kc(l,(e=o[f])==null?void 0:e.chains),methods:kc(u,(t=o[f])==null?void 0:t.methods),events:kc(h,(r=o[f])==null?void 0:r.events)}),(fh(d)||fh(((i=o[f])==null?void 0:i.rpcMap)||{}))&&(o[f].rpcMap=Lw(Lw({},d),(s=o[f])==null?void 0:s.rpcMap))}return o}function nO(n){return n.includes(":")?n.split(":")[2]:n}function rO(n){const e={};for(const[t,r]of Object.entries(n)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],a=H5(t)?[t]:r.chains?r.chains:$V(r.accounts);e[t]={chains:a,methods:i,events:s,accounts:o}}return e}function H6(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):(n=n.includes(":")?n.split(":")[1]:n,isNaN(Number(n))?n:Number(n))}const zV={},Nn=n=>zV[n],V6=(n,e)=>{zV[n]=e};var tbe=Object.defineProperty,nbe=(n,e,t)=>e in n?tbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,np=(n,e,t)=>nbe(n,typeof e!="symbol"?e+"":e,t);let rbe=class{constructor(e){np(this,"name","polkadot"),np(this,"client"),np(this,"httpProviders"),np(this,"events"),np(this,"namespace"),np(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Nf(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ro(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pa(new nc(r,Nn("disableProviderPing")))}};var ibe=Object.defineProperty,sbe=Object.defineProperties,obe=Object.getOwnPropertyDescriptors,iO=Object.getOwnPropertySymbols,abe=Object.prototype.hasOwnProperty,cbe=Object.prototype.propertyIsEnumerable,vA=(n,e,t)=>e in n?ibe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sO=(n,e)=>{for(var t in e||(e={}))abe.call(e,t)&&vA(n,t,e[t]);if(iO)for(var t of iO(e))cbe.call(e,t)&&vA(n,t,e[t]);return n},oO=(n,e)=>sbe(n,obe(e)),rp=(n,e,t)=>vA(n,typeof e!="symbol"?e+"":e,t);class lbe{constructor(e){rp(this,"name","eip155"),rp(this,"client"),rp(this,"chainId"),rp(this,"namespace"),rp(this,"httpProviders"),rp(this,"events"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||Ro(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pa(new nc(r,Nn("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=parseInt(Nf(t));e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let i=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,i,s,o;const a=(r=(t=e.request)==null?void 0:t.params)==null?void 0:r[0],c=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),h=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{};if(h!=null&&h[l])return h?.[l];const d=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:oO(sO({},u.sessionProperties||{}),{capabilities:oO(sO({},h||{}),{[l]:d})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return d}async getCallStatus(e){var t,r;const i=this.client.session.get(e.topic),s=(t=i.sessionProperties)==null?void 0:t.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(rh("eth_getUserOperationReceipt",[(r=t.request.params)==null?void 0:r[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,t){return`${b3e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var ube=Object.defineProperty,hbe=(n,e,t)=>e in n?ube(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ip=(n,e,t)=>hbe(n,typeof e!="symbol"?e+"":e,t);class dbe{constructor(e){ip(this,"name","solana"),ip(this,"client"),ip(this,"httpProviders"),ip(this,"events"),ip(this,"namespace"),ip(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Nf(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ro(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pa(new nc(r,Nn("disableProviderPing")))}}var fbe=Object.defineProperty,pbe=(n,e,t)=>e in n?fbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sp=(n,e,t)=>pbe(n,typeof e!="symbol"?e+"":e,t);let mbe=class{constructor(e){sp(this,"name","cosmos"),sp(this,"client"),sp(this,"httpProviders"),sp(this,"events"),sp(this,"namespace"),sp(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Nf(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ro(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pa(new nc(r,Nn("disableProviderPing")))}};var gbe=Object.defineProperty,ybe=(n,e,t)=>e in n?gbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,op=(n,e,t)=>ybe(n,typeof e!="symbol"?e+"":e,t);class wbe{constructor(e){op(this,"name","algorand"),op(this,"client"),op(this,"httpProviders"),op(this,"events"),op(this,"namespace"),op(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||Ro(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ro(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new pa(new nc(r,Nn("disableProviderPing")))}}var vbe=Object.defineProperty,bbe=(n,e,t)=>e in n?vbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ap=(n,e,t)=>bbe(n,typeof e!="symbol"?e+"":e,t);let _be=class{constructor(e){ap(this,"name","cip34"),ap(this,"client"),ap(this,"httpProviders"),ap(this,"events"),ap(this,"namespace"),ap(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const r=this.getCardanoRPCUrl(t),i=Nf(t);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pa(new nc(r,Nn("disableProviderPing")))}};var Ebe=Object.defineProperty,xbe=(n,e,t)=>e in n?Ebe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cp=(n,e,t)=>xbe(n,typeof e!="symbol"?e+"":e,t);class Sbe{constructor(e){cp(this,"name","elrond"),cp(this,"client"),cp(this,"httpProviders"),cp(this,"events"),cp(this,"namespace"),cp(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Nf(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ro(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pa(new nc(r,Nn("disableProviderPing")))}}var Abe=Object.defineProperty,Cbe=(n,e,t)=>e in n?Abe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lp=(n,e,t)=>Cbe(n,typeof e!="symbol"?e+"":e,t);class Tbe{constructor(e){lp(this,"name","multiversx"),lp(this,"client"),lp(this,"httpProviders"),lp(this,"events"),lp(this,"namespace"),lp(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Nf(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ro(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pa(new nc(r,Nn("disableProviderPing")))}}var Ibe=Object.defineProperty,Mbe=(n,e,t)=>e in n?Ibe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,up=(n,e,t)=>Mbe(n,typeof e!="symbol"?e+"":e,t);let Rbe=class{constructor(e){up(this,"name","near"),up(this,"client"),up(this,"httpProviders"),up(this,"events"),up(this,"namespace"),up(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Ro(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ro(e,this.namespace);return typeof r>"u"?void 0:new pa(new nc(r,Nn("disableProviderPing")))}};var Pbe=Object.defineProperty,Nbe=(n,e,t)=>e in n?Pbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hp=(n,e,t)=>Nbe(n,typeof e!="symbol"?e+"":e,t);class Obe{constructor(e){hp(this,"name","tezos"),hp(this,"client"),hp(this,"httpProviders"),hp(this,"events"),hp(this,"namespace"),hp(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Ro(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ro(e,this.namespace);return typeof r>"u"?void 0:new pa(new nc(r))}}var kbe=Object.defineProperty,Dbe=(n,e,t)=>e in n?kbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,dp=(n,e,t)=>Dbe(n,typeof e!="symbol"?e+"":e,t);class Lbe{constructor(e){dp(this,"name",Lp),dp(this,"client"),dp(this,"httpProviders"),dp(this,"events"),dp(this,"namespace"),dp(this,"chainId"),this.namespace=e.namespace,this.events=Nn("events"),this.client=Nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(ma.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const r={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(i=>{const s=c0(i);r[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Ro(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pa(new nc(r,Nn("disableProviderPing")))}}var Ube=Object.defineProperty,Bbe=Object.defineProperties,Fbe=Object.getOwnPropertyDescriptors,aO=Object.getOwnPropertySymbols,$be=Object.prototype.hasOwnProperty,zbe=Object.prototype.propertyIsEnumerable,bA=(n,e,t)=>e in n?Ube(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Bw=(n,e)=>{for(var t in e||(e={}))$be.call(e,t)&&bA(n,t,e[t]);if(aO)for(var t of aO(e))zbe.call(e,t)&&bA(n,t,e[t]);return n},W6=(n,e)=>Bbe(n,Fbe(e)),Ho=(n,e,t)=>bA(n,typeof e!="symbol"?e+"":e,t);let Hbe=class HV{constructor(e){Ho(this,"client"),Ho(this,"namespaces"),Ho(this,"optionalNamespaces"),Ho(this,"sessionProperties"),Ho(this,"scopedProperties"),Ho(this,"events",new H7),Ho(this,"rpcProviders",{}),Ho(this,"session"),Ho(this,"providerOpts"),Ho(this,"logger"),Ho(this,"uri"),Ho(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:xy(r1({level:e?.logger||YN})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new HV(e);return await t.initialize(),t}async request(e,t,r){const[i,s]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Bw({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,i){const s=new Date().getTime();this.request(e,r,i).then(o=>t(null,V5(s,o))).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:mr("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const s=await i();if(this.session=s.session,this.session){const o=rO(this.session.namespaces);this.namespaces=Uw(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const i=await r();this.session=i;const s=rO(i.namespaces);return this.namespaces=Uw(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,i]=this.validateChain(e),s=this.getProvider(r);s.name===Lp?s.setDefaultChain(`${r}:${i}`,t):s.setDefaultChain(i,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if($l(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await a3e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||YN,relayUrl:this.providerOpts.relayUrl||y3e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Wp(t)))];V6("client",this.client),V6("events",this.events),V6("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const r=ebe(t,this.session),i=$V(r),s=Uw(this.namespaces,this.optionalNamespaces),o=W6(Bw({},s[t]),{accounts:r,chains:i});switch(t){case"eip155":this.rpcProviders[t]=new lbe({namespace:o});break;case"algorand":this.rpcProviders[t]=new wbe({namespace:o});break;case"solana":this.rpcProviders[t]=new dbe({namespace:o});break;case"cosmos":this.rpcProviders[t]=new mbe({namespace:o});break;case"polkadot":this.rpcProviders[t]=new rbe({namespace:o});break;case"cip34":this.rpcProviders[t]=new _be({namespace:o});break;case"elrond":this.rpcProviders[t]=new Sbe({namespace:o});break;case"multiversx":this.rpcProviders[t]=new Tbe({namespace:o});break;case"near":this.rpcProviders[t]=new Rbe({namespace:o});break;case"tezos":this.rpcProviders[t]=new Obe({namespace:o});break;default:this.rpcProviders[Lp]?this.rpcProviders[Lp].updateNamespace(o):this.rpcProviders[Lp]=new Lbe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:r}=e;r===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:r,topic:i}=e;if(i!==((t=this.session)==null?void 0:t.topic))return;const{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&$l(o)&&this.events.emit("accountsChanged",o.map(nO))}else if(s.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Wp(o),l=H6(o)!==H6(a)?`${c}:${H6(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,i;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:s}=t,o=(i=this.client)==null?void 0:i.session.get(e);this.session=W6(Bw({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",W6(Bw({},mr("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ma.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Lp]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=Uw(t,r),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(o=>Wp(o)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const i=Wp(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);const s=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:s,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var i,s;try{if(t===r)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(nO);if(!$l(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,i={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Dw}/${e}${i}`,t)}async getFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${Dw}/${e}${r}`)}async deleteFromStore(e){var t;const r=((t=this.session)==null?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${Dw}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const r of t)r.startsWith(Dw)&&await this.client.core.storage.removeItem(r)}catch(t){this.logger.warn("Failed to cleanup storage",t)}}},Xh=null;const xo={getSIWX(){return Fe.state.siwx},async initializeIfEnabled(){const n=Fe.state.siwx,e=ee.getActiveCaipAddress();if(!(n&&e))return;const[t,r,i]=e.split(":");if(ee.checkIfSupportedNetwork(t))try{if(Xh&&await Xh,(await n.getSessions(`${t}:${r}`,i)).length)return;await Rn.open({view:"SIWXSignMessage"})}catch(s){console.error("SIWXUtil:initializeIfEnabled",s),qn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await ct._getClient()?.disconnect().catch(console.error),Wt.reset("Connect"),Ic.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const n=Fe.state.siwx,e=_t.getPlainAddress(ee.getActiveCaipAddress()),t=ee.getActiveCaipNetwork(),r=ct._getClient();if(!n)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!t)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const i=await n.createMessage({chainId:t.caipNetworkId,accountAddress:e}),s=i.toString();rt.getConnectorId(t.chainNamespace)===_e.CONNECTOR_ID.AUTH&&Wt.pushTransactionStack({});const a=await r.signMessage(s);await n.addSession({data:i,message:s,signature:a}),ee.setLastConnectedSIWECaipNetwork(t),Rn.close(),qn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const s=this.getSIWXEventProperties();(!Rn.state.open||Wt.state.view==="ApproveTransaction")&&await Rn.open({view:"SIWXSignMessage"}),Ic.showError("Error signing message"),qn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){try{const n=this.getSIWX();if(n?.getRequired?.()){const t=ee.getLastConnectedSIWECaipNetwork();if(t){const r=await n?.getSessions(t?.caipNetworkId,_t.getPlainAddress(ee.getActiveCaipAddress())||"");r&&r.length>0?await ee.switchActiveNetwork(t):await ct.disconnect()}else await ct.disconnect()}else Rn.close();Rn.close(),qn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(n){console.error("SIWXUtil:cancelSignMessage",n)}},async getAllSessions(){const n=this.getSIWX(),e=ee.getAllRequestedCaipNetworks(),t=[];return await Promise.all(e.map(async r=>{const i=await n?.getSessions(r.caipNetworkId,_t.getPlainAddress(ee.getActiveCaipAddress())||"");i&&t.push(...i)})),t},async getSessions(){const n=Fe.state.siwx,e=_t.getPlainAddress(ee.getActiveCaipAddress()),t=ee.getActiveCaipNetwork();return n&&e&&t?n.getSessions(t.caipNetworkId,e):[]},async isSIWXCloseDisabled(){const n=this.getSIWX();if(n){const e=Wt.state.view==="ApproveTransaction",t=Wt.state.view==="SIWXSignMessage";if(e||t)return n.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:n,chainId:e,socialUri:t,preferredAccountType:r,chainNamespace:i}){const s=xo.getSIWX();if(!s||!i.includes(_e.CHAIN.EVM)){const l=await n.connect({chainId:e,socialUri:t,preferredAccountType:r});return{address:l.address,chainId:l.chainId,accounts:l.accounts}}const o=await s.createMessage({chainId:ee.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await n.connect({chainId:e,socialUri:t,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await xo.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(n,e,t){if(Xh)return Xh;const r=xo.getSIWX();return r?(Xh=r.addSession({data:n,message:e,signature:t}).finally(()=>{Xh=null}),Xh):Promise.resolve()},async universalProviderAuthenticate({universalProvider:n,chains:e,methods:t}){const r=xo.getSIWX(),i=new Set(e.map(a=>a.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const s=await r.createMessage({chainId:ee.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),o=await n.authenticate({nonce:s.nonce,domain:s.domain,uri:s.uri,exp:s.expirationTime,iat:s.issuedAt,nbf:s.notBefore,requestId:s.requestId,version:s.version,resources:s.resources,statement:s.statement,chainId:s.chainId,methods:t,chains:[s.chainId,...e.filter(a=>a!==s.chainId)]});if(Ic.showLoading("Authenticating...",{autoClose:!1}),At.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:o.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),o?.auths?.length){const a=o.auths.map(c=>{const l=n.client.formatAuthMessage({request:c.p,iss:c.p.iss});return{data:{...c.p,accountAddress:c.p.iss.split(":").slice(-1).join(""),chainId:c.p.iss.split(":").slice(2,4).join(":"),uri:c.p.aud,version:c.p.version||s.version,expirationTime:c.p.exp,issuedAt:c.p.iat,notBefore:c.p.nbf},message:l,signature:c.s.s,cacao:c}});try{await r.setSessions(a),qn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:xo.getSIWXEventProperties()})}catch(c){throw console.error("SIWX:universalProviderAuth - failed to set sessions",c),qn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:xo.getSIWXEventProperties()}),await n.disconnect().catch(console.error),c}finally{Ic.hide()}}return!0},getSIWXEventProperties(){const n=ee.state.activeChain;return{network:ee.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:Ms(n)===ai.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const n=this.getSIWX();n&&await n.setSessions([])}},dr={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},mi={ConnectorExplorerIds:{[_e.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[_e.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[_e.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[_e.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[_e.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[dr.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[dr.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[dr.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[dr.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[dr.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[dr.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[dr.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[dr.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[dr.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[dr.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[dr.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[_e.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[_e.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[_e.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[_e.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[_e.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[_e.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[_e.CONNECTOR_ID.INJECTED]:"Browser Wallet",[_e.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[_e.CONNECTOR_ID.COINBASE]:"Coinbase",[_e.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[_e.CONNECTOR_ID.LEDGER]:"Ledger",[_e.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[_e.CONNECTOR_ID.INJECTED]:"INJECTED",[_e.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[_e.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[_e.CONNECTOR_ID.AUTH]:"AUTH",[dr.CONNECTOR_TYPE_AUTH]:"AUTH"}},Kr={getCaipTokens(n){if(!n)return;const e={};return Object.entries(n).forEach(([t,r])=>{e[`${dr.EIP155}:${t}`]=r}),e},isLowerCaseMatch(n,e){return n?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const n=ee.state.activeChain;return _e.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>rt.getConnectorId(e)===_e.CONNECTOR_ID.AUTH&&e===n)},withRetry({conditionFn:n,intervalMs:e,maxRetries:t}){let r=0;return new Promise(i=>{async function s(){return r+=1,await n()?i(!0):r>=t?i(!1):(setTimeout(s,e),null)}s()})}},Vbe=new AbortController,gr={EmbeddedWalletAbortController:Vbe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Wbe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:n=>`Failed to get App Configuration ${n||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function Wbe(){return typeof window<"u"}const qbe={createLogger(n,e="error"){const t=r1({level:e}),{logger:r}=W7({opts:t});return r.error=(...i)=>{for(const s of i)if(s instanceof Error){n(s,...i);return}n(void 0,...i)},r}},jbe="rpc.walletconnect.org";function cO(n,e){const t=new URL("https://rpc.walletconnect.org/v1/");return t.searchParams.set("chainId",n),t.searchParams.set("projectId",e),t.toString()}const q6=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Tc={extendRpcUrlWithProjectId(n,e){let t=!1;try{t=new URL(n).host===jbe}catch{t=!1}if(t){const r=new URL(n);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return n},isCaipNetwork(n){return"chainNamespace"in n&&"caipNetworkId"in n},getChainNamespace(n){return this.isCaipNetwork(n)?n.chainNamespace:_e.CHAIN.EVM},getCaipNetworkId(n){return this.isCaipNetwork(n)?n.caipNetworkId:`${_e.CHAIN.EVM}:${n.id}`},getDefaultRpcUrl(n,e,t){const r=n.rpcUrls?.default?.http?.[0];return q6.includes(e)?cO(e,t):r||""},extendCaipNetwork(n,{customNetworkImageUrls:e,projectId:t,customRpcUrls:r}){const i=this.getChainNamespace(n),s=this.getCaipNetworkId(n),o=n.rpcUrls.default.http?.[0],a=this.getDefaultRpcUrl(n,s,t),c=n?.rpcUrls?.chainDefault?.http?.[0]||o,l=r?.[s]?.map(d=>d.url)||[],u=[...l,a],h=[...l];return c&&!h.includes(c)&&h.push(c),{...n,chainNamespace:i,caipNetworkId:s,assets:{imageId:mi.NetworkImageIds[n.id],imageUrl:e?.[n.id]},rpcUrls:{...n.rpcUrls,default:{http:u},chainDefault:{http:h}}}},extendCaipNetworks(n,{customNetworkImageUrls:e,projectId:t,customRpcUrls:r}){return n.map(i=>Tc.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:r,projectId:t}))},getViemTransport(n,e,t){const r=[];return t?.forEach(i=>{r.push(ww(i.url,i.config))}),q6.includes(n.caipNetworkId)&&r.push(ww(cO(n.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),n?.rpcUrls?.default?.http?.forEach(i=>{r.push(ww(i))}),JM(r)},extendWagmiTransports(n,e,t){if(q6.includes(n.caipNetworkId)){const r=this.getDefaultRpcUrl(n,n.caipNetworkId,e);return JM([t,ww(r)])}return t},getUnsupportedNetwork(n){return{id:n.split(":")[1],caipNetworkId:n,name:_e.UNSUPPORTED_NETWORK_NAME,chainNamespace:n.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(n){const e=je.getActiveCaipNetworkId(),t=ee.getAllRequestedCaipNetworks(),r=Array.from(ee.state.chains?.keys()||[]),i=e?.split(":")[0],s=i?r.includes(i):!1,o=t?.find(c=>c.caipNetworkId===e);return s&&!o&&e?this.getUnsupportedNetwork(e):o||n||t?.[0]}},xb={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Hs=Qn({providers:{...xb},providerIds:{...xb}}),kn={state:Hs,subscribeKey(n,e){return Ei(Hs,n,e)},subscribe(n){return _i(Hs,()=>{n(Hs)})},subscribeProviders(n){return _i(Hs.providers,()=>n(Hs.providers))},setProvider(n,e){e&&(Hs.providers[n]=_h(e))},getProvider(n){return Hs.providers[n]},setProviderId(n,e){e&&(Hs.providerIds[n]=e)},getProviderId(n){if(n)return Hs.providerIds[n]},reset(){Hs.providers={...xb},Hs.providerIds={...xb}},resetChain(n){Hs.providers[n]=void 0,Hs.providerIds[n]=void 0}};var j6={},X1={},lO;function Gbe(){if(lO)return X1;lO=1,X1.byteLength=a,X1.toByteArray=l,X1.fromByteArray=d;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function o(f){var p=f.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=f.indexOf("=");m===-1&&(m=p);var g=m===p?0:4-m%4;return[m,g]}function a(f){var p=o(f),m=p[0],g=p[1];return(m+g)*3/4-g}function c(f,p,m){return(p+m)*3/4-m}function l(f){var p,m=o(f),g=m[0],y=m[1],b=new t(c(f,g,y)),w=0,E=y>0?g-4:g,x;for(x=0;x<E;x+=4)p=e[f.charCodeAt(x)]<<18|e[f.charCodeAt(x+1)]<<12|e[f.charCodeAt(x+2)]<<6|e[f.charCodeAt(x+3)],b[w++]=p>>16&255,b[w++]=p>>8&255,b[w++]=p&255;return y===2&&(p=e[f.charCodeAt(x)]<<2|e[f.charCodeAt(x+1)]>>4,b[w++]=p&255),y===1&&(p=e[f.charCodeAt(x)]<<10|e[f.charCodeAt(x+1)]<<4|e[f.charCodeAt(x+2)]>>2,b[w++]=p>>8&255,b[w++]=p&255),b}function u(f){return n[f>>18&63]+n[f>>12&63]+n[f>>6&63]+n[f&63]}function h(f,p,m){for(var g,y=[],b=p;b<m;b+=3)g=(f[b]<<16&16711680)+(f[b+1]<<8&65280)+(f[b+2]&255),y.push(u(g));return y.join("")}function d(f){for(var p,m=f.length,g=m%3,y=[],b=16383,w=0,E=m-g;w<E;w+=b)y.push(h(f,w,w+b>E?E:w+b));return g===1?(p=f[m-1],y.push(n[p>>2]+n[p<<4&63]+"==")):g===2&&(p=(f[m-2]<<8)+f[m-1],y.push(n[p>>10]+n[p>>4&63]+n[p<<2&63]+"=")),y.join("")}return X1}var Fw={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var uO;function Kbe(){return uO||(uO=1,Fw.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,h=t?i-1:0,d=t?-1:1,f=n[e+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=s*256+n[e+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+n[e+h],h+=d,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-l}return(f?-1:1)*o*Math.pow(2,s-r)},Fw.write=function(n,e,t,r,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,h=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=d/c:e+=d*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*c-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;n[t+f]=a&255,f+=p,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;n[t+f]=o&255,f+=p,o/=256,l-=8);n[t+f-p]|=m*128}),Fw}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hO;function b9(){return hO||(hO=1,function(n){const e=Gbe(),t=Kbe(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=b,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const z=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(z,O),z.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(z){if(z>i)throw new RangeError('The value "'+z+'" is invalid for option "size"');const O=new Uint8Array(z);return Object.setPrototypeOf(O,a.prototype),O}function a(z,O,B){if(typeof z=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(z)}return c(z,O,B)}a.poolSize=8192;function c(z,O,B){if(typeof z=="string")return d(z,O);if(ArrayBuffer.isView(z))return p(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(De(z,ArrayBuffer)||z&&De(z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(z,SharedArrayBuffer)||z&&De(z.buffer,SharedArrayBuffer)))return m(z,O,B);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const G=z.valueOf&&z.valueOf();if(G!=null&&G!==z)return a.from(G,O,B);const re=g(z);if(re)return re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return a.from(z[Symbol.toPrimitive]("string"),O,B);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}a.from=function(z,O,B){return c(z,O,B)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function u(z,O,B){return l(z),z<=0?o(z):O!==void 0?typeof B=="string"?o(z).fill(O,B):o(z).fill(O):o(z)}a.alloc=function(z,O,B){return u(z,O,B)};function h(z){return l(z),o(z<0?0:y(z)|0)}a.allocUnsafe=function(z){return h(z)},a.allocUnsafeSlow=function(z){return h(z)};function d(z,O){if((typeof O!="string"||O==="")&&(O="utf8"),!a.isEncoding(O))throw new TypeError("Unknown encoding: "+O);const B=w(z,O)|0;let G=o(B);const re=G.write(z,O);return re!==B&&(G=G.slice(0,re)),G}function f(z){const O=z.length<0?0:y(z.length)|0,B=o(O);for(let G=0;G<O;G+=1)B[G]=z[G]&255;return B}function p(z){if(De(z,Uint8Array)){const O=new Uint8Array(z);return m(O.buffer,O.byteOffset,O.byteLength)}return f(z)}function m(z,O,B){if(O<0||z.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<O+(B||0))throw new RangeError('"length" is outside of buffer bounds');let G;return O===void 0&&B===void 0?G=new Uint8Array(z):B===void 0?G=new Uint8Array(z,O):G=new Uint8Array(z,O,B),Object.setPrototypeOf(G,a.prototype),G}function g(z){if(a.isBuffer(z)){const O=y(z.length)|0,B=o(O);return B.length===0||z.copy(B,0,0,O),B}if(z.length!==void 0)return typeof z.length!="number"||K(z.length)?o(0):f(z);if(z.type==="Buffer"&&Array.isArray(z.data))return f(z.data)}function y(z){if(z>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return z|0}function b(z){return+z!=z&&(z=0),a.alloc(+z)}a.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==a.prototype},a.compare=function(O,B){if(De(O,Uint8Array)&&(O=a.from(O,O.offset,O.byteLength)),De(B,Uint8Array)&&(B=a.from(B,B.offset,B.byteLength)),!a.isBuffer(O)||!a.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===B)return 0;let G=O.length,re=B.length;for(let ae=0,se=Math.min(G,re);ae<se;++ae)if(O[ae]!==B[ae]){G=O[ae],re=B[ae];break}return G<re?-1:re<G?1:0},a.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(O,B){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return a.alloc(0);let G;if(B===void 0)for(B=0,G=0;G<O.length;++G)B+=O[G].length;const re=a.allocUnsafe(B);let ae=0;for(G=0;G<O.length;++G){let se=O[G];if(De(se,Uint8Array))ae+se.length>re.length?(a.isBuffer(se)||(se=a.from(se)),se.copy(re,ae)):Uint8Array.prototype.set.call(re,se,ae);else if(a.isBuffer(se))se.copy(re,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=se.length}return re};function w(z,O){if(a.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||De(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const B=z.length,G=arguments.length>2&&arguments[2]===!0;if(!G&&B===0)return 0;let re=!1;for(;;)switch(O){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return Q(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B*2;case"hex":return B>>>1;case"base64":return fe(z).length;default:if(re)return G?-1:Q(z).length;O=(""+O).toLowerCase(),re=!0}}a.byteLength=w;function E(z,O,B){let G=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((B===void 0||B>this.length)&&(B=this.length),B<=0)||(B>>>=0,O>>>=0,B<=O))return"";for(z||(z="utf8");;)switch(z){case"hex":return V(this,O,B);case"utf8":case"utf-8":return v(this,O,B);case"ascii":return L(this,O,B);case"latin1":case"binary":return U(this,O,B);case"base64":return P(this,O,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,O,B);default:if(G)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),G=!0}}a.prototype._isBuffer=!0;function x(z,O,B){const G=z[O];z[O]=z[B],z[B]=G}a.prototype.swap16=function(){const O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let B=0;B<O;B+=2)x(this,B,B+1);return this},a.prototype.swap32=function(){const O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let B=0;B<O;B+=4)x(this,B,B+3),x(this,B+1,B+2);return this},a.prototype.swap64=function(){const O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let B=0;B<O;B+=8)x(this,B,B+7),x(this,B+1,B+6),x(this,B+2,B+5),x(this,B+3,B+4);return this},a.prototype.toString=function(){const O=this.length;return O===0?"":arguments.length===0?v(this,0,O):E.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(O){if(!a.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:a.compare(this,O)===0},a.prototype.inspect=function(){let O="";const B=n.INSPECT_MAX_BYTES;return O=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(O+=" ... "),"<Buffer "+O+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(O,B,G,re,ae){if(De(O,Uint8Array)&&(O=a.from(O,O.offset,O.byteLength)),!a.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(B===void 0&&(B=0),G===void 0&&(G=O?O.length:0),re===void 0&&(re=0),ae===void 0&&(ae=this.length),B<0||G>O.length||re<0||ae>this.length)throw new RangeError("out of range index");if(re>=ae&&B>=G)return 0;if(re>=ae)return-1;if(B>=G)return 1;if(B>>>=0,G>>>=0,re>>>=0,ae>>>=0,this===O)return 0;let se=ae-re,Le=G-B;const ze=Math.min(se,Le),Be=this.slice(re,ae),He=O.slice(B,G);for(let Ye=0;Ye<ze;++Ye)if(Be[Ye]!==He[Ye]){se=Be[Ye],Le=He[Ye];break}return se<Le?-1:Le<se?1:0};function C(z,O,B,G,re){if(z.length===0)return-1;if(typeof B=="string"?(G=B,B=0):B>2147483647?B=2147483647:B<-2147483648&&(B=-2147483648),B=+B,K(B)&&(B=re?0:z.length-1),B<0&&(B=z.length+B),B>=z.length){if(re)return-1;B=z.length-1}else if(B<0)if(re)B=0;else return-1;if(typeof O=="string"&&(O=a.from(O,G)),a.isBuffer(O))return O.length===0?-1:R(z,O,B,G,re);if(typeof O=="number")return O=O&255,typeof Uint8Array.prototype.indexOf=="function"?re?Uint8Array.prototype.indexOf.call(z,O,B):Uint8Array.prototype.lastIndexOf.call(z,O,B):R(z,[O],B,G,re);throw new TypeError("val must be string, number or Buffer")}function R(z,O,B,G,re){let ae=1,se=z.length,Le=O.length;if(G!==void 0&&(G=String(G).toLowerCase(),G==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(z.length<2||O.length<2)return-1;ae=2,se/=2,Le/=2,B/=2}function ze(He,Ye){return ae===1?He[Ye]:He.readUInt16BE(Ye*ae)}let Be;if(re){let He=-1;for(Be=B;Be<se;Be++)if(ze(z,Be)===ze(O,He===-1?0:Be-He)){if(He===-1&&(He=Be),Be-He+1===Le)return He*ae}else He!==-1&&(Be-=Be-He),He=-1}else for(B+Le>se&&(B=se-Le),Be=B;Be>=0;Be--){let He=!0;for(let Ye=0;Ye<Le;Ye++)if(ze(z,Be+Ye)!==ze(O,Ye)){He=!1;break}if(He)return Be}return-1}a.prototype.includes=function(O,B,G){return this.indexOf(O,B,G)!==-1},a.prototype.indexOf=function(O,B,G){return C(this,O,B,G,!0)},a.prototype.lastIndexOf=function(O,B,G){return C(this,O,B,G,!1)};function k(z,O,B,G){B=Number(B)||0;const re=z.length-B;G?(G=Number(G),G>re&&(G=re)):G=re;const ae=O.length;G>ae/2&&(G=ae/2);let se;for(se=0;se<G;++se){const Le=parseInt(O.substr(se*2,2),16);if(K(Le))return se;z[B+se]=Le}return se}function _(z,O,B,G){return me(Q(O,z.length-B),z,B,G)}function A(z,O,B,G){return me(ie(O),z,B,G)}function M(z,O,B,G){return me(fe(O),z,B,G)}function D(z,O,B,G){return me(xe(O,z.length-B),z,B,G)}a.prototype.write=function(O,B,G,re){if(B===void 0)re="utf8",G=this.length,B=0;else if(G===void 0&&typeof B=="string")re=B,G=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(G)?(G=G>>>0,re===void 0&&(re="utf8")):(re=G,G=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-B;if((G===void 0||G>ae)&&(G=ae),O.length>0&&(G<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");let se=!1;for(;;)switch(re){case"hex":return k(this,O,B,G);case"utf8":case"utf-8":return _(this,O,B,G);case"ascii":case"latin1":case"binary":return A(this,O,B,G);case"base64":return M(this,O,B,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,O,B,G);default:if(se)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),se=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(z,O,B){return O===0&&B===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(O,B))}function v(z,O,B){B=Math.min(z.length,B);const G=[];let re=O;for(;re<B;){const ae=z[re];let se=null,Le=ae>239?4:ae>223?3:ae>191?2:1;if(re+Le<=B){let ze,Be,He,Ye;switch(Le){case 1:ae<128&&(se=ae);break;case 2:ze=z[re+1],(ze&192)===128&&(Ye=(ae&31)<<6|ze&63,Ye>127&&(se=Ye));break;case 3:ze=z[re+1],Be=z[re+2],(ze&192)===128&&(Be&192)===128&&(Ye=(ae&15)<<12|(ze&63)<<6|Be&63,Ye>2047&&(Ye<55296||Ye>57343)&&(se=Ye));break;case 4:ze=z[re+1],Be=z[re+2],He=z[re+3],(ze&192)===128&&(Be&192)===128&&(He&192)===128&&(Ye=(ae&15)<<18|(ze&63)<<12|(Be&63)<<6|He&63,Ye>65535&&Ye<1114112&&(se=Ye))}}se===null?(se=65533,Le=1):se>65535&&(se-=65536,G.push(se>>>10&1023|55296),se=56320|se&1023),G.push(se),re+=Le}return T(G)}const S=4096;function T(z){const O=z.length;if(O<=S)return String.fromCharCode.apply(String,z);let B="",G=0;for(;G<O;)B+=String.fromCharCode.apply(String,z.slice(G,G+=S));return B}function L(z,O,B){let G="";B=Math.min(z.length,B);for(let re=O;re<B;++re)G+=String.fromCharCode(z[re]&127);return G}function U(z,O,B){let G="";B=Math.min(z.length,B);for(let re=O;re<B;++re)G+=String.fromCharCode(z[re]);return G}function V(z,O,B){const G=z.length;(!O||O<0)&&(O=0),(!B||B<0||B>G)&&(B=G);let re="";for(let ae=O;ae<B;++ae)re+=q[z[ae]];return re}function W(z,O,B){const G=z.slice(O,B);let re="";for(let ae=0;ae<G.length-1;ae+=2)re+=String.fromCharCode(G[ae]+G[ae+1]*256);return re}a.prototype.slice=function(O,B){const G=this.length;O=~~O,B=B===void 0?G:~~B,O<0?(O+=G,O<0&&(O=0)):O>G&&(O=G),B<0?(B+=G,B<0&&(B=0)):B>G&&(B=G),B<O&&(B=O);const re=this.subarray(O,B);return Object.setPrototypeOf(re,a.prototype),re};function F(z,O,B){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+O>B)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(O,B,G){O=O>>>0,B=B>>>0,G||F(O,B,this.length);let re=this[O],ae=1,se=0;for(;++se<B&&(ae*=256);)re+=this[O+se]*ae;return re},a.prototype.readUintBE=a.prototype.readUIntBE=function(O,B,G){O=O>>>0,B=B>>>0,G||F(O,B,this.length);let re=this[O+--B],ae=1;for(;B>0&&(ae*=256);)re+=this[O+--B]*ae;return re},a.prototype.readUint8=a.prototype.readUInt8=function(O,B){return O=O>>>0,B||F(O,1,this.length),this[O]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(O,B){return O=O>>>0,B||F(O,2,this.length),this[O]|this[O+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(O,B){return O=O>>>0,B||F(O,2,this.length),this[O]<<8|this[O+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(O,B){return O=O>>>0,B||F(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(O,B){return O=O>>>0,B||F(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},a.prototype.readBigUInt64LE=he(function(O){O=O>>>0,Z(O,"offset");const B=this[O],G=this[O+7];(B===void 0||G===void 0)&&H(O,this.length-8);const re=B+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24,ae=this[++O]+this[++O]*2**8+this[++O]*2**16+G*2**24;return BigInt(re)+(BigInt(ae)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(O){O=O>>>0,Z(O,"offset");const B=this[O],G=this[O+7];(B===void 0||G===void 0)&&H(O,this.length-8);const re=B*2**24+this[++O]*2**16+this[++O]*2**8+this[++O],ae=this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+G;return(BigInt(re)<<BigInt(32))+BigInt(ae)}),a.prototype.readIntLE=function(O,B,G){O=O>>>0,B=B>>>0,G||F(O,B,this.length);let re=this[O],ae=1,se=0;for(;++se<B&&(ae*=256);)re+=this[O+se]*ae;return ae*=128,re>=ae&&(re-=Math.pow(2,8*B)),re},a.prototype.readIntBE=function(O,B,G){O=O>>>0,B=B>>>0,G||F(O,B,this.length);let re=B,ae=1,se=this[O+--re];for(;re>0&&(ae*=256);)se+=this[O+--re]*ae;return ae*=128,se>=ae&&(se-=Math.pow(2,8*B)),se},a.prototype.readInt8=function(O,B){return O=O>>>0,B||F(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},a.prototype.readInt16LE=function(O,B){O=O>>>0,B||F(O,2,this.length);const G=this[O]|this[O+1]<<8;return G&32768?G|4294901760:G},a.prototype.readInt16BE=function(O,B){O=O>>>0,B||F(O,2,this.length);const G=this[O+1]|this[O]<<8;return G&32768?G|4294901760:G},a.prototype.readInt32LE=function(O,B){return O=O>>>0,B||F(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},a.prototype.readInt32BE=function(O,B){return O=O>>>0,B||F(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},a.prototype.readBigInt64LE=he(function(O){O=O>>>0,Z(O,"offset");const B=this[O],G=this[O+7];(B===void 0||G===void 0)&&H(O,this.length-8);const re=this[O+4]+this[O+5]*2**8+this[O+6]*2**16+(G<<24);return(BigInt(re)<<BigInt(32))+BigInt(B+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24)}),a.prototype.readBigInt64BE=he(function(O){O=O>>>0,Z(O,"offset");const B=this[O],G=this[O+7];(B===void 0||G===void 0)&&H(O,this.length-8);const re=(B<<24)+this[++O]*2**16+this[++O]*2**8+this[++O];return(BigInt(re)<<BigInt(32))+BigInt(this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+G)}),a.prototype.readFloatLE=function(O,B){return O=O>>>0,B||F(O,4,this.length),t.read(this,O,!0,23,4)},a.prototype.readFloatBE=function(O,B){return O=O>>>0,B||F(O,4,this.length),t.read(this,O,!1,23,4)},a.prototype.readDoubleLE=function(O,B){return O=O>>>0,B||F(O,8,this.length),t.read(this,O,!0,52,8)},a.prototype.readDoubleBE=function(O,B){return O=O>>>0,B||F(O,8,this.length),t.read(this,O,!1,52,8)};function I(z,O,B,G,re,ae){if(!a.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>re||O<ae)throw new RangeError('"value" argument is out of bounds');if(B+G>z.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(O,B,G,re){if(O=+O,B=B>>>0,G=G>>>0,!re){const Le=Math.pow(2,8*G)-1;I(this,O,B,G,Le,0)}let ae=1,se=0;for(this[B]=O&255;++se<G&&(ae*=256);)this[B+se]=O/ae&255;return B+G},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(O,B,G,re){if(O=+O,B=B>>>0,G=G>>>0,!re){const Le=Math.pow(2,8*G)-1;I(this,O,B,G,Le,0)}let ae=G-1,se=1;for(this[B+ae]=O&255;--ae>=0&&(se*=256);)this[B+ae]=O/se&255;return B+G},a.prototype.writeUint8=a.prototype.writeUInt8=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,1,255,0),this[B]=O&255,B+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,2,65535,0),this[B]=O&255,this[B+1]=O>>>8,B+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,2,65535,0),this[B]=O>>>8,this[B+1]=O&255,B+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,4,4294967295,0),this[B+3]=O>>>24,this[B+2]=O>>>16,this[B+1]=O>>>8,this[B]=O&255,B+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,4,4294967295,0),this[B]=O>>>24,this[B+1]=O>>>16,this[B+2]=O>>>8,this[B+3]=O&255,B+4};function N(z,O,B,G,re){X(O,G,re,z,B,7);let ae=Number(O&BigInt(4294967295));z[B++]=ae,ae=ae>>8,z[B++]=ae,ae=ae>>8,z[B++]=ae,ae=ae>>8,z[B++]=ae;let se=Number(O>>BigInt(32)&BigInt(4294967295));return z[B++]=se,se=se>>8,z[B++]=se,se=se>>8,z[B++]=se,se=se>>8,z[B++]=se,B}function $(z,O,B,G,re){X(O,G,re,z,B,7);let ae=Number(O&BigInt(4294967295));z[B+7]=ae,ae=ae>>8,z[B+6]=ae,ae=ae>>8,z[B+5]=ae,ae=ae>>8,z[B+4]=ae;let se=Number(O>>BigInt(32)&BigInt(4294967295));return z[B+3]=se,se=se>>8,z[B+2]=se,se=se>>8,z[B+1]=se,se=se>>8,z[B]=se,B+8}a.prototype.writeBigUInt64LE=he(function(O,B=0){return N(this,O,B,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(O,B=0){return $(this,O,B,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(O,B,G,re){if(O=+O,B=B>>>0,!re){const ze=Math.pow(2,8*G-1);I(this,O,B,G,ze-1,-ze)}let ae=0,se=1,Le=0;for(this[B]=O&255;++ae<G&&(se*=256);)O<0&&Le===0&&this[B+ae-1]!==0&&(Le=1),this[B+ae]=(O/se>>0)-Le&255;return B+G},a.prototype.writeIntBE=function(O,B,G,re){if(O=+O,B=B>>>0,!re){const ze=Math.pow(2,8*G-1);I(this,O,B,G,ze-1,-ze)}let ae=G-1,se=1,Le=0;for(this[B+ae]=O&255;--ae>=0&&(se*=256);)O<0&&Le===0&&this[B+ae+1]!==0&&(Le=1),this[B+ae]=(O/se>>0)-Le&255;return B+G},a.prototype.writeInt8=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,1,127,-128),O<0&&(O=255+O+1),this[B]=O&255,B+1},a.prototype.writeInt16LE=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,2,32767,-32768),this[B]=O&255,this[B+1]=O>>>8,B+2},a.prototype.writeInt16BE=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,2,32767,-32768),this[B]=O>>>8,this[B+1]=O&255,B+2},a.prototype.writeInt32LE=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,4,2147483647,-2147483648),this[B]=O&255,this[B+1]=O>>>8,this[B+2]=O>>>16,this[B+3]=O>>>24,B+4},a.prototype.writeInt32BE=function(O,B,G){return O=+O,B=B>>>0,G||I(this,O,B,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[B]=O>>>24,this[B+1]=O>>>16,this[B+2]=O>>>8,this[B+3]=O&255,B+4},a.prototype.writeBigInt64LE=he(function(O,B=0){return N(this,O,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(O,B=0){return $(this,O,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function j(z,O,B,G,re,ae){if(B+G>z.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function te(z,O,B,G,re){return O=+O,B=B>>>0,re||j(z,O,B,4),t.write(z,O,B,G,23,4),B+4}a.prototype.writeFloatLE=function(O,B,G){return te(this,O,B,!0,G)},a.prototype.writeFloatBE=function(O,B,G){return te(this,O,B,!1,G)};function ce(z,O,B,G,re){return O=+O,B=B>>>0,re||j(z,O,B,8),t.write(z,O,B,G,52,8),B+8}a.prototype.writeDoubleLE=function(O,B,G){return ce(this,O,B,!0,G)},a.prototype.writeDoubleBE=function(O,B,G){return ce(this,O,B,!1,G)},a.prototype.copy=function(O,B,G,re){if(!a.isBuffer(O))throw new TypeError("argument should be a Buffer");if(G||(G=0),!re&&re!==0&&(re=this.length),B>=O.length&&(B=O.length),B||(B=0),re>0&&re<G&&(re=G),re===G||O.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),O.length-B<re-G&&(re=O.length-B+G);const ae=re-G;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(B,G,re):Uint8Array.prototype.set.call(O,this.subarray(G,re),B),ae},a.prototype.fill=function(O,B,G,re){if(typeof O=="string"){if(typeof B=="string"?(re=B,B=0,G=this.length):typeof G=="string"&&(re=G,G=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!a.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(O.length===1){const se=O.charCodeAt(0);(re==="utf8"&&se<128||re==="latin1")&&(O=se)}}else typeof O=="number"?O=O&255:typeof O=="boolean"&&(O=Number(O));if(B<0||this.length<B||this.length<G)throw new RangeError("Out of range index");if(G<=B)return this;B=B>>>0,G=G===void 0?this.length:G>>>0,O||(O=0);let ae;if(typeof O=="number")for(ae=B;ae<G;++ae)this[ae]=O;else{const se=a.isBuffer(O)?O:a.from(O,re),Le=se.length;if(Le===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(ae=0;ae<G-B;++ae)this[ae+B]=se[ae%Le]}return this};const ve={};function Te(z,O,B){ve[z]=class extends B{constructor(){super(),Object.defineProperty(this,"message",{value:O.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:re,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(z,O){return`The "${z}" argument must be of type number. Received type ${typeof O}`},TypeError),Te("ERR_OUT_OF_RANGE",function(z,O,B){let G=`The value of "${z}" is out of range.`,re=B;return Number.isInteger(B)&&Math.abs(B)>2**32?re=$e(String(B)):typeof B=="bigint"&&(re=String(B),(B>BigInt(2)**BigInt(32)||B<-(BigInt(2)**BigInt(32)))&&(re=$e(re)),re+="n"),G+=` It must be ${O}. Received ${re}`,G},RangeError);function $e(z){let O="",B=z.length;const G=z[0]==="-"?1:0;for(;B>=G+4;B-=3)O=`_${z.slice(B-3,B)}${O}`;return`${z.slice(0,B)}${O}`}function pe(z,O,B){Z(O,"offset"),(z[O]===void 0||z[O+B]===void 0)&&H(O,z.length-(B+1))}function X(z,O,B,G,re,ae){if(z>B||z<O){const se=typeof O=="bigint"?"n":"";let Le;throw O===0||O===BigInt(0)?Le=`>= 0${se} and < 2${se} ** ${(ae+1)*8}${se}`:Le=`>= -(2${se} ** ${(ae+1)*8-1}${se}) and < 2 ** ${(ae+1)*8-1}${se}`,new ve.ERR_OUT_OF_RANGE("value",Le,z)}pe(G,re,ae)}function Z(z,O){if(typeof z!="number")throw new ve.ERR_INVALID_ARG_TYPE(O,"number",z)}function H(z,O,B){throw Math.floor(z)!==z?(Z(z,B),new ve.ERR_OUT_OF_RANGE("offset","an integer",z)):O<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${O}`,z)}const oe=/[^+/0-9A-Za-z-_]/g;function le(z){if(z=z.split("=")[0],z=z.trim().replace(oe,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function Q(z,O){O=O||1/0;let B;const G=z.length;let re=null;const ae=[];for(let se=0;se<G;++se){if(B=z.charCodeAt(se),B>55295&&B<57344){if(!re){if(B>56319){(O-=3)>-1&&ae.push(239,191,189);continue}else if(se+1===G){(O-=3)>-1&&ae.push(239,191,189);continue}re=B;continue}if(B<56320){(O-=3)>-1&&ae.push(239,191,189),re=B;continue}B=(re-55296<<10|B-56320)+65536}else re&&(O-=3)>-1&&ae.push(239,191,189);if(re=null,B<128){if((O-=1)<0)break;ae.push(B)}else if(B<2048){if((O-=2)<0)break;ae.push(B>>6|192,B&63|128)}else if(B<65536){if((O-=3)<0)break;ae.push(B>>12|224,B>>6&63|128,B&63|128)}else if(B<1114112){if((O-=4)<0)break;ae.push(B>>18|240,B>>12&63|128,B>>6&63|128,B&63|128)}else throw new Error("Invalid code point")}return ae}function ie(z){const O=[];for(let B=0;B<z.length;++B)O.push(z.charCodeAt(B)&255);return O}function xe(z,O){let B,G,re;const ae=[];for(let se=0;se<z.length&&!((O-=2)<0);++se)B=z.charCodeAt(se),G=B>>8,re=B%256,ae.push(re),ae.push(G);return ae}function fe(z){return e.toByteArray(le(z))}function me(z,O,B,G){let re;for(re=0;re<G&&!(re+B>=O.length||re>=z.length);++re)O[re+B]=z[re];return re}function De(z,O){return z instanceof O||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===O.name}function K(z){return z!==z}const q=function(){const z="0123456789abcdef",O=new Array(256);for(let B=0;B<16;++B){const G=B*16;for(let re=0;re<16;++re)O[G+re]=z[B]+z[re]}return O}();function he(z){return typeof BigInt>"u"?ge:z}function ge(){throw new Error("BigInt not supported")}}(j6)),j6}var un=b9();const dO={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ri={set(n,e){So.isClient&&localStorage.setItem(`${St.STORAGE_KEY}${n}`,e)},get(n){return So.isClient?localStorage.getItem(`${St.STORAGE_KEY}${n}`):null},delete(n,e){So.isClient&&(e?localStorage.removeItem(n):localStorage.removeItem(`${St.STORAGE_KEY}${n}`))}},$w=30*1e3,So={checkIfAllowedToTriggerEmail(){const n=Ri.get(St.LAST_EMAIL_LOGIN_TIME);if(n){const e=Date.now()-Number(n);if(e<$w){const t=Math.ceil(($w-e)/1e3);throw new Error(`Please try again after ${t} seconds`)}}},getTimeToNextEmailLogin(){const n=Ri.get(St.LAST_EMAIL_LOGIN_TIME);if(n){const e=Date.now()-Number(n);if(e<$w)return Math.ceil(($w-e)/1e3)}return 0},checkIfRequestExists(n){return ai.NOT_SAFE_RPC_METHODS.includes(n.method)||ai.SAFE_RPC_METHODS.includes(n.method)},getResponseType(n){return typeof n=="string"&&(n?.match(dO.transactionHash)||n?.match(dO.signedMessage))?St.RPC_RESPONSE_TYPE_TX:St.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(n){return ai.SAFE_RPC_METHODS.includes(n.method)},isClient:typeof window<"u"};var Pn;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},n.find=(i,s)=>{for(const o of i)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Pn||(Pn={}));var _A;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(_A||(_A={}));const yt=Pn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ju=n=>{switch(typeof n){case"undefined":return yt.undefined;case"string":return yt.string;case"number":return isNaN(n)?yt.nan:yt.number;case"boolean":return yt.boolean;case"function":return yt.function;case"bigint":return yt.bigint;case"symbol":return yt.symbol;case"object":return Array.isArray(n)?yt.array:n===null?yt.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?yt.promise:typeof Map<"u"&&n instanceof Map?yt.map:typeof Set<"u"&&n instanceof Set?yt.set:typeof Date<"u"&&n instanceof Date?yt.date:yt.object;default:return yt.unknown}},Xe=Pn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ybe=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Wa extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(t(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Wa.create=n=>new Wa(n);const b2=(n,e)=>{let t;switch(n.code){case Xe.invalid_type:n.received===yt.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Xe.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Pn.jsonStringifyReplacer)}`;break;case Xe.unrecognized_keys:t=`Unrecognized key(s) in object: ${Pn.joinValues(n.keys,", ")}`;break;case Xe.invalid_union:t="Invalid input";break;case Xe.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Pn.joinValues(n.options)}`;break;case Xe.invalid_enum_value:t=`Invalid enum value. Expected ${Pn.joinValues(n.options)}, received '${n.received}'`;break;case Xe.invalid_arguments:t="Invalid function arguments";break;case Xe.invalid_return_type:t="Invalid function return type";break;case Xe.invalid_date:t="Invalid date";break;case Xe.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Pn.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Xe.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Xe.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Xe.custom:t="Invalid input";break;case Xe.invalid_intersection_types:t="Intersection results could not be merged";break;case Xe.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Xe.not_finite:t="Number must be finite";break;default:t=e.defaultError,Pn.assertNever(n)}return{message:t}};let VV=b2;function Xbe(n){VV=n}function Sb(){return VV}const Ab=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],o={...i,path:s};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},Zbe=[];function Et(n,e){const t=Ab({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Sb(),b2].filter(r=>!!r)});n.common.issues.push(t)}class hs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return Jt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t)r.push({key:await i.key,value:await i.value});return hs.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Jt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Jt=Object.freeze({status:"aborted"}),WV=n=>({status:"dirty",value:n}),Ps=n=>({status:"valid",value:n}),EA=n=>n.status==="aborted",xA=n=>n.status==="dirty",_2=n=>n.status==="valid",Cb=n=>typeof Promise<"u"&&n instanceof Promise;var kt;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(kt||(kt={}));class Hc{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const fO=(n,e)=>{if(_2(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Wa(n.common.issues);return this._error=t,this._error}}};function sn(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:t??a.defaultError},description:i}}class hn{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ju(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ju(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new hs,ctx:{common:e.parent.common,data:e.data,parsedType:Ju(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Cb(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:(r=t?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ju(e)},s=this._parseSync({data:e,path:i.path,parent:i});return fO(i,s)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ju(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Cb(i)?i:Promise.resolve(i));return fO(r,s)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:Xe.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new Ka({schema:this,typeName:qt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return zl.create(this,this._def)}nullable(){return pf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qa.create(this,this._def)}promise(){return N0.create(this,this._def)}or(e){return A2.create([this,e],this._def)}and(e){return C2.create(this,e,this._def)}transform(e){return new Ka({...sn(this._def),schema:this,typeName:qt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new P2({...sn(this._def),innerType:this,defaultValue:t,typeName:qt.ZodDefault})}brand(){return new jV({typeName:qt.ZodBranded,type:this,...sn(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Rb({...sn(this._def),innerType:this,catchValue:t,typeName:qt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ny.create(this,e)}readonly(){return Nb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Jbe=/^c[^\s-]{8,}$/i,Qbe=/^[a-z][a-z0-9]*$/,e_e=/^[0-9A-HJKMNP-TV-Z]{26}$/,t_e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,n_e=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,r_e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let G6;const i_e=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,s_e=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,o_e=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function a_e(n,e){return!!((e==="v4"||!e)&&i_e.test(n)||(e==="v6"||!e)&&s_e.test(n))}class Ua extends hn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==yt.string){const s=this._getOrReturnCtx(e);return Et(s,{code:Xe.invalid_type,expected:yt.string,received:s.parsedType}),Jt}const r=new hs;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Et(i,{code:Xe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Et(i,{code:Xe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Et(i,{code:Xe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Et(i,{code:Xe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")n_e.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"email",code:Xe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")G6||(G6=new RegExp(r_e,"u")),G6.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"emoji",code:Xe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")t_e.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"uuid",code:Xe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")Jbe.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"cuid",code:Xe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")Qbe.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"cuid2",code:Xe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")e_e.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"ulid",code:Xe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Et(i,{validation:"url",code:Xe.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"regex",code:Xe.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Et(i,{code:Xe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Et(i,{code:Xe.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Et(i,{code:Xe.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?o_e(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Et(i,{code:Xe.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?a_e(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Et(i,{validation:"ip",code:Xe.invalid_string,message:s.message}),r.dirty()):Pn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:Xe.invalid_string,...kt.errToObj(r)})}_addCheck(e){return new Ua({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...kt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...kt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...kt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...kt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...kt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...kt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...kt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...kt.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,...kt.errToObj(e?.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...kt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...kt.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...kt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...kt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...kt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...kt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...kt.errToObj(t)})}nonempty(e){return this.min(1,kt.errToObj(e))}trim(){return new Ua({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ua({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ua({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ua.create=n=>{var e;return new Ua({checks:[],typeName:qt.ZodString,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...sn(n)})};function c_e(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,s=parseInt(n.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Ih extends hn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==yt.number){const s=this._getOrReturnCtx(e);return Et(s,{code:Xe.invalid_type,expected:yt.number,received:s.parsedType}),Jt}let r;const i=new hs;for(const s of this._def.checks)s.kind==="int"?Pn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Et(r,{code:Xe.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:Xe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:Xe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?c_e(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Et(r,{code:Xe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Et(r,{code:Xe.not_finite,message:s.message}),i.dirty()):Pn.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,kt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,kt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,kt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,kt.toString(t))}setLimit(e,t,r,i){return new Ih({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:kt.toString(i)}]})}_addCheck(e){return new Ih({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:kt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:kt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:kt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:kt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:kt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:kt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pn.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ih.create=n=>new Ih({checks:[],typeName:qt.ZodNumber,coerce:n?.coerce||!1,...sn(n)});class Mh extends hn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==yt.bigint){const s=this._getOrReturnCtx(e);return Et(s,{code:Xe.invalid_type,expected:yt.bigint,received:s.parsedType}),Jt}let r;const i=new hs;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:Xe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:Xe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Et(r,{code:Xe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Pn.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,kt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,kt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,kt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,kt.toString(t))}setLimit(e,t,r,i){return new Mh({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:kt.toString(i)}]})}_addCheck(e){return new Mh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:kt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:kt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Mh.create=n=>{var e;return new Mh({checks:[],typeName:qt.ZodBigInt,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...sn(n)})};class E2 extends hn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==yt.boolean){const r=this._getOrReturnCtx(e);return Et(r,{code:Xe.invalid_type,expected:yt.boolean,received:r.parsedType}),Jt}return Ps(e.data)}}E2.create=n=>new E2({typeName:qt.ZodBoolean,coerce:n?.coerce||!1,...sn(n)});class df extends hn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==yt.date){const s=this._getOrReturnCtx(e);return Et(s,{code:Xe.invalid_type,expected:yt.date,received:s.parsedType}),Jt}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Et(s,{code:Xe.invalid_date}),Jt}const r=new hs;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Et(i,{code:Xe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Et(i,{code:Xe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Pn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new df({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:kt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:kt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}df.create=n=>new df({checks:[],coerce:n?.coerce||!1,typeName:qt.ZodDate,...sn(n)});class Tb extends hn{_parse(e){if(this._getType(e)!==yt.symbol){const r=this._getOrReturnCtx(e);return Et(r,{code:Xe.invalid_type,expected:yt.symbol,received:r.parsedType}),Jt}return Ps(e.data)}}Tb.create=n=>new Tb({typeName:qt.ZodSymbol,...sn(n)});class x2 extends hn{_parse(e){if(this._getType(e)!==yt.undefined){const r=this._getOrReturnCtx(e);return Et(r,{code:Xe.invalid_type,expected:yt.undefined,received:r.parsedType}),Jt}return Ps(e.data)}}x2.create=n=>new x2({typeName:qt.ZodUndefined,...sn(n)});class S2 extends hn{_parse(e){if(this._getType(e)!==yt.null){const r=this._getOrReturnCtx(e);return Et(r,{code:Xe.invalid_type,expected:yt.null,received:r.parsedType}),Jt}return Ps(e.data)}}S2.create=n=>new S2({typeName:qt.ZodNull,...sn(n)});class P0 extends hn{constructor(){super(...arguments),this._any=!0}_parse(e){return Ps(e.data)}}P0.create=n=>new P0({typeName:qt.ZodAny,...sn(n)});class Gd extends hn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ps(e.data)}}Gd.create=n=>new Gd({typeName:qt.ZodUnknown,...sn(n)});class Zl extends hn{_parse(e){const t=this._getOrReturnCtx(e);return Et(t,{code:Xe.invalid_type,expected:yt.never,received:t.parsedType}),Jt}}Zl.create=n=>new Zl({typeName:qt.ZodNever,...sn(n)});class Ib extends hn{_parse(e){if(this._getType(e)!==yt.undefined){const r=this._getOrReturnCtx(e);return Et(r,{code:Xe.invalid_type,expected:yt.void,received:r.parsedType}),Jt}return Ps(e.data)}}Ib.create=n=>new Ib({typeName:qt.ZodVoid,...sn(n)});class qa extends hn{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==yt.array)return Et(t,{code:Xe.invalid_type,expected:yt.array,received:t.parsedType}),Jt;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(Et(t,{code:o?Xe.too_big:Xe.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Et(t,{code:Xe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Et(t,{code:Xe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new Hc(t,o,t.path,a)))).then(o=>hs.mergeArray(r,o));const s=[...t.data].map((o,a)=>i.type._parseSync(new Hc(t,o,t.path,a)));return hs.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new qa({...this._def,minLength:{value:e,message:kt.toString(t)}})}max(e,t){return new qa({...this._def,maxLength:{value:e,message:kt.toString(t)}})}length(e,t){return new qa({...this._def,exactLength:{value:e,message:kt.toString(t)}})}nonempty(e){return this.min(1,e)}}qa.create=(n,e)=>new qa({type:n,minLength:null,maxLength:null,exactLength:null,typeName:qt.ZodArray,...sn(e)});function Up(n){if(n instanceof Er){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=zl.create(Up(r))}return new Er({...n._def,shape:()=>e})}else return n instanceof qa?new qa({...n._def,type:Up(n.element)}):n instanceof zl?zl.create(Up(n.unwrap())):n instanceof pf?pf.create(Up(n.unwrap())):n instanceof Vc?Vc.create(n.items.map(e=>Up(e))):n}class Er extends hn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Pn.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==yt.object){const l=this._getOrReturnCtx(e);return Et(l,{code:Xe.invalid_type,expected:yt.object,received:l.parsedType}),Jt}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Zl&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=s[l],h=i.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Hc(i,h,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Zl){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(l==="strict")a.length>0&&(Et(i,{code:Xe.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const h=i.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Hc(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const h=await u.key;l.push({key:h,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>hs.mergeObjectSync(r,l)):hs.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return kt.errToObj,new Er({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(a=kt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Er({...this._def,unknownKeys:"strip"})}passthrough(){return new Er({...this._def,unknownKeys:"passthrough"})}extend(e){return new Er({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Er({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:qt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Er({...this._def,catchall:e})}pick(e){const t={};return Pn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Er({...this._def,shape:()=>t})}omit(e){const t={};return Pn.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Er({...this._def,shape:()=>t})}deepPartial(){return Up(this)}partial(e){const t={};return Pn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new Er({...this._def,shape:()=>t})}required(e){const t={};return Pn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof zl;)s=s._def.innerType;t[r]=s}}),new Er({...this._def,shape:()=>t})}keyof(){return qV(Pn.objectKeys(this.shape))}}Er.create=(n,e)=>new Er({shape:()=>n,unknownKeys:"strip",catchall:Zl.create(),typeName:qt.ZodObject,...sn(e)});Er.strictCreate=(n,e)=>new Er({shape:()=>n,unknownKeys:"strict",catchall:Zl.create(),typeName:qt.ZodObject,...sn(e)});Er.lazycreate=(n,e)=>new Er({shape:n,unknownKeys:"strip",catchall:Zl.create(),typeName:qt.ZodObject,...sn(e)});class A2 extends hn{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Wa(a.ctx.common.issues));return Et(t,{code:Xe.invalid_union,unionErrors:o}),Jt}if(t.common.async)return Promise.all(r.map(async s=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new Wa(c));return Et(t,{code:Xe.invalid_union,unionErrors:a}),Jt}}get options(){return this._def.options}}A2.create=(n,e)=>new A2({options:n,typeName:qt.ZodUnion,...sn(e)});const h3=n=>n instanceof I2?h3(n.schema):n instanceof Ka?h3(n.innerType()):n instanceof M2?[n.value]:n instanceof Rh?n.options:n instanceof R2?Object.keys(n.enum):n instanceof P2?h3(n._def.innerType):n instanceof x2?[void 0]:n instanceof S2?[null]:null;class K5 extends hn{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==yt.object)return Et(t,{code:Xe.invalid_type,expected:yt.object,received:t.parsedType}),Jt;const r=this.discriminator,i=t.data[r],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(Et(t,{code:Xe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Jt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const s of t){const o=h3(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new K5({typeName:qt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...sn(r)})}}function SA(n,e){const t=Ju(n),r=Ju(e);if(n===e)return{valid:!0,data:n};if(t===yt.object&&r===yt.object){const i=Pn.objectKeys(e),s=Pn.objectKeys(n).filter(a=>i.indexOf(a)!==-1),o={...n,...e};for(const a of s){const c=SA(n[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(t===yt.array&&r===yt.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],c=SA(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return t===yt.date&&r===yt.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class C2 extends hn{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(EA(s)||EA(o))return Jt;const a=SA(s.value,o.value);return a.valid?((xA(s)||xA(o))&&t.dirty(),{status:t.value,value:a.data}):(Et(r,{code:Xe.invalid_intersection_types}),Jt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}C2.create=(n,e,t)=>new C2({left:n,right:e,typeName:qt.ZodIntersection,...sn(t)});class Vc extends hn{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==yt.array)return Et(r,{code:Xe.invalid_type,expected:yt.array,received:r.parsedType}),Jt;if(r.data.length<this._def.items.length)return Et(r,{code:Xe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Jt;!this._def.rest&&r.data.length>this._def.items.length&&(Et(r,{code:Xe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Hc(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>hs.mergeArray(t,o)):hs.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Vc({...this._def,rest:e})}}Vc.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Vc({items:n,typeName:qt.ZodTuple,rest:null,...sn(e)})};class T2 extends hn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==yt.object)return Et(r,{code:Xe.invalid_type,expected:yt.object,received:r.parsedType}),Jt;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Hc(r,a,r.path,a)),value:o._parse(new Hc(r,r.data[a],r.path,a))});return r.common.async?hs.mergeObjectAsync(t,i):hs.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof hn?new T2({keyType:e,valueType:t,typeName:qt.ZodRecord,...sn(r)}):new T2({keyType:Ua.create(),valueType:e,typeName:qt.ZodRecord,...sn(t)})}}class Mb extends hn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==yt.map)return Et(r,{code:Xe.invalid_type,expected:yt.map,received:r.parsedType}),Jt;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:i._parse(new Hc(r,a,r.path,[l,"key"])),value:s._parse(new Hc(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Jt;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(l.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Jt;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(l.value,u.value)}return{status:t.value,value:a}}}}Mb.create=(n,e,t)=>new Mb({valueType:e,keyType:n,typeName:qt.ZodMap,...sn(t)});class ff extends hn{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==yt.set)return Et(r,{code:Xe.invalid_type,expected:yt.set,received:r.parsedType}),Jt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Et(r,{code:Xe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Et(r,{code:Xe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Jt;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const a=[...r.data.values()].map((c,l)=>s._parse(new Hc(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,t){return new ff({...this._def,minSize:{value:e,message:kt.toString(t)}})}max(e,t){return new ff({...this._def,maxSize:{value:e,message:kt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ff.create=(n,e)=>new ff({valueType:n,minSize:null,maxSize:null,typeName:qt.ZodSet,...sn(e)});class l0 extends hn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==yt.function)return Et(t,{code:Xe.invalid_type,expected:yt.function,received:t.parsedType}),Jt;function r(a,c){return Ab({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Sb(),b2].filter(l=>!!l),issueData:{code:Xe.invalid_arguments,argumentsError:c}})}function i(a,c){return Ab({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Sb(),b2].filter(l=>!!l),issueData:{code:Xe.invalid_return_type,returnTypeError:c}})}const s={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof N0){const a=this;return Ps(async function(...c){const l=new Wa([]),u=await a._def.args.parseAsync(c,s).catch(f=>{throw l.addIssue(r(c,f)),l}),h=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(h,s).catch(f=>{throw l.addIssue(i(h,f)),l})})}else{const a=this;return Ps(function(...c){const l=a._def.args.safeParse(c,s);if(!l.success)throw new Wa([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),h=a._def.returns.safeParse(u,s);if(!h.success)throw new Wa([i(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new l0({...this._def,args:Vc.create(e).rest(Gd.create())})}returns(e){return new l0({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new l0({args:e||Vc.create([]).rest(Gd.create()),returns:t||Gd.create(),typeName:qt.ZodFunction,...sn(r)})}}class I2 extends hn{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}I2.create=(n,e)=>new I2({getter:n,typeName:qt.ZodLazy,...sn(e)});class M2 extends hn{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Et(t,{received:t.data,code:Xe.invalid_literal,expected:this._def.value}),Jt}return{status:"valid",value:e.data}}get value(){return this._def.value}}M2.create=(n,e)=>new M2({value:n,typeName:qt.ZodLiteral,...sn(e)});function qV(n,e){return new Rh({values:n,typeName:qt.ZodEnum,...sn(e)})}class Rh extends hn{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Et(t,{expected:Pn.joinValues(r),received:t.parsedType,code:Xe.invalid_type}),Jt}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),r=this._def.values;return Et(t,{received:t.data,code:Xe.invalid_enum_value,options:r}),Jt}return Ps(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Rh.create(e)}exclude(e){return Rh.create(this.options.filter(t=>!e.includes(t)))}}Rh.create=qV;class R2 extends hn{_parse(e){const t=Pn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==yt.string&&r.parsedType!==yt.number){const i=Pn.objectValues(t);return Et(r,{expected:Pn.joinValues(i),received:r.parsedType,code:Xe.invalid_type}),Jt}if(t.indexOf(e.data)===-1){const i=Pn.objectValues(t);return Et(r,{received:r.data,code:Xe.invalid_enum_value,options:i}),Jt}return Ps(e.data)}get enum(){return this._def.values}}R2.create=(n,e)=>new R2({values:n,typeName:qt.ZodNativeEnum,...sn(e)});class N0 extends hn{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==yt.promise&&t.common.async===!1)return Et(t,{code:Xe.invalid_type,expected:yt.promise,received:t.parsedType}),Jt;const r=t.parsedType===yt.promise?t.data:Promise.resolve(t.data);return Ps(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}N0.create=(n,e)=>new N0({type:n,typeName:qt.ZodPromise,...sn(e)});class Ka extends hn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Et(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Jt:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Jt:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!_2(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>_2(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:t.value,value:a})):o);Pn.assertNever(i)}}Ka.create=(n,e,t)=>new Ka({schema:n,typeName:qt.ZodEffects,effect:e,...sn(t)});Ka.createWithPreprocess=(n,e,t)=>new Ka({schema:e,effect:{type:"preprocess",transform:n},typeName:qt.ZodEffects,...sn(t)});class zl extends hn{_parse(e){return this._getType(e)===yt.undefined?Ps(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zl.create=(n,e)=>new zl({innerType:n,typeName:qt.ZodOptional,...sn(e)});class pf extends hn{_parse(e){return this._getType(e)===yt.null?Ps(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pf.create=(n,e)=>new pf({innerType:n,typeName:qt.ZodNullable,...sn(e)});class P2 extends hn{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===yt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}P2.create=(n,e)=>new P2({innerType:n,typeName:qt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...sn(e)});class Rb extends hn{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Cb(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Wa(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wa(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Rb.create=(n,e)=>new Rb({innerType:n,typeName:qt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...sn(e)});class Pb extends hn{_parse(e){if(this._getType(e)!==yt.nan){const r=this._getOrReturnCtx(e);return Et(r,{code:Xe.invalid_type,expected:yt.nan,received:r.parsedType}),Jt}return{status:"valid",value:e.data}}}Pb.create=n=>new Pb({typeName:qt.ZodNaN,...sn(n)});const l_e=Symbol("zod_brand");class jV extends hn{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ny extends hn{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Jt:s.status==="dirty"?(t.dirty(),WV(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Jt:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new Ny({in:e,out:t,typeName:qt.ZodPipeline})}}class Nb extends hn{_parse(e){const t=this._def.innerType._parse(e);return _2(t)&&(t.value=Object.freeze(t.value)),t}}Nb.create=(n,e)=>new Nb({innerType:n,typeName:qt.ZodReadonly,...sn(e)});const GV=(n,e={},t)=>n?P0.create().superRefine((r,i)=>{var s,o;if(!n(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:t)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...l,fatal:c})}}):P0.create(),u_e={object:Er.lazycreate};var qt;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(qt||(qt={}));const h_e=(n,e={message:`Input not instance of ${n.name}`})=>GV(t=>t instanceof n,e),KV=Ua.create,YV=Ih.create,d_e=Pb.create,f_e=Mh.create,XV=E2.create,p_e=df.create,m_e=Tb.create,g_e=x2.create,y_e=S2.create,w_e=P0.create,v_e=Gd.create,b_e=Zl.create,__e=Ib.create,E_e=qa.create,x_e=Er.create,S_e=Er.strictCreate,A_e=A2.create,C_e=K5.create,T_e=C2.create,I_e=Vc.create,M_e=T2.create,R_e=Mb.create,P_e=ff.create,N_e=l0.create,O_e=I2.create,k_e=M2.create,D_e=Rh.create,L_e=R2.create,U_e=N0.create,pO=Ka.create,B_e=zl.create,F_e=pf.create,$_e=Ka.createWithPreprocess,z_e=Ny.create,H_e=()=>KV().optional(),V_e=()=>YV().optional(),W_e=()=>XV().optional(),q_e={string:n=>Ua.create({...n,coerce:!0}),number:n=>Ih.create({...n,coerce:!0}),boolean:n=>E2.create({...n,coerce:!0}),bigint:n=>Mh.create({...n,coerce:!0}),date:n=>df.create({...n,coerce:!0})},j_e=Jt;var Y=Object.freeze({__proto__:null,defaultErrorMap:b2,setErrorMap:Xbe,getErrorMap:Sb,makeIssue:Ab,EMPTY_PATH:Zbe,addIssueToContext:Et,ParseStatus:hs,INVALID:Jt,DIRTY:WV,OK:Ps,isAborted:EA,isDirty:xA,isValid:_2,isAsync:Cb,get util(){return Pn},get objectUtil(){return _A},ZodParsedType:yt,getParsedType:Ju,ZodType:hn,ZodString:Ua,ZodNumber:Ih,ZodBigInt:Mh,ZodBoolean:E2,ZodDate:df,ZodSymbol:Tb,ZodUndefined:x2,ZodNull:S2,ZodAny:P0,ZodUnknown:Gd,ZodNever:Zl,ZodVoid:Ib,ZodArray:qa,ZodObject:Er,ZodUnion:A2,ZodDiscriminatedUnion:K5,ZodIntersection:C2,ZodTuple:Vc,ZodRecord:T2,ZodMap:Mb,ZodSet:ff,ZodFunction:l0,ZodLazy:I2,ZodLiteral:M2,ZodEnum:Rh,ZodNativeEnum:R2,ZodPromise:N0,ZodEffects:Ka,ZodTransformer:Ka,ZodOptional:zl,ZodNullable:pf,ZodDefault:P2,ZodCatch:Rb,ZodNaN:Pb,BRAND:l_e,ZodBranded:jV,ZodPipeline:Ny,ZodReadonly:Nb,custom:GV,Schema:hn,ZodSchema:hn,late:u_e,get ZodFirstPartyTypeKind(){return qt},coerce:q_e,any:w_e,array:E_e,bigint:f_e,boolean:XV,date:p_e,discriminatedUnion:C_e,effect:pO,enum:D_e,function:N_e,instanceof:h_e,intersection:T_e,lazy:O_e,literal:k_e,map:R_e,nan:d_e,nativeEnum:L_e,never:b_e,null:y_e,nullable:F_e,number:YV,object:x_e,oboolean:W_e,onumber:V_e,optional:B_e,ostring:H_e,pipeline:z_e,preprocess:$_e,promise:U_e,record:M_e,set:P_e,strictObject:S_e,string:KV,symbol:m_e,transformer:pO,tuple:I_e,undefined:g_e,union:A_e,unknown:v_e,void:__e,NEVER:j_e,ZodIssueCode:Xe,quotelessJson:Ybe,ZodError:Wa});const Rr=Y.object({message:Y.string()});function vt(n){return Y.literal(St[n])}const Y5=Y.object({serializedMessage:Y.string().optional(),accountAddress:Y.string(),chainId:Y.string(),notBefore:Y.string().optional(),domain:Y.string(),uri:Y.string(),version:Y.string(),nonce:Y.string(),statement:Y.string().optional(),resources:Y.array(Y.string()).optional(),requestId:Y.string().optional(),issuedAt:Y.string().optional(),expirationTime:Y.string().optional()});Y.object({accessList:Y.array(Y.string()),blockHash:Y.string().nullable(),blockNumber:Y.string().nullable(),chainId:Y.string().or(Y.number()),from:Y.string(),gas:Y.string(),hash:Y.string(),input:Y.string().nullable(),maxFeePerGas:Y.string(),maxPriorityFeePerGas:Y.string(),nonce:Y.string(),r:Y.string(),s:Y.string(),to:Y.string(),transactionIndex:Y.string().nullable(),type:Y.string(),v:Y.string(),value:Y.string()});const G_e=Y.object({chainId:Y.string().or(Y.number()),rpcUrl:Y.optional(Y.string())}),K_e=Y.object({email:Y.string().email()}),Y_e=Y.object({otp:Y.string()}),X_e=Y.object({uri:Y.string(),preferredAccountType:Y.optional(Y.string()),chainId:Y.optional(Y.string().or(Y.number())),siwxMessage:Y.optional(Y5),rpcUrl:Y.optional(Y.string())}),Z_e=Y.object({chainId:Y.optional(Y.string().or(Y.number())),preferredAccountType:Y.optional(Y.string()),socialUri:Y.optional(Y.string()),siwxMessage:Y.optional(Y5),rpcUrl:Y.optional(Y.string())}),J_e=Y.object({provider:Y.enum(["google","github","apple","facebook","x","discord"])}),Q_e=Y.object({email:Y.string().email()}),e5e=Y.object({otp:Y.string()}),t5e=Y.object({otp:Y.string()}),n5e=Y.object({themeMode:Y.optional(Y.enum(["light","dark"])),themeVariables:Y.optional(Y.record(Y.string(),Y.string().or(Y.number()))),w3mThemeVariables:Y.optional(Y.record(Y.string(),Y.string()))}),r5e=Y.object({metadata:Y.object({name:Y.string(),description:Y.string(),url:Y.string(),icons:Y.array(Y.string())}).optional(),sdkVersion:Y.string().optional(),sdkType:Y.string().optional(),projectId:Y.string()}),i5e=Y.object({type:Y.string()}),s5e=Y.object({action:Y.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),o5e=Y.object({url:Y.string()}),a5e=Y.object({userName:Y.string()}),c5e=Y.object({email:Y.string().optional().nullable(),address:Y.string(),chainId:Y.string().or(Y.number()),accounts:Y.array(Y.object({address:Y.string(),type:Y.enum([ai.ACCOUNT_TYPES.EOA,ai.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:Y.string().optional().nullable(),preferredAccountType:Y.optional(Y.string()),signature:Y.string().optional(),message:Y.string().optional(),siwxMessage:Y.optional(Y5)}),l5e=Y.object({action:Y.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),u5e=Y.object({email:Y.string().email().optional().nullable(),address:Y.string(),chainId:Y.string().or(Y.number()),smartAccountDeployed:Y.optional(Y.boolean()),accounts:Y.array(Y.object({address:Y.string(),type:Y.enum([ai.ACCOUNT_TYPES.EOA,ai.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:Y.optional(Y.string()),signature:Y.string().optional(),message:Y.string().optional(),siwxMessage:Y.optional(Y5)}),h5e=Y.object({uri:Y.string()}),d5e=Y.object({isConnected:Y.boolean()}),f5e=Y.object({chainId:Y.string().or(Y.number())}),p5e=Y.object({chainId:Y.string().or(Y.number())}),m5e=Y.object({newEmail:Y.string().email()}),g5e=Y.object({smartAccountEnabledNetworks:Y.array(Y.number())});Y.object({address:Y.string(),isDeployed:Y.boolean()});const y5e=Y.object({version:Y.string().optional()}),w5e=Y.object({type:Y.string(),address:Y.string()}),v5e=Y.any(),b5e=Y.object({method:Y.literal("eth_accounts")}),_5e=Y.object({method:Y.literal("eth_blockNumber")}),E5e=Y.object({method:Y.literal("eth_call"),params:Y.array(Y.any())}),x5e=Y.object({method:Y.literal("eth_chainId")}),S5e=Y.object({method:Y.literal("eth_estimateGas"),params:Y.array(Y.any())}),A5e=Y.object({method:Y.literal("eth_feeHistory"),params:Y.array(Y.any())}),C5e=Y.object({method:Y.literal("eth_gasPrice")}),T5e=Y.object({method:Y.literal("eth_getAccount"),params:Y.array(Y.any())}),I5e=Y.object({method:Y.literal("eth_getBalance"),params:Y.array(Y.any())}),M5e=Y.object({method:Y.literal("eth_getBlockByHash"),params:Y.array(Y.any())}),R5e=Y.object({method:Y.literal("eth_getBlockByNumber"),params:Y.array(Y.any())}),P5e=Y.object({method:Y.literal("eth_getBlockReceipts"),params:Y.array(Y.any())}),N5e=Y.object({method:Y.literal("eth_getBlockTransactionCountByHash"),params:Y.array(Y.any())}),O5e=Y.object({method:Y.literal("eth_getBlockTransactionCountByNumber"),params:Y.array(Y.any())}),k5e=Y.object({method:Y.literal("eth_getCode"),params:Y.array(Y.any())}),D5e=Y.object({method:Y.literal("eth_getFilterChanges"),params:Y.array(Y.any())}),L5e=Y.object({method:Y.literal("eth_getFilterLogs"),params:Y.array(Y.any())}),U5e=Y.object({method:Y.literal("eth_getLogs"),params:Y.array(Y.any())}),B5e=Y.object({method:Y.literal("eth_getProof"),params:Y.array(Y.any())}),F5e=Y.object({method:Y.literal("eth_getStorageAt"),params:Y.array(Y.any())}),$5e=Y.object({method:Y.literal("eth_getTransactionByBlockHashAndIndex"),params:Y.array(Y.any())}),z5e=Y.object({method:Y.literal("eth_getTransactionByBlockNumberAndIndex"),params:Y.array(Y.any())}),H5e=Y.object({method:Y.literal("eth_getTransactionByHash"),params:Y.array(Y.any())}),V5e=Y.object({method:Y.literal("eth_getTransactionCount"),params:Y.array(Y.any())}),W5e=Y.object({method:Y.literal("eth_getTransactionReceipt"),params:Y.array(Y.any())}),q5e=Y.object({method:Y.literal("eth_getUncleCountByBlockHash"),params:Y.array(Y.any())}),j5e=Y.object({method:Y.literal("eth_getUncleCountByBlockNumber"),params:Y.array(Y.any())}),G5e=Y.object({method:Y.literal("eth_maxPriorityFeePerGas")}),K5e=Y.object({method:Y.literal("eth_newBlockFilter")}),Y5e=Y.object({method:Y.literal("eth_newFilter"),params:Y.array(Y.any())}),X5e=Y.object({method:Y.literal("eth_newPendingTransactionFilter")}),Z5e=Y.object({method:Y.literal("eth_sendRawTransaction"),params:Y.array(Y.any())}),J5e=Y.object({method:Y.literal("eth_syncing"),params:Y.array(Y.any())}),Q5e=Y.object({method:Y.literal("eth_uninstallFilter"),params:Y.array(Y.any())}),mO=Y.object({method:Y.literal("personal_sign"),params:Y.array(Y.any())}),e4e=Y.object({method:Y.literal("eth_signTypedData_v4"),params:Y.array(Y.any())}),t4e=Y.object({method:Y.literal("eth_sendTransaction"),params:Y.array(Y.any())}),n4e=Y.object({method:Y.literal("solana_signMessage"),params:Y.object({message:Y.string(),pubkey:Y.string()})}),r4e=Y.object({method:Y.literal("solana_signTransaction"),params:Y.object({transaction:Y.string()})}),i4e=Y.object({method:Y.literal("solana_signAllTransactions"),params:Y.object({transactions:Y.array(Y.string())})}),s4e=Y.object({method:Y.literal("solana_signAndSendTransaction"),params:Y.object({transaction:Y.string(),options:Y.object({skipPreflight:Y.boolean().optional(),preflightCommitment:Y.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:Y.number().optional(),minContextSlot:Y.number().optional()}).optional()})}),o4e=Y.object({method:Y.literal("wallet_sendCalls"),params:Y.array(Y.object({chainId:Y.string().or(Y.number()).optional(),from:Y.string().optional(),version:Y.string().optional(),capabilities:Y.any().optional(),calls:Y.array(Y.object({to:Y.string().startsWith("0x"),data:Y.string().startsWith("0x").optional(),value:Y.string().optional()}))}))}),a4e=Y.object({method:Y.literal("wallet_getCallsStatus"),params:Y.array(Y.string())}),c4e=Y.object({method:Y.literal("wallet_getCapabilities"),params:Y.array(Y.string().or(Y.number()).optional()).optional()}),l4e=Y.object({method:Y.literal("wallet_grantPermissions"),params:Y.array(Y.any())}),u4e=Y.object({method:Y.literal("wallet_revokePermissions"),params:Y.any()}),h4e=Y.object({method:Y.literal("wallet_getAssets"),params:Y.any()}),gO=Y.object({token:Y.string()}),bt=Y.object({id:Y.string().optional()}),Z1={appEvent:bt.extend({type:vt("APP_SWITCH_NETWORK"),payload:G_e}).or(bt.extend({type:vt("APP_CONNECT_EMAIL"),payload:K_e})).or(bt.extend({type:vt("APP_CONNECT_DEVICE")})).or(bt.extend({type:vt("APP_CONNECT_OTP"),payload:Y_e})).or(bt.extend({type:vt("APP_CONNECT_SOCIAL"),payload:X_e})).or(bt.extend({type:vt("APP_GET_FARCASTER_URI")})).or(bt.extend({type:vt("APP_CONNECT_FARCASTER")})).or(bt.extend({type:vt("APP_GET_USER"),payload:Y.optional(Z_e)})).or(bt.extend({type:vt("APP_GET_SOCIAL_REDIRECT_URI"),payload:J_e})).or(bt.extend({type:vt("APP_SIGN_OUT")})).or(bt.extend({type:vt("APP_IS_CONNECTED"),payload:Y.optional(gO)})).or(bt.extend({type:vt("APP_GET_CHAIN_ID")})).or(bt.extend({type:vt("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(bt.extend({type:vt("APP_INIT_SMART_ACCOUNT")})).or(bt.extend({type:vt("APP_SET_PREFERRED_ACCOUNT"),payload:i5e})).or(bt.extend({type:vt("APP_RPC_REQUEST"),payload:mO.or(h4e).or(b5e).or(_5e).or(E5e).or(x5e).or(S5e).or(A5e).or(C5e).or(T5e).or(I5e).or(M5e).or(R5e).or(P5e).or(N5e).or(O5e).or(k5e).or(D5e).or(L5e).or(U5e).or(B5e).or(F5e).or($5e).or(z5e).or(H5e).or(V5e).or(W5e).or(q5e).or(j5e).or(G5e).or(K5e).or(Y5e).or(X5e).or(Z5e).or(J5e).or(Q5e).or(mO).or(e4e).or(t4e).or(n4e).or(r4e).or(i4e).or(s4e).or(a4e).or(o4e).or(c4e).or(l4e).or(u4e).and(Y.object({chainId:Y.string().or(Y.number()).optional(),chainNamespace:Y.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:Y.string().optional()}))})).or(bt.extend({type:vt("APP_UPDATE_EMAIL"),payload:Q_e})).or(bt.extend({type:vt("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:e5e})).or(bt.extend({type:vt("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:t5e})).or(bt.extend({type:vt("APP_SYNC_THEME"),payload:n5e})).or(bt.extend({type:vt("APP_SYNC_DAPP_DATA"),payload:r5e})).or(bt.extend({type:vt("APP_RELOAD")})).or(bt.extend({type:vt("APP_RPC_ABORT")})),frameEvent:bt.extend({type:vt("FRAME_SWITCH_NETWORK_ERROR"),payload:Rr}).or(bt.extend({type:vt("FRAME_SWITCH_NETWORK_SUCCESS"),payload:p5e})).or(bt.extend({type:vt("FRAME_CONNECT_EMAIL_SUCCESS"),payload:s5e})).or(bt.extend({type:vt("FRAME_CONNECT_EMAIL_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:o5e})).or(bt.extend({type:vt("FRAME_GET_FARCASTER_URI_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:a5e})).or(bt.extend({type:vt("FRAME_CONNECT_FARCASTER_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_CONNECT_OTP_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_CONNECT_OTP_SUCCESS")})).or(bt.extend({type:vt("FRAME_CONNECT_DEVICE_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_CONNECT_DEVICE_SUCCESS")})).or(bt.extend({type:vt("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:c5e})).or(bt.extend({type:vt("FRAME_CONNECT_SOCIAL_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_GET_USER_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_GET_USER_SUCCESS"),payload:u5e})).or(bt.extend({type:vt("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:h5e})).or(bt.extend({type:vt("FRAME_SIGN_OUT_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_SIGN_OUT_SUCCESS")})).or(bt.extend({type:vt("FRAME_IS_CONNECTED_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_IS_CONNECTED_SUCCESS"),payload:d5e})).or(bt.extend({type:vt("FRAME_GET_CHAIN_ID_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_GET_CHAIN_ID_SUCCESS"),payload:f5e})).or(bt.extend({type:vt("FRAME_RPC_REQUEST_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_RPC_REQUEST_SUCCESS"),payload:v5e})).or(bt.extend({type:vt("FRAME_SESSION_UPDATE"),payload:gO})).or(bt.extend({type:vt("FRAME_UPDATE_EMAIL_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_UPDATE_EMAIL_SUCCESS"),payload:l5e})).or(bt.extend({type:vt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(bt.extend({type:vt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:m5e})).or(bt.extend({type:vt("FRAME_SYNC_THEME_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_SYNC_THEME_SUCCESS")})).or(bt.extend({type:vt("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(bt.extend({type:vt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:g5e})).or(bt.extend({type:vt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:w5e})).or(bt.extend({type:vt("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_READY"),payload:y5e})).or(bt.extend({type:vt("FRAME_RELOAD_ERROR"),payload:Rr})).or(bt.extend({type:vt("FRAME_RELOAD_SUCCESS")}))};function K6(n,e={}){return typeof e?.type=="string"&&e?.type?.includes(n)}function d4e({projectId:n,chainId:e,version:t,enableLogger:r,rpcUrl:i=_e.BLOCKCHAIN_API_RPC_URL}){const s=new URL(ete);return s.searchParams.set("projectId",n),s.searchParams.set("chainId",String(e)),s.searchParams.set("version",t),s.searchParams.set("enableLogger",String(r)),s.searchParams.set("rpcUrl",i),s.toString()}class f4e{constructor({projectId:e,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:i=!0,rpcUrl:s=_e.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!K6(St.FRAME_EVENT_KEY,u))return;const h=Z1.frameEvent.parse(u);h.id===o&&(a(h),window.removeEventListener("message",l))}So.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{So.isClient&&window.addEventListener("message",({data:a})=>{if(!K6(St.FRAME_EVENT_KEY,a))return;const c=Z1.frameEvent.parse(a);o(c)})},onAppEvent:o=>{So.isClient&&window.addEventListener("message",({data:a})=>{if(!K6(St.APP_EVENT_KEY,a))return;const c=Z1.appEvent.parse(a);o(c)})},postAppEvent:o=>{if(So.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");Z1.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(So.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Z1.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=s,t&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),So.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=d4e({projectId:e,chainId:r,version:nte,enableLogger:i,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(t=>({[t]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${t}&projectId=${this.projectId}`,chainId:t}}));return Object.assign({},...e)}}class p4e{constructor(e){const t=r1({level:tte}),{logger:r,chunkLoggerController:i}=W7({opts:t});this.logger=ds(r,this.constructor.name),this.chunkLoggerController=i,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class m4e{constructor({projectId:e,chainId:t,enableLogger:r=!0,onTimeout:i,abortController:s,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new p4e(e)),this.abortController=s,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(t);this.w3mFrame=new f4e({projectId:e,isAppClient:!0,chainId:t,enableLogger:r,rpcUrl:a}),this.onTimeout=i,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(t=>{t.type===St.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ri.get(St.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ri.get(St.EMAIL)}getUsername(){return Ri.get(St.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:St.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{So.checkIfAllowedToTriggerEmail(),await this.init();const t=await this.appEvent({type:St.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting email"),t}}async connectDevice(){try{return this.appEvent({type:St.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:St.APP_CONNECT_OTP,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting otp"),t}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:St.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:St.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:St.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error getting social redirect uri"),t}}async updateEmail(e){try{const t=await this.appEvent({type:St.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email"),t}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:St.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email primary otp"),t}}async updateEmailSecondaryOtp(e){try{const t=await this.appEvent({type:St.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(t.newEmail),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email secondary otp"),t}}async syncTheme(e){try{return this.appEvent({type:St.APP_SYNC_THEME,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error syncing theme"),t}}async syncDappData(e){try{return this.appEvent({type:St.APP_SYNC_DAPP_DATA,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error syncing dapp data"),t}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:St.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:St.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error setting preferred account"),t}}async connect(e){if(e?.socialUri)try{await this.init();const t=this.getRpcUrl(e.chainId),r=await this.appEvent({type:St.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:t}});return r.userName&&this.setSocialLoginSuccess(r.userName),this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting social"),t}else try{const t=e?.chainId||this.getLastUsedChainId()||1,r=await this.getUser({chainId:t,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(t)});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting"),t}}async getUser(e){try{await this.init();const t=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:St.APP_GET_USER,payload:{...e,chainId:t}});return this.user=r,r}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting"),t}}async connectSocial({uri:e,chainId:t,preferredAccountType:r}){try{await this.init();const i=this.getRpcUrl(t),s=await this.appEvent({type:St.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:t,rpcUrl:i,preferredAccountType:r}});return s.userName&&this.setSocialLoginSuccess(s.userName),s}catch(i){throw this.w3mLogger?.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:St.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:St.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const t=this.getRpcUrl(e),r=await this.appEvent({type:St.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:t}});return this.setLastUsedChainId(r.chainId),r}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error switching network"),t}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async t=>{const r=setTimeout(()=>{t()},3e3);await this.appEvent({type:St.APP_SIGN_OUT}),clearTimeout(r),t()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const t=e;try{if(ai.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const r=e.chainNamespace||"eip155",i=this.getActiveCaipNetwork(r)?.id;t.chainNamespace=r,t.chainId=i,t.rpcUrl=this.getRpcUrl(i),this.rpcRequestHandler?.(e);const s=await this.appEvent({type:St.APP_RPC_REQUEST,payload:t});return this.rpcSuccessHandler?.(s,t),s}catch(r){throw this.rpcErrorHandler?.(r,t),this.w3mLogger?.logger.error({error:r},"Error requesting"),r}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===St.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===St.FRAME_IS_CONNECTED_ERROR&&e(),t.type===St.FRAME_IS_CONNECTED_SUCCESS&&!t.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===St.FRAME_GET_USER_SUCCESS&&e(t.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===St.FRAME_CONNECT_SOCIAL_SUCCESS&&e(t.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===St.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===St.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:ai.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(this.openRpcRequests.map(async({abortController:e,method:t})=>{ai.SAFE_RPC_METHODS.includes(t)||e.abort(),await this.appEvent({type:St.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let t,r;function i(c){return c.replace("@w3m-app/","")}const s=[St.APP_SYNC_DAPP_DATA,St.APP_SYNC_THEME,St.APP_SET_PREFERRED_ACCOUNT],o=i(e.type);return!this.w3mFrame.iframeIsReady&&!s.includes(e.type)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[St.APP_CONNECT_EMAIL,St.APP_CONNECT_DEVICE,St.APP_CONNECT_OTP,St.APP_CONNECT_SOCIAL,St.APP_GET_SOCIAL_REDIRECT_URI].map(i).includes(o)&&(t=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{const u=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const h=new AbortController;if(o==="RPC_REQUEST"){const f=e;this.openRpcRequests=[...this.openRpcRequests,{...f.payload,abortController:h}]}h.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function d(f,p){f.id===u&&(p?.logger.info?.({framEvent:f,id:u},"Received frame response"),f.type===`@w3m-frame/${o}_SUCCESS`?(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in f&&c(f.payload),c(void 0)):f.type===`@w3m-frame/${o}_ERROR`&&(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in f&&l(new Error(f.payload?.message||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,f=>d(f,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ri.set(St.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ri.set(St.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ri.set(St.EMAIL,e),Ri.set(St.EMAIL_LOGIN_USED_KEY,"true"),Ri.delete(St.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ri.delete(St.EMAIL_LOGIN_USED_KEY),Ri.delete(St.EMAIL),Ri.delete(St.LAST_USED_CHAIN_KEY),Ri.delete(St.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ri.set(St.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ri.get(St.LAST_USED_CHAIN_KEY)??void 0,t=Number(e);return isNaN(t)?e:t}persistSmartAccountEnabledNetworks(e){Ri.set(St.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let t=e===void 0?void 0:"eip155";return typeof e=="string"&&(e.includes(":")?t=Es.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?t="eip155":t="solana"),this.getActiveCaipNetwork(t)?.rpcUrls.default.http?.[0]}}class Kd{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:r,onTimeout:i,abortController:s,getActiveCaipNetwork:o}){return Kd.instance||(Kd.instance=new m4e({projectId:e,chainId:t,enableLogger:r,onTimeout:i,abortController:s,getActiveCaipNetwork:o})),Kd.instance}}var yO={};const g4e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof yO<"u"?yO.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},AA={filterOutDuplicatesByRDNS(n){const e=Fe.state.enableEIP6963?rt.state.connectors:[],t=je.getRecentWallets(),r=e.map(a=>a.info?.rdns).filter(Boolean),i=t.map(a=>a.rdns).filter(Boolean),s=r.concat(i);if(s.includes("io.metamask.mobile")&&_t.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return n.filter(a=>!(a?.rdns&&s.includes(String(a.rdns))||!a?.rdns&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(n){const e=rt.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),t=je.getRecentWallets(),r=e.map(a=>a.explorerId),i=t.map(a=>a.id),s=r.concat(i);return n.filter(a=>!s.includes(a?.id))},filterOutDuplicateWallets(n){const e=this.filterOutDuplicatesByRDNS(n);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(n){const{connectors:e}=rt.state,{featuredWalletIds:t}=Fe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return n.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(t?.length){const l=t.indexOf(o.id),u=t.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(n,e){const t=n?.connectMethodsOrder||Fe.state.features?.connectMethodsOrder,r=e||rt.state.connectors;if(t)return t;const{injected:i,announced:s}=d3.getConnectorsByType(r,Nt.state.recommended,Nt.state.featured),o=i.filter(d3.showConnector),a=s.filter(d3.showConnector);return o.length||a.length?["wallet","email","social"]:g4e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(n){const e=!!n.rdns&&Nt.state.excludedWallets.some(r=>r.rdns===n.rdns),t=!!n.name&&Nt.state.excludedWallets.some(r=>Kr.isLowerCaseMatch(r.name,n.name));return e||t}},d3={getConnectorsByType(n,e,t){const{customWallets:r}=Fe.state,i=je.getRecentWallets(),s=AA.filterOutDuplicateWallets(e),o=AA.filterOutDuplicateWallets(t),a=n.filter(h=>h.type==="MULTI_CHAIN"),c=n.filter(h=>h.type==="ANNOUNCED"),l=n.filter(h=>h.type==="INJECTED"),u=n.filter(h=>h.type==="EXTERNAL");return{custom:r,recent:i,external:u,multiChain:a,announced:c,injected:l,recommended:s,featured:o}},showConnector(n){const e=n.info?.rdns,t=!!e&&Nt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!n.name&&Nt.state.excludedWallets.some(i=>Kr.isLowerCaseMatch(i.name,n.name));return!(n.type==="INJECTED"&&(n.name==="Browser Wallet"&&(!_t.isMobile()||_t.isMobile()&&!e&&!ct.checkInstalled())||t||r)||(n.type==="ANNOUNCED"||n.type==="EXTERNAL")&&(t||r))},getIsConnectedWithWC(){return Array.from(ee.state.chains.values()).some(t=>rt.getConnectorId(t.namespace)===_e.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:n,featured:e,custom:t,recent:r,announced:i,injected:s,multiChain:o,external:a,overriddenConnectors:c=Fe.state.features?.connectorTypeOrder??[]}){const h=[{type:"walletConnect",isEnabled:Fe.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...s,...i,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:t&&t.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:n.length>0}].filter(m=>m.isEnabled),d=new Set(h.map(m=>m.type)),f=c.filter(m=>d.has(m)).map(m=>({type:m,isEnabled:!0})),p=h.filter(({type:m})=>!f.some(({type:y})=>y===m));return Array.from(new Set([...f,...p].map(({type:m})=>m)))},getAuthName({email:n,socialUsername:e,socialProvider:t}){return e?t&&t==="discord"&&e.endsWith("0")?e.slice(0,-1):e:n.length>30?`${n.slice(0,-3)}...`:n},async fetchProviderData(n){try{if(n.name==="Browser Wallet"&&!_t.isMobile())return{accounts:[],chainId:void 0};if(n.id===_e.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,t]=await Promise.all([n.provider?.request({method:"eth_accounts"}),n.provider?.request({method:"eth_chainId"}).then(r=>Number(r))]);return{accounts:e,chainId:t}}catch(e){return console.warn(`Failed to fetch provider data for ${n.name}`,e),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const f3=globalThis,_9=f3.ShadowRoot&&(f3.ShadyCSS===void 0||f3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,E9=Symbol(),wO=new WeakMap;let ZV=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==E9)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(_9&&e===void 0){const r=t!==void 0&&t.length===1;r&&(e=wO.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&wO.set(t,e))}return e}toString(){return this.cssText}};const qo=n=>new ZV(typeof n=="string"?n:n+"",void 0,E9),u0=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+n[s+1],n[0]);return new ZV(t,n,E9)},y4e=(n,e)=>{if(_9)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const r=document.createElement("style"),i=f3.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=t.cssText,n.appendChild(r)}},vO=_9?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return qo(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:w4e,defineProperty:v4e,getOwnPropertyDescriptor:b4e,getOwnPropertyNames:_4e,getOwnPropertySymbols:E4e,getPrototypeOf:x4e}=Object,X5=globalThis,bO=X5.trustedTypes,S4e=bO?bO.emptyScript:"",A4e=X5.reactiveElementPolyfillSupport,hg=(n,e)=>n,CA={toAttribute(n,e){switch(e){case Boolean:n=n?S4e:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},JV=(n,e)=>!w4e(n,e),_O={attribute:!0,type:String,converter:CA,reflect:!1,useDefault:!1,hasChanged:JV};Symbol.metadata??=Symbol("metadata"),X5.litPropertyMetadata??=new WeakMap;let Bp=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=_O){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,t);i!==void 0&&v4e(this.prototype,e,i)}}static getPropertyDescriptor(e,t,r){const{get:i,set:s}=b4e(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get:i,set(o){const a=i?.call(this);s?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??_O}static _$Ei(){if(this.hasOwnProperty(hg("elementProperties")))return;const e=x4e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(hg("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(hg("properties"))){const t=this.properties,r=[..._4e(t),...E4e(t)];for(const i of r)this.createProperty(i,t[i])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[r,i]of t)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[t,r]of this.elementProperties){const i=this._$Eu(t,r);i!==void 0&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)t.unshift(vO(i))}else e!==void 0&&t.push(vO(e));return t}static _$Eu(e,t){const r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return y4e(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const s=(r.converter?.toAttribute!==void 0?r.converter:CA).toAttribute(t,r.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,t){const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const s=r.getPropertyOptions(i),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:CA;this._$Em=i,this[i]=o.fromAttribute(t,s.type)??this._$Ej?.get(i)??null,this._$Em=null}}requestUpdate(e,t,r){if(e!==void 0){const i=this.constructor,s=this[e];if(r??=i.getPropertyOptions(e),!((r.hasChanged??JV)(s,t)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,t,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:i,wrapped:s},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??t??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),i===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,s]of this._$Ep)this[i]=s;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[i,s]of r){const{wrapped:o}=s,a=this[i];o!==!0||this._$AL.has(i)||a===void 0||this.C(i,void 0,s,a)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(t)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(e){}firstUpdated(e){}};Bp.elementStyles=[],Bp.shadowRootOptions={mode:"open"},Bp[hg("elementProperties")]=new Map,Bp[hg("finalized")]=new Map,A4e?.({ReactiveElement:Bp}),(X5.reactiveElementVersions??=[]).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const x9=globalThis,Ob=x9.trustedTypes,EO=Ob?Ob.createPolicy("lit-html",{createHTML:n=>n}):void 0,QV="$lit$",Qu=`lit$${Math.random().toFixed(9).slice(2)}$`,eW="?"+Qu,C4e=`<${eW}>`,mf=document,N2=()=>mf.createComment(""),O2=n=>n===null||typeof n!="object"&&typeof n!="function",S9=Array.isArray,T4e=n=>S9(n)||typeof n?.[Symbol.iterator]=="function",Y6=`[ 	
\f\r]`,J1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,xO=/-->/g,SO=/>/g,Zh=RegExp(`>|${Y6}(?:([^\\s"'>=/]+)(${Y6}*=${Y6}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),AO=/'/g,CO=/"/g,tW=/^(?:script|style|textarea|title)$/i,nW=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),Vje=nW(1),Wje=nW(2),O0=Symbol.for("lit-noChange"),wi=Symbol.for("lit-nothing"),TO=new WeakMap,Ud=mf.createTreeWalker(mf,129);function rW(n,e){if(!S9(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return EO!==void 0?EO.createHTML(e):e}const I4e=(n,e)=>{const t=n.length-1,r=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=J1;for(let a=0;a<t;a++){const c=n[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===J1?u[1]==="!--"?o=xO:u[1]!==void 0?o=SO:u[2]!==void 0?(tW.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=Zh):u[3]!==void 0&&(o=Zh):o===Zh?u[0]===">"?(o=i??J1,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Zh:u[3]==='"'?CO:AO):o===CO||o===AO?o=Zh:o===xO||o===SO?o=J1:(o=Zh,i=void 0);const f=o===Zh&&n[a+1].startsWith("/>")?" ":"";s+=o===J1?c+C4e:h>=0?(r.push(l),c.slice(0,h)+QV+c.slice(h)+Qu+f):c+Qu+(h===-2?a:f)}return[rW(n,s+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let TA=class iW{constructor({strings:e,_$litType$:t},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=I4e(e,t);if(this.el=iW.createElement(l,r),Ud.currentNode=this.el.content,t===2||t===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=Ud.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(QV)){const d=u[o++],f=i.getAttribute(h).split(Qu),p=/([.?@])?(.*)/.exec(d);c.push({type:1,index:s,name:p[2],strings:f,ctor:p[1]==="."?R4e:p[1]==="?"?P4e:p[1]==="@"?N4e:Z5}),i.removeAttribute(h)}else h.startsWith(Qu)&&(c.push({type:6,index:s}),i.removeAttribute(h));if(tW.test(i.tagName)){const h=i.textContent.split(Qu),d=h.length-1;if(d>0){i.textContent=Ob?Ob.emptyScript:"";for(let f=0;f<d;f++)i.append(h[f],N2()),Ud.nextNode(),c.push({type:2,index:++s});i.append(h[d],N2())}}}else if(i.nodeType===8)if(i.data===eW)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(Qu,h+1))!==-1;)c.push({type:7,index:s}),h+=Qu.length-1}s++}}static createElement(e,t){const r=mf.createElement("template");return r.innerHTML=e,r}};function k0(n,e,t=n,r){if(e===O0)return e;let i=r!==void 0?t._$Co?.[r]:t._$Cl;const s=O2(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),s===void 0?i=void 0:(i=new s(n),i._$AT(n,t,r)),r!==void 0?(t._$Co??=[])[r]=i:t._$Cl=i),i!==void 0&&(e=k0(n,i._$AS(n,e.values),i,r)),e}class M4e{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,i=(e?.creationScope??mf).importNode(t,!0);Ud.currentNode=i;let s=Ud.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Oy(s,s.nextSibling,this,e):c.type===1?l=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(l=new O4e(s,this,e)),this._$AV.push(l),c=r[++a]}o!==c?.index&&(s=Ud.nextNode(),o++)}return Ud.currentNode=mf,i}p(e){let t=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class Oy{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,i){this.type=2,this._$AH=wi,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=k0(this,e,t),O2(e)?e===wi||e==null||e===""?(this._$AH!==wi&&this._$AR(),this._$AH=wi):e!==this._$AH&&e!==O0&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):T4e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==wi&&O2(this._$AH)?this._$AA.nextSibling.data=e:this.T(mf.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=TA.createElement(rW(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(t);else{const s=new M4e(i,this),o=s.u(this.options);s.p(t),this.T(o),this._$AH=s}}_$AC(e){let t=TO.get(e.strings);return t===void 0&&TO.set(e.strings,t=new TA(e)),t}k(e){S9(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,i=0;for(const s of e)i===t.length?t.push(r=new Oy(this.O(N2()),this.O(N2()),this,this.options)):r=t[i],r._$AI(s),i++;i<t.length&&(this._$AR(r&&r._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class Z5{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,i,s){this.type=1,this._$AH=wi,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=wi}_$AI(e,t=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=k0(this,e,t,0),o=!O2(e)||e!==this._$AH&&e!==O0,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=k0(this,a[r+c],t,c),l===O0&&(l=this._$AH[c]),o||=!O2(l)||l!==this._$AH[c],l===wi?e=wi:e!==wi&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===wi?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class R4e extends Z5{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===wi?void 0:e}}class P4e extends Z5{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==wi)}}class N4e extends Z5{constructor(e,t,r,i,s){super(e,t,r,i,s),this.type=5}_$AI(e,t=this){if((e=k0(this,e,t,0)??wi)===O0)return;const r=this._$AH,i=e===wi&&r!==wi||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==wi&&(r===wi||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}let O4e=class{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){k0(this,e)}};const k4e=x9.litHtmlPolyfillSupport;k4e?.(TA,Oy),(x9.litHtmlVersions??=[]).push("3.3.0");const D4e=(n,e,t)=>{const r=t?.renderBefore??e;let i=r._$litPart$;if(i===void 0){const s=t?.renderBefore??null;r._$litPart$=i=new Oy(e.insertBefore(N2(),s),s,void 0,t??{})}return i._$AI(n),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const A9=globalThis;let p3=class extends Bp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=D4e(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return O0}};p3._$litElement$=!0,p3.finalized=!0,A9.litElementHydrateSupport?.({LitElement:p3});const L4e=A9.litElementPolyfillSupport;L4e?.({LitElement:p3});(A9.litElementVersions??=[]).push("4.2.0");let dg,ph,mh;function Gje(n,e){dg=document.createElement("style"),ph=document.createElement("style"),mh=document.createElement("style"),dg.textContent=h0(n).core.cssText,ph.textContent=h0(n).dark.cssText,mh.textContent=h0(n).light.cssText,document.head.appendChild(dg),document.head.appendChild(ph),document.head.appendChild(mh),sW(e)}function sW(n){ph&&mh&&(n==="light"?(ph.removeAttribute("media"),mh.media="enabled"):(mh.removeAttribute("media"),ph.media="enabled"))}function U4e(n){dg&&ph&&mh&&(dg.textContent=h0(n).core.cssText,ph.textContent=h0(n).dark.cssText,mh.textContent=h0(n).light.cssText)}function h0(n){return{core:u0`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${qo(n?.["--w3m-color-mix-strength"]?`${n["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${qo(n?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${qo(n?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${qo(n?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${qo(n?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:u0`
      :root {
        --w3m-color-mix: ${qo(n?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${qo(kl(n,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${qo(kl(n,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:u0`
      :root {
        --w3m-color-mix: ${qo(n?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${qo(kl(n,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${qo(kl(n,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Kje=u0`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Yje=u0`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Xje=u0`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,m3={hexStringToNumber(n){const e=n.startsWith("0x")?n.slice(2):n;return parseInt(e,16)},numberToHexString(n){return`0x${n.toString(16)}`},async getUserInfo(n){const[e,t]=await Promise.all([m3.getAddresses(n),m3.getChainId(n)]);return{chainId:t,addresses:e}},async getChainId(n){const e=await n.request({method:"eth_chainId"});return Number(e)},async getAddress(n){const[e]=await n.request({method:"eth_accounts"});return e},async getAddresses(n){return await n.request({method:"eth_accounts"})},async addEthereumChain(n,e){const t=e.rpcUrls.chainDefault?.http||[];await n.request({method:"wallet_addEthereumChain",params:[{chainId:m3.numberToHexString(e.id),rpcUrls:[...t],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[mi.NetworkImageIds[e.id]]}]})}},fp={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},B4e={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},F4e={block:vie({format(n){return{transactions:n.transactions?.map(t=>{if(typeof t=="string")return t;const r=x5(t);return r.typeHex==="0x7e"&&(r.isSystemTx=t.isSystemTx,r.mint=t.mint?ka(t.mint):void 0,r.sourceHash=t.sourceHash,r.type="deposit"),r}),stateRoot:n.stateRoot}}}),transaction:yie({format(n){const e={};return n.type==="0x7e"&&(e.isSystemTx=n.isSystemTx,e.mint=n.mint?ka(n.mint):void 0,e.sourceHash=n.sourceHash,e.type="deposit"),e}}),transactionReceipt:Sse({format(n){return{l1GasPrice:n.l1GasPrice?ka(n.l1GasPrice):null,l1GasUsed:n.l1GasUsed?ka(n.l1GasUsed):null,l1Fee:n.l1Fee?ka(n.l1Fee):null,l1FeeScalar:n.l1FeeScalar?Number(n.l1FeeScalar):null}}})};function $4e(n,e){return V4e(n)?H4e(n):Fse(n,e)}const z4e={transaction:$4e};function H4e(n){W4e(n);const{sourceHash:e,data:t,from:r,gas:i,isSystemTx:s,mint:o,to:a,value:c}=n,l=[e,r,a??"0x",o?Ha(o):"0x",c?Ha(c):"0x",i?Ha(i):"0x",s?"0x1":"0x",t??"0x"];return au(["0x7e",Ch(l)])}function V4e(n){return n.type==="deposit"||typeof n.sourceHash<"u"}function W4e(n){const{from:e,to:t}=n;if(e&&!$i(e))throw new ao({address:e});if(t&&!$i(t))throw new ao({address:t})}const IO={blockTime:2e3,contracts:B4e,formatters:F4e,serializers:z4e},MO=B7({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),Q1=1,RO=B7({...IO,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...IO.contracts,disputeGameFactory:{[Q1]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[Q1]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[Q1]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[Q1]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:Q1}),PO=B7({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function ky(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}const D0=ky({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),IA=ky({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),MA=ky({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});ky({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});ky({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const q4e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},sa={getMethodsByChainNamespace(n){return q4e[n]||[]},createDefaultNamespace(n){return{methods:this.getMethodsByChainNamespace(n),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(n,e){if(!e)return{...n};const t={...n},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>r.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>r.add(i)),e.events&&Object.keys(e.events).forEach(i=>r.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[s]=i.split(":");s&&r.add(s)}),r.forEach(i=>{t[i]||(t[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,s])=>{t[i]&&(t[i].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([i,s])=>{t[i]&&(t[i].chains=s)}),e.events&&Object.entries(e.events).forEach(([i,s])=>{t[i]&&(t[i].events=s)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([s,o])=>{const[a,c]=s.split(":");!a||!c||!t[a]||(t[a].rpcMap||(t[a].rpcMap={}),i.has(a)||(t[a].rpcMap={},i.add(a)),t[a].rpcMap[c]=o)})}return t},createNamespaces(n,e){const t=n.reduce((r,i)=>{const{id:s,chainNamespace:o,rpcUrls:a}=i,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${s}`,u=r[o];switch(u.chains.push(l),l){case D0.caipNetworkId:u.chains.push(D0.deprecatedCaipNetworkId);break;case IA.caipNetworkId:u.chains.push(IA.deprecatedCaipNetworkId);break}return u?.rpcMap&&c&&(u.rpcMap[s]=c),r},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async n=>{const e=await tg.resolveName(n);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(n={}){return Object.values(n).flatMap(e=>{const t=e.chains||[],r=e.accounts.map(i=>{const[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...t,...r]))})},isSessionEventData(n){return typeof n=="object"&&n!==null&&"id"in n&&"topic"in n&&"params"in n&&typeof n.params=="object"&&n.params!==null&&"chainId"in n.params&&"event"in n.params&&typeof n.params.event=="object"&&n.params.event!==null},isOriginAllowed(n,e,t){for(const r of[...e,...t])if(r.includes("*")){const s=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(s,"u").test(n))return!0}else try{if(new URL(r).origin===n)return!0}catch{if(r===n)return!0}return!1},listenWcProvider({universalProvider:n,namespace:e,onConnect:t,onDisconnect:r,onAccountsChanged:i,onChainChanged:s,onDisplayUri:o}){t&&n.on("connect",()=>{const a=sa.getWalletConnectAccounts(n,e);t(a)}),r&&n.on("disconnect",()=>{r()}),i&&n.on("session_event",a=>{if(sa.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(h=>_t.isCaipAddress(h)).map(h=>Es.parseCaipAddress(h)).filter(h=>h.chainNamespace===e);i(u)}}}),s&&n.on("chainChanged",a=>{s(a)}),o&&n.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(n,e){const t=new Set,r=n?.session?.namespaces?.[e]?.accounts?.map(i=>Es.parseCaipAddress(i)).filter(({address:i})=>t.has(i.toLowerCase())?!1:(t.add(i.toLowerCase()),!0));return r&&r.length>0?r:[]}};class j4e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case _e.CHAIN.EVM:await this.syncEVMConnections(e);break;case _e.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case _e.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:t,universalProvider:r,getConnectionStatusInfo:i,onConnection:s,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=i(a.id);return!c&&l}).map(async a=>{if(a.id===_e.CONNECTOR_ID.WALLET_CONNECT){const c=sa.getWalletConnectAccounts(r,this.namespace),l=t.find(u=>u.chainNamespace===this.namespace&&u.id.toString()===c[0]?.chainId?.toString());c.length>0&&s({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await d3.fetchProviderData(a);if(c.length>0&&l){const u=t.find(h=>h.chainNamespace===this.namespace&&h.id.toString()===l.toString());s({connectorId:a.id,accounts:c.map(h=>({address:h})),caipNetwork:u}),a.provider&&a.id!==_e.CONNECTOR_ID.AUTH&&a.id!==_e.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:i,onConnection:s,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=i(a.id);return!c&&l}).map(async a=>{if(a.id===_e.CONNECTOR_ID.WALLET_CONNECT){const c=sa.getWalletConnectAccounts(r,this.namespace);c.length>0&&s({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:t})}else{const c=await a.connect({chainId:t?.id});c&&(s({connectorId:a.id,accounts:[{address:c}],caipNetwork:t}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:t,universalProvider:r,getConnectionStatusInfo:i,onConnection:s,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=i(a.id);return!c&&l}).map(async a=>{if(a.id===_e.CONNECTOR_ID.WALLET_CONNECT){const d=sa.getWalletConnectAccounts(r,this.namespace);d.length>0&&s({connectorId:a.id,accounts:d.map(f=>({address:f.address})),caipNetwork:t});return}const c=await a.connect();let u=(await a.getAccountAddresses())?.map(d=>_t.createAccount(_e.CHAIN.BITCOIN,d.address,d.purpose||"payment",d.publicKey,d.path));if(u&&u.length>1&&(u=[{namespace:_e.CHAIN.BITCOIN,publicKey:u[fp.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:u[fp.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:u[fp.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:_e.CHAIN.BITCOIN,publicKey:u[fp.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:u[fp.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:u[fp.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(a.chains.find(d=>d.id===t?.id)||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),s({connectorId:a.id,accounts:u.map(d=>({address:d.address,type:d.type})),caipNetwork:t}))}))}getConnection({address:e,connectorId:t,connections:r,connectors:i}){if(t){const o=r.find(l=>Kr.isLowerCaseMatch(l.connectorId,t));if(!o)return null;const a=i.find(l=>Kr.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Kr.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const s=r.find(o=>o.accounts.length>0&&i.some(a=>Kr.isLowerCaseMatch(a.id,o.connectorId)));if(s){const[o]=s.accounts,a=i.find(c=>Kr.isLowerCaseMatch(c.id,s.connectorId));return{...s,account:o,connector:a}}return null}}const Rm={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class J5{constructor({provider:e,namespace:t}){this.id=_e.CONNECTOR_ID.WALLET_CONNECT,this.name=mi.ConnectorNamesMap[_e.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=mi.ConnectorImageIds[_e.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=ee.getCaipNetworks.bind(ee),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const t=this.getCaipNetworks(),r=Fe.state.universalProviderConfigOverride,i=sa.createNamespaces(t,r);await this.provider.connect({optionalNamespaces:i})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(t=>t.caipNetworkId);return xo.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:G4e})}}const G4e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],K4e=[_e.CONNECTOR_ID.AUTH,_e.CONNECTOR_ID.WALLET_CONNECT];class C9{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=t=>ee.getCaipNetworks(t),this.getConnectorId=t=>rt.getConnectorId(t),e&&this.construct(e),e?.namespace&&(this.connectionManager=new j4e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:t}){const r=this.getCaipNetworks().filter(i=>i.chainNamespace===this.namespace).find(i=>i.id.toString()===t?.toString());e&&r&&this.addConnection({connectorId:_e.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:_e.CONNECTOR_ID.AUTH,type:"AUTH",name:_e.CONNECTOR_NAMES.AUTH,provider:e,imageId:mi.ConnectorImageIds[_e.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>t.has(r.id)?!1:(t.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const t=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>t.has(r.connectorId.toLowerCase())?!1:(t.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(t=>!Kr.isLowerCaseMatch(t.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,t){At.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){const r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){const r=this.eventListeners.get(e);r&&r.forEach(i=>i(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:t,providerType:r}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){i.setDefaultChain(t.caipNetworkId);return}if(i&&r==="AUTH"){const s=i,o=Ms(t.chainNamespace);await s.switchNetwork({chainId:t.caipNetworkId});const a=await s.getUser({chainId:t.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(t=>t instanceof J5);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,t){if(e.length>0){const{address:r,chainId:i}=_t.getAccount(e[0]),s=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===i?.toString()),o=this.connectors.find(a=>a.id===t);r&&(this.emit("accountChanged",{address:r,chainId:i,connector:o}),this.addConnection({connectorId:t,accounts:e.map(a=>{const{address:c}=_t.getAccount(a);return{address:c}}),caipNetwork:s}))}}onAccountsChanged(e,t,r=!0){if(e.length>0){const{address:i}=_t.getAccount(e[0]),s=this.connectionManager?.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors});i&&Kr.isLowerCaseMatch(this.getConnectorId(_e.CHAIN.EVM),t)&&this.emit("accountChanged",{address:i,chainId:s?.caipNetwork?.id,connector:s?.connector}),this.addConnection({connectorId:t,accounts:e.map(o=>{const{address:a}=_t.getAccount(o);return{address:a}}),caipNetwork:s?.caipNetwork})}else r&&this.onDisconnect(t)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Kr.isLowerCaseMatch(this.getConnectorId(_e.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,t){const r=typeof e=="string"&&e.startsWith("0x")?m3.hexStringToNumber(e).toString():e.toString(),i=this.connectionManager?.getConnection({connectorId:t,connections:this.connections,connectors:this.connectors}),s=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===r);i&&this.addConnection({connectorId:t,accounts:i.accounts,caipNetwork:s}),Kr.isLowerCaseMatch(this.getConnectorId(_e.CHAIN.EVM),t)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,t){if(K4e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),i=o=>this.onChainChanged(o,e),s=()=>this.onDisconnect(e);this.providerHandlers[e]||(t.on("disconnect",s),t.on("accountsChanged",r),t.on("chainChanged",i),this.providerHandlers[e]={provider:t,disconnect:s,accountsChanged:r,chainChanged:i})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:t,disconnect:r,accountsChanged:i,chainChanged:s}=this.providerHandlers[e];t.removeListener("disconnect",r),t.removeListener("accountsChanged",i),t.removeListener("chainChanged",s),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[t]=e.accounts;this.emit("accountChanged",{address:t?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}}class Y4e extends C9{async setUniversalProvider(e){return this.addConnector(new J5({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const r=this.provider?.session?.namespaces?.[e]?.accounts?.map(i=>{const[,,s]=i.split(":");return s}).filter((i,s,o)=>o.indexOf(i)===s)||[];return Promise.resolve({accounts:r.map(i=>_t.createAccount(e,i,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&Ln.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(At.state.balanceLoading&&e.chainId===ee.state.activeCaipNetwork?.id)return{balance:At.state.balance||"0.00",symbol:At.state.balanceSymbol||""};const i=(await At.fetchTokenBalance()).find(s=>s.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&s.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:t,message:r,address:i}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return ee.state.activeCaipNetwork?.chainNamespace===_e.CHAIN.SOLANA?s=(await t.request({method:"solana_signMessage",params:{message:ii.encode(new TextEncoder().encode(r)),pubkey:i}},ee.state.activeCaipNetwork?.caipNetworkId)).signature:s=await t.request({method:"personal_sign",params:[r,i]},ee.state.activeCaipNetwork?.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===_e.CHAIN.EVM)try{await r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:Ha(t.id)}]})}catch(i){if(i.code===Rm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===Rm.ERROR_INVALID_CHAIN_ID||i.code===Rm.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===Rm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:Ha(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(r=>r.type==="WALLET_CONNECT")?.provider}}const X4e=["email","socials","swaps","onramp","activity","reownBranding","multiWallet"],zw={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!n?.config)return!1;const e=n.config;return!!n.isEnabled&&e.includes("email")},processFallback:n=>n===void 0?Ln.DEFAULT_REMOTE_FEATURES.email:!!n},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!n?.config)return!1;const e=n.config;return n.isEnabled&&e.length>0?e.filter(t=>t!=="email"):!1},processFallback:n=>n===void 0?Ln.DEFAULT_REMOTE_FEATURES.socials:typeof n=="boolean"?n?Ln.DEFAULT_REMOTE_FEATURES.socials:!1:n},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!n?.config)return!1;const e=n.config;return n.isEnabled&&e.length>0?e:!1},processFallback:n=>n===void 0?Ln.DEFAULT_REMOTE_FEATURES.swaps:typeof n=="boolean"?n?Ln.DEFAULT_REMOTE_FEATURES.swaps:!1:n},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>{if(!n?.config)return!1;const e=n.config;return n.isEnabled&&e.length>0?e:!1},processFallback:n=>n===void 0?Ln.DEFAULT_REMOTE_FEATURES.onramp:typeof n=="boolean"?n?Ln.DEFAULT_REMOTE_FEATURES.onramp:!1:n},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:n=>n===void 0?Ln.DEFAULT_REMOTE_FEATURES.activity:!!n},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:n=>n===void 0?Ln.DEFAULT_REMOTE_FEATURES.reownBranding:!!n},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:n=>!!n.isEnabled,processFallback:()=>Ln.DEFAULT_REMOTE_FEATURES.multiWallet}},Z4e={localSettingsOverridden:new Set,getApiConfig(n,e){return e?.find(t=>t.id===n)},addWarning(n,e){if(n!==void 0){const t=zw[e],r=t.isLegacy?`"features.${t.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(n,e,t,r,i){const s=zw[n],o=e[s.localFeatureName];if(i&&!s.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(s.apiFeatureName,t);return a?.config===null?this.processFallbackFeature(n,o):a?.config?(o!==void 0&&this.addWarning(o,n),this.processApiFeature(n,a)):!1}return this.processFallbackFeature(n,o)},processApiFeature(n,e){return zw[n].processApi(e)},processFallbackFeature(n,e){return zw[n].processFallback(e)},async fetchRemoteFeatures(n){const e=n.basic??!1,t=n.features||{};this.localSettingsOverridden.clear();let r=null,i=!1;try{r=await Nt.fetchProjectConfig(),i=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const s=i&&!e?Ln.DEFAULT_REMOTE_FEATURES:Ln.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of X4e){const a=this.processFeature(o,t,r,i,e);Object.assign(s,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Ln.DEFAULT_REMOTE_FEATURES}if(i&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;ir.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return s}};class J4e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(t,r)=>{if(t){const i=ee.getNetworkData(t)?.requestedCaipNetworks?.find(a=>a.id===r);if(i)return i;const s=ee.getNetworkData(t)?.caipNetwork;return s||ee.getRequestedCaipNetworks(t).filter(a=>a.chainNamespace===t)?.[0]}return ee.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>ee.getCaipNetworks(t),this.getActiveChainNamespace=()=>ee.state.activeChain,this.setRequestedCaipNetworks=(t,r)=>{ee.setRequestedCaipNetworks(t,r)},this.getApprovedCaipNetworkIds=()=>ee.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>ee.state.activeChain===t||!t?ee.state.activeCaipAddress:ee.getAccountProp("caipAddress",t),this.setClientId=t=>{Lt.setClientId(t)},this.getProvider=t=>kn.getProvider(t),this.getProviderType=t=>kn.getProviderId(t),this.getPreferredAccountType=t=>Ms(t),this.setCaipAddress=(t,r)=>{At.setCaipAddress(t,r)},this.setBalance=(t,r,i)=>{At.setBalance(t,r,i)},this.setProfileName=(t,r)=>{At.setProfileName(t,r)},this.setProfileImage=(t,r)=>{At.setProfileImage(t,r)},this.setUser=(t,r)=>{At.setUser(t,r)},this.resetAccount=t=>{At.resetAccount(t)},this.setCaipNetwork=t=>{ee.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,r)=>{ee.setChainNetworkData(r,{caipNetwork:t})},this.setStatus=(t,r)=>{At.setStatus(t,r),rt.isConnected()?je.setConnectionStatus("connected"):je.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>ee.getAccountProp("address",t),this.setConnectors=t=>{const r=[...rt.state.allConnectors,...t];rt.setConnectors(r)},this.setConnections=(t,r)=>{je.setConnections(t,r),ct.setConnections(t,r)},this.fetchIdentity=t=>Lt.fetchIdentity(t),this.getReownName=t=>tg.getNamesForAddress(t),this.getConnectors=()=>rt.getConnectors(),this.getConnectorImage=t=>cF.getConnectorImage(t),this.getConnections=t=>this.remoteFeatures.multiWallet?tb.getConnectionsData(t).connections:(ir.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=t=>this.remoteFeatures.multiWallet?tb.getConnectionsData(t).recentConnections:(ir.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async t=>{if(!this.remoteFeatures.multiWallet){ir.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await ct.switchConnection(t)},this.deleteConnection=t=>{if(!this.remoteFeatures.multiWallet){ir.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}je.deleteAddressFromConnection(t),ct.syncStorageConnections()},this.setConnectedWalletInfo=(t,r)=>{const i=kn.getProviderId(r),s=t?{...t,type:i}:void 0;At.setConnectedWalletInfo(s,r)},this.getIsConnectedState=()=>!!ee.state.activeCaipAddress,this.addAddressLabel=(t,r,i)=>{At.addAddressLabel(t,r,i)},this.removeAddressLabel=(t,r)=>{At.removeAddressLabel(t,r)},this.getAddress=t=>ee.state.activeChain===t||!t?At.state.address:ee.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>ee.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{ee.resetNetwork(t)},this.addConnector=t=>{rt.addConnector(t)},this.resetWcConnection=()=>{ct.resetWcConnection()},this.setAddressExplorerUrl=(t,r)=>{At.setAddressExplorerUrl(t,r)},this.setSmartAccountDeployed=(t,r)=>{At.setSmartAccountDeployed(t,r)},this.setPreferredAccountType=(t,r)=>{ee.setAccountProp("preferredAccountType",t,r)},this.setEIP6963Enabled=t=>{Fe.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){const r=e?.map(s=>s.namespace).filter(s=>!!s);if(r?.length)return[...new Set(r)];const i=t?.map(s=>s.chainNamespace);return[...new Set(i)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),Fe.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await Z4e.fetchRemoteFeatures(e),Fe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&CS.setOnrampProviders(this.remoteFeatures.onramp),(Fe.state.remoteFeatures?.email||Array.isArray(Fe.state.remoteFeatures?.socials)&&Fe.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Nt.fetchAllowedOrigins();if(!e||!_t.isClient()){ir.open(gr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const t=window.location.origin;sa.isOriginAllowed(t,e,Rm.DEFAULT_ALLOWED_ANCESTORS)||ir.open(gr.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){ir.open(gr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":ir.open(gr.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const t=e.cause instanceof Error?e.cause:e;ir.open({shortMessage:gr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:gr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(t.message)},"error");break}default:ir.open(gr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){const{...t}=e;delete t.adapters,delete t.universalProvider,qn.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(r=>r.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ks.setThemeMode(e.themeMode),e.themeVariables&&Ks.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");ee.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const t=this.getDefaultNetwork();t&&ee.setActiveCaipNetwork(t)}initializeConnectionController(e){ct.initialize(e.adapters??[]),ct.setWcBasic(e.basic??!1)}initializeConnectorController(){rt.initialize(this.chainNamespaces)}initializeProjectSettings(e){Fe.setProjectId(e.projectId),Fe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){Fe.setDebug(e.debug!==!1),Fe.setEnableWalletConnect(e.enableWalletConnect!==!1),Fe.setEnableWalletGuide(e.enableWalletGuide!==!1),Fe.setEnableWallets(e.enableWallets!==!1),Fe.setEIP6963Enabled(e.enableEIP6963!==!1),Fe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),Fe.setEnableReconnect(e.enableReconnect!==!1),Fe.setEnableAuthLogger(e.enableAuthLogger!==!1),Fe.setCustomRpcUrls(e.customRpcUrls),Fe.setEnableEmbedded(e.enableEmbedded),Fe.setAllWallets(e.allWallets),Fe.setIncludeWalletIds(e.includeWalletIds),Fe.setExcludeWalletIds(e.excludeWalletIds),Fe.setFeaturedWalletIds(e.featuredWalletIds),Fe.setTokens(e.tokens),Fe.setTermsConditionsUrl(e.termsConditionsUrl),Fe.setPrivacyPolicyUrl(e.privacyPolicyUrl),Fe.setCustomWallets(e.customWallets),Fe.setFeatures(e.features),Fe.setAllowUnsupportedChain(e.allowUnsupportedChain),Fe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),Fe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),Fe.setDefaultAccountTypes(e.defaultAccountTypes);const t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),Fe.setMetadata(e.metadata),Fe.setDisableAppend(e.disableAppend),Fe.setEnableEmbedded(e.enableEmbedded),Fe.setSIWX(e.siwx),!e.projectId){ir.open(gr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(i=>i.namespace===_e.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");Fe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return _t.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const r=Tc.getUnsupportedNetwork(`${t}:${e}`);ee.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Tc.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return Tc.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return Tc.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const t=e.networks.find(i=>i.id===e.defaultNetwork?.id);return t?Tc.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,t){try{this.setLoading(!0,e);let r={connections:[]};const i=this.getAdapter(e),{caipAddress:s}=ee.getAccountData(e)||{};return(s||!Fe.state.enableReconnect)&&i?.disconnect&&(r=await i.disconnect({id:t})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=ee.state.activeChain,t=this.getAdapter(e),r=this.getCaipNetwork(e)?.id,i=ct.getConnections(e),s=this.remoteFeatures.multiWallet,o=i.length>0;if(!t)throw new Error("Adapter not found");const a=await t.connectWalletConnect(r);(!o||!s)&&this.close(),this.setClientId(a?.clientId||null),je.setConnectedNamespaces([...ee.state.chains.keys()]),await this.syncWalletConnectAccount(),await xo.initializeIfEnabled()},connectExternal:async({id:e,address:t,info:r,type:i,provider:s,chain:o,caipNetwork:a,socialUri:c})=>{const l=ee.state.activeChain,u=o||l,h=this.getAdapter(u);if(o&&o!==l&&!a){const p=this.getCaipNetworks().find(m=>m.chainNamespace===o);p&&this.setCaipNetwork(p)}if(!h)throw new Error("Adapter not found");const d=this.getCaipNetwork(u),f=await h.connect({id:e,address:t,info:r,type:i,provider:s,socialUri:c,chainId:a?.id||d?.id,rpcUrl:a?.rpcUrls?.default?.http?.[0]||d?.rpcUrls?.default?.http?.[0]});if(f)return je.addConnectedNamespace(u),this.syncProvider({...f,chainNamespace:u}),this.setStatus("connected",u),this.syncConnectedWalletInfo(u),je.removeDisconnectedConnectorId(e,u),{address:f.address}},reconnectExternal:async({id:e,info:t,type:r,provider:i})=>{const s=ee.state.activeChain,o=this.getAdapter(s);o?.reconnect&&(await o?.reconnect({id:e,info:t,type:r,provider:i,chainId:this.getCaipNetwork()?.id}),je.addConnectedNamespace(s),this.syncConnectedWalletInfo(s))},disconnect:async e=>{const{id:t,chainNamespace:r,initialDisconnect:i}=e||{},s=Array.from(ee.state.chains.keys()),o=rt.getConnectorId(r||ee.state.activeChain),a=t===_e.CONNECTOR_ID.AUTH||o===_e.CONNECTOR_ID.AUTH,c=t===_e.CONNECTOR_ID.WALLET_CONNECT||o===_e.CONNECTOR_ID.WALLET_CONNECT;try{let l=r?[r]:s;(c||a)&&(l=s);const u=l.map(async f=>{let p=t;(c||a)&&!t&&(p=o),i&&a&&(je.deleteConnectedSocialProvider(),l.forEach(g=>{je.addDisconnectedConnectorId(p||"",g)}));const m=await this.disconnectNamespace(f,p);m&&m.connections.forEach(g=>{g.connectorId===_e.CONNECTOR_ID.AUTH&&je.deleteConnectedSocialProvider(),je.addDisconnectedConnectorId(g.connectorId,f)}),i&&this.onDisconnectNamespace({chainNamespace:f,closeModal:!1})}),h=await Promise.allSettled(u);On.resetSend(),ct.resetWcConnection(),xo.getSIWX()?.signOutOnDisconnect&&await xo.clearSessions(),rt.setFilterByNamespace(void 0),ct.syncStorageConnections();const d=h.filter(f=>f.status==="rejected");if(d.length>0)throw new Error(d.map(f=>f.reason.message).join(", "));qn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(l){throw new Error(`Failed to disconnect chains: ${l.message}`)}},checkInstalled:e=>e?e.some(t=>!!window.ethereum?.[String(t)]):!!window.ethereum,signMessage:async e=>(await this.getAdapter(ee.state.activeChain)?.signMessage({message:e,address:At.state.address,provider:kn.getProvider(ee.state.activeChain)}))?.signature||"",sendTransaction:async e=>{const t=e.chainNamespace;if(Ln.SEND_SUPPORTED_NAMESPACES.includes(t)){const r=this.getAdapter(ee.state.activeChain),i=kn.getProvider(t);return(await r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:i}))?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===_e.CHAIN.EVM){const t=this.getAdapter(ee.state.activeChain),r=kn.getProvider(ee.state.activeChain),i=this.getCaipNetwork();if(!i)throw new Error("CaipNetwork is undefined");return(await t?.estimateGas({...e,provider:r,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.syncIdentity({address:At.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:ee.state.activeChain}),At.state.profileImage||!1),getEnsAddress:async e=>await sa.resolveReownName(e),writeContract:async e=>{const t=this.getAdapter(ee.state.activeChain),r=this.getCaipNetwork(),i=this.getCaipAddress(),s=kn.getProvider(ee.state.activeChain);if(!r||!i)throw new Error("CaipNetwork or CaipAddress is undefined");return(await t?.writeContract({...e,caipNetwork:r,provider:s,caipAddress:i}))?.hash},parseUnits:(e,t)=>this.getAdapter(ee.state.activeChain)?.parseUnits({value:e,decimals:t})??0n,formatUnits:(e,t)=>this.getAdapter(ee.state.activeChain)?.formatUnits({value:e,decimals:t})??"0",getCapabilities:async e=>await this.getAdapter(ee.state.activeChain)?.getCapabilities(e),grantPermissions:async e=>await this.getAdapter(ee.state.activeChain)?.grantPermissions(e),revokePermissions:async e=>{const t=this.getAdapter(ee.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>await this.getAdapter(ee.state.activeChain)?.walletGetAssets(e)??{},updateBalance:e=>{const t=this.getCaipNetwork(e);!t||!At.state.address||this.updateNativeBalance(At.state.address,t?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ct.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(kn.getProviderId(ee.state.activeChain)===dr.CONNECTOR_TYPE_WALLET_CONNECT){const t=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(t)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=kn.getProvider(t),s=kn.getProviderId(t);if(e.chainNamespace===ee.state.activeChain)await this.getAdapter(t)?.switchNetwork({caipNetwork:e,provider:i,providerType:s});else if(this.setCaipNetwork(e),s===dr.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(t);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{const r=t.chains||[],i=t.accounts.map(s=>{const{chainId:o,chainNamespace:a}=Es.parseCaipAddress(s);return`${a}:${o}`});return Array.from(new Set([...r,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,r)=>{const i=e?.find(s=>s.namespace===r);return i?(i.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[r]=i):t[r]=new Y4e({namespace:r,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const r=je.getConnectionStatus();Fe.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(je.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),t.on("switchNetwork",({address:i,chainId:s})=>{const o=this.getCaipNetworks().find(l=>l.id.toString()===s.toString()||l.caipNetworkId.toString()===s.toString()),a=ee.state.activeChain===e,c=ee.getAccountProp("address",e);if(o){const l=a&&i?i:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),t.on("disconnect",()=>{this.onDisconnectNamespace({chainNamespace:e})}),t.on("connections",i=>{this.setConnections(i,e)}),t.on("pendingTransactions",()=>{const i=At.state.address,s=ee.state.activeCaipNetwork;!i||!s?.id||this.updateNativeBalance(i,s.id,s.chainNamespace)}),t.on("accountChanged",({address:i,chainId:s,connector:o})=>{const a=ee.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),a&&s?this.syncAccount({address:i,chainId:s,chainNamespace:e}):a&&ee.state.activeCaipNetwork?.id?this.syncAccount({address:i,chainId:ee.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(i,s,e),je.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>ct.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===_e.CHAIN.EVM&&_t.isSafeApp()&&rt.setConnectorId(_e.CONNECTOR_ID.SAFE,e);const t=rt.getConnectorId(e);switch(this.setStatus("connecting",e),t){case _e.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case _e.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:t,closeModal:r}=e||{};ee.resetAccount(t),ee.resetNetwork(t),rt.removeConnectorId(t),je.removeConnectedNamespace(t),kn.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t),r!==!1&&Rn.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const t=this.getCaipAddress(e),r=this.getCaipNetwork(e);return this.chainAdapters?.[e].syncConnections({connectToFirstConnector:!t,caipNetwork:r,getConnectorStorageInfo(i){const o=je.getConnections()[e]??[];return{hasDisconnected:je.isConnectorDisconnected(i,e),hasConnected:o.some(a=>Kr.isLowerCaseMatch(a.connectorId,i))}}})}))}async syncAdapterConnection(e){const t=this.getAdapter(e),r=rt.getConnectorId(e),i=this.getCaipNetwork(e),o=rt.getConnectors(e).find(a=>a.id===r);try{if(!t||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!i?.id)throw new Error("CaipNetwork not found");const a=await t?.syncConnection({namespace:e,id:o.id,chainId:i.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),t=this.chainNamespaces.map(async r=>{const i=this.getAdapter(r),s=this.universalProvider?.session?.namespaces?.[r]?.accounts||[],o=ee.state.activeCaipNetwork?.id,a=s.find(c=>{const{chainId:l}=Es.parseCaipAddress(c);return l===o?.toString()})||s[0];if(a){const c=Es.validateCaipAddress(a),{chainId:l,address:u}=Es.parseCaipAddress(c);if(kn.setProviderId(r,dr.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&ee.state.activeCaipNetwork&&i?.namespace!==_e.CHAIN.EVM){const h=i?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:ee.state.activeCaipNetwork});kn.setProvider(r,h)}else kn.setProvider(r,this.universalProvider);rt.setConnectorId(_e.CONNECTOR_ID.WALLET_CONNECT,r),je.addConnectedNamespace(r),await this.syncAccount({address:u,chainId:l,chainNamespace:r})}else e.includes(r)&&this.setStatus("disconnected",r);this.syncConnectedWalletInfo(r),await ee.setApprovedCaipNetworksData(r)});await Promise.all(t)}syncProvider({type:e,provider:t,id:r,chainNamespace:i}){kn.setProviderId(i,e),kn.setProvider(i,t),rt.setConnectorId(r,i)}async syncAccount(e){const t=e.chainNamespace===ee.state.activeChain,r=ee.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:a}=je.getActiveNetworkProps(),c=s||a,l=ee.state.activeCaipNetwork?.name===_e.UNSUPPORTED_NETWORK_NAME,u=ee.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let h=this.getCaipNetworks().find(p=>p.id.toString()===c.toString()),d=this.getCaipNetworks().find(p=>p.chainNamespace===o);if(!u&&!h&&!d){const p=this.getApprovedCaipNetworkIds()||[],m=p.find(y=>Es.parseCaipNetworkId(y)?.chainId===c.toString()),g=p.find(y=>Es.parseCaipNetworkId(y)?.chainNamespace===o);h=this.getCaipNetworks().find(y=>y.caipNetworkId===m),d=this.getCaipNetworks().find(y=>y.caipNetworkId===g||"deprecatedCaipNetworkId"in y&&y.deprecatedCaipNetworkId===g)}const f=h||d;f?.chainNamespace===ee.state.activeChain?Fe.state.enableNetworkSwitch&&!Fe.state.allowUnsupportedChain&&ee.state.activeCaipNetwork?.name===_e.UNSUPPORTED_NETWORK_NAME?ee.showUnsupportedChainUI():this.setCaipNetwork(f):t||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Kr.isLowerCaseMatch(i,At.state.address)||this.syncAccountInfo(i,f?.id,o),t?await this.syncBalance({address:i,chainId:f?.id,chainNamespace:o}):await this.syncBalance({address:i,chainId:r?.id,chainNamespace:o})}}async syncAccountInfo(e,t,r){const i=this.getCaipAddress(r),s=t||i?.split(":")[1];if(!s)return;const o=`${r}:${s}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:s,chainNamespace:r})}async syncReownName(e,t){try{const r=await this.getReownName(e);if(r[0]){const i=r[0];this.setProfileName(i.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){const t=rt.getConnectorId(e),r=kn.getProviderId(e);if(r===dr.CONNECTOR_TYPE_ANNOUNCED||r===dr.CONNECTOR_TYPE_INJECTED){if(t){const i=this.getConnectors().find(s=>{const o=s.id===t,a=s.info?.rdns===t,c=s.connectors?.some(l=>l.id===t||l.info?.rdns===t);return o||a||!!c});if(i){const{info:s,name:o,imageUrl:a}=i,c=a||this.getConnectorImage(i);this.setConnectedWalletInfo({name:o,icon:c,...s},e)}}}else if(r===dr.CONNECTOR_TYPE_WALLET_CONNECT){const i=kn.getProvider(e);i?.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:i.session.peer.metadata.icons?.[0]},e)}else if(t&&t===_e.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(s=>s.id===_e.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!Hg.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>r.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,r){const i=this.getAdapter(r),s=ee.getCaipNetworkByNamespace(r,t);if(i){const o=await i.getBalance({address:e,chainId:t,caipNetwork:s,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){const e=qbe.createLogger((r,...i)=>{r&&this.handleAlertError(r),console.error(...i)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};Fe.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await Hbe.init(t),Fe.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{sa.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:t=>{ct.setUri(t)},onConnect:()=>{ct.finalizeWcConnection()},onDisconnect:()=>{ee.state.noAdapters&&this.resetAccount(e),ct.resetWcConnection()},onChainChanged:t=>{const r=ee.state.activeChain,i=rt.state.activeConnectorIds[r]===_e.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(ee.state.noAdapters||i)){const s=this.getCaipNetworks().find(a=>a.id.toString()===t.toString()||a.caipNetworkId.toString()===t.toString()),o=this.getCaipNetwork();if(!s){this.setUnsupportedNetwork(t);return}o?.id.toString()!==s?.id.toString()&&o?.chainNamespace===s?.chainNamespace&&this.setCaipNetwork(s)}},onAccountsChanged:t=>{const r=ee.state.activeChain,i=rt.state.activeConnectorIds[r]===_e.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(ee.state.noAdapters||i)&&t.length>0){const s=t[0];this.syncAccount({address:s.address,chainId:s.chainId,chainNamespace:s.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&_t.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){qn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const t=Object.entries(gr.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,i]=t??[],{message:s,alertErrorKey:o}=i??{};if(r&&s&&!this.reportedAlertErrors[r]){const a=gr.ALERT_ERRORS[o];a&&(ir.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const r=e;r.namespace=t,r.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=r)}async open(e){if(await this.injectModalUi(),e?.uri&&ct.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return Rn.open({...e,data:{swap:e.arguments}})}return Rn.open(e)}async close(){await this.injectModalUi(),Rn.close()}setLoading(e,t){Rn.setLoading(e,t)}async disconnect(e){await ct.disconnect({namespace:e})}getSIWX(){return Fe.state.siwx}getError(){return""}getChainId(){return ee.state.activeCaipNetwork?.id}async switchNetwork(e){const t=this.getCaipNetworks().find(r=>r.id===e.id);if(!t){ir.open(gr.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await ee.switchActiveNetwork(t)}getWalletProvider(){return ee.state.activeChain?kn.state.providers[ee.state.activeChain]:null}getWalletProviderType(){return kn.getProviderId(ee.state.activeChain)}subscribeProviders(e){return kn.subscribeProviders(e)}getThemeMode(){return Ks.state.themeMode}getThemeVariables(){return Ks.state.themeVariables}setThemeMode(e){Ks.setThemeMode(e),sW(Ks.state.themeMode)}setTermsConditionsUrl(e){Fe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){Fe.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ks.setThemeVariables(e),U4e(Ks.state.themeVariables)}subscribeTheme(e){return Ks.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?ct.subscribe(e):(ir.open(_e.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?ee.getAccountProp("connectedWalletInfo",e):At.state.connectedWalletInfo}getAccount(e){const t=rt.getAuthConnector(e),r=ee.getAccountData(e),i=ee.state.activeChain,s=je.getConnectedConnectorId(e||i),a=ct.getConnections(e).flatMap(c=>c.accounts.map(({address:l,type:u})=>_t.createAccount(e,l,u||"eoa")));if(r)return{allAccounts:a,caipAddress:r.caipAddress,address:_t.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:t&&s===_e.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:je.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:Ms(e||i),isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,t){const r=()=>{const i=this.getAccount(t);i&&e(i)};t?ee.subscribeChainProp("accountState",r,t):ee.subscribe(r),rt.subscribe(r)}subscribeNetwork(e){return ee.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e,t){return t?At.subscribeKey("connectedWalletInfo",e,t):At.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){At.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){ee.subscribeKey("activeCaipNetwork",e)}getState(){return Oc.state}getRemoteFeatures(){return Fe.state.remoteFeatures}subscribeState(e){return Oc.subscribe(e)}subscribeRemoteFeatures(e){return Fe.subscribeKey("remoteFeatures",e)}showErrorMessage(e){Ic.showError(e)}showSuccessMessage(e){Ic.showSuccess(e)}getEvent(){return{...qn.state}}subscribeEvents(e){return qn.subscribe(e)}replace(e){Wt.replace(e)}redirect(e){Wt.push(e)}popTransactionStack(e){Wt.popTransactionStack(e)}isOpen(){return Rn.state.open}isTransactionStackEmpty(){return Wt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){Fe.setFeatures(e)}updateRemoteFeatures(e){Fe.setRemoteFeatures(e)}updateOptions(e){const r={...Fe.state||{},...e};Fe.setOptions(r)}setConnectMethodsOrder(e){Fe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){Fe.setWalletFeaturesOrder(e)}setCollapseWallets(e){Fe.setCollapseWallets(e)}setSocialsOrder(e){Fe.setSocialsOrder(e)}getConnectMethodsOrder(){return AA.getConnectOrderMethod(Fe.state.features,rt.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(i=>i.id===r.id)||ee.addNetwork(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(i=>i.id===t)&&ee.removeNetwork(e,t)}}let NO=!1;class Q4e extends J4e{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await xo.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const t=ee.state.activeChain,r=t===_e.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,i=Fe.state.defaultAccountTypes[t],s=Ms(t),o=e.preferredAccountType||s||i;Kr.isLowerCaseMatch(e.address,At.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:t}),this.setCaipAddress(r,t);const{signature:a,siwxMessage:c,message:l,...u}=e;this.setUser({...At.state.user||{},...u},t),this.setSmartAccountDeployed(!!e.smartAccountDeployed,t),this.setPreferredAccountType(o,t),this.setLoading(!1,t)}setupAuthConnectorListeners(e){e.onRpcRequest(t=>{So.checkIfRequestExists(t)?So.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(ai.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(ai.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((t,r)=>{const i=So.checkIfRequestIsSafe(r),s=At.state.address,o=ee.state.activeCaipNetwork;i||(s&&o?.id&&this.updateNativeBalance(s,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const t=ee.state.activeChain;rt.getConnectorId(t)===_e.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:t,type:r})=>{t&&this.setPreferredAccountType(r,ee.state.activeChain)})}async syncAuthConnectorTheme(e){if(!e)return;const t=Ks.getSnapshot(),r=Fe.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:t.themeMode,themeVariables:t.themeVariables,w3mThemeVariables:kl(t.themeVariables,t.themeMode)})])}async syncAuthConnector(e,t){const r=_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t),i=t===ee.state.activeChain;if(!r)return;this.setLoading(!0,t);const s=e.getLoginEmailUsed();this.setLoading(s,t),s&&this.setStatus("connecting",t);const o=e.getEmail(),a=e.getUsername();this.setUser({...At.state?.user||{},username:a,email:o},t),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),t&&r&&i){const l=await e.getSmartAccountEnabledNetworks();ee.setSmartAccountEnabledNetworks(l?.smartAccountEnabledNetworks||[],t),c&&this.connectionControllerClient?.connectExternal?(await this.connectionControllerClient?.connectExternal({id:_e.CONNECTOR_ID.AUTH,info:{name:_e.CONNECTOR_ID.AUTH},type:dr.CONNECTOR_TYPE_AUTH,provider:e,chainId:ee.state.activeCaipNetwork?.id,chain:t}),this.setStatus("connected",t)):rt.getConnectorId(t)===_e.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),je.removeConnectedNamespace(t))}this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!_t.isTelegram())return;const t=je.getTelegramSocialProvider();if(!t||!_t.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;At.setSocialProvider(t,e),await this.authProvider?.init();const s=rt.getAuthConnector();t&&s&&(this.setLoading(!0,e),await ct.connectExternal({id:s.id,type:s.type,socialUri:i},s.chain),je.setConnectedSocialProvider(t),je.removeTelegramSocialProvider(),qn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{const t=new URL(window.location.href);t.searchParams.delete("result_uri"),window.history.replaceState({},document.title,t.toString())}catch(t){console.error("tma social login failed",t)}}createAuthProvider(e){if(!_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=this.remoteFeatures?.email,i=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,s=r||i,a=Kr.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&s&&(this.authProvider=Kd.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:gr.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?ir.open(gr.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?ir.open(gr.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&ir.open(gr.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>ee.getActiveCaipNetwork(l)}),Oc.subscribeOpen(l=>{!l&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const c=e===ee.state.activeChain&&Fe.state.enableReconnect;Fe.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Nt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const t=ee.state.activeChain,r=e.chainNamespace,i=this.getAddressByChainNamespace(r);if(r===t&&i){const o=this.getAdapter(r),a=kn.getProvider(r),c=kn.getProviderId(r);await o?.switchNetwork({caipNetwork:e,provider:a,providerType:c}),this.setCaipNetwork(e)}else{const a=kn.getProviderId(t)===dr.CONNECTOR_TYPE_AUTH,c=kn.getProviderId(r),l=c===dr.CONNECTOR_TYPE_AUTH,u=_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((a&&c===void 0||l)&&u)try{ee.state.activeChain=e.chainNamespace,i?await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c}):await this.connectionControllerClient?.connectExternal?.({id:_e.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:dr.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c})}else if(c===dr.CONNECTOR_TYPE_WALLET_CONNECT){if(!ee.state.noAdapters){const h=this.getAdapter(r),d=kn.getProvider(r),f=kn.getProviderId(r);await h?.switchNetwork({caipNetwork:e,provider:d,providerType:f})}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:r})}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(t=>{this.createAuthProviderForAdapter(t)}),await this.injectModalUi(),Oc.set({initialized:!0})}async syncIdentity({address:e,chainId:t,chainNamespace:r}){const i=`${r}:${t}`,s=this.caipNetworks?.find(o=>o.caipNetworkId===i);if(r!==_e.CHAIN.EVM||s?.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:o,avatar:a}=await this.fetchIdentity({address:e,caipNetworkId:i});this.setProfileName(o,r),this.setProfileImage(a,r)}catch{await this.syncReownName(e,r),t!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const t=kn.getProviderId(e);if(t===dr.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const i=je.getConnectedSocialProvider()??"email",s=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:t,identifier:s,social:i},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(_t.isClient()&&!NO)try{const e={...Ln.DEFAULT_FEATURES,...this.options.features},t=this.remoteFeatures;if(await this.loadModalComponents(e,t),_t.isClient()&&!document.querySelector("w3m-modal")){const i=document.createElement("w3m-modal");!Fe.state.disableAppend&&!Fe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",i)}NO=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,t){if(!_t.isClient())return;const r=[];(t.email||t.socials&&t.socials.length>0)&&r.push(Ct(()=>import("./embedded-wallet-BqKgfAgK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),t.email&&r.push(Ct(()=>import("./email-BLVhkGyv.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),t.socials&&r.push(Ct(()=>import("./socials-C0yI5LDZ.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),t.swaps&&t.swaps.length>0&&r.push(Ct(()=>import("./swaps-JbaZCBpS.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(Ct(()=>import("./send-Clke3WpO.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(Ct(()=>import("./receive-mKjJuG_y.js"),__vite__mapDeps([28,1,29,3,19]))),t.onramp&&t.onramp.length>0&&r.push(Ct(()=>import("./onramp-CnB6aGkd.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),t.activity&&r.push(Ct(()=>import("./transactions-C60bbiwv.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(Ct(()=>import("./index-B3nrOkeb.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,Ct(()=>import("./index-B7krVUij.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,27,4,6,13,15,16,17,2,18,29,19,33])),Ct(()=>import("./w3m-modal-Ccz4UsDL.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}function eEe(n){const e=Ae(ee.state.activeChain),t=Ae(ee.state.chains),r=Ae({allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0});function i(a,c){const l=je.getConnectedConnectorId(c),u=c?rt.getAuthConnector(c):void 0,h=c?a.get(c)?.accountState:At.state;r.value.address=_t.getPlainAddress(h?.caipAddress),r.value.caipAddress=h?.caipAddress,r.value.status=h?.status,r.value.isConnected=!!h?.caipAddress;const d=c||ee.state.activeChain;r.value.embeddedWalletInfo=u&&l===_e.CONNECTOR_ID.AUTH?{user:h?.user,authProvider:h?.socialProvider??"email",accountType:Ms(d),isSmartAccountDeployed:!!h?.smartAccountDeployed}:void 0}const s=ee.subscribeKey("activeChain",a=>{e.value=a,i(t.value,e.value)}),o=ee.subscribe(a=>{t.value=a.chains,i(t.value,e.value)});return No(()=>{i(t.value,e.value)}),ca(()=>{o(),s()}),r}function tEe(){async function n(e){await ct.disconnect(e)}return{disconnect:n}}let ih;function nEe(n){n&&(ih=n)}function OO(n){const e=Ae(kn.state.providers[n]),t=Ae(kn.state.providerIds[n]),r=kn.subscribe(i=>{e.value=i.providers[n],t.value=i.providerIds[n]});return ca(()=>{r?.()}),Uc({walletProvider:e,walletProviderType:t})}function rEe(){if(!ih)throw new Error('Please call "createAppKit" before using "useAppKit" composable');async function n(t){await ih?.open(t)}async function e(){await ih?.close()}return Uc({open:n,close:e})}function iEe(){if(!ih)throw new Error('Please call "createAppKit" before using "useAppKitState" composable');const n=ih.getState(),e=ih.getRemoteFeatures(),t=Ae(n.open),r=Ae(e),i=Ae(n.selectedNetworkId),s=ih?.subscribeState(o=>{t.value=o.open,i.value=o.selectedNetworkId});return ca(()=>{s?.()}),Uc({open:t,remoteFeatures:r,selectedNetworkId:i})}const sEe="1.7.12";let Hw;function oEe(n){return Hw||(Hw=new Q4e({...n,sdkVersion:_t.generateSdkVersion(n.adapters??[],"html",sEe)}),nEe(Hw)),Hw}function oa(n,e,t){const r=n[e.name];if(typeof r=="function")return r;const i=n[t];return typeof i=="function"?i:s=>e(n,s)}const g3="2.17.3",aEe=()=>`@wagmi/core@${g3}`;var oW=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},kb,aW;class Ya extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return aEe()}constructor(e,t={}){super(),kb.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=t.cause instanceof Ya?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof Ya&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${this.docsBaseUrl}${i}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return oW(this,kb,"m",aW).call(this,this,e)}}kb=new WeakSet,aW=function n(e,t){return t?.(e)?e:e.cause?oW(this,kb,"m",n).call(this,e.cause,t):e};class k2 extends Ya{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class cEe extends Ya{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class lEe extends Ya{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class uEe extends Ya{constructor({address:e,connector:t}){super(`Account "${e}" not found for connector "${t.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class hEe extends Ya{constructor({connectionChainId:e,connectorChainId:t}){super(`The current chain of the connector (id: ${t}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class dEe extends Ya{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function X6(n,e){let t;if(typeof e.connector=="function"?t=n._internal.connectors.setup(e.connector):t=e.connector,t.uid===n.state.current)throw new cEe;try{n.setState(a=>({...a,status:"connecting"})),t.emitter.emit("message",{type:"connecting"});const{connector:r,...i}=e,s=await t.connect(i),o=s.accounts;return t.emitter.off("connect",n._internal.events.connect),t.emitter.on("change",n._internal.events.change),t.emitter.on("disconnect",n._internal.events.disconnect),await n.storage?.setItem("recentConnectorId",t.id),n.setState(a=>({...a,connections:new Map(a.connections).set(t.uid,{accounts:o,chainId:s.chainId,connector:t}),current:t.uid,status:"connected"})),{accounts:o,chainId:s.chainId}}catch(r){throw n.setState(i=>({...i,status:i.current?"connected":"disconnected"})),r}}async function Q5(n,e={}){let t;if(e.connector){const{connector:l}=e;if(n.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new dEe({connector:l});const[u,h]=await Promise.all([l.getAccounts().catch(d=>{if(e.account===null)return[];throw d}),l.getChainId()]);t={accounts:u,chainId:h,connector:l}}else t=n.state.connections.get(n.state.current);if(!t)throw new lEe;const r=e.chainId??t.chainId,i=await t.connector.getChainId();if(i!==t.chainId)throw new hEe({connectionChainId:t.chainId,connectorChainId:i});const s=t.connector;if(s.getClient)return s.getClient({chainId:r});const o=Gc(e.account??t.accounts[0]);if(o&&(o.address=Td(o.address)),e.account&&!t.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new uEe({address:o.address,connector:s});const a=n.chains.find(l=>l.id===r),c=await t.connector.getProvider({chainId:r});return $$({account:o,chain:a,name:"Connector Client",transport:l=>Ise(c)({...l,retryCount:0})})}async function kO(n,e={}){let t;if(e.connector)t=e.connector;else{const{connections:i,current:s}=n.state;t=i.get(s)?.connector}const r=n.state.connections;t&&(await t.disconnect(),t.emitter.off("change",n._internal.events.change),t.emitter.off("disconnect",n._internal.events.disconnect),t.emitter.on("connect",n._internal.events.connect),r.delete(t.uid)),n.setState(i=>{if(r.size===0)return{...i,connections:new Map,current:null,status:"disconnected"};const s=r.values().next().value;return{...i,connections:new Map(r),current:s.connector.uid}});{const i=n.state.current;if(!i)return;const s=n.state.connections.get(i)?.connector;if(!s)return;await n.storage?.setItem("recentConnectorId",s.id)}}async function fEe(n,e){const{chainId:t,connector:r,...i}=e;let s;e.account?s=e.account:s=(await Q5(n,{account:e.account,chainId:t,connector:r})).account;const o=n.getClient({chainId:t});return oa(o,S$,"estimateGas")({...i,account:s})}function cW(n){return typeof n=="number"?n:n==="wei"?0:Math.abs($re[n])}function fg(n){const e=n.state.current,t=n.state.connections.get(e),r=t?.accounts,i=r?.[0],s=n.chains.find(a=>a.id===t?.chainId),o=n.state.status;switch(o){case"connected":return{address:i,addresses:r,chain:s,chainId:t?.chainId,connector:t?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:i,addresses:r,chain:s,chainId:t?.chainId,connector:t?.connector,isConnected:!!i,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:i,addresses:r,chain:s,chainId:t?.chainId,connector:t?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function pEe(n,e){const{allowFailure:t=!0,chainId:r,contracts:i,...s}=e,o=n.getClient({chainId:r});return oa(o,Kse,"multicall")({allowFailure:t,contracts:i,...s})}function mEe(n,e){const{chainId:t,...r}=e,i=n.getClient({chainId:t});return oa(i,D$,"readContract")(r)}async function gEe(n,e){const{allowFailure:t=!0,blockNumber:r,blockTag:i,...s}=e,o=e.contracts;try{const a={};for(const[h,d]of o.entries()){const f=d.chainId??n.state.chainId;a[f]||(a[f]=[]),a[f]?.push({contract:d,index:h})}const c=()=>Object.entries(a).map(([h,d])=>pEe(n,{...s,allowFailure:t,blockNumber:r,blockTag:i,chainId:Number.parseInt(h),contracts:d.map(({contract:f})=>f)})),l=(await Promise.all(c())).flat(),u=Object.values(a).flatMap(h=>h.map(({index:d})=>d));return l.reduce((h,d,f)=>(h&&(h[u[f]]=d),h),[])}catch(a){if(a instanceof n$)throw a;const c=()=>o.map(l=>mEe(n,{...l,blockNumber:r,blockTag:i}));return t?(await Promise.allSettled(c())).map(l=>l.status==="fulfilled"?{result:l.value,status:"success"}:{error:l.reason,result:void 0,status:"failure"}):await Promise.all(c())}}async function yEe(n,e){const{address:t,blockNumber:r,blockTag:i,chainId:s,token:o,unit:a="ether"}=e;if(o)try{return await DO(n,{balanceAddress:t,chainId:s,symbolType:"string",tokenAddress:o})}catch(d){if(d.name==="ContractFunctionExecutionError"){const f=await DO(n,{balanceAddress:t,chainId:s,symbolType:"bytes32",tokenAddress:o}),p=kF(Gl(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw d}const c=n.getClient({chainId:s}),u=await oa(c,x$,"getBalance")(r?{address:t,blockNumber:r}:{address:t,blockTag:i}),h=n.chains.find(d=>d.id===s)??c.chain;return{decimals:h.nativeCurrency.decimals,formatted:t1(u,cW(a)),symbol:h.nativeCurrency.symbol,value:u}}async function DO(n,e){const{balanceAddress:t,chainId:r,symbolType:i,tokenAddress:s,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:i}]}],address:s},[c,l,u]=await gEe(n,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[t],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),h=t1(c??"0",cW(o??l));return{decimals:l,formatted:h,symbol:u,value:c}}function D2(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;let t,r;if(Array.isArray(n)&&Array.isArray(e)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!D2(n[r],e[r]))return!1;return!0}if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();const i=Object.keys(n);if(t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(s&&!D2(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}let Vw=[];function El(n){const e=[...n.state.connections.values()];return n.state.status==="reconnecting"||D2(Vw,e)?Vw:(Vw=e,e)}async function wEe(n,e){const{account:t,chainId:r,...i}=e,s=t??fg(n).address,o=n.getClient({chainId:r});return oa(o,N7,"prepareTransactionRequest")({...i,...s?{account:s}:{}})}let Z6=!1;async function LO(n,e={}){if(Z6)return[];Z6=!0,n.setState(l=>({...l,status:l.current?"reconnecting":"connecting"}));const t=[];if(e.connectors?.length)for(const l of e.connectors){let u;typeof l=="function"?u=n._internal.connectors.setup(l):u=l,t.push(u)}else t.push(...n.connectors);let r;try{r=await n.storage?.getItem("recentConnectorId")}catch{}const i={};for(const[,l]of n.state.connections)i[l.connector.id]=1;r&&(i[r]=0);const s=Object.keys(i).length>0?[...t].sort((l,u)=>(i[l.id]??10)-(i[u.id]??10)):t;let o=!1;const a=[],c=[];for(const l of s){const u=await l.getProvider().catch(()=>{});if(!u||c.some(f=>f===u)||!await l.isAuthorized())continue;const d=await l.connect({isReconnecting:!0}).catch(()=>null);d&&(l.emitter.off("connect",n._internal.events.connect),l.emitter.on("change",n._internal.events.change),l.emitter.on("disconnect",n._internal.events.disconnect),n.setState(f=>{const p=new Map(o?f.connections:new Map).set(l.uid,{accounts:d.accounts,chainId:d.chainId,connector:l});return{...f,current:o?f.current:l.uid,connections:p}}),a.push({accounts:d.accounts,chainId:d.chainId,connector:l}),c.push(u),o=!0)}return(n.state.status==="reconnecting"||n.state.status==="connecting")&&(o?n.setState(l=>({...l,status:"connected"})):n.setState(l=>({...l,connections:new Map,current:null,status:"disconnected"}))),Z6=!1,a}async function vEe(n,e){const{account:t,chainId:r,connector:i,...s}=e;let o;return typeof t=="object"&&t?.type==="local"?o=n.getClient({chainId:r}):o=await Q5(n,{account:t??void 0,chainId:r,connector:i}),await oa(o,U$,"sendTransaction")({...s,...t?{account:t}:{},chain:r?{id:r}:null,gas:s.gas??void 0})}async function bEe(n,e){const{account:t,connector:r,...i}=e;let s;return typeof t=="object"&&t.type==="local"?s=n.getClient():s=await Q5(n,{account:t,connector:r}),oa(s,Aoe,"signMessage")({...i,...t?{account:t}:{}})}class Gu extends Ya{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class _Ee extends Ya{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function UO(n,e){const{addEthereumChainParameter:t,chainId:r}=e,i=n.state.connections.get(e.connector?.uid??n.state.current);if(i){const o=i.connector;if(!o.switchChain)throw new _Ee({connector:o});return await o.switchChain({addEthereumChainParameter:t,chainId:r})}const s=n.chains.find(o=>o.id===r);if(!s)throw new k2;return n.setState(o=>({...o,chainId:r})),s}function EEe(n,e){const{onChange:t}=e;return n.subscribe(()=>fg(n),t,{equalityFn(r,i){const{connector:s,...o}=r,{connector:a,...c}=i;return D2(o,c)&&s?.id===a?.id&&s?.uid===a?.uid}})}function xEe(n,e){const{onChange:t}=e;return n.subscribe(()=>El(n),t,{equalityFn:D2})}function SEe(n,e){const{onChange:t}=e;return n._internal.connectors.subscribe((r,i)=>{t(Object.values(r),i)})}function AEe(n,e){const{syncConnectedChain:t=n._internal.syncConnectedChain,...r}=e;let i;const s=c=>{i&&i();const l=n.getClient({chainId:c});return i=oa(l,Soe,"watchPendingTransactions")(r),i},o=s(e.chainId);let a;return t&&!e.chainId&&(a=n.subscribe(({chainId:c})=>c,async c=>s(c))),()=>{o?.(),a?.()}}async function CEe(n,e){const{chainId:t,timeout:r=0,...i}=e,s=n.getClient({chainId:t}),a=await oa(s,xoe,"waitForTransactionReceipt")({...i,timeout:r});if(a.status==="reverted"){const l=await oa(s,H$,"getTransaction")({hash:a.transactionHash}),h=await oa(s,k$,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),d=h?.data?kF(`0x${h.data.substring(138)}`):"unknown reason";throw new Error(d)}return{...a,chainId:s.chain.id}}async function TEe(n,e){const{account:t,chainId:r,connector:i,...s}=e;let o;return typeof t=="object"&&t?.type==="local"?o=n.getClient({chainId:r}):o=await Q5(n,{account:t??void 0,chainId:r,connector:i}),await oa(o,Ese,"writeContract")({...s,...t?{account:t}:{},chain:r?{id:r}:null})}function Zje(n){return n}e4.type="injected";function e4(n={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:t}=n;function r(){const c=n.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...IEe[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l?.ethereum}}}let i,s,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:e4.type,async setup(){const l=await this.getProvider();l?.on&&n.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),i||(i=this.onAccountsChanged.bind(this),l.on("accountsChanged",i)))},async connect({chainId:l,isReconnecting:u}={}){const h=await this.getProvider();if(!h)throw new Gu;let d=[];if(u)d=await this.getAccounts().catch(()=>[]);else if(e)try{d=(await h.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(p=>Td(p)),d.length>0&&(d=await this.getAccounts())}catch(f){const p=f;if(p.code===ei.code)throw new ei(p);if(p.code===hh.code)throw p}try{!d?.length&&!u&&(d=(await h.request({method:"eth_requestAccounts"})).map(m=>Td(m))),o&&(h.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),h.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),h.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a));let f=await this.getChainId();return l&&f!==l&&(f=(await this.switchChain({chainId:l}).catch(m=>{if(m.code===ei.code)throw m;return{id:f}}))?.id??f),e&&await c.storage?.removeItem(`${this.id}.disconnected`),n.target||await c.storage?.setItem("injected.connected",!0),{accounts:d,chainId:f}}catch(f){const p=f;throw p.code===ei.code?new ei(p):p.code===hh.code?new hh(p):p}},async disconnect(){const l=await this.getProvider();if(!l)throw new Gu;s&&(l.removeListener("chainChanged",s),s=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await z$(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await c.storage?.setItem(`${this.id}.disconnected`,!0),n.target||await c.storage?.removeItem("injected.connected")},async getAccounts(){const l=await this.getProvider();if(!l)throw new Gu;return(await l.request({method:"eth_accounts"})).map(h=>Td(h))},async getChainId(){const l=await this.getProvider();if(!l)throw new Gu;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=y3(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){try{if(e&&await c.storage?.getItem(`${this.id}.disconnected`)||!n.target&&!await c.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(t!==void 0&&t!==!1){const d=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",d),!!await this.getProvider()),f=typeof t=="number"?t:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(d()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(d()),f))]))return!0}throw new Gu}return!!(await ab(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){const h=await this.getProvider();if(!h)throw new Gu;const d=c.chains.find(p=>p.id===u);if(!d)throw new $c(new k2);const f=new Promise(p=>{const m=g=>{"chainId"in g&&g.chainId===u&&(c.emitter.off("change",m),p())};c.emitter.on("change",m)});try{return await Promise.all([h.request({method:"wallet_switchEthereumChain",params:[{chainId:mt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),d}catch(p){const m=p;if(m.code===4902||m?.data?.originalError?.code===4902)try{const{default:g,...y}=d.blockExplorers??{};let b;l?.blockExplorerUrls?b=l.blockExplorerUrls:g&&(b=[g.url,...Object.values(y).map(x=>x.url)]);let w;l?.rpcUrls?.length?w=l.rpcUrls:w=[d.rpcUrls.default?.http[0]??""];const E={blockExplorerUrls:b,chainId:mt(u),chainName:l?.chainName??d.name,iconUrls:l?.iconUrls,nativeCurrency:l?.nativeCurrency??d.nativeCurrency,rpcUrls:w};return await Promise.all([h.request({method:"wallet_addEthereumChain",params:[E]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new ei(new Error("User rejected switch after adding network."))}),f]),d}catch(g){throw new ei(g)}throw m.code===ei.code?new ei(m):new $c(m)}},async onAccountsChanged(l){if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const u=(await this.getChainId()).toString();this.onConnect({chainId:u}),e&&await c.storage?.removeItem(`${this.id}.disconnected`)}else c.emitter.emit("change",{accounts:l.map(u=>Td(u))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const h=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:h});const d=await this.getProvider();d&&(o&&(d.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),d.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),d.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(s&&(u.removeListener("chainChanged",s),s=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const IEe={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(n){return n?.coinbaseWalletExtension?n.coinbaseWalletExtension:y3(n,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(n){return y3(n,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const t=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of t)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(n){return n?.phantom?.ethereum?n.phantom?.ethereum:y3(n,"isPhantom")}}};function y3(n,e){function t(i){return typeof e=="function"?e(i):typeof e=="string"?i[e]:!0}const r=n.ethereum;if(r?.providers)return r.providers.find(i=>t(i));if(r&&t(r))return r}function MEe(n){if(typeof window>"u")return;const e=t=>n(t.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function REe(){const n=new Set;let e=[];const t=()=>MEe(i=>{e.some(({info:s})=>s.uuid===i.info.uuid)||(e=[...e,i],n.forEach(s=>s(e,{added:[i]})))});let r=t();return{_listeners(){return n},clear(){n.forEach(i=>i([],{removed:[...e]})),e=[]},destroy(){this.clear(),n.clear(),r?.()},findProvider({rdns:i}){return e.find(s=>s.info.rdns===i)},getProviders(){return e},reset(){this.clear(),r?.(),r=t()},subscribe(i,{emitImmediately:s}={}){return n.add(i),s&&i(e,{added:e}),()=>n.delete(i)}}}const PEe=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=c?.equalityFn||Object.is;let h=o(r.getState());l=d=>{const f=o(d);if(!u(h,f)){const p=h;a(h=f,p)}},c?.fireImmediately&&a(h,h)}return i(l)},n(e,t,r)},NEe=PEe;function OEe(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,void 0),a=(s=t.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const RA=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return RA(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return RA(r)(t)}}}},kEe=(n,e)=>(t,r,i)=>{let s={storage:OEe(()=>localStorage),partialize:m=>m,version:0,merge:(m,g)=>({...g,...m}),...e},o=!1;const a=new Set,c=new Set;let l=s.storage;if(!l)return n((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...m)},r,i);const u=()=>{const m=s.partialize({...r()});return l.setItem(s.name,{state:m,version:s.version})},h=i.setState;i.setState=(m,g)=>{h(m,g),u()};const d=n((...m)=>{t(...m),u()},r,i);i.getInitialState=()=>d;let f;const p=()=>{var m,g;if(!l)return;o=!1,a.forEach(b=>{var w;return b((w=r())!=null?w:d)});const y=((g=s.onRehydrateStorage)==null?void 0:g.call(s,(m=r())!=null?m:d))||void 0;return RA(l.getItem.bind(l))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return[!0,s.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var w;const[E,x]=b;if(f=s.merge(x,(w=r())!=null?w:d),t(f,!0),E)return u()}).then(()=>{y?.(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y?.(void 0,b)})};return i.persist={setOptions:m=>{s={...s,...m},m.storage&&(l=m.storage)},clearStorage:()=>{l?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},s.skipHydration||p(),f||d},DEe=kEe,BO=n=>{let e;const t=new Set,r=(l,u)=>{const h=typeof l=="function"?l(e):l;if(!Object.is(h,e)){const d=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:l=>(t.add(l),()=>t.delete(l))},c=e=n(r,i,a);return a},J6=n=>n?BO(n):BO;var Q6={exports:{}},FO;function LEe(){return FO||(FO=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,h,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,h||c,d),p=t?t+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,h;if(this._eventsCount===0)return l;for(h in u=this._events)e.call(u,h)&&l.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=t?t+l:l,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,p=new Array(f);d<f;d++)p[d]=h[d].fn;return p},a.prototype.listenerCount=function(l){var u=t?t+l:l,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(l,u,h,d,f,p){var m=t?t+l:l;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,b,w;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,h),!0;case 4:return g.fn.call(g.context,u,h,d),!0;case 5:return g.fn.call(g.context,u,h,d,f),!0;case 6:return g.fn.call(g.context,u,h,d,f,p),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];g.fn.apply(g.context,b)}else{var E=g.length,x;for(w=0;w<E;w++)switch(g[w].once&&this.removeListener(l,g[w].fn,void 0,!0),y){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,u);break;case 3:g[w].fn.call(g[w].context,u,h);break;case 4:g[w].fn.call(g[w].context,u,h,d);break;default:if(!b)for(x=1,b=new Array(y-1);x<y;x++)b[x-1]=arguments[x];g[w].fn.apply(g[w].context,b)}}return!0},a.prototype.on=function(l,u,h){return s(this,l,u,h,!1)},a.prototype.once=function(l,u,h){return s(this,l,u,h,!0)},a.prototype.removeListener=function(l,u,h,d){var f=t?t+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!d||p.once)&&(!h||p.context===h)&&o(this,f);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==u||d&&!p[m].once||h&&p[m].context!==h)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a}(Q6)),Q6.exports}var UEe=LEe();const T9=Sf(UEe);let BEe=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new T9})}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,...t){const r=t[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}};function FEe(n){return new BEe(n)}function $Ee(n,e){return JSON.parse(n,(t,r)=>{let i=r;return i?.__type==="bigint"&&(i=BigInt(i.value)),i?.__type==="Map"&&(i=new Map(i.value)),e?.(t,i)??i})}function $O(n,e){return n.slice(0,e).join(".")||"."}function zO(n,e){const{length:t}=n;for(let r=0;r<t;++r)if(n[r]===e)return r+1;return 0}function zEe(n,e){const t=typeof n=="function",r=typeof e=="function",i=[],s=[];return function(a,c){if(typeof c=="object")if(i.length){const l=zO(i,this);l===0?i[i.length]=this:(i.splice(l),s.splice(l)),s[s.length]=a;const u=zO(i,c);if(u!==0)return r?e.call(this,a,c,$O(s,u)):`[ref=${$O(s,u)}]`}else i[0]=c,s[0]=a;return t?n.call(this,a,c):c}}function HEe(n,e,t,r){return JSON.stringify(n,zEe((i,s)=>{let o=s;return typeof o=="bigint"&&(o={__type:"bigint",value:s.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(s.entries())}),e?.(i,o)??o},r),t??void 0)}function VEe(n){const{deserialize:e=$Ee,key:t="wagmi",serialize:r=HEe,storage:i=lW}=n;function s(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...i,key:t,async getItem(o,a){const c=i.getItem(`${t}.${o}`),l=await s(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${t}.${o}`;a===null?await s(i.removeItem(c)):await s(i.setItem(c,r(a)))},async removeItem(o){await s(i.removeItem(`${t}.${o}`))}}}const lW={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function WEe(){const n=typeof window<"u"&&window.localStorage?window.localStorage:lW;return{getItem(e){return n.getItem(e)},removeItem(e){n.removeItem(e)},setItem(e,t){try{n.setItem(e,t)}catch{}}}}const PA=256;let Ww=PA,qw;function qEe(n=11){if(!qw||Ww+n>PA*2){qw="",Ww=0;for(let e=0;e<PA;e++)qw+=(256+Math.random()*256|0).toString(16).substring(1)}return qw.substring(Ww,Ww+++n)}function jEe(n){const{multiInjectedProviderDiscovery:e=!0,storage:t=VEe({storage:WEe()}),syncConnectedChain:r=!0,ssr:i=!1,...s}=n,o=typeof window<"u"&&e?REe():void 0,a=J6(()=>s.chains),c=J6(()=>{const x=[],C=new Set;for(const R of s.connectors??[]){const k=l(R);if(x.push(k),!i&&k.rdns){const _=typeof k.rdns=="string"?[k.rdns]:k.rdns;for(const A of _)C.add(A)}}if(!i&&o){const R=o.getProviders();for(const k of R)C.has(k.info.rdns)||x.push(l(u(k)))}return x});function l(x){const C=FEe(qEe()),R={...x({emitter:C,chains:a.getState(),storage:t,transports:s.transports}),emitter:C,uid:C.uid};return C.on("connect",w),R.setup?.(),R}function u(x){const{info:C}=x,R=x.provider;return e4({target:{...C,id:C.rdns,provider:R}})}const h=new Map;function d(x={}){const C=x.chainId??g.getState().chainId,R=a.getState().find(_=>_.id===C);if(x.chainId&&!R)throw new k2;{const _=h.get(g.getState().chainId);if(_&&!R)return _;if(!R)throw new k2}{const _=h.get(C);if(_)return _}let k;if(s.client)k=s.client({chain:R});else{const _=R.id,A=a.getState().map(P=>P.id),M={},D=Object.entries(s);for(const[P,v]of D)if(!(P==="chains"||P==="client"||P==="connectors"||P==="transports"))if(typeof v=="object")if(_ in v)M[P]=v[_];else{if(A.some(T=>T in v))continue;M[P]=v}else M[P]=v;k=$$({...M,chain:R,batch:M.batch??{multicall:!0},transport:P=>s.transports[_]({...P,connectors:c})})}return h.set(C,k),k}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const m="0.0.0-canary-";g3.startsWith(m)?p=Number.parseInt(g3.replace(m,"")):p=Number.parseInt(g3.split(".")[0]??"0");const g=J6(NEe(t?DEe(f,{migrate(x,C){if(C===p)return x;const R=f(),k=y(x,R.chainId);return{...R,chainId:k}},name:"store",partialize(x){return{connections:{__type:"Map",value:Array.from(x.connections.entries()).map(([C,R])=>{const{id:k,name:_,type:A,uid:M}=R.connector;return[C,{...R,connector:{id:k,name:_,type:A,uid:M}}]})},chainId:x.chainId,current:x.current}},merge(x,C){typeof x=="object"&&x&&"status"in x&&delete x.status;const R=y(x,C.chainId);return{...C,...x,chainId:R}},skipHydration:i,storage:t,version:p}):f));g.setState(f());function y(x,C){return x&&typeof x=="object"&&"chainId"in x&&typeof x.chainId=="number"&&a.getState().some(R=>R.id===x.chainId)?x.chainId:C}r&&g.subscribe(({connections:x,current:C})=>C?x.get(C)?.chainId:void 0,x=>{if(a.getState().some(R=>R.id===x))return g.setState(R=>({...R,chainId:x??R.chainId}))}),o?.subscribe(x=>{const C=new Set,R=new Set;for(const _ of c.getState())if(C.add(_.id),_.rdns){const A=typeof _.rdns=="string"?[_.rdns]:_.rdns;for(const M of A)R.add(M)}const k=[];for(const _ of x){if(R.has(_.info.rdns))continue;const A=l(u(_));C.has(A.id)||k.push(A)}t&&!g.persist.hasHydrated()||c.setState(_=>[..._,...k],!0)});function b(x){g.setState(C=>{const R=C.connections.get(x.uid);return R?{...C,connections:new Map(C.connections).set(x.uid,{accounts:x.accounts??R.accounts,chainId:x.chainId??R.chainId,connector:R.connector})}:C})}function w(x){g.getState().status==="connecting"||g.getState().status==="reconnecting"||g.setState(C=>{const R=c.getState().find(k=>k.uid===x.uid);return R?(R.emitter.listenerCount("connect")&&R.emitter.off("connect",b),R.emitter.listenerCount("change")||R.emitter.on("change",b),R.emitter.listenerCount("disconnect")||R.emitter.on("disconnect",E),{...C,connections:new Map(C.connections).set(x.uid,{accounts:x.accounts,chainId:x.chainId,connector:R}),current:x.uid,status:"connected"}):C})}function E(x){g.setState(C=>{const R=C.connections.get(x.uid);if(R){const _=R.connector;_.emitter.listenerCount("change")&&R.connector.emitter.off("change",b),_.emitter.listenerCount("disconnect")&&R.connector.emitter.off("disconnect",E),_.emitter.listenerCount("connect")||R.connector.emitter.on("connect",w)}if(C.connections.delete(x.uid),C.connections.size===0)return{...C,connections:new Map,current:null,status:"disconnected"};const k=C.connections.values().next().value;return{...C,connections:new Map(C.connections),current:k.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:t,getClient:d,get state(){return g.getState()},setState(x){let C;typeof x=="function"?C=x(g.getState()):C=x;const R=f();typeof C!="object"&&(C=R),Object.keys(R).some(_=>!(_ in C))&&(C=R),g.setState(C,!0)},subscribe(x,C,R){return g.subscribe(x,C,R?{...R,fireImmediately:R.emitImmediately}:void 0)},_internal:{mipd:o,store:g,ssr:!!i,syncConnectedChain:r,transports:s.transports,chains:{setState(x){const C=typeof x=="function"?x(a.getState()):x;if(C.length!==0)return a.setState(C,!0)},subscribe(x){return a.subscribe(x)}},connectors:{providerDetailToConnector:u,setup:l,setState(x){return c.setState(typeof x=="function"?x(c.getState()):x,!0)},subscribe(x){return c.subscribe(x)}},events:{change:b,connect:w,disconnect:E}}}}function GEe(n){let e=[],t,r;function i(a){return Hg.parseEvmChainId(a)||1}function s(){return t||(t=Kd.getInstance({projectId:n.options.projectId,chainId:ee.getActiveCaipNetwork()?.caipNetworkId,enableLogger:n.options.enableAuthLogger,onTimeout:a=>{a==="iframe_load_failed"?ir.open(gr.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):a==="iframe_request_timeout"?ir.open(gr.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):a==="unverified_domain"&&ir.open(gr.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:gr.EmbeddedWalletAbortController,getActiveCaipNetwork:a=>ee.getActiveCaipNetwork(a)})),t}async function o(a={}){const c=s();let l=a.chainId;if(a.isReconnecting){const m=Hg.parseEvmChainId(c.getLastUsedChainId()||""),g=n.chains?.[0].id;if(l=m||g,!l)throw new Error("ChainId not found in provider")}const u=Ms("eip155"),{address:h,chainId:d,accounts:f}=await xo.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:"eip155"});e=f?.map(m=>m.address)||[h];const p=i(d);return{accounts:e,account:h,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:_e.CONNECTOR_ID.AUTH,name:_e.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:_e.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e?.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=Kd.getInstance({projectId:n.options.projectId,chainId:ee.getActiveCaipNetwork()?.caipNetworkId,enableLogger:n.options.enableAuthLogger,abortController:gr.EmbeddedWalletAbortController,onTimeout:c=>{c==="iframe_load_failed"?ir.open(gr.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?ir.open(gr.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&ir.open(gr.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:c=>ee.getActiveCaipNetwork(c)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return i(l)},async isAuthorized(){const l=ee.state.activeChain===_e.CHAIN.EVM;if(_e.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(d=>rt.getConnectorId(d)===_e.CONNECTOR_ID.AUTH)&&!l)return!1;const h=await this.getProvider();return Promise.resolve(h.getLoginEmailUsed())},async switchChain({chainId:c}){try{const l=a.chains.find(f=>f.id===c);if(!l)throw new $c(new Error("chain not found on connector."));const u=await this.getProvider(),h=Ms("eip155"),d=await u.connect({chainId:c,preferredAccountType:h});return e=d?.accounts?.map(f=>f.address)||[d.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),l}catch(l){throw l instanceof Error?new $c(l):l}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Td)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}I9.type="walletConnect";function I9(n,e){const t=n.isNewChainsStale??!0;let r,i,s,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:I9.type,async setup(){const h=await this.getProvider().catch(()=>null);h&&(o||(o=this.onConnect.bind(this),h.on("connect",o)),c||(c=this.onSessionDelete.bind(this),h.on("session_delete",c)))},async connect({...h}={}){try{const d=ee.getCaipNetworks(),f=await this.getProvider();if(!f)throw new Gu;a||(a=this.onDisplayUri,f.on("display_uri",a));const p=await this.isChainsStale();f.session&&p&&await f.disconnect();const m=Fe.state.universalProviderConfigOverride;if(!f.session||p){const C=sa.createNamespaces(d,m);await f.connect({optionalNamespaces:C,..."pairingTopic"in h?{pairingTopic:h.pairingTopic}:{}}),this.setRequestedChainsIds(d.map(R=>Number(R.id)))}const g=await this.getAccounts(),y=await this.getChainId(),b=f.session?.namespaces?.eip155?.chains,w=b?.some(C=>Number(C.split(":")[1])===y);let E=1;w?E=y:b?.[0]&&(E=Number(b[0].split(":")[1])),a&&(f.removeListener("display_uri",a),a=void 0),o&&(f.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),f.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),f.on("chainChanged",s)),l||(l=this.onDisconnect.bind(this),f.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),f.on("session_delete",c));const x=m?.defaultChain;return f.setDefaultChain(x??`eip155:${E}`),{accounts:g,chainId:E}}catch(d){throw/(user rejected|connection request reset)/i.test(d?.message)?new ei(d):d}},async disconnect(){const h=await this.getProvider();try{await h?.disconnect()}catch(d){if(!/No matching key/i.test(d.message))throw d}finally{s&&(h?.removeListener("chainChanged",s),s=void 0),l&&(h?.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),h?.on("connect",o)),i&&(h?.removeListener("accountsChanged",i),i=void 0),c&&(h?.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){const h=await this.getProvider();if(!h?.session?.namespaces)return[];const f=h?.session?.namespaces[_e.CHAIN.EVM]?.accounts?.map(g=>g.split(":")[2])??[],p=new Set;return f.filter(g=>{const y=g?.toLowerCase();return p.has(y)?!1:(p.add(y),!0)})},async getProvider({chainId:h}={}){r||(r=await e.getUniversalProvider(),r?.events.setMaxListeners(Number.POSITIVE_INFINITY));const d=je.getActiveNamespace(),f=e.getCaipNetwork()?.id;if(h&&f!==h&&d){const p=je.getStoredActiveCaipNetworkId(),g=e.getCaipNetworks(d)?.find(y=>y.id===p);g&&g.chainNamespace===_e.CHAIN.EVM&&await this.switchChain?.({chainId:Number(g.id)})}return r},async getChainId(){const h=e.getCaipNetwork(_e.CHAIN.EVM)?.id;if(h)return h;const f=(await this.getProvider()).session?.namespaces[_e.CHAIN.EVM]?.chains?.[0];return ee.getCaipNetworks().find(m=>m.id===f)?.id},async isAuthorized(){try{const[h,d]=await Promise.all([this.getAccounts(),this.getProvider()]);return h.length?await this.isChainsStale()&&d.session?(await d.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:h,chainId:d}){const f=await this.getProvider();if(!f)throw new Gu;const p=ee.getCaipNetworks().find(m=>m.id===d);if(!p)throw new $c(new k2);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:mt(d)}]}),p?.caipNetworkId&&f.setDefaultChain(p?.caipNetworkId),u.emitter.emit("change",{chainId:Number(d)});const m=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...m,d]),{...p,id:p.id}}catch(m){const g=m;if(/(?:user rejected)/iu.test(g.message))throw new ei(g);try{let y;h?.blockExplorerUrls?y=h.blockExplorerUrls:y=p.blockExplorers?.default.url?[p.blockExplorers?.default.url]:[];const b=p.rpcUrls?.chainDefault?.http||[],w={blockExplorerUrls:y,chainId:mt(d),chainName:p.name,iconUrls:h?.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:b};await f.request({method:"wallet_addEthereumChain",params:[w]});const E=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...E,d]),{...p,id:p.id}}catch(y){throw new ei(y)}}},onAccountsChanged(h){h.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:h.map(d=>Td(d))})},onChainChanged(h){const d=Number(h);u.emitter.emit("change",{chainId:d})},onConnect(h){this.setRequestedChainsIds(ee.getCaipNetworks().map(d=>Number(d.id)))},async onDisconnect(h){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const d=await this.getProvider();i&&(d.removeListener("accountsChanged",i),i=void 0),s&&(d.removeListener("chainChanged",s),s=void 0),l&&(d.removeListener("disconnect",l),l=void 0),c&&(d.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),d.on("connect",o))},onDisplayUri(h){u.emitter.emit("message",{type:"display_uri",data:h})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){return r?.session?.namespaces?r?.session?.namespaces[_e.CHAIN.EVM]?.accounts?.map(f=>Number.parseInt(f.split(":")[1]??""))??[]:[]},async getRequestedChainsIds(){const h=await u.storage?.getItem(this.requestedChainsStorageKey)??[];return[...new Set(h)]},async isChainsStale(){if(!t)return!1;const h=u.chains.map(p=>p.id),d=this.getNamespaceChainsIds();if(d.length&&!d.some(p=>h.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!h.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(h){await u.storage?.setItem(this.requestedChainsStorageKey,h)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const em=Qn({pendingTransactions:0}),HO={state:em,subscribeKey(n,e){return Ei(em,n,e)},increase(n){em[n]+=1},decrease(n){em[n]-=1},reset(n){em[n]=0}};function KEe(n){try{return JSON.parse(n)}catch{throw new Error("Error parsing wallet capabilities")}}async function YEe(n){if(_t.isSafeApp()){const{safe:e}=await Ct(async()=>{const{safe:t}=await import("./index-_iY5fJfZ.js");return{safe:t}},[]);if(e&&!n.some(t=>t.type==="safe"))return e()}return null}async function XEe(n){try{const{coinbaseWallet:e}=await Ct(async()=>{const{coinbaseWallet:t}=await import("./index-_iY5fJfZ.js");return{coinbaseWallet:t}},[]);if(e&&!n.some(t=>t.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const ZEe={enable:!1,pollingInterval:3e4};class JEe extends C9{constructor(e){const t=Tc.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=_e.CHAIN.EVM,this.adapterType=_e.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...ZEe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:t}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const t=this.getWagmiConnector(e.id);if(!t)return{accounts:[]};if(t.id===_e.CONNECTOR_ID.AUTH){const s=await t.getProvider();if(!s?.user)return{accounts:[]};const{address:o,accounts:a}=s.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>_t.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:i}=fg(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[i])].map(s=>_t.createAccount("eip155",s||"","eoa"))})}checkChainId(){const{chainId:e}=fg(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(t=>t.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(i=>i.chainNamespace===_e.CHAIN.EVM);const t={},r=[...e.connectors??[]];this.wagmiChains.forEach(i=>{const s=e.transports?.[i.id],o=Tc.getCaipNetworkId(i);s?t[i.id]=Tc.extendWagmiTransports(i,e.projectId,s):t[i.id]=Tc.getViemTransport(i,e.projectId,e.customRpcUrls?.[o])}),this.wagmiConfig=jEe({...e,chains:this.wagmiChains,connectors:r,transports:t})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=AEe(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),HO.increase("pendingTransactions")}});const e=HO.subscribeKey("pendingTransactions",t=>{t>=_e.LIMITS.PENDING_TRANSACTIONS&&(this.unwatchPendingTransactions?.(),e())})}setupWatchers(){EEe(this.wagmiConfig,{onChange:(e,t)=>{if(e.status==="disconnected"&&t.address&&this.emit("disconnect"),e?.chainId&&e?.chainId!==t?.chainId&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const r=e.address!==t?.address,i=e.connector.id!==t.connector?.id,s=t.status!=="connected";(r||i||s)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),xEe(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(t=>{const r=this.getCaipNetworks().find(s=>s.id===t.chainId),i=t.connector.id===_e.CONNECTOR_ID.AUTH;return{accounts:t.accounts.map(s=>({address:s})),caipNetwork:r,connectorId:t.connector.id,auth:i?{name:je.getConnectedSocialProvider(),username:je.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const t=[];if(e.enableCoinbase!==!1){const i=await XEe(this.wagmiConfig.connectors);i&&t.push(i)}const r=await YEe(this.wagmiConfig.connectors);r&&t.push(r),await Promise.all(t.map(i=>{const s=this.wagmiConfig._internal.connectors.setup(i);return this.wagmiConfig._internal.connectors.setState(o=>[...o,s]),this.addWagmiConnector(s,e)}))}addWagmiConnectors(e,t){const r=[];e.enableWalletConnect!==!1&&r.push(I9(e,t)),e.enableEIP6963!==!1&&r.push(e4({shimDisconnect:!0}));const i=t?.remoteFeatures?.email??!0,s=Array.isArray(t?.remoteFeatures?.socials)&&t?.remoteFeatures?.socials?.length>0;(i||s)&&r.push(GEe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(o=>{const a=this.wagmiConfig._internal.connectors.setup(o);this.wagmiConfig._internal.connectors.setState(c=>[...c,a])})}async handleAccountChanged({address:e,chainId:t,connector:r}){const i=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:t,connector:{id:r.id,name:mi.ConnectorNamesMap[r.id]??r.name,imageId:mi.ConnectorImageIds[r.id],type:mi.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===_e.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:i,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await bEe(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:t,address:r}=fg(this.wagmiConfig),i={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:t,type:"legacy",parameters:["nonce"]};await wEe(this.wagmiConfig,i);const s=await vEe(this.wagmiConfig,i);return await CEe(this.wagmiConfig,{hash:s,timeout:25e3}),{hash:s}}async writeContract(e){const{caipNetwork:t,...r}=e,i=Number(Hg.caipNetworkIdToNumber(t.caipNetworkId));return{hash:await TEe(this.wagmiConfig,{chain:this.wagmiChains?.[i],chainId:i,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await fEe(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return Gse(e.value,e.decimals)}formatUnits(e){return t1(e.value,e.decimals)}async addWagmiConnector(e,t){if(e.type===_e.CONNECTOR_ID.INJECTED&&t.enableEIP6963===!1||e.id===_e.CONNECTOR_ID.AUTH||e.id===_e.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:mi.ConnectorExplorerIds[e.id],imageUrl:t?.connectorImages?.[e.id]??e.icon,name:mi.ConnectorNamesMap[e.id]??e.name,imageId:mi.ConnectorImageIds[e.id],type:mi.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===_e.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,t){SEe(this.wagmiConfig,{onChange:r=>{r.forEach(i=>this.addWagmiConnector(i,e))}}),this.addWagmiConnectors(e,t),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){const{id:t,chainId:r}=e,s=El(this.wagmiConfig).find(l=>l.connector.id===t),a=await this.getWagmiConnector(t)?.getProvider();if(_t.isSafeApp()&&t===_e.CONNECTOR_ID.SAFE&&!s?.accounts.length){const l=this.getWagmiConnector("safe");if(l){const u=await X6(this.wagmiConfig,{connector:l,chainId:Number(r)}),h=await l.getProvider();return{chainId:Number(r),address:u.accounts[0],provider:h,type:s?.connector.type?.toUpperCase(),id:s?.connector.id}}}return{chainId:Number(s?.chainId),address:s?.accounts[0],provider:a,type:s?.connector.type?.toUpperCase(),id:s?.connector.id}}async connectWalletConnect(e){const t=this.getWalletConnectConnector();await t.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const i=await X6(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return i.chainId!==Number(e)&&await UO(this.wagmiConfig,{chainId:i.chainId}),{clientId:await t.provider.client.core.crypto.getClientId()}}async connect(e){const{id:t,address:r,provider:i,type:s,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(t);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");i&&o&&l.id===_e.CONNECTOR_ID.EIP6963&&l.setEip6963Wallet?.({provider:i,info:o});const u=this.wagmiConfig.state?.connections?.get(l.uid);if(u){await this.wagmiConfig.storage?.setItem("recentConnectorId",l.id);const d=[...u.accounts].sort((f,p)=>Kr.isLowerCaseMatch(f,r)?-1:Kr.isLowerCaseMatch(p,r)?1:0);return this.wagmiConfig?.setState(f=>({...f,connections:new Map(f.connections).set(l.uid,{accounts:d,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:d[0],chainId:u.chainId,provider:i,type:s,id:t}}const h=await X6(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:h.accounts[0],chainId:h.chainId,provider:i,type:s,id:t}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(t=>({address:t})),connectorId:e.connector.id}))}async reconnect(e){const{id:t}=e,r=this.getWagmiConnector(t);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await LO(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const t=e.address,r=this.getCaipNetworks().find(i=>i.id===e.chainId);if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const i=`${r.caipNetworkId}:${e.address}`,s=this.balancePromises[i];if(s)return s;const o=je.getNativeBalanceCacheForCaipAddress(i);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[i]=new Promise(async a=>{try{const c=Number(e.chainId),l=await yEe(this.wagmiConfig,{address:e.address,chainId:c,token:e.tokens?.[r.caipNetworkId]?.address});je.updateNativeBalanceCache({caipAddress:i,balance:l.formatted,symbol:l.symbol,timestamp:Date.now()}),a({balance:l.formatted,symbol:l.symbol})}catch(c){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",c),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){return this.getWagmiConnector("walletConnect")?.provider}async disconnect(e){if(e.id){const t=this.getWagmiConnector(e.id),i=El(this.wagmiConfig).find(s=>Kr.isLowerCaseMatch(s.connector.id,e.id));return await kO(this.wagmiConfig,{connector:t}),Fe.state.enableReconnect===!1&&this.deleteConnection(e.id),i?{connections:[{accounts:i.accounts.map(s=>({address:s})),connectorId:i.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=El(this.wagmiConfig),t=await Promise.allSettled(e.map(async r=>{const i=this.getWagmiConnector(r.connector.id);return i&&await kO(this.wagmiConfig,{connector:i}),r}));return this.wagmiConfig.state.connections.clear(),{connections:t.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(i=>({address:i})),connectorId:r.connector.id}))}}async switchNetwork(e){const{caipNetwork:t}=e,r=this.wagmiConfig.chains.find(i=>i.id.toString()===t.id.toString());await UO(this.wagmiConfig,{chainId:t.id,addEthereumChainParameter:{chainName:r?.name??t.name,nativeCurrency:r?.nativeCurrency??t.nativeCurrency,rpcUrls:[t.rpcUrls?.chainDefault?.http?.[0]??r?.rpcUrls?.default?.http?.[0]??""],blockExplorerUrls:[r?.blockExplorers?.default?.url??t.blockExplorers?.default?.url??""]}}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=El(this.wagmiConfig)[0],i=r?this.getWagmiConnector(r.connector.id):null;if(!i)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const s=await i.getProvider();if(!s)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=s.session?.sessionProperties?.capabilities;if(o){const c=KEe(o)[e];if(c)return c}return await s.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=El(this.wagmiConfig)[0],i=r?this.getWagmiConnector(r.connector.id):null;if(!i)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const s=await i.getProvider();if(!s)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return s.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=El(this.wagmiConfig)[0],i=r?this.getWagmiConnector(r.connector.id):null;if(!i)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const s=await i.getProvider();if(!s)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return s.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=El(this.wagmiConfig)[0],i=r?this.getWagmiConnector(r.connector.id):null;if(!i)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const s=await i.getProvider();if(!s)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return s.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){this.addConnector({id:_e.CONNECTOR_ID.AUTH,type:"AUTH",name:_e.CONNECTOR_NAMES.AUTH,provider:e,imageId:mi.ConnectorImageIds[_e.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const t=El(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!t.find(i=>i.connector.id===r.id)){if(ee.state.activeChain==="eip155")return;LO(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new J5({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yc=BigInt(0),ms=BigInt(1),e8=BigInt(2),QEe=BigInt(8),e6e={zip215:!0};function t6e(n,e,t,r){const i=n.sqr(t),s=n.sqr(r),o=n.add(n.mul(e.a,i),s),a=n.add(n.ONE,n.mul(e.d,n.mul(i,s)));return n.eql(o,a)}function n6e(n,e={}){const{Fp:t,Fn:r}=rz("edwards",n,e),{h:i,n:s}=n;by(e,{},{uvRatio:"function"});const o=e8<<BigInt(r.BYTES*8)-ms,a=m=>t.create(m),c=e.uvRatio||((m,g)=>{try{return{isValid:!0,value:t.sqrt(t.div(m,g))}}catch{return{isValid:!1,value:yc}}});if(!t6e(t,n,n.Gx,n.Gy))throw new Error("bad curve params: generator point");function l(m,g,y=!1){const b=y?ms:yc;return Vp("coordinate "+m,g,b,o),g}function u(m){if(!(m instanceof f))throw new Error("ExtendedPoint expected")}const h=ib((m,g)=>{const{ex:y,ey:b,ez:w}=m,E=m.is0();g==null&&(g=E?QEe:t.inv(w));const x=a(y*g),C=a(b*g),R=a(w*g);if(E)return{x:yc,y:ms};if(R!==ms)throw new Error("invZ was invalid");return{x,y:C}}),d=ib(m=>{const{a:g,d:y}=n;if(m.is0())throw new Error("bad point: ZERO");const{ex:b,ey:w,ez:E,et:x}=m,C=a(b*b),R=a(w*w),k=a(E*E),_=a(k*k),A=a(C*g),M=a(k*a(A+R)),D=a(_+a(y*a(C*R)));if(M!==D)throw new Error("bad point: equation left != right (1)");const P=a(b*w),v=a(E*x);if(P!==v)throw new Error("bad point: equation left != right (2)");return!0});class f{constructor(g,y,b,w){this.ex=l("x",g),this.ey=l("y",y),this.ez=l("z",b,!0),this.et=l("t",w),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(g){if(g instanceof f)throw new Error("extended point not allowed");const{x:y,y:b}=g||{};return l("x",y),l("y",b),new f(y,b,ms,a(y*b))}static normalizeZ(g){return J$(f,"ez",g)}static msm(g,y){return nz(f,r,g,y)}_setWindowSize(g){this.precompute(g)}precompute(g=8,y=!0){return p.setWindowSize(this,g),y||this.multiply(e8),this}assertValidity(){d(this)}equals(g){u(g);const{ex:y,ey:b,ez:w}=this,{ex:E,ey:x,ez:C}=g,R=a(y*C),k=a(E*w),_=a(b*C),A=a(x*w);return R===k&&_===A}is0(){return this.equals(f.ZERO)}negate(){return new f(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:g}=n,{ex:y,ey:b,ez:w}=this,E=a(y*y),x=a(b*b),C=a(e8*a(w*w)),R=a(g*E),k=y+b,_=a(a(k*k)-E-x),A=R+x,M=A-C,D=R-x,P=a(_*M),v=a(A*D),S=a(_*D),T=a(M*A);return new f(P,v,T,S)}add(g){u(g);const{a:y,d:b}=n,{ex:w,ey:E,ez:x,et:C}=this,{ex:R,ey:k,ez:_,et:A}=g,M=a(w*R),D=a(E*k),P=a(C*b*A),v=a(x*_),S=a((w+E)*(R+k)-M-D),T=v-P,L=v+P,U=a(D-y*M),V=a(S*T),W=a(L*U),F=a(S*U),I=a(T*L);return new f(V,W,I,F)}subtract(g){return this.add(g.negate())}multiply(g){const y=g;Vp("scalar",y,ms,s);const{p:b,f:w}=p.wNAFCached(this,y,f.normalizeZ);return f.normalizeZ([b,w])[0]}multiplyUnsafe(g,y=f.ZERO){const b=g;return Vp("scalar",b,yc,s),b===yc?f.ZERO:this.is0()||b===ms?this:p.wNAFCachedUnsafe(this,b,f.normalizeZ,y)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return p.wNAFCachedUnsafe(this,s).is0()}toAffine(g){return h(this,g)}clearCofactor(){return i===ms?this:this.multiplyUnsafe(i)}static fromBytes(g,y=!1){return la(g),this.fromHex(g,y)}static fromHex(g,y=!1){const{d:b,a:w}=n,E=t.BYTES;g=$r("pointHex",g,E),cf("zip215",y);const x=g.slice(),C=g[E-1];x[E-1]=C&-129;const R=d2(x),k=y?o:t.ORDER;Vp("pointHex.y",R,yc,k);const _=a(R*R),A=a(_-ms),M=a(b*_-w);let{isValid:D,value:P}=c(A,M);if(!D)throw new Error("Point.fromHex: invalid y coordinate");const v=(P&ms)===ms,S=(C&128)!==0;if(!y&&P===yc&&S)throw new Error("Point.fromHex: x=0 and x_0=1");return S!==v&&(P=a(-P)),f.fromAffine({x:P,y:R})}static fromPrivateScalar(g){return f.BASE.multiply(g)}toBytes(){const{x:g,y}=this.toAffine(),b=A5(y,t.BYTES);return b[b.length-1]|=g&ms?128:0,b}toRawBytes(){return this.toBytes()}toHex(){return S0(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}f.BASE=new f(n.Gx,n.Gy,ms,a(n.Gx*n.Gy)),f.ZERO=new f(yc,ms,ms,yc),f.Fp=t,f.Fn=r;const p=tz(f,r.BYTES*8);return f}function r6e(n,e){by(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:r}=e,{BASE:i,Fp:s,Fn:o}=n,a=o.ORDER,c=e.randomBytes||$F,l=e.adjustScalarBytes||(x=>x),u=e.domain||((x,C,R)=>{if(cf("phflag",R),C.length||R)throw new Error("Contexts/pre-hash are not supported");return x});function h(x){return o.create(x)}function d(x){return h(d2(x))}function f(x){const C=s.BYTES;x=$r("private key",x,C);const R=$r("hashed private key",r(x),2*C),k=l(R.slice(0,C)),_=R.slice(C,2*C),A=d(k);return{head:k,prefix:_,scalar:A}}function p(x){const{head:C,prefix:R,scalar:k}=f(x),_=i.multiply(k),A=_.toBytes();return{head:C,prefix:R,scalar:k,point:_,pointBytes:A}}function m(x){return p(x).pointBytes}function g(x=Uint8Array.of(),...C){const R=Dl(...C);return d(r(u(R,$r("context",x),!!t)))}function y(x,C,R={}){x=$r("message",x),t&&(x=t(x));const{prefix:k,scalar:_,pointBytes:A}=p(C),M=g(R.context,k,x),D=i.multiply(M).toBytes(),P=g(R.context,D,A,x),v=h(M+P*_);Vp("signature.s",v,yc,a);const S=s.BYTES,T=Dl(D,A5(v,S));return $r("result",T,S*2)}const b=e6e;function w(x,C,R,k=b){const{context:_,zip215:A}=k,M=s.BYTES;x=$r("signature",x,2*M),C=$r("message",C),R=$r("publicKey",R,M),A!==void 0&&cf("zip215",A),t&&(C=t(C));const D=d2(x.slice(M,2*M));let P,v,S;try{P=n.fromHex(R,A),v=n.fromHex(x.slice(0,M),A),S=i.multiplyUnsafe(D)}catch{return!1}if(!A&&P.isSmallOrder())return!1;const T=g(_,v.toBytes(),P.toBytes(),C);return v.add(P.multiplyUnsafe(T)).subtract(S).clearCofactor().is0()}return i.precompute(8),{getPublicKey:m,sign:y,verify:w,utils:{getExtendedPublicKey:p,randomPrivateKey:()=>c(s.BYTES),precompute(x=8,C=n.BASE){return C.precompute(x,!1)}},Point:n}}function i6e(n){const e={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=n1(e.n,n.nBitLength,!0),i={Fp:t,Fn:r,uvRatio:n.uvRatio},s={hash:n.hash,randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:e,curveOpts:i,eddsaOpts:s}}function s6e(n,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:n})}function o6e(n){const{CURVE:e,curveOpts:t,eddsaOpts:r}=i6e(n),i=n6e(e,t),s=r6e(i,r);return s6e(n,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const a6e=BigInt(1),VO=BigInt(2);BigInt(3);const c6e=BigInt(5),l6e=BigInt(8),t4={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:l6e,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function u6e(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=t4.p,a=n*n%s*n%s,c=Nr(a,VO,s)*a%s,l=Nr(c,a6e,s)*n%s,u=Nr(l,c6e,s)*l%s,h=Nr(u,e,s)*u%s,d=Nr(h,t,s)*h%s,f=Nr(d,r,s)*d%s,p=Nr(f,i,s)*f%s,m=Nr(p,i,s)*f%s,g=Nr(m,e,s)*u%s;return{pow_p_5_8:Nr(g,VO,s)*n%s,b2:a}}function h6e(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const WO=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function d6e(n,e){const t=t4.p,r=zr(e*e*e,t),i=zr(r*r*e,t),s=u6e(n*i).pow_p_5_8;let o=zr(n*r*s,t);const a=zr(e*o*o,t),c=o,l=zr(o*WO,t),u=a===n,h=a===zr(-n,t),d=a===zr(-n*WO,t);return u&&(o=c),(h||d)&&(o=l),Qse(o,t)&&(o=zr(-o,t)),{isValid:u||h,value:o}}const f6e=n1(t4.p,void 0,!0),p6e={...t4,Fp:f6e,hash:Rie,adjustScalarBytes:h6e,uvRatio:d6e},Dy=o6e(p6e);var w3={exports:{}};const m6e={},g6e=Object.freeze(Object.defineProperty({__proto__:null,default:m6e},Symbol.toStringTag,{value:"Module"})),y6e=my(g6e);var w6e=w3.exports,qO;function uW(){return qO||(qO=1,function(n){(function(e,t){function r(P,v){if(!P)throw new Error(v||"Assertion failed")}function i(P,v){P.super_=v;var S=function(){};S.prototype=v.prototype,P.prototype=new S,P.prototype.constructor=P}function s(P,v,S){if(s.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((v==="le"||v==="be")&&(S=v,v=10),this._init(P||0,v||10,S||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=y6e.Buffer}catch{}s.isBN=function(v){return v instanceof s?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===s.wordSize&&Array.isArray(v.words)},s.max=function(v,S){return v.cmp(S)>0?v:S},s.min=function(v,S){return v.cmp(S)<0?v:S},s.prototype._init=function(v,S,T){if(typeof v=="number")return this._initNumber(v,S,T);if(typeof v=="object")return this._initArray(v,S,T);S==="hex"&&(S=16),r(S===(S|0)&&S>=2&&S<=36),v=v.toString().replace(/\s+/g,"");var L=0;v[0]==="-"&&(L++,this.negative=1),L<v.length&&(S===16?this._parseHex(v,L,T):(this._parseBase(v,S,L),T==="le"&&this._initArray(this.toArray(),S,T)))},s.prototype._initNumber=function(v,S,T){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(r(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),T==="le"&&this._initArray(this.toArray(),S,T)},s.prototype._initArray=function(v,S,T){if(r(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var L=0;L<this.length;L++)this.words[L]=0;var U,V,W=0;if(T==="be")for(L=v.length-1,U=0;L>=0;L-=3)V=v[L]|v[L-1]<<8|v[L-2]<<16,this.words[U]|=V<<W&67108863,this.words[U+1]=V>>>26-W&67108863,W+=24,W>=26&&(W-=26,U++);else if(T==="le")for(L=0,U=0;L<v.length;L+=3)V=v[L]|v[L+1]<<8|v[L+2]<<16,this.words[U]|=V<<W&67108863,this.words[U+1]=V>>>26-W&67108863,W+=24,W>=26&&(W-=26,U++);return this._strip()};function a(P,v){var S=P.charCodeAt(v);if(S>=48&&S<=57)return S-48;if(S>=65&&S<=70)return S-55;if(S>=97&&S<=102)return S-87;r(!1,"Invalid character in "+P)}function c(P,v,S){var T=a(P,S);return S-1>=v&&(T|=a(P,S-1)<<4),T}s.prototype._parseHex=function(v,S,T){this.length=Math.ceil((v.length-S)/6),this.words=new Array(this.length);for(var L=0;L<this.length;L++)this.words[L]=0;var U=0,V=0,W;if(T==="be")for(L=v.length-1;L>=S;L-=2)W=c(v,S,L)<<U,this.words[V]|=W&67108863,U>=18?(U-=18,V+=1,this.words[V]|=W>>>26):U+=8;else{var F=v.length-S;for(L=F%2===0?S+1:S;L<v.length;L+=2)W=c(v,S,L)<<U,this.words[V]|=W&67108863,U>=18?(U-=18,V+=1,this.words[V]|=W>>>26):U+=8}this._strip()};function l(P,v,S,T){for(var L=0,U=0,V=Math.min(P.length,S),W=v;W<V;W++){var F=P.charCodeAt(W)-48;L*=T,F>=49?U=F-49+10:F>=17?U=F-17+10:U=F,r(F>=0&&U<T,"Invalid character"),L+=U}return L}s.prototype._parseBase=function(v,S,T){this.words=[0],this.length=1;for(var L=0,U=1;U<=67108863;U*=S)L++;L--,U=U/S|0;for(var V=v.length-T,W=V%L,F=Math.min(V,V-W)+T,I=0,N=T;N<F;N+=L)I=l(v,N,N+L,S),this.imuln(U),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(W!==0){var $=1;for(I=l(v,N,v.length,S),N=0;N<W;N++)$*=S;this.imuln($),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this._strip()},s.prototype.copy=function(v){v.words=new Array(this.length);for(var S=0;S<this.length;S++)v.words[S]=this.words[S];v.length=this.length,v.negative=this.negative,v.red=this.red};function u(P,v){P.words=v.words,P.length=v.length,P.negative=v.negative,P.red=v.red}if(s.prototype._move=function(v){u(v,this)},s.prototype.clone=function(){var v=new s(null);return this.copy(v),v},s.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(v,S){v=v||10,S=S|0||1;var T;if(v===16||v==="hex"){T="";for(var L=0,U=0,V=0;V<this.length;V++){var W=this.words[V],F=((W<<L|U)&16777215).toString(16);U=W>>>24-L&16777215,L+=2,L>=26&&(L-=26,V--),U!==0||V!==this.length-1?T=d[6-F.length]+F+T:T=F+T}for(U!==0&&(T=U.toString(16)+T);T.length%S!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}if(v===(v|0)&&v>=2&&v<=36){var I=f[v],N=p[v];T="";var $=this.clone();for($.negative=0;!$.isZero();){var j=$.modrn(N).toString(v);$=$.idivn(N),$.isZero()?T=j+T:T=d[I-j.length]+j+T}for(this.isZero()&&(T="0"+T);T.length%S!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(v,S){return this.toArrayLike(o,v,S)}),s.prototype.toArray=function(v,S){return this.toArrayLike(Array,v,S)};var m=function(v,S){return v.allocUnsafe?v.allocUnsafe(S):new v(S)};s.prototype.toArrayLike=function(v,S,T){this._strip();var L=this.byteLength(),U=T||Math.max(1,L);r(L<=U,"byte array longer than desired length"),r(U>0,"Requested array length <= 0");var V=m(v,U),W=S==="le"?"LE":"BE";return this["_toArrayLike"+W](V,L),V},s.prototype._toArrayLikeLE=function(v,S){for(var T=0,L=0,U=0,V=0;U<this.length;U++){var W=this.words[U]<<V|L;v[T++]=W&255,T<v.length&&(v[T++]=W>>8&255),T<v.length&&(v[T++]=W>>16&255),V===6?(T<v.length&&(v[T++]=W>>24&255),L=0,V=0):(L=W>>>24,V+=2)}if(T<v.length)for(v[T++]=L;T<v.length;)v[T++]=0},s.prototype._toArrayLikeBE=function(v,S){for(var T=v.length-1,L=0,U=0,V=0;U<this.length;U++){var W=this.words[U]<<V|L;v[T--]=W&255,T>=0&&(v[T--]=W>>8&255),T>=0&&(v[T--]=W>>16&255),V===6?(T>=0&&(v[T--]=W>>24&255),L=0,V=0):(L=W>>>24,V+=2)}if(T>=0)for(v[T--]=L;T>=0;)v[T--]=0},Math.clz32?s.prototype._countBits=function(v){return 32-Math.clz32(v)}:s.prototype._countBits=function(v){var S=v,T=0;return S>=4096&&(T+=13,S>>>=13),S>=64&&(T+=7,S>>>=7),S>=8&&(T+=4,S>>>=4),S>=2&&(T+=2,S>>>=2),T+S},s.prototype._zeroBits=function(v){if(v===0)return 26;var S=v,T=0;return(S&8191)===0&&(T+=13,S>>>=13),(S&127)===0&&(T+=7,S>>>=7),(S&15)===0&&(T+=4,S>>>=4),(S&3)===0&&(T+=2,S>>>=2),(S&1)===0&&T++,T},s.prototype.bitLength=function(){var v=this.words[this.length-1],S=this._countBits(v);return(this.length-1)*26+S};function g(P){for(var v=new Array(P.bitLength()),S=0;S<v.length;S++){var T=S/26|0,L=S%26;v[S]=P.words[T]>>>L&1}return v}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,S=0;S<this.length;S++){var T=this._zeroBits(this.words[S]);if(v+=T,T!==26)break}return v},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},s.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var S=0;S<v.length;S++)this.words[S]=this.words[S]|v.words[S];return this._strip()},s.prototype.ior=function(v){return r((this.negative|v.negative)===0),this.iuor(v)},s.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},s.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},s.prototype.iuand=function(v){var S;this.length>v.length?S=v:S=this;for(var T=0;T<S.length;T++)this.words[T]=this.words[T]&v.words[T];return this.length=S.length,this._strip()},s.prototype.iand=function(v){return r((this.negative|v.negative)===0),this.iuand(v)},s.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},s.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},s.prototype.iuxor=function(v){var S,T;this.length>v.length?(S=this,T=v):(S=v,T=this);for(var L=0;L<T.length;L++)this.words[L]=S.words[L]^T.words[L];if(this!==S)for(;L<S.length;L++)this.words[L]=S.words[L];return this.length=S.length,this._strip()},s.prototype.ixor=function(v){return r((this.negative|v.negative)===0),this.iuxor(v)},s.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},s.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},s.prototype.inotn=function(v){r(typeof v=="number"&&v>=0);var S=Math.ceil(v/26)|0,T=v%26;this._expand(S),T>0&&S--;for(var L=0;L<S;L++)this.words[L]=~this.words[L]&67108863;return T>0&&(this.words[L]=~this.words[L]&67108863>>26-T),this._strip()},s.prototype.notn=function(v){return this.clone().inotn(v)},s.prototype.setn=function(v,S){r(typeof v=="number"&&v>=0);var T=v/26|0,L=v%26;return this._expand(T+1),S?this.words[T]=this.words[T]|1<<L:this.words[T]=this.words[T]&~(1<<L),this._strip()},s.prototype.iadd=function(v){var S;if(this.negative!==0&&v.negative===0)return this.negative=0,S=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,S=this.isub(v),v.negative=1,S._normSign();var T,L;this.length>v.length?(T=this,L=v):(T=v,L=this);for(var U=0,V=0;V<L.length;V++)S=(T.words[V]|0)+(L.words[V]|0)+U,this.words[V]=S&67108863,U=S>>>26;for(;U!==0&&V<T.length;V++)S=(T.words[V]|0)+U,this.words[V]=S&67108863,U=S>>>26;if(this.length=T.length,U!==0)this.words[this.length]=U,this.length++;else if(T!==this)for(;V<T.length;V++)this.words[V]=T.words[V];return this},s.prototype.add=function(v){var S;return v.negative!==0&&this.negative===0?(v.negative=0,S=this.sub(v),v.negative^=1,S):v.negative===0&&this.negative!==0?(this.negative=0,S=v.sub(this),this.negative=1,S):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},s.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var S=this.iadd(v);return v.negative=1,S._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var T=this.cmp(v);if(T===0)return this.negative=0,this.length=1,this.words[0]=0,this;var L,U;T>0?(L=this,U=v):(L=v,U=this);for(var V=0,W=0;W<U.length;W++)S=(L.words[W]|0)-(U.words[W]|0)+V,V=S>>26,this.words[W]=S&67108863;for(;V!==0&&W<L.length;W++)S=(L.words[W]|0)+V,V=S>>26,this.words[W]=S&67108863;if(V===0&&W<L.length&&L!==this)for(;W<L.length;W++)this.words[W]=L.words[W];return this.length=Math.max(this.length,W),L!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(v){return this.clone().isub(v)};function y(P,v,S){S.negative=v.negative^P.negative;var T=P.length+v.length|0;S.length=T,T=T-1|0;var L=P.words[0]|0,U=v.words[0]|0,V=L*U,W=V&67108863,F=V/67108864|0;S.words[0]=W;for(var I=1;I<T;I++){for(var N=F>>>26,$=F&67108863,j=Math.min(I,v.length-1),te=Math.max(0,I-P.length+1);te<=j;te++){var ce=I-te|0;L=P.words[ce]|0,U=v.words[te]|0,V=L*U+$,N+=V/67108864|0,$=V&67108863}S.words[I]=$|0,F=N|0}return F!==0?S.words[I]=F|0:S.length--,S._strip()}var b=function(v,S,T){var L=v.words,U=S.words,V=T.words,W=0,F,I,N,$=L[0]|0,j=$&8191,te=$>>>13,ce=L[1]|0,ve=ce&8191,Te=ce>>>13,$e=L[2]|0,pe=$e&8191,X=$e>>>13,Z=L[3]|0,H=Z&8191,oe=Z>>>13,le=L[4]|0,Q=le&8191,ie=le>>>13,xe=L[5]|0,fe=xe&8191,me=xe>>>13,De=L[6]|0,K=De&8191,q=De>>>13,he=L[7]|0,ge=he&8191,z=he>>>13,O=L[8]|0,B=O&8191,G=O>>>13,re=L[9]|0,ae=re&8191,se=re>>>13,Le=U[0]|0,ze=Le&8191,Be=Le>>>13,He=U[1]|0,Ye=He&8191,de=He>>>13,at=U[2]|0,ke=at&8191,Qe=at>>>13,Ge=U[3]|0,Ne=Ge&8191,tt=Ge>>>13,Kt=U[4]|0,Yt=Kt&8191,$t=Kt>>>13,ks=U[5]|0,Un=ks&8191,vr=ks>>>13,b1=U[6]|0,Kn=b1&8191,fr=b1>>>13,_1=U[7]|0,br=_1&8191,cr=_1>>>13,E1=U[8]|0,lr=E1&8191,_r=E1>>>13,x1=U[9]|0,Tr=x1&8191,Ir=x1>>>13;T.negative=v.negative^S.negative,T.length=19,F=Math.imul(j,ze),I=Math.imul(j,Be),I=I+Math.imul(te,ze)|0,N=Math.imul(te,Be);var S1=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(S1>>>26)|0,S1&=67108863,F=Math.imul(ve,ze),I=Math.imul(ve,Be),I=I+Math.imul(Te,ze)|0,N=Math.imul(Te,Be),F=F+Math.imul(j,Ye)|0,I=I+Math.imul(j,de)|0,I=I+Math.imul(te,Ye)|0,N=N+Math.imul(te,de)|0;var A1=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(A1>>>26)|0,A1&=67108863,F=Math.imul(pe,ze),I=Math.imul(pe,Be),I=I+Math.imul(X,ze)|0,N=Math.imul(X,Be),F=F+Math.imul(ve,Ye)|0,I=I+Math.imul(ve,de)|0,I=I+Math.imul(Te,Ye)|0,N=N+Math.imul(Te,de)|0,F=F+Math.imul(j,ke)|0,I=I+Math.imul(j,Qe)|0,I=I+Math.imul(te,ke)|0,N=N+Math.imul(te,Qe)|0;var C1=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(C1>>>26)|0,C1&=67108863,F=Math.imul(H,ze),I=Math.imul(H,Be),I=I+Math.imul(oe,ze)|0,N=Math.imul(oe,Be),F=F+Math.imul(pe,Ye)|0,I=I+Math.imul(pe,de)|0,I=I+Math.imul(X,Ye)|0,N=N+Math.imul(X,de)|0,F=F+Math.imul(ve,ke)|0,I=I+Math.imul(ve,Qe)|0,I=I+Math.imul(Te,ke)|0,N=N+Math.imul(Te,Qe)|0,F=F+Math.imul(j,Ne)|0,I=I+Math.imul(j,tt)|0,I=I+Math.imul(te,Ne)|0,N=N+Math.imul(te,tt)|0;var T1=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(T1>>>26)|0,T1&=67108863,F=Math.imul(Q,ze),I=Math.imul(Q,Be),I=I+Math.imul(ie,ze)|0,N=Math.imul(ie,Be),F=F+Math.imul(H,Ye)|0,I=I+Math.imul(H,de)|0,I=I+Math.imul(oe,Ye)|0,N=N+Math.imul(oe,de)|0,F=F+Math.imul(pe,ke)|0,I=I+Math.imul(pe,Qe)|0,I=I+Math.imul(X,ke)|0,N=N+Math.imul(X,Qe)|0,F=F+Math.imul(ve,Ne)|0,I=I+Math.imul(ve,tt)|0,I=I+Math.imul(Te,Ne)|0,N=N+Math.imul(Te,tt)|0,F=F+Math.imul(j,Yt)|0,I=I+Math.imul(j,$t)|0,I=I+Math.imul(te,Yt)|0,N=N+Math.imul(te,$t)|0;var J=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(J>>>26)|0,J&=67108863,F=Math.imul(fe,ze),I=Math.imul(fe,Be),I=I+Math.imul(me,ze)|0,N=Math.imul(me,Be),F=F+Math.imul(Q,Ye)|0,I=I+Math.imul(Q,de)|0,I=I+Math.imul(ie,Ye)|0,N=N+Math.imul(ie,de)|0,F=F+Math.imul(H,ke)|0,I=I+Math.imul(H,Qe)|0,I=I+Math.imul(oe,ke)|0,N=N+Math.imul(oe,Qe)|0,F=F+Math.imul(pe,Ne)|0,I=I+Math.imul(pe,tt)|0,I=I+Math.imul(X,Ne)|0,N=N+Math.imul(X,tt)|0,F=F+Math.imul(ve,Yt)|0,I=I+Math.imul(ve,$t)|0,I=I+Math.imul(Te,Yt)|0,N=N+Math.imul(Te,$t)|0,F=F+Math.imul(j,Un)|0,I=I+Math.imul(j,vr)|0,I=I+Math.imul(te,Un)|0,N=N+Math.imul(te,vr)|0;var ye=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(ye>>>26)|0,ye&=67108863,F=Math.imul(K,ze),I=Math.imul(K,Be),I=I+Math.imul(q,ze)|0,N=Math.imul(q,Be),F=F+Math.imul(fe,Ye)|0,I=I+Math.imul(fe,de)|0,I=I+Math.imul(me,Ye)|0,N=N+Math.imul(me,de)|0,F=F+Math.imul(Q,ke)|0,I=I+Math.imul(Q,Qe)|0,I=I+Math.imul(ie,ke)|0,N=N+Math.imul(ie,Qe)|0,F=F+Math.imul(H,Ne)|0,I=I+Math.imul(H,tt)|0,I=I+Math.imul(oe,Ne)|0,N=N+Math.imul(oe,tt)|0,F=F+Math.imul(pe,Yt)|0,I=I+Math.imul(pe,$t)|0,I=I+Math.imul(X,Yt)|0,N=N+Math.imul(X,$t)|0,F=F+Math.imul(ve,Un)|0,I=I+Math.imul(ve,vr)|0,I=I+Math.imul(Te,Un)|0,N=N+Math.imul(Te,vr)|0,F=F+Math.imul(j,Kn)|0,I=I+Math.imul(j,fr)|0,I=I+Math.imul(te,Kn)|0,N=N+Math.imul(te,fr)|0;var Ie=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,F=Math.imul(ge,ze),I=Math.imul(ge,Be),I=I+Math.imul(z,ze)|0,N=Math.imul(z,Be),F=F+Math.imul(K,Ye)|0,I=I+Math.imul(K,de)|0,I=I+Math.imul(q,Ye)|0,N=N+Math.imul(q,de)|0,F=F+Math.imul(fe,ke)|0,I=I+Math.imul(fe,Qe)|0,I=I+Math.imul(me,ke)|0,N=N+Math.imul(me,Qe)|0,F=F+Math.imul(Q,Ne)|0,I=I+Math.imul(Q,tt)|0,I=I+Math.imul(ie,Ne)|0,N=N+Math.imul(ie,tt)|0,F=F+Math.imul(H,Yt)|0,I=I+Math.imul(H,$t)|0,I=I+Math.imul(oe,Yt)|0,N=N+Math.imul(oe,$t)|0,F=F+Math.imul(pe,Un)|0,I=I+Math.imul(pe,vr)|0,I=I+Math.imul(X,Un)|0,N=N+Math.imul(X,vr)|0,F=F+Math.imul(ve,Kn)|0,I=I+Math.imul(ve,fr)|0,I=I+Math.imul(Te,Kn)|0,N=N+Math.imul(Te,fr)|0,F=F+Math.imul(j,br)|0,I=I+Math.imul(j,cr)|0,I=I+Math.imul(te,br)|0,N=N+Math.imul(te,cr)|0;var Me=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(Me>>>26)|0,Me&=67108863,F=Math.imul(B,ze),I=Math.imul(B,Be),I=I+Math.imul(G,ze)|0,N=Math.imul(G,Be),F=F+Math.imul(ge,Ye)|0,I=I+Math.imul(ge,de)|0,I=I+Math.imul(z,Ye)|0,N=N+Math.imul(z,de)|0,F=F+Math.imul(K,ke)|0,I=I+Math.imul(K,Qe)|0,I=I+Math.imul(q,ke)|0,N=N+Math.imul(q,Qe)|0,F=F+Math.imul(fe,Ne)|0,I=I+Math.imul(fe,tt)|0,I=I+Math.imul(me,Ne)|0,N=N+Math.imul(me,tt)|0,F=F+Math.imul(Q,Yt)|0,I=I+Math.imul(Q,$t)|0,I=I+Math.imul(ie,Yt)|0,N=N+Math.imul(ie,$t)|0,F=F+Math.imul(H,Un)|0,I=I+Math.imul(H,vr)|0,I=I+Math.imul(oe,Un)|0,N=N+Math.imul(oe,vr)|0,F=F+Math.imul(pe,Kn)|0,I=I+Math.imul(pe,fr)|0,I=I+Math.imul(X,Kn)|0,N=N+Math.imul(X,fr)|0,F=F+Math.imul(ve,br)|0,I=I+Math.imul(ve,cr)|0,I=I+Math.imul(Te,br)|0,N=N+Math.imul(Te,cr)|0,F=F+Math.imul(j,lr)|0,I=I+Math.imul(j,_r)|0,I=I+Math.imul(te,lr)|0,N=N+Math.imul(te,_r)|0;var we=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(we>>>26)|0,we&=67108863,F=Math.imul(ae,ze),I=Math.imul(ae,Be),I=I+Math.imul(se,ze)|0,N=Math.imul(se,Be),F=F+Math.imul(B,Ye)|0,I=I+Math.imul(B,de)|0,I=I+Math.imul(G,Ye)|0,N=N+Math.imul(G,de)|0,F=F+Math.imul(ge,ke)|0,I=I+Math.imul(ge,Qe)|0,I=I+Math.imul(z,ke)|0,N=N+Math.imul(z,Qe)|0,F=F+Math.imul(K,Ne)|0,I=I+Math.imul(K,tt)|0,I=I+Math.imul(q,Ne)|0,N=N+Math.imul(q,tt)|0,F=F+Math.imul(fe,Yt)|0,I=I+Math.imul(fe,$t)|0,I=I+Math.imul(me,Yt)|0,N=N+Math.imul(me,$t)|0,F=F+Math.imul(Q,Un)|0,I=I+Math.imul(Q,vr)|0,I=I+Math.imul(ie,Un)|0,N=N+Math.imul(ie,vr)|0,F=F+Math.imul(H,Kn)|0,I=I+Math.imul(H,fr)|0,I=I+Math.imul(oe,Kn)|0,N=N+Math.imul(oe,fr)|0,F=F+Math.imul(pe,br)|0,I=I+Math.imul(pe,cr)|0,I=I+Math.imul(X,br)|0,N=N+Math.imul(X,cr)|0,F=F+Math.imul(ve,lr)|0,I=I+Math.imul(ve,_r)|0,I=I+Math.imul(Te,lr)|0,N=N+Math.imul(Te,_r)|0,F=F+Math.imul(j,Tr)|0,I=I+Math.imul(j,Ir)|0,I=I+Math.imul(te,Tr)|0,N=N+Math.imul(te,Ir)|0;var Ke=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,F=Math.imul(ae,Ye),I=Math.imul(ae,de),I=I+Math.imul(se,Ye)|0,N=Math.imul(se,de),F=F+Math.imul(B,ke)|0,I=I+Math.imul(B,Qe)|0,I=I+Math.imul(G,ke)|0,N=N+Math.imul(G,Qe)|0,F=F+Math.imul(ge,Ne)|0,I=I+Math.imul(ge,tt)|0,I=I+Math.imul(z,Ne)|0,N=N+Math.imul(z,tt)|0,F=F+Math.imul(K,Yt)|0,I=I+Math.imul(K,$t)|0,I=I+Math.imul(q,Yt)|0,N=N+Math.imul(q,$t)|0,F=F+Math.imul(fe,Un)|0,I=I+Math.imul(fe,vr)|0,I=I+Math.imul(me,Un)|0,N=N+Math.imul(me,vr)|0,F=F+Math.imul(Q,Kn)|0,I=I+Math.imul(Q,fr)|0,I=I+Math.imul(ie,Kn)|0,N=N+Math.imul(ie,fr)|0,F=F+Math.imul(H,br)|0,I=I+Math.imul(H,cr)|0,I=I+Math.imul(oe,br)|0,N=N+Math.imul(oe,cr)|0,F=F+Math.imul(pe,lr)|0,I=I+Math.imul(pe,_r)|0,I=I+Math.imul(X,lr)|0,N=N+Math.imul(X,_r)|0,F=F+Math.imul(ve,Tr)|0,I=I+Math.imul(ve,Ir)|0,I=I+Math.imul(Te,Tr)|0,N=N+Math.imul(Te,Ir)|0;var st=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(st>>>26)|0,st&=67108863,F=Math.imul(ae,ke),I=Math.imul(ae,Qe),I=I+Math.imul(se,ke)|0,N=Math.imul(se,Qe),F=F+Math.imul(B,Ne)|0,I=I+Math.imul(B,tt)|0,I=I+Math.imul(G,Ne)|0,N=N+Math.imul(G,tt)|0,F=F+Math.imul(ge,Yt)|0,I=I+Math.imul(ge,$t)|0,I=I+Math.imul(z,Yt)|0,N=N+Math.imul(z,$t)|0,F=F+Math.imul(K,Un)|0,I=I+Math.imul(K,vr)|0,I=I+Math.imul(q,Un)|0,N=N+Math.imul(q,vr)|0,F=F+Math.imul(fe,Kn)|0,I=I+Math.imul(fe,fr)|0,I=I+Math.imul(me,Kn)|0,N=N+Math.imul(me,fr)|0,F=F+Math.imul(Q,br)|0,I=I+Math.imul(Q,cr)|0,I=I+Math.imul(ie,br)|0,N=N+Math.imul(ie,cr)|0,F=F+Math.imul(H,lr)|0,I=I+Math.imul(H,_r)|0,I=I+Math.imul(oe,lr)|0,N=N+Math.imul(oe,_r)|0,F=F+Math.imul(pe,Tr)|0,I=I+Math.imul(pe,Ir)|0,I=I+Math.imul(X,Tr)|0,N=N+Math.imul(X,Ir)|0;var xt=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(xt>>>26)|0,xt&=67108863,F=Math.imul(ae,Ne),I=Math.imul(ae,tt),I=I+Math.imul(se,Ne)|0,N=Math.imul(se,tt),F=F+Math.imul(B,Yt)|0,I=I+Math.imul(B,$t)|0,I=I+Math.imul(G,Yt)|0,N=N+Math.imul(G,$t)|0,F=F+Math.imul(ge,Un)|0,I=I+Math.imul(ge,vr)|0,I=I+Math.imul(z,Un)|0,N=N+Math.imul(z,vr)|0,F=F+Math.imul(K,Kn)|0,I=I+Math.imul(K,fr)|0,I=I+Math.imul(q,Kn)|0,N=N+Math.imul(q,fr)|0,F=F+Math.imul(fe,br)|0,I=I+Math.imul(fe,cr)|0,I=I+Math.imul(me,br)|0,N=N+Math.imul(me,cr)|0,F=F+Math.imul(Q,lr)|0,I=I+Math.imul(Q,_r)|0,I=I+Math.imul(ie,lr)|0,N=N+Math.imul(ie,_r)|0,F=F+Math.imul(H,Tr)|0,I=I+Math.imul(H,Ir)|0,I=I+Math.imul(oe,Tr)|0,N=N+Math.imul(oe,Ir)|0;var gt=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(gt>>>26)|0,gt&=67108863,F=Math.imul(ae,Yt),I=Math.imul(ae,$t),I=I+Math.imul(se,Yt)|0,N=Math.imul(se,$t),F=F+Math.imul(B,Un)|0,I=I+Math.imul(B,vr)|0,I=I+Math.imul(G,Un)|0,N=N+Math.imul(G,vr)|0,F=F+Math.imul(ge,Kn)|0,I=I+Math.imul(ge,fr)|0,I=I+Math.imul(z,Kn)|0,N=N+Math.imul(z,fr)|0,F=F+Math.imul(K,br)|0,I=I+Math.imul(K,cr)|0,I=I+Math.imul(q,br)|0,N=N+Math.imul(q,cr)|0,F=F+Math.imul(fe,lr)|0,I=I+Math.imul(fe,_r)|0,I=I+Math.imul(me,lr)|0,N=N+Math.imul(me,_r)|0,F=F+Math.imul(Q,Tr)|0,I=I+Math.imul(Q,Ir)|0,I=I+Math.imul(ie,Tr)|0,N=N+Math.imul(ie,Ir)|0;var Bt=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,F=Math.imul(ae,Un),I=Math.imul(ae,vr),I=I+Math.imul(se,Un)|0,N=Math.imul(se,vr),F=F+Math.imul(B,Kn)|0,I=I+Math.imul(B,fr)|0,I=I+Math.imul(G,Kn)|0,N=N+Math.imul(G,fr)|0,F=F+Math.imul(ge,br)|0,I=I+Math.imul(ge,cr)|0,I=I+Math.imul(z,br)|0,N=N+Math.imul(z,cr)|0,F=F+Math.imul(K,lr)|0,I=I+Math.imul(K,_r)|0,I=I+Math.imul(q,lr)|0,N=N+Math.imul(q,_r)|0,F=F+Math.imul(fe,Tr)|0,I=I+Math.imul(fe,Ir)|0,I=I+Math.imul(me,Tr)|0,N=N+Math.imul(me,Ir)|0;var zt=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(zt>>>26)|0,zt&=67108863,F=Math.imul(ae,Kn),I=Math.imul(ae,fr),I=I+Math.imul(se,Kn)|0,N=Math.imul(se,fr),F=F+Math.imul(B,br)|0,I=I+Math.imul(B,cr)|0,I=I+Math.imul(G,br)|0,N=N+Math.imul(G,cr)|0,F=F+Math.imul(ge,lr)|0,I=I+Math.imul(ge,_r)|0,I=I+Math.imul(z,lr)|0,N=N+Math.imul(z,_r)|0,F=F+Math.imul(K,Tr)|0,I=I+Math.imul(K,Ir)|0,I=I+Math.imul(q,Tr)|0,N=N+Math.imul(q,Ir)|0;var Rt=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,F=Math.imul(ae,br),I=Math.imul(ae,cr),I=I+Math.imul(se,br)|0,N=Math.imul(se,cr),F=F+Math.imul(B,lr)|0,I=I+Math.imul(B,_r)|0,I=I+Math.imul(G,lr)|0,N=N+Math.imul(G,_r)|0,F=F+Math.imul(ge,Tr)|0,I=I+Math.imul(ge,Ir)|0,I=I+Math.imul(z,Tr)|0,N=N+Math.imul(z,Ir)|0;var dn=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(dn>>>26)|0,dn&=67108863,F=Math.imul(ae,lr),I=Math.imul(ae,_r),I=I+Math.imul(se,lr)|0,N=Math.imul(se,_r),F=F+Math.imul(B,Tr)|0,I=I+Math.imul(B,Ir)|0,I=I+Math.imul(G,Tr)|0,N=N+Math.imul(G,Ir)|0;var _n=(W+F|0)+((I&8191)<<13)|0;W=(N+(I>>>13)|0)+(_n>>>26)|0,_n&=67108863,F=Math.imul(ae,Tr),I=Math.imul(ae,Ir),I=I+Math.imul(se,Tr)|0,N=Math.imul(se,Ir);var Xn=(W+F|0)+((I&8191)<<13)|0;return W=(N+(I>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,V[0]=S1,V[1]=A1,V[2]=C1,V[3]=T1,V[4]=J,V[5]=ye,V[6]=Ie,V[7]=Me,V[8]=we,V[9]=Ke,V[10]=st,V[11]=xt,V[12]=gt,V[13]=Bt,V[14]=zt,V[15]=Rt,V[16]=dn,V[17]=_n,V[18]=Xn,W!==0&&(V[19]=W,T.length++),T};Math.imul||(b=y);function w(P,v,S){S.negative=v.negative^P.negative,S.length=P.length+v.length;for(var T=0,L=0,U=0;U<S.length-1;U++){var V=L;L=0;for(var W=T&67108863,F=Math.min(U,v.length-1),I=Math.max(0,U-P.length+1);I<=F;I++){var N=U-I,$=P.words[N]|0,j=v.words[I]|0,te=$*j,ce=te&67108863;V=V+(te/67108864|0)|0,ce=ce+W|0,W=ce&67108863,V=V+(ce>>>26)|0,L+=V>>>26,V&=67108863}S.words[U]=W,T=V,V=L}return T!==0?S.words[U]=T:S.length--,S._strip()}function E(P,v,S){return w(P,v,S)}s.prototype.mulTo=function(v,S){var T,L=this.length+v.length;return this.length===10&&v.length===10?T=b(this,v,S):L<63?T=y(this,v,S):L<1024?T=w(this,v,S):T=E(this,v,S),T},s.prototype.mul=function(v){var S=new s(null);return S.words=new Array(this.length+v.length),this.mulTo(v,S)},s.prototype.mulf=function(v){var S=new s(null);return S.words=new Array(this.length+v.length),E(this,v,S)},s.prototype.imul=function(v){return this.clone().mulTo(v,this)},s.prototype.imuln=function(v){var S=v<0;S&&(v=-v),r(typeof v=="number"),r(v<67108864);for(var T=0,L=0;L<this.length;L++){var U=(this.words[L]|0)*v,V=(U&67108863)+(T&67108863);T>>=26,T+=U/67108864|0,T+=V>>>26,this.words[L]=V&67108863}return T!==0&&(this.words[L]=T,this.length++),this.length=v===0?1:this.length,S?this.ineg():this},s.prototype.muln=function(v){return this.clone().imuln(v)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(v){var S=g(v);if(S.length===0)return new s(1);for(var T=this,L=0;L<S.length&&S[L]===0;L++,T=T.sqr());if(++L<S.length)for(var U=T.sqr();L<S.length;L++,U=U.sqr())S[L]!==0&&(T=T.mul(U));return T},s.prototype.iushln=function(v){r(typeof v=="number"&&v>=0);var S=v%26,T=(v-S)/26,L=67108863>>>26-S<<26-S,U;if(S!==0){var V=0;for(U=0;U<this.length;U++){var W=this.words[U]&L,F=(this.words[U]|0)-W<<S;this.words[U]=F|V,V=W>>>26-S}V&&(this.words[U]=V,this.length++)}if(T!==0){for(U=this.length-1;U>=0;U--)this.words[U+T]=this.words[U];for(U=0;U<T;U++)this.words[U]=0;this.length+=T}return this._strip()},s.prototype.ishln=function(v){return r(this.negative===0),this.iushln(v)},s.prototype.iushrn=function(v,S,T){r(typeof v=="number"&&v>=0);var L;S?L=(S-S%26)/26:L=0;var U=v%26,V=Math.min((v-U)/26,this.length),W=67108863^67108863>>>U<<U,F=T;if(L-=V,L=Math.max(0,L),F){for(var I=0;I<V;I++)F.words[I]=this.words[I];F.length=V}if(V!==0)if(this.length>V)for(this.length-=V,I=0;I<this.length;I++)this.words[I]=this.words[I+V];else this.words[0]=0,this.length=1;var N=0;for(I=this.length-1;I>=0&&(N!==0||I>=L);I--){var $=this.words[I]|0;this.words[I]=N<<26-U|$>>>U,N=$&W}return F&&N!==0&&(F.words[F.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(v,S,T){return r(this.negative===0),this.iushrn(v,S,T)},s.prototype.shln=function(v){return this.clone().ishln(v)},s.prototype.ushln=function(v){return this.clone().iushln(v)},s.prototype.shrn=function(v){return this.clone().ishrn(v)},s.prototype.ushrn=function(v){return this.clone().iushrn(v)},s.prototype.testn=function(v){r(typeof v=="number"&&v>=0);var S=v%26,T=(v-S)/26,L=1<<S;if(this.length<=T)return!1;var U=this.words[T];return!!(U&L)},s.prototype.imaskn=function(v){r(typeof v=="number"&&v>=0);var S=v%26,T=(v-S)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=T)return this;if(S!==0&&T++,this.length=Math.min(T,this.length),S!==0){var L=67108863^67108863>>>S<<S;this.words[this.length-1]&=L}return this._strip()},s.prototype.maskn=function(v){return this.clone().imaskn(v)},s.prototype.iaddn=function(v){return r(typeof v=="number"),r(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<=v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},s.prototype._iaddn=function(v){this.words[0]+=v;for(var S=0;S<this.length&&this.words[S]>=67108864;S++)this.words[S]-=67108864,S===this.length-1?this.words[S+1]=1:this.words[S+1]++;return this.length=Math.max(this.length,S+1),this},s.prototype.isubn=function(v){if(r(typeof v=="number"),r(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var S=0;S<this.length&&this.words[S]<0;S++)this.words[S]+=67108864,this.words[S+1]-=1;return this._strip()},s.prototype.addn=function(v){return this.clone().iaddn(v)},s.prototype.subn=function(v){return this.clone().isubn(v)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(v,S,T){var L=v.length+T,U;this._expand(L);var V,W=0;for(U=0;U<v.length;U++){V=(this.words[U+T]|0)+W;var F=(v.words[U]|0)*S;V-=F&67108863,W=(V>>26)-(F/67108864|0),this.words[U+T]=V&67108863}for(;U<this.length-T;U++)V=(this.words[U+T]|0)+W,W=V>>26,this.words[U+T]=V&67108863;if(W===0)return this._strip();for(r(W===-1),W=0,U=0;U<this.length;U++)V=-(this.words[U]|0)+W,W=V>>26,this.words[U]=V&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(v,S){var T=this.length-v.length,L=this.clone(),U=v,V=U.words[U.length-1]|0,W=this._countBits(V);T=26-W,T!==0&&(U=U.ushln(T),L.iushln(T),V=U.words[U.length-1]|0);var F=L.length-U.length,I;if(S!=="mod"){I=new s(null),I.length=F+1,I.words=new Array(I.length);for(var N=0;N<I.length;N++)I.words[N]=0}var $=L.clone()._ishlnsubmul(U,1,F);$.negative===0&&(L=$,I&&(I.words[F]=1));for(var j=F-1;j>=0;j--){var te=(L.words[U.length+j]|0)*67108864+(L.words[U.length+j-1]|0);for(te=Math.min(te/V|0,67108863),L._ishlnsubmul(U,te,j);L.negative!==0;)te--,L.negative=0,L._ishlnsubmul(U,1,j),L.isZero()||(L.negative^=1);I&&(I.words[j]=te)}return I&&I._strip(),L._strip(),S!=="div"&&T!==0&&L.iushrn(T),{div:I||null,mod:L}},s.prototype.divmod=function(v,S,T){if(r(!v.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var L,U,V;return this.negative!==0&&v.negative===0?(V=this.neg().divmod(v,S),S!=="mod"&&(L=V.div.neg()),S!=="div"&&(U=V.mod.neg(),T&&U.negative!==0&&U.iadd(v)),{div:L,mod:U}):this.negative===0&&v.negative!==0?(V=this.divmod(v.neg(),S),S!=="mod"&&(L=V.div.neg()),{div:L,mod:V.mod}):(this.negative&v.negative)!==0?(V=this.neg().divmod(v.neg(),S),S!=="div"&&(U=V.mod.neg(),T&&U.negative!==0&&U.isub(v)),{div:V.div,mod:U}):v.length>this.length||this.cmp(v)<0?{div:new s(0),mod:this}:v.length===1?S==="div"?{div:this.divn(v.words[0]),mod:null}:S==="mod"?{div:null,mod:new s(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new s(this.modrn(v.words[0]))}:this._wordDiv(v,S)},s.prototype.div=function(v){return this.divmod(v,"div",!1).div},s.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},s.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},s.prototype.divRound=function(v){var S=this.divmod(v);if(S.mod.isZero())return S.div;var T=S.div.negative!==0?S.mod.isub(v):S.mod,L=v.ushrn(1),U=v.andln(1),V=T.cmp(L);return V<0||U===1&&V===0?S.div:S.div.negative!==0?S.div.isubn(1):S.div.iaddn(1)},s.prototype.modrn=function(v){var S=v<0;S&&(v=-v),r(v<=67108863);for(var T=(1<<26)%v,L=0,U=this.length-1;U>=0;U--)L=(T*L+(this.words[U]|0))%v;return S?-L:L},s.prototype.modn=function(v){return this.modrn(v)},s.prototype.idivn=function(v){var S=v<0;S&&(v=-v),r(v<=67108863);for(var T=0,L=this.length-1;L>=0;L--){var U=(this.words[L]|0)+T*67108864;this.words[L]=U/v|0,T=U%v}return this._strip(),S?this.ineg():this},s.prototype.divn=function(v){return this.clone().idivn(v)},s.prototype.egcd=function(v){r(v.negative===0),r(!v.isZero());var S=this,T=v.clone();S.negative!==0?S=S.umod(v):S=S.clone();for(var L=new s(1),U=new s(0),V=new s(0),W=new s(1),F=0;S.isEven()&&T.isEven();)S.iushrn(1),T.iushrn(1),++F;for(var I=T.clone(),N=S.clone();!S.isZero();){for(var $=0,j=1;(S.words[0]&j)===0&&$<26;++$,j<<=1);if($>0)for(S.iushrn($);$-- >0;)(L.isOdd()||U.isOdd())&&(L.iadd(I),U.isub(N)),L.iushrn(1),U.iushrn(1);for(var te=0,ce=1;(T.words[0]&ce)===0&&te<26;++te,ce<<=1);if(te>0)for(T.iushrn(te);te-- >0;)(V.isOdd()||W.isOdd())&&(V.iadd(I),W.isub(N)),V.iushrn(1),W.iushrn(1);S.cmp(T)>=0?(S.isub(T),L.isub(V),U.isub(W)):(T.isub(S),V.isub(L),W.isub(U))}return{a:V,b:W,gcd:T.iushln(F)}},s.prototype._invmp=function(v){r(v.negative===0),r(!v.isZero());var S=this,T=v.clone();S.negative!==0?S=S.umod(v):S=S.clone();for(var L=new s(1),U=new s(0),V=T.clone();S.cmpn(1)>0&&T.cmpn(1)>0;){for(var W=0,F=1;(S.words[0]&F)===0&&W<26;++W,F<<=1);if(W>0)for(S.iushrn(W);W-- >0;)L.isOdd()&&L.iadd(V),L.iushrn(1);for(var I=0,N=1;(T.words[0]&N)===0&&I<26;++I,N<<=1);if(I>0)for(T.iushrn(I);I-- >0;)U.isOdd()&&U.iadd(V),U.iushrn(1);S.cmp(T)>=0?(S.isub(T),L.isub(U)):(T.isub(S),U.isub(L))}var $;return S.cmpn(1)===0?$=L:$=U,$.cmpn(0)<0&&$.iadd(v),$},s.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var S=this.clone(),T=v.clone();S.negative=0,T.negative=0;for(var L=0;S.isEven()&&T.isEven();L++)S.iushrn(1),T.iushrn(1);do{for(;S.isEven();)S.iushrn(1);for(;T.isEven();)T.iushrn(1);var U=S.cmp(T);if(U<0){var V=S;S=T,T=V}else if(U===0||T.cmpn(1)===0)break;S.isub(T)}while(!0);return T.iushln(L)},s.prototype.invm=function(v){return this.egcd(v).a.umod(v)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(v){return this.words[0]&v},s.prototype.bincn=function(v){r(typeof v=="number");var S=v%26,T=(v-S)/26,L=1<<S;if(this.length<=T)return this._expand(T+1),this.words[T]|=L,this;for(var U=L,V=T;U!==0&&V<this.length;V++){var W=this.words[V]|0;W+=U,U=W>>>26,W&=67108863,this.words[V]=W}return U!==0&&(this.words[V]=U,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(v){var S=v<0;if(this.negative!==0&&!S)return-1;if(this.negative===0&&S)return 1;this._strip();var T;if(this.length>1)T=1;else{S&&(v=-v),r(v<=67108863,"Number is too big");var L=this.words[0]|0;T=L===v?0:L<v?-1:1}return this.negative!==0?-T|0:T},s.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var S=this.ucmp(v);return this.negative!==0?-S|0:S},s.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var S=0,T=this.length-1;T>=0;T--){var L=this.words[T]|0,U=v.words[T]|0;if(L!==U){L<U?S=-1:L>U&&(S=1);break}}return S},s.prototype.gtn=function(v){return this.cmpn(v)===1},s.prototype.gt=function(v){return this.cmp(v)===1},s.prototype.gten=function(v){return this.cmpn(v)>=0},s.prototype.gte=function(v){return this.cmp(v)>=0},s.prototype.ltn=function(v){return this.cmpn(v)===-1},s.prototype.lt=function(v){return this.cmp(v)===-1},s.prototype.lten=function(v){return this.cmpn(v)<=0},s.prototype.lte=function(v){return this.cmp(v)<=0},s.prototype.eqn=function(v){return this.cmpn(v)===0},s.prototype.eq=function(v){return this.cmp(v)===0},s.red=function(v){return new M(v)},s.prototype.toRed=function(v){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(v){return this.red=v,this},s.prototype.forceRed=function(v){return r(!this.red,"Already a number in reduction context"),this._forceRed(v)},s.prototype.redAdd=function(v){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},s.prototype.redIAdd=function(v){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},s.prototype.redSub=function(v){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},s.prototype.redISub=function(v){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},s.prototype.redShl=function(v){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},s.prototype.redMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},s.prototype.redIMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(v){return r(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var x={k256:null,p224:null,p192:null,p25519:null};function C(P,v){this.name=P,this.p=new s(v,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var v=new s(null);return v.words=new Array(Math.ceil(this.n/13)),v},C.prototype.ireduce=function(v){var S=v,T;do this.split(S,this.tmp),S=this.imulK(S),S=S.iadd(this.tmp),T=S.bitLength();while(T>this.n);var L=T<this.n?-1:S.ucmp(this.p);return L===0?(S.words[0]=0,S.length=1):L>0?S.isub(this.p):S.strip!==void 0?S.strip():S._strip(),S},C.prototype.split=function(v,S){v.iushrn(this.n,0,S)},C.prototype.imulK=function(v){return v.imul(this.k)};function R(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(R,C),R.prototype.split=function(v,S){for(var T=4194303,L=Math.min(v.length,9),U=0;U<L;U++)S.words[U]=v.words[U];if(S.length=L,v.length<=9){v.words[0]=0,v.length=1;return}var V=v.words[9];for(S.words[S.length++]=V&T,U=10;U<v.length;U++){var W=v.words[U]|0;v.words[U-10]=(W&T)<<4|V>>>22,V=W}V>>>=22,v.words[U-10]=V,V===0&&v.length>10?v.length-=10:v.length-=9},R.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var S=0,T=0;T<v.length;T++){var L=v.words[T]|0;S+=L*977,v.words[T]=S&67108863,S=L*64+(S/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function k(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(k,C);function _(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(_,C);function A(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(A,C),A.prototype.imulK=function(v){for(var S=0,T=0;T<v.length;T++){var L=(v.words[T]|0)*19+S,U=L&67108863;L>>>=26,v.words[T]=U,S=L}return S!==0&&(v.words[v.length++]=S),v},s._prime=function(v){if(x[v])return x[v];var S;if(v==="k256")S=new R;else if(v==="p224")S=new k;else if(v==="p192")S=new _;else if(v==="p25519")S=new A;else throw new Error("Unknown prime "+v);return x[v]=S,S};function M(P){if(typeof P=="string"){var v=s._prime(P);this.m=v.p,this.prime=v}else r(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}M.prototype._verify1=function(v){r(v.negative===0,"red works only with positives"),r(v.red,"red works only with red numbers")},M.prototype._verify2=function(v,S){r((v.negative|S.negative)===0,"red works only with positives"),r(v.red&&v.red===S.red,"red works only with red numbers")},M.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(u(v,v.umod(this.m)._forceRed(this)),v)},M.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},M.prototype.add=function(v,S){this._verify2(v,S);var T=v.add(S);return T.cmp(this.m)>=0&&T.isub(this.m),T._forceRed(this)},M.prototype.iadd=function(v,S){this._verify2(v,S);var T=v.iadd(S);return T.cmp(this.m)>=0&&T.isub(this.m),T},M.prototype.sub=function(v,S){this._verify2(v,S);var T=v.sub(S);return T.cmpn(0)<0&&T.iadd(this.m),T._forceRed(this)},M.prototype.isub=function(v,S){this._verify2(v,S);var T=v.isub(S);return T.cmpn(0)<0&&T.iadd(this.m),T},M.prototype.shl=function(v,S){return this._verify1(v),this.imod(v.ushln(S))},M.prototype.imul=function(v,S){return this._verify2(v,S),this.imod(v.imul(S))},M.prototype.mul=function(v,S){return this._verify2(v,S),this.imod(v.mul(S))},M.prototype.isqr=function(v){return this.imul(v,v.clone())},M.prototype.sqr=function(v){return this.mul(v,v)},M.prototype.sqrt=function(v){if(v.isZero())return v.clone();var S=this.m.andln(3);if(r(S%2===1),S===3){var T=this.m.add(new s(1)).iushrn(2);return this.pow(v,T)}for(var L=this.m.subn(1),U=0;!L.isZero()&&L.andln(1)===0;)U++,L.iushrn(1);r(!L.isZero());var V=new s(1).toRed(this),W=V.redNeg(),F=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new s(2*I*I).toRed(this);this.pow(I,F).cmp(W)!==0;)I.redIAdd(W);for(var N=this.pow(I,L),$=this.pow(v,L.addn(1).iushrn(1)),j=this.pow(v,L),te=U;j.cmp(V)!==0;){for(var ce=j,ve=0;ce.cmp(V)!==0;ve++)ce=ce.redSqr();r(ve<te);var Te=this.pow(N,new s(1).iushln(te-ve-1));$=$.redMul(Te),N=Te.redSqr(),j=j.redMul(N),te=ve}return $},M.prototype.invm=function(v){var S=v._invmp(this.m);return S.negative!==0?(S.negative=0,this.imod(S).redNeg()):this.imod(S)},M.prototype.pow=function(v,S){if(S.isZero())return new s(1).toRed(this);if(S.cmpn(1)===0)return v.clone();var T=4,L=new Array(1<<T);L[0]=new s(1).toRed(this),L[1]=v;for(var U=2;U<L.length;U++)L[U]=this.mul(L[U-1],v);var V=L[0],W=0,F=0,I=S.bitLength()%26;for(I===0&&(I=26),U=S.length-1;U>=0;U--){for(var N=S.words[U],$=I-1;$>=0;$--){var j=N>>$&1;if(V!==L[0]&&(V=this.sqr(V)),j===0&&W===0){F=0;continue}W<<=1,W|=j,F++,!(F!==T&&(U!==0||$!==0))&&(V=this.mul(V,L[W]),F=0,W=0)}I=26}return V},M.prototype.convertTo=function(v){var S=v.umod(this.m);return S===v?S.clone():S},M.prototype.convertFrom=function(v){var S=v.clone();return S.red=null,S},s.mont=function(v){return new D(v)};function D(P){M.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(D,M),D.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},D.prototype.convertFrom=function(v){var S=this.imod(v.mul(this.rinv));return S.red=null,S},D.prototype.imul=function(v,S){if(v.isZero()||S.isZero())return v.words[0]=0,v.length=1,v;var T=v.imul(S),L=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=T.isub(L).iushrn(this.shift),V=U;return U.cmp(this.m)>=0?V=U.isub(this.m):U.cmpn(0)<0&&(V=U.iadd(this.m)),V._forceRed(this)},D.prototype.mul=function(v,S){if(v.isZero()||S.isZero())return new s(0)._forceRed(this);var T=v.mul(S),L=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=T.isub(L).iushrn(this.shift),V=U;return U.cmp(this.m)>=0?V=U.isub(this.m):U.cmpn(0)<0&&(V=U.iadd(this.m)),V._forceRed(this)},D.prototype.invm=function(v){var S=this.imod(v._invmp(this.m).mul(this.r2));return S._forceRed(this)}})(n,w6e)}(w3)),w3.exports}var v6e=uW();const jO=Sf(v6e);var jw={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var GO;function hW(){return GO||(GO=1,function(n,e){var t=b9(),r=t.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=s);function s(o,a,c){return r(o,a,c)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=r(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(jw,jw.exports)),jw.exports}var t8,KO;function b6e(){if(KO)return t8;KO=1;var n=hW().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var c=t.length,l=t.charAt(0),u=Math.log(c)/Math.log(256),h=Math.log(256)/Math.log(c);function d(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=n.from(m)),!n.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var g=0,y=0,b=0,w=m.length;b!==w&&m[b]===0;)b++,g++;for(var E=(w-b)*h+1>>>0,x=new Uint8Array(E);b!==w;){for(var C=m[b],R=0,k=E-1;(C!==0||R<y)&&k!==-1;k--,R++)C+=256*x[k]>>>0,x[k]=C%c>>>0,C=C/c>>>0;if(C!==0)throw new Error("Non-zero carry");y=R,b++}for(var _=E-y;_!==E&&x[_]===0;)_++;for(var A=l.repeat(g);_<E;++_)A+=t.charAt(x[_]);return A}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return n.alloc(0);for(var g=0,y=0,b=0;m[g]===l;)y++,g++;for(var w=(m.length-g)*u+1>>>0,E=new Uint8Array(w);g<m.length;){var x=m.charCodeAt(g);if(x>255)return;var C=r[x];if(C===255)return;for(var R=0,k=w-1;(C!==0||R<b)&&k!==-1;k--,R++)C+=c*E[k]>>>0,E[k]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=R,g++}for(var _=w-b;_!==w&&E[_]===0;)_++;var A=n.allocUnsafe(y+(w-_));A.fill(0,0,y);for(var M=y;_!==w;)A[M++]=E[_++];return A}function p(m){var g=f(m);if(g)return g;throw new Error("Non-base"+c+" character")}return{encode:d,decodeUnsafe:f,decode:p}}return t8=e,t8}var n8,YO;function _6e(){if(YO)return n8;YO=1;var n=b6e(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return n8=n(e),n8}var E6e=_6e();const Di=Sf(E6e);var Hn={},r8,XO;function x6e(){if(XO)return r8;XO=1;var n=hW().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var c=t.length,l=t.charAt(0),u=Math.log(c)/Math.log(256),h=Math.log(256)/Math.log(c);function d(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=n.from(m)),!n.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var g=0,y=0,b=0,w=m.length;b!==w&&m[b]===0;)b++,g++;for(var E=(w-b)*h+1>>>0,x=new Uint8Array(E);b!==w;){for(var C=m[b],R=0,k=E-1;(C!==0||R<y)&&k!==-1;k--,R++)C+=256*x[k]>>>0,x[k]=C%c>>>0,C=C/c>>>0;if(C!==0)throw new Error("Non-zero carry");y=R,b++}for(var _=E-y;_!==E&&x[_]===0;)_++;for(var A=l.repeat(g);_<E;++_)A+=t.charAt(x[_]);return A}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return n.alloc(0);for(var g=0,y=0,b=0;m[g]===l;)y++,g++;for(var w=(m.length-g)*u+1>>>0,E=new Uint8Array(w);g<m.length;){var x=m.charCodeAt(g);if(x>255)return;var C=r[x];if(C===255)return;for(var R=0,k=w-1;(C!==0||R<b)&&k!==-1;k--,R++)C+=c*E[k]>>>0,E[k]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=R,g++}for(var _=w-b;_!==w&&E[_]===0;)_++;var A=n.allocUnsafe(y+(w-_));A.fill(0,0,y);for(var M=y;_!==w;)A[M++]=E[_++];return A}function p(m){var g=f(m);if(g)return g;throw new Error("Non-base"+c+" character")}return{encode:d,decodeUnsafe:f,decode:p}}return r8=e,r8}var i8,ZO;function S6e(){if(ZO)return i8;ZO=1;var n=x6e(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return i8=n(e),i8}function Ml(n,e,t){return e<=n&&n<=t}function n4(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function A6e(n){for(var e=String(n),t=e.length,r=0,i=[];r<t;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===t-1)i.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,c=o&1023;i.push(65536+(a<<10)+c),r+=1}else i.push(65533)}r+=1}return i}function C6e(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Db=-1;function M9(n){this.tokens=[].slice.call(n)}M9.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Db},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var L0=-1;function s8(n,e){if(n)throw TypeError("Decoder error");return e||65533}var Lb="utf-8";function Ub(n,e){if(!(this instanceof Ub))return new Ub(n,e);if(n=n!==void 0?String(n).toLowerCase():Lb,n!==Lb)throw new Error("Encoding not supported. Only utf-8 is supported");e=n4(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Ub.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=n4(t),this._streaming||(this._decoder=new T6e({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new M9(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==L0);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===L0)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),C6e(s)}};function Bb(n,e){if(!(this instanceof Bb))return new Bb(n,e);if(n=n!==void 0?String(n).toLowerCase():Lb,n!==Lb)throw new Error("Encoding not supported. Only utf-8 is supported");e=n4(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Bb.prototype={encode:function(e,t){e=e?String(e):"",t=n4(t),this._streaming||(this._encoder=new I6e(this._options)),this._streaming=!!t.stream;for(var r=[],i=new M9(A6e(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==L0);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==L0;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function T6e(n){var e=n.fatal,t=0,r=0,i=0,s=128,o=191;this.handler=function(a,c){if(c===Db&&i!==0)return i=0,s8(e);if(c===Db)return L0;if(i===0){if(Ml(c,0,127))return c;if(Ml(c,194,223))i=1,t=c-192;else if(Ml(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,t=c-224;else if(Ml(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,t=c-240;else return s8(e);return t=t<<6*i,null}if(!Ml(c,s,o))return t=i=r=0,s=128,o=191,a.prepend(c),s8(e);if(s=128,o=191,r+=1,t+=c-128<<6*(i-r),r!==i)return null;var l=t;return t=i=r=0,l}}function I6e(n){n.fatal,this.handler=function(e,t){if(t===Db)return L0;if(Ml(t,0,127))return t;var r,i;Ml(t,128,2047)?(r=1,i=192):Ml(t,2048,65535)?(r=2,i=224):Ml(t,65536,1114111)&&(r=3,i=240);for(var s=[(t>>6*r)+i];r>0;){var o=t>>6*(r-1);s.push(128|o&63),r-=1}return s}}const M6e=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Ub,TextEncoder:Bb},Symbol.toStringTag,{value:"Module"})),R6e=my(M6e);var JO;function P6e(){if(JO)return Hn;JO=1;var n=Hn&&Hn.__createBinding||(Object.create?function(_,A,M,D){D===void 0&&(D=M),Object.defineProperty(_,D,{enumerable:!0,get:function(){return A[M]}})}:function(_,A,M,D){D===void 0&&(D=M),_[D]=A[M]}),e=Hn&&Hn.__setModuleDefault||(Object.create?function(_,A){Object.defineProperty(_,"default",{enumerable:!0,value:A})}:function(_,A){_.default=A}),t=Hn&&Hn.__decorate||function(_,A,M,D){var P=arguments.length,v=P<3?A:D===null?D=Object.getOwnPropertyDescriptor(A,M):D,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(_,A,M,D);else for(var T=_.length-1;T>=0;T--)(S=_[T])&&(v=(P<3?S(v):P>3?S(A,M,v):S(A,M))||v);return P>3&&v&&Object.defineProperty(A,M,v),v},r=Hn&&Hn.__importStar||function(_){if(_&&_.__esModule)return _;var A={};if(_!=null)for(var M in _)M!=="default"&&Object.hasOwnProperty.call(_,M)&&n(A,_,M);return e(A,_),A},i=Hn&&Hn.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.deserializeUnchecked=Hn.deserialize=Hn.serialize=Hn.BinaryReader=Hn.BinaryWriter=Hn.BorshError=Hn.baseDecode=Hn.baseEncode=void 0;const s=i(uW()),o=i(S6e()),a=r(R6e),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,l=new c("utf-8",{fatal:!0});function u(_){return typeof _=="string"&&(_=Buffer.from(_,"utf8")),o.default.encode(Buffer.from(_))}Hn.baseEncode=u;function h(_){return Buffer.from(o.default.decode(_))}Hn.baseDecode=h;const d=1024;class f extends Error{constructor(A){super(A),this.fieldPath=[],this.originalMessage=A}addToFieldPath(A){this.fieldPath.splice(0,0,A),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Hn.BorshError=f;class p{constructor(){this.buf=Buffer.alloc(d),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(d)]))}writeU8(A){this.maybeResize(),this.buf.writeUInt8(A,this.length),this.length+=1}writeU16(A){this.maybeResize(),this.buf.writeUInt16LE(A,this.length),this.length+=2}writeU32(A){this.maybeResize(),this.buf.writeUInt32LE(A,this.length),this.length+=4}writeU64(A){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(A).toArray("le",8)))}writeU128(A){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(A).toArray("le",16)))}writeU256(A){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(A).toArray("le",32)))}writeU512(A){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(A).toArray("le",64)))}writeBuffer(A){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),A,Buffer.alloc(d)]),this.length+=A.length}writeString(A){this.maybeResize();const M=Buffer.from(A,"utf8");this.writeU32(M.length),this.writeBuffer(M)}writeFixedArray(A){this.writeBuffer(Buffer.from(A))}writeArray(A,M){this.maybeResize(),this.writeU32(A.length);for(const D of A)this.maybeResize(),M(D)}toArray(){return this.buf.subarray(0,this.length)}}Hn.BinaryWriter=p;function m(_,A,M){const D=M.value;M.value=function(...P){try{return D.apply(this,P)}catch(v){if(v instanceof RangeError){const S=v.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(S)>=0)throw new f("Reached the end of buffer when deserializing")}throw v}}}class g{constructor(A){this.buf=A,this.offset=0}readU8(){const A=this.buf.readUInt8(this.offset);return this.offset+=1,A}readU16(){const A=this.buf.readUInt16LE(this.offset);return this.offset+=2,A}readU32(){const A=this.buf.readUInt32LE(this.offset);return this.offset+=4,A}readU64(){const A=this.readBuffer(8);return new s.default(A,"le")}readU128(){const A=this.readBuffer(16);return new s.default(A,"le")}readU256(){const A=this.readBuffer(32);return new s.default(A,"le")}readU512(){const A=this.readBuffer(64);return new s.default(A,"le")}readBuffer(A){if(this.offset+A>this.buf.length)throw new f(`Expected buffer length ${A} isn't within bounds`);const M=this.buf.slice(this.offset,this.offset+A);return this.offset+=A,M}readString(){const A=this.readU32(),M=this.readBuffer(A);try{return l.decode(M)}catch(D){throw new f(`Error decoding UTF-8 string: ${D}`)}}readFixedArray(A){return new Uint8Array(this.readBuffer(A))}readArray(A){const M=this.readU32(),D=Array();for(let P=0;P<M;++P)D.push(A());return D}}t([m],g.prototype,"readU8",null),t([m],g.prototype,"readU16",null),t([m],g.prototype,"readU32",null),t([m],g.prototype,"readU64",null),t([m],g.prototype,"readU128",null),t([m],g.prototype,"readU256",null),t([m],g.prototype,"readU512",null),t([m],g.prototype,"readString",null),t([m],g.prototype,"readFixedArray",null),t([m],g.prototype,"readArray",null),Hn.BinaryReader=g;function y(_){return _.charAt(0).toUpperCase()+_.slice(1)}function b(_,A,M,D,P){try{if(typeof D=="string")P[`write${y(D)}`](M);else if(D instanceof Array)if(typeof D[0]=="number"){if(M.length!==D[0])throw new f(`Expecting byte array of length ${D[0]}, but got ${M.length} bytes`);P.writeFixedArray(M)}else if(D.length===2&&typeof D[1]=="number"){if(M.length!==D[1])throw new f(`Expecting byte array of length ${D[1]}, but got ${M.length} bytes`);for(let v=0;v<D[1];v++)b(_,null,M[v],D[0],P)}else P.writeArray(M,v=>{b(_,A,v,D[0],P)});else if(D.kind!==void 0)switch(D.kind){case"option":{M==null?P.writeU8(0):(P.writeU8(1),b(_,A,M,D.type,P));break}case"map":{P.writeU32(M.size),M.forEach((v,S)=>{b(_,A,S,D.key,P),b(_,A,v,D.value,P)});break}default:throw new f(`FieldType ${D} unrecognized`)}else w(_,M,P)}catch(v){throw v instanceof f&&v.addToFieldPath(A),v}}function w(_,A,M){if(typeof A.borshSerialize=="function"){A.borshSerialize(M);return}const D=_.get(A.constructor);if(!D)throw new f(`Class ${A.constructor.name} is missing in schema`);if(D.kind==="struct")D.fields.map(([P,v])=>{b(_,P,A[P],v,M)});else if(D.kind==="enum"){const P=A[D.field];for(let v=0;v<D.values.length;++v){const[S,T]=D.values[v];if(S===P){M.writeU8(v),b(_,S,A[S],T,M);break}}}else throw new f(`Unexpected schema kind: ${D.kind} for ${A.constructor.name}`)}function E(_,A,M=p){const D=new M;return w(_,A,D),D.toArray()}Hn.serialize=E;function x(_,A,M,D){try{if(typeof M=="string")return D[`read${y(M)}`]();if(M instanceof Array){if(typeof M[0]=="number")return D.readFixedArray(M[0]);if(typeof M[1]=="number"){const P=[];for(let v=0;v<M[1];v++)P.push(x(_,null,M[0],D));return P}else return D.readArray(()=>x(_,A,M[0],D))}if(M.kind==="option")return D.readU8()?x(_,A,M.type,D):void 0;if(M.kind==="map"){let P=new Map;const v=D.readU32();for(let S=0;S<v;S++){const T=x(_,A,M.key,D),L=x(_,A,M.value,D);P.set(T,L)}return P}return C(_,M,D)}catch(P){throw P instanceof f&&P.addToFieldPath(A),P}}function C(_,A,M){if(typeof A.borshDeserialize=="function")return A.borshDeserialize(M);const D=_.get(A);if(!D)throw new f(`Class ${A.name} is missing in schema`);if(D.kind==="struct"){const P={};for(const[v,S]of _.get(A).fields)P[v]=x(_,v,S,M);return new A(P)}if(D.kind==="enum"){const P=M.readU8();if(P>=D.values.length)throw new f(`Enum index: ${P} is out of range`);const[v,S]=D.values[P],T=x(_,v,S,M);return new A({[v]:T})}throw new f(`Unexpected schema kind: ${D.kind} for ${A.constructor.name}`)}function R(_,A,M,D=g){const P=new D(M),v=C(_,A,P);if(P.offset<M.length)throw new f(`Unexpected ${M.length-P.offset} bytes after deserialized data`);return v}Hn.deserialize=R;function k(_,A,M,D=g){const P=new D(M);return C(_,A,P)}return Hn.deserializeUnchecked=k,Hn}var o8=P6e(),Ce={},QO;function N6e(){if(QO)return Ce;QO=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.s16=Ce.s8=Ce.nu64be=Ce.u48be=Ce.u40be=Ce.u32be=Ce.u24be=Ce.u16be=Ce.nu64=Ce.u48=Ce.u40=Ce.u32=Ce.u24=Ce.u16=Ce.u8=Ce.offset=Ce.greedy=Ce.Constant=Ce.UTF8=Ce.CString=Ce.Blob=Ce.Boolean=Ce.BitField=Ce.BitStructure=Ce.VariantLayout=Ce.Union=Ce.UnionLayoutDiscriminator=Ce.UnionDiscriminator=Ce.Structure=Ce.Sequence=Ce.DoubleBE=Ce.Double=Ce.FloatBE=Ce.Float=Ce.NearInt64BE=Ce.NearInt64=Ce.NearUInt64BE=Ce.NearUInt64=Ce.IntBE=Ce.Int=Ce.UIntBE=Ce.UInt=Ce.OffsetLayout=Ce.GreedyCount=Ce.ExternalLayout=Ce.bindConstructorLayout=Ce.nameWithProperty=Ce.Layout=Ce.uint8ArrayToBuffer=Ce.checkUint8Array=void 0,Ce.constant=Ce.utf8=Ce.cstr=Ce.blob=Ce.unionLayoutDiscriminator=Ce.union=Ce.seq=Ce.bits=Ce.struct=Ce.f64be=Ce.f64=Ce.f32be=Ce.f32=Ce.ns64be=Ce.s48be=Ce.s40be=Ce.s32be=Ce.s24be=Ce.s16be=Ce.ns64=Ce.s48=Ce.s40=Ce.s32=Ce.s24=void 0;const n=b9();function e(I){if(!(I instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Ce.checkUint8Array=e;function t(I){return e(I),n.Buffer.from(I.buffer,I.byteOffset,I.length)}Ce.uint8ArrayToBuffer=t;let r=class{constructor(N,$){if(!Number.isInteger(N))throw new TypeError("span must be an integer");this.span=N,this.property=$}makeDestinationObject(){return{}}getSpan(N,$){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(N){const $=Object.create(this.constructor.prototype);return Object.assign($,this),$.property=N,$}fromArray(N){}};Ce.Layout=r;function i(I,N){return N.property?I+"["+N.property+"]":I}Ce.nameWithProperty=i;function s(I,N){if(typeof I!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(I,"layout_"))throw new Error("Class is already bound to a layout");if(!(N&&N instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(N,"boundConstructor_"))throw new Error("layout is already bound to a constructor");I.layout_=N,N.boundConstructor_=I,N.makeDestinationObject=()=>new I,Object.defineProperty(I.prototype,"encode",{value($,j){return N.encode(this,$,j)},writable:!0}),Object.defineProperty(I,"decode",{value($,j){return N.decode($,j)},writable:!0})}Ce.bindConstructorLayout=s;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}Ce.ExternalLayout=o;class a extends o{constructor(N=1,$){if(!Number.isInteger(N)||0>=N)throw new TypeError("elementSpan must be a (positive) integer");super(-1,$),this.elementSpan=N}isCount(){return!0}decode(N,$=0){e(N);const j=N.length-$;return Math.floor(j/this.elementSpan)}encode(N,$,j){return 0}}Ce.GreedyCount=a;class c extends o{constructor(N,$=0,j){if(!(N instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger($))throw new TypeError("offset must be integer or undefined");super(N.span,j||N.property),this.layout=N,this.offset=$}isCount(){return this.layout instanceof l||this.layout instanceof u}decode(N,$=0){return this.layout.decode(N,$+this.offset)}encode(N,$,j=0){return this.layout.encode(N,$,j+this.offset)}}Ce.OffsetLayout=c;class l extends r{constructor(N,$){if(super(N,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,$=0){return t(N).readUIntLE($,this.span)}encode(N,$,j=0){return t($).writeUIntLE(N,j,this.span),this.span}}Ce.UInt=l;class u extends r{constructor(N,$){if(super(N,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,$=0){return t(N).readUIntBE($,this.span)}encode(N,$,j=0){return t($).writeUIntBE(N,j,this.span),this.span}}Ce.UIntBE=u;class h extends r{constructor(N,$){if(super(N,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,$=0){return t(N).readIntLE($,this.span)}encode(N,$,j=0){return t($).writeIntLE(N,j,this.span),this.span}}Ce.Int=h;class d extends r{constructor(N,$){if(super(N,$),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,$=0){return t(N).readIntBE($,this.span)}encode(N,$,j=0){return t($).writeIntBE(N,j,this.span),this.span}}Ce.IntBE=d;const f=Math.pow(2,32);function p(I){const N=Math.floor(I/f),$=I-N*f;return{hi32:N,lo32:$}}function m(I,N){return I*f+N}class g extends r{constructor(N){super(8,N)}decode(N,$=0){const j=t(N),te=j.readUInt32LE($),ce=j.readUInt32LE($+4);return m(ce,te)}encode(N,$,j=0){const te=p(N),ce=t($);return ce.writeUInt32LE(te.lo32,j),ce.writeUInt32LE(te.hi32,j+4),8}}Ce.NearUInt64=g;class y extends r{constructor(N){super(8,N)}decode(N,$=0){const j=t(N),te=j.readUInt32BE($),ce=j.readUInt32BE($+4);return m(te,ce)}encode(N,$,j=0){const te=p(N),ce=t($);return ce.writeUInt32BE(te.hi32,j),ce.writeUInt32BE(te.lo32,j+4),8}}Ce.NearUInt64BE=y;class b extends r{constructor(N){super(8,N)}decode(N,$=0){const j=t(N),te=j.readUInt32LE($),ce=j.readInt32LE($+4);return m(ce,te)}encode(N,$,j=0){const te=p(N),ce=t($);return ce.writeUInt32LE(te.lo32,j),ce.writeInt32LE(te.hi32,j+4),8}}Ce.NearInt64=b;class w extends r{constructor(N){super(8,N)}decode(N,$=0){const j=t(N),te=j.readInt32BE($),ce=j.readUInt32BE($+4);return m(te,ce)}encode(N,$,j=0){const te=p(N),ce=t($);return ce.writeInt32BE(te.hi32,j),ce.writeUInt32BE(te.lo32,j+4),8}}Ce.NearInt64BE=w;class E extends r{constructor(N){super(4,N)}decode(N,$=0){return t(N).readFloatLE($)}encode(N,$,j=0){return t($).writeFloatLE(N,j),4}}Ce.Float=E;class x extends r{constructor(N){super(4,N)}decode(N,$=0){return t(N).readFloatBE($)}encode(N,$,j=0){return t($).writeFloatBE(N,j),4}}Ce.FloatBE=x;class C extends r{constructor(N){super(8,N)}decode(N,$=0){return t(N).readDoubleLE($)}encode(N,$,j=0){return t($).writeDoubleLE(N,j),8}}Ce.Double=C;class R extends r{constructor(N){super(8,N)}decode(N,$=0){return t(N).readDoubleBE($)}encode(N,$,j=0){return t($).writeDoubleBE(N,j),8}}Ce.DoubleBE=R;class k extends r{constructor(N,$,j){if(!(N instanceof r))throw new TypeError("elementLayout must be a Layout");if(!($ instanceof o&&$.isCount()||Number.isInteger($)&&0<=$))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let te=-1;!($ instanceof o)&&0<N.span&&(te=$*N.span),super(te,j),this.elementLayout=N,this.count=$}getSpan(N,$=0){if(0<=this.span)return this.span;let j=0,te=this.count;if(te instanceof o&&(te=te.decode(N,$)),0<this.elementLayout.span)j=te*this.elementLayout.span;else{let ce=0;for(;ce<te;)j+=this.elementLayout.getSpan(N,$+j),++ce}return j}decode(N,$=0){const j=[];let te=0,ce=this.count;for(ce instanceof o&&(ce=ce.decode(N,$));te<ce;)j.push(this.elementLayout.decode(N,$)),$+=this.elementLayout.getSpan(N,$),te+=1;return j}encode(N,$,j=0){const te=this.elementLayout,ce=N.reduce((ve,Te)=>ve+te.encode(Te,$,j+ve),0);return this.count instanceof o&&this.count.encode(N.length,$,j),ce}}Ce.Sequence=k;class _ extends r{constructor(N,$,j){if(!(Array.isArray(N)&&N.reduce((ce,ve)=>ce&&ve instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof $=="boolean"&&j===void 0&&(j=$,$=void 0);for(const ce of N)if(0>ce.span&&ce.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let te=-1;try{te=N.reduce((ce,ve)=>ce+ve.getSpan(),0)}catch{}super(te,$),this.fields=N,this.decodePrefixes=!!j}getSpan(N,$=0){if(0<=this.span)return this.span;let j=0;try{j=this.fields.reduce((te,ce)=>{const ve=ce.getSpan(N,$);return $+=ve,te+ve},0)}catch{throw new RangeError("indeterminate span")}return j}decode(N,$=0){e(N);const j=this.makeDestinationObject();for(const te of this.fields)if(te.property!==void 0&&(j[te.property]=te.decode(N,$)),$+=te.getSpan(N,$),this.decodePrefixes&&N.length===$)break;return j}encode(N,$,j=0){const te=j;let ce=0,ve=0;for(const Te of this.fields){let $e=Te.span;if(ve=0<$e?$e:0,Te.property!==void 0){const pe=N[Te.property];pe!==void 0&&(ve=Te.encode(pe,$,j),0>$e&&($e=Te.getSpan($,j)))}ce=j,j+=$e}return ce+ve-te}fromArray(N){const $=this.makeDestinationObject();for(const j of this.fields)j.property!==void 0&&0<N.length&&($[j.property]=N.shift());return $}layoutFor(N){if(typeof N!="string")throw new TypeError("property must be string");for(const $ of this.fields)if($.property===N)return $}offsetOf(N){if(typeof N!="string")throw new TypeError("property must be string");let $=0;for(const j of this.fields){if(j.property===N)return $;0>j.span?$=-1:0<=$&&($+=j.span)}}}Ce.Structure=_;class A{constructor(N){this.property=N}decode(N,$){throw new Error("UnionDiscriminator is abstract")}encode(N,$,j){throw new Error("UnionDiscriminator is abstract")}}Ce.UnionDiscriminator=A;class M extends A{constructor(N,$){if(!(N instanceof o&&N.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super($||N.property||"variant"),this.layout=N}decode(N,$){return this.layout.decode(N,$)}encode(N,$,j){return this.layout.encode(N,$,j)}}Ce.UnionLayoutDiscriminator=M;class D extends r{constructor(N,$,j){let te;if(N instanceof l||N instanceof u)te=new M(new c(N));else if(N instanceof o&&N.isCount())te=new M(N);else if(N instanceof A)te=N;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if($===void 0&&($=null),!($===null||$ instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if($!==null){if(0>$.span)throw new Error("defaultLayout must have constant span");$.property===void 0&&($=$.replicate("content"))}let ce=-1;$&&(ce=$.span,0<=ce&&(N instanceof l||N instanceof u)&&(ce+=te.layout.span)),super(ce,j),this.discriminator=te,this.usesPrefixDiscriminator=N instanceof l||N instanceof u,this.defaultLayout=$,this.registry={};let ve=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(Te){return ve(Te)},this.configGetSourceVariant=function(Te){ve=Te.bind(this)}}getSpan(N,$=0){if(0<=this.span)return this.span;const j=this.getVariant(N,$);if(!j)throw new Error("unable to determine span for unrecognized variant");return j.getSpan(N,$)}defaultGetSourceVariant(N){if(Object.prototype.hasOwnProperty.call(N,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(N,this.defaultLayout.property))return;const $=this.registry[N[this.discriminator.property]];if($&&(!$.layout||$.property&&Object.prototype.hasOwnProperty.call(N,$.property)))return $}else for(const $ in this.registry){const j=this.registry[$];if(j.property&&Object.prototype.hasOwnProperty.call(N,j.property))return j}throw new Error("unable to infer src variant")}decode(N,$=0){let j;const te=this.discriminator,ce=te.decode(N,$),ve=this.registry[ce];if(ve===void 0){const Te=this.defaultLayout;let $e=0;this.usesPrefixDiscriminator&&($e=te.layout.span),j=this.makeDestinationObject(),j[te.property]=ce,j[Te.property]=Te.decode(N,$+$e)}else j=ve.decode(N,$);return j}encode(N,$,j=0){const te=this.getSourceVariant(N);if(te===void 0){const ce=this.discriminator,ve=this.defaultLayout;let Te=0;return this.usesPrefixDiscriminator&&(Te=ce.layout.span),ce.encode(N[ce.property],$,j),Te+ve.encode(N[ve.property],$,j+Te)}return te.encode(N,$,j)}addVariant(N,$,j){const te=new P(this,N,$,j);return this.registry[N]=te,te}getVariant(N,$=0){let j;return N instanceof Uint8Array?j=this.discriminator.decode(N,$):j=N,this.registry[j]}}Ce.Union=D;class P extends r{constructor(N,$,j,te){if(!(N instanceof D))throw new TypeError("union must be a Union");if(!Number.isInteger($)||0>$)throw new TypeError("variant must be a (non-negative) integer");if(typeof j=="string"&&te===void 0&&(te=j,j=null),j){if(!(j instanceof r))throw new TypeError("layout must be a Layout");if(N.defaultLayout!==null&&0<=j.span&&j.span>N.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof te!="string")throw new TypeError("variant must have a String property")}let ce=N.span;0>N.span&&(ce=j?j.span:0,0<=ce&&N.usesPrefixDiscriminator&&(ce+=N.discriminator.layout.span)),super(ce,te),this.union=N,this.variant=$,this.layout=j||null}getSpan(N,$=0){if(0<=this.span)return this.span;let j=0;this.union.usesPrefixDiscriminator&&(j=this.union.discriminator.layout.span);let te=0;return this.layout&&(te=this.layout.getSpan(N,$+j)),j+te}decode(N,$=0){const j=this.makeDestinationObject();if(this!==this.union.getVariant(N,$))throw new Error("variant mismatch");let te=0;return this.union.usesPrefixDiscriminator&&(te=this.union.discriminator.layout.span),this.layout?j[this.property]=this.layout.decode(N,$+te):this.property?j[this.property]=!0:this.union.usesPrefixDiscriminator&&(j[this.union.discriminator.property]=this.variant),j}encode(N,$,j=0){let te=0;if(this.union.usesPrefixDiscriminator&&(te=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(N,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,$,j);let ce=te;if(this.layout&&(this.layout.encode(N[this.property],$,j+te),ce+=this.layout.getSpan($,j+te),0<=this.union.span&&ce>this.union.span))throw new Error("encoded variant overruns containing union");return ce}fromArray(N){if(this.layout)return this.layout.fromArray(N)}}Ce.VariantLayout=P;function v(I){return 0>I&&(I+=4294967296),I}class S extends r{constructor(N,$,j){if(!(N instanceof l||N instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof $=="string"&&j===void 0&&(j=$,$=!1),4<N.span)throw new RangeError("word cannot exceed 32 bits");super(N.span,j),this.word=N,this.msb=!!$,this.fields=[];let te=0;this._packedSetValue=function(ce){return te=v(ce),this},this._packedGetValue=function(){return te}}decode(N,$=0){const j=this.makeDestinationObject(),te=this.word.decode(N,$);this._packedSetValue(te);for(const ce of this.fields)ce.property!==void 0&&(j[ce.property]=ce.decode(N));return j}encode(N,$,j=0){const te=this.word.decode($,j);this._packedSetValue(te);for(const ce of this.fields)if(ce.property!==void 0){const ve=N[ce.property];ve!==void 0&&ce.encode(ve)}return this.word.encode(this._packedGetValue(),$,j)}addField(N,$){const j=new T(this,N,$);return this.fields.push(j),j}addBoolean(N){const $=new L(this,N);return this.fields.push($),$}fieldFor(N){if(typeof N!="string")throw new TypeError("property must be string");for(const $ of this.fields)if($.property===N)return $}}Ce.BitStructure=S;class T{constructor(N,$,j){if(!(N instanceof S))throw new TypeError("container must be a BitStructure");if(!Number.isInteger($)||0>=$)throw new TypeError("bits must be positive integer");const te=8*N.span,ce=N.fields.reduce((ve,Te)=>ve+Te.bits,0);if($+ce>te)throw new Error("bits too long for span remainder ("+(te-ce)+" of "+te+" remain)");this.container=N,this.bits=$,this.valueMask=(1<<$)-1,$===32&&(this.valueMask=4294967295),this.start=ce,this.container.msb&&(this.start=te-ce-$),this.wordMask=v(this.valueMask<<this.start),this.property=j}decode(N,$){const j=this.container._packedGetValue();return v(j&this.wordMask)>>>this.start}encode(N){if(typeof N!="number"||!Number.isInteger(N)||N!==v(N&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const $=this.container._packedGetValue(),j=v(N<<this.start);this.container._packedSetValue(v($&~this.wordMask)|j)}}Ce.BitField=T;class L extends T{constructor(N,$){super(N,1,$)}decode(N,$){return!!super.decode(N,$)}encode(N){typeof N=="boolean"&&(N=+N),super.encode(N)}}Ce.Boolean=L;class U extends r{constructor(N,$){if(!(N instanceof o&&N.isCount()||Number.isInteger(N)&&0<=N))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let j=-1;N instanceof o||(j=N),super(j,$),this.length=N}getSpan(N,$){let j=this.span;return 0>j&&(j=this.length.decode(N,$)),j}decode(N,$=0){let j=this.span;return 0>j&&(j=this.length.decode(N,$)),t(N).slice($,$+j)}encode(N,$,j){let te=this.length;if(this.length instanceof o&&(te=N.length),!(N instanceof Uint8Array&&te===N.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+te+") Uint8Array as src");if(j+te>$.length)throw new RangeError("encoding overruns Uint8Array");const ce=t(N);return t($).write(ce.toString("hex"),j,te,"hex"),this.length instanceof o&&this.length.encode(te,$,j),te}}Ce.Blob=U;class V extends r{constructor(N){super(-1,N)}getSpan(N,$=0){e(N);let j=$;for(;j<N.length&&N[j]!==0;)j+=1;return 1+j-$}decode(N,$=0){const j=this.getSpan(N,$);return t(N).slice($,$+j-1).toString("utf-8")}encode(N,$,j=0){typeof N!="string"&&(N=String(N));const te=n.Buffer.from(N,"utf8"),ce=te.length;if(j+ce>$.length)throw new RangeError("encoding overruns Buffer");const ve=t($);return te.copy(ve,j),ve[j+ce]=0,ce+1}}Ce.CString=V;class W extends r{constructor(N,$){if(typeof N=="string"&&$===void 0&&($=N,N=void 0),N===void 0)N=-1;else if(!Number.isInteger(N))throw new TypeError("maxSpan must be an integer");super(-1,$),this.maxSpan=N}getSpan(N,$=0){return e(N),N.length-$}decode(N,$=0){const j=this.getSpan(N,$);if(0<=this.maxSpan&&this.maxSpan<j)throw new RangeError("text length exceeds maxSpan");return t(N).slice($,$+j).toString("utf-8")}encode(N,$,j=0){typeof N!="string"&&(N=String(N));const te=n.Buffer.from(N,"utf8"),ce=te.length;if(0<=this.maxSpan&&this.maxSpan<ce)throw new RangeError("text length exceeds maxSpan");if(j+ce>$.length)throw new RangeError("encoding overruns Buffer");return te.copy(t($),j),ce}}Ce.UTF8=W;class F extends r{constructor(N,$){super(0,$),this.value=N}decode(N,$){return this.value}encode(N,$,j){return 0}}return Ce.Constant=F,Ce.greedy=(I,N)=>new a(I,N),Ce.offset=(I,N,$)=>new c(I,N,$),Ce.u8=I=>new l(1,I),Ce.u16=I=>new l(2,I),Ce.u24=I=>new l(3,I),Ce.u32=I=>new l(4,I),Ce.u40=I=>new l(5,I),Ce.u48=I=>new l(6,I),Ce.nu64=I=>new g(I),Ce.u16be=I=>new u(2,I),Ce.u24be=I=>new u(3,I),Ce.u32be=I=>new u(4,I),Ce.u40be=I=>new u(5,I),Ce.u48be=I=>new u(6,I),Ce.nu64be=I=>new y(I),Ce.s8=I=>new h(1,I),Ce.s16=I=>new h(2,I),Ce.s24=I=>new h(3,I),Ce.s32=I=>new h(4,I),Ce.s40=I=>new h(5,I),Ce.s48=I=>new h(6,I),Ce.ns64=I=>new b(I),Ce.s16be=I=>new d(2,I),Ce.s24be=I=>new d(3,I),Ce.s32be=I=>new d(4,I),Ce.s40be=I=>new d(5,I),Ce.s48be=I=>new d(6,I),Ce.ns64be=I=>new w(I),Ce.f32=I=>new E(I),Ce.f32be=I=>new x(I),Ce.f64=I=>new C(I),Ce.f64be=I=>new R(I),Ce.struct=(I,N,$)=>new _(I,N,$),Ce.bits=(I,N,$)=>new S(I,N,$),Ce.seq=(I,N,$)=>new k(I,N,$),Ce.union=(I,N,$)=>new D(I,N,$),Ce.unionLayoutDiscriminator=(I,N)=>new M(I,N),Ce.blob=(I,N)=>new U(I,N),Ce.cstr=I=>new V(I),Ce.utf8=(I,N)=>new W(I,N),Ce.constant=(I,N)=>new F(I,N),Ce}var ue=N6e(),O6e=8078e3,k6e=8078001,D6e=8078004,L6e=8078005,U6e=8078006,B6e=8078011;function dW(n){return Array.isArray(n)?"%5B"+n.map(dW).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function F6e([n,e]){return`${n}=${dW(e)}`}function $6e(n){const e=Object.entries(n).map(F6e).join("&");return btoa(e)}function z6e(n,e={}){{let t=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(e).length&&(t+=` '${$6e(e)}'`),`${t}\``}}var d0=class extends Error{cause=this.cause;context;constructor(...[n,e]){let t,r;if(e){const{cause:s,...o}=e;s&&(r={cause:s}),Object.keys(o).length>0&&(t=o)}const i=z6e(n,t);super(i,r),this.context={__code:n,...t},this.name="SolanaError"}};function H6e(n,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(n)}function V6e(n){return Object.freeze({...n,encode:e=>{const t=new Uint8Array(H6e(e,n));return n.write(e,t,0),t}})}function W6e(n){return Object.freeze({...n,decode:(e,t=0)=>n.read(e,t)[0]})}function pp(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function q6e(n,e){if(pp(n)!==pp(e))throw new d0(D6e);if(pp(n)&&pp(e)&&n.fixedSize!==e.fixedSize)throw new d0(L6e,{decoderFixedSize:e.fixedSize,encoderFixedSize:n.fixedSize});if(!pp(n)&&!pp(e)&&n.maxSize!==e.maxSize)throw new d0(U6e,{decoderMaxSize:e.maxSize,encoderMaxSize:n.maxSize});return{...e,...n,decode:e.decode,encode:n.encode,read:e.read,write:n.write}}function j6e(n,e,t=0){if(e.length-t<=0)throw new d0(O6e,{codecDescription:n})}function G6e(n,e,t,r=0){const i=t.length-r;if(i<e)throw new d0(k6e,{bytesLength:i,codecDescription:n,expected:e})}function K6e(n,e,t,r){if(r<e||r>t)throw new d0(B6e,{codecDescription:n,max:t,min:e,value:r})}function fW(n){return n?.endian!==1}function Y6e(n){return V6e({fixedSize:n.size,write(e,t,r){n.range&&K6e(n.name,n.range[0],n.range[1],e);const i=new ArrayBuffer(n.size);return n.set(new DataView(i),e,fW(n.config)),t.set(new Uint8Array(i),r),r+n.size}})}function X6e(n){return W6e({fixedSize:n.size,read(e,t=0){j6e(n.name,e,t),G6e(n.name,n.size,e,t);const r=new DataView(Z6e(e,t,n.size));return[n.get(r,fW(n.config)),t+n.size]}})}function Z6e(n,e,t){const r=n.byteOffset+(e??0),i=t??n.byteLength;return n.buffer.slice(r,r+i)}var J6e=(n={})=>Y6e({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),Q6e=(n={})=>X6e({config:n,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),e8e=(n={})=>q6e(J6e(n),Q6e(n));class t8e extends TypeError{constructor(e,t){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function n8e(n){return Ly(n)&&typeof n[Symbol.iterator]=="function"}function Ly(n){return typeof n=="object"&&n!=null}function Fb(n){return Ly(n)&&!Array.isArray(n)}function Xa(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function r8e(n){const{done:e,value:t}=n.next();return e?void 0:t}function i8e(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Xa(r)}\``}=n;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...n,message:c}}function*ek(n,e,t,r){n8e(n)||(n=[n]);for(const i of n){const s=i8e(i,e,t,r);s&&(yield s)}}function*R9(n,e,t={}){const{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=t,a={path:r,branch:i,mask:o};s&&(n=e.coercer(n,a));let c="valid";for(const l of e.validator(n,a))l.explanation=t.message,c="not_valid",yield[l,void 0];for(let[l,u,h]of e.entries(n,a)){const d=R9(u,h,{path:l===void 0?r:[...r,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:t.message});for(const f of d)f[0]?(c=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):s&&(u=f[1],l===void 0?n=u:n instanceof Map?n.set(l,u):n instanceof Set?n.add(u):Ly(n)&&(u!==void 0||l in n)&&(n[l]=u))}if(c!=="not_valid")for(const l of e.refiner(n,a))l.explanation=t.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,n])}let Kc=class{constructor(e){const{type:t,schema:r,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(c,l)=>{const u=i(c,l);return ek(u,l,this,c)}:this.validator=()=>[],s?this.refiner=(c,l)=>{const u=s(c,l);return ek(u,l,this,c)}:this.refiner=()=>[]}assert(e,t){return s8e(e,this,t)}create(e,t){return it(e,this,t)}is(e){return pW(e,this)}mask(e,t){return o8e(e,this,t)}validate(e,t={}){return Uy(e,this,t)}};function s8e(n,e,t){const r=Uy(n,e,{message:t});if(r[0])throw r[0]}function it(n,e,t){const r=Uy(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function o8e(n,e,t){const r=Uy(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function pW(n,e){return!Uy(n,e)[0]}function Uy(n,e,t={}){const r=R9(n,e,t),i=r8e(r);return i[0]?[new t8e(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Of(n,e){return new Kc({type:n,schema:null,validator:e})}function a8e(){return Of("any",()=>!0)}function lt(n){return new Kc({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Xa(e)}`}})}function Wc(){return Of("boolean",n=>typeof n=="boolean")}function P9(n){return Of("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${Xa(e)}`)}function xr(n){const e=Xa(n),t=typeof n;return new Kc({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${Xa(r)}`}})}function c8e(){return Of("never",()=>!1)}function dt(n){return new Kc({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function Se(){return Of("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Xa(n)}`)}function Ut(n){return new Kc({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function mW(n,e){return new Kc({type:"record",schema:null,*entries(t){if(Ly(t))for(const r in t){const i=t[r];yield[r,r,n],yield[r,i,e]}},validator(t){return Fb(t)||`Expected an object, but received: ${Xa(t)}`},coercer(t){return Fb(t)?{...t}:t}})}function Je(){return Of("string",n=>typeof n=="string"||`Expected a string, but received: ${Xa(n)}`)}function N9(n){const e=c8e();return new Kc({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let i=0;i<r;i++)yield[i,t[i],n[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Xa(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function Ve(n){const e=Object.keys(n);return new Kc({type:"type",schema:n,*entries(t){if(Ly(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return Fb(t)||`Expected an object, but received: ${Xa(t)}`},coercer(t){return Fb(t)?{...t}:t}})}function Ns(n){const e=n.map(t=>t.type).join(" | ");return new Kc({type:"union",schema:null,coercer(t,r){for(const i of n){const[s,o]=i.validate(t,{coerce:!0,mask:r.mask});if(!s)return o}return t},validator(t,r){const i=[];for(const s of n){const[...o]=R9(t,s,r),[a]=o;if(a[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Xa(t)}`,...i]}})}function h1(){return Of("unknown",()=>!0)}function By(n,e,t){return new Kc({...n,coercer:(r,i)=>pW(r,e)?n.coercer(t(r,i),i):n.coercer(r,i)})}var Gw,l8e=new Uint8Array(16);function gW(){if(!Gw&&(Gw=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Gw))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gw(l8e)}const u8e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function r4(n){return typeof n=="string"&&u8e.test(n)}var Ti=[];for(var a8=0;a8<256;++a8)Ti.push((a8+256).toString(16).substr(1));function i4(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Ti[n[e+0]]+Ti[n[e+1]]+Ti[n[e+2]]+Ti[n[e+3]]+"-"+Ti[n[e+4]]+Ti[n[e+5]]+"-"+Ti[n[e+6]]+Ti[n[e+7]]+"-"+Ti[n[e+8]]+Ti[n[e+9]]+"-"+Ti[n[e+10]]+Ti[n[e+11]]+Ti[n[e+12]]+Ti[n[e+13]]+Ti[n[e+14]]+Ti[n[e+15]]).toLowerCase();if(!r4(t))throw TypeError("Stringified UUID is invalid");return t}var tk,c8,l8=0,u8=0;function h8e(n,e,t){var r=e&&t||0,i=e||new Array(16);n=n||{};var s=n.node||tk,o=n.clockseq!==void 0?n.clockseq:c8;if(s==null||o==null){var a=n.random||(n.rng||gW)();s==null&&(s=tk=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=c8=(a[6]<<8|a[7])&16383)}var c=n.msecs!==void 0?n.msecs:Date.now(),l=n.nsecs!==void 0?n.nsecs:u8+1,u=c-l8+(l-u8)/1e4;if(u<0&&n.clockseq===void 0&&(o=o+1&16383),(u<0||c>l8)&&n.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l8=c,u8=l,c8=o,c+=122192928e5;var h=((c&268435455)*1e4+l)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=h&255;var d=c/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=d&255,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var f=0;f<6;++f)i[r+f]=s[f];return e||i4(i)}function yW(n){if(!r4(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function d8e(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var f8e="6ba7b810-9dad-11d1-80b4-00c04fd430c8",p8e="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function wW(n,e,t){function r(i,s,o,a){if(typeof i=="string"&&(i=d8e(i)),typeof s=="string"&&(s=yW(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return i4(c)}try{r.name=n}catch{}return r.DNS=f8e,r.URL=p8e,r}function m8e(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return g8e(y8e(w8e(n),n.length*8))}function g8e(n){for(var e=[],t=n.length*32,r="0123456789abcdef",i=0;i<t;i+=8){var s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function vW(n){return(n+64>>>9<<4)+14+1}function y8e(n,e){n[e>>5]|=128<<e%32,n[vW(e)-1]=e;for(var t=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<n.length;o+=16){var a=t,c=r,l=i,u=s;t=Xi(t,r,i,s,n[o],7,-680876936),s=Xi(s,t,r,i,n[o+1],12,-389564586),i=Xi(i,s,t,r,n[o+2],17,606105819),r=Xi(r,i,s,t,n[o+3],22,-1044525330),t=Xi(t,r,i,s,n[o+4],7,-176418897),s=Xi(s,t,r,i,n[o+5],12,1200080426),i=Xi(i,s,t,r,n[o+6],17,-1473231341),r=Xi(r,i,s,t,n[o+7],22,-45705983),t=Xi(t,r,i,s,n[o+8],7,1770035416),s=Xi(s,t,r,i,n[o+9],12,-1958414417),i=Xi(i,s,t,r,n[o+10],17,-42063),r=Xi(r,i,s,t,n[o+11],22,-1990404162),t=Xi(t,r,i,s,n[o+12],7,1804603682),s=Xi(s,t,r,i,n[o+13],12,-40341101),i=Xi(i,s,t,r,n[o+14],17,-1502002290),r=Xi(r,i,s,t,n[o+15],22,1236535329),t=Zi(t,r,i,s,n[o+1],5,-165796510),s=Zi(s,t,r,i,n[o+6],9,-1069501632),i=Zi(i,s,t,r,n[o+11],14,643717713),r=Zi(r,i,s,t,n[o],20,-373897302),t=Zi(t,r,i,s,n[o+5],5,-701558691),s=Zi(s,t,r,i,n[o+10],9,38016083),i=Zi(i,s,t,r,n[o+15],14,-660478335),r=Zi(r,i,s,t,n[o+4],20,-405537848),t=Zi(t,r,i,s,n[o+9],5,568446438),s=Zi(s,t,r,i,n[o+14],9,-1019803690),i=Zi(i,s,t,r,n[o+3],14,-187363961),r=Zi(r,i,s,t,n[o+8],20,1163531501),t=Zi(t,r,i,s,n[o+13],5,-1444681467),s=Zi(s,t,r,i,n[o+2],9,-51403784),i=Zi(i,s,t,r,n[o+7],14,1735328473),r=Zi(r,i,s,t,n[o+12],20,-1926607734),t=Ji(t,r,i,s,n[o+5],4,-378558),s=Ji(s,t,r,i,n[o+8],11,-2022574463),i=Ji(i,s,t,r,n[o+11],16,1839030562),r=Ji(r,i,s,t,n[o+14],23,-35309556),t=Ji(t,r,i,s,n[o+1],4,-1530992060),s=Ji(s,t,r,i,n[o+4],11,1272893353),i=Ji(i,s,t,r,n[o+7],16,-155497632),r=Ji(r,i,s,t,n[o+10],23,-1094730640),t=Ji(t,r,i,s,n[o+13],4,681279174),s=Ji(s,t,r,i,n[o],11,-358537222),i=Ji(i,s,t,r,n[o+3],16,-722521979),r=Ji(r,i,s,t,n[o+6],23,76029189),t=Ji(t,r,i,s,n[o+9],4,-640364487),s=Ji(s,t,r,i,n[o+12],11,-421815835),i=Ji(i,s,t,r,n[o+15],16,530742520),r=Ji(r,i,s,t,n[o+2],23,-995338651),t=Qi(t,r,i,s,n[o],6,-198630844),s=Qi(s,t,r,i,n[o+7],10,1126891415),i=Qi(i,s,t,r,n[o+14],15,-1416354905),r=Qi(r,i,s,t,n[o+5],21,-57434055),t=Qi(t,r,i,s,n[o+12],6,1700485571),s=Qi(s,t,r,i,n[o+3],10,-1894986606),i=Qi(i,s,t,r,n[o+10],15,-1051523),r=Qi(r,i,s,t,n[o+1],21,-2054922799),t=Qi(t,r,i,s,n[o+8],6,1873313359),s=Qi(s,t,r,i,n[o+15],10,-30611744),i=Qi(i,s,t,r,n[o+6],15,-1560198380),r=Qi(r,i,s,t,n[o+13],21,1309151649),t=Qi(t,r,i,s,n[o+4],6,-145523070),s=Qi(s,t,r,i,n[o+11],10,-1120210379),i=Qi(i,s,t,r,n[o+2],15,718787259),r=Qi(r,i,s,t,n[o+9],21,-343485551),t=sh(t,a),r=sh(r,c),i=sh(i,l),s=sh(s,u)}return[t,r,i,s]}function w8e(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(vW(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function sh(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function v8e(n,e){return n<<e|n>>>32-e}function s4(n,e,t,r,i,s){return sh(v8e(sh(sh(e,n),sh(r,s)),i),t)}function Xi(n,e,t,r,i,s,o){return s4(e&t|~e&r,n,e,i,s,o)}function Zi(n,e,t,r,i,s,o){return s4(e&r|t&~r,n,e,i,s,o)}function Ji(n,e,t,r,i,s,o){return s4(e^t^r,n,e,i,s,o)}function Qi(n,e,t,r,i,s,o){return s4(t^(e|~r),n,e,i,s,o)}var b8e=wW("v3",48,m8e);function _8e(n,e,t){n=n||{};var r=n.random||(n.rng||gW)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return i4(r)}function E8e(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function h8(n,e){return n<<e|n>>>32-e}function x8e(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=n[c*64+u*4]<<24|n[c*64+u*4+1]<<16|n[c*64+u*4+2]<<8|n[c*64+u*4+3];a[c]=l}a[o-1][14]=(n.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(n.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var d=new Uint32Array(80),f=0;f<16;++f)d[f]=a[h][f];for(var p=16;p<80;++p)d[p]=h8(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var m=t[0],g=t[1],y=t[2],b=t[3],w=t[4],E=0;E<80;++E){var x=Math.floor(E/20),C=h8(m,5)+E8e(x,g,y,b)+w+e[x]+d[E]>>>0;w=b,b=y,y=h8(g,30)>>>0,g=m,m=C}t[0]=t[0]+m>>>0,t[1]=t[1]+g>>>0,t[2]=t[2]+y>>>0,t[3]=t[3]+b>>>0,t[4]=t[4]+w>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var S8e=wW("v5",80,x8e);const A8e="00000000-0000-0000-0000-000000000000";function C8e(n){if(!r4(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const T8e=Object.freeze(Object.defineProperty({__proto__:null,NIL:A8e,parse:yW,stringify:i4,v1:h8e,v3:b8e,v4:_8e,v5:S8e,validate:r4,version:C8e},Symbol.toStringTag,{value:"Module"})),bW=my(T8e);var d8,nk;function I8e(){if(nk)return d8;nk=1;const n=bW.v4;return d8=function(t,r,i,s){if(typeof t!="string")throw new TypeError(t+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:t};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof i>"u"){const c=typeof s.generator=="function"?s.generator:function(){return n()};a.id=c(a,s)}else o===2&&i===null?s.notificationIdNull&&(a.id=null):a.id=i;return a},d8}var f8,rk;function M8e(){if(rk)return f8;rk=1;const n=bW.v4,e=I8e(),t=function(r,i){if(!(this instanceof t))return new t(r,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return n()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=r};return f8=t,t.prototype.request=function(r,i,s,o){const a=this;let c=null;const l=Array.isArray(r)&&typeof i=="function";if(this.options.version===1&&l)throw new TypeError("JSON-RPC 1.0 does not support batching");if(l||!l&&r&&typeof r=="object"&&typeof i=="function")o=i,c=r;else{typeof s=="function"&&(o=s,s=void 0);const d=typeof o=="function";try{c=e(r,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(f){if(d)return o(f);throw f}if(!d)return c}let h;try{h=JSON.stringify(c,this.options.replacer)}catch(d){return o(d)}return this.callServer(h,function(d,f){a._parseResponse(d,f,o)}),c},t.prototype._parseResponse=function(r,i,s){if(r){s(r);return}if(!i)return s();let o;try{o=JSON.parse(i,this.options.reviver)}catch(a){return s(a)}if(s.length===3)if(Array.isArray(o)){const a=function(l){return typeof l.error<"u"},c=function(l){return!a(l)};return s(null,o.filter(a),o.filter(c))}else return s(null,o.error,o.result);s(null,o)},f8}var R8e=M8e();const P8e=Sf(R8e);var N8e=class extends T9{socket;constructor(n,e,t){super(),this.socket=new window.WebSocket(n,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,e,t){const r=t||e;try{this.socket.send(n),r()}catch(i){r(i)}}close(n,e){this.socket.close(n,e)}addEventListener(n,e,t){this.socket.addEventListener(n,e,t)}};function O8e(n,e){return new N8e(n,e)}var k8e=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},D8e=class extends T9{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:r=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...o}={},a,c){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new k8e,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,e,t,r){return!r&&typeof t=="object"&&(r=t,t=null),new Promise((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const o=this.generate_request_id(n,e),a={jsonrpc:"2.0",method:n,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),r,c=>{if(c)return s(c);this.queue[o]={promise:[i,s]},t&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(new Error("reply timeout"))},t))})})}async login(n){const e=await this.call("rpc.login",n);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(n,e){return new Promise((t,r)=>{if(!this.ready)return r(new Error("socket not ready"));const i={jsonrpc:"2.0",method:n,params:e};this.socket.send(this.dataPack.encode(i),s=>{if(s)return r(s);t()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const e=await this.call("rpc.on",n);if(typeof n=="string"&&e[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+e[n]);return e}async unsubscribe(n){typeof n=="string"&&(n=[n]);const e=await this.call("rpc.off",n);if(typeof n=="string"&&e[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(n,e){this.socket.close(n||1e3,e)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}_connect(n,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=un.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const r=[t.notification];if(t.params.constructor===Object)r.push(t.params);else for(let i=0;i<t.params.length;i++)r.push(t.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",t,r),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(n,e),this.reconnect_interval)))})}};Dy.utils.randomPrivateKey;Dy.getPublicKey;function ik(n){try{return Dy.ExtendedPoint.fromHex(n),!0}catch{return!1}}const _W=(n,e)=>Dy.sign(n,e.slice(0,32)),L8e=Dy.verify,Ni=n=>un.Buffer.isBuffer(n)?n:n instanceof Uint8Array?un.Buffer.from(n.buffer,n.byteOffset,n.byteLength):un.Buffer.from(n);class U8e{constructor(e){Object.assign(this,e)}encode(){return un.Buffer.from(o8.serialize(v3,this))}static decode(e){return o8.deserialize(v3,this,e)}static decodeUnchecked(e){return o8.deserializeUnchecked(v3,this,e)}}const v3=new Map;var EW;const B8e=32,gh=32;function F8e(n){return n._bn!==void 0}let sk=1;class Mt extends U8e{constructor(e){if(super({}),this._bn=void 0,F8e(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Di.decode(e);if(t.length!=gh)throw new Error("Invalid public key input");this._bn=new jO(t)}else this._bn=new jO(e);if(this._bn.byteLength()>gh)throw new Error("Invalid public key input")}}static unique(){const e=new Mt(sk);return sk+=1,new Mt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Di.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(un.Buffer);if(e.length===gh)return e;const t=un.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=un.Buffer.concat([e.toBuffer(),un.Buffer.from(t),r.toBuffer()]),s=yS(i);return new Mt(s)}static createProgramAddressSync(e,t){let r=un.Buffer.alloc(0);e.forEach(function(s){if(s.length>B8e)throw new TypeError("Max seed length exceeded");r=un.Buffer.concat([r,Ni(s)])}),r=un.Buffer.concat([r,t.toBuffer(),un.Buffer.from("ProgramDerivedAddress")]);const i=yS(r);if(ik(i))throw new Error("Invalid seeds, address must fall off the curve");return new Mt(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,i;for(;r!=0;){try{const s=e.concat(un.Buffer.from([r]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Mt(e);return ik(t.toBytes())}}EW=Mt;Mt.default=new EW("11111111111111111111111111111111");v3.set(Mt,{kind:"struct",fields:[["_bn","u256"]]});new Mt("BPFLoader1111111111111111111111111111111111");const f0=1232,O9=127,$b=64;class xW extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(xW.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class SW extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(SW.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Pm extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Pm.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class zb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const mn=(n="publicKey")=>ue.blob(32,n),$8e=(n="signature")=>ue.blob(64,n),jp=(n="string")=>{const e=ue.struct([ue.u32("length"),ue.u32("lengthPadding"),ue.blob(ue.offset(ue.u32(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{const c={chars:un.Buffer.from(s,"utf8")};return r(c,o,a)},i.alloc=s=>ue.u32().span+ue.u32().span+un.Buffer.from(s,"utf8").length,i},z8e=(n="authorized")=>ue.struct([mn("staker"),mn("withdrawer")],n),H8e=(n="lockup")=>ue.struct([ue.ns64("unixTimestamp"),ue.ns64("epoch"),mn("custodian")],n),V8e=(n="voteInit")=>ue.struct([mn("nodePubkey"),mn("authorizedVoter"),mn("authorizedWithdrawer"),ue.u8("commission")],n),W8e=(n="voteAuthorizeWithSeedArgs")=>ue.struct([ue.u32("voteAuthorizationType"),mn("currentAuthorityDerivedKeyOwnerPubkey"),jp("currentAuthorityDerivedKeySeed"),mn("newAuthorized")],n);function AW(n,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return AW({layout:i},e[i.property]);return 0};let r=0;return n.layout.fields.forEach(i=>{r+=t(i)}),r}function bo(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,(r&128)===0)break}return e}function _o(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function yr(n,e){if(!n)throw new Error(e||"Assertion failed")}class o4{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,i=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const c=i(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new o4(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];yr(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{yr(t.length>0,"Expected at least one writable signer key");const[c]=t[0];yr(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([c])=>new Mt(c)),...r.map(([c])=>new Mt(c)),...i.map(([c])=>new Mt(c)),...s.map(([c])=>new Mt(c))];return[o,a]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,t){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const a=new Mt(s),c=e.findIndex(l=>l.equals(a));c>=0&&(yr(c<256,"Max lookup table index exceeded"),r.push(c),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const CW="Reached end of buffer unexpectedly";function Rl(n){if(n.length===0)throw new Error(CW);return n.shift()}function Eo(n,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(CW);return n.splice(...e)}class Jl{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Mt(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Di.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new zb(this.staticAccountKeys)}static compile(e){const t=o4.compile(e.instructions,e.payerKey),[r,i]=t.getMessageComponents(),o=new zb(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Di.encode(a.data)}));return new Jl({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];_o(t,e);const r=this.instructions.map(h=>{const{accounts:d,programIdIndex:f}=h,p=Array.from(Di.decode(h.data));let m=[];_o(m,d.length);let g=[];return _o(g,p.length),{programIdIndex:f,keyIndicesCount:un.Buffer.from(m),keyIndices:d,dataLength:un.Buffer.from(g),data:p}});let i=[];_o(i,r.length);let s=un.Buffer.alloc(f0);un.Buffer.from(i).copy(s);let o=i.length;r.forEach(h=>{const f=ue.struct([ue.u8("programIdIndex"),ue.blob(h.keyIndicesCount.length,"keyIndicesCount"),ue.seq(ue.u8("keyIndex"),h.keyIndices.length,"keyIndices"),ue.blob(h.dataLength.length,"dataLength"),ue.seq(ue.u8("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=f}),s=s.slice(0,o);const a=ue.struct([ue.blob(1,"numRequiredSignatures"),ue.blob(1,"numReadonlySignedAccounts"),ue.blob(1,"numReadonlyUnsignedAccounts"),ue.blob(t.length,"keyCount"),ue.seq(mn("key"),e,"keys"),mn("recentBlockhash")]),c={numRequiredSignatures:un.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:un.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:un.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:un.Buffer.from(t),keys:this.accountKeys.map(h=>Ni(h.toBytes())),recentBlockhash:Di.decode(this.recentBlockhash)};let l=un.Buffer.alloc(2048);const u=a.encode(c,l);return s.copy(l,u),l.slice(0,u+s.length)}static from(e){let t=[...e];const r=Rl(t);if(r!==(r&O9))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Rl(t),s=Rl(t),o=bo(t);let a=[];for(let d=0;d<o;d++){const f=Eo(t,0,gh);a.push(new Mt(un.Buffer.from(f)))}const c=Eo(t,0,gh),l=bo(t);let u=[];for(let d=0;d<l;d++){const f=Rl(t),p=bo(t),m=Eo(t,0,p),g=bo(t),y=Eo(t,0,g),b=Di.encode(un.Buffer.from(y));u.push({programIdIndex:f,accounts:m,data:b})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Di.encode(un.Buffer.from(c)),accountKeys:a,instructions:u};return new Jl(h)}}class L2{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new zb(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=r-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=o4.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const h=t.extractTableLookup(u);if(h!==void 0){const[d,{writable:f,readonly:p}]=h;r.push(d),i.writable.push(...f),i.readonly.push(...p)}}const[o,a]=t.getMessageComponents(),l=new zb(a,i).compileInstructions(e.instructions);return new L2({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:r})}serialize(){const e=Array();_o(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();_o(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();_o(s,this.addressTableLookups.length);const o=ue.struct([ue.u8("prefix"),ue.struct([ue.u8("numRequiredSignatures"),ue.u8("numReadonlySignedAccounts"),ue.u8("numReadonlyUnsignedAccounts")],"header"),ue.blob(e.length,"staticAccountKeysLength"),ue.seq(mn(),this.staticAccountKeys.length,"staticAccountKeys"),mn("recentBlockhash"),ue.blob(r.length,"instructionsLength"),ue.blob(t.length,"serializedInstructions"),ue.blob(s.length,"addressTableLookupsLength"),ue.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(f0),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:Di.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,l)}serializeInstructions(){let e=0;const t=new Uint8Array(f0);for(const r of this.compiledInstructions){const i=Array();_o(i,r.accountKeyIndexes.length);const s=Array();_o(s,r.data.length);const o=ue.struct([ue.u8("programIdIndex"),ue.blob(i.length,"encodedAccountKeyIndexesLength"),ue.seq(ue.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),ue.blob(s.length,"encodedDataLength"),ue.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(f0);for(const r of this.addressTableLookups){const i=Array();_o(i,r.writableIndexes.length);const s=Array();_o(s,r.readonlyIndexes.length);const o=ue.struct([mn("accountKey"),ue.blob(i.length,"encodedWritableIndexesLength"),ue.seq(ue.u8(),r.writableIndexes.length,"writableIndexes"),ue.blob(s.length,"encodedReadonlyIndexesLength"),ue.seq(ue.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Rl(t),i=r&O9;yr(r!==i,"Expected versioned message but received legacy message");const s=i;yr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Rl(t),numReadonlySignedAccounts:Rl(t),numReadonlyUnsignedAccounts:Rl(t)},a=[],c=bo(t);for(let p=0;p<c;p++)a.push(new Mt(Eo(t,0,gh)));const l=Di.encode(Eo(t,0,gh)),u=bo(t),h=[];for(let p=0;p<u;p++){const m=Rl(t),g=bo(t),y=Eo(t,0,g),b=bo(t),w=new Uint8Array(Eo(t,0,b));h.push({programIdIndex:m,accountKeyIndexes:y,data:w})}const d=bo(t),f=[];for(let p=0;p<d;p++){const m=new Mt(Eo(t,0,gh)),g=bo(t),y=Eo(t,0,g),b=bo(t),w=Eo(t,0,b);f.push({accountKey:m,writableIndexes:y,readonlyIndexes:w})}return new L2({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:h,addressTableLookups:f})}}const TW={deserializeMessageVersion(n){const e=n[0],t=e&O9;return t===e?"legacy":t},deserialize:n=>{const e=TW.deserializeMessageVersion(n);if(e==="legacy")return Jl.from(n);if(e===0)return L2.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Au=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const q8e=un.Buffer.alloc($b).fill(0);class vs{constructor(e){this.keys=void 0,this.programId=void 0,this.data=un.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class cs{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new vs(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let m=0;m<t.length;m++)if(t[m].programId===void 0)throw new Error(`Transaction instruction index ${m} has undefined program id`);const i=[],s=[];t.forEach(m=>{m.keys.forEach(y=>{s.push({...y})});const g=m.programId.toString();i.includes(g)||i.push(g)}),i.forEach(m=>{s.push({pubkey:new Mt(m),isSigner:!1,isWritable:!1})});const o=[];s.forEach(m=>{const g=m.pubkey.toString(),y=o.findIndex(b=>b.pubkey.toString()===g);y>-1?(o[y].isWritable=o[y].isWritable||m.isWritable,o[y].isSigner=o[y].isSigner||m.isSigner):o.push(m)}),o.sort(function(m,g){if(m.isSigner!==g.isSigner)return m.isSigner?-1:1;if(m.isWritable!==g.isWritable)return m.isWritable?-1:1;const y={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return m.pubkey.toBase58().localeCompare(g.pubkey.toBase58(),"en",y)});const a=o.findIndex(m=>m.pubkey.equals(r));if(a>-1){const[m]=o.splice(a,1);m.isSigner=!0,m.isWritable=!0,o.unshift(m)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const m of this.signatures){const g=o.findIndex(y=>y.pubkey.equals(m.publicKey));if(g>-1)o[g].isSigner||(o[g].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${m.publicKey.toString()}`)}let c=0,l=0,u=0;const h=[],d=[];o.forEach(({pubkey:m,isSigner:g,isWritable:y})=>{g?(h.push(m.toString()),c+=1,y||(l+=1)):(d.push(m.toString()),y||(u+=1))});const f=h.concat(d),p=t.map(m=>{const{data:g,programId:y}=m;return{programIdIndex:f.indexOf(y.toString()),accounts:m.keys.map(b=>f.indexOf(b.pubkey.toString())),data:Di.encode(g)}});return p.forEach(m=>{yr(m.programIdIndex>=0),m.accounts.forEach(g=>yr(g>=0))}),new Jl({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:e,instructions:p})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const i=r.toString();return t.has(i)?!1:(t.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(i=>{const s=_W(r,i.secretKey);this._addSignature(i.publicKey,Ni(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){yr(t.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=un.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(r.missing||=[]).push(s):L8e(i,e,s.toBytes())||(r.invalid||=[]).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,r=[];_o(r,t.length);const i=r.length+t.length*64+e.length,s=un.Buffer.alloc(i);return yr(t.length<256),un.Buffer.from(r).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(yr(o.length===64,"signature has invalid length"),un.Buffer.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+t.length*64),yr(s.length<=f0,`Transaction too large: ${s.length} > ${f0}`),s}get keys(){return yr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return yr(this.instructions.length===1),this.instructions[0].programId}get data(){return yr(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=bo(t);let i=[];for(let s=0;s<r;s++){const o=Eo(t,0,$b);i.push(Di.encode(un.Buffer.from(o)))}return cs.populate(Jl.from(t),i)}static populate(e,t=[]){const r=new cs;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==Di.encode(q8e)?null:Di.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new vs({keys:s,programId:e.accountKeys[i.programIdIndex],data:Di.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class Ph{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)yr(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array($b));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();_o(t,this.signatures.length);const r=ue.struct([ue.blob(t.length,"encodedSignaturesLength"),ue.seq($8e(),this.signatures.length,"signatures"),ue.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const r=[],i=bo(t);for(let o=0;o<i;o++)r.push(new Uint8Array(Eo(t,0,$b)));const s=TW.deserialize(new Uint8Array(t));return new Ph(s,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=r.findIndex(o=>o.equals(i.publicKey));yr(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=_W(t,i.secretKey)}}addSignature(e,t){yr(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));yr(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const j8e=160,G8e=64,K8e=j8e/G8e,Y8e=1e3/K8e;new Mt("SysvarC1ock11111111111111111111111111111111");new Mt("SysvarEpochSchedu1e111111111111111111111111");new Mt("Sysvar1nstructions1111111111111111111111111");const p8=new Mt("SysvarRecentB1ockHashes11111111111111111111"),ok=new Mt("SysvarRent111111111111111111111111111111111");new Mt("SysvarRewards111111111111111111111111111111");new Mt("SysvarS1otHashes111111111111111111111111111");new Mt("SysvarS1otHistory11111111111111111111111111");new Mt("SysvarStakeHistory1111111111111111111111111");class ak extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Pt extends Error{constructor({code:e,message:t,data:r},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Fp(n){return new Promise(e=>setTimeout(e,n))}function rs(n,e){const t=n.layout.span>=0?n.layout.span:AW(n,e),r=un.Buffer.alloc(t),i=Object.assign({instruction:n.index},e);return n.layout.encode(i,r),r}const X8e=ue.nu64("lamportsPerSignature"),IW=ue.struct([ue.u32("version"),ue.u32("state"),mn("authorizedPubkey"),mn("nonce"),ue.struct([X8e],"feeCalculator")]),ck=IW.span;class k9{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=IW.decode(Ni(e),0);return new k9({authorizedPubkey:new Mt(t.authorizedPubkey),nonce:new Mt(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function U0(n){const e=ue.blob(8,n),t=e.decode.bind(e),r=e.encode.bind(e),i=e,s=e8e();return i.decode=(o,a)=>{const c=t(o,a);return s.decode(c)},i.encode=(o,a,c)=>{const l=s.encode(o);return r(l,a,c)},i}const Vo=Object.freeze({Create:{index:0,layout:ue.struct([ue.u32("instruction"),ue.ns64("lamports"),ue.ns64("space"),mn("programId")])},Assign:{index:1,layout:ue.struct([ue.u32("instruction"),mn("programId")])},Transfer:{index:2,layout:ue.struct([ue.u32("instruction"),U0("lamports")])},CreateWithSeed:{index:3,layout:ue.struct([ue.u32("instruction"),mn("base"),jp("seed"),ue.ns64("lamports"),ue.ns64("space"),mn("programId")])},AdvanceNonceAccount:{index:4,layout:ue.struct([ue.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:ue.struct([ue.u32("instruction"),ue.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:ue.struct([ue.u32("instruction"),mn("authorized")])},AuthorizeNonceAccount:{index:7,layout:ue.struct([ue.u32("instruction"),mn("authorized")])},Allocate:{index:8,layout:ue.struct([ue.u32("instruction"),ue.ns64("space")])},AllocateWithSeed:{index:9,layout:ue.struct([ue.u32("instruction"),mn("base"),jp("seed"),ue.ns64("space"),mn("programId")])},AssignWithSeed:{index:10,layout:ue.struct([ue.u32("instruction"),mn("base"),jp("seed"),mn("programId")])},TransferWithSeed:{index:11,layout:ue.struct([ue.u32("instruction"),U0("lamports"),jp("seed"),mn("programId")])},UpgradeNonceAccount:{index:12,layout:ue.struct([ue.u32("instruction")])}});class U2{constructor(){}static createAccount(e){const t=Vo.Create,r=rs(t,{lamports:e.lamports,space:e.space,programId:Ni(e.programId.toBuffer())});return new vs({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){const i=Vo.TransferWithSeed;t=rs(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ni(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Vo.Transfer;t=rs(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new vs({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){const i=Vo.AssignWithSeed;t=rs(i,{base:Ni(e.basePubkey.toBuffer()),seed:e.seed,programId:Ni(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Vo.Assign;t=rs(i,{programId:Ni(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new vs({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Vo.CreateWithSeed,r=rs(t,{base:Ni(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ni(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new vs({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const t=new cs;"basePubkey"in e&&"seed"in e?t.add(U2.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ck,programId:this.programId})):t.add(U2.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ck,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=Vo.InitializeNonceAccount,r=rs(t,{authorized:Ni(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:p8,isSigner:!1,isWritable:!1},{pubkey:ok,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new vs(i)}static nonceAdvance(e){const t=Vo.AdvanceNonceAccount,r=rs(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:p8,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new vs(i)}static nonceWithdraw(e){const t=Vo.WithdrawNonceAccount,r=rs(t,{lamports:e.lamports});return new vs({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:p8,isSigner:!1,isWritable:!1},{pubkey:ok,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const t=Vo.AuthorizeNonceAccount,r=rs(t,{authorized:Ni(e.newAuthorizedPubkey.toBuffer())});return new vs({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){const i=Vo.AllocateWithSeed;t=rs(i,{base:Ni(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ni(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Vo.Allocate;t=rs(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new vs({keys:r,programId:this.programId,data:t})}}U2.programId=new Mt("11111111111111111111111111111111");new Mt("BPFLoader2111111111111111111111111111111111");function Z8e(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var m8,lk;function J8e(){if(lk)return m8;lk=1;var n=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function t(r,i){var s,o,a,c,l,u,h;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),i);if(h=n.call(r),h==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=t(r[s],!0)+",";return o>-1&&(a+=t(r[s],!0)),a+"]"}else if(h==="[object Object]"){for(c=e(r).sort(),o=c.length,a="",s=0;s<o;)l=c[s],u=t(r[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return m8=function(r){var i=t(r,!1);if(i!==void 0)return""+i},m8}var Q8e=J8e(),uk=Z8e(Q8e);const tm=32;function g8(n){let e=0;for(;n>1;)n/=2,e++;return e}function exe(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class txe{constructor(e,t,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=g8(exe(e+tm+1))-g8(tm)-1,r=this.getSlotsInEpoch(t),i=e-(r-tm);return[t,i]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*tm:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+g8(tm)):this.slotsPerEpoch}}var nxe=globalThis.fetch;class rxe extends D8e{constructor(e,t,r){const i=s=>{const o=O8e(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function ixe(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}const hk=56;class dk{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=ixe(sxe,e),r=e.length-hk;yr(r>=0,"lookup table is invalid"),yr(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=ue.struct([ue.seq(mn(),i,"addresses")]).decode(e.slice(hk));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Mt(t.authority[0]):void 0,addresses:s.map(o=>new Mt(o))}}}const sxe={index:1,layout:ue.struct([ue.u32("typeIndex"),U0("deactivationSlot"),ue.nu64("lastExtendedSlot"),ue.u8("lastExtendedStartIndex"),ue.u8(),ue.seq(mn(),ue.offset(ue.u8(),-1),"authority")])},oxe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function axe(n){const e=n.match(oxe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,i,s]=e,o=n.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${s}`}const Cr=By(P9(Mt),Je(),n=>new Mt(n)),MW=N9([Je(),xr("base64")]),D9=By(P9(un.Buffer),MW,n=>un.Buffer.from(n[0],"base64")),cxe=30*1e3;function lxe(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function nr(n){let e,t;if(typeof n=="string")e=n;else if(n){const{commitment:r,...i}=n;e=r,t=i}return{commitment:e,config:t}}function fk(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function RW(n){return Ns([Ve({jsonrpc:xr("2.0"),id:Je(),result:n}),Ve({jsonrpc:xr("2.0"),id:Je(),error:Ve({code:h1(),message:Je(),data:Ut(a8e())})})])}const uxe=RW(h1());function ln(n){return By(RW(n),uxe,e=>"error"in e?e:{...e,result:it(e.result,n)})}function Fr(n){return ln(Ve({context:Ve({slot:Se()}),value:n}))}function a4(n){return Ve({context:Ve({slot:Se()}),value:n})}function y8(n,e){return n===0?new L2({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Mt(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Di.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Jl(e)}const hxe=Ve({foundation:Se(),foundationTerm:Se(),initial:Se(),taper:Se(),terminal:Se()}),dxe=ln(lt(dt(Ve({epoch:Se(),effectiveSlot:Se(),amount:Se(),postBalance:Se(),commission:Ut(dt(Se()))})))),fxe=lt(Ve({slot:Se(),prioritizationFee:Se()})),pxe=Ve({total:Se(),validator:Se(),foundation:Se(),epoch:Se()}),mxe=Ve({epoch:Se(),slotIndex:Se(),slotsInEpoch:Se(),absoluteSlot:Se(),blockHeight:Ut(Se()),transactionCount:Ut(Se())}),gxe=Ve({slotsPerEpoch:Se(),leaderScheduleSlotOffset:Se(),warmup:Wc(),firstNormalEpoch:Se(),firstNormalSlot:Se()}),yxe=mW(Je(),lt(Se())),kf=dt(Ns([Ve({}),Je()])),wxe=Ve({err:kf}),vxe=xr("receivedSignature"),bxe=Ve({"solana-core":Je(),"feature-set":Ut(Se())}),_xe=Ve({program:Je(),programId:Cr,parsed:h1()}),Exe=Ve({programId:Cr,accounts:lt(Cr),data:Je()}),pk=Fr(Ve({err:dt(Ns([Ve({}),Je()])),logs:dt(lt(Je())),accounts:Ut(dt(lt(dt(Ve({executable:Wc(),owner:Je(),lamports:Se(),data:lt(Je()),rentEpoch:Ut(Se())}))))),unitsConsumed:Ut(Se()),returnData:Ut(dt(Ve({programId:Je(),data:N9([Je(),xr("base64")])}))),innerInstructions:Ut(dt(lt(Ve({index:Se(),instructions:lt(Ns([_xe,Exe]))}))))})),xxe=Fr(Ve({byIdentity:mW(Je(),lt(Se())),range:Ve({firstSlot:Se(),lastSlot:Se()})}));function Sxe(n,e,t,r,i,s){const o=t||nxe;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(u,h)=>{const d=await new Promise((f,p)=>{try{r(u,h,(m,g)=>f([m,g]))}catch(m){p(m)}});return await o(...d)}),new P8e(async(u,h)=>{const d={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},SSe)};try{let f=5,p,m=500;for(;c?p=await c(n,d):p=await o(n,d),!(p.status!==429||i===!0||(f-=1,f===0));)console.error(`Server responded with ${p.status} ${p.statusText}.  Retrying after ${m}ms delay...`),await Fp(m),m*=2;const g=await p.text();p.ok?h(null,g):h(new Error(`${p.status} ${p.statusText}: ${g}`))}catch(f){f instanceof Error&&h(f)}},{})}function Axe(n){return(e,t)=>new Promise((r,i)=>{n.request(e,t,(s,o)=>{if(s){i(s);return}r(o)})})}function Cxe(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);const i=e.map(s=>n.request(s.methodName,s.args));n.request(i,(s,o)=>{if(s){r(s);return}t(o)})})}const Txe=ln(hxe),Ixe=ln(pxe),Mxe=ln(fxe),Rxe=ln(mxe),Pxe=ln(gxe),Nxe=ln(yxe),Oxe=ln(Se()),kxe=Fr(Ve({total:Se(),circulating:Se(),nonCirculating:Se(),nonCirculatingAccounts:lt(Cr)})),NA=Ve({amount:Je(),uiAmount:dt(Se()),decimals:Se(),uiAmountString:Ut(Je())}),Dxe=Fr(lt(Ve({address:Cr,amount:Je(),uiAmount:dt(Se()),decimals:Se(),uiAmountString:Ut(Je())}))),Lxe=Fr(lt(Ve({pubkey:Cr,account:Ve({executable:Wc(),owner:Cr,lamports:Se(),data:D9,rentEpoch:Se()})}))),OA=Ve({program:Je(),parsed:h1(),space:Se()}),Uxe=Fr(lt(Ve({pubkey:Cr,account:Ve({executable:Wc(),owner:Cr,lamports:Se(),data:OA,rentEpoch:Se()})}))),Bxe=Fr(lt(Ve({lamports:Se(),address:Cr}))),B2=Ve({executable:Wc(),owner:Cr,lamports:Se(),data:D9,rentEpoch:Se()}),Fxe=Ve({pubkey:Cr,account:B2}),$xe=By(Ns([P9(un.Buffer),OA]),Ns([MW,OA]),n=>Array.isArray(n)?it(n,D9):n),kA=Ve({executable:Wc(),owner:Cr,lamports:Se(),data:$xe,rentEpoch:Se()}),zxe=Ve({pubkey:Cr,account:kA}),Hxe=Ve({state:Ns([xr("active"),xr("inactive"),xr("activating"),xr("deactivating")]),active:Se(),inactive:Se()}),Vxe=ln(lt(Ve({signature:Je(),slot:Se(),err:kf,memo:dt(Je()),blockTime:Ut(dt(Se()))}))),Wxe=ln(lt(Ve({signature:Je(),slot:Se(),err:kf,memo:dt(Je()),blockTime:Ut(dt(Se()))}))),qxe=Ve({subscription:Se(),result:a4(B2)}),jxe=Ve({pubkey:Cr,account:B2}),Gxe=Ve({subscription:Se(),result:a4(jxe)}),Kxe=Ve({parent:Se(),slot:Se(),root:Se()}),Yxe=Ve({subscription:Se(),result:Kxe}),Xxe=Ns([Ve({type:Ns([xr("firstShredReceived"),xr("completed"),xr("optimisticConfirmation"),xr("root")]),slot:Se(),timestamp:Se()}),Ve({type:xr("createdBank"),parent:Se(),slot:Se(),timestamp:Se()}),Ve({type:xr("frozen"),slot:Se(),timestamp:Se(),stats:Ve({numTransactionEntries:Se(),numSuccessfulTransactions:Se(),numFailedTransactions:Se(),maxTransactionsPerEntry:Se()})}),Ve({type:xr("dead"),slot:Se(),timestamp:Se(),err:Je()})]),Zxe=Ve({subscription:Se(),result:Xxe}),Jxe=Ve({subscription:Se(),result:a4(Ns([wxe,vxe]))}),Qxe=Ve({subscription:Se(),result:Se()}),eSe=Ve({pubkey:Je(),gossip:dt(Je()),tpu:dt(Je()),rpc:dt(Je()),version:dt(Je())}),mk=Ve({votePubkey:Je(),nodePubkey:Je(),activatedStake:Se(),epochVoteAccount:Wc(),epochCredits:lt(N9([Se(),Se(),Se()])),commission:Se(),lastVote:Se(),rootSlot:dt(Se())}),tSe=ln(Ve({current:lt(mk),delinquent:lt(mk)})),nSe=Ns([xr("processed"),xr("confirmed"),xr("finalized")]),rSe=Ve({slot:Se(),confirmations:dt(Se()),err:kf,confirmationStatus:Ut(nSe)}),iSe=Fr(lt(dt(rSe))),sSe=ln(Se()),PW=Ve({accountKey:Cr,writableIndexes:lt(Se()),readonlyIndexes:lt(Se())}),L9=Ve({signatures:lt(Je()),message:Ve({accountKeys:lt(Je()),header:Ve({numRequiredSignatures:Se(),numReadonlySignedAccounts:Se(),numReadonlyUnsignedAccounts:Se()}),instructions:lt(Ve({accounts:lt(Se()),data:Je(),programIdIndex:Se()})),recentBlockhash:Je(),addressTableLookups:Ut(lt(PW))})}),NW=Ve({pubkey:Cr,signer:Wc(),writable:Wc(),source:Ut(Ns([xr("transaction"),xr("lookupTable")]))}),OW=Ve({accountKeys:lt(NW),signatures:lt(Je())}),kW=Ve({parsed:h1(),program:Je(),programId:Cr}),DW=Ve({accounts:lt(Cr),data:Je(),programId:Cr}),oSe=Ns([DW,kW]),aSe=Ns([Ve({parsed:h1(),program:Je(),programId:Je()}),Ve({accounts:lt(Je()),data:Je(),programId:Je()})]),LW=By(oSe,aSe,n=>"accounts"in n?it(n,DW):it(n,kW)),UW=Ve({signatures:lt(Je()),message:Ve({accountKeys:lt(NW),instructions:lt(LW),recentBlockhash:Je(),addressTableLookups:Ut(dt(lt(PW)))})}),Hb=Ve({accountIndex:Se(),mint:Je(),owner:Ut(Je()),programId:Ut(Je()),uiTokenAmount:NA}),BW=Ve({writable:lt(Cr),readonly:lt(Cr)}),c4=Ve({err:kf,fee:Se(),innerInstructions:Ut(dt(lt(Ve({index:Se(),instructions:lt(Ve({accounts:lt(Se()),data:Je(),programIdIndex:Se()}))})))),preBalances:lt(Se()),postBalances:lt(Se()),logMessages:Ut(dt(lt(Je()))),preTokenBalances:Ut(dt(lt(Hb))),postTokenBalances:Ut(dt(lt(Hb))),loadedAddresses:Ut(BW),computeUnitsConsumed:Ut(Se())}),U9=Ve({err:kf,fee:Se(),innerInstructions:Ut(dt(lt(Ve({index:Se(),instructions:lt(LW)})))),preBalances:lt(Se()),postBalances:lt(Se()),logMessages:Ut(dt(lt(Je()))),preTokenBalances:Ut(dt(lt(Hb))),postTokenBalances:Ut(dt(lt(Hb))),loadedAddresses:Ut(BW),computeUnitsConsumed:Ut(Se())}),d1=Ns([xr(0),xr("legacy")]),Df=Ve({pubkey:Je(),lamports:Se(),postBalance:dt(Se()),rewardType:dt(Je()),commission:Ut(dt(Se()))}),cSe=ln(dt(Ve({blockhash:Je(),previousBlockhash:Je(),parentSlot:Se(),transactions:lt(Ve({transaction:L9,meta:dt(c4),version:Ut(d1)})),rewards:Ut(lt(Df)),blockTime:dt(Se()),blockHeight:dt(Se())}))),lSe=ln(dt(Ve({blockhash:Je(),previousBlockhash:Je(),parentSlot:Se(),rewards:Ut(lt(Df)),blockTime:dt(Se()),blockHeight:dt(Se())}))),uSe=ln(dt(Ve({blockhash:Je(),previousBlockhash:Je(),parentSlot:Se(),transactions:lt(Ve({transaction:OW,meta:dt(c4),version:Ut(d1)})),rewards:Ut(lt(Df)),blockTime:dt(Se()),blockHeight:dt(Se())}))),hSe=ln(dt(Ve({blockhash:Je(),previousBlockhash:Je(),parentSlot:Se(),transactions:lt(Ve({transaction:UW,meta:dt(U9),version:Ut(d1)})),rewards:Ut(lt(Df)),blockTime:dt(Se()),blockHeight:dt(Se())}))),dSe=ln(dt(Ve({blockhash:Je(),previousBlockhash:Je(),parentSlot:Se(),transactions:lt(Ve({transaction:OW,meta:dt(U9),version:Ut(d1)})),rewards:Ut(lt(Df)),blockTime:dt(Se()),blockHeight:dt(Se())}))),fSe=ln(dt(Ve({blockhash:Je(),previousBlockhash:Je(),parentSlot:Se(),rewards:Ut(lt(Df)),blockTime:dt(Se()),blockHeight:dt(Se())}))),pSe=ln(dt(Ve({blockhash:Je(),previousBlockhash:Je(),parentSlot:Se(),transactions:lt(Ve({transaction:L9,meta:dt(c4)})),rewards:Ut(lt(Df)),blockTime:dt(Se())}))),gk=ln(dt(Ve({blockhash:Je(),previousBlockhash:Je(),parentSlot:Se(),signatures:lt(Je()),blockTime:dt(Se())}))),w8=ln(dt(Ve({slot:Se(),meta:dt(c4),blockTime:Ut(dt(Se())),transaction:L9,version:Ut(d1)}))),Kw=ln(dt(Ve({slot:Se(),transaction:UW,meta:dt(U9),blockTime:Ut(dt(Se())),version:Ut(d1)}))),mSe=Fr(Ve({blockhash:Je(),lastValidBlockHeight:Se()})),gSe=Fr(Wc()),ySe=Ve({slot:Se(),numTransactions:Se(),numSlots:Se(),samplePeriodSecs:Se()}),wSe=ln(lt(ySe)),vSe=Fr(dt(Ve({feeCalculator:Ve({lamportsPerSignature:Se()})}))),bSe=ln(Je()),_Se=ln(Je()),ESe=Ve({err:kf,logs:lt(Je()),signature:Je()}),xSe=Ve({result:a4(ESe),subscription:Se()}),SSe={"solana-client":"js/1.0.0-maintenance"};class nm{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:h,config:d}=nr(u),f=this._buildArgs([],h,void 0,d),p=uk(f);return l[p]=l[p]??(async()=>{try{const m=await this._rpcRequest("getBlockHeight",f),g=it(m,ln(Se()));if("error"in g)throw new Pt(g.error,"failed to get block height information");return g.result}finally{delete l[p]}})(),await l[p]}})();let r,i,s,o,a,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=lxe(e),this._rpcWsEndpoint=r||axe(e),this._rpcClient=Sxe(e,i,s,o,a,c),this._rpcRequest=Axe(this._rpcClient),this._rpcBatchRequest=Cxe(this._rpcClient),this._rpcWebSocket=new rxe(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:i}=nr(t),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=it(o,Fr(Se()));if("error"in a)throw new Pt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=it(t,ln(dt(Se())));if("error"in r)throw new Pt(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=it(e,ln(Se()));if("error"in t)throw new Pt(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=it(e,Oxe);if("error"in t)throw new Pt(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),i=it(r,kxe);if("error"in i)throw new Pt(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",r),s=it(i,Fr(NA));if("error"in s)throw new Pt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",r),s=it(i,Fr(NA));if("error"in s)throw new Pt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,r){const{commitment:i,config:s}=nr(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=it(c,Lxe);if("error"in l)throw new Pt(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,t,r){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=it(o,Uxe);if("error"in a)throw new Pt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",r),s=it(i,Bxe);if("error"in s)throw new Pt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",r),s=it(i,Dxe);if("error"in s)throw new Pt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:i}=nr(t),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=it(o,Fr(dt(B2)));if("error"in a)throw new Pt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:r,config:i}=nr(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=it(o,Fr(dt(kA)));if("error"in a)throw new Pt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:i}=nr(t),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),c=it(a,Fr(lt(dt(kA))));if("error"in c)throw new Pt(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:i}=nr(t),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),c=it(a,Fr(lt(dt(B2))));if("error"in c)throw new Pt(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:i,config:s}=nr(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??s?.epoch}),a=await this._rpcRequest("getStakeActivation",o),c=it(a,ln(Hxe));if("error"in c)throw new Pt(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:r,config:i}=nr(t),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:fk(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=lt(Fxe),u=o.withContext===!0?it(c,Fr(l)):it(c,ln(l));if("error"in u)throw new Pt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:i}=nr(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=it(o,ln(lt(zxe)));if("error"in a)throw new Pt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){let r;if(typeof e=="string")r=e;else{const s=e;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);r=s.signature}let i;try{i=Di.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return yr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,i,s=!1;const o=new Promise((c,l)=>{try{r=this.onSignature(t,(h,d)=>{r=void 0;const f={context:d,value:h};c({__type:Au.PROCESSED,response:f})},e);const u=new Promise(h=>{r==null?h():i=this._onSubscriptionStateChange(r,d=>{d==="subscribed"&&h()})});(async()=>{if(await u,s)return;const h=await this.getSignatureStatus(t);if(s||h==null)return;const{context:d,value:f}=h;if(f!=null)if(f?.err)l(f.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(f.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(f.confirmationStatus==="processed"||f.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,c({__type:Au.PROCESSED,response:{context:d,value:f}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(h=>{const d=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let f=await d();if(!s){for(;f<=r;)if(await Fp(1e3),s||(f=await d(),s))return;h({__type:Au.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),l=this.getCancellationPromise(t);let u;try{const h=await Promise.race([l,c,o]);if(h.__type===Au.PROCESSED)u=h.response;else throw new xW(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const c=new Promise(f=>{let p=s,m=null;const g=async()=>{try{const{context:y,value:b}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return m=y.slot,b?.nonce}catch{return p}};(async()=>{if(p=await g(),!a)for(;;){if(s!==p){f({__type:Au.NONCE_INVALID,slotInWhichNonceDidAdvance:m});return}if(await Fp(2e3),a||(p=await g(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(t);let d;try{const f=await Promise.race([h,u,c]);if(f.__type===Au.PROCESSED)d=f.response;else{let p;for(;;){const m=await this.getSignatureStatus(o);if(m==null)break;if(m.context.slot<(f.slotInWhichNonceDidAdvance??r)){await Fp(400);continue}p=m;break}if(p?.value){const m=e||"finalized",{confirmationStatus:g}=p.value;switch(m){case"processed":case"recent":if(g!=="processed"&&g!=="confirmed"&&g!=="finalized")throw new Pm(o);break;case"confirmed":case"single":case"singleGossip":if(g!=="confirmed"&&g!=="finalized")throw new Pm(o);break;case"finalized":case"max":case"root":if(g!=="finalized")throw new Pm(o);break;default:}d={context:p.context,value:{err:p.value.err}}}else throw new Pm(o)}}finally{a=!0,l()}return d}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const i=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:Au.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const c=await Promise.race([o,i]);if(c.__type===Au.PROCESSED)a=c.response;else throw new SW(t,c.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=it(e,ln(lt(eSe)));if("error"in t)throw new Pt(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),i=it(r,tSe);if("error"in i)throw new Pt(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:r}=nr(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlot",i),o=it(s,ln(Se()));if("error"in o)throw new Pt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:r}=nr(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=it(s,ln(Je()));if("error"in o)throw new Pt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const r=[e,t],i=await this._rpcRequest("getSlotLeaders",r),s=it(i,ln(lt(Cr)));if("error"in s)throw new Pt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:r,value:i}=await this.getSignatureStatuses([e],t);yr(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const i=await this._rpcRequest("getSignatureStatuses",r),s=it(i,iSe);if("error"in s)throw new Pt(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:r}=nr(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=it(s,ln(Se()));if("error"in o)throw new Pt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),i=it(r,Txe);if("error"in i)throw new Pt(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,r){const{commitment:i,config:s}=nr(r),o=this._buildArgs([e.map(l=>l.toBase58())],i,void 0,{...s,epoch:t??s?.epoch}),a=await this._rpcRequest("getInflationReward",o),c=it(a,dxe);if("error"in c)throw new Pt(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=it(e,Ixe);if("error"in t)throw new Pt(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=nr(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=it(s,Rxe);if("error"in o)throw new Pt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=it(e,Pxe);if("error"in t)throw new Pt(t.error,"failed to get epoch schedule");const r=t.result;return new txe(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=it(e,Nxe);if("error"in t)throw new Pt(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=it(i,sSe);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=it(t,wSe);if("error"in r)throw new Pt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=it(i,vSe);if("error"in s)throw new Pt(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const r=Ni(e.serialize()).toString("base64"),i=this._buildArgs([r],t),s=await this._rpcRequest("getFeeForMessage",i),o=it(s,Fr(dt(Se())));if("error"in o)throw new Pt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),r=t?.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=it(i,Mxe);if("error"in s)throw new Pt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=nr(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=it(s,mSe);if("error"in o)throw new Pt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:r,config:i}=nr(t),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=it(o,gSe);if("error"in a)throw new Pt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=it(e,ln(bxe));if("error"in t)throw new Pt(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=it(e,ln(Je()));if("error"in t)throw new Pt(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:i}=nr(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const a=it(o,uSe);if("error"in a)throw a.error;return a.result}case"none":{const a=it(o,lSe);if("error"in a)throw a.error;return a.result}default:{const a=it(o,cSe);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:h})=>({meta:u,transaction:{...l,message:y8(h,l.message)},version:h}))}:null}}}catch(a){throw new Pt(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:i}=nr(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const a=it(o,dSe);if("error"in a)throw a.error;return a.result}case"none":{const a=it(o,fSe);if("error"in a)throw a.error;return a.result}default:{const a=it(o,hSe);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Pt(a,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,t=c}const i=this._buildArgs([],r,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=it(s,xxe);if("error"in o)throw new Pt(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:r,config:i}=nr(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=it(o,w8);if("error"in a)throw new Pt(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:y8(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:i}=nr(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=it(o,Kw);if("error"in a)throw new Pt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:r,config:i}=nr(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=it(c,Kw);if("error"in l)throw new Pt(l.error,"failed to get transactions");return l.result})}async getTransactions(e,t){const{commitment:r,config:i}=nr(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=it(c,w8);if("error"in l)throw new Pt(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:y8(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",r),s=it(i,pSe);if("error"in s)throw new Pt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new Jl(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:cs.populate(c.message,c.signatures)}))}}async getBlocks(e,t,r){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),s=await this._rpcRequest("getBlocks",i),o=it(s,ln(lt(Se())));if("error"in o)throw new Pt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=it(i,gk);if("error"in s)throw new Pt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=it(i,gk);if("error"in s)throw new Pt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",r),s=it(i,w8);if("error"in s)throw new Pt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Jl(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:cs.populate(a,c)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=it(i,Kw);if("error"in s)throw new Pt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=it(o,Kw);if("error"in a)throw new Pt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=it(s,Vxe);if("error"in o)throw new Pt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=it(s,Wxe);if("error"in o)throw new Pt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new dk({key:e,state:dk.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=k9.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=it(r,bSe);if("error"in i)throw new Pt(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Fp(100);const r=Date.now()-this._blockhashInfo.lastFetch>=cxe;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Fp(Y8e/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=nr(e),i=this._buildArgs([],t,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=it(s,Fr(Se()));if("error"in o)throw new Pt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,r){if("message"in e){const m=e.serialize(),g=un.Buffer.from(m).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const y=t||{};y.encoding="base64","commitment"in y||(y.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(y.innerInstructions=t.innerInstructions);const b=[g,y],w=await this._rpcRequest("simulateTransaction",b),E=it(w,pk);if("error"in E)throw new Error("failed to simulate transaction: "+E.error.message);return E.result}let i;if(e instanceof cs){let p=e;i=new cs,i.feePayer=p.feePayer,i.instructions=e.instructions,i.nonceInfo=p.nonceInfo,i.signatures=p.signatures}else i=cs.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let p=this._disableBlockhashCaching;for(;;){const m=await this._blockhashWithExpiryBlockHeight(p);if(i.lastValidBlockHeight=m.lastValidBlockHeight,i.recentBlockhash=m.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const g=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(g)&&!this._blockhashInfo.transactionSignatures.includes(g)){this._blockhashInfo.simulatedSignatures.push(g);break}else p=!0}}const o=i._compile(),a=o.serialize(),l=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const p=(Array.isArray(r)?r:o.nonProgramIds()).map(m=>m.toBase58());u.accounts={encoding:"base64",addresses:p}}s&&(u.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(u.innerInstructions=t.innerInstructions);const h=[l,u],d=await this._rpcRequest("simulateTransaction",h),f=it(d,pk);if("error"in f){let p;if("data"in f.error&&(p=f.error.data.logs,p&&Array.isArray(p))){const m=`
    `,g=m+p.join(m);console.error(f.error.message,g)}throw new ak({action:"simulate",signature:"",transactionMessage:f.error.message,logs:p})}return f.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,t){const r=Ni(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),c=it(a,_Se);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new ak({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(s=>{try{s(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!t())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=it(e,qxe);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,i=uk([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];yr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:i,config:s}=nr(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=it(e,Gxe);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,i){const{commitment:s,config:o}=nr(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:fk(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=it(e,xSe);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=it(e,Yxe);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=it(e,Zxe);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,i){const s=t||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,r,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,i)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=it(e,Jxe);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(c,l)=>{t(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=it(e,Qxe);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:ue.struct([ue.u32("instruction"),U0("recentSlot"),ue.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:ue.struct([ue.u32("instruction")])},ExtendLookupTable:{index:2,layout:ue.struct([ue.u32("instruction"),U0(),ue.seq(mn(),ue.offset(ue.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ue.struct([ue.u32("instruction")])},CloseLookupTable:{index:4,layout:ue.struct([ue.u32("instruction")])}});new Mt("AddressLookupTab1e1111111111111111111111111");const Yw=Object.freeze({RequestUnits:{index:0,layout:ue.struct([ue.u8("instruction"),ue.u32("units"),ue.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:ue.struct([ue.u8("instruction"),ue.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:ue.struct([ue.u8("instruction"),ue.u32("units")])},SetComputeUnitPrice:{index:3,layout:ue.struct([ue.u8("instruction"),U0("microLamports")])}});class DA{constructor(){}static requestUnits(e){const t=Yw.RequestUnits,r=rs(t,e);return new vs({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const t=Yw.RequestHeapFrame,r=rs(t,e);return new vs({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const t=Yw.SetComputeUnitLimit,r=rs(t,e);return new vs({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const t=Yw.SetComputeUnitPrice,r=rs(t,{microLamports:BigInt(e.microLamports)});return new vs({keys:[],programId:this.programId,data:r})}}DA.programId=new Mt("ComputeBudget111111111111111111111111111111");ue.struct([ue.u8("numSignatures"),ue.u8("padding"),ue.u16("signatureOffset"),ue.u16("signatureInstructionIndex"),ue.u16("publicKeyOffset"),ue.u16("publicKeyInstructionIndex"),ue.u16("messageDataOffset"),ue.u16("messageDataSize"),ue.u16("messageInstructionIndex")]);new Mt("Ed25519SigVerify111111111111111111111111111");$7.utils.isValidPrivateKey;$7.getPublicKey;ue.struct([ue.u8("numSignatures"),ue.u16("signatureOffset"),ue.u8("signatureInstructionIndex"),ue.u16("ethAddressOffset"),ue.u8("ethAddressInstructionIndex"),ue.u16("messageDataOffset"),ue.u16("messageDataSize"),ue.u8("messageInstructionIndex"),ue.blob(20,"ethAddress"),ue.blob(64,"signature"),ue.u8("recoveryId")]);new Mt("KeccakSecp256k11111111111111111111111111111");var FW;new Mt("StakeConfig11111111111111111111111111111111");class $W{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}FW=$W;$W.default=new FW(0,0,Mt.default);Object.freeze({Initialize:{index:0,layout:ue.struct([ue.u32("instruction"),z8e(),H8e()])},Authorize:{index:1,layout:ue.struct([ue.u32("instruction"),mn("newAuthorized"),ue.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:ue.struct([ue.u32("instruction")])},Split:{index:3,layout:ue.struct([ue.u32("instruction"),ue.ns64("lamports")])},Withdraw:{index:4,layout:ue.struct([ue.u32("instruction"),ue.ns64("lamports")])},Deactivate:{index:5,layout:ue.struct([ue.u32("instruction")])},Merge:{index:7,layout:ue.struct([ue.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:ue.struct([ue.u32("instruction"),mn("newAuthorized"),ue.u32("stakeAuthorizationType"),jp("authoritySeed"),mn("authorityOwner")])}});new Mt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ue.struct([ue.u32("instruction"),V8e()])},Authorize:{index:1,layout:ue.struct([ue.u32("instruction"),mn("newAuthorized"),ue.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:ue.struct([ue.u32("instruction"),ue.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:ue.struct([ue.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:ue.struct([ue.u32("instruction"),W8e()])}});new Mt("Vote111111111111111111111111111111111111111");new Mt("Va1idator1nfo111111111111111111111111111111");Ve({name:Je(),website:Ut(Je()),details:Ut(Je()),iconUrl:Ut(Je()),keybaseUsername:Ut(Je())});new Mt("Vote111111111111111111111111111111111111111");ue.struct([mn("nodePubkey"),mn("authorizedWithdrawer"),ue.u8("commission"),ue.nu64(),ue.seq(ue.struct([ue.nu64("slot"),ue.u32("confirmationCount")]),ue.offset(ue.u32(),-8),"votes"),ue.u8("rootSlotValid"),ue.nu64("rootSlot"),ue.nu64(),ue.seq(ue.struct([ue.nu64("epoch"),mn("authorizedVoter")]),ue.offset(ue.u32(),-8),"authorizedVoters"),ue.struct([ue.seq(ue.struct([mn("authorizedPubkey"),ue.nu64("epochOfLastAuthorizedSwitch"),ue.nu64("targetEpoch")]),32,"buf"),ue.nu64("idx"),ue.u8("isEmpty")],"priorVoters"),ue.nu64(),ue.seq(ue.struct([ue.nu64("epoch"),ue.nu64("credits"),ue.nu64("prevCredits")]),ue.offset(ue.u32(),-8),"epochCredits"),ue.struct([ue.nu64("slot"),ue.nu64("timestamp")],"lastTimestamp")]);const ASe=1e9,Ia={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new Mt("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new Mt("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new Mt("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:_e.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${_e.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9};class l4 extends Error{constructor(e,t){super(e),this.error=t}}class CSe extends l4{constructor(){super(...arguments),this.name="WalletAccountError"}}class TSe extends l4{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class yk extends l4{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class ISe extends l4{constructor(){super(...arguments),this.name="WalletSignMessageError"}}function Yd(n){return"version"in n}const zW="solana:signAndSendTransaction",MSe="solana:signMessage",LA="solana:signTransaction",HW="standard:connect",RSe="standard:disconnect",VW="standard:events";function PSe(n){return HW in n.features&&VW in n.features&&(zW in n.features||LA in n.features)}function NSe(n){if(typeof n=="string")return`solana:${n}`}class u4{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,t){this.listeners[e].push(t)}removeListener(e,t){this.listeners[e]=this.listeners[e].filter(r=>r!==t)}emit(e,t){this.listeners[e].forEach(r=>r(t))}}class OSe extends u4{constructor(e){super(),this.id=_e.CONNECTOR_ID.AUTH,this.name=_e.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=_e.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){const e=ee.state.chains.get(_e.CHAIN.SOLANA)?.accountState?.address;return e?new Mt(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter(t=>e.includes(t.caipNetworkId))}async connect(e={}){const t=e.chainId||this.getActiveChain()?.id,r=Ms("solana");if(await xo.authConnectorAuthenticate({authConnector:this.provider,chainId:NSe(t),socialUri:e.socialUri,preferredAccountType:r,chainNamespace:_e.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const t=await this.provider.request({method:"solana_signMessage",params:{message:ii.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return ii.decode(t.signature)}async signTransaction(e){const t=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),r=ii.decode(t.transaction);return Yd(e)?Ph.deserialize(r):cs.from(r)}async signAndSendTransaction(e,t){const r=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:r,options:t},chainNamespace:this.chain})).signature}async sendTransaction(e,t,r){const i=await this.signTransaction(e);return await t.sendRawTransaction(i.serialize(),r)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(r=>this.serializeTransaction(r))},chainNamespace:this.chain})).transactions.map((r,i)=>{const s=e[i];if(!s)throw new Error("Invalid solana_signAllTransactions response");const o=ii.decode(r);return Yd(s)?Ph.deserialize(o):cs.from(o)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return ii.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}class kSe extends u4{constructor(e){super(),this.name="Coinbase Wallet",this.id=mi.ConnectorExplorerIds[_e.CONNECTOR_ID.COINBASE_SDK],this.explorerId=mi.ConnectorExplorerIds[_e.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=_e.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===D0.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return mi.ConnectorImageIds[_e.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),e}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,t){return(await this.coinbase.signAndSendTransaction(e,t)).signature}async sendTransaction(e,t,r){const i=await this.signTransaction(e);return await t.sendRawTransaction(i.serialize(),r)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const t=this.coinbase.publicKey;if(e&&!t)throw new Error("Not connected");return t}}class wk extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class vk extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}var DSe=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},UA;class bk extends J5{constructor({provider:e,chains:t,getActiveChain:r}){super({caipNetworks:t,namespace:"solana",provider:e}),this.eventEmitter=new u4,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),UA.set(this,"1.0.0"),this.getActiveChain=r}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let t=e;return t===Ia.CHAIN_IDS.Deprecated_Mainnet?t=Ia.CHAIN_IDS.Mainnet:t===Ia.CHAIN_IDS.Deprecated_Devnet&&(t=Ia.CHAIN_IDS.Devnet),this.caipNetworks.find(r=>r.caipNetworkId===t)}).filter(Boolean)}get icon(){return Xo.state.connectorImages[this.id]}get version(){return DSe(this,UA,"f")}get publicKey(){const e=this.getAccount(!1);if(e)return new Mt(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new Mt(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const t=await this.internalRequest("solana_signMessage",{message:ii.encode(e),pubkey:this.getAccount(!0).address});return ii.decode(t.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const t=this.serializeTransaction(e),r=await this.internalRequest("solana_signTransaction",{transaction:t,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in r){const s=ii.decode(r.signature);return e.addSignature(new Mt(this.getAccount(!0).publicKey),Buffer.from(s)),e}const i=Buffer.from(r.transaction,"base64");return Yd(e)?Ph.deserialize(new Uint8Array(i)):cs.from(i)}async signAndSendTransaction(e,t){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const r=this.serializeTransaction(e),i=await this.internalRequest("solana_signAndSendTransaction",{transaction:r,pubkey:this.getAccount(!0).address,sendOptions:t});return this.emit("pendingTransaction",void 0),i.signature}async sendTransaction(e,t,r){const i=await this.signTransaction(e),s=await t.sendRawTransaction(i.serialize(),r);return this.emit("pendingTransaction",void 0),s}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(r=>this.serializeTransaction(r))})).transactions.map((r,i)=>{const s=e[i];if(!s)throw new Error("Invalid transactions response");const o=Buffer.from(r,"base64");return Yd(s)?Ph.deserialize(new Uint8Array(o)):(this.emit("pendingTransaction",void 0),cs.from(o))})}catch(t){if(t instanceof vk){const r=[];for(const i of e)r.push(await this.signTransaction(i));return r}throw t}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){const e=this.session?.namespaces.solana?.accounts||[];return Promise.resolve(e.map(t=>({namespace:this.chain,address:Es.parseCaipAddress(t).address,type:"eoa"})))}internalRequest(e,t){let i=this.chains.find(s=>this.getActiveChain()?.id===s.id)?.caipNetworkId;switch(i){case Ia.CHAIN_IDS.Mainnet:this.sessionChains.includes(Ia.CHAIN_IDS.Mainnet)||(i=Ia.CHAIN_IDS.Deprecated_Mainnet);break;case Ia.CHAIN_IDS.Devnet:this.sessionChains.includes(Ia.CHAIN_IDS.Devnet)||(i=Ia.CHAIN_IDS.Deprecated_Devnet);break}return this.provider?.request({method:e,params:t},i)}get sessionChains(){return sa.getChainsFromNamespaces(this.session?.namespaces)}serializeTransaction(e){return Buffer.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){const t=this.session?.namespaces.solana?.accounts[0];if(!t){if(e)throw new Error("Account not found");return}const r=t.split(":")[2];if(!r){if(e)throw new Error("Address not found");return}return{address:r,publicKey:ii.decode(r)}}getRawRPCParams(e){return Yd(e)?{}:{feePayer:e.feePayer?.toBase58()??"",instructions:e.instructions.map(t=>({data:ii.encode(new Uint8Array(t.data)),keys:t.keys.map(r=>({isWritable:r.isWritable,isSigner:r.isSigner,pubkey:r.pubkey.toBase58()})),programId:t.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){if(!this.session?.namespaces.solana?.methods.includes(e))throw new vk(e)}}UA=new WeakMap;const rm=Qn({connection:null}),mp={state:rm,subscribeKey(n,e){return Ei(rm,n,e)},subscribe(n){return _i(rm,()=>n(rm))},setConnection(n){rm.connection=_h(n)}},_k={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function Ek({provider:n,to:e,value:t,connection:r}){if(!n.publicKey)throw Error("No public key found");const i=new Mt(e),s=Math.floor(t*ASe),{blockhash:o,lastValidBlockHeight:a}=await r.getLatestBlockhash(),c=[DA.setComputeUnitPrice({microLamports:_k.UNIT_PRICE_MICRO_LAMPORTS}),DA.setComputeUnitLimit({units:_k.UNIT_LIMIT}),U2.transfer({fromPubkey:n.publicKey,toPubkey:i,lamports:s})];return new cs({feePayer:n.publicKey,blockhash:o,lastValidBlockHeight:a}).add(...c)}var LSe=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},USe=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},b3;let im;const h4=new Set;function BSe(n){pg=void 0,h4.add(n)}function FSe(n){pg=void 0,h4.delete(n)}const Gp={};function $Se(){if(im||(im=Object.freeze({register:xk,get:zSe,on:HSe}),typeof window>"u"))return im;const n=Object.freeze({register:xk});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(n))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new VSe(n))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return im}function xk(...n){return n=n.filter(e=>!h4.has(e)),n.length?(n.forEach(e=>BSe(e)),Gp.register?.forEach(e=>Sk(()=>e(...n))),function(){n.forEach(t=>FSe(t)),Gp.unregister?.forEach(t=>Sk(()=>t(...n)))}):()=>{}}let pg;function zSe(){return pg||(pg=[...h4]),pg}function HSe(n,e){return Gp[n]?.push(e)||(Gp[n]=[e]),function(){Gp[n]=Gp[n]?.filter(r=>e!==r)}}function Sk(n){try{n()}catch(e){console.error(e)}}class VSe extends Event{get detail(){return LSe(this,b3,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),b3.set(this,void 0),USe(this,b3,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}b3=new WeakMap;function WSe(n){switch(n){case"processed":case"confirmed":case"finalized":case void 0:return n;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Ak={"solana:mainnet":D0,"solana:testnet":MA,"solana:devnet":IA};class qSe extends u4{constructor({wallet:e,getActiveChain:t,requestedChains:r}){super(),this.chain=_e.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=t,this.requestedChains=r,this.bindEvents()}get id(){const e=this.name;return mi.ConnectorExplorerIds[e]||e}get name(){return this.wallet.name==="Trust"?"Trust Wallet":this.wallet.name}get type(){return"ANNOUNCED"}get explorerId(){return mi.ConnectorExplorerIds[this.name]}get publicKey(){const e=this.getAccount(!1);if(e)return new Mt(e.publicKey)}get imageUrl(){return this.wallet.icon}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(t=>t.id===e||t.id===Ak[e]?.id)).filter(Boolean)}async connect(){await this.getWalletFeature(HW).connect();const t=this.getAccount(!0),r=new Mt(t.publicKey);return this.emit("connect",r),t.address}async disconnect(){await this.getWalletFeature(RSe).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const t=this.getWalletFeature(MSe),r=this.getAccount(!0),[i]=await t.signMessage({message:e,account:r});if(!i)throw new ISe("Empty result");return i.signature}async signTransaction(e){const t=this.getWalletFeature(LA),r=this.getAccount(!0),i=this.serializeTransaction(e),[s]=await t.signTransaction({account:r,transaction:new Uint8Array(i),chain:this.getActiveChainName()});if(!s)throw new yk("Empty result");return this.emit("pendingTransaction",void 0),Yd(e)?Ph.deserialize(s.signedTransaction):cs.from(s.signedTransaction)}async signAndSendTransaction(e,t){const r=this.getWalletFeature(zW),i=this.getAccount(!0),[s]=await r.signAndSendTransaction({account:i,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...t,preflightCommitment:WSe(t?.preflightCommitment)},chain:this.getActiveChainName()});if(!s)throw new TSe("Empty result");return this.emit("pendingTransaction",void 0),ii.encode(s.signature)}async sendTransaction(e,t,r){const i=await this.signTransaction(e);return await t.sendRawTransaction(i.serialize(),r)}async signAllTransactions(e){const t=this.getWalletFeature(LA),r=this.getAccount(!0),i=this.getActiveChainName();return(await t.signTransaction(...e.map(o=>({transaction:new Uint8Array(this.serializeTransaction(o)),account:r,chain:i})))).map(({signedTransaction:o},a)=>{const c=e[a];if(!c)throw new yk("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),Yd(c)?Ph.deserialize(o):cs.from(o)})}async request(e){return Promise.reject(new wk("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const t=this.wallet.accounts[0];if(e&&!t)throw new CSe;return t}getWalletFeature(e){if(!(e in this.wallet.features))throw new wk(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(Ak).find(([,t])=>t.id===this.getActiveChain()?.id);if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(VW).on("change",t=>{if(t.accounts){const r=t.accounts[0];r&&this.emit("accountsChanged",new Mt(r.publicKey))}})}}const{get:jSe,on:Ck}=$Se();let Cu=[];function GSe(n,e,t){const r=[Ck("register",(...i)=>{Cu=[...Cu,...Tk(i,n,e)],t(...Cu)}),Ck("unregister",(...i)=>{Cu=Cu.filter(s=>i.some(o=>o.name===s.wallet.name)),t(...Cu)})];return Cu=Tk(jSe(),n,e),t(...Cu),()=>r.forEach(i=>i())}function Tk(n,e,t){return n.filter(r=>r.name!=="WalletConnect"&&PSe(r)).map(r=>new qSe({wallet:r,requestedChains:e,getActiveChain:t}))}const KSe=[_e.CONNECTOR_ID.AUTH,_e.CONNECTOR_ID.WALLET_CONNECT];class YSe extends C9{constructor(e={}){super({adapterType:_e.ADAPTER_TYPES.SOLANA,namespace:_e.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){super.construct(e);const t=je.getActiveCaipNetworkId(),i=(e.networks?.find(s=>s.caipNetworkId===t)||e.networks?.[0])?.rpcUrls.default.http[0];i&&mp.setConnection(new nm(i,this.connectionSettings))}setAuthProvider(e){this.addConnector(new OSe({w3mFrameProvider:e,getActiveChain:()=>ee.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(e,t){e.projectId||ir.open(gr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const r=()=>t.getCaipNetwork(this.namespace);_t.isClient()&&"coinbaseSolana"in window&&this.addConnector(new kSe({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:r})),GSe(this.getCaipNetworks(),r,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const t=this.connectors.find(r=>r.id===e.id);return t?{accounts:await t.getAccounts()}:{accounts:[]}}async signMessage(e){const t=e.provider;if(!t)throw new Error("connectionControllerClient:signMessage - provider is undefined");const r=await t.signMessage(new TextEncoder().encode(e.message));return{signature:ii.encode(r)}}async estimateGas(e){const t=mp.state.connection;if(!t||!e.provider)throw new Error("Connection is not set");const i=await(await Ek({provider:e.provider,connection:t,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(t);return{gas:BigInt(i||0)}}async sendTransaction(e){const t=mp.state.connection;if(!t||!e.provider)throw new Error("Connection is not set");const r=e.provider,i=await Ek({provider:r,connection:t,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),s=await r.sendTransaction(i,t);return await new Promise(o=>{const a=setInterval(async()=>{(await t.getSignatureStatus(s))?.value&&(clearInterval(a),o())},1e3)}),{hash:s}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){const t=this.connectors.find(l=>l.id===e.id);if(!t)throw new Error("Provider not found");const r={...t,...e.id===_e.CONNECTOR_ID.AUTH?{provider:t}:{}},i=e.rpcUrl||this.getCaipNetworks()?.find(l=>l.id===e.chainId)?.rpcUrls.default.http[0];if(!i)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const s=this.connectionManager?.getConnection({address:e.address,connectorId:t.id,connections:this.connections,connectors:this.connectors});if(s?.account)return this.emit("accountChanged",{address:s.account.address,chainId:s.caipNetwork?.id,connector:r}),{id:t.id,address:s.account.address,chainId:e.chainId,provider:t,type:t.type};const o=await t.connect({chainId:e.chainId,socialUri:e.socialUri});mp.setConnection(new nm(i,this.connectionSettings)),this.emit("accountChanged",{address:o,chainId:e.chainId,connector:r});const a=t.id===_e.CONNECTOR_ID.AUTH,c=this.getCaipNetworks()?.find(l=>l.id===e.chainId);return this.addConnection({connectorId:t.id,accounts:[{address:o}],caipNetwork:c,auth:a?{name:je.getConnectedSocialProvider(),username:je.getConnectedSocialUsername()}:void 0}),t.id!==_e.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(t.id,t.provider),{id:t.id,address:o,chainId:e.chainId,provider:t,type:t.type}}async getBalance(e){const t=e.address,r=this.getCaipNetworks()?.find(c=>c.id===e.chainId);if(!t)return Promise.resolve({balance:"0.00",symbol:"SOL"});const i=new nm(r?.rpcUrls?.default?.http?.[0],this.connectionSettings),s=`${r?.caipNetworkId}:${e.address}`,o=this.balancePromises[s];if(o)return o;const a=je.getNativeBalanceCacheForCaipAddress(s);return a?{balance:a.balance,symbol:a.symbol}:(this.balancePromises[s]=new Promise(async c=>{try{const u=(await i.getBalance(new Mt(t))/Ia.LAMPORTS_PER_SOL).toString();if(je.updateNativeBalanceCache({caipAddress:s,balance:u,symbol:e.caipNetwork?.nativeCurrency.symbol||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");c({balance:u,symbol:e.caipNetwork?.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){await super.switchNetwork(e);const{caipNetwork:t}=e;t?.rpcUrls?.default?.http?.[0]&&mp.setConnection(new nm(t.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,t){if(KSe.includes(e))return;const r=s=>{this.onAccountsChanged([s.toBase58()],e,!1)},i=()=>this.onDisconnect(e);this.providerHandlers[e]||(t.on("disconnect",i),t.on("accountsChanged",r),t.on("connect",r),this.providerHandlers[e]={provider:t,disconnect:i,accountsChanged:r,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;const t=_e.CONNECTOR_ID.WALLET_CONNECT;sa.listenWcProvider({universalProvider:e,namespace:_e.CHAIN.SOLANA,onConnect:i=>this.onConnect(i,t),onDisconnect:()=>this.onDisconnect(t),onAccountsChanged:i=>this.onAccountsChanged(i,t,!1)});const r=new bk({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>ee.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){const{SolanaWalletConnectStandardWallet:i}=await Ct(async()=>{const{SolanaWalletConnectStandardWallet:s}=await import("./wallet-standard-Q5DB5A4m.js");return{SolanaWalletConnectStandardWallet:s}},[]);i.register(e)}return this.addConnector(r),Promise.resolve()}async connectWalletConnect(e){const t=await super.connectWalletConnect(e),r=this.getCaipNetworks()?.find(s=>s.id===e)?.rpcUrls.default.http[0],i=new nm(r,this.connectionSettings);return mp.setConnection(i),t}async disconnect(e){if(e.id){const t=this.connectors.find(i=>i.id===e.id);if(!t)throw new Error("Provider not found");const r=this.connections.find(i=>Kr.isLowerCaseMatch(i.connectorId,e.id));return await t.provider.disconnect(),this.deleteConnection(t.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:r?[r]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect({...e,type:""})}async syncConnections({connectToFirstConnector:e,caipNetwork:t,getConnectorStorageInfo:r}){await this.connectionManager?.syncConnections({connectors:this.connectors,caipNetwork:t,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenSolanaProviderEvents.bind(this),getConnectionStatusInfo:r}),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new bk({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>ee.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async t=>{const r=this.connectors.find(i=>Kr.isLowerCaseMatch(i.id,t.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),t}))}}}const v8="5be0f8470c97bc91724fc88b4c86f005",Ik="/visualizer",Nm="6Qxu5cRDNFEZvYtgtvo27tdg7LuT5wuX7THqqPbBWJmT";let Mk=!1;function XSe(){if(!Mk){const b=new JEe({networks:[PO,MO,RO],projectId:v8}),w=new YSe({networks:[D0,MA],projectId:v8});oEe({adapters:[b,w],networks:[PO,MO,RO,D0,MA],projectId:v8,metadata:{name:"Kaleidosync",description:"WebGL Music Visualizer",url:window.location.origin,icons:["https://kaleidosync.com/favicon.png"]},features:{email:!0,socials:["google","discord","github"],emailShowWallets:!0,onramp:!0,swaps:!0},featuredWalletIds:["metamask","phantom","coinbaseWallet","walletConnect"],termsConditionsUrl:`${window.location.origin}/terms`,privacyPolicyUrl:`${window.location.origin}/privacy`}),Mk=!0}const{open:n,close:e}=rEe(),t=iEe(),r=eEe(),{disconnect:i}=tEe(),s=OO("eip155"),o=OO("solana"),a=Ee(()=>r.value.isConnected||!1),c=Ee(()=>r.value.address||null),l=Ee(()=>t.open||!1),u=Ee(()=>c.value?c.value.startsWith("0x")&&c.value.length===42?"evm":c.value.length>=32&&c.value.length<=44?"solana":"unknown":null),h=Ee(()=>a.value?r.value.embeddedWalletInfo?"social":"wallet":null),d=Ee(()=>r.value?.embeddedWalletInfo?.user?.email||null);async function f(){await n()}function p(){e()}async function m(){await i()}async function g(b=2e3){const w=Date.now();return new Promise(E=>{const x=()=>{if(u.value==="evm"&&s?.walletProvider||u.value==="solana"&&o?.walletProvider){E(!0);return}if(Date.now()-w>b){E(!1);return}setTimeout(x,50)};x()})}async function y(b){if(!a.value||!c.value)throw new Error("Wallet not connected");if(!await g())throw new Error("Wallet provider not available - please try reconnecting");console.log("🔐 Signing message:",{chainType:u.value,address:c.value,hasEip155Provider:!!s?.walletProvider,hasSolanaProvider:!!o?.walletProvider});try{let E;if(u.value==="evm"&&s?.walletProvider)E=await s.walletProvider.request({method:"personal_sign",params:[b,c.value]});else if(u.value==="solana"&&o?.walletProvider){const x=new TextEncoder().encode(b);if(typeof o.walletProvider.signMessage!="function")throw new Error("Solana wallet does not support message signing");const C=await o.walletProvider.signMessage(x),R=C?.signature||C;if(!R)throw new Error("No signature returned from Solana wallet");E=R instanceof Uint8Array?ii.encode(R):R}else throw new Error(`Wallet provider not available. Chain: ${u.value}, EVM: ${!!s?.walletProvider}, Solana: ${!!o?.walletProvider}`);return E}catch(E){throw E.message?.includes("User rejected")||E.code===4001?new Error("User rejected signature request"):E}}return{isConnected:a,address:c,chainType:u,connectionType:h,email:d,isModalOpen:l,connect:f,closeModal:p,disconnect:m,signMessage:y}}const qc=Object.create(null);qc.open="0";qc.close="1";qc.ping="2";qc.pong="3";qc.message="4";qc.upgrade="5";qc.noop="6";const _3=Object.create(null);Object.keys(qc).forEach(n=>{_3[qc[n]]=n});const BA={type:"error",data:"parser error"},WW=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",qW=typeof ArrayBuffer=="function",jW=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,B9=({type:n,data:e},t,r)=>WW&&e instanceof Blob?t?r(e):Rk(e,r):qW&&(e instanceof ArrayBuffer||jW(e))?t?r(e):Rk(new Blob([e]),r):r(qc[n]+(e||"")),Rk=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function Pk(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let b8;function ZSe(n,e){if(WW&&n.data instanceof Blob)return n.data.arrayBuffer().then(Pk).then(e);if(qW&&(n.data instanceof ArrayBuffer||jW(n.data)))return e(Pk(n.data));B9(n,!1,t=>{b8||(b8=new TextEncoder),e(b8.encode(t))})}const Nk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Om=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<Nk.length;n++)Om[Nk.charCodeAt(n)]=n;const JSe=n=>{let e=n.length*.75,t=n.length,r,i=0,s,o,a,c;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<t;r+=4)s=Om[n.charCodeAt(r)],o=Om[n.charCodeAt(r+1)],a=Om[n.charCodeAt(r+2)],c=Om[n.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},QSe=typeof ArrayBuffer=="function",F9=(n,e)=>{if(typeof n!="string")return{type:"message",data:GW(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:eAe(n.substring(1),e)}:_3[t]?n.length>1?{type:_3[t],data:n.substring(1)}:{type:_3[t]}:BA},eAe=(n,e)=>{if(QSe){const t=JSe(n);return GW(t,e)}else return{base64:!0,data:n}},GW=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},KW="",tAe=(n,e)=>{const t=n.length,r=new Array(t);let i=0;n.forEach((s,o)=>{B9(s,!1,a=>{r[o]=a,++i===t&&e(r.join(KW))})})},nAe=(n,e)=>{const t=n.split(KW),r=[];for(let i=0;i<t.length;i++){const s=F9(t[i],e);if(r.push(s),s.type==="error")break}return r};function rAe(){return new TransformStream({transform(n,e){ZSe(n,t=>{const r=t.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}n.data&&typeof n.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let _8;function Xw(n){return n.reduce((e,t)=>e+t.length,0)}function Zw(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)t[i]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function iAe(n,e){_8||(_8=new TextDecoder);const t=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(r===0){if(Xw(t)<1)break;const c=Zw(t,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Xw(t)<2)break;const c=Zw(t,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Xw(t)<8)break;const c=Zw(t,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(BA);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(Xw(t)<i)break;const c=Zw(t,i);a.enqueue(F9(s?c:_8.decode(c),e)),r=0}if(i===0||i>n){a.enqueue(BA);break}}}})}const YW=4;function Xr(n){if(n)return sAe(n)}function sAe(n){for(var e in Xr.prototype)n[e]=Xr.prototype[e];return n}Xr.prototype.on=Xr.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};Xr.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};Xr.prototype.off=Xr.prototype.removeListener=Xr.prototype.removeAllListeners=Xr.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,i=0;i<t.length;i++)if(r=t[i],r===e||r.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+n],this};Xr.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,i=t.length;r<i;++r)t[r].apply(this,e)}return this};Xr.prototype.emitReserved=Xr.prototype.emit;Xr.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};Xr.prototype.hasListeners=function(n){return!!this.listeners(n).length};const d4=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Zo=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),oAe="arraybuffer";function XW(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const aAe=Zo.setTimeout,cAe=Zo.clearTimeout;function f4(n,e){e.useNativeTimers?(n.setTimeoutFn=aAe.bind(Zo),n.clearTimeoutFn=cAe.bind(Zo)):(n.setTimeoutFn=Zo.setTimeout.bind(Zo),n.clearTimeoutFn=Zo.clearTimeout.bind(Zo))}const lAe=1.33;function uAe(n){return typeof n=="string"?hAe(n):Math.ceil((n.byteLength||n.size)*lAe)}function hAe(n){let e=0,t=0;for(let r=0,i=n.length;r<i;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function ZW(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function dAe(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function fAe(n){let e={},t=n.split("&");for(let r=0,i=t.length;r<i;r++){let s=t[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class pAe extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class $9 extends Xr{constructor(e){super(),this.writable=!1,f4(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new pAe(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=F9(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=dAe(e);return t.length?"?"+t:""}}class mAe extends $9{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};nAe(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,tAe(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=ZW()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let JW=!1;try{JW=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const gAe=JW;function yAe(){}class wAe extends mAe{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let r=location.port;r||(r=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}let p0=class E3 extends Xr{constructor(e,t,r){super(),this.createRequest=e,f4(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const t=XW(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=E3.requestsCount++,E3.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=yAe,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete E3.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};p0.requestsCount=0;p0.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ok);else if(typeof addEventListener=="function"){const n="onpagehide"in Zo?"pagehide":"unload";addEventListener(n,Ok,!1)}}function Ok(){for(let n in p0.requests)p0.requests.hasOwnProperty(n)&&p0.requests[n].abort()}const vAe=function(){const n=QW({xdomain:!1});return n&&n.responseType!==null}();class bAe extends wAe{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=vAe&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new p0(QW,this.uri(),e)}}function QW(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||gAe))return new XMLHttpRequest}catch{}if(!e)try{return new Zo[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const eq=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _Ae extends $9{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=eq?{}:XW(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;B9(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&d4(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=ZW()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const E8=Zo.WebSocket||Zo.MozWebSocket;class EAe extends _Ae{createSocket(e,t,r){return eq?new E8(e,t,r):t?new E8(e,t):new E8(e)}doWrite(e,t){this.ws.send(t)}}class xAe extends $9{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=iAe(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=rAe();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;this._writer.write(r).then(()=>{i&&d4(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const SAe={websocket:EAe,webtransport:xAe,polling:bAe},AAe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,CAe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function FA(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let i=AAe.exec(n||""),s={},o=14;for(;o--;)s[CAe[o]]=i[o]||"";return t!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=TAe(s,s.path),s.queryKey=IAe(s,s.query),s}function TAe(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function IAe(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(t[i]=s)}),t}const $A=typeof addEventListener=="function"&&typeof removeEventListener=="function",x3=[];$A&&addEventListener("offline",()=>{x3.forEach(n=>n())},!1);class yh extends Xr{constructor(e,t){if(super(),this.binaryType=oAe,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const r=FA(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=FA(t.host).host);f4(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fAe(this.opts.query)),$A&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},x3.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=YW,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&yh.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",yh.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(t+=uAe(i)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,d4(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,i){if(typeof t=="function"&&(i=t,t=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:t,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(yh.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),$A&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=x3.indexOf(this._offlineEventListener);r!==-1&&x3.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}yh.protocol=YW;class MAe extends yh{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;yh.priorWebsocketSuccess=!1;const i=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;yh.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function s(){r||(r=!0,u(),t.close(),t=null)}const o=h=>{const d=new Error("probe error: "+h);d.transport=t.name,s(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function c(){o("socket closed")}function l(h){t&&h.name!==t.name&&s()}const u=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};t.once("open",i),t.once("error",o),t.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let RAe=class extends MAe{constructor(e,t={}){const r=typeof e=="object"?e:t;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>SAe[i]).filter(i=>!!i)),super(e,r)}};function PAe(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=FA(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(t&&t.port===r.port?"":":"+r.port),r}const NAe=typeof ArrayBuffer=="function",OAe=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,tq=Object.prototype.toString,kAe=typeof Blob=="function"||typeof Blob<"u"&&tq.call(Blob)==="[object BlobConstructor]",DAe=typeof File=="function"||typeof File<"u"&&tq.call(File)==="[object FileConstructor]";function z9(n){return NAe&&(n instanceof ArrayBuffer||OAe(n))||kAe&&n instanceof Blob||DAe&&n instanceof File}function S3(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(S3(n[t]))return!0;return!1}if(z9(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return S3(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&S3(n[t]))return!0;return!1}function LAe(n){const e=[],t=n.data,r=n;return r.data=zA(t,e),r.attachments=e.length,{packet:r,buffers:e}}function zA(n,e){if(!n)return n;if(z9(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=zA(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=zA(n[r],e));return t}return n}function UAe(n,e){return n.data=HA(n.data,e),delete n.attachments,n}function HA(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=HA(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=HA(n[t],e));return n}const BAe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],FAe=5;var wn;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(wn||(wn={}));class $Ae{constructor(e){this.replacer=e}encode(e){return(e.type===wn.EVENT||e.type===wn.ACK)&&S3(e)?this.encodeAsBinary({type:e.type===wn.EVENT?wn.BINARY_EVENT:wn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===wn.BINARY_EVENT||e.type===wn.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=LAe(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}}function kk(n){return Object.prototype.toString.call(n)==="[object Object]"}class H9 extends Xr{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===wn.BINARY_EVENT;r||t.type===wn.BINARY_ACK?(t.type=r?wn.EVENT:wn.ACK,this.reconstructor=new zAe(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(z9(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(wn[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===wn.BINARY_EVENT||r.type===wn.BINARY_ACK){const s=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(s,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(t+1)==="/"){const s=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(s,t)}else r.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const s=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}r.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(H9.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case wn.CONNECT:return kk(t);case wn.DISCONNECT:return t===void 0;case wn.CONNECT_ERROR:return typeof t=="string"||kk(t);case wn.EVENT:case wn.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&BAe.indexOf(t[0])===-1);case wn.ACK:case wn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class zAe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=UAe(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const HAe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:H9,Encoder:$Ae,get PacketType(){return wn},protocol:FAe},Symbol.toStringTag,{value:"Module"}));function Ra(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const VAe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class nq extends Xr{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ra(e,"open",this.onopen.bind(this)),Ra(e,"packet",this.onpacket.bind(this)),Ra(e,"error",this.onerror.bind(this)),Ra(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,i,s;if(VAe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:wn.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,h=t.pop();this._registerAckCallback(u,h),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:wn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case wn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case wn.EVENT:case wn.BINARY_EVENT:this.onevent(e);break;case wn.ACK:case wn.BINARY_ACK:this.onack(e);break;case wn.DISCONNECT:this.ondisconnect();break;case wn.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...i){r||(r=!0,t.packet({type:wn.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:wn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function f1(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}f1.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};f1.prototype.reset=function(){this.attempts=0};f1.prototype.setMin=function(n){this.ms=n};f1.prototype.setMax=function(n){this.max=n};f1.prototype.setJitter=function(n){this.jitter=n};class VA extends Xr{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,f4(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new f1({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||HAe;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new RAe(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Ra(t,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Ra(t,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),t.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ra(e,"ping",this.onping.bind(this)),Ra(e,"data",this.ondata.bind(this)),Ra(e,"error",this.onerror.bind(this)),Ra(e,"close",this.onclose.bind(this)),Ra(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){d4(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new nq(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const sm={};function A3(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=PAe(n,e.path||"/socket.io"),r=t.source,i=t.id,s=t.path,o=sm[i]&&s in sm[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new VA(r,e):(sm[i]||(sm[i]=new VA(r,e)),c=sm[i]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(A3,{Manager:VA,Socket:nq,io:A3,connect:A3});const Ku=Oo("socket-core",()=>{const n=Ae(null),e=Ae(!1),t=Ae(!1),r=Ae("http://localhost:2223");let i=null,s=!1;const o=async E=>{if(console.log("🔧 connect() called - existing socket:",!!n.value,"connected:",n.value?.connected),n.value)return console.log("🔌 Socket already exists, waiting for connection..."),await w();E&&(r.value=E),t.value=!0;try{return console.log("🔧 Creating NEW socket connection to:",r.value),n.value=A3(r.value,{transports:["websocket","polling"],autoConnect:!0}),n.value.on("connect",()=>{e.value=!0,t.value=!1,console.log("🔗 Connected to socket server:",n.value?.id),y()}),n.value.on("disconnect",x=>{e.value=!1,console.log("🔌 Disconnected from socket server:",x)}),n.value.on("connect_error",x=>{t.value=!1,console.error("🚫 Socket connection error:",x)}),n.value}catch(x){throw t.value=!1,console.error("Failed to initialize socket connection:",x),x}},a=()=>{n.value&&(n.value.disconnect(),n.value=null,e.value=!1,t.value=!1,d(),b())},c=(E,x)=>{if(!n.value){console.warn("🚫 Cannot add event handler - socket not connected");return}fn(n.value).on(E,x)},l=(E,x)=>{if(!n.value)return;fn(n.value).off(E,x)},u=(E,...x)=>n.value?.connected?(fn(n.value).emit(E,...x),!0):(console.warn("🚫 Cannot emit - socket not connected"),!1),h=(E=3e4)=>{i||(i=window.setInterval(()=>{e.value&&u("heartbeat")},E),console.log(`💓 Started heartbeat (${E}ms)`))},d=()=>{i&&(clearInterval(i),i=null,console.log("💔 Stopped heartbeat"))},f=()=>{console.log("🚪 Browser beforeunload - cleaning up socket"),g()},p=()=>{console.log("🚪 Page pagehide - cleaning up socket"),g()},m=()=>{document.visibilityState==="hidden"?(console.log("👁️ Page hidden - user may be leaving"),n.value?.connected&&u("user-state:page-hidden")):document.visibilityState==="visible"&&(console.log("👁️ Page visible - user returned"),n.value?.connected&&u("user-state:page-visible"))},g=()=>{if(n.value?.connected){const E=fn(n.value);E.emit("user-state:offline"),E.disconnect(),console.log("🧹 Socket disconnected on page unload")}d(),b()},y=()=>{s||typeof window>"u"||(window.addEventListener("beforeunload",f),window.addEventListener("pagehide",p),document.addEventListener("visibilitychange",m),s=!0,console.log("👂 Added browser close detection listeners"))},b=()=>{!s||typeof window>"u"||(window.removeEventListener("beforeunload",f),window.removeEventListener("pagehide",p),document.removeEventListener("visibilitychange",m),s=!1,console.log("🧹 Removed browser close detection listeners"))},w=(E=5e3)=>new Promise((x,C)=>{if(n.value?.connected){x(n.value);return}const R=setTimeout(()=>{C(new Error("Socket connection timeout"))},E),k=()=>{n.value?.connected?(clearTimeout(R),x(n.value)):setTimeout(k,100)};k()});return{socket:Qo(n),connected:Qo(e),connecting:Qo(t),serverUrl:Qo(r),connect:o,disconnect:a,on:c,off:l,emit:u,startHeartbeat:h,stopHeartbeat:d,addBrowserCloseListeners:y,removeBrowserCloseListeners:b,cleanupOnPageUnload:g,waitForConnection:w}}),WA=Object.freeze(Object.defineProperty({__proto__:null,useSocketCore:Ku},Symbol.toStringTag,{value:"Module"})),rq=Oo("ui",()=>{const n=Ae(!0);return{loadingDots:Ee(()=>n.value),setLoadingDots:e=>{n.value=e}}});var js={USER:0,ADMIN:1,ARTIST:2,SUBSCRIBER:3},WAe={ONLINE:1},qAe={BROWSING:3},Ur={HOME:0,VISUALIZER:1,SKETCHES:2,STUDIES:3,PROFILE:4,SETTINGS:5,DASHBOARD:6,PROJECTS:7,PROJECT_DETAIL:8,DESIGN:9,GIST:10,AUDIUS_HOME:11,AUDIUS_PLAYLIST_DETAIL:12,AUDIUS_USER_DETAIL:13,PAGE_NOT_FOUND:14},Ze={NONE:0,SPOTIFY:1,AUDIUS:2,RADIO_PARADISE:3,MICROPHONE:4,FILE:5,BROWSER_AUDIO:6,KEXP:7},Jo={MAIN_MIX:0,MELLOW_MIX:1,ROCK_MIX:2,GLOBAL_MIX:3},x8={RADIO_PARADISE:{[Jo.MAIN_MIX]:{mp3:"http://stream.radioparadise.com/aac-320",flac:"http://stream.radioparadise.com/flac"},[Jo.MELLOW_MIX]:{mp3:"http://stream.radioparadise.com/mellow-320",flac:"http://stream.radioparadise.com/mellow-flac"},[Jo.ROCK_MIX]:{mp3:"http://stream.radioparadise.com/rock-320",flac:"http://stream.radioparadise.com/rock-flac"},[Jo.GLOBAL_MIX]:{mp3:"http://stream.radioparadise.com/global-320",flac:"http://stream.radioparadise.com/global-flac"}},KEXP:{mp3:"https://kexp.streamguys1.com/kexp160.aac"}};function jAe(n){return n.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}var Ea={PAGE:1,AUDIO_SOURCE:2,AUDIO_TRACK:3,AUDIO_POSITION:4,GEO_LAT:5,GEO_LNG:6,DEVICE_TYPE:7,CLIENT_PLATFORM:8,ACTIVITY_TYPE:10,SHADER_ID:11,PROJECT_ID:12},pn={CORE_CONNECTED:"core:connected",CORE_DISCONNECTED:"core:disconnected",CORE_AUTHENTICATED:"core:authenticated",CORE_ERROR:"core:error",SPACE_JOINED:"space:joined",SPACE_LEFT:"space:left",SPACE_USER_JOINED:"space:user:joined",SPACE_USER_LEFT:"space:user:left",SPACE_PROJECT_CREATE:"space:project:create",SPACE_PROJECT_UPDATE:"space:project:update",SPACE_PROJECT_DELETE:"space:project:delete",SPACE_PROJECT_ARCHIVE:"space:project:archive",SPACE_BUCKET_CREATE:"space:bucket:create",SPACE_BUCKET_UPDATE:"space:bucket:update",SPACE_BUCKET_DELETE:"space:bucket:delete",SPACE_TASK_CREATE:"space:task:create",SPACE_TASK_UPDATE:"space:task:update",SPACE_TASK_DELETE:"space:task:delete",SPACE_TASK_MOVE:"space:task:move",SPACE_STUDY_CREATE:"space:study:create",SPACE_STUDY_UPDATE:"space:study:update",SPACE_STUDY_DELETE:"space:study:delete",SPACE_USER_FOLLOW:"space:user:follow",SPACE_USER_UNFOLLOW:"space:user:unfollow",SPACE_COLLABORATION_INVITE:"space:collaboration:invite",SPACE_COLLABORATION_REMOVE:"space:collaboration:remove",SPACE_COLLABORATION_ACCEPT:"space:collaboration:accept",SPACE_COLLABORATION_REJECT:"space:collaboration:reject",SPACE_CURSOR_MOVE:"space:cursor:move",SPACE_DRAG_START:"space:drag:start",SPACE_DRAG_END:"space:drag:end",SPACE_TYPING_START:"space:typing:start",SPACE_TYPING_END:"space:typing:end",SPACE_PRESENCE_UPDATE:"space:presence:update",SPACE_MESSAGE_SEND:"space:message:create",SPACE_MESSAGE_UPDATE:"space:message:update",SPACE_MESSAGE_DELETE:"space:message:delete",SPACE_NOTIFICATION_CREATE:"space:notification:create",SPACE_NOTIFICATION_UPDATE:"space:notification:update",SPACE_NOTIFICATION_DELETE:"space:notification:delete"},nGe={CORE:[pn.CORE_CONNECTED,pn.CORE_DISCONNECTED,pn.CORE_AUTHENTICATED,pn.CORE_ERROR],SPACE_MANAGEMENT:[pn.SPACE_JOINED,pn.SPACE_LEFT,pn.SPACE_USER_JOINED,pn.SPACE_USER_LEFT],SPACE_PROJECT_CRUD:[pn.SPACE_PROJECT_CREATE,pn.SPACE_PROJECT_UPDATE,pn.SPACE_PROJECT_DELETE,pn.SPACE_PROJECT_ARCHIVE],SPACE_BUCKET_CRUD:[pn.SPACE_BUCKET_CREATE,pn.SPACE_BUCKET_UPDATE,pn.SPACE_BUCKET_DELETE],SPACE_TASK_CRUD:[pn.SPACE_TASK_CREATE,pn.SPACE_TASK_UPDATE,pn.SPACE_TASK_DELETE,pn.SPACE_TASK_MOVE],SPACE_STUDY_CRUD:[pn.SPACE_STUDY_CREATE,pn.SPACE_STUDY_UPDATE,pn.SPACE_STUDY_DELETE],SPACE_SOCIAL:[pn.SPACE_USER_FOLLOW,pn.SPACE_USER_UNFOLLOW,pn.SPACE_COLLABORATION_INVITE,pn.SPACE_COLLABORATION_REMOVE],SPACE_ACTIVITY:[pn.SPACE_CURSOR_MOVE,pn.SPACE_DRAG_START,pn.SPACE_DRAG_END,pn.SPACE_TYPING_START,pn.SPACE_TYPING_END],SPACE_MESSAGING:[pn.SPACE_MESSAGE_SEND,pn.SPACE_MESSAGE_UPDATE,pn.SPACE_MESSAGE_DELETE],SPACE_NOTIFICATIONS:[pn.SPACE_NOTIFICATION_CREATE,pn.SPACE_NOTIFICATION_UPDATE,pn.SPACE_NOTIFICATION_DELETE]},S8={audioSource:Ze.NONE,lastTrack:void 0,visualizerSpeed:1,disableFlashing:!1,neonMode:!1,showMenuLabels:!0,alwaysShowTrack:!1,shuffleDesigns:!1,infinityPlay:!0,preferLossless:!1};let A8=null;const Jw=async()=>{if(!A8)try{const{useSessionLogger:n}=await Ct(async()=>{const{useSessionLogger:e}=await import("./session-logger-CAMlmg_a.js");return{useSessionLogger:e}},[]);A8=n()}catch(n){console.warn("Session logger not available:",n)}return A8},Lf=Oo("auth",()=>{const n=l5(),e=J0(),t=py(),r=XSe(),i=rq(),s=Ae(localStorage.getItem("authToken")),o=Ae(localStorage.getItem("refreshToken")),a=Ae(JSON.parse(localStorage.getItem("user")||"null")),c=Ae(!1),l=Ae(!1),u=Ae(!1),h=Ae(JSON.parse(localStorage.getItem("originalUser")||"null")),d=Ae(JSON.parse(localStorage.getItem("viewingAsUser")||"null")),f=Ae(localStorage.getItem("isImpersonating")==="true"),p=Ee(()=>!!s.value&&!!a.value),m=Ee(()=>f.value&&d.value?d.value.walletAddress:a.value?.walletAddress||null),g=Ee(()=>{const v=f.value?h.value:a.value;return p.value&&v?.walletAddress===Nm&&v?.role===js.ADMIN}),y=Ee(()=>f.value&&d.value?d.value:a.value),b=Ee(()=>p.value&&y.value?.role===js.ARTIST),w=Ee(()=>p.value&&y.value?.role===js.SUBSCRIBER),E=Ee(()=>p.value&&[js.SUBSCRIBER,js.ARTIST,js.ADMIN].includes(y.value?.role)),x=Ee(()=>p.value&&[js.ARTIST,js.ADMIN].includes(y.value?.role)),C=Ee(()=>!p.value||!y.value?.role?null:{[js.USER]:"USER",[js.ADMIN]:"ADMIN",[js.ARTIST]:"ARTIST",[js.SUBSCRIBER]:"SUBSCRIBER"}[y.value.role]||"UNKNOWN");wt(s,v=>{v?localStorage.setItem("authToken",v):localStorage.removeItem("authToken")}),wt(o,v=>{v?localStorage.setItem("refreshToken",v):localStorage.removeItem("refreshToken")}),wt(a,v=>{v?localStorage.setItem("user",JSON.stringify(v)):localStorage.removeItem("user")},{deep:!0}),wt(h,v=>{v?localStorage.setItem("originalUser",JSON.stringify(v)):localStorage.removeItem("originalUser")},{deep:!0}),wt(d,v=>{v?localStorage.setItem("viewingAsUser",JSON.stringify(v)):localStorage.removeItem("viewingAsUser")},{deep:!0}),wt(f,v=>{v?localStorage.setItem("isImpersonating","true"):localStorage.removeItem("isImpersonating")});async function R(){const v=localStorage.getItem("authToken");if(!v)return!1;try{const S=Ku();return S.connected||await S.connect(),await S.waitForConnection(),new Promise(T=>{let L=null,U=!1;const V=({user:I})=>{if(!U){U=!0,a.value=I;try{typeof window<"u"&&window.postMessage&&s.value&&(console.log("🔗 Extension handoff for existing auth..."),window.postMessage({type:"KALEIDOSYNC_AUTH_HANDOFF",source:"kaleidosync-page",authToken:s.value,refreshToken:o.value,user:I,timestamp:Date.now()},"*"),console.log("✅ Extension auth handoff sent for existing session"))}catch(N){console.warn("Extension handoff failed (extension may not be installed):",N)}F(),T(!0)}},W=()=>{U||(U=!0,k(),F(),T(!1))},F=()=>{L&&(clearTimeout(L),L=null),S.off("auth:success",V),S.off("auth:invalid",W)};S.on("auth:success",V),S.on("auth:invalid",W),console.log("🔑 Sending token validation request..."),S.emit("auth:validate-token",v),L=setTimeout(()=>{U||(U=!0,F(),console.log("Socket validation timeout, falling back to HTTP"),eh.get("/api/auth/validate").then(I=>{I.data?.user?(a.value=I.data.user,T(!0)):T(!1)}).catch(I=>{I.response?.status===401&&k(),T(!1)}))},5e3)})}catch(S){return console.error("Token validation error:",S),!1}}function k(){s.value=null,o.value=null,a.value=null,localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user");const v=Ku();v.off("auth:success"),v.off("auth:challenge-response"),v.off("auth:error"),v.off("auth:invalid")}async function _(){try{u.value=!0,console.log("🟢 User intent flag set to TRUE - explicit signIn called"),l.value=!0;const v=await Jw();if(v&&v.logEvent(v.SessionEventType.AUTH_LOGIN_ATTEMPT,{method:"wallet",timestamp:Date.now()}),r.isConnected)console.log("💰 Wallet already connected - proceeding with authentication"),t.message("Using connected wallet for authentication...");else{if(console.log("💰 No wallet connected - opening AppKit modal"),t.message("Please connect your wallet..."),await r.connect(),!r.isConnected){t.error("Wallet connection was cancelled or failed");return}t.success("Wallet connected successfully!")}let S=r.address.value;if(!S&&(console.log("💰 Wallet connected but no address - opening modal to reconnect"),t.message("Please reconnect your wallet..."),await r.connect(),S=r.address.value,!S)){t.error("Unable to connect wallet - please try again");return}const T=Ku();return T.connected||await T.connect(),await T.waitForConnection(),new Promise((L,U)=>{const V=async({message:N})=>{try{if(!u.value){console.log("🚫 Wallet signing blocked - no user intent (flag is false)"),T.off("auth:challenge-response",V),T.off("auth:success",W),T.off("auth:error",F),U(new Error("No user intent to sign in"));return}console.log("✅ User intent flag is TRUE - proceeding with signing"),console.log("🔑 Challenge received:",N.substring(0,50)+"..."),t.message("Please sign the message in your wallet...");const $=await r.signMessage(N);t.message("Verifying signature..."),T.emit("auth:wallet-verify",{message:N,signature:$,walletAddress:S})}catch($){$.message?.includes("rejected")?t.error("Signature rejected"):t.error("Failed to sign message"),I(),U($)}},W=async({user:N,accessToken:$,refreshToken:j})=>{s.value=$,o.value=j,a.value=N,t.message(`Welcome ${N.walletAddress.slice(0,8)}!`);const te=await Jw();te&&te.logEvent(te.SessionEventType.AUTH_LOGIN_SUCCESS,{method:"wallet",walletAddress:N.walletAddress,userRole:N.role,timestamp:Date.now()});try{typeof window<"u"&&window.postMessage&&(console.log("🔗 Attempting extension auth handoff..."),window.postMessage({type:"KALEIDOSYNC_AUTH_HANDOFF",source:"kaleidosync-page",authToken:$,refreshToken:j,user:N,timestamp:Date.now()},"*"),console.log("✅ Extension auth handoff message sent"))}catch(ce){console.warn("Extension handoff failed (extension may not be installed):",ce)}e.value.path==="/"&&(console.log("🚀 Socket auth successful, redirecting to",Ik),n.replace(Ik)),I(),L()},F=async({message:N})=>{t.error(`Authentication failed: ${N}`);const $=await Jw();$&&$.logEvent($.SessionEventType.AUTH_LOGIN_FAILURE,{method:"wallet",error:N,timestamp:Date.now()}),I(),U(new Error(N))},I=()=>{T.off("auth:challenge-response",V),T.off("auth:success",W),T.off("auth:error",F),console.log("🔴 User intent flag reset to FALSE - auth cleanup"),u.value=!1};T.on("auth:challenge-response",V),T.on("auth:success",W),T.on("auth:error",F),t.message("Getting authentication challenge..."),console.log("🔑 Requesting challenge for:",S),T.emit("auth:wallet-challenge",{walletAddress:S})})}catch(v){throw console.error("Sign in failed:",v),t.error("Authentication failed"),v}finally{l.value=!1}}async function A(){try{const v=await Jw();v&&v.logEvent(v.SessionEventType.AUTH_LOGOUT,{walletAddress:m.value,timestamp:Date.now()}),Ku().emit("auth:logout"),await eh.post("/api/auth/logout").catch(()=>{})}finally{k();try{const{useSpotify:v}=await Ct(async()=>{const{useSpotify:W}=await Promise.resolve().then(()=>Lq);return{useSpotify:W}},void 0),{useSources:S}=await Ct(async()=>{const{useSources:W}=await Promise.resolve().then(()=>pTe);return{useSources:W}},void 0),{useSketches:T}=await Ct(async()=>{const{useSketches:W}=await Promise.resolve().then(()=>MTe);return{useSketches:W}},void 0),L=v(),U=S(),V=T();L.reset(),U.reset(),V.reset()}catch(v){console.warn("Failed to reset stores on logout:",v)}t.message("Signed out successfully"),n.replace("/")}}async function M(){c.value=!0,i.setLoadingDots(!0);try{await R()}finally{c.value=!1,i.setLoadingDots(!1)}}async function D(v){if(!g.value)throw t.error("Admin access required for impersonation"),new Error("Admin access required");if(f.value)throw t.error("Already impersonating a user"),new Error("Already impersonating");try{h.value={...a.value};const S=await eh.post("/api/admin/impersonation/validate",{walletAddress:v});if(!S.data.valid)throw new Error(S.data.message||"Cannot impersonate this user");d.value=S.data.user,f.value=!0;const T=Ku();T.connected&&T.emit("admin:start-impersonation",{targetWalletAddress:v}),t.success(`Now viewing as ${v.slice(0,8)}...`)}catch(S){throw console.error("Failed to start impersonation:",S),t.error(S.message||"Failed to start impersonation"),S}}async function P(){if(f.value)try{const v=Ku();v.connected&&v.emit("admin:stop-impersonation"),h.value=null,d.value=null,f.value=!1,t.success("Stopped impersonation - back to admin view")}catch(v){console.error("Failed to stop impersonation:",v),t.error("Failed to stop impersonation")}}return{authToken:Ee(()=>s.value),refreshToken:Ee(()=>o.value),user:Ee(()=>a.value),walletAddress:m,loading:Ee(()=>c.value),isAuthenticating:Ee(()=>l.value),isAuthenticated:p,isAdmin:g,isArtist:b,isSubscriber:w,isPaidTier:E,isArtistOrAdmin:x,userRole:C,signIn:_,signOut:A,initialize:M,currentUser:y,originalUser:Ee(()=>h.value),viewingAsUser:Ee(()=>d.value),isImpersonating:Ee(()=>f.value),startImpersonation:D,stopImpersonation:P}}),GAe=Object.freeze(Object.defineProperty({__proto__:null,useAuth:Lf},Symbol.toStringTag,{value:"Module"})),Dk="https://kaleidosync-api-690ea0e25a5b.herokuapp.com";let Sl=null;function KAe(){if(Sl)return Sl;Sl=Lr.create({baseURL:Dk,timeout:1e4,headers:{"Content-Type":"application/json"}});const n=Lf(),e=py();return Sl.interceptors.request.use(t=>{const r=n.authToken;return r&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${r}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t))),Sl.interceptors.response.use(t=>t,async t=>{const r=t.config;if(t.response){const{status:i,data:s,config:o}=t.response;if(i===401&&!r._retry){const a=o?.url?.includes("/api/spotify"),c=o?.url?.includes("/api/auth/");if(!a&&!c){r._retry=!0;const l=localStorage.getItem("refreshToken");if(l)try{console.log("🔄 Attempting token refresh...");const u=await Lr.post(`${Dk}/api/auth/refresh`,{refreshToken:l});if(u.status===200){const{accessToken:h,refreshToken:d}=u.data;return localStorage.setItem("authToken",h),localStorage.setItem("refreshToken",d),r.headers.Authorization=`Bearer ${h}`,console.log("✅ Token refreshed, retrying original request"),Sl(r)}}catch(u){console.error("❌ Token refresh failed:",u)}e.error("Session expired. Please sign in again."),n.signOut()}}else i===403?e.error("Access denied."):i===404?e.error("Resource not found."):i===500?e.error("Server error. Please try again later."):s?.message&&e.error(s.message)}else t.request?e.error("Network error. Please check your connection."):e.error("An unexpected error occurred.");return Promise.reject(t)}),Sl}function om(){return Sl||KAe()}const eh={get:(n,e)=>om().get(n,e),post:(n,e,t)=>om().post(n,e,t),put:(n,e,t)=>om().put(n,e,t),patch:(n,e,t)=>om().patch(n,e,t),delete:(n,e)=>om().delete(n,e)},Uf=Oo("raf",()=>{const n=Tt([]),e=Tt({});let t=Ae(0),r=null,i=Ae(0),s=[];const o=Ae(window.performance.now()),a=Ae(Date.now()),c=Ae(60),l={},u=Ae([]);function h(y,b){if(d(b?.id),b.tick=y,b.easing=b.easing||OJ,b.start=window.performance.now(),t.value===0&&f(),b.duration)return n.value.push(b),new Promise(w=>{l[b.id]=w});e.value[b.id]=b}function d(y){delete e.value[y],delete l[y];const b=n.value.findIndex(w=>w.id===y);b!==-1&&n.value.splice(b,1)}function f(){p(),t.value=window.requestAnimationFrame(g)}function p(){window.cancelAnimationFrame(t.value)}function m(y){if(r===null){r=y;return}const b=180;s.push(1e3/(y-r)),s.length>b&&s.splice(0,s.length-b);let w=0;for(let E=0;E<s.length;E++)w+=s[E];c.value=Math.floor(w/s.length),r=y}function g(y){i.value++,o.value=y,a.value=Date.now(),u.value.forEach(w=>{w(o.value)}),n.value.forEach((w,E)=>{const x=o.value-(w?.start||0),C=w.duration||1/0,R=Ul(w.easing?.(x/C));w.tick?.(o.value,R,x),R===1&&(n.value.splice(E,1),l?.[w.id]?.(),delete l[w.id])});const b=Object.keys(e.value);b.forEach(w=>{const E=e.value[w],x=o.value-(E?.start||0),C=E.duration||1/0,R=Ul(E.easing?.(x/C));E.tick?.(a,R,x),R===1&&(l?.[E.id]?.(),delete e.value[w],delete l[w])}),m(o.value),n.value.length>0||b.length>0?t.value=window.requestAnimationFrame(g):t.value=0,u.value=[]}return{add:h,remove:d,start:f,stop:p,time:o,now:a,map:e,queue:n,frameRate:c,preFrame:u,frameNumber:i,$reset(){p(),n.value.length=0,Object.keys(e.value).forEach(y=>delete e.value[y]),Object.keys(l).forEach(y=>delete l[y]),s=[],r=null,t.value=0}}}),iq=Oo("device",()=>{const n=Ae(TJ()),e=Ae(IJ()),t=Ae(CJ());return{isSafari:n,isPWA:e,isMobile:t}});function sq(n){n.artworkBlobUrls&&n.artworkBlobUrls.forEach(e=>{try{URL.revokeObjectURL(e)}catch(t){console.warn("🎨 Failed to revoke artwork blob URL:",t)}})}function Lk(n){n.forEach(e=>sq(e))}const V9=Oo("queue",()=>{const n=Ae({tracks:[],currentIndex:-1,isShuffled:!1,shuffledIndices:[],repeatMode:"none",isPlaying:!1}),e=Ee(()=>{const{tracks:w,currentIndex:E,isShuffled:x,shuffledIndices:C}=n.value;if(w.length===0||E===-1)return null;const R=x&&C.length>0?C[E]:E;return w[R]||null}),t=Ee(()=>{const{tracks:w,currentIndex:E,repeatMode:x}=n.value;return w.length===0?!1:x==="queue"||x==="track"?!0:E<w.length-1}),r=Ee(()=>{const{tracks:w,currentIndex:E,repeatMode:x}=n.value;return w.length===0?!1:x==="queue"?!0:w.length>0}),i=Ee(()=>n.value.tracks.length),s=Ee(()=>n.value.currentIndex+1),o=Ee(()=>n.value.tracks.length===0);function a(){const w=Array.from({length:n.value.tracks.length},(E,x)=>x);for(let E=w.length-1;E>0;E--){const x=Math.floor(Math.random()*(E+1));[w[E],w[x]]=[w[x],w[E]]}return w}function c(w,E=0){Lk(n.value.tracks),n.value.tracks=[...w],n.value.currentIndex=Math.max(0,Math.min(E,w.length-1)),n.value.isShuffled&&(n.value.shuffledIndices=a()),console.log(`🎵 Queue set with ${w.length} tracks, starting at index ${n.value.currentIndex}`)}function l(w,E=!1){const x=Array.isArray(w)?w:[w];if(E&&x.length>0){const C=n.value.currentIndex+1;n.value.tracks.splice(C,0,...x),n.value.currentIndex=C}else n.value.tracks.push(...x),n.value.currentIndex===-1&&n.value.tracks.length>0&&(n.value.currentIndex=0);n.value.isShuffled&&(n.value.shuffledIndices=a()),console.log(`🎵 Added ${x.length} track(s) to queue`)}function u(w){if(w<0||w>=n.value.tracks.length)return;const E=n.value.tracks[w];sq(E),n.value.tracks.splice(w,1),w<n.value.currentIndex?n.value.currentIndex--:w===n.value.currentIndex&&n.value.currentIndex>=n.value.tracks.length&&(n.value.currentIndex=n.value.tracks.length-1),n.value.isShuffled&&(n.value.shuffledIndices=a())}function h(){Lk(n.value.tracks),n.value.tracks=[],n.value.currentIndex=-1,n.value.shuffledIndices=[],n.value.isPlaying=!1,console.log("🎵 Queue cleared")}function d(w){w<0||w>=n.value.tracks.length||(n.value.currentIndex=w,console.log(`🎵 Jumped to track ${w+1} of ${n.value.tracks.length}`))}function f(){const{tracks:w,currentIndex:E,repeatMode:x,isShuffled:C,shuffledIndices:R}=n.value;if(w.length===0)return;if(x==="track"){console.log("🎵 Repeat track mode - staying on current track");return}let k=E+1;if(k>=w.length)if(x==="queue")k=0;else return;n.value.currentIndex=k,console.log(`🎵 Next track: ${k+1} of ${w.length}`)}async function p(){const{tracks:w,currentIndex:E,repeatMode:x}=n.value;if(w.length===0)return;try{const{useAudio:R}=await Ct(async()=>{const{useAudio:A}=await import("./audio-_CqgTru1.js");return{useAudio:A}},__vite__mapDeps([41,42])),k=R();if((k.currentPosition||0)<1e4)console.log("🎵 Going to previous track (<10s in)");else{console.log("🎵 Restarting current track (>10s in)"),k.seek(0);return}}catch(R){console.warn("Could not check audio position for previous track logic:",R)}let C=E-1;C<0&&(x==="queue"?C=w.length-1:C=0),n.value.currentIndex=C,console.log(`🎵 Previous track: ${C+1} of ${w.length}`)}function m(){n.value.isShuffled=!n.value.isShuffled,n.value.isShuffled?n.value.shuffledIndices=a():n.value.shuffledIndices=[],console.log(`🎵 Shuffle ${n.value.isShuffled?"enabled":"disabled"}`)}function g(){const w=["none","queue","track"],x=(w.indexOf(n.value.repeatMode)+1)%w.length;n.value.repeatMode=w[x],console.log(`🎵 Repeat mode: ${n.value.repeatMode}`)}function y(){const w=n.value.isPlaying;n.value.isPlaying=!w,console.log(`🎵 ${n.value.isPlaying?"Playing":"Paused"}`)}wt(e,async w=>{if(!(!n.value.isPlaying||!w))try{const{useAudio:E}=await Ct(async()=>{const{useAudio:R}=await import("./audio-_CqgTru1.js");return{useAudio:R}},__vite__mapDeps([41,42])),x=E();if(w.source===Ze.SPOTIFY){console.log("🎵 Queue: Spotify track navigation - handled by Spotify store");return}!x.currentTrackId||x.currentTrackId!==w.sourceId?(console.log("🎵 Queue: Track navigation - loading new track:",w.title),await x.playTrack(w)||console.warn("🎵 Queue: Failed to load track during navigation:",w.title)):console.log("🎵 Queue: Track navigation - same track already loaded:",w.title)}catch(E){console.warn("Queue: Could not load track during navigation:",E)}}),wt(()=>n.value.isPlaying,async w=>{try{const{useAudio:E}=await Ct(async()=>{const{useAudio:C}=await import("./audio-_CqgTru1.js");return{useAudio:C}},__vite__mapDeps([41,42])),x=E();if(w){const C=e.value;C?C.source===Ze.SPOTIFY?console.log("🎵 Queue: Spotify track playing - handled by Spotify store"):!x.currentTrackId||x.currentTrackId!==C.sourceId?(console.log("🎵 Queue: Initial play - loading and playing new track:",C.title),await x.playTrack(C)||console.warn("🎵 Queue: Failed to load track:",C.title)):(console.log("🎵 Queue: Resuming current track:",C.title),x.play()):x.play()}else{const C=e.value;C&&C.source===Ze.SPOTIFY?console.log("🎵 Queue: Spotify track pausing - handled by Spotify store"):x.pause()}}catch(E){console.warn("Queue: Could not control audio playback:",E)}});function b(){console.log("🎵 Resetting queue store state"),h(),n.value.repeatMode="none",n.value.isShuffled=!1,n.value.shuffledIndices=[]}return{queue:Ee(()=>n.value),currentTrack:e,hasNext:t,hasPrevious:r,queueLength:i,queuePosition:s,isQueueEmpty:o,setQueue:c,addToQueue:l,removeFromQueue:u,clearQueue:h,jumpToTrack:d,nextTrack:f,previousTrack:p,toggleShuffle:m,toggleRepeat:g,togglePlayPause:y,reset:b}}),Pl=Object.freeze(Object.defineProperty({__proto__:null,useQueue:V9},Symbol.toStringTag,{value:"Module"})),p4=Oo("viewport",()=>{const n=Ae(window.innerWidth),e=Ae(window.innerHeight),t=Ee(()=>n.value/e.value),r=Ae(window.devicePixelRatio),i=Ae(Lu(-1,-1)),s=Ae(Lu(-1,-1)),o=Ae("ontouchstart"in window),a=Ae(0),c=Ae(Lu(0,0)),{isFullscreen:l,exit:u,enter:h,isSupported:d}=uZ();async function f(w){a.value+=w}function p(w,E){c.value=Lu(w,E)}function m(){n.value=window.innerWidth,e.value=window.innerHeight,r.value=window.devicePixelRatio,o.value="ontouchstart"in window,sM("--viewport-width",`${n.value}px`),sM("--viewport-height",`${e.value}px`)}function g(w){const E=w.clientX,x=w.clientY;s.value=Lu(E,x)}function y(){const{x:w,y:E}=s.value;s.value=Lu(w,E)}function b(){l.value?u():h()}return m(),window.addEventListener("resize",m),document.body.addEventListener("pointerdown",w=>{const[E,x]=[w.clientX,w.clientY];i.value=Lu(E,x),y()}),{width:n,height:e,dpr:r,aspectRatio:t,clicked:i,mouse:s,triggerMouse:y,toggleFullscreen:b,fullscreenSupported:d,mouseMove:g,scrollY:a,scrollPosition:c,onScroll:f,setScrollPosition:p}}),YAe=Oo("popover",()=>{const n=p4(),e=Ae(!1),t=Tt(null),r=Ae(""),i=Ae(""),s=Ae(null);wt(()=>e.value,h=>{h||(s.value=null)});const o=Ee(()=>{const{x:h,y:d}=n.clicked;return Lu(h-15,d+15)}),a=Ee(()=>{const{x:h,y:d}=o.value;return`translateX(${h}px) translateY(${d}px) scale(${e.value?1:0})`});function c(h=""){return e.value=!0,i.value=h,new Promise(d=>{t.value=d})}function l(){e.value=!1,t.value?.(r.value),r.value="",i.value=""}function u(h){e.value=!0,s.value=h}return{visible:e,position:o,transform:a,getText:c,inputText:r,inputTextKey:i,acceptText:l,editUniform:u,uniformKey:s}}),Ii=[];for(let n=0;n<256;++n)Ii.push((n+256).toString(16).slice(1));function XAe(n,e=0){return(Ii[n[e+0]]+Ii[n[e+1]]+Ii[n[e+2]]+Ii[n[e+3]]+"-"+Ii[n[e+4]]+Ii[n[e+5]]+"-"+Ii[n[e+6]]+Ii[n[e+7]]+"-"+Ii[n[e+8]]+Ii[n[e+9]]+"-"+Ii[n[e+10]]+Ii[n[e+11]]+Ii[n[e+12]]+Ii[n[e+13]]+Ii[n[e+14]]+Ii[n[e+15]]).toLowerCase()}let C8;const ZAe=new Uint8Array(16);function JAe(){if(!C8){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");C8=crypto.getRandomValues.bind(crypto)}return C8(ZAe)}const QAe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Uk={randomUUID:QAe};function eCe(n,e,t){if(Uk.randomUUID&&!n)return Uk.randomUUID();n=n||{};const r=n.random??n.rng?.()??JAe();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,XAe(r)}function tCe(n,e={}){const t=Ae(eCe()),{autoStart:r,duration:i,id:s}={autoStart:!0,...e},o=Ee(()=>s??t.value),{add:a,remove:c}=Uf();return No(()=>{r&&a(n,{id:o.value,duration:i})}),X_(()=>{c(o.value)}),{start(){a(n,{id:o.value,duration:i})},stop(){c(o.value)}}}var nCe={value:()=>{}};function oq(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new C3(t)}function C3(n){this._=n}function rCe(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}C3.prototype=oq.prototype={constructor:C3,on:function(n,e){var t=this._,r=rCe(n+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(n=r[s]).type)&&(i=iCe(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(n=r[s]).type)t[i]=Bk(t[i],n.name,e);else if(e==null)for(i in t)t[i]=Bk(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new C3(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function iCe(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function Bk(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=nCe,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var B0=0,km=0,am=0,aq=1e3,Vb,Dm,Wb=0,gf=0,m4=0,F2=typeof performance=="object"&&performance.now?performance:Date,cq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function W9(){return gf||(cq(sCe),gf=F2.now()+m4)}function sCe(){gf=0}function qb(){this._call=this._time=this._next=null}qb.prototype=lq.prototype={constructor:qb,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?W9():+t)+(e==null?0:+e),!this._next&&Dm!==this&&(Dm?Dm._next=this:Vb=this,Dm=this),this._call=n,this._time=t,qA()},stop:function(){this._call&&(this._call=null,this._time=1/0,qA())}};function lq(n,e,t){var r=new qb;return r.restart(n,e,t),r}function oCe(){W9(),++B0;for(var n=Vb,e;n;)(e=gf-n._time)>=0&&n._call.call(void 0,e),n=n._next;--B0}function Fk(){gf=(Wb=F2.now())+m4,B0=km=0;try{oCe()}finally{B0=0,cCe(),gf=0}}function aCe(){var n=F2.now(),e=n-Wb;e>aq&&(m4-=e,Wb=n)}function cCe(){for(var n,e=Vb,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Vb=t);Dm=n,qA(r)}function qA(n){if(!B0){km&&(km=clearTimeout(km));var e=n-gf;e>24?(n<1/0&&(km=setTimeout(Fk,n-F2.now()-m4)),am&&(am=clearInterval(am))):(am||(Wb=F2.now(),am=setInterval(aCe,aq)),B0=1,cq(Fk))}}function $k(n,e,t){var r=new qb;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var jA="http://www.w3.org/1999/xhtml";const zk={svg:"http://www.w3.org/2000/svg",xhtml:jA,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function g4(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),zk.hasOwnProperty(e)?{space:zk[e],local:n}:n}function lCe(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===jA&&e.documentElement.namespaceURI===jA?e.createElement(n):e.createElementNS(t,n)}}function uCe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function uq(n){var e=g4(n);return(e.local?uCe:lCe)(e)}function hCe(){}function q9(n){return n==null?hCe:function(){return this.querySelector(n)}}function dCe(n){typeof n!="function"&&(n=q9(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),c,l,u=0;u<o;++u)(c=s[u])&&(l=n.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new Za(r,this._parents)}function fCe(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function pCe(){return[]}function hq(n){return n==null?pCe:function(){return this.querySelectorAll(n)}}function mCe(n){return function(){return fCe(n.apply(this,arguments))}}function gCe(n){typeof n=="function"?n=mCe(n):n=hq(n);for(var e=this._groups,t=e.length,r=[],i=[],s=0;s<t;++s)for(var o=e[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&(r.push(n.call(c,c.__data__,l,o)),i.push(c));return new Za(r,i)}function dq(n){return function(){return this.matches(n)}}function fq(n){return function(e){return e.matches(n)}}var yCe=Array.prototype.find;function wCe(n){return function(){return yCe.call(this.children,n)}}function vCe(){return this.firstElementChild}function bCe(n){return this.select(n==null?vCe:wCe(typeof n=="function"?n:fq(n)))}var _Ce=Array.prototype.filter;function ECe(){return Array.from(this.children)}function xCe(n){return function(){return _Ce.call(this.children,n)}}function SCe(n){return this.selectAll(n==null?ECe:xCe(typeof n=="function"?n:fq(n)))}function ACe(n){typeof n!="function"&&(n=dq(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new Za(r,this._parents)}function pq(n){return new Array(n.length)}function CCe(){return new Za(this._enter||this._groups.map(pq),this._parents)}function jb(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}jb.prototype={constructor:jb,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function TCe(n){return function(){return n}}function ICe(n,e,t,r,i,s){for(var o=0,a,c=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):t[o]=new jb(n,s[o]);for(;o<c;++o)(a=e[o])&&(i[o]=a)}function MCe(n,e,t,r,i,s,o){var a,c,l=new Map,u=e.length,h=s.length,d=new Array(u),f;for(a=0;a<u;++a)(c=e[a])&&(d[a]=f=o.call(c,c.__data__,a,e)+"",l.has(f)?i[a]=c:l.set(f,c));for(a=0;a<h;++a)f=o.call(n,s[a],a,s)+"",(c=l.get(f))?(r[a]=c,c.__data__=s[a],l.delete(f)):t[a]=new jb(n,s[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(d[a])===c&&(i[a]=c)}function RCe(n){return n.__data__}function PCe(n,e){if(!arguments.length)return Array.from(this,RCe);var t=e?MCe:ICe,r=this._parents,i=this._groups;typeof n!="function"&&(n=TCe(n));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=r[l],h=i[l],d=h.length,f=NCe(n.call(u,u&&u.__data__,l,r)),p=f.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=c[l]=new Array(d);t(u,h,m,g,y,f,e);for(var b=0,w=0,E,x;b<p;++b)if(E=m[b]){for(b>=w&&(w=b+1);!(x=g[w])&&++w<p;);E._next=x||null}}return o=new Za(o,r),o._enter=a,o._exit=c,o}function NCe(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function OCe(){return new Za(this._exit||this._groups.map(pq),this._parents)}function kCe(n,e,t){var r=this.enter(),i=this,s=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?s.remove():t(s),r&&i?r.merge(i).order():i}function DCe(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var l=t[c],u=r[c],h=l.length,d=a[c]=new Array(h),f,p=0;p<h;++p)(f=l[p]||u[p])&&(d[p]=f);for(;c<i;++c)a[c]=t[c];return new Za(a,this._parents)}function LCe(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function UCe(n){n||(n=BCe);function e(h,d){return h&&d?n(h.__data__,d.__data__):!h-!d}for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s){for(var o=t[s],a=o.length,c=i[s]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(e)}return new Za(i,this._parents).order()}function BCe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function FCe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function $Ce(){return Array.from(this)}function zCe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function HCe(){let n=0;for(const e of this)++n;return n}function VCe(){return!this.node()}function WCe(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,o=i.length,a;s<o;++s)(a=i[s])&&n.call(a,a.__data__,s,i);return this}function qCe(n){return function(){this.removeAttribute(n)}}function jCe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function GCe(n,e){return function(){this.setAttribute(n,e)}}function KCe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function YCe(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function XCe(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function ZCe(n,e){var t=g4(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?jCe:qCe:typeof e=="function"?t.local?XCe:YCe:t.local?KCe:GCe)(t,e))}function mq(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function JCe(n){return function(){this.style.removeProperty(n)}}function QCe(n,e,t){return function(){this.style.setProperty(n,e,t)}}function e7e(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function t7e(n,e,t){return arguments.length>1?this.each((e==null?JCe:typeof e=="function"?e7e:QCe)(n,e,t??"")):F0(this.node(),n)}function F0(n,e){return n.style.getPropertyValue(e)||mq(n).getComputedStyle(n,null).getPropertyValue(e)}function n7e(n){return function(){delete this[n]}}function r7e(n,e){return function(){this[n]=e}}function i7e(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function s7e(n,e){return arguments.length>1?this.each((e==null?n7e:typeof e=="function"?i7e:r7e)(n,e)):this.node()[n]}function gq(n){return n.trim().split(/^|\s+/)}function j9(n){return n.classList||new yq(n)}function yq(n){this._node=n,this._names=gq(n.getAttribute("class")||"")}yq.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function wq(n,e){for(var t=j9(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function vq(n,e){for(var t=j9(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function o7e(n){return function(){wq(this,n)}}function a7e(n){return function(){vq(this,n)}}function c7e(n,e){return function(){(e.apply(this,arguments)?wq:vq)(this,n)}}function l7e(n,e){var t=gq(n+"");if(arguments.length<2){for(var r=j9(this.node()),i=-1,s=t.length;++i<s;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?c7e:e?o7e:a7e)(t,e))}function u7e(){this.textContent=""}function h7e(n){return function(){this.textContent=n}}function d7e(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function f7e(n){return arguments.length?this.each(n==null?u7e:(typeof n=="function"?d7e:h7e)(n)):this.node().textContent}function p7e(){this.innerHTML=""}function m7e(n){return function(){this.innerHTML=n}}function g7e(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function y7e(n){return arguments.length?this.each(n==null?p7e:(typeof n=="function"?g7e:m7e)(n)):this.node().innerHTML}function w7e(){this.nextSibling&&this.parentNode.appendChild(this)}function v7e(){return this.each(w7e)}function b7e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _7e(){return this.each(b7e)}function E7e(n){var e=typeof n=="function"?n:uq(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function x7e(){return null}function S7e(n,e){var t=typeof n=="function"?n:uq(n),r=e==null?x7e:typeof e=="function"?e:q9(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function A7e(){var n=this.parentNode;n&&n.removeChild(this)}function C7e(){return this.each(A7e)}function T7e(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function I7e(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function M7e(n){return this.select(n?I7e:T7e)}function R7e(n){return arguments.length?this.property("__data__",n):this.node().__data__}function P7e(n){return function(e){n.call(this,e,this.__data__)}}function N7e(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function O7e(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,s;t<i;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function k7e(n,e,t){return function(){var r=this.__on,i,s=P7e(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=t),i.value=e;return}}this.addEventListener(n.type,s,t),i={type:n.type,name:n.name,value:e,listener:s,options:t},r?r.push(i):this.__on=[i]}}function D7e(n,e,t){var r=N7e(n+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?k7e:O7e,i=0;i<s;++i)this.each(a(r[i],e,t));return this}function bq(n,e,t){var r=mq(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function L7e(n,e){return function(){return bq(this,n,e)}}function U7e(n,e){return function(){return bq(this,n,e.apply(this,arguments))}}function B7e(n,e){return this.each((typeof e=="function"?U7e:L7e)(n,e))}function*F7e(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var $7e=[null];function Za(n,e){this._groups=n,this._parents=e}function Fy(){return new Za([[document.documentElement]],$7e)}function z7e(){return this}Za.prototype=Fy.prototype={constructor:Za,select:dCe,selectAll:gCe,selectChild:bCe,selectChildren:SCe,filter:ACe,data:PCe,enter:CCe,exit:OCe,join:kCe,merge:DCe,selection:z7e,order:LCe,sort:UCe,call:FCe,nodes:$Ce,node:zCe,size:HCe,empty:VCe,each:WCe,attr:ZCe,style:t7e,property:s7e,classed:l7e,text:f7e,html:y7e,raise:v7e,lower:_7e,append:E7e,insert:S7e,remove:C7e,clone:M7e,datum:R7e,on:D7e,dispatch:B7e,[Symbol.iterator]:F7e};var H7e=oq("start","end","cancel","interrupt"),V7e=[],_q=0,Hk=1,GA=2,T3=3,Vk=4,KA=5,I3=6;function y4(n,e,t,r,i,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;W7e(n,t,{name:e,index:r,group:i,on:H7e,tween:V7e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:_q})}function G9(n,e){var t=rc(n,e);if(t.state>_q)throw new Error("too late; already scheduled");return t}function Yc(n,e){var t=rc(n,e);if(t.state>T3)throw new Error("too late; already running");return t}function rc(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function W7e(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=lq(s,0,t.time);function s(l){t.state=Hk,t.timer.restart(o,t.delay,t.time),t.delay<=l&&o(l-t.delay)}function o(l){var u,h,d,f;if(t.state!==Hk)return c();for(u in r)if(f=r[u],f.name===t.name){if(f.state===T3)return $k(o);f.state===Vk?(f.state=I3,f.timer.stop(),f.on.call("interrupt",n,n.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=I3,f.timer.stop(),f.on.call("cancel",n,n.__data__,f.index,f.group),delete r[u])}if($k(function(){t.state===T3&&(t.state=Vk,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=GA,t.on.call("start",n,n.__data__,t.index,t.group),t.state===GA){for(t.state=T3,i=new Array(d=t.tween.length),u=0,h=-1;u<d;++u)(f=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(i[++h]=f);i.length=h+1}}function a(l){for(var u=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=KA,1),h=-1,d=i.length;++h<d;)i[h].call(n,u);t.state===KA&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){t.state=I3,t.timer.stop(),delete r[e];for(var l in r)return;delete n.__transition}}function q7e(n,e){var t=n.__transition,r,i,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){s=!1;continue}i=r.state>GA&&r.state<KA,r.state=I3,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[o]}s&&delete n.__transition}}function j7e(n){return this.each(function(){q7e(this,n)})}function G7e(n,e){var t,r;return function(){var i=Yc(this,n),s=i.tween;if(s!==t){r=t=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function K7e(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var s=Yc(this,n),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:t},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}s.tween=i}}function Y7e(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=rc(this.node(),t).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===n)return o.value;return null}return this.each((e==null?G7e:K7e)(t,n,e))}function K9(n,e,t){var r=n._id;return n.each(function(){var i=Yc(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return rc(i,r).value[e]}}function Eq(n,e){var t;return(typeof e=="number"?gi:e instanceof tf?Y3:(t=tf(e))?(e=t,Y3):AB)(n,e)}function X7e(n){return function(){this.removeAttribute(n)}}function Z7e(n){return function(){this.removeAttributeNS(n.space,n.local)}}function J7e(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttribute(n);return o===i?null:o===r?s:s=e(r=o,t)}}function Q7e(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===i?null:o===r?s:s=e(r=o,t)}}function e9e(n,e,t){var r,i,s;return function(){var o,a=t(this),c;return a==null?void this.removeAttribute(n):(o=this.getAttribute(n),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,a)))}}function t9e(n,e,t){var r,i,s;return function(){var o,a=t(this),c;return a==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,a)))}}function n9e(n,e){var t=g4(n),r=t==="transform"?tJ:Eq;return this.attrTween(n,typeof e=="function"?(t.local?t9e:e9e)(t,r,K9(this,"attr."+n,e)):e==null?(t.local?Z7e:X7e)(t):(t.local?Q7e:J7e)(t,r,e))}function r9e(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function i9e(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function s9e(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&i9e(n,s)),t}return i._value=e,i}function o9e(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&r9e(n,s)),t}return i._value=e,i}function a9e(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=g4(n);return this.tween(t,(r.local?s9e:o9e)(r,e))}function c9e(n,e){return function(){G9(this,n).delay=+e.apply(this,arguments)}}function l9e(n,e){return e=+e,function(){G9(this,n).delay=e}}function u9e(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?c9e:l9e)(e,n)):rc(this.node(),e).delay}function h9e(n,e){return function(){Yc(this,n).duration=+e.apply(this,arguments)}}function d9e(n,e){return e=+e,function(){Yc(this,n).duration=e}}function f9e(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?h9e:d9e)(e,n)):rc(this.node(),e).duration}function p9e(n,e){if(typeof e!="function")throw new Error;return function(){Yc(this,n).ease=e}}function m9e(n){var e=this._id;return arguments.length?this.each(p9e(e,n)):rc(this.node(),e).ease}function g9e(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Yc(this,n).ease=t}}function y9e(n){if(typeof n!="function")throw new Error;return this.each(g9e(this._id,n))}function w9e(n){typeof n!="function"&&(n=dq(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new Ql(r,this._parents,this._name,this._id)}function v9e(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=e[a],l=t[a],u=c.length,h=o[a]=new Array(u),d,f=0;f<u;++f)(d=c[f]||l[f])&&(h[f]=d);for(;a<r;++a)o[a]=e[a];return new Ql(o,this._parents,this._name,this._id)}function b9e(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function _9e(n,e,t){var r,i,s=b9e(e)?G9:Yc;return function(){var o=s(this,n),a=o.on;a!==r&&(i=(r=a).copy()).on(e,t),o.on=i}}function E9e(n,e){var t=this._id;return arguments.length<2?rc(this.node(),t).on.on(n):this.each(_9e(t,n,e))}function x9e(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function S9e(){return this.on("end.remove",x9e(this._id))}function A9e(n){var e=this._name,t=this._id;typeof n!="function"&&(n=q9(n));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,l=s[o]=new Array(c),u,h,d=0;d<c;++d)(u=a[d])&&(h=n.call(u,u.__data__,d,a))&&("__data__"in u&&(h.__data__=u.__data__),l[d]=h,y4(l[d],e,t,d,l,rc(u,t)));return new Ql(s,this._parents,e,t)}function C9e(n){var e=this._name,t=this._id;typeof n!="function"&&(n=hq(n));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,h=0;h<l;++h)if(u=c[h]){for(var d=n.call(u,u.__data__,h,c),f,p=rc(u,t),m=0,g=d.length;m<g;++m)(f=d[m])&&y4(f,e,t,m,d,p);s.push(d),o.push(u)}return new Ql(s,o,e,t)}var T9e=Fy.prototype.constructor;function I9e(){return new T9e(this._groups,this._parents)}function M9e(n,e){var t,r,i;return function(){var s=F0(this,n),o=(this.style.removeProperty(n),F0(this,n));return s===o?null:s===t&&o===r?i:i=e(t=s,r=o)}}function xq(n){return function(){this.style.removeProperty(n)}}function R9e(n,e,t){var r,i=t+"",s;return function(){var o=F0(this,n);return o===i?null:o===r?s:s=e(r=o,t)}}function P9e(n,e,t){var r,i,s;return function(){var o=F0(this,n),a=t(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(n),F0(this,n))),o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,a))}}function N9e(n,e){var t,r,i,s="style."+e,o="end."+s,a;return function(){var c=Yc(this,n),l=c.on,u=c.value[s]==null?a||(a=xq(e)):void 0;(l!==t||i!==u)&&(r=(t=l).copy()).on(o,i=u),c.on=r}}function O9e(n,e,t){var r=(n+="")=="transform"?eJ:Eq;return e==null?this.styleTween(n,M9e(n,r)).on("end.style."+n,xq(n)):typeof e=="function"?this.styleTween(n,P9e(n,r,K9(this,"style."+n,e))).each(N9e(this._id,n)):this.styleTween(n,R9e(n,r,e),t).on("end.style."+n,null)}function k9e(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function D9e(n,e,t){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&k9e(n,o,t)),r}return s._value=e,s}function L9e(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,D9e(n,e,t??""))}function U9e(n){return function(){this.textContent=n}}function B9e(n){return function(){var e=n(this);this.textContent=e??""}}function F9e(n){return this.tween("text",typeof n=="function"?B9e(K9(this,"text",n)):U9e(n==null?"":n+""))}function $9e(n){return function(e){this.textContent=n.call(this,e)}}function z9e(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&$9e(i)),e}return r._value=n,r}function H9e(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,z9e(n))}function V9e(){for(var n=this._name,e=this._id,t=Sq(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)if(c=o[l]){var u=rc(c,e);y4(c,n,t,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ql(r,this._parents,n,t)}function W9e(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};t.each(function(){var l=Yc(this,r),u=l.on;u!==n&&(e=(n=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),i===0&&s()})}var q9e=0;function Ql(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function Sq(){return++q9e}var fl=Fy.prototype;Ql.prototype={constructor:Ql,select:A9e,selectAll:C9e,selectChild:fl.selectChild,selectChildren:fl.selectChildren,filter:w9e,merge:v9e,selection:I9e,transition:V9e,call:fl.call,nodes:fl.nodes,node:fl.node,size:fl.size,empty:fl.empty,each:fl.each,on:E9e,attr:n9e,attrTween:a9e,style:O9e,styleTween:L9e,text:F9e,textTween:H9e,remove:S9e,tween:Y7e,delay:u9e,duration:f9e,ease:m9e,easeVarying:y9e,end:W9e,[Symbol.iterator]:fl[Symbol.iterator]};function j9e(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var G9e={time:null,delay:0,duration:250,ease:j9e};function K9e(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function Y9e(n){var e,t;n instanceof Ql?(e=n._id,n=n._name):(e=Sq(),(t=G9e).time=W9(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&y4(c,n,e,l,o,t||K9e(c,e));return new Ql(r,this._parents,n,e)}Fy.prototype.interrupt=j7e;Fy.prototype.transition=Y9e;function Lm(n,e,t){this.k=n,this.x=e,this.y=t}Lm.prototype={constructor:Lm,scale:function(n){return n===1?this:new Lm(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Lm(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Lm.prototype;function X9e(n,e,t){return Ee(()=>{try{const[i,s,o,a,c]=n.value.split(":").map(d=>d.trim()),l=e.value?.replace(t.value,"").split(`
`).length||0,u=parseInt(o,10)-l+1;if(u===-1)return{};const h=c.split(`
`)[0];return{line:u,column:parseInt(s,10),message:h,problem:a}}catch{return{}}})}const Aq=`
vec4 k_hue(vec4 color, float shift) {
  float I = dot(color, vec4(0.596, -0.275, -0.321, 0.0));
  float Q = dot(color, vec4(0.212, -0.523, 0.311, 0.0));
  float hue = atan(Q, I);
  float chroma = sqrt(I * I + Q * Q);
  hue += shift;
  Q = chroma * sin(hue);
  I = chroma * cos(hue);
  vec4 yIQ = vec4(dot(color, vec4(0.299, 0.587, 0.114, 0.0)), I, Q, 0.0);
  color.r = dot(yIQ, vec4(1.0, 0.956, 0.621, 0.0));
  color.g = dot(yIQ, vec4(1.0, -0.272, -0.647, 0.0));
  color.b = dot(yIQ, vec4(1.0, -1.107, 1.704, 0.0));
  return color;
}
`,Cq=`
vec2 k_kale(vec2 uv, vec2 offset, float sides) {
  float angle = atan(uv.y, uv.x);
  angle = ((angle / 3.14159265359) + 1.0) * 0.5;
  angle = mod(angle, 1.0 / sides) * sides;
  angle = -abs(2.0 * angle - 1.0) + 1.0;
  angle = angle;
  float y = length(uv);
  angle = angle * (y);
  return vec2(angle, y) - offset;
}
`,Tq=`
vec4 k_orb(vec2 uv, float size, vec2 position, vec3 color, float contrast) {
  return pow(vec4(size / length(uv + position) * color, 1.), vec4(contrast));
}
`,Iq=`
vec3 k_rainbow(float progress, float stretch, float offset) {
  return vec3(cos(vec3(-2, 0, -1) * 3.14159265359 * 2. / 3. + (2. * 3.14159265359) * (progress * stretch) + offset) * 0.5 + 0.5);
}
`,Mq=`
mat2 k_rotate2d(float angle) {
  return mat2(cos(angle), -sin(angle), sin(angle), cos(angle));
}
`,Rq=`
vec2 k_swap(vec2 uv, vec2 uv2, bool val, bool valTween, float valTweenProgress) {
  return valTween
    ? (val ? mix(uv, uv2, valTweenProgress) : mix(uv2, uv, valTweenProgress))
    : (val ? uv2 : uv);
}
`,Pq=`
vec2 k_sphere (vec3 pos) {
  // Convert to spherical coordinates
  float theta = atan(pos.z, pos.x);  // longitude
  float phi = acos(pos.y);           // latitude
  
  // Map to UV space [0,1]
  float u = (theta + PI) / (2.0 * PI);  // longitude: -π to π → 0 to 1
  float v = phi / PI;                    // latitude: 0 to π → 0 to 1
  
  return vec2(u, v);
}
`,Nq=`
vec3 k_uv_to_sphere(vec2 uv) {
  // Convert UV coordinates to spherical coordinates
  float theta = uv.x * TWO_PI;  // longitude: 0 to 1 → 0 to 2π
  float phi = uv.y * PI;        // latitude: 0 to 1 → 0 to π
  
  // Convert spherical to cartesian coordinates
  float x = sin(phi) * cos(theta);
  float y = cos(phi);
  float z = sin(phi) * sin(theta);
  
  return vec3(x, y, z);
}
`,Oq=`
vec2 k_uv() {
  vec2 uv = 2.0 * vUv - 1.0;
  uv.x *= resolution.x / resolution.y;
  return uv;
}
`,Wk=Object.freeze(Object.defineProperty({__proto__:null,k_hue:Aq,k_kale:Cq,k_orb:Tq,k_rainbow:Iq,k_rotate2d:Mq,k_sphere:Pq,k_swap:Rq,k_uv:Oq,k_uv_to_sphere:Nq},Symbol.toStringTag,{value:"Module"})),qk=`void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,Z9e=`void main () {
  gl_FragColor = vec4(.8, .2, .6, 1.);
}`,jk={k_hue:Aq,k_kale:Cq,k_orb:Tq,k_rainbow:Iq,k_rotate2d:Mq,k_swap:Rq,k_uv:Oq,k_sphere:Pq,k_uv_to_sphere:Nq};Object.keys(jk).reduce((n,e)=>(n+=`${jk[e]}`,n),`
`);const J9e=Object.keys(Wk).reduce((n,e)=>n+`
${Wk[e]}`,"")+`
`;function Q9e(n,e){const t=p4(),r=Tt({}),i=Ae(""),s=Ae(""),o=["precision highp float;","#define PI 3.14159265359","#define TWO_PI 2. * PI","varying vec2 vUv;"].join(`
`),a=Ee(()=>n.width||t.width),c=Ee(()=>n.height||t.height),l=Ee(()=>n.dpr||t.dpr),u=Ee(()=>a.value/c.value),h=Ae(!1),d=Ee(()=>({width:`${a.value}px`,height:`${c.value}px`}));let f="",p="";function m(){const R=window.performance.now()/1e3,k=a.value*l.value,_=c.value*l.value;r.value={resolution:{value:[k,_]},time:{value:R},stream:{value:n.stream},volume:{value:n.volume},iResolution:{value:[k,_,k/_]},iTime:{value:R},iStream:{value:n.stream},iVolume:{value:n.volume},...n.uniforms||{},...Object.keys(n.uniforms).reduce((A,M)=>(typeof n.uniforms[M].value=="boolean"&&(A[`${M}Tween`]={value:!1},A[`${M}TweenProgress`]={value:0}),A),{})},p="",f="",h.value=!0}function g(R){h.value===!1&&m();const k=n.width||t.width,_=n.height||t.height,A=n.dpr||t.dpr,M=n.time!==void 0?n.time/1e3:R/1e3,D=k*A,P=_*A;r.value.resolution.value=[D,P],r.value.time.value=M,r.value.stream.value=n.stream||M,r.value.volume.value=n?.volume??1,r.value.iResolution.value=[D,P,D/P],r.value.iTime.value=M,r.value.iStream.value=n.stream||M,r.value.iVolume.value=n?.volume??1}function y(){Object.keys(n.uniforms).forEach(R=>{typeof r.value[R]?.value>"u"||(r.value[R].value=n.uniforms[R].value)})}function b(){const R=Object.keys(r.value).map(k=>{const _=r.value?.[k]?.value;return Array.isArray(_)?`${k}:${_.length===2?"vec2":"vec3"}`:typeof _=="number"?`${k}:float`:typeof _=="boolean"?`${k}:bool`:`${k}:unknown`}).sort().join(",");return R!==p&&(f=Object.keys(r.value).reduce((k,_)=>Array.isArray(r.value?.[_]?.value)?r.value[_]?.value?.length===2?k+`
uniform vec2 ${_};`:k+`
uniform vec3 ${_};`:typeof r.value?.[_]?.value=="number"?k+`
uniform float ${_};`:typeof r.value?.[_]?.value=="boolean"?k+`
uniform bool ${_};`:k,""),p=R),f}function w(R){if(e.value&&e.value.material&&s.value!==o+R+qk)try{s.value=o+R+qk,e.value.material.vertexShader=s.value,e.value.material.needsUpdate=!0}catch(k){console.log(k)}}function E(R){if(e.value&&e.value.material){let k=n.shader||Z9e;if(/void\s+mainImage\s*\(\s*out\s+vec4\s+\w+\s*,\s*in\s+vec2\s+\w+\s*\)/.test(k)){const M=k.split(`
`),D=[],P=[];let v=!1,S=0;for(const U of M){const V=U.trim();if(!v&&/void\s+\w+\s*\(/.test(V)){v=!0,P.push(U),S+=(U.match(/\{/g)||[]).length,S-=(U.match(/\}/g)||[]).length;continue}v?(P.push(U),S+=(U.match(/\{/g)||[]).length,S-=(U.match(/\}/g)||[]).length,S<=0&&(v=!1,S=0)):D.push(U)}const T=D.join(`
`),L=P.join(`
`);k=`
${T}

${L}

void main() {
  mainImage(gl_FragColor, gl_FragCoord.xy);
}`}const A=o+R+J9e+k;if(A!==i.value)try{i.value=A,e.value.material.fragmentShader=i.value,e.value.material.needsUpdate=!0}catch(M){console.log(M)}}}function x(R){try{g(R),y()}catch(k){console.log(k)}}function C(){if(!e.value)return;m();const R=b();w(R),E(R),e.value.material.needsUpdate=!0}return wt(()=>n.shader,()=>C()),wt(()=>n.uniforms,()=>C()),No(()=>{m();const R=b();w(R),E(R),x(window.performance.now())}),{initializeUniforms:m,setInternalUniforms:g,setExternalUniforms:y,buildUniformDeclarations:b,buildVertexShader:w,buildFragmentShader:E,vertexShader:s,fragmentShader:i,uniforms:r,width:a,height:c,dpr:l,artboard:d,aspectRatio:u,render:x}}function eTe(n){const e=Ae(""),t=Ae(!1),r=Ae(""),i=X9e(e,r,n);function s(o){const a=o.getContext();if(!a)return;const c=a.compileShader;a.compileShader=function(l){if(c.call(this,l),!a.getShaderParameter(l,a.COMPILE_STATUS)){const h=a.getShaderInfoLog(l);e.value=h,r.value=a.getShaderSource(l);const d=a.getShaderParameter(l,a.SHADER_TYPE);a.VERTEX_SHADER;return}e.value="",r.value=""},t.value=!0,console.log("Shader error detection setup complete")}return{error:i,setup:s,isSetup:t}}function tTe(n){const e=Ae(0),t=Ae(0),r=Ee(()=>.2),i=Ae(.2),s=Ae(0),o=Ae([]),a=gi(0,1),c=gi(0,Math.PI/3),l=gi(.2,1),u=Uf(),h=Ee(()=>e.value>0),d=Ae(!1);function f(b){o.value=b.map((w,E)=>E)}wt(()=>n?.sketches,b=>{f(b),y()},{immediate:!0}),wt(()=>n.scrollY,b=>{s.value=-b/-500,y()}),wt(()=>n.visible,b=>{d.value===!1&&(d.value=!0,!b)||(u.remove("zoom"),u.add((w,E)=>{const x=b?E:1-E;i.value=l(x),e.value=a(x),t.value=c(x)},{duration:500,id:"zoom"}))},{immediate:!0});function p(b){const w=o.value[b],E=m(w),[x,C,R]=E,k=C+s.value,_=Math.sqrt(x*x+k*k),A=.5,M=0,D=1.85,P=Math.max(_/A,.75),v=D-P*(D-M);return Math.max(M,v)*e.value}function m(b){const w=r.value/.2*.14,E=r.value/.2*.17;if(b<0){let R=Math.abs(b)-1,k=-1;for(;R>=0;){const _=k%2===0,A=_?3:2;if(R<A){const M=R,D=_?(M-1)*E:(M-.5)*E,P=-k*w;return[D,P,.01]}R-=A,k--}return[0,0,0]}let x=b,C=0;for(;x>=0;){const R=C%2===0,k=R?3:2;if(x<k){const _=x,A=R?(_-1)*E:(_-.5)*E,M=-C*w;return[A,M,.01]}x-=k,C++}return[0,0,.01]}function g(b){const w=o.value[b],[E,x,C]=m(w),_=1-p(b);return[E*(1.5-_),x,C]}function y(){o.value.forEach((b,w)=>{const[E,x,C]=m(b),R=x+s.value;if(R>1){const k=Math.max(...o.value);o.value[w]=k+1}else if(R<-2){const k=Math.min(...o.value);o.value[w]=k-1}})}return{updateVirtualIndices:y,getPosition:g,getScale:p,manualScaleFactor:e,rotation:t,zoom:i,scrollOffset:s,shouldRender:h}}function nTe(n){const e=X9(n),t=Ee(()=>typeof e.value=="number"),r=Ee(()=>typeof e.value=="string"),i=Ee(()=>typeof r.value&&e.value.length===0),s=Ee(()=>typeof e.value=="boolean");return Ee(()=>{const a=e.value;return t.value?a:i.value||s.value?i.value||a?1:0:a?parseFloat(a):0})}function kq(n){const e=n?.track||n;if(!e)return null;console.log(n);const t=e.duration_ms,r=n.progress_ms||0;return{id:`spotify:${e.id}`,source:Ze.SPOTIFY,sourceId:e.id,title:e.name,artist:e.artists?.map(i=>i.name).join(", ")||"Unknown Artist",album:e.album?.name,duration:t,durationSeconds:t?Math.floor(t/1e3):void 0,position:r,progress:t?r/t:0,artwork:{small:e.album?.images?.[2]?.url,medium:e.album?.images?.[1]?.url,large:e.album?.images?.[0]?.url},isPlaying:n.isPlaying!==!1,rawData:n}}function rTe(n){if(!n)return null;const e=n.duration?n.duration*1e3:void 0,t=n.audiusId||n.id||n.track_id||"unknown";return{id:`audius:${t}`,source:Ze.AUDIUS,sourceId:t.toString(),title:n.title||n.track_name||n.name||"Unknown Title",artist:n.artist||n.user?.name||n.user?.handle||"Unknown Artist",album:n.album,duration:e,durationSeconds:n.duration,genre:n.genre,year:n.releaseDate?new Date(n.releaseDate).getFullYear():void 0,releaseDate:n.releaseDate,tags:n.tags,playCount:n.playCount||n.play_count,artwork:{small:n.artwork?.small||n.artwork?.["150x150"],medium:n.artwork?.medium||n.artwork?.["480x480"],large:n.artwork?.large||n.artwork?.["1000x1000"]},isPlaying:!0,rawData:n}}function iTe(n){if(!n)return null;const e=n.duration?n.duration*1e3:void 0;return{id:`radio:${n.source}:${n.sourceTrackId||`${n.artist}-${n.title}`}`,source:n.source==="RADIO_PARADISE"?Ze.RADIO_PARADISE:Ze.KEXP,sourceId:n.sourceTrackId||`${n.artist}-${n.title}`,title:n.title,artist:n.artist,album:n.album,duration:e,durationSeconds:n.duration,genre:n.genre,year:n.year,label:n.label,isPlaying:!0,rawData:n}}function sTe(n,e){if(!n)return null;const t=n.title||n.name||n.track_name||"Unknown Title",r=n.artist||n.artist_name||n.artists?.[0]?.name||"Unknown Artist";return{id:`${e}:${n.id||`${r}-${t}`}`,source:e,sourceId:n.id||`${r}-${t}`,title:t,artist:r,album:n.album||n.album_name,duration:n.duration_ms||(n.duration?n.duration*1e3:void 0),durationSeconds:n.duration||(n.duration_ms?Math.floor(n.duration_ms/1e3):void 0),rawData:n}}function oTe(n){switch(n){case Ze.SPOTIFY:return kq;case Ze.AUDIUS:return rTe;case Ze.RADIO_PARADISE:case Ze.KEXP:return iTe;default:return e=>sTe(e,n)}}function rGe(n,e){return oTe(e)(n)}function aTe(n,e="rem"){const t=X9(n);return Ee(()=>{if(typeof t.value=="string"){const i=t.value.split(" "),s=i.length,o=(s?i:[1,1,1,1]).map(a=>parseFloat(a)+e);if(s===1)return`${o[0]} ${o[0]} ${o[0]} ${o[0]}`;if(s===2)return`${o[0]} ${o[1]} ${o[0]} ${o[1]}`;if(s===3)return`${o[0]} ${o[1]} ${o[2]} ${o[1]}`;if(s===0||s===4)return`${o[0]} ${o[1]} ${o[2]} ${o[3]}`}return t.value})}function cTe(n,e=10){const t=Ae("fit-content"),r=Ae("fit-content"),i=Ee(()=>({"min-width":t.value,"max-width":r.value}));function s(){const o=parseFloat(window.getComputedStyle(n.value).width);t.value=`${o+e}px`,r.value=`${o+2*e}px`}return wt(n,o=>{o&&s()},{immediate:!0}),i}function lTe(n,e="rem"){const t=X9(n);return Ee(()=>`${t.value}${e}`)}const uTe={[Ze.AUDIUS]:{enabled:!0,controls:["play","pause","previoustrack","nexttrack","seekbackward","seekforward"],metadata:!0,supportsQueue:!0},[Ze.FILE]:{enabled:!0,controls:["play","pause","previoustrack","nexttrack","seekbackward","seekforward"],metadata:!0,supportsQueue:!0},[Ze.RADIO_PARADISE]:{enabled:!0,controls:["play","pause"],metadata:!0,supportsQueue:!1},[Ze.KEXP]:{enabled:!0,controls:["play","pause"],metadata:!0,supportsQueue:!1},[Ze.MICROPHONE]:{enabled:!0,controls:["play","pause"],metadata:!1,supportsQueue:!1},[Ze.SPOTIFY]:{enabled:!1,controls:[],metadata:!1,supportsQueue:!1},[Ze.BROWSER_AUDIO]:{enabled:!0,controls:["play","pause"],metadata:!1,supportsQueue:!1},[Ze.NONE]:{enabled:!1,controls:[],metadata:!1,supportsQueue:!1}};function Tu(n){const e=Object.keys(Ze).find(t=>Ze[t]===n);return e?e.replace(/_/g," ").toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"Unknown"}class hTe{constructor(){this.currentConfig=null}async activateForSource(e){const t=uTe[e];if(!t.enabled){console.log(`🎵 MediaSessionManager: ${Tu(e)} - media session disabled`),this.deactivate();return}console.log(`🎵 Activating media session for ${Tu(e)}`),this.clearAllHandlers(),t.controls.includes("play")&&navigator.mediaSession.setActionHandler("play",async()=>{console.log(`🎵 Media key: Play (${Tu(e)})`);try{const{useQueue:r}=await Ct(async()=>{const{useQueue:s}=await Promise.resolve().then(()=>Pl);return{useQueue:s}},void 0),i=r();i.queue.isPlaying||i.togglePlayPause()}catch(r){console.warn("Media key play handler error:",r)}}),t.controls.includes("pause")&&navigator.mediaSession.setActionHandler("pause",async()=>{console.log(`🎵 Media key: Pause (${Tu(e)})`);try{const{useQueue:r}=await Ct(async()=>{const{useQueue:s}=await Promise.resolve().then(()=>Pl);return{useQueue:s}},void 0),i=r();i.queue.isPlaying&&i.togglePlayPause()}catch(r){console.warn("Media key pause handler error:",r)}}),t.controls.includes("previoustrack")&&navigator.mediaSession.setActionHandler("previoustrack",async()=>{console.log(`🎵 Media key: Previous track (${Tu(e)})`);try{const{useQueue:r}=await Ct(async()=>{const{useQueue:s}=await Promise.resolve().then(()=>Pl);return{useQueue:s}},void 0);r().previousTrack()}catch(r){console.warn("Media key previous handler error:",r)}}),t.controls.includes("nexttrack")&&navigator.mediaSession.setActionHandler("nexttrack",async()=>{console.log(`🎵 Media key: Next track (${Tu(e)})`);try{const{useQueue:r}=await Ct(async()=>{const{useQueue:s}=await Promise.resolve().then(()=>Pl);return{useQueue:s}},void 0);r().nextTrack()}catch(r){console.warn("Media key next handler error:",r)}}),t.controls.includes("seekbackward")&&navigator.mediaSession.setActionHandler("seekbackward",async r=>{console.log(`🎵 Media key: Seek backward (${Tu(e)})`,r.seekOffset);try{const{useAudio:i}=await Ct(async()=>{const{useAudio:o}=await import("./audio-_CqgTru1.js");return{useAudio:o}},__vite__mapDeps([41,42]));i().skip(-(r.seekOffset||10))}catch(i){console.warn("Media key seek backward handler error:",i)}}),t.controls.includes("seekforward")&&navigator.mediaSession.setActionHandler("seekforward",async r=>{console.log(`🎵 Media key: Seek forward (${Tu(e)})`,r.seekOffset);try{const{useAudio:i}=await Ct(async()=>{const{useAudio:o}=await import("./audio-_CqgTru1.js");return{useAudio:o}},__vite__mapDeps([41,42]));i().skip(r.seekOffset||10)}catch(i){console.warn("Media key seek forward handler error:",i)}}),this.currentConfig=t}deactivate(){this.currentConfig&&(console.log("🎵 Deactivating media session"),this.clearAllHandlers(),this.currentConfig=null)}getCurrentConfig(){return this.currentConfig}clearAllHandlers(){"mediaSession"in navigator&&["play","pause","previoustrack","nexttrack","seekbackward","seekforward"].forEach(t=>{navigator.mediaSession.setActionHandler(t,null)})}}function dTe(n,e,t=!1){const r=Ee(()=>{switch(n){case Ze.RADIO_PARADISE:e===void 0&&(e=Jo.MAIN_MIX);const o=x8.RADIO_PARADISE[e];return o?t&&o.flac?o.flac:o.mp3:(console.warn(`Invalid Radio Paradise station: ${e}`),null);case Ze.KEXP:return x8.KEXP.mp3;default:return null}}),i=Ee(()=>{if(!r.value)return null;switch(n){case Ze.RADIO_PARADISE:e===void 0&&(e=Jo.MAIN_MIX);const o=x8.RADIO_PARADISE[e];return r.value===o?.flac?"FLAC":"MP3 320k";case Ze.KEXP:return"AAC 160k";default:return null}}),s=Ee(()=>{switch(n){case Ze.RADIO_PARADISE:if(e===void 0)return"Radio Paradise - Main Mix";switch(e){case Jo.MAIN_MIX:return"Radio Paradise - Main Mix";case Jo.MELLOW_MIX:return"Radio Paradise - Mellow Mix";case Jo.ROCK_MIX:return"Radio Paradise - Rock Mix";case Jo.GLOBAL_MIX:return"Radio Paradise - Global Mix";default:return"Radio Paradise"}case Ze.KEXP:return"KEXP";default:return null}});return{streamUrl:r,streamQuality:i,stationName:s}}let T8=null;const fTe=async()=>{if(!T8)try{const{useSessionLogger:n}=await Ct(async()=>{const{useSessionLogger:e}=await import("./session-logger-CAMlmg_a.js");return{useSessionLogger:e}},[]);T8=n()}catch(n){console.warn("Session logger not available:",n)}return T8},Dq={[Ze.SPOTIFY]:"spotify",[Ze.AUDIUS]:"audius",[Ze.MICROPHONE]:"microphone",[Ze.RADIO_PARADISE]:"radio-paradise",[Ze.KEXP]:"kexp",[Ze.FILE]:"upload",[Ze.BROWSER_AUDIO]:"sound",[Ze.NONE]:"sound"},YA=[Ze.SPOTIFY,Ze.AUDIUS,Ze.MICROPHONE,Ze.RADIO_PARADISE,Ze.KEXP,Ze.FILE];function Mi(n){const e=Object.keys(Ze).find(t=>Ze[t]===n);return e?jAe(e):"Unknown"}const $2=Oo("sources",()=>{const n=Lf(),e=l5(),t=Y9(),r=Uf(),i=new hTe;let s=Ae(!1),o=Ae(0),a=Ae(0);(async()=>{try{const{useAudio:pe}=await Ct(async()=>{const{useAudio:Z}=await import("./audio-_CqgTru1.js");return{useAudio:Z}},__vite__mapDeps([41,42])),X=pe();wt(()=>X.playing,Z=>{s.value=Z},{immediate:!0}),wt(()=>X.volume,Z=>{o.value=Z},{immediate:!0}),wt(()=>X.stream,Z=>{a.value=Z},{immediate:!0}),console.log("🔊 Sources: Connected to audio store for volume/stream/playing data")}catch(pe){console.warn("Sources: Could not connect to audio store:",pe)}})();const l=Ae(null),u=Ae(Jo.MAIN_MIX),h=Ee(()=>l.value===Ze.RADIO_PARADISE||l.value===Ze.KEXP?dTe(l.value,u.value,!1):null),d=Ee(()=>l.value!==null?h.value?.stationName.value?h.value.stationName.value:Mi(l.value):null),f=Ee(()=>l.value!==null?Dq[l.value]:"sound"),p=Ee(()=>l.value===Ze.SPOTIFY&&t.playing),m=Ee(()=>t.volume);Ee(()=>l.value===Ze.MICROPHONE?o.value:0);const g=Ee(()=>p.value?m.value:o.value),y=Ae(0),b=Ae(!1);y.value=g.value,wt(()=>g.value,pe=>{b.value||(y.value=pe)});const w=Ee(()=>l.value===Ze.SPOTIFY?t.playing:l.value===Ze.MICROPHONE?!0:s.value),E=gZ(Ee(()=>w.value?0:1),{duration:1e3,transition:PB}),x=Ae(0),C=Ae(0),R=Ae(!1),k=Ee(()=>p.value?t.stream:a.value),_=Ee(()=>k.value>.001&&l.value!==null&&l.value!==Ze.MICROPHONE);wt(()=>_.value,pe=>{if(pe&&!R.value){const X=x.value-k.value;C.value=X,R.value=!0,console.log(`🎯 Stream offset calculated once: ${X.toFixed(3)}`)}}),wt(()=>l.value,(pe,X)=>{if(X!==null&&pe!==X){console.log(`🎯 Stream continuity: switching from ${Mi(X)} to ${Mi(pe)}`),R.value=!1;const Z=y.value||g.value,H=g.value;if(Math.abs(Z-H)>.01){console.log(`🎵 Volume interpolation: ${Z.toFixed(3)} → ${H.toFixed(3)}`),b.value=!0;const oe=gi(Z,H);r.remove("volume-source-transition"),r.add((le,Q)=>{y.value=oe(Q),Q>=1&&(b.value=!1)},{id:"volume-source-transition",duration:750})}else y.value=H,b.value=!1}});const A=Ee(()=>Ul(y.value,E.value,1)),M=Ee(()=>l.value===Ze.MICROPHONE?k.value:k.value+C.value);wt(()=>M.value,pe=>{_.value&&(x.value=pe)});const D=Ee(()=>w.value),P=Ae(!1),v=Ae(!1);async function S(pe){if(P.value){console.warn(`🔄 Source transition already in progress, ignoring switch to ${Mi(pe)}`);return}if(!YA.includes(pe)){console.warn(`Invalid audio source: ${pe}`);return}P.value=!0,v.value=!0;try{const X=l.value;if(X!==pe){console.log(`🔄 Switching from ${Mi(X)} to ${Mi(pe)}`),await N(X);const Z=await fTe();Z&&Z.logEvent(Z.SessionEventType.AUDIO_SOURCE_CHANGE,{fromSource:X,toSource:pe,fromSourceLabel:Mi(X),toSourceLabel:Mi(pe),timestamp:Date.now()})}i.activateForSource(pe),l.value=pe,pe!==Ze.SPOTIFY&&pe!==Ze.NONE&&console.log(`🔊 Selected audio source: ${Mi(pe)}`),pe===Ze.SPOTIFY&&n.user&&(n.user.spotifyProfile?.accessToken?t.initialize():t.getSpotifyTokens()),l.value===Ze.AUDIUS&&e.push("/audius"),(pe===Ze.RADIO_PARADISE||pe===Ze.KEXP)&&await T(pe),pe===Ze.MICROPHONE&&await L(),pe===Ze.FILE&&await U();try{const{useQueue:Z}=await Ct(async()=>{const{useQueue:oe}=await Promise.resolve().then(()=>Pl);return{useQueue:oe}},void 0),H=Z();console.log(`🎵 Post-transition queue verification: ${H.queue.tracks.length} tracks, playing: ${H.queue.isPlaying}`)}catch(Z){console.warn("Could not verify queue state after transition:",Z)}console.log(`✅ Source transition completed: ${Mi(pe)}`)}catch(X){console.error(`❌ Source transition failed to ${Mi(pe)}:`,X),l.value=Ze.NONE,i.deactivate()}finally{P.value=!1,v.value=!1}}async function T(pe){const X=h.value;if(!X?.streamUrl.value){console.warn(`No stream URL available for ${Mi(pe)}`);return}try{const{useAudioAnalyser:Z}=await Ct(async()=>{const{useAudioAnalyser:Q}=await import("./useAudioAnalyser-L8BEAKYW.js");return{useAudioAnalyser:Q}},[]);await Z().audioSystem.initializeAudioElement();const{useAudio:oe}=await Ct(async()=>{const{useAudio:Q}=await import("./audio-_CqgTru1.js");return{useAudio:Q}},__vite__mapDeps([41,42])),le=oe();console.log(`🎵 Setting stream URL: ${X.streamUrl.value}`),console.log(`🎵 Stream quality: ${X.streamQuality.value}`),await le.setSource(X.streamUrl.value),pe===Ze.RADIO_PARADISE&&await W(u.value)}catch(Z){console.error(`Failed to initialize radio source ${Mi(pe)}:`,Z)}}async function L(){try{console.log("🎤 Initializing microphone source...");const{useAudioAnalyser:pe}=await Ct(async()=>{const{useAudioAnalyser:H}=await import("./useAudioAnalyser-L8BEAKYW.js");return{useAudioAnalyser:H}},[]);await pe().initializeMicrophone()?console.log("🎤 Microphone initialized successfully!"):(console.error("🎤 Failed to initialize microphone"),l.value=Ze.NONE)}catch(pe){console.error("🎤 Error initializing microphone:",pe),l.value=Ze.NONE}}async function U(){try{console.log("📁 Initializing file source...");const{useAudioAnalyser:pe}=await Ct(async()=>{const{useAudioAnalyser:Z}=await import("./useAudioAnalyser-L8BEAKYW.js");return{useAudioAnalyser:Z}},[]);await pe().audioSystem.initializeAudioElement(),console.log("📁 File source initialized - ready for file selection")}catch(pe){console.error("📁 Error initializing file source:",pe),l.value=Ze.NONE}}async function V(pe){const X=u.value;l.value===Ze.RADIO_PARADISE&&X!==pe&&(console.log(`🎵 Switching from station ${X} to station ${pe}`),await F(X)),u.value=pe,localStorage.setItem("radioParadiseStation",pe.toString()),console.log(`🎵 Selected Radio Paradise station: ${h.value?.stationName.value}`),l.value===Ze.RADIO_PARADISE&&await T(Ze.RADIO_PARADISE)}async function W(pe){try{const{useSocketCore:X}=await Ct(async()=>{const{useSocketCore:H}=await Promise.resolve().then(()=>WA);return{useSocketCore:H}},void 0),Z=X();console.log(`🎵 Attempting to join Radio Paradise space for station ${pe}`),console.log(`🎵 Socket connected: ${Z.connected}`),Z.connected||(console.log("🎵 Socket not connected, attempting to connect..."),await Z.connect()),Z.connected?(console.log(`🎵 Joining Radio Paradise space for station ${pe}`),Z.off("radio-paradise:track-update",I),Z.on("radio-paradise:track-update",H=>{console.log("🎵 DEBUG: Raw Radio Paradise track update received:",H),I(H)}),Z.emit("radio-paradise:join",{station:pe}),console.log(`🎵 Radio Paradise listeners set up for station ${pe}`)):console.error("🎵 Failed to establish socket connection for Radio Paradise")}catch(X){console.error("Could not join Radio Paradise socket space:",X)}}async function F(pe){try{const{useSocketCore:X}=await Ct(async()=>{const{useSocketCore:oe}=await Promise.resolve().then(()=>WA);return{useSocketCore:oe}},void 0),Z=X(),H=pe??u.value;console.log(`🎵 Leaving Radio Paradise space for station ${H}`),Z.connected&&(Z.emit("radio-paradise:leave",{station:H}),console.log(`🎵 Emitted radio-paradise:leave for station ${H}`)),Z.off("radio-paradise:track-update",I),console.log("🎵 Removed Radio Paradise track update listeners")}catch(X){console.error("Could not leave Radio Paradise socket space:",X)}}async function I(pe){if(console.log("🎵 DEBUG: handleRadioParadiseTrackUpdate called with data:",JSON.stringify(pe,null,2)),v.value){console.log("🎵 Queue locked during source transition, skipping Radio Paradise track update");return}try{if(!pe||!pe.track){console.error("🎵 Invalid Radio Paradise track data - missing track:",pe);return}if(!pe.track.title||!pe.track.artist){console.error("🎵 Invalid Radio Paradise track data - missing title/artist:",pe.track);return}const{useQueue:X}=await Ct(async()=>{const{useQueue:oe}=await Promise.resolve().then(()=>Pl);return{useQueue:oe}},void 0),Z=X();console.log("🎵 DEBUG: Queue store imported successfully");const H={id:`radio-paradise:${pe.station}:${pe.track.songId||`${pe.track.artist}-${pe.track.title}`}`,source:Ze.RADIO_PARADISE,sourceId:pe.track.songId||`${pe.track.artist}-${pe.track.title}`,title:pe.track.title,artist:pe.track.artist,album:pe.track.album,duration:pe.track.duration?pe.track.duration*1e3:void 0,artwork:pe.track.cover?{medium:pe.track.cover,large:pe.track.cover,small:pe.track.cover}:void 0,rawData:pe};console.log("🎵 DEBUG: Created queue track:",JSON.stringify(H,null,2)),Z.setQueue([H],0);try{const{useAudio:oe}=await Ct(async()=>{const{useAudio:Q}=await import("./audio-_CqgTru1.js");return{useAudio:Q}},__vite__mapDeps([41,42]));await oe().updateMediaSessionMetadata(H),console.log(`🎵 Updated media session for Radio Paradise track: ${H.title}`)}catch(oe){console.warn("Could not update media session for Radio Paradise track:",oe)}console.log(`🎵 Radio Paradise track updated: ${H.title} by ${H.artist}`),console.log("🎵 DEBUG: Current queue after update:",Z.currentTrack)}catch(X){console.error("Failed to handle Radio Paradise track update:",X)}}async function N(pe){if(pe){console.log(`🧹 Cleaning up ${Mi(pe)} source`),i.deactivate();try{const{useAudio:X}=await Ct(async()=>{const{useAudio:le}=await import("./audio-_CqgTru1.js");return{useAudio:le}},__vite__mapDeps([41,42])),Z=X();Z.playing&&(console.log("🔊 Stopping audio playback for source switch"),Z.pause());const{useQueue:H}=await Ct(async()=>{const{useQueue:le}=await Promise.resolve().then(()=>Pl);return{useQueue:le}},void 0),oe=H();switch(console.log(`🎵 Aggressively resetting queue for source switch (current tracks: ${oe.queue.tracks.length}, playing: ${oe.queue.isPlaying})`),oe.reset(),await new Promise(le=>setTimeout(le,50)),oe.queue.tracks.length>0&&(console.warn(`🎵 Queue still has ${oe.queue.tracks.length} tracks after reset, force clearing...`),oe.reset()),pe){case Ze.SPOTIFY:const{useSpotify:le}=await Ct(async()=>{const{useSpotify:ie}=await Promise.resolve().then(()=>Lq);return{useSpotify:ie}},void 0);le().reset(),console.log("🎵 Spotify store reset and cleanup complete");break;case Ze.AUDIUS:console.log("🎵 Audius cleanup complete");break;case Ze.RADIO_PARADISE:await F(),console.log("🎵 Radio Paradise cleanup complete");break;case Ze.MICROPHONE:console.log("🎤 Microphone cleanup complete");break;case Ze.FILE:await j(),console.log("📁 File cleanup complete");break;default:console.log(`🎵 Generic cleanup for ${Mi(pe)}`);break}}catch(X){console.warn("Error during source cleanup:",X)}}}const $=Ae([]);async function j(){try{$.value.forEach(pe=>{URL.revokeObjectURL(pe),console.log("📁 Revoked object URL:",pe)}),$.value=[]}catch(pe){console.warn("Error during file cleanup:",pe)}}async function te(pe){if(!pe||pe.length===0){console.warn("📁 No files provided to load");return}if(l.value!==Ze.FILE){console.warn("📁 Cannot load files - not in file source mode");return}if(v.value){console.log("📁 Queue locked during source transition, skipping file load");return}try{console.log(`📁 Loading ${pe.length} file(s)...`),await j();const{useQueue:X}=await Ct(async()=>{const{useQueue:Q}=await Promise.resolve().then(()=>Pl);return{useQueue:Q}},void 0),Z=X(),{useAudio:H}=await Ct(async()=>{const{useAudio:Q}=await import("./audio-_CqgTru1.js");return{useAudio:Q}},__vite__mapDeps([41,42])),oe=H(),le=[];for(let Q=0;Q<pe.length;Q++){const ie=pe[Q];if(!ie.type.startsWith("audio/")){console.warn(`📁 Skipping non-audio file: ${ie.name}`);continue}console.log(`📁 Processing file: ${ie.name} (${ie.type})`);const xe=URL.createObjectURL(ie);$.value.push(xe);const fe=await ce(ie),me={id:`file:${ie.name}:${ie.lastModified}`,source:Ze.FILE,sourceId:xe,title:fe.title||ie.name.replace(/\.[^/.]+$/,""),artist:fe.artist||"Unknown Artist",album:fe.album,duration:fe.duration,artwork:fe.artwork?{large:fe.artwork}:void 0,artworkBlobUrls:fe.artworkBlobUrls,rawData:{file:ie,objectUrl:xe}};le.push(me),console.log(`📁 Created track: ${me.title} by ${me.artist}`)}if(le.length>0){Z.setQueue(le,0);const Q=le[0];await oe.setSource(Q.sourceId),Z.queue.isPlaying||Z.togglePlayPause(),console.log(`📁 Loaded ${le.length} file(s) into queue, playing: ${Q.title}`)}else console.warn("📁 No valid audio files found to load")}catch(X){console.error("📁 Error loading files:",X),await j()}}async function ce(pe){try{const{useAudioMetadata:X}=await Ct(async()=>{const{useAudioMetadata:H}=await import("./useAudioMetadata-Zh08VHOY.js").then(oe=>oe.X);return{useAudioMetadata:H}},__vite__mapDeps([43,44])),{extractMetadata:Z}=X();return await Z(pe)}catch(X){return console.warn("📁 Error extracting metadata:",X),{title:pe.name.replace(/\.[^/.]+$/,""),artist:void 0,album:void 0,duration:void 0,artwork:void 0}}}function ve(pe){YA.includes(pe)&&(console.log("🎵 Auto-selecting audio source from server:",Mi(pe)),S(pe))}function Te(){const pe=localStorage.getItem("radioParadiseStation");if(pe){const X=parseInt(pe);Object.values(Jo).includes(X)&&(u.value=X,console.log("🎵 Restored Radio Paradise station preference:",X))}console.log("🎵 No auto-source restoration - forcing fresh music discovery! 🎶"),l.value=null}Te(),wt(()=>n.user,pe=>{pe&&l.value===Ze.SPOTIFY&&(pe.spotifyProfile?.accessToken?t.initialize():t.getSpotifyTokens())});async function $e(){console.log("🎵 Resetting sources store state"),await N(l.value),r.remove("volume-source-transition"),b.value=!1,l.value=null,localStorage.removeItem("selectedAudioSource");try{const{useQueue:pe}=await Ct(async()=>{const{useQueue:Z}=await Promise.resolve().then(()=>Pl);return{useQueue:Z}},void 0);pe().reset()}catch(pe){console.warn("Could not reset queue during sources cleanup:",pe)}}return{source:l,radioParadiseStation:u,radioStream:h,prettySource:d,sourceIcon:f,selectSource:S,selectRadioParadiseStation:V,setSourceFromServer:ve,loadFiles:te,volume:A,stream:M,playing:D,reset:$e,mediaSessionManager:i,isTransitioning:P,isQueueLocked:v}}),pTe=Object.freeze(Object.defineProperty({__proto__:null,AudioSourceIcons:Dq,SelectableAudioSources:YA,getAudioSourceLabel:Mi,useSources:$2},Symbol.toStringTag,{value:"Module"})),Gk={async getConnectionStatus(){return(await eh.get("/api/spotify/status")).data},async initializeAuth(n){const e=n?{returnUrl:n}:{};return(await eh.post("/api/spotify/auth",{},{params:e})).data},async disconnect(){return(await eh.post("/api/spotify/disconnect")).data},async getCurrentTrack(){const n=await eh.get("/api/spotify/current");return n.data.isPlaying?n.data:null},async getCurrentAnalysis(){const n=await eh.get("/api/spotify/analysis");return n.data.isPlaying?n.data:null}},mTe=[[2.5,.09]];let gTe=class{constructor({definitions:e,bitDepth:t,meyda:r,lowpass:i,getSpotifyVolume:s}){this.volumeBuffer=[],this.config={definitions:e,bitDepth:t||Math.pow(2,10),meyda:r||!1,lowpass:i||{frequency:7500,Q:.75}},this.state={initialized:!1,source:null,volume:1,stream:0,features:{},note:null,microphone:null,mediaElementSource:null,mediaStreamSource:null,getSpotifyVolume:s||function(){return 1}},this.tick=this.tick.bind(this),this.destroy=this.destroy.bind(this),this.initialize=this.initialize.bind(this)}set definitions(e){this.config.definitions=e}get rawVolume(){if(this.state.initialized===!1)return 1;if(this.state.source==="spotify")return this.state.getSpotifyVolume();if(!this.analyserBuffer){this.analyserBuffer=new Uint8Array(this.config.bitDepth/2);let r=this.config.bitDepth/2;for(let i=0;i<r;i++)this.analyserBuffer[i]=0}this.analyser?.getByteFrequencyData(this.analyserBuffer);let e=this.config.bitDepth/2,t=0;for(let r=0;r<e;r++)t+=this.analyserBuffer[r];return t/e}async initialize({element:e,microphone:t,spotify:r,audioContext:i,analyserNode:s}){if(r){this.state.source="spotify",this.state.initialized=!0;return}if(i?(console.log("🎵 AudioAnalyser using shared AudioContext from AudioSystemManager"),this.ctx=i):(console.log("🎵 AudioAnalyser creating its own AudioContext (fallback)"),this.ctx=new AudioContext),s?(console.log("🎵 AudioAnalyser using shared AnalyserNode from AudioSystemManager"),this.analyser=s,this.analyser.smoothingTimeConstant=0,this.analyser.fftSize=this.config.bitDepth):(this.analyser=this.ctx.createAnalyser(),this.analyser.smoothingTimeConstant=0,this.analyser.fftSize=this.config.bitDepth),this.filter=this.ctx.createBiquadFilter(),this.filter.type="lowpass",this.filter.frequency.value=this.config.lowpass.frequency,this.filter.Q.value=this.config.lowpass.Q,e&&(this.state.microphone&&this.state.microphone.getTracks().forEach(o=>o.stop()),this.state.source="audio",i?console.log("🎵 AudioAnalyser connected to shared audio graph"):(this.state.mediaElementSource=this.ctx.createMediaElementSource(e),this.source=this.state.mediaElementSource,this.source.connect(this.filter),this.filter.connect(this.analyser),this.source.connect(this.ctx.destination))),t){this.state.source="microphone";const o=this.state.microphone;this.state.microphone=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this.state.mediaStreamSource=this.ctx.createMediaStreamSource(o),this.source=this.state.mediaStreamSource,this.source.connect(this.filter),this.filter.connect(this.analyser)}this.state.initialized=!0}sampleVolume(e){let t=0;const r=Math.max(this.volumeBuffer.length-1,0),i=Math.max(r-e,0);let s=1/0;for(let o=r;o>=i;o--)t+=this.volumeBuffer[o],this.volumeBuffer[o]<s&&(s=this.volumeBuffer[o]);return[t/e,s]}tick(e){const t=this.rawVolume;this.volumeBuffer.push(t);const r=1e3/e,[i,s]=this.sampleVolume(this.config.definitions[0][0]*1e3/r),[o]=this.sampleVolume(this.config.definitions[0][1]*1e3/r),a=Number(Math.pow(Fg([s,i],[0,1])(o),(this.state.source==="spotify",1.5)).toFixed(3));if(!isNaN(a)){this.state.volume=a/2;const c=this.state.stream+Math.pow(a,.75)/10;isNaN(c)||(this.state.stream=Number(c.toFixed(3)))}return{volume:this.state.volume,stream:this.state.stream}}async destroy(){try{this.state.microphone&&this.state.microphone.getTracks().forEach(e=>e.stop()),this.analyser?.disconnect(),this.filter?.disconnect(),await this.ctx?.close()}catch{}}};class yTe extends gTe{constructor(e=mTe){super({definitions:e,getSpotifyVolume:()=>this.spotifyVolumeValue}),this.spotifyVolumeValue=1,this.initialize()}async initialize(){await super.initialize({spotify:!0})}setSpotifyVolume(e){this.spotifyVolumeValue=e}}const wTe=["segments","beats"];function vTe(n){const e=Uf(),t=Ee(()=>e.now),r=Ee(()=>n.value?.track||null),i=Ee(()=>n.value?.isPlaying||!1),s=Ae(0),o=Ae(0),a=Ee(()=>n.value?t.value-n.value.timestamp:null),c=Ee(()=>n.value?Ul(a.value/n.value.track.duration_ms):null),l=Ae(new yTe([[1,.1],[4,.1]])),u=Ee(()=>!i.value||a.value===null?null:wTe.reduce((p,m)=>(n.value?.audioAnalysis[m].forEach((g,y)=>{if(p[m])return;const b=g.start*1e3,w=g.duration*1e3;if(a.value>b&&a.value<b+w){const E=(a.value-b)/w;p[m]=[y,E,PB(E)]}}),p),{})),h=Ee(()=>{if(!i.value||a.value===null)return 1;const p=u.value?.segments?.[0]||-1,m=n.value?.audioAnalysis.segments,g=m?.[p];if(!g||p===-1||!m||!l.value)return 1;const{duration:y,start:b,loudness_max:w,loudness_max_time:E,loudness_start:x}=g,C=m?.[p+1]?.loudness_start||w,R=b*1e3,k=y*1e3,_=E*1e3,A=N=>Math.pow(10,N/20),M=A(x),D=A(w),P=A(C),v=a.value-R,S=Ul(v/_),T=v-_,L=Ul(T/(k-_)),U=S<1?M:D,V=S<1?D:P,W=S<1?S:L,I=gi(U,V)(W);return l.value?.setSpotifyVolume(I),(l.value?.tick(e.frameRate)||{volume:1}).volume}),d=Fg([60,120],[.1,.03]),f=Fg([60,120],[.2,.1]);return ef(()=>{let p=.01;if(i.value){const m=e.frameRate,g=Math.pow(h.value,.75),y=u.value?.segments?.[2],b=u.value?.beats?.[2];if(y&&b){const w=Vx([d(m),d(m)*g+f(m)*g,d(m)]),E=Vx([d(m),d(m)*g+f(m)*g,d(m)]),x=w(b)+E(y);isNaN(x)||(p=x)}}o.value+=p}),{stream:o,volume:h,progress:c,position:a,track:r,latency:s,playing:i}}const Y9=Oo("spotify",()=>{const n=py(),e=Lf(),t=V9(),r=$2(),i=Ee(()=>e?.user?.spotifyProfile),s=Tt(null),{stream:o,volume:a,progress:c,position:l,track:u,playing:h,latency:d}=vTe(s),f=Ae(),p=Ae(0);wt(c,x=>{x===1&&r.source===Ze.SPOTIFY&&g()}),wt(u,x=>{if(!x)return;if(r.source!==Ze.SPOTIFY){console.log("🎵 Spotify: Track changed but not active source, skipping queue update");return}const C=kq(x);if(!C)return;const R={id:C.id,source:C.source,sourceId:C.sourceId,title:C.title,artist:C.artist,album:C.album,duration:C.duration,artwork:C.artwork,rawData:C.rawData},k=t.currentTrack;(!k||k.sourceId!==C.sourceId)&&(console.log("🎵 Spotify: Adding track to queue:",R.title),t.setQueue([R],0),h.value&&!t.queue.isPlaying?t.queue.isPlaying=!0:!h.value&&t.queue.isPlaying&&(t.queue.isPlaying=!1))}),wt(h,x=>{r.source===Ze.SPOTIFY&&t.currentTrack?.source===Ze.SPOTIFY&&(t.queue.isPlaying=x)});async function m(){try{const x=window.location.href.split("?")[0],C=await Gk.initializeAuth(x);document.location.href=C.authUrl}catch(x){console.log(x)}}async function g(){try{const x=await Gk.getCurrentAnalysis();if(!x&&r.source===Ze.SPOTIFY){const C=Date.now();C-p.value>1e4&&(console.log("🎵 Spotify: No track playing (commercial/track ended), clearing queue"),t.clearQueue(),p.value=C),s.value=null;return}s.value=x,s.value||b()}catch(x){console.error("Failed to get current analysis:",x)}}function y(){clearInterval(f.value)}function b(){y(),f.value=setInterval(async()=>{await g(),s.value&&y()},5e3)}async function w(){await g(),i.value?.display_name&&n.message(`Connected to Spotify as ${i.value?.display_name}!`),s.value||b()}function E(){console.log("🎵 Resetting Spotify store state"),y(),s.value=null}return{profile:i,track:u,analysisData:s,playing:h,stream:o,volume:a,position:l,progress:c,getSpotifyTokens:m,initialize:w,reset:E,latency:d}}),Lq=Object.freeze(Object.defineProperty({__proto__:null,useSpotify:Y9},Symbol.toStringTag,{value:"Module"}));let I8=null;const Uq=()=>{const n=async()=>{if(!I8)try{const{useSessionLogger:c}=await Ct(async()=>{const{useSessionLogger:l}=await import("./session-logger-CAMlmg_a.js");return{useSessionLogger:l}},[]);I8=c()}catch(c){return console.warn("Session logger not available:",c),null}return I8};return{logEvent:async(c,l={},u)=>{try{const h=await n();if(h){const d=typeof c=="string"?h.SessionEventType[c]:c;h.logEvent(d,l,u)}}catch(h){console.warn("Failed to log session event:",h)}},logUIEvent:async(c,l,u={})=>{const h=await n();h&&h.logEvent(h.SessionEventType.UI_CLICK,{action:c,element:l,...u})},logPerformance:async(c,l,u="ms",h={})=>{const d=await n();d&&d.logEvent(d.SessionEventType.PERFORMANCE_METRIC,{metric:c,value:l,unit:u,...h})},logError:async(c,l,u={})=>{const h=await n();h&&h.logEvent(h.SessionEventType.ERROR_OCCURRED,{error:c instanceof Error?c.message:c,stack:c instanceof Error?c.stack:void 0,context:l,...u})},getSessionStats:async()=>(await n())?.sessionStats||null,setLoggingEnabled:async c=>{const l=await n();l&&l.setLoggingEnabled(c)},setVerboseLogging:async c=>{const l=await n();l&&l.setVerboseLogging(c)},loadSessionLogger:n}},{logEvent:bTe}=Uq(),_Te=Oo("userState",()=>{const n=J0(),e=Ku(),t=Lf(),r=$2();V9();const i=Ae(Ur.HOME),s=Ae(qAe.BROWSING),o=Ae(Ze.NONE),a=Ae(),c=Ae(),l=Ae(),u=Ae(/Mobile|Android|iPhone|iPad/.test(navigator.userAgent)?/iPad|tablet/.test(navigator.userAgent)?"tablet":"mobile":"desktop"),h=Ae("web"),d=Ae(),f=Ae(),p=Ae({...S8}),m=Ae(!1),g=Ae(!1),y=Ee(()=>i.value===Ur.HOME),b=Ee({get:()=>p.value.disableFlashing,set:Q=>T("disableFlashing",Q)}),w=Ee({get:()=>p.value.neonMode,set:Q=>T("neonMode",Q)}),E=Ee({get:()=>p.value.showMenuLabels,set:Q=>T("showMenuLabels",Q)}),x=Ee({get:()=>p.value.alwaysShowTrack,set:Q=>T("alwaysShowTrack",Q)}),C=Ee({get:()=>p.value.shuffleDesigns,set:Q=>T("shuffleDesigns",Q)}),R=Ee({get:()=>p.value.infinityPlay,set:Q=>T("infinityPlay",Q)}),k=Ee({get:()=>p.value.visualizerSpeed,set:Q=>T("visualizerSpeed",Q)}),_=Ee({get:()=>p.value.preferLossless,set:Q=>T("preferLossless",Q)}),A=Ee(()=>p.value.audioSource),M=Ee(()=>p.value.lastTrack);let D=null;const P=500;let v=0;const S=1e3;function T(Q,ie){p.value={...p.value,[Q]:ie},D&&clearTimeout(D),D=window.setTimeout(()=>{L()},P)}async function L(){if(!t.isAuthenticated||!e.connected){console.warn("🎛️ Cannot save preferences - not authenticated or connected");return}try{g.value=!0,e.emit("user-state:update-preferences",p.value),console.log("🎛️ Saving preferences to server...",p.value)}catch(Q){console.error("Failed to save preferences:",Q)}finally{g.value=!1}}function U(Q){p.value={...S8,...Q},m.value=!0,console.log("🎛️ Loaded preferences:",p.value)}function V(Q){return Q&&{Homepage:Ur.HOME,index:Ur.HOME,"/":Ur.HOME,Visualizer:Ur.VISUALIZER,Sketches:Ur.SKETCHES,Studies:Ur.STUDIES,Profile:Ur.PROFILE,Settings:Ur.SETTINGS,Dashboard:Ur.DASHBOARD,Projects:Ur.PROJECTS,"Project Detail":Ur.PROJECT_DETAIL,Design:Ur.DESIGN,Gist:Ur.GIST,"Audius Home":Ur.AUDIUS_HOME,"Audius Playlist Detail":Ur.AUDIUS_PLAYLIST_DETAIL,"Audius User Detail":Ur.AUDIUS_USER_DETAIL,"Page Not Found":Ur.PAGE_NOT_FOUND}[Q]||Ur.HOME}async function W(){if(!e.connected)return;const Q=Date.now();if(Q-v<S)return;v=Q;const ie={[Ea.PAGE]:i.value,[Ea.ACTIVITY_TYPE]:s.value,[Ea.AUDIO_SOURCE]:o.value,[Ea.DEVICE_TYPE]:u.value==="desktop"?0:u.value==="mobile"?1:2,[Ea.CLIENT_PLATFORM]:h.value==="web"?0:h.value==="electron"?1:2,...a.value&&{[Ea.AUDIO_TRACK]:a.value},...c.value!==void 0&&{[Ea.AUDIO_POSITION]:c.value},...d.value&&{[Ea.SHADER_ID]:d.value},...f.value&&{[Ea.PROJECT_ID]:f.value},...l.value&&{[Ea.GEO_LAT]:l.value.lat,[Ea.GEO_LNG]:l.value.lng}};e.emit("user-state:update",ie)}async function F(){if(!e.connected)return;const Q={status:WAe.ONLINE,page:i.value,activityType:s.value,audioSource:o.value,deviceType:u.value==="desktop"?0:u.value==="mobile"?1:2,clientPlatform:h.value==="web"?0:h.value==="electron"?1:2,...a.value&&{audioTrack:a.value},...c.value!==void 0&&{audioPosition:c.value},...d.value&&{shaderId:d.value},...f.value&&{projectId:f.value},...l.value&&{geoLat:l.value.lat,geoLng:l.value.lng}};e.emit("user-state:online",Q)}async function I(){e.connected&&e.emit("user-state:offline")}function N(Q){Q.source!==void 0&&(o.value=Q.source),Q.track!==void 0&&(a.value=Q.track),Q.position!==void 0&&(c.value=Q.position),W()}function $(Q){s.value=Q,W()}function j(Q){l.value=Q,W()}function te(Q){d.value=Q,W()}function ce(Q){f.value=Q,W()}function ve(Q){h.value=Q,W()}wt(()=>n.value.name,async Q=>{const ie=V(Q);if(ie!==i.value){const xe=i.value;i.value=ie,W(),bTe("PAGE_VIEW",{fromPage:xe,toPage:ie,route:Q,fullPath:n.value.fullPath})}},{immediate:!0}),wt(()=>r.source,Q=>{Q!==null&&Q!==o.value&&(o.value=Q,W())},{immediate:!0});const Te=Y9();wt(()=>Te.track?.name,Q=>{if(Q&&o.value===Ze.SPOTIFY){const ie=`${Te.track?.id||""}:${Te.track?.name||""}`;ie!==a.value&&(a.value=ie,W())}}),wt(()=>Te.position,Q=>{o.value===Ze.SPOTIFY&&Q!==c.value&&(c.value=Q,Math.floor(Q/5e3)!==Math.floor((c.value||0)/5e3)&&W())});const $e=Q=>{console.log("📡 Received user preferences from server:",Q),Q.audioSource!==void 0&&Q.audioSource!==o.value&&(o.value=Q.audioSource,$2().setSourceFromServer(Q.audioSource)),Q.audioTrack&&(a.value=Q.audioTrack)},pe=Q=>{Q.user.preferences&&U(Q.user.preferences)},X=Q=>{p.value=Q.preferences,console.log("🎛️ Preferences updated successfully")},Z=Q=>{(Q.code==="AUTH_REQUIRED"||Q.code==="UPDATE_FAILED")&&(console.error("🎛️ Preference update failed:",Q.message),g.value=!1)},H=()=>{console.log("👁️ Page hidden - setting user temporarily offline")},oe=()=>{console.log("👁️ Page visible - user returned, updating state"),W()},le=()=>{e.off("user-state:preferences",$e),e.off("auth:success",pe),e.off("user-state:preferences-updated",X),e.off("user-state:error",Z),e.off("user-state:page-hidden",H),e.off("user-state:page-visible",oe),console.log("🧹 Removed all user-state socket event listeners")};return wt(()=>e.connected,async Q=>{if(Q){F(),e.on("user-state:preferences",$e),e.on("auth:success",pe),e.on("user-state:preferences-updated",X),e.on("user-state:error",Z),e.on("user-state:page-hidden",H),e.on("user-state:page-visible",oe);try{const{useSocketMessaging:ie}=await Ct(async()=>{const{useSocketMessaging:fe}=await import("./socket-messaging-D9b8t4MZ.js");return{useSocketMessaging:fe}},[]);ie().setupMessagingListeners()}catch(ie){console.warn("Failed to setup messaging listeners:",ie)}}else le()},{immediate:!0}),wt(()=>[t.isAuthenticated,e.connected,t.user?.walletAddress&&t.authToken],async()=>{t.isAuthenticated&&e.connected&&t.user?.walletAddress&&t.authToken&&(e.emit("user-state:authenticate",{walletAddress:t.user.walletAddress,token:t.authToken}),e.emit("user-state:get-preferences"))},{immediate:!0}),wt(()=>t.user?.preferences,Q=>{Q&&!m.value&&(U(Q),console.log("🎛️ Loaded preferences from auth hydration"))},{immediate:!0}),wt(()=>t.isAuthenticated,Q=>{Q||(p.value={...S8},m.value=!1,D&&(clearTimeout(D),D=null),console.log("🎛️ Reset preferences to defaults (logged out)"))}),X_(()=>{console.log("🧹 User state store unmounting - cleaning up"),I(),D&&(clearTimeout(D),D=null),le()}),{currentPage:Ee(()=>i.value),activityType:Ee(()=>s.value),audioSource:Ee(()=>o.value),audioTrack:Ee(()=>a.value),audioPosition:Ee(()=>c.value),geoLocation:Ee(()=>l.value),deviceType:Ee(()=>u.value),clientPlatform:Ee(()=>h.value),currentShaderId:Ee(()=>d.value),currentProjectId:Ee(()=>f.value),isOnHomepage:y,disableFlashing:b,neonMode:w,showMenuLabels:E,alwaysShowTrack:x,shuffleDesigns:C,infinityPlay:R,visualizerSpeed:k,preferLossless:_,preferenceAudioSource:A,lastTrack:M,isPreferencesLoaded:Ee(()=>m.value),isSavingPreferences:Ee(()=>g.value),updateAudioState:N,updateActivity:$,updateLocation:j,updateShaderId:te,updateProjectId:ce,updateClientPlatform:ve,setUserOnline:F,setUserOffline:I,broadcastUserState:W,loadPreferences:U,savePreferences:L}});function ETe(){const n=Lf(),e=Ee(()=>n.walletAddress===Nm),t=Ee(()=>n.user?.role===js.ADMIN),r=Ee(()=>n.isAuthenticated&&e.value&&t.value),i=Ee(()=>e.value),s=Ee(()=>n.isAuthenticated&&r.value),o=Ee(()=>Nm),a=l=>l===Nm,c=Ee(()=>({isAdmin:r.value,isAuthenticated:n.isAuthenticated,isAdminWallet:e.value,isAdminRole:t.value,currentWallet:n.walletAddress,adminWallet:Nm,userRole:n.user?.role,expectedRole:js.ADMIN}));return{isAdmin:r,isAuthenticatedAdmin:s,isAdminWallet:e,isAdminRole:t,isLikelyAdmin:i,adminWallet:o,isWalletAdmin:a,getAdminStatus:c}}const xTe="6Qxu5cRDNFEZvYtgtvo27tdg7LuT5wuX7THqqPbBWJmT",m0=Ae([]);Ae([]);const mg=Ae(!1),XA=Ae(null);async function Kk(){if(!mg.value){mg.value=!0,XA.value=null;try{const n=await fetch(`/api/sketches?walletAddress=${xTe}&visibility=public`);if(!n.ok)throw new Error(`Failed to load sketches: ${n.statusText}`);const e=await n.json();m0.value=e.sketches||[],console.log(`✨ Loaded ${m0.value.length} ShaderTom sketches for main visualizer`)}catch(n){XA.value=n instanceof Error?n.message:"Failed to load sketches",console.error("Error loading ShaderTom sketches:",n),m0.value=[]}finally{mg.value=!1}}}function STe(n){return m0.value.find(e=>e._id===n)||null}function ATe(n,e){const t=Ee(()=>m0.value),r=Ee(()=>{if(e.value===null)return-1;const i=t.value.find(s=>s._id===e.value);return i?t.value.indexOf(i):-1});return m0.value.length===0&&!mg.value&&Kk(),{iterations:t,index:r,loading:mg,error:XA,getSketchById:STe,loadShaderTomSketches:Kk}}function X9(n){return Ee(()=>or(n)?n.value:n)}const{logPerformance:Qw,logError:ZA}=Uq();Ae(null);Ae(null);const Bq=()=>{if(!(typeof window>"u"))try{CTe(),TTe(),console.log("⚡ Global performance tracking initialized")}catch(n){console.warn("Performance tracking initialization failed:",n)}},CTe=()=>{if(!(typeof window>"u"||!window.PerformanceObserver))try{new PerformanceObserver(i=>{i.getEntries().forEach(s=>{Qw(`paint_${s.name.replace(/-/g,"_")}`,s.startTime,"ms",{paintType:s.name,type:"paint_timing"})})}).observe({entryTypes:["paint"]}),new PerformanceObserver(i=>{i.getEntries().forEach(s=>{Qw("largest_contentful_paint",s.startTime,"ms",{element:s.element?.tagName||"unknown",size:s.size||0,type:"lcp"})})}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(i=>{let s=0;i.getEntries().forEach(o=>{o.hadRecentInput||(s+=o.value)}),s>0&&Qw("cumulative_layout_shift",s,"score",{type:"cls"})}).observe({entryTypes:["layout-shift"]}),new PerformanceObserver(i=>{i.getEntries().forEach(s=>{Qw("long_task",s.duration,"ms",{startTime:s.startTime,type:"long_task",blocking:!0}),s.duration>100&&ZA(`Long task detected: ${s.duration}ms`,"performance",{duration:s.duration,startTime:s.startTime,type:"long_task"})})}).observe({entryTypes:["longtask"]})}catch(n){console.warn("Performance observers setup failed:",n)}},TTe=()=>{typeof window>"u"||(window.addEventListener("unhandledrejection",n=>{ZA(n.reason||"Unhandled promise rejection","unhandled_rejection",{type:"unhandled_rejection",promise:n.promise})}),window.addEventListener("error",n=>{ZA(n.error||n.message,"uncaught_error",{type:"uncaught_error",filename:n.filename,lineno:n.lineno,colno:n.colno})}))};typeof window<"u"&&setTimeout(()=>{Bq()},1e3);const ITe=Object.freeze(Object.defineProperty({__proto__:null,initGlobalPerformanceTracking:Bq},Symbol.toStringTag,{value:"Module"})),Z9=Oo("sketches",()=>{const n=Uf(),e=Tt(null),t=Ee(()=>e.value?._id||null),r=Ae("shader-tom-collection"),{iterations:i,index:s,loading:o,error:a}=ATe(r,t),c=Ae(),l=Ae({}),u=Ae(0),h=Ae(!1),d=Ae(null),f=Ae(0),p=Ae("pointer"),m=Ae(!1),g=Ae(null),y=Ae(null),b=Ee(()=>Object.keys(l.value||{})),w=Ee(()=>b.value.join(",")),E=Ee(()=>b.value.map(Z=>l.value?.[Z]?.value)),x=Ee(()=>E.value.join(",")),C=Ee(()=>Ec(e?.value?.variants?.[u.value]||{})),R=Ee(()=>Object.keys(C.value)),k=Ee(()=>R.value.join(",")),_=Ee(()=>R.value.map(Z=>C.value[Z]?.value)),A=Ee(()=>_.value.join(",")),M=Ee(()=>w.value!==k.value),D=Ee(()=>x.value!==A.value),P=Ee(()=>M.value||D.value),v=Ee(()=>c.value!==e.value?.shader),S=Ee(()=>P.value||v.value),T=Ee(()=>!m.value&&D.value);wt(()=>h.value,Z=>{clearInterval(d.value),Z&&(d.value=setInterval(ce,3050))},{immediate:!0});function L(Z,H="pointer",oe=null){const le=e.value?._id;n.remove("variant"),p.value=H,m.value=!1,e.value=Ec(Z),c.value=Z.shader,le!==Z._id&&oe===null?(u.value=0,f.value=0):u.value=Z.variants.length-1,l.value=Ec(Z.variants[u.value])}function U(Z){e.value&&(u.value=Z,W(e.value.variants[Z]))}function V(Z,H,oe=h.value?2500:1e3){const le=HJ(Ec(Z),Ec(H));m.value=!0,n.add((Q,ie)=>{const xe=le(ie);b.value.forEach(fe=>{l.value[fe].value=xe[fe].value}),ie===1&&(m.value=!1)},{duration:oe,id:"variant"})}function W(Z,H=h.value?2500:1e3){V(l.value,Z,H)}function F(){L(xJ(i.value))}function I(Z,H="pointer"){L(i.value[Z],H)}function N(Z="pointer"){const H=i.value.length-1,oe=s.value-1;if(oe===-1)return I(H,Z);I(oe,Z)}function $(Z="pointer"){const H=i.value.length-1,oe=s.value+1;if(oe>H)return I(0,Z);I(oe,Z)}function j(Z){if(!e.value)return;const H=VJ(e,Z);H.shader=WJ(c,Z),L(H,"internal")}function te(){if(!e.value)return;const Z=Ec(e.value);Z.variants.push(Ec(l.value)),L(Z,"internal")}function ce(){if(!e.value)return;const Z=e.value?.variants.length;if(u.value+1===Z)return U(0);U(u.value+1)}function ve(){h.value=!h.value}function Te(Z=500,H=.7){if(!e.value)return;const oe=e.value.variants[u.value];W(KJ(oe,H),Z)}function $e(){clearInterval(y.value),y.value=setInterval(()=>{Te(3e3,.25)},3100)}function pe(){clearInterval(y.value)}function X(){console.log("🎨 Resetting sketches store state"),clearInterval(d.value),clearInterval(y.value),d.value=null,y.value=null}return{sampleSketches:F,variant:u,sketch:e,activeSketchId:t,shader:c,uniforms:l,shuffleVariants:h,index:s,selectSketchByIndex:I,selectPreviousSketch:N,selectNextSketch:$,selectVariant:U,tweening:m,toggleShuffleVariants:ve,sketchSelectionMethod:p,addVariant:te,addUniform:j,uniformValues:E,shaderDirty:v,isDirty:S,uniformKeys:b,uniformKeysSerialized:w,uniformValuesSerialized:x,uniformValuesDirty:D,activeVariantKeys:R,activeVariantKeysSerialized:k,activeVariantValues:_,activeVariantValuesSerialized:A,keyboardIndex:f,selectSketch:L,iterations:i,loading:o,error:a,shaderError:g,magicTween:Te,tweenTo:W,activeVariant:C,startMagicInterval:$e,stopMagicInterval:pe,canAddVariant:T,reset:X}}),MTe=Object.freeze(Object.defineProperty({__proto__:null,useSketches:Z9},Symbol.toStringTag,{value:"Module"})),Lo=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},RTe={is:"div",gap:0,padding:0,justify:"start",align:"start"},PTe=Ar({__name:"Row",props:AY({align:{},justify:{},cascade:{type:Boolean},is:{},center:{type:Boolean},padding:{type:[Number,String,Boolean]},gap:{type:[Number,String,Boolean]},width:{},height:{},collapse:{type:Boolean}},RTe),setup(n,{expose:e}){_X(a=>({"24826fbe":a.align,"6533c4ac":a.justify,"7ec856f2":ht(i),"7f9d962d":ht(s),"2219423c":a.width,"54acf8ea":a.height}));const t=n,r=nTe(t.gap),i=lTe(r),s=aTe(t.padding),o=Ae();return e({element:o}),(a,c)=>(Re(),si(UC(a.is),Dg({class:["row",{center:a.center,cascade:a.cascade,collapse:a.collapse}],ref_key:"element",ref:o},a.$attrs),{default:Wn(()=>[As(a.$slots,"default",{},void 0,!0)]),_:3},16,["class"]))}}),J9=Lo(PTe,[["__scopeId","data-v-8976510b"]]),NTe={xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100"};function OTe(n,e){return Re(),Oe("svg",NTe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M50.001 96.278c-12.78 0-24.35-5.18-32.724-13.554C8.902 74.349 3.722 62.78 3.722 50.002c0-12.78 5.18-24.351 13.554-32.725S37.221 3.722 50.001 3.722c12.779 0 24.348 5.181 32.722 13.555 8.374 8.375 13.554 19.945 13.554 32.725 0 12.778-5.18 24.348-13.554 32.721-8.375 8.375-19.944 13.555-32.722 13.555M19.889 80.111C27.594 87.815 38.241 92.582 50 92.582s22.405-4.767 30.109-12.471C87.814 72.406 92.58 61.76 92.58 50.002c0-11.76-4.765-22.407-12.47-30.112-7.705-7.706-18.35-12.472-30.109-12.472S27.594 12.184 19.889 19.89C12.183 27.595 7.418 38.241 7.418 50.002c0 11.759 4.765 22.404 12.471 30.109m47.342-31.958H51.847V32.768a1.849 1.849 0 0 0-3.696 0v15.385H32.768a1.848 1.848 0 0 0 0 3.696h15.384v15.383a1.848 1.848 0 0 0 3.696 0V51.848h15.383a1.848 1.848 0 1 0 0-3.695","clip-rule":"evenodd"},null,-1)]))}const kTe={render:OTe},DTe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function LTe(n,e){return Re(),Oe("svg",DTe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M11.916.023C5.351.023.02 5.331.02 11.919v95.237c0 6.582 5.331 11.896 11.896 11.896 6.559 0 11.896-5.314 11.896-11.896V23.838h83.318c6.56 0 11.896-5.314 11.896-11.896 0-6.588-5.336-11.896-11.896-11.896H11.893zm380.925 0c-6.565 0-11.896 5.308-11.896 11.896 0 6.582 5.331 11.896 11.896 11.896h83.318v83.318c0 6.582 5.331 11.896 11.896 11.896 6.56 0 11.896-5.314 11.896-11.896V11.896C499.951 5.308 494.615 0 488.055 0h-95.237zM95.257 83.341c-6.582 0-11.896 5.331-11.896 11.896V404.74c0 6.56 5.314 11.896 11.896 11.896H404.76c6.582 0 11.896-5.336 11.896-11.896V95.237c0-6.565-5.314-11.896-11.896-11.896zm11.896 23.815h285.688v129.965l-40.173-32.123c-4.731-3.794-11.565-3.411-15.85.875l-53.944 53.898-73.342-55.035a11.89 11.89 0 0 0-15.267.845l-87.112 81.467zm166.659 23.815c-19.707 0-35.711 15.998-35.711 35.711 0 19.707 16.004 35.711 35.711 35.711s35.711-16.004 35.711-35.711c0-19.713-16.004-35.711-35.711-35.711m0 23.815c6.56 0 11.896 5.331 11.896 11.896 0 6.559-5.336 11.896-11.896 11.896-6.565 0-11.896-5.337-11.896-11.896 0-6.565 5.331-11.896 11.896-11.896m-70.593 75.039 189.628 142.198v20.844H107.159v-73.205zm142.889.445 46.739 37.386v74.633l-90.729-68.028zM11.922 380.971c-6.565 0-11.896 5.308-11.896 11.896v95.237C.026 494.686 5.357 500 11.922 500h95.237c6.559 0 11.896-5.314 11.896-11.896 0-6.588-5.337-11.896-11.896-11.896H23.841V392.89c0-6.588-5.337-11.896-11.896-11.896zm476.139 0c-6.565 0-11.896 5.308-11.896 11.896v83.318h-83.318c-6.565 0-11.896 5.308-11.896 11.896 0 6.582 5.331 11.896 11.896 11.896h95.237c6.559 0 11.896-5.314 11.896-11.896v-95.237c0-6.588-5.337-11.896-11.896-11.896z"},null,-1)]))}const UTe={render:LTe},BTe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function FTe(n,e){return Re(),Oe("svg",BTe,e[0]||(e[0]=[be("path",{d:"m495.371 310.957-23.254-41.207c-4.274-7.441-11.026-12.995-18.894-15.649v-.427c0-101.056-91.136-183.213-203.223-183.213S46.777 152.624 46.777 253.674v.427c-7.863 2.654-14.62 8.208-18.894 15.649L4.629 310.957c-6.243 10.943-6.156 23.939.169 34.794 6.326 10.862 17.614 17.274 30.182 17.274h28.042c.34 1.368.854 2.649 1.795 3.847l21.29 25.99c1.62 1.965 4.104 3.076 6.665 3.076h20.606c0 .426.257.771.427 1.11l15.304 28.043c1.538 2.735 4.361 4.448 7.524 4.448h226.734c3.163 0 5.986-1.713 7.524-4.448l15.304-28.043c.17-.339.427-.684.427-1.11h20.606c2.561 0 5.04-1.111 6.665-3.076l21.29-25.99c.941-1.198 1.455-2.479 1.795-3.847h28.042c12.568 0 23.851-6.412 30.182-17.274 6.325-10.855 6.412-23.851.169-34.794M250 87.56c101.997 0 185.095 73.698 186.037 164.489h-118.67l15.988-48.473c.345-.859.427-1.795.427-2.654 0-46.252-37.53-83.87-83.782-83.87-46.247 0-83.782 37.618-83.782 83.87 0 .859.087 1.795.427 2.654l15.988 48.473H63.963C64.905 161.252 148.003 87.56 250 87.56m66.689 112-16.585 50.355c-.257.684-.345 1.368-.427 2.14h-99.343c-.088-.772-.17-1.456-.427-2.14l-16.585-50.355c.684-36.163 30.346-65.403 66.689-65.403 36.337 0 65.999 29.24 66.689 65.403zm41.639 212.88H141.683l-9.067-16.502h234.768zm44.884-33.601H96.799l-12.995-15.814h332.403zm77.2-41.722c-3.25 5.559-8.979 8.81-15.392 8.81H34.98c-6.413 0-12.142-3.251-15.386-8.81-3.25-5.554-3.25-12.136-.088-17.783l23.342-41.119c3.075-5.56 9.061-9.061 15.474-9.061h383.356c6.413 0 12.393 3.501 15.474 9.061l23.336 41.119c3.168 5.647 3.168 12.229-.082 17.783z"},null,-1),be("path",{d:"M250 340.05c-17.143 0-31.095-13.958-31.095-31.101 0-17.137 13.952-31.095 31.095-31.095s31.101 13.958 31.101 31.095c0 17.143-13.958 31.101-31.101 31.101m0-45.098c-7.715 0-13.997 6.282-13.997 13.997 0 7.742 6.282 14.002 13.997 14.002s14.002-6.281 14.002-14.002c0-7.737-6.287-13.997-14.002-13.997M335.112 340.05c-17.143 0-31.096-13.958-31.096-31.101 0-17.137 13.953-31.095 31.096-31.095 17.142 0 31.101 13.958 31.101 31.095 0 17.143-13.959 31.101-31.101 31.101m0-45.098c-7.715 0-13.997 6.282-13.997 13.997 0 7.742 6.282 14.002 13.997 14.002s14.002-6.281 14.002-14.002c0-7.737-6.287-13.997-14.002-13.997M420.218 340.05c-17.143 0-31.096-13.958-31.096-31.101 0-17.137 13.953-31.095 31.096-31.095s31.101 13.958 31.101 31.095c0 17.143-13.958 31.101-31.101 31.101m0-45.098c-7.715 0-13.997 6.282-13.997 13.997 0 7.742 6.282 14.002 13.997 14.002s14.002-6.281 14.002-14.002c0-7.737-6.287-13.997-14.002-13.997M79.782 340.05c-17.143 0-31.095-13.958-31.095-31.101 0-17.137 13.952-31.095 31.095-31.095s31.101 13.958 31.101 31.095c0 17.143-13.958 31.101-31.101 31.101m0-45.098c-7.715 0-13.997 6.282-13.997 13.997 0 7.742 6.282 14.002 13.997 14.002s14.002-6.281 14.002-14.002c0-7.737-6.287-13.997-14.002-13.997M164.888 340.05c-17.142 0-31.095-13.958-31.095-31.101 0-17.137 13.953-31.095 31.095-31.095 17.143 0 31.101 13.958 31.101 31.095 0 17.143-13.958 31.101-31.101 31.101m0-45.098c-7.715 0-13.996 6.282-13.996 13.997 0 7.742 6.281 14.002 13.996 14.002s14.002-6.281 14.002-14.002c0-7.737-6.287-13.997-14.002-13.997M232.365 210.952a8.54 8.54 0 0 1-5.62-2.096l-23.32-20.327c-3.545-3.097-3.934-8.503-.832-12.054 3.119-3.546 8.509-3.929 12.055-.832l23.32 20.327c3.545 3.097 3.928 8.503.831 12.054a8.51 8.51 0 0 1-6.456 2.928zM267.635 210.952a8.52 8.52 0 0 1-6.456-2.928c-3.097-3.551-2.736-8.957.837-12.054l23.315-20.327c3.573-3.097 8.979-2.714 12.059.832 3.097 3.551 2.736 8.957-.837 12.054l-23.315 20.327a8.56 8.56 0 0 1-5.625 2.096z"},null,-1)]))}const $Te={render:FTe},zTe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function HTe(n,e){return Re(),Oe("svg",zTe,e[0]||(e[0]=[be("g",{"stroke-width":"14"},[be("path",{d:"M250 500c2.343 0 4.686-.795 6.61-2.385L463.723 328.16l-13.221-16.192-190.042 155.48V263.599h-20.92v203.85L49.496 311.967l-13.221 16.192 207.113 169.456a10.36 10.36 0 0 0 6.61 2.385M239.54 0h20.92v75.314h-20.92zM239.54 131.8h20.92v75.313h-20.92z"})],-1)]))}const VTe={render:HTe},WTe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function qTe(n,e){return Re(),Oe("svg",WTe,e[0]||(e[0]=[be("path",{d:"M494.279 479.591 358.022 243.167l-63.911-110.833L221.755 6.821c-5.247-9.092-18.368-9.095-23.619-.006l-.002.006-136.576 236.17-55.806 96.505c-5.258 9.095 1.303 20.47 11.808 20.475h.002l105.423.066c4.871 0 9.374-2.594 11.821-6.806l54.784-94.768 8.379-14.493q.495-.84 1.1-1.606c5.973-7.585 17.72-6.737 22.543 1.628l56.851 98.616 10.524 18.221a14.6 14.6 0 0 1 1.341 3.2c2.384 8.698-4.176 17.275-13.195 17.253l-124.018-.076a13.66 13.66 0 0 0-11.821 6.806l-52.783 91.271c-5.258 9.085 1.293 20.454 11.789 20.464h.01l109.293.077 136.279.088 136.554.088c10.477.007 17.048-11.316 11.843-20.409",class:"cls-1"},null,-1)]))}const jTe={render:qTe},GTe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function KTe(n,e){return Re(),Oe("svg",GTe,e[0]||(e[0]=[be("path",{fill:"#F02A94","fill-rule":"evenodd",d:"M250 500c138.075 0 250-111.925 250-250S388.075 0 250 0 0 111.925 0 250s111.925 250 250 250m91.675-365.5a24.32 24.32 0 0 1 16.95-9.4 23.62 23.62 0 0 1 18.125 6.35c5.1 4.8 8.175 11.35 8.6 18.325.5 7.125-1.675 14.15-6 19.55l-156 196.325a24.1 24.1 0 0 1-18.425 9.35h-.375a23.96 23.96 0 0 1-18.3-8.7l-75.575-89.25c-9.225-11.15-8.55-27.5 1.575-37.85 9.875-9.975 26.225-9.175 35.05 1.725l56.65 66.9 137.725-173.35z","clip-rule":"evenodd"},null,-1),be("path",{fill:"#fff","fill-rule":"evenodd",d:"M358.625 125.1c-6.7.65-12.825 4.05-16.95 9.375l-137.7 173.35-56.675-66.9c-8.825-10.9-25.175-11.7-35.05-1.725-10.125 10.35-10.8 26.7-1.575 37.85l75.575 89.25a23.96 23.96 0 0 0 18.3 8.7h.375a24.07 24.07 0 0 0 18.45-9.35l155.95-196.325c4.35-5.4 6.5-12.425 6.025-19.55a27.46 27.46 0 0 0-8.6-18.325 23.62 23.62 0 0 0-18.125-6.35","clip-rule":"evenodd"},null,-1)]))}const YTe={render:KTe},XTe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function ZTe(n,e){return Re(),Oe("svg",XTe,e[0]||(e[0]=[be("path",{d:"M361.902 496.183a22.3 22.3 0 0 1-15.823-6.557L122.275 265.822c-8.74-8.74-8.74-22.907 0-31.646L346.079 10.372c8.74-8.74 22.906-8.74 31.646 0s8.74 22.906 0 31.645L169.755 250l207.97 207.98c8.74 8.74 8.74 22.907 0 31.647a22.3 22.3 0 0 1-15.823 6.557"},null,-1)]))}const JTe={render:ZTe},QTe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function eIe(n,e){return Re(),Oe("svg",QTe,e[0]||(e[0]=[be("path",{d:"M499.353 249.995a250.26 250.26 0 0 0-73.308-176.687A250.23 250.23 0 0 0 249.358 0c-331.652 13.713-331.577 486.325 0 500a250.26 250.26 0 0 0 176.687-73.308 250.27 250.27 0 0 0 73.308-176.687zM249.358 470.588c-58.494-.075-114.56-23.313-155.916-64.668-41.364-41.365-64.593-97.431-64.668-155.915 12.094-292.65 429.12-292.574 441.177 0-.076 58.494-23.313 114.56-64.669 155.915-41.364 41.355-97.43 64.593-155.915 64.668z"},null,-1),be("path",{d:"M358.44 187.087c-.593-51.727-44.96-82.946-94.372-77.609V88.226c0-3.897-1.543-7.642-4.301-10.4a14.74 14.74 0 0 0-10.409-4.311c-19.407.744-14.005 23.163-14.702 35.963h-63.934a14.56 14.56 0 0 0-10.447 4.555c-2.72 2.871-4.188 6.729-4.037 10.663.141 3.972 1.873 7.68 4.781 10.372a14.78 14.78 0 0 0 10.729 3.821v222.203h-16.762c-8.122 0-14.711 6.579-14.711 14.701 0 8.132 6.589 14.711 14.711 14.711h79.67v21.251c.104 8.047 6.655 14.485 14.702 14.485 8.056 0 14.597-6.438 14.71-14.485v-21.251h16.725c33.534-.292 63.049-22.062 73.308-53.977 10.221-31.906-1.139-66.795-28.197-86.541 20.367-14.485 32.461-37.901 32.536-62.899m-29.412 125.807c-.037 26.617-21.619 48.198-48.235 48.198H201.16v-96.396h79.633c26.616.038 48.198 21.582 48.235 48.198m-48.235-77.609H201.16v-96.396h79.633c26.428.255 47.718 21.76 47.718 48.198s-21.29 47.944-47.718 48.198"},null,-1)]))}const tIe={render:eIe},nIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function rIe(n,e){return Re(),Oe("svg",nIe,e[0]||(e[0]=[be("path",{d:"M465.625 44.372H34.375C15.431 44.372 0 59.803 0 78.747v342.506c0 18.95 15.431 34.375 34.375 34.375h431.25c18.95 0 34.375-15.425 34.375-34.375V78.747c0-18.944-15.425-34.375-34.375-34.375m15.625 376.856c0 8.619-7.006 15.625-15.625 15.625H34.375c-8.619 0-15.625-7.006-15.625-15.625V164.853h462.5zm0-275.125H18.75V78.722c0-8.613 7.006-15.625 15.625-15.625h431.25c8.619 0 15.625 7.012 15.625 15.625z"},null,-1),be("path",{d:"M60.013 88.922c-8.688 0-15.744 7.056-15.744 15.7 0 8.694 7.056 15.75 15.744 15.75 8.693 0 15.7-7.056 15.7-15.75 0-8.619-7.007-15.7-15.7-15.7M103.881 88.922c-8.687 0-15.743 7.056-15.743 15.7 0 8.694 7.056 15.75 15.743 15.75 8.694 0 15.75-7.056 15.75-15.75 0-8.619-7.056-15.7-15.75-15.7M147.756 88.922c-8.687 0-15.693 7.056-15.693 15.7 0 8.694 7.006 15.75 15.693 15.75 8.694 0 15.75-7.056 15.75-15.75 0-8.619-7.056-15.7-15.75-15.7M250 414.416c62.625 0 113.575-50.925 113.575-113.575 0-62.625-50.925-113.575-113.575-113.575-62.625 0-113.575 50.931-113.575 113.575 0 62.625 50.931 113.575 113.575 113.575m0-18.75c-6.369 0-16.625-18.55-21.944-50.682h43.869c-5.319 32.132-15.55 50.682-21.95 50.682zm94.825-94.8c0 8.818-1.319 17.237-3.563 25.368h-48.243c.687-8.375 1.125-16.868 1.125-25.368 0-8.494-.438-16.988-1.125-25.363h48.243c2.244 8.131 3.563 16.55 3.563 25.363m-11.006-44.138h-42.944c-2.763-17.994-7.181-34.325-13.306-46.556 24.362 7.444 44.556 24.437 56.25 46.556m-42.944 88.256h42.944c-11.694 22.119-31.888 39.113-56.25 46.557 6.125-12.257 10.568-28.563 13.306-46.557M250 206.047c6.375 0 16.631 18.556 21.95 50.681h-43.869c5.319-32.125 15.55-50.681 21.944-50.681zm-24.238 69.431h48.507c.687 7.931 1.125 16.381 1.125 25.369 0 9.006-.438 17.431-1.125 25.362h-48.507c-.687-7.931-1.125-16.381-1.125-25.362 0-9.013.438-17.438 1.125-25.369m-3.325-65.306c-6.125 12.256-10.568 28.562-13.306 46.556h-42.943c11.693-22.119 31.887-39.137 56.249-46.556m-67.262 90.7c0-8.813 1.319-17.263 3.569-25.369h48.237c-.681 8.375-1.119 16.875-1.119 25.369s.438 16.994 1.119 25.369h-48.237c-2.25-8.132-3.569-16.557-3.569-25.369m53.956 44.119c2.756 17.987 7.175 34.3 13.306 46.556-24.362-7.45-44.556-24.438-56.249-46.556zM417.506 388.166l16.069 16.018 12.181-12.131-16.062-16.069 9.175-5.637-36.863-9.913 9.863 36.913z"},null,-1)]))}const iIe={render:rIe},sIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function oIe(n,e){return Re(),Oe("svg",sIe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M496.507 244.612a18.7 18.7 0 0 0-3.169-1.836c-13.921-6.38-27.787-12.889-41.813-19.045-11.009-4.832-22.298-4.807-33.245.176-50.625 23.041-101.162 46.272-151.796 69.291-10.825 4.921-22.076 4.947-32.898.031-50.749-23.058-101.398-46.343-152.138-69.421-10.83-4.925-22.018-4.867-32.898-.103-13.694 5.995-27.228 12.346-40.806 18.594-3.441 1.586-7.411 3.067-7.493 7.554-.084 4.735 4.079 6.198 7.616 7.822 23.269 10.69 172.569 78.967 223.912 102.504 5.794 2.657 11.758 4.225 18.193 3.845q.137.532.273 1.061c5.624-1.493 11.473-2.45 16.822-4.6 9.317-3.745 226.977-103.556 229.472-105.255 4.592-3.123 4.48-7.344-.034-10.619m-3.933 133.315c-13.899-6.429-27.731-13.014-41.812-19.042-10.505-4.495-21.502-4.499-31.917.23-50.648 22.993-101.171 46.249-151.782 69.32-11.341 5.17-22.907 5.126-34.256-.05-49.935-22.775-99.8-45.706-149.8-68.351-5.46-2.472-11.616-3.476-17.745-5.249-6.132 1.657-12.272 2.616-17.806 4.95-13.097 5.519-25.913 11.675-38.823 17.616-1.883.867-3.813 1.767-5.448 2.999-4.13 3.112-4.146 7.14.017 10.181 1.945 1.422 4.228 2.442 6.447 3.46 19.6 8.99 168.884 77.296 223.977 102.356 10.819 4.923 22.041 4.831 32.89-.049 23.799-10.706 174.393-79.68 225.967-103.305 3.442-1.575 7.348-3.125 7.279-7.688-.065-4.36-3.877-5.85-7.186-7.382M2.389 118.872c1.824 1.54 4.076 2.683 6.284 3.695 74.412 34.078 148.857 68.101 223.264 102.199 5.814 2.663 11.816 3.994 18.415 4.821 5.418-1.396 11.198-2.029 16.198-4.304 75.065-34.14 150.028-68.491 224.996-102.834 2.201-1.009 4.434-2.201 6.217-3.777 2.993-2.643 2.997-5.871-.076-8.435-2.108-1.76-4.693-3.064-7.226-4.232C470.872 96.988 322.012 28.898 267.165 3.88c-11.468-5.232-23.159-5.14-34.617.094A239966 239966 0 0 0 8.256 106.576c-2.093.958-4.205 2.097-5.919 3.582-3.129 2.717-3.121 6.035.054 8.717"},null,-1)]))}const aIe={render:oIe},cIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function lIe(n,e){return Re(),Oe("svg",cIe,e[0]||(e[0]=[be("path",{d:"M414.126 401.817h-65.651v-65.651h65.651zm82.064 32.826a8.207 8.207 0 0 1-8.209 8.209H12.009c-4.532 0-8.204-3.676-8.204-8.209a8.2 8.2 0 0 1 8.204-8.204h49.239V65.357a8.207 8.207 0 0 1 8.209-8.209h246.192a8.2 8.2 0 0 1 8.204 8.209v41.029c0 4.533-3.671 8.209-8.204 8.209a8.21 8.21 0 0 1-8.209-8.209V73.561H77.661v352.878h57.447v-16.413c0-4.532 3.677-8.203 8.209-8.203a8.2 8.2 0 0 1 8.204 8.203v16.413h82.064v-98.477h-82.064v49.239c0 4.532-3.671 8.209-8.204 8.209a8.21 8.21 0 0 1-8.209-8.209v-57.448c0-4.532 3.677-8.204 8.209-8.204h98.477a8.2 8.2 0 0 1 8.204 8.204v106.681h57.447V139.207c0-4.533 3.677-8.204 8.209-8.204a8.2 8.2 0 0 1 8.204 8.204v57.447h123.099a8.204 8.204 0 0 1 8.209 8.209v221.576h32.826a8.2 8.2 0 0 1 8.204 8.204zm-57.447-221.576h-114.89v213.367h114.89zm-24.622 24.622H348.47v65.651h65.651zM176.138 106.386h-65.652v65.652h65.652zm98.476 0h-65.651v65.652h65.651zM110.486 270.515h65.652v-65.652h-65.652zm98.477 0h65.651v-65.652h-65.651z"},null,-1)]))}const uIe={render:lIe},hIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function dIe(n,e){return Re(),Oe("svg",hIe,e[0]||(e[0]=[be("path",{d:"M440.827 131.474h-96.243l-10.905-34.61c-4.267-13.275-16.593-22.283-30.342-22.283H195.24c-13.75 0-26.076 9.008-30.343 22.757l-10.904 34.136h-14.697v-7.586c0-9.482-8.06-17.542-17.542-17.542H79.56c-9.483 0-17.542 8.06-17.542 17.542v7.586h-2.845c-19.438 0-35.558 16.12-35.558 35.558V389.86c0 19.438 16.12 35.558 35.558 35.558h381.654c19.438 0 35.558-16.12 35.558-35.558V167.03c0-19.437-16.12-35.557-35.558-35.557M76.24 123.888c0-1.896 1.422-3.318 3.319-3.318h42.195c1.896 0 3.319 1.422 3.319 3.318v7.586H76.24zm385.92 265.973a21.246 21.246 0 0 1-21.334 21.334H59.173a21.246 21.246 0 0 1-21.335-21.334V167.03a21.246 21.246 0 0 1 21.335-21.334h105.251l13.75-44.092c2.37-7.585 9.007-12.8 17.067-12.8h108.096c7.585 0 14.697 5.215 17.067 12.326l13.75 44.566h106.673a21.246 21.246 0 0 1 21.335 21.335z"},null,-1),be("path",{d:"M249.763 161.343c-60.685 0-110.466 49.78-110.466 110.466s49.78 110.466 110.466 110.466 110.466-49.78 110.466-110.466-49.78-110.466-110.466-110.466m0 206.709c-53.1 0-96.243-43.144-96.243-96.243s43.143-96.243 96.243-96.243 96.243 43.143 96.243 96.243-43.143 96.243-96.243 96.243M422.811 167.032h-42.195c-9.482 0-17.542 8.06-17.542 17.542V196.9c0 9.482 8.06 17.542 17.542 17.542h42.195c9.482 0 17.542-8.06 17.542-17.542v-12.326c0-9.482-8.06-17.542-17.542-17.542m3.319 29.868c0 1.897-1.423 3.32-3.319 3.32h-42.195c-1.897 0-3.319-1.423-3.319-3.32v-12.326c0-1.897 1.422-3.32 3.319-3.32h42.195c1.896 0 3.319 1.423 3.319 3.32z"},null,-1)]))}const fIe={render:dIe},pIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function mIe(n,e){return Re(),Oe("svg",pIe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M0 130.96c0-32.88 26.651-59.531 59.531-59.531h380.937C473.343 71.429 500 98.08 500 130.96v238.08c0 32.874-26.657 59.531-59.532 59.531H59.531C26.651 428.571 0 401.914 0 369.04zm59.531-35.714c-19.737 0-35.714 15.977-35.714 35.714v238.08c0 19.731 15.977 35.714 35.714 35.714h380.937c19.732 0 35.715-15.983 35.715-35.714V130.96c0-19.737-15.983-35.714-35.715-35.714z"},null,-1),be("path",{"fill-rule":"evenodd",d:"M333.326 238.103c-13.149 0-23.8-10.674-23.8-23.817 0-13.149 10.651-23.817 23.8-23.817 7.611 0 14.394 3.571 18.771 9.148l18.749-14.663c-8.703-11.12-22.275-18.28-37.52-18.28-26.298 0-47.612 21.315-47.612 47.612 0 26.291 21.314 47.611 47.612 47.611 14.102 0 26.782-6.143 35.485-15.874l-17.72-15.869c-4.4 4.886-10.714 7.949-17.771 7.949z"},null,-1),be("path",{"fill-rule":"evenodd",d:"M392.857 238.103c-13.149 0-23.817-10.674-23.817-23.817 0-13.149 10.668-23.817 23.817-23.817 13.143 0 23.817 10.668 23.817 23.817 0 13.143-10.674 23.817-23.817 23.817m-47.611-23.817c0 26.291 21.314 47.611 47.611 47.611 26.291 0 47.611-21.32 47.611-47.611 0-26.297-21.32-47.612-47.611-47.612-26.297 0-47.611 21.315-47.611 47.612M0 333.326c0 6.583 5.331 11.914 11.897 11.914h476.206c6.56 0 11.897-5.331 11.897-11.914 0-6.566-5.337-11.897-11.897-11.897H11.897C5.331 321.429 0 326.76 0 333.326"},null,-1)]))}const gIe={render:mIe},yIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function wIe(n,e){return Re(),Oe("svg",yIe,e[0]||(e[0]=[be("path",{d:"M137.675 301.853H405.57a17.28 17.28 0 0 0 15.728-10.197l69.134-155.552a17.284 17.284 0 0 0-15.728-24.37H109.676L94.466 38.97a17.284 17.284 0 0 0-17.284-13.654h-51.85a17.284 17.284 0 0 0 0 34.567h37.85l45.975 214.835a59.974 59.974 0 0 0 10.37 110.442 59.3 59.3 0 0 0-7.777 29.036 60.492 60.492 0 0 0 120.984 0 59.6 59.6 0 0 0-6.049-25.925h63.95a59.6 59.6 0 0 0-6.05 25.925 60.492 60.492 0 0 0 120.985 0 59.6 59.6 0 0 0-6.05-25.925h23.334a17.284 17.284 0 0 0 0-34.567h-285.18a25.925 25.925 0 0 1 0-51.851m60.492 112.343a25.925 25.925 0 1 1-25.925-25.925 25.925 25.925 0 0 1 25.925 25.925m172.836 0a25.925 25.925 0 1 1-25.925-25.925 25.925 25.925 0 0 1 25.925 25.925m77.085-267.895-53.752 120.985H143.033L117.107 146.3Z","data-name":"Layer 21"},null,-1)]))}const vIe={render:wIe},bIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function _Ie(n,e){return Re(),Oe("svg",bIe,e[0]||(e[0]=[be("path",{d:"M94.16 4.553 49.308 52.847 35.531 33.728c-1.433-2.166-4.675-1.97-5.834.355a3.37 3.37 0 0 0 .368 3.592l16.184 22.472a3.38 3.38 0 0 0 2.53 1.394h.203a3.38 3.38 0 0 0 2.474-1.124L99.098 9.142c1.765-1.905.807-5.008-1.724-5.585a3.38 3.38 0 0 0-3.225.996z"},null,-1),be("path",{d:"M91.787 37.72a3.375 3.375 0 0 0-2.643 3.971c.551 2.743.83 5.534.833 8.333 0 32.034-34.678 52.055-62.421 36.038A41.61 41.61 0 0 1 6.75 50.024C6.746 18.513 40.408-1.568 68.135 13.405c2.285 1.246 5.063-.449 5-3.052a3.38 3.38 0 0 0-1.761-2.887C38.63-10.249-1.012 14.128.02 51.341c1.032 37.215 41.962 59.358 73.674 39.857a48.36 48.36 0 0 0 23.031-41.174 49.3 49.3 0 0 0-.968-9.661 3.373 3.373 0 0 0-3.97-2.643"},null,-1)]))}const EIe={render:_Ie},xIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function SIe(n,e){return Re(),Oe("svg",xIe,e[0]||(e[0]=[be("path",{d:"M17.832 116.303A17.84 17.833 0 0 0 5.39 146.908L237.27 378.71a17.84 17.833 0 0 0 25.216 0l231.882-231.802a17.84 17.833 0 1 0-25.216-25.208L249.846 340.932 30.605 121.7a17.84 17.833 0 0 0-12.773-5.397"},null,-1)]))}const AIe={render:SIe},CIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function TIe(n,e){return Re(),Oe("svg",CIe,e[0]||(e[0]=[be("path",{d:"M1.587 284.572a.529.528 0 0 0-.369.906l6.871 6.87a.529.528 0 0 0 .748 0l6.871-6.87a.529.528 0 1 0-.747-.747l-6.499 6.497-6.497-6.497a.529.528 0 0 0-.378-.16",style:{"transform-origin":"8.46662px 288.533px"},transform:"rotate(90 140.034 101.5)scale(33.74584)"},null,-1)]))}const IIe={render:TIe},MIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function RIe(n,e){return Re(),Oe("svg",MIe,e[0]||(e[0]=[be("path",{d:"M1.587 284.572a.529.528 0 0 0-.369.906l6.871 6.87a.529.528 0 0 0 .748 0l6.871-6.87a.529.528 0 1 0-.747-.747l-6.499 6.497-6.497-6.497a.529.528 0 0 0-.378-.16",style:{"transform-origin":"8.46662px 288.533px"},transform:"rotate(-90 101.5 -140.033)scale(33.74584)"},null,-1)]))}const PIe={render:RIe},NIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function OIe(n,e){return Re(),Oe("svg",NIe,e[0]||(e[0]=[be("path",{d:"M1.587 284.572a.529.528 0 0 0-.369.906l6.871 6.87a.529.528 0 0 0 .748 0l6.871-6.87a.529.528 0 1 0-.747-.747l-6.499 6.497-6.497-6.497a.529.528 0 0 0-.378-.16",style:{"transform-origin":"8.46662px 288.533px"},transform:"rotate(179.98 120.767 -19.267)scale(33.74584)"},null,-1)]))}const kIe={render:OIe},DIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function LIe(n,e){return Re(),Oe("svg",DIe,e[0]||(e[0]=[be("path",{d:"M250 2.354C113.441 2.354 2.354 113.476 2.354 250.077S113.441 497.799 250 497.799s247.646-111.121 247.646-247.722S386.559 2.354 250 2.354m0 460.056c-117.104 0-212.268-95.193-212.268-212.333S132.896 37.743 250 37.743s212.268 95.194 212.268 212.334S367.104 462.41 250 462.41m-21.934-347.694L334.2 238.577c5.66 6.545 5.66 16.454 0 22.999L228.066 385.437c-6.368 7.435-17.514 8.319-24.94 1.948-7.433-6.37-8.316-17.518-1.948-24.948l96.229-112.36-96.229-112.362c-6.368-7.434-5.485-18.583 1.948-24.953 3.362-2.83 7.426-4.247 11.496-4.247 4.953 0 9.906 2.124 13.444 6.195z",style:{"transform-box":"fill-box","transform-origin":"50% 50%"},transform:"rotate(180 0 0)"},null,-1)]))}const UIe={render:LIe},BIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function FIe(n,e){return Re(),Oe("svg",BIe,e[0]||(e[0]=[be("path",{d:"M250 497.646C113.441 497.646 2.354 386.559 2.354 250S113.441 2.354 250 2.354 497.646 113.441 497.646 250 386.559 497.646 250 497.646m0-459.914C132.896 37.732 37.732 132.896 37.732 250S132.896 462.268 250 462.268 462.268 367.104 462.268 250 367.104 37.732 250 37.732m-21.934 347.587L334.2 261.496c5.66-6.543 5.66-16.449 0-22.992L228.066 114.681c-6.368-7.432-17.514-8.316-24.94-1.947-7.433 6.368-8.316 17.513-1.948 24.94L297.407 250l-96.229 112.327c-6.368 7.432-5.485 18.577 1.948 24.945 3.362 2.83 7.426 4.246 11.496 4.246 4.953 0 9.906-2.123 13.444-6.193z"},null,-1)]))}const $Ie={render:FIe},zIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function HIe(n,e){return Re(),Oe("svg",zIe,e[0]||(e[0]=[be("path",{d:"M459.28 444.868H329.37c-11.928 0-21.638 9.685-21.638 21.663 0 11.923 9.684 21.638 21.638 21.638H459.28c11.948 0 21.663-9.684 21.663-21.638 0-11.953-9.715-21.663-21.663-21.663m0 28.85H329.37c-3.978 0-7.213-3.24-7.213-7.212 0-3.978 3.21-7.243 7.213-7.243H459.28c3.972 0 7.238 3.265 7.238 7.243 0 3.972-3.24 7.213-7.238 7.213M476.864 311.716l-65.523-35.722c-10.422-5.686-23.636-5.686-34.013 0l-65.518 35.722c-6.978 3.82-11.292 11.083-11.292 19.008v5.87c0 11.922 9.71 21.663 21.663 21.663H466.52c11.922 0 21.663-9.71 21.663-21.663v-5.87a21.67 21.67 0 0 0-11.292-19.008zm-3.158 24.903a7.207 7.207 0 0 1-7.213 7.213H322.156c-3.978 0-7.238-3.235-7.238-7.213v-5.87a7.24 7.24 0 0 1 3.764-6.342l65.544-35.748c3.082-1.688 6.581-2.553 10.086-2.553 3.5 0 6.999.865 10.107 2.553l65.523 35.748a7.25 7.25 0 0 1 3.764 6.342zM336.606 430.438v-57.726c0-3.977-3.234-7.243-7.237-7.243s-7.213 3.24-7.213 7.243v57.726a7.204 7.204 0 0 0 7.213 7.213c4.003 0 7.237-3.21 7.237-7.213M379.912 430.438v-57.726c0-3.977-3.24-7.243-7.243-7.243-3.998 0-7.212 3.24-7.212 7.243v57.726a7.207 7.207 0 0 0 7.212 7.213c4.003 0 7.243-3.21 7.243-7.213M423.188 430.438v-57.726c0-3.977-3.21-7.243-7.213-7.243a7.235 7.235 0 0 0-7.238 7.243v57.726c0 3.978 3.235 7.213 7.238 7.213a7.19 7.19 0 0 0 7.213-7.213M466.519 430.438v-57.726c0-3.977-3.24-7.243-7.238-7.243-4.003 0-7.213 3.24-7.213 7.243v57.726a7.204 7.204 0 0 0 7.213 7.213c3.998 0 7.238-3.21 7.238-7.213M177.819 343.832c0-13.423-9.242-24.639-21.663-27.848v-30.275c48.356-3.713 86.606-44.145 86.606-93.453 0-51.754-42.095-93.818-93.819-93.818-51.729 0-93.824 42.064-93.824 93.818 0 49.308 38.25 89.766 86.606 93.453v30.275c-12.42 3.21-21.637 14.425-21.637 27.848 0 13.402 9.216 24.613 21.637 27.828v30.93c-12.42 3.21-21.637 14.425-21.637 27.848 0 13.403 9.216 24.613 21.637 27.853v22.666c0 3.977 3.24 7.212 7.244 7.212a7.19 7.19 0 0 0 7.212-7.212V458.29c12.426-3.24 21.663-14.45 21.663-27.853 0-13.423-9.237-24.638-21.663-27.848v-30.93c12.426-3.215 21.663-14.426 21.663-27.828zm-64.97-80.946v-12.873c0-19.903 16.216-36.088 36.094-36.088 19.898 0 36.088 16.185 36.088 36.088v12.873c-10.844 5.58-23.087 8.764-36.088 8.764-12.98 0-25.249-3.184-36.093-8.764m-43.274-70.604c0-43.804 35.615-79.394 79.368-79.394 43.774 0 79.394 35.62 79.394 79.394 0 24.588-11.241 46.622-28.88 61.18v-3.45c0-27.852-22.666-50.518-50.514-50.518-27.853 0-50.518 22.666-50.518 50.519v3.448c-17.61-14.557-28.88-36.591-28.88-61.18zm64.938 151.55c0-7.976 6.48-14.45 14.43-14.45s14.425 6.474 14.425 14.45c0 7.95-6.475 14.425-14.425 14.425s-14.43-6.475-14.43-14.425m28.855 86.606c0 7.95-6.475 14.43-14.425 14.43s-14.43-6.48-14.43-14.43c0-7.975 6.48-14.45 14.43-14.45s14.425 6.475 14.425 14.45"},null,-1),be("path",{d:"M148.943 185.044c15.926 0 28.876-12.95 28.876-28.85 0-15.926-12.95-28.88-28.876-28.88-15.9 0-28.855 12.954-28.855 28.88 0 15.9 12.955 28.85 28.855 28.85m0-43.3c7.976 0 14.45 6.474 14.45 14.45 0 7.95-6.474 14.425-14.45 14.425-7.95 0-14.43-6.475-14.43-14.425 0-7.976 6.48-14.45 14.43-14.45"},null,-1),be("path",{d:"M111.507 444.868H47.932c-11.948 0-21.663-9.715-21.663-21.668V84.012h360.856v173.346c0 3.977 3.235 7.212 7.238 7.212a7.19 7.19 0 0 0 7.212-7.212l-.025-209.439c0-19.898-16.19-36.088-36.093-36.088H47.907c-19.899 0-36.089 16.216-36.089 36.088v375.307c0 19.903 16.19 36.093 36.088 36.093h63.576c4.003 0 7.212-3.24 7.212-7.238a7.204 7.204 0 0 0-7.212-7.213zM26.27 47.92c0-11.948 9.715-21.663 21.663-21.663h317.525c11.953 0 21.668 9.69 21.668 21.663v21.643H26.269zM286.088 444.868h-43.3c-4.004 0-7.238 3.21-7.238 7.213a7.234 7.234 0 0 0 7.238 7.238h43.3c4.003 0 7.218-3.24 7.218-7.238a7.21 7.21 0 0 0-7.218-7.213"},null,-1),be("path",{d:"M62.362 40.707H55.12c-3.972 0-7.213 3.24-7.213 7.212 0 4.003 3.24 7.243 7.213 7.243h7.243c3.998 0 7.213-3.24 7.213-7.243a7.21 7.21 0 0 0-7.213-7.212M98.425 40.707h-7.213c-4.003 0-7.238 3.24-7.238 7.212a7.235 7.235 0 0 0 7.238 7.243h7.213a7.235 7.235 0 0 0 7.238-7.243c0-3.972-3.235-7.212-7.238-7.212M134.513 40.707h-7.238c-3.973 0-7.213 3.24-7.213 7.212 0 4.003 3.24 7.243 7.213 7.243h7.238c4.003 0 7.212-3.24 7.212-7.243a7.207 7.207 0 0 0-7.212-7.212M242.762 329.381h-43.306c-3.972 0-7.212 3.24-7.212 7.238 0 3.978 3.24 7.213 7.212 7.213h43.306c3.998 0 7.238-3.21 7.238-7.213 0-3.972-3.24-7.238-7.238-7.238M199.456 365.47h14.45a7.19 7.19 0 0 0 7.218-7.213c0-3.973-3.214-7.238-7.217-7.238h-14.45c-3.973 0-7.213 3.24-7.213 7.238 0 3.977 3.24 7.212 7.212 7.212M199.456 430.438h43.306A7.234 7.234 0 0 0 250 423.2c0-3.972-3.24-7.212-7.238-7.212h-43.306a7.207 7.207 0 0 0-7.212 7.212c0 3.978 3.24 7.238 7.212 7.238M213.907 437.625h-14.425a7.24 7.24 0 0 0-7.238 7.243c0 3.973 3.24 7.213 7.238 7.213h14.425a7.195 7.195 0 0 0 7.217-7.213c0-3.977-3.214-7.243-7.217-7.243"},null,-1)]))}const VIe={render:HIe},WIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function qIe(n,e){return Re(),Oe("svg",WIe,e[0]||(e[0]=[be("path",{d:"M434.207 342.103H223.692c-36.328-.021-65.773-29.466-65.794-65.794V65.794C157.919 29.487 187.364.021 223.692 0h210.515c36.306.021 65.772 29.487 65.794 65.794v210.515c-.022 36.328-29.488 65.773-65.794 65.794M223.692 26.309c-21.805.042-39.443 17.701-39.485 39.485v210.515c.042 21.805 17.68 39.443 39.485 39.485h210.515c21.784-.042 39.442-17.68 39.484-39.485V65.794c-.042-21.784-17.7-39.443-39.484-39.485zm92.103 355.258v52.639c-.043 21.784-17.68 39.443-39.485 39.485H65.795c-21.784-.042-39.443-17.701-39.485-39.485V223.691c.042-21.805 17.701-39.443 39.485-39.485h52.639v-26.309H65.795C29.488 157.918.022 187.363.001 223.691v210.515C.022 470.513 29.488 499.979 65.795 500H276.31c36.327-.021 65.773-29.487 65.794-65.794v-52.639z"},null,-1)]))}const jIe={render:qIe},GIe={xmlns:"http://www.w3.org/2000/svg",width:"700pt",height:"700pt",viewBox:"0 0 700 700"};function KIe(n,e){return Re(),Oe("svg",GIe,e[0]||(e[0]=[be("path",{d:"m375.443 329.558 204.896-204.575a32.66 32.66 0 0 0 8.456-31.547 32.68 32.68 0 0 0-23.09-23.09 32.66 32.66 0 0 0-31.548 8.457L329.583 283.698 125.009 78.803a32.66 32.66 0 0 0-31.547-8.457 32.68 32.68 0 0 0-23.09 23.09 32.65 32.65 0 0 0 8.455 31.547l204.895 204.575L78.827 534.132a32.53 32.53 0 0 0-9.621 23.09 32.5 32.5 0 0 0 9.621 23.091 32.51 32.51 0 0 0 23.09 9.621 32.53 32.53 0 0 0 23.091-9.621l204.574-204.895 204.574 204.895a32.53 32.53 0 0 0 23.091 9.621 32.51 32.51 0 0 0 23.091-9.621 32.524 32.524 0 0 0 0-46.181z"},null,-1)]))}const YIe={render:KIe},XIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function ZIe(n,e){return Re(),Oe("svg",XIe,e[0]||(e[0]=[be("path",{d:"M198.184 452.518c0 10.657-8.641 19.286-19.288 19.286h-9.644c-53.261 0-96.436-43.173-96.436-96.436v-64.787a19.3 19.3 0 0 0-6.384-14.339l-35.451-31.901A19.27 19.27 0 0 1 24.598 250a19.26 19.26 0 0 1 6.383-14.332l35.451-31.91a19.28 19.28 0 0 0 6.384-14.33v-64.797c0-53.262 43.175-96.435 96.436-96.435h9.644c10.647 0 19.288 8.64 19.288 19.286 0 10.658-8.641 19.288-19.288 19.288h-9.644c-31.958 0-57.862 25.912-57.862 57.861v64.797a57.87 57.87 0 0 1-19.153 43.011L72.709 250l19.528 17.57a57.87 57.87 0 0 1 19.153 43.011v64.787c0 31.959 25.904 57.862 57.862 57.862h9.644c10.647 0 19.288 8.641 19.288 19.288M301.885 452.339c0 10.646 8.624 19.268 19.271 19.268h9.636c53.213 0 96.349-43.135 96.349-96.351v-64.728a19.26 19.26 0 0 1 6.379-14.327l35.419-31.873A19.3 19.3 0 0 0 475.317 250a19.27 19.27 0 0 0-6.378-14.319l-35.419-31.882a19.24 19.24 0 0 1-6.379-14.318v-64.738c0-53.215-43.136-96.35-96.349-96.35h-9.636c-10.647 0-19.271 8.633-19.271 19.268 0 10.649 8.624 19.271 19.271 19.271h9.636c31.921 0 57.81 25.89 57.81 57.811v64.738a57.82 57.82 0 0 0 19.136 42.973l19.5 17.546-19.5 17.555a57.82 57.82 0 0 0-19.136 42.973v64.728c0 31.931-25.889 57.812-57.81 57.812h-9.636c-10.647 0-19.271 8.632-19.271 19.271"},null,-1),be("path",{d:"M174.502 265.099c8.336 0 15.099-6.756 15.099-15.099 0-8.334-6.763-15.099-15.099-15.099-8.34 0-15.098 6.765-15.098 15.099 0 8.343 6.758 15.099 15.098 15.099M249.996 265.099c8.334 0 15.099-6.756 15.099-15.099 0-8.334-6.765-15.099-15.099-15.099-8.343 0-15.099 6.765-15.099 15.099 0 8.343 6.756 15.099 15.099 15.099M340.588 250c0 8.343-6.765 15.099-15.098 15.099-8.343 0-15.099-6.756-15.099-15.099 0-8.334 6.756-15.099 15.099-15.099 8.333 0 15.098 6.765 15.098 15.099"},null,-1),be("path",{d:"M198.184 452.518c0 10.657-8.641 19.286-19.288 19.286h-9.644c-53.261 0-96.436-43.173-96.436-96.436v-64.787a19.3 19.3 0 0 0-6.384-14.339l-35.451-31.901A19.27 19.27 0 0 1 24.598 250a19.26 19.26 0 0 1 6.383-14.332l35.451-31.91a19.28 19.28 0 0 0 6.384-14.33v-64.797c0-53.262 43.175-96.435 96.436-96.435h9.644c10.647 0 19.288 8.64 19.288 19.286 0 10.658-8.641 19.288-19.288 19.288h-9.644c-31.958 0-57.862 25.912-57.862 57.861v64.797a57.87 57.87 0 0 1-19.153 43.011L72.709 250l19.528 17.57a57.87 57.87 0 0 1 19.153 43.011v64.787c0 31.959 25.904 57.862 57.862 57.862h9.644c10.647 0 19.288 8.641 19.288 19.288M301.885 452.339c0 10.646 8.624 19.268 19.271 19.268h9.636c53.213 0 96.349-43.135 96.349-96.351v-64.728a19.26 19.26 0 0 1 6.379-14.327l35.419-31.873A19.3 19.3 0 0 0 475.317 250a19.27 19.27 0 0 0-6.378-14.319l-35.419-31.882a19.24 19.24 0 0 1-6.379-14.318v-64.738c0-53.215-43.136-96.35-96.349-96.35h-9.636c-10.647 0-19.271 8.633-19.271 19.268 0 10.649 8.624 19.271 19.271 19.271h9.636c31.921 0 57.81 25.89 57.81 57.811v64.738a57.82 57.82 0 0 0 19.136 42.973l19.5 17.546-19.5 17.555a57.82 57.82 0 0 0-19.136 42.973v64.728c0 31.931-25.889 57.812-57.81 57.812h-9.636c-10.647 0-19.271 8.632-19.271 19.271"},null,-1),be("path",{d:"M174.502 265.099c8.336 0 15.099-6.756 15.099-15.099 0-8.334-6.763-15.099-15.099-15.099-8.34 0-15.098 6.765-15.098 15.099 0 8.343 6.758 15.099 15.098 15.099M249.996 265.099c8.334 0 15.099-6.756 15.099-15.099 0-8.334-6.765-15.099-15.099-15.099-8.343 0-15.099 6.765-15.099 15.099 0 8.343 6.756 15.099 15.099 15.099M340.588 250c0 8.343-6.765 15.099-15.098 15.099-8.343 0-15.099-6.756-15.099-15.099 0-8.334 6.756-15.099 15.099-15.099 8.333 0 15.098 6.765 15.098 15.099"},null,-1)]))}const JIe={render:ZIe},QIe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function eMe(n,e){return Re(),Oe("svg",QIe,e[0]||(e[0]=[be("path",{d:"M499.857 215.557c1.169-18.222-4.866-36.014-16.618-48.818-18.504-20.273-48.713-16.23-62.639-12.993.111-4.177.341-8.355.341-12.627h-.112c.065-.594.112-1.123.112-1.698 0-42.256-80.385-75.332-183.029-75.332S54.883 97.165 54.883 139.421c0 .599.07 1.175.117 1.698h-.117c0 52.473 10.741 101.245 29.792 141.485C30.027 297.482 0 320.869 0 348.939c0 47.955 108.067 86.972 240.92 86.972s240.921-39.017 240.921-86.972c0-14.872-8.697-35.597-47.761-53.343 12.921-6.887 25.267-14.573 35.068-22.905 18.504-15.701 29.428-35.968 30.715-57.134zm-83.435-16.089c6.517-3.12 22.975-9.642 34.311-1.539 5.946 4.225 8.931 10.218 8.814 17.446-.294 12.81-10.348 26.742-26.784 37.325a464 464 0 0 1-37.783 21.847c9.801-22.834 17.146-48.107 21.442-75.079m-178.51-123.58c102.485 0 171.276 32.848 171.276 63.58 0 11.293-9.272 22.793-26.101 32.917-15.513-17.105-74.621-37.483-145.205-37.483-70.924 0-130.285 19.62-145.433 37.366-16.618-10.101-25.843-21.577-25.843-32.777 0-30.755 68.885-63.603 171.3-63.603zm0 138.847c78.316 0 143.665-19.28 170.225-47.191-4.114 57.403-21.513 108.778-48.596 146.556-15.859 22.1-34.957 39.593-56.692 50.887-25.573 13.679-100.241 13.632-128.746-.071-59.59-30.138-99.776-106.069-106.369-197.308 26.554 27.865 91.837 47.127 170.178 47.127m232.223 134.28c0 35.604-94.135 75.22-229.168 75.22s-229.168-39.663-229.168-75.22c0-22.335 28.505-42.419 78.317-55.64 19.556 36.907 46.409 65.694 78.728 82.083 16.089 7.692 43.654 11.57 70.742 11.57 27.266 0 54.166-3.878 68.633-11.641 22.329-11.517 42.003-29.192 58.462-51.298 12.692-4.29 32.959-11.682 53.525-21.507 32.231 12.646 49.924 29.034 49.924 46.433zm-8.585-85.203c-22.264 18.98-59.63 34.845-83.734 43.841 3.167-5.118 6.105-10.4 8.996-15.93 9.273-4.336 28.969-14.232 52.245-29.151 19.738-12.692 31.789-30.25 32.201-46.938.299-11.112-4.589-20.796-13.68-27.271-13.039-9.273-29.034-6.176-39.364-2.41.758-6.587 1.399-13.15 1.81-19.925 9.413-2.521 38.724-8.744 54.583 8.585 9.572 10.471 14.508 25.091 13.568 40.192-.828 12.763-6.058 31.496-26.625 49.007"},null,-1)]))}const tMe={render:eMe},nMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function rMe(n,e){return Re(),Oe("svg",nMe,e[0]||(e[0]=[be("path",{d:"M49.998 0c13.805 0 26.305 5.596 35.355 14.646S99.999 36.196 99.999 50c0 5.014-.742 9.863-2.121 14.44a49.8 49.8 0 0 1-5.625 12.29l5.797 20.286a2.34 2.34 0 0 1-3.197 2.784l-19.451-6.732a49.6 49.6 0 0 1-11.687 5.024A50 50 0 0 1 50.002 100c-13.805 0-26.305-5.596-35.355-14.646S.002 63.804.002 50s5.596-26.304 14.645-35.354C23.697 5.596 36.197 0 50.002 0zM33.322 61.634a2.34 2.34 0 0 1-2.343-2.343 2.34 2.34 0 0 1 2.343-2.343h33.35a2.34 2.34 0 0 1 2.342 2.343 2.34 2.34 0 0 1-2.343 2.343zm-6.781-18.578a2.34 2.34 0 0 1-2.343-2.343 2.34 2.34 0 0 1 2.343-2.343h46.912a2.34 2.34 0 0 1 2.343 2.343 2.34 2.34 0 0 1-2.343 2.343zm55.496-25.094c-8.2-8.2-19.53-13.273-32.042-13.273S26.153 9.76 17.954 17.962C9.755 26.16 4.68 37.49 4.68 50.003c0 12.513 5.071 23.843 13.273 32.042 8.199 8.198 19.529 13.272 32.041 13.272 4.317 0 8.487-.6 12.432-1.723a45 45 0 0 0 11.452-5.074l.003.006a2.33 2.33 0 0 1 1.992-.225l16.432 5.687-4.854-16.99h.003a2.33 2.33 0 0 1 .3-1.93 45.1 45.1 0 0 0 5.63-11.955 45.3 45.3 0 0 0 1.921-13.104c0-12.512-5.07-23.842-13.272-32.041z",class:"fil0"},null,-1)]))}const iMe={render:rMe},sMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function oMe(n,e){return Re(),Oe("svg",sMe,e[0]||(e[0]=[be("path",{d:"M417.176 325.411a97.5 97.5 0 0 0-18.058-14.248V70.259c-.02-13.29-10.76-24.051-24.051-24.071h-20.28v-14.61c-.02-13.276-10.78-24.056-24.071-24.071H78.195c-13.29.015-24.051 10.8-24.051 24.071v341.9c0 13.271 10.78 24.031 24.051 24.051h20.26l.02 14.591c0 13.291 10.78 24.051 24.051 24.071h136.879A97.85 97.85 0 0 0 322.84 489.2a97.83 97.83 0 0 0 81.399-14.477 97.86 97.86 0 0 0 41.253-71.67 97.82 97.82 0 0 0-28.351-77.662zM78.195 383.79c-5.704 0-10.316-4.633-10.316-10.317v-341.9c0-5.679 4.612-10.312 10.316-10.312h252.521c5.699 0 10.312 4.633 10.312 10.312v14.615H122.521c-13.271.02-24.031 10.781-24.051 24.071V383.79zm44.326 38.662c-5.699 0-10.311-4.628-10.311-10.332V70.259c0-5.698 4.632-10.331 10.311-10.331h252.541c5.704 0 10.312 4.633 10.332 10.331v233.94a98.04 98.04 0 0 0-72.447-.917 98.02 98.02 0 0 0-53.258 49.119H136.435c-3.716.094-6.67 3.153-6.67 6.869 0 3.717 2.954 6.77 6.67 6.87h117.904a97 97 0 0 0-3.931 21.54H136.435c-3.716.095-6.67 3.153-6.67 6.87s2.954 6.77 6.67 6.869h113.953a98 98 0 0 0 3.776 21.033zm284.921 31.603a84 84 0 0 1-59.43 24.579 84 84 0 0 1-59.41-24.619 84.06 84.06 0 0 1 0-118.861c15.742-15.761 37.128-24.613 59.41-24.633a84 84 0 0 1 59.43 24.594 84.06 84.06 0 0 1 24.634 59.47 84.09 84.09 0 0 1-24.634 59.47M220.359 266.508h119.772c3.717.1 6.676 3.154 6.676 6.87s-2.959 6.77-6.676 6.87H220.379a6.85 6.85 0 0 1-5.001-1.948 6.9 6.9 0 0 1-2.082-4.922 6.86 6.86 0 0 1 2.082-4.922 6.85 6.85 0 0 1 5.001-1.948zm57.423 49.856c0 3.796-3.074 6.87-6.87 6.889h-50.538a7 7 0 0 1-5.001-1.947 6.95 6.95 0 0 1-2.082-4.942 6.93 6.93 0 0 1 2.082-4.922 7 7 0 0 1 5.001-1.948h50.538a6.87 6.87 0 0 1 6.87 6.87m112.3 48.396v.02a6.895 6.895 0 0 1 0 9.709l-49.896 49.915a6.86 6.86 0 0 1-9.709 0l-24.599-24.579a6.87 6.87 0 0 1-2.003-4.842c0-1.833.723-3.582 2.003-4.867 2.69-2.685 7.049-2.685 9.714 0l19.692 19.692 45.049-45.048.02.02a6.8 6.8 0 0 1 4.862-2.023c1.813 0 3.561.718 4.867 2.023zM257.776 159.579h66.589a6.88 6.88 0 0 0 4.981-2.122 6.88 6.88 0 0 0 1.888-5.076 77.13 77.13 0 0 0-22.492-50.613 77.26 77.26 0 0 0-50.612-22.517c-1.868-.08-3.722.603-5.062 1.888a6.88 6.88 0 0 0-2.142 4.982v66.588c0 3.796 3.074 6.87 6.85 6.87m6.87-65.831c26.736 4.398 47.693 25.356 52.092 52.092h-52.092zm-21.152 151.335a77.08 77.08 0 0 0 53.163-21.192 77.13 77.13 0 0 0 23.917-51.998c.094-1.868-.603-3.696-1.888-5.061a6.88 6.88 0 0 0-4.982-2.117h-66.977V97.738h.02c-.02-1.888-.777-3.682-2.142-4.982a6.95 6.95 0 0 0-5.057-1.888c-27.049 1.42-51.389 16.908-64.117 40.824-12.728 23.917-11.971 52.735 1.962 75.969a77.19 77.19 0 0 0 66.121 37.457zm0-13.739a63.26 63.26 0 0 1-28.121-6.596l28.783-46.354h61.921c-5.121 30.572-31.583 52.969-62.578 52.95zm-10.506-126.019v62.578c0 .703.074 1.4.214 2.102l-29.426 47.325a63.41 63.41 0 0 1-21.675-65.462c6.302-24.191 26.228-42.424 50.887-46.548zM136.43 328.544h57.931a6.866 6.866 0 0 0 6.864-6.87v-56.939a6.8 6.8 0 0 0-2.022-4.862 6.86 6.86 0 0 0-4.842-2.008H136.43a6.87 6.87 0 0 0-6.87 6.87v56.939c0 1.829.738 3.562 2.023 4.867a6.88 6.88 0 0 0 4.847 2.003m6.884-56.939h44.177v43.18h-44.177z"},null,-1)]))}const aMe={render:oMe},cMe={xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100"};function lMe(n,e){return Re(),Oe("svg",cMe,e[0]||(e[0]=[be("path",{d:"M42.543 82.394h.038a2.04 2.04 0 0 0 2.003-2.078l-1.02-54.866c-.022-1.126-.958-2.051-2.078-2.002a2.04 2.04 0 0 0-2.003 2.078l1.02 54.867a2.04 2.04 0 0 0 2.04 2.001m14.919 0a2.04 2.04 0 0 0 2.04-2.002l1.02-54.867a2.04 2.04 0 0 0-2.003-2.078h-.038a2.04 2.04 0 0 0-2.04 2.003l-1.02 54.866a2.04 2.04 0 0 0 2.003 2.078zm20.043-58.946c-1.169-.019-2.069.848-2.105 1.974l-2.042 63.457a3.647 3.647 0 0 1-3.639 3.645H30.291c-2.011 0-3.646-1.635-3.647-3.711l-2.04-63.393a2.041 2.041 0 0 0-4.078.131l2.039 63.326c0 4.26 3.465 7.726 7.726 7.726h39.428c4.257 0 7.719-3.466 7.718-7.66l2.041-63.393a2.04 2.04 0 0 0-1.973-2.102m5.161-10.201H66.233l-1.704-8.224a2.04 2.04 0 0 0-1.997-1.626H37.477a2.04 2.04 0 0 0-1.998 1.626l-1.704 8.224H17.334a2.04 2.04 0 0 0 0 4.08h65.332a2.04 2.04 0 0 0 0-4.08m-44.723 0 1.195-5.769h21.734l1.195 5.769z"},null,-1)]))}const uMe={render:lMe},hMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function dMe(n,e){return Re(),Oe("svg",hMe,e[0]||(e[0]=[be("path",{d:"M423.548 88.89a407.2 407.2 0 0 0-103.154-32.414c-4.444 8.033-9.635 18.839-13.214 27.434q-57.692-8.676-114.323 0c-3.578-8.595-8.887-19.4-13.37-27.434A405.9 405.9 0 0 0 76.254 88.97c-65.282 98.65-82.98 194.85-74.13 289.684 43.298 32.334 85.26 51.976 126.513 64.83a314.6 314.6 0 0 0 27.096-44.626c-14.905-5.663-29.18-12.652-42.669-20.766a212 212 0 0 0 10.46-8.275c82.272 38.48 171.661 38.48 252.95 0a257 257 0 0 0 10.46 8.275 266 266 0 0 1-42.747 20.806c7.825 15.665 16.87 30.608 27.095 44.625 41.294-12.853 83.294-32.494 126.593-64.87 10.382-109.936-17.736-205.252-74.327-289.763M166.94 320.334c-24.697 0-44.95-23.056-44.95-51.133s19.82-51.172 44.95-51.172 45.383 23.055 44.95 51.172c.04 28.077-19.82 51.133-44.95 51.133m166.116 0c-24.697 0-44.95-23.056-44.95-51.133s19.82-51.172 44.95-51.172 45.383 23.055 44.95 51.172c0 28.077-19.82 51.133-44.95 51.133"},null,-1)]))}const fMe={render:dMe},pMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function mMe(n,e){return Re(),Oe("svg",pMe,e[0]||(e[0]=[be("path",{d:"M485.3 470.623H14.7c-8.13 0-14.7 6.57-14.7 14.678 0 8.13 6.57 14.7 14.7 14.7h470.622c8.13 0 14.677-6.57 14.677-14.678 0-8.13-6.57-14.7-14.7-14.7zM250 0c-8.13 0-14.678 6.57-14.678 14.678v316.86l-53.128-53.283a14.63 14.63 0 0 0-20.786 0 14.63 14.63 0 0 0 0 20.785l78.287 78.44c.154.153.461.307.615.46 1.253 1.1 2.659 2.198 4.065 2.813 1.714.791 3.757 1.099 5.625 1.099 2.021 0 3.91-.462 5.625-1.099 1.714-.79 3.427-1.868 4.68-3.12l78.439-78.439a14.63 14.63 0 0 0 0-20.785 14.63 14.63 0 0 0-20.786 0l-53.283 53.282V14.702c0-8.13-6.548-14.7-14.677-14.7z"},null,-1)]))}const gMe={render:mMe},yMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"95.076 9.323 311.77 483.169"};function wMe(n,e){return Re(),Oe("svg",yMe,e[0]||(e[0]=[be("path",{d:"M377.707 75.18c-.227 15.451-9.542 29.652-24.084 35.218-15.11 5.794-32.49 1.137-42.829-11.246-9.997-12.043-11.247-29.538-3.408-43.057 7.839-13.405 23.516-20.903 38.853-18.177 18.177 3.181 31.128 18.972 31.468 37.263.228 14.655 22.949 14.655 22.722 0-.455-25.789-16.473-48.396-40.785-57.144-23.062-8.293-50.327-.568-65.89 18.29-16.246 19.655-18.973 48.056-5.567 70.095 13.291 22.04 39.08 32.832 64.187 28.06 28.06-5.339 47.6-31.24 48.055-59.188.227-14.768-22.494-14.768-22.722-.113M377.707 247.406c-.227 15.45-9.542 29.651-24.084 35.218-15.11 5.794-32.49 1.136-42.829-11.247-9.997-12.042-11.247-29.537-3.408-43.056 7.839-13.406 23.516-20.904 38.853-18.177 18.177 3.067 31.128 18.972 31.468 37.262.228 14.656 22.949 14.656 22.722 0-.455-25.788-16.473-48.395-40.785-57.143-23.062-8.293-50.327-.568-65.89 18.29-16.246 19.654-18.973 48.055-5.567 70.095 13.291 22.04 39.08 32.832 64.187 28.06 28.06-5.339 47.6-31.241 48.055-59.188.227-14.769-22.494-14.769-22.722-.114M377.707 424.29c-.227 15.45-9.542 29.65-24.084 35.218-15.11 5.793-32.49 1.136-42.829-11.247-9.997-12.043-11.247-29.538-3.408-43.057 7.839-13.405 23.516-20.903 38.853-18.177 18.177 3.068 31.128 18.972 31.468 37.263.228 14.655 22.949 14.655 22.722 0-.455-25.789-16.473-48.396-40.785-57.144-23.062-8.293-50.327-.568-65.89 18.29-16.246 19.655-18.973 48.056-5.567 70.095 13.291 22.04 39.08 32.832 64.187 28.06 28.06-5.339 47.6-31.24 48.055-59.187.227-14.77-22.494-14.77-22.722-.114M197.643 75.862c-.227 15.45-9.543 29.651-24.084 35.218-15.11 5.794-32.491 1.136-42.83-11.247-9.997-12.042-11.246-29.537-3.408-43.056 7.84-13.406 23.517-20.904 38.853-18.177 18.29 3.18 31.242 18.972 31.47 37.262.226 14.656 22.947 14.656 22.72 0-.454-25.788-16.473-48.395-40.784-57.143-23.062-8.293-50.327-.568-65.891 18.29-16.246 19.654-18.972 48.055-5.567 70.095 13.292 22.04 39.08 32.832 64.187 28.06 28.06-5.339 47.6-31.241 48.055-59.188.227-14.769-22.494-14.769-22.72-.114M197.643 248.088c-.227 15.45-9.543 29.651-24.084 35.218-15.11 5.794-32.491 1.136-42.83-11.247-9.997-12.042-11.246-29.538-3.408-43.057 7.84-13.405 23.517-20.903 38.853-18.176 18.29 3.18 31.242 18.972 31.47 37.262.226 14.655 22.947 14.655 22.72 0-.454-25.788-16.473-48.396-40.784-57.143-23.062-8.294-50.327-.568-65.891 18.29-16.246 19.654-18.972 48.055-5.567 70.095 13.292 22.039 39.08 32.831 64.187 28.06 28.06-5.34 47.6-31.241 48.055-59.188.227-14.769-22.494-14.769-22.72-.114M197.643 424.972c-.227 15.45-9.543 29.65-24.084 35.217-15.11 5.794-32.491 1.136-42.83-11.247-9.997-12.042-11.246-29.537-3.408-43.056 7.84-13.406 23.517-20.904 38.853-18.177 18.29 3.067 31.242 18.972 31.47 37.263.226 14.655 22.947 14.655 22.72 0-.454-25.789-16.473-48.396-40.784-57.144-23.062-8.293-50.327-.568-65.891 18.29-16.246 19.654-18.972 48.056-5.567 69.981 13.292 22.04 39.08 32.832 64.187 28.06 28.06-5.339 47.6-31.24 48.055-59.187.227-14.656-22.494-14.656-22.72 0"},null,-1)]))}const vMe={render:wMe},bMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function _Me(n,e){return Re(),Oe("svg",bMe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M282.368 309.878c-8.055 0-14.575-6.538-14.575-14.569 0-8.127 6.447-14.593 14.951-14.593 8.055 0 14.593 6.514 14.593 14.593 0 8.128-6.441 14.569-14.945 14.569zM108.465 497.901l109.223-64.916a14.45 14.45 0 0 0 5.61-6.041l47.813-82.828c4.003-6.969 1.613-15.83-5.356-19.833-6.939-4.003-15.824-1.613-19.827 5.356l-40.965 70.957-82.476-47.624 137.961-238.984 82.475 47.625-48.995 84.889c-4.003 6.939-1.589 15.824 5.356 19.827 6.963 4.009 15.824 1.614 19.827-5.349l81.717-141.563c19.427-33.644 14.715-65.299-1.801-87.662C386.284 14.457 366.238 2.873 344.87.477c-27.627-3.1-57.407 8.673-76.859 42.341L90.505 350.321c-1.85 2.984-2.468 5.283-2.42 8.673l-1.583 125.333c-.57 12.792 12.483 19.239 21.914 13.647zm73.019-77.283-65.577 38.993.97-76.289 64.607 37.32zm93.539-331.861 18.196-31.54c12.7-22.004 31.393-29.78 48.473-27.857 6.727.758 13.198 2.935 19.003 6.277 22.835 13.174 31.412 40.777 14.975 69.253l-18.178 31.485z"},null,-1)]))}const EMe={render:_Me},xMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function SMe(n,e){return Re(),Oe("svg",xMe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M-70.148-39.652a3.124 3.124 0 1 1-6.25 0v-19.793a7.293 7.293 0 0 1 7.292-7.293h68.75a7.296 7.296 0 0 1 7.293 7.293v45.836A7.293 7.293 0 0 1-.356-6.316h-68.75a7.296 7.296 0 0 1-7.292-7.293v-9.375a3.126 3.126 0 0 1 6.25 0v9.375a1.043 1.043 0 0 0 1.043 1.039h68.75a1.042 1.042 0 0 0 1.043-1.039v-45.836a1.04 1.04 0 0 0-1.043-1.039h-68.75a1.041 1.041 0 0 0-1.043 1.039zm10.781-9.371a3.125 3.125 0 0 1 3.437-5.219l21.195 13.969 21.195-13.969a3.124 3.124 0 1 1 3.438 5.219l-22.914 15.105a3.13 3.13 0 0 1-3.442 0l-22.914-15.105zM40.978 231.558c0 10.192-8.256 18.442-18.443 18.442-10.168 0-18.442-8.25-18.442-18.442v-116.81A43.02 43.02 0 0 1 16.705 84.32a43.04 43.04 0 0 1 30.428-12.612h405.734a43.05 43.05 0 0 1 30.428 12.612 43.05 43.05 0 0 1 12.612 30.428v270.504a43.05 43.05 0 0 1-12.612 30.43 43.03 43.03 0 0 1-30.428 12.61H47.133a43.02 43.02 0 0 1-30.428-12.61 43.02 43.02 0 0 1-12.612-30.43v-55.327c0-10.186 8.274-18.443 18.442-18.443 10.187 0 18.443 8.257 18.443 18.443v55.327a6.1 6.1 0 0 0 1.799 4.338 6.16 6.16 0 0 0 4.356 1.794h405.734a6.2 6.2 0 0 0 4.356-1.794 6.17 6.17 0 0 0 1.799-4.338V114.748a6.1 6.1 0 0 0-1.799-4.332 6.17 6.17 0 0 0-4.356-1.801H47.133c-1.634 0-3.18.65-4.356 1.801a6.13 6.13 0 0 0-1.799 4.332zm63.625-55.304c-8.51-5.601-10.859-17.056-5.259-25.542 5.602-8.504 17.062-10.859 25.543-5.259l125.083 82.439 125.085-82.439c8.51-5.6 19.941-3.245 25.542 5.259 5.606 8.504 3.251 19.941-5.252 25.542l-135.23 89.144a18.47 18.47 0 0 1-20.313 0l-135.229-89.144z"},null,-1)]))}const AMe={render:SMe},CMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function TMe(n,e){return Re(),Oe("svg",CMe,e[0]||(e[0]=[be("path",{d:"M499.353 249.995a250.26 250.26 0 0 0-73.308-176.687A250.23 250.23 0 0 0 249.358 0c-331.652 13.713-331.577 486.325 0 500a250.26 250.26 0 0 0 176.687-73.308 250.27 250.27 0 0 0 73.308-176.687zM249.358 470.588c-58.494-.075-114.56-23.313-155.916-64.668-41.364-41.365-64.593-97.431-64.668-155.915 12.094-292.65 429.12-292.574 441.177 0-.076 58.494-23.313 114.56-64.669 155.915-41.364 41.355-97.43 64.593-155.915 64.668z"},null,-1),be("path",{d:"m249.176 337.742-108.231-63.933 108.217 152.558L357.48 273.809l-108.348 63.933zm1.647-264.109L142.562 253.278l108.247 63.991 108.245-63.933z"},null,-1)]))}const IMe={render:TMe},MMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function RMe(n,e){return Re(),Oe("svg",MMe,e[0]||(e[0]=[be("path",{d:"M194.195 166.221c8.19 0 14.832 6.642 14.832 14.801 0 4.469-1.967 8.434-5.063 11.172-14.237 12.689-23.205 31.158-23.205 51.74a69.3 69.3 0 0 0 5.597 27.345 14.7 14.7 0 0 1 1.403 6.253c0 8.19-6.642 14.84-14.839 14.84-6.131 0-11.439-3.759-13.673-9.09a98.6 98.6 0 0 1-8.16-39.348c0-29.1 12.575-55.225 32.532-73.306l.03-.03a14.8 14.8 0 0 1 10.516-4.385h.023zm55.79-32.265v.031h-.359c-22.877 0-44.678 2.387-65.207 6.703l-.061.03c-34.071 21.688-56.681 59.816-56.681 103.214 0 67.525 54.775 122.308 122.338 122.308 67.526 0 122.308-54.783 122.308-122.308 0-43.406-22.61-81.526-56.689-103.244h-.03c-20.643-4.377-42.597-6.734-65.619-6.734m0-29.847v.031h.122c114.209 0 216.256 55.972 249.893 137.681v.061c-20.856 50.582-68.036 91.333-128.058 114.98l-.03.031c13.223-14.298 23.914-30.831 31.509-49.064v-.03c27.971-17.905 49.658-40.477 63.095-65.589l.03-.686c-17.249-32.379-48.316-60.533-88.74-79.917h-.061c15.343 23.708 24.219 51.977 24.219 82.334 0 83.913-68.036 151.95-151.949 151.95-83.943 0-151.979-68.037-151.979-151.95 0-30.357 8.906-58.626 24.219-82.364l-.031.03c-40.484 19.362-71.551 47.538-88.801 79.917l.054.74c13.436 25.081 35.154 47.66 63.095 65.535v.03c7.595 18.203 18.286 34.789 31.486 49.033l-.031.031C68.006 333.208 20.879 292.456 0 241.882v-.03c33.629-81.77 135.745-137.735 249.977-137.735z"},null,-1)]))}const PMe={render:RMe},NMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function OMe(n,e){return Re(),Oe("svg",NMe,e[0]||(e[0]=[be("path",{d:"M412.862 85.414c-3.362-3.362-8.828-3.362-12.19 0L83.689 402.397c-3.362 3.362-3.362 8.827 0 12.189s8.828 3.362 12.19 0L412.862 97.604c3.362-3.362 3.362-8.811 0-12.19M30.879 215.569c-9.5 14.276-13.638 26.983-13.638 36.173 0 8.275 4.259 19.913 13.897 33.396 9.482 13.276 23.638 27.552 42 40.948 3.844 2.793 4.689 8.19 1.879 12.052-2.81 3.845-8.207 4.69-12.052 1.862-19.569-14.276-35.12-29.81-45.862-44.845C6.517 280.345 0 265.155 0 251.742c0-13.794 5.931-29.828 16.534-45.725 10.707-16.069 26.569-32.603 47.431-47.5C105.741 128.673 167.879 105.19 250 105.19c15.465 0 30.224.827 44.258 2.379a8.6 8.6 0 0 1 7.621 9.517c-.517 4.725-4.776 8.138-9.5 7.621-13.414-1.483-27.534-2.276-42.379-2.276-78.776 0-137.345 22.5-176.018 50.121-19.362 13.827-33.689 28.896-43.103 43.017M421.776 159.052a8.623 8.623 0 0 1 12-2.138c21.603 15.052 38.034 31.862 49.103 48.224C493.862 221.345 500 237.707 500 251.742c0 14.189-7.276 30.396-19.069 46.12-11.966 15.949-29.293 32.397-51.069 47.207-43.586 29.655-105.604 53.224-179.862 53.224-18.828 0-36.862-1.517-54.018-4.258-4.706-.759-7.896-5.19-7.155-9.88.759-4.707 5.173-7.913 9.88-7.155 16.275 2.604 33.396 4.052 51.293 4.052 70.586 0 129.258-22.414 170.155-50.241 20.465-13.914 36.327-29.087 46.983-43.294 10.827-14.448 15.62-26.982 15.62-35.775 0-9.363-4.276-22.38-14.138-36.931-9.775-14.414-24.62-29.776-44.707-43.759a8.623 8.623 0 0 1-2.137-12"},null,-1),be("path",{d:"M250 156.914c-52.362 0-94.828 42.448-94.828 94.828 0 4.758-3.862 8.62-8.621 8.62-4.758 0-8.62-3.862-8.62-8.62 0-61.897 50.172-112.069 112.069-112.069a8.61 8.61 0 0 1 8.62 8.62c0 4.759-3.862 8.621-8.62 8.621M353.448 243.121a8.613 8.613 0 0 1 8.621 8.621c0 61.896-50.173 112.069-112.069 112.069-4.759 0-8.621-3.863-8.621-8.621a8.613 8.613 0 0 1 8.621-8.621c52.379 0 94.827-42.465 94.827-94.827a8.613 8.613 0 0 1 8.621-8.621"},null,-1)]))}const kMe={render:OMe},DMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function LMe(n,e){return Re(),Oe("svg",DMe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M185.185 250c0-35.796 29.019-64.815 64.815-64.815s64.815 29.019 64.815 64.815-29.018 64.815-64.815 64.815-64.815-29.019-64.815-64.815M250 203.704c-25.574 0-46.296 20.722-46.296 46.296s20.722 46.296 46.296 46.296 46.297-20.722 46.297-46.296-20.723-46.296-46.297-46.296","clip-rule":"evenodd"},null,-1),be("path",{"fill-rule":"evenodd",d:"M129.63 250c0-66.481 53.889-120.37 120.37-120.37 66.482 0 120.371 53.889 120.371 120.37 0 66.482-53.889 120.371-120.371 120.371-66.481 0-120.37-53.889-120.37-120.371M250 148.148c-56.259 0-101.852 45.593-101.852 101.852 0 56.241 45.593 101.852 101.852 101.852 56.241 0 101.852-45.611 101.852-101.852 0-56.259-45.611-101.852-101.852-101.852","clip-rule":"evenodd"},null,-1),be("path",{"fill-rule":"evenodd",d:"M250 92.593c-82.203 0-144.407 25.315-186.203 57.463-20.871 16.074-36.704 33.852-47.371 51.092C5.852 218.241 0 235.352 0 250c0 15.037 7.167 32.334 18.963 49.259 11.945 17.167 29.259 34.852 51.019 50.797C113.556 381.982 175.63 407.408 250 407.408c74.352 0 136.426-25.426 180-57.352 21.778-15.945 39.093-33.63 51.037-50.797C492.834 282.334 500 265.037 500 250c0-14.648-5.852-31.759-16.444-48.852-10.667-17.24-26.482-35.018-47.352-51.092-41.815-32.148-104-57.463-186.204-57.463M18.519 250c0-10.055 4.185-23.796 13.648-39.111 9.407-15.167 23.667-31.333 42.926-46.148 38.444-29.574 96.611-53.63 174.907-53.63 78.278 0 136.463 24.056 174.908 53.63 19.259 14.815 33.518 30.981 42.907 46.148 9.482 15.315 13.667 29.056 13.667 39.111 0 9.648-4.871 23.204-15.648 38.685-10.63 15.26-26.408 31.519-46.778 46.445-40.685 29.796-98.982 53.759-169.056 53.759-70.092 0-128.389-23.963-169.074-53.759-20.352-14.926-36.148-31.185-46.759-46.445C23.389 273.204 18.519 259.648 18.519 250","clip-rule":"evenodd"},null,-1)]))}const UMe={render:LMe},BMe={xmlns:"http://www.w3.org/2000/svg",style:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2"},viewBox:"0 0 512 512"};function FMe(n,e){return Re(),Oe("svg",BMe,e[0]||(e[0]=[be("path",{d:"M512 257.555c0-141.385-114.615-256-256-256S0 116.17 0 257.555c0 127.777 93.616 233.685 216 252.89v-178.89h-65v-74h65v-56.4c0-64.16 38.219-99.6 96.695-99.6 28.009 0 57.305 5 57.305 5v63h-32.281c-31.801 0-41.719 19.733-41.719 39.978v48.022h71l-11.35 74H296v178.89c122.385-19.205 216-125.113 216-252.89",style:{"fill-rule":"nonzero"}},null,-1)]))}const $Me={render:FMe},zMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function HMe(n,e){return Re(),Oe("svg",zMe,e[0]||(e[0]=[be("path",{d:"M69.263 34.786c.05.943-.051 1.907-.173 2.84.04-.273.071-.537.112-.811a24 24 0 0 1-1.624 5.915l.305-.73a23.4 23.4 0 0 1-1.806 3.46 34 34 0 0 1-1.187 1.704c.588-.812.142-.183 0-.01l-.305.365c-.264.304-.527.609-.801.903a28 28 0 0 1-1.766 1.715q-.44.377-.883.74c-.101.082-.629.498-.192.163a36.806 36.806 0 0 1-4.038 2.628 45 45 0 0 1-4.566 2.222l.73-.305c-4.9 2.07-10.055 3.237-15.128 4.78-1.085.324-2.13.71-3.165 1.156-1.532.66-2.882 1.562-4.16 2.628-1.887 1.562-3.44 3.632-4.454 5.854-.569 1.228-1.147 2.557-1.36 3.906-.132.832-.132 1.593.304 2.344.366.63 1.096 1.238 1.816 1.4.782.173 1.654.142 2.344-.304.63-.406 1.279-1.055 1.4-1.816.153-.944.487-1.877.863-2.75l-.305.73q.428-.989.975-1.917.334-.547.7-1.065c.06-.092.132-.183.203-.274.263-.355-.457.568-.234.304.152-.183.294-.365.447-.538.304-.355.639-.69.974-1.004.182-.173.375-.345.578-.507.081-.071.172-.132.254-.203.243-.203-.69.507-.193.152a15.4 15.4 0 0 1 2.922-1.664l-.73.304c2.729-1.146 5.691-1.755 8.543-2.557 4.099-1.156 8.137-2.536 11.982-4.383 4.19-2.019 8.239-4.748 11.262-8.31 2.669-3.155 4.668-6.848 5.682-10.866.386-1.522.63-3.085.741-4.647.04-.507.06-1.025.04-1.532-.09-1.583-1.339-3.125-3.043-3.044-1.593.05-3.166 1.319-3.064 3.024"},null,-1),be("path",{d:"M30.758 82.29V25.664c0-2.607.04-5.205 0-7.812v-.112c0-1.593-1.4-3.115-3.044-3.044-1.654.071-3.044 1.34-3.044 3.044v56.626000000000005c0 2.607-.04 5.205 0 7.812v.112c0 1.593 1.4 3.115 3.044 3.044 1.654-.071 3.044-1.34 3.044-3.044M76.608 27.44c0 .335-.02.66-.06.984.04-.274.07-.538.111-.812a7.8 7.8 0 0 1-.497 1.847l.304-.73a7 7 0 0 1-.629 1.176c-.01.02-.203.335-.223.325-.01 0 .507-.619.233-.304-.162.182-.314.365-.487.537-.152.152-.324.305-.487.447-.192.162-.487.253.254-.193-.091.06-.183.132-.274.193a7.3 7.3 0 0 1-1.238.66l.73-.305a7.8 7.8 0 0 1-1.846.497c.274-.04.538-.071.812-.112a8 8 0 0 1-1.968 0c.274.041.537.071.811.112a7.8 7.8 0 0 1-1.846-.497l.73.304a7 7 0 0 1-1.177-.629c-.02-.01-.335-.203-.324-.223 0-.01.618.507.304.233-.183-.162-.365-.314-.538-.487a10 10 0 0 1-.446-.487c-.163-.193-.254-.487.193.254-.061-.091-.132-.183-.193-.274a7.3 7.3 0 0 1-.66-1.238l.305.73a7.8 7.8 0 0 1-.498-1.846c.041.274.071.538.112.812a8 8 0 0 1 0-1.969c-.04.274-.071.538-.112.812.092-.64.254-1.248.498-1.847l-.305.731c.173-.416.386-.812.63-1.177.01-.02.202-.335.223-.325.01 0-.508.62-.234.305.162-.183.315-.366.487-.538.152-.152.325-.304.487-.446.193-.163.487-.254-.253.192.09-.06.182-.132.273-.192a7.3 7.3 0 0 1 1.238-.66l-.73.304a7.8 7.8 0 0 1 1.846-.497c-.274.04-.537.071-.811.112a8 8 0 0 1 1.968 0c-.274-.04-.538-.071-.812-.112.64.092 1.248.254 1.847.497l-.73-.304c.415.173.811.386 1.176.63.02.01.335.202.325.222 0 .01-.619-.507-.304-.233.182.162.365.315.537.487.153.152.305.325.447.487.162.193.254.487-.193-.254.061.092.132.183.193.274.264.396.477.802.66 1.238l-.305-.73c.244.598.406 1.207.497 1.846-.04-.274-.07-.538-.111-.811.04.324.06.649.06.984.01 1.593 1.39 3.115 3.044 3.044 1.634-.071 3.064-1.34 3.044-3.044-.02-2.06-.619-4.19-1.836-5.875-1.33-1.836-3.044-3.145-5.175-3.937-3.825-1.43-8.634-.152-11.222 3.014-1.48 1.806-2.323 3.835-2.526 6.169-.172 2.029.386 4.21 1.44 5.955 1.026 1.695 2.568 3.176 4.374 4.008q3.24 1.492 6.757.822c4.759-.913 8.137-5.408 8.188-10.146.01-1.593-1.41-3.115-3.044-3.044-1.664.06-3.023 1.319-3.044 3.034"},null,-1),be("path",{d:"M32.006 10.394c0 .335-.02.66-.061.984.04-.274.07-.537.111-.811a7.8 7.8 0 0 1-.497 1.846l.305-.73a7 7 0 0 1-.63 1.177c-.01.02-.202.334-.223.324-.01 0 .508-.619.234-.304-.163.183-.315.365-.487.538-.152.152-.325.304-.487.446-.193.162-.487.254.253-.193-.09.061-.182.132-.274.193a7.3 7.3 0 0 1-1.237.66l.73-.305a7.8 7.8 0 0 1-1.846.497c.273-.04.537-.07.811-.111a8 8 0 0 1-1.968 0c.274.04.538.07.812.111a7.8 7.8 0 0 1-1.847-.497l.73.305a7 7 0 0 1-1.176-.63c-.02-.01-.335-.202-.325-.223 0-.01.619.508.304.234-.182-.163-.365-.315-.538-.487a10 10 0 0 1-.446-.487c-.162-.193-.254-.487.193.253-.061-.091-.132-.182-.193-.274a7.3 7.3 0 0 1-.66-1.237l.305.73a7.8 7.8 0 0 1-.497-1.847c.04.274.07.538.111.812a8 8 0 0 1 0-1.968c-.04.274-.07.538-.111.811.091-.639.253-1.248.497-1.846l-.304.73c.172-.416.385-.811.629-1.177.01-.02.203-.334.223-.324.01 0-.507.619-.234.304.163-.182.315-.365.487-.538.153-.152.325-.304.487-.446.193-.162.488-.254-.253.193.091-.061.182-.132.274-.193a7.3 7.3 0 0 1 1.238-.66l-.73.305a7.8 7.8 0 0 1 1.846-.497c-.274.04-.538.07-.812.111a8 8 0 0 1 1.968 0c-.274-.04-.537-.07-.811-.111.639.091 1.248.253 1.846.497l-.73-.305c.416.173.811.386 1.177.63.02.01.335.202.324.223 0 .01-.619-.508-.304-.234.183.163.365.315.538.487.152.153.304.325.446.487.163.193.254.487-.193-.253.061.091.132.182.193.274.264.395.477.801.66 1.238l-.305-.731c.244.599.406 1.207.497 1.847-.04-.274-.07-.538-.111-.812.04.325.06.65.06.984.01 1.593 1.39 3.115 3.045 3.044 1.633-.071 3.064-1.34 3.043-3.044-.02-2.06-.618-4.19-1.836-5.875-1.33-1.836-3.044-3.145-5.175-3.936-3.825-1.43-8.634-.152-11.221 3.013-1.482 1.806-2.324 3.835-2.527 6.169-.172 2.03.386 4.21 1.441 5.956 1.025 1.694 2.567 3.176 4.373 4.008q3.242 1.491 6.757.821c4.759-.913 8.138-5.407 8.188-10.146.01-1.593-1.41-3.115-3.043-3.044-1.664.061-3.024 1.33-3.044 3.034M32.036 89.636c0 .335-.02.66-.06.984.04-.274.07-.538.11-.812a7.8 7.8 0 0 1-.496 1.847l.304-.73a7 7 0 0 1-.629 1.176c-.01.02-.203.335-.223.325-.01 0 .507-.619.233-.304-.162.182-.314.365-.487.538-.152.152-.324.304-.487.446-.193.162-.487.254.254-.193-.091.061-.183.132-.274.193a7.3 7.3 0 0 1-1.238.66l.73-.305a7.8 7.8 0 0 1-1.846.497c.274-.04.538-.07.812-.111a8 8 0 0 1-1.969 0c.274.04.538.07.812.111a7.8 7.8 0 0 1-1.847-.497l.73.304a7 7 0 0 1-1.176-.629c-.02-.01-.335-.203-.325-.223 0-.01.62.507.305.234-.183-.163-.366-.315-.538-.487a10 10 0 0 1-.447-.488c-.162-.192-.253-.487.193.254-.06-.091-.132-.182-.193-.274a7.3 7.3 0 0 1-.659-1.238l.304.73a7.8 7.8 0 0 1-.497-1.846c.04.274.071.538.112.812a8 8 0 0 1 0-1.968c-.04.274-.071.537-.112.811.092-.639.254-1.248.497-1.846l-.304.73c.172-.416.386-.811.629-1.177.01-.02.203-.335.223-.324.01 0-.507.619-.233.304.162-.183.314-.365.487-.538.152-.152.325-.304.487-.446.193-.163.487-.254-.254.193.092-.061.183-.132.274-.193a7.3 7.3 0 0 1 1.238-.66l-.73.305a7.8 7.8 0 0 1 1.846-.497c-.274.04-.538.07-.812.111a8 8 0 0 1 1.969 0c-.274-.04-.538-.07-.812-.111.64.09 1.248.253 1.847.497l-.73-.305c.415.173.81.386 1.176.63.02.01.335.202.325.223 0 .01-.62-.508-.305-.234.183.163.366.315.538.487.152.152.305.325.447.487.162.193.253.487-.193-.253.06.09.132.182.193.274.263.395.477.801.66 1.237l-.305-.73c.243.598.406 1.207.497 1.846-.04-.273-.071-.537-.112-.811.04.324.061.66.061.984.01 1.593 1.39 3.115 3.044 3.044 1.634-.071 3.064-1.34 3.044-3.044-.02-2.06-.619-4.19-1.837-5.875-1.329-1.836-3.043-3.145-5.174-3.936-3.825-1.431-8.635-.153-11.222 3.013-1.481 1.806-2.323 3.835-2.526 6.169-.173 2.03.385 4.21 1.44 5.956 1.025 1.694 2.568 3.175 4.374 4.007q3.24 1.492 6.757.822c4.758-.913 8.137-5.408 8.188-10.146.01-1.593-1.41-3.115-3.044-3.044-1.654.061-3.024 1.33-3.044 3.034"},null,-1)]))}const VMe={render:HMe},WMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function qMe(n,e){return Re(),Oe("svg",WMe,e[0]||(e[0]=[be("path",{d:"M138.098 496.183c5.73 0 11.447-2.182 15.823-6.557l223.804-223.804c8.74-8.74 8.74-22.907 0-31.646L153.921 10.372c-8.74-8.74-22.906-8.74-31.646 0s-8.74 22.906 0 31.645L330.245 250l-207.97 207.98c-8.74 8.74-8.74 22.907 0 31.647a22.3 22.3 0 0 0 15.823 6.557"},null,-1)]))}const jMe={render:qMe},GMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function KMe(n,e){return Re(),Oe("svg",GMe,e[0]||(e[0]=[be("path",{d:"M129.908 477.572c55.992 0 102.598-37.27 120.036-53.265 17.389 15.995 63.879 53.265 120.037 53.265 69.765 0 124.98-57.991 127.312-60.38 3.61-3.831 3.61-9.83 0-13.717-1.61-1.721-28.496-29.884-67.932-47.217 69.099-72.986 59.824-171.414 59.435-175.8a9.99 9.99 0 0 0-9.613-8.998c-3.11-.11-69.71-1.727-130.145 29.379-10.107-97.594-88.597-172.302-92.207-175.745-3.777-3.555-9.774-3.555-13.718 0-3.554 3.332-82.1 78.15-92.207 175.745-60.38-31.106-127.034-29.49-130.089-29.379a9.986 9.986 0 0 0-9.608 8.997c-.5 4.387-9.724 102.704 59.375 175.801-39.493 17.333-66.322 45.496-67.877 47.217-3.61 3.832-3.61 9.83 0 13.718 2.166 2.388 57.38 60.38 127.2 60.38M369.98 457.58c-47.717 0-89.43-32.717-105.536-47.273 16.106-14.606 57.708-47.322 105.536-47.322 47.656 0 89.264 32.716 105.48 47.322-16.216 14.556-57.824 47.273-105.48 47.273m38.604-108.818c-12.107-3.5-25.108-5.665-38.604-5.665-24.22 0-46.55 6.998-65.655 16.161 22.825-34.882 45.212-82.594 45.712-136.087 45.329-26.219 98.316-30.828 119.26-31.55.5 26.052-3.61 102.148-60.713 157.14M249.945 46.814c20.498 21.881 80.1 92.54 80.1 174.635 0 82.1-59.602 152.753-80.1 174.64-20.5-21.887-80.15-92.54-80.15-174.64 0-82.095 59.65-152.754 80.15-174.635M30.591 191.62c20.998.722 73.93 5.331 119.203 31.55.5 53.382 22.942 101.205 45.712 136.087-19.104-9.163-41.38-16.161-65.6-16.161-13.495 0-26.385 2.166-38.603 5.665-56.991-54.882-61.101-131.089-60.712-157.141m61.99 177.75s.11 0 0 0c11.829-3.776 24.33-6.275 37.326-6.275 47.717 0 89.32 32.66 105.541 47.267-16.222 14.612-57.935 47.328-105.541 47.328-47.712 0-89.43-32.716-105.536-47.328 11.718-10.663 36.937-30.773 68.21-40.992"},null,-1)]))}const YMe={render:KMe},XMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function ZMe(n,e){return Re(),Oe("svg",XMe,e[0]||(e[0]=[be("path",{d:"M575.31 205.62V65.621c0-5.906-5.031-10.938-10.938-10.938h-140c-5.742 0-11.211 5.031-10.938 10.938s4.812 10.938 10.938 10.938h140l-10.938-10.938V205.62c0 5.742 5.031 11.211 10.938 10.938s10.938-4.812 10.938-10.938M553.44 354.38v140l10.938-10.938h-140c-5.742 0-11.211 5.031-10.938 10.938s4.813 10.938 10.938 10.938h140c5.906 0 10.938-5.031 10.938-10.938v-140c0-5.742-5.031-11.211-10.938-10.938s-10.938 4.813-10.938 10.938M146.56 205.62v-140l-10.938 10.938h140c5.742 0 11.211-5.031 10.938-10.938s-4.812-10.938-10.938-10.938h-140c-5.906 0-10.938 5.031-10.938 10.938v140c0 5.742 5.031 11.211 10.938 10.938s10.938-4.812 10.938-10.938M124.69 354.38v140c0 5.906 5.031 10.938 10.938 10.938h140c5.742 0 11.211-5.031 10.938-10.938s-4.812-10.938-10.938-10.938h-140l10.938 10.938v-140c0-5.742-5.031-11.211-10.938-10.938s-10.938 4.813-10.938 10.938",style:{"stroke-width":"0","stroke-opacity":"0","stroke-miterlimit":"1"},transform:"matrix(1.10954 0 0 1.10954 -138.34 -60.672)"},null,-1)]))}const JMe={render:ZMe},QMe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function eRe(n,e){return Re(),Oe("svg",QMe,e[0]||(e[0]=[be("path",{d:"M250 0C112.156 0 0 112.156 0 250s112.156 250 250 250 250-112.156 250-250S387.844 0 250 0m0 482.764c-39.912 0-75.753-46.014-95.648-113.342 30.218 6.444 62.219 9.893 95.648 9.893s65.452-3.471 95.648-9.893c-19.89 67.35-55.736 113.342-95.648 113.342m0-465.522c48.514 0 90.991 68.017 106.142 159.659-65.474 16.403-146.81 16.403-212.289 0 15.15-91.659 57.628-159.676 106.141-159.676zm112.067 232.764c0 35.818-4.138 70.042-11.442 100.69-31.466 7.46-65.215 11.382-100.625 11.382-35.388 0-69.137-3.9-100.625-11.36-7.304-30.665-11.442-64.894-11.442-100.712 0-19.162 1.202-37.844 3.426-55.775 33.6 8.276 70.908 12.673 108.641 12.673 37.76 0 75.046-4.397 108.641-12.673a456 456 0 0 1 3.426 55.775m13.556-60.409c16.939-5.043 32.784-11.079 47.046-18.036 14.075-6.897 26.384-14.572 36.834-22.87 14.891 30.649 23.255 65.022 23.255 101.315 0 12.976-4.761 25.71-14.179 37.87-18.235 23.918-53.816 44.63-98.771 57.866 6.119-29.358 9.523-61.64 9.523-95.753 0-20.911-1.291-41.126-3.685-60.409zm75.56-56.442c-9.959 8.276-21.981 15.994-36.078 22.891-12.739 6.229-26.83 11.658-41.942 16.292-10.776-65.843-34.974-119.052-66.727-148.15 61.618 15.41 113.536 55.432 144.741 108.967zM193.575 24.21c-31.747 29.076-55.951 82.307-66.727 148.151-15.084-4.635-29.203-10.064-41.937-16.271-14.096-6.919-26.124-14.61-36.099-22.886C80.017 79.67 131.957 39.647 193.575 24.238zM40.491 148.691c10.456 8.298 22.781 15.973 36.856 22.87 14.268 6.979 30.108 12.993 47.046 18.036-2.389 19.288-3.685 39.503-3.685 60.409 0 34.096 3.382 66.378 9.528 95.752-44.961-13.23-80.542-33.942-98.815-57.931-9.374-12.111-14.141-24.85-14.141-37.821 0-36.293 8.364-70.672 23.256-101.315zM23.984 305.57c23.123 25.562 61.81 46.318 110.71 59.267 12.717 48.602 33.363 87.609 58.881 110.992C110.214 454.99 44.519 389.08 23.984 305.592zM306.42 475.807c25.517-23.383 46.163-62.396 58.881-110.992 48.921-12.949 87.631-33.727 110.688-59.245-20.541 83.494-86.208 149.398-169.591 170.237z"},null,-1)]))}const tRe={render:eRe},nRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function rRe(n,e){return Re(),Oe("svg",nRe,e[0]||(e[0]=[be("path",{d:"M16.859 226.683h194.288c8.549 0 15.536-6.987 15.536-15.536V16.859c0-8.549-6.987-15.549-15.536-15.549H16.859c-8.549 0-15.549 7-15.549 15.549v194.288c0 8.549 7 15.536 15.549 15.536M32.402 32.402h163.195v163.195H32.402zM483.141 1.31H288.853c-8.549 0-15.536 7-15.536 15.549v194.288c0 8.549 6.987 15.536 15.536 15.536h194.288c8.55 0 15.549-6.987 15.549-15.536V16.859c0-8.549-6.999-15.549-15.549-15.549m-15.543 194.287H304.403V32.402h163.195zM483.141 273.317H288.853c-8.549 0-15.536 6.987-15.536 15.536v194.288c0 8.549 6.987 15.549 15.536 15.549h194.288c8.55 0 15.549-7 15.549-15.549V288.853c0-8.549-6.999-15.536-15.549-15.536m-15.543 194.281H304.403V304.403h163.195zM1.31 483.141c0 8.549 7 15.549 15.549 15.549h194.288c8.549 0 15.536-7 15.536-15.549V288.853c0-8.549-6.987-15.536-15.536-15.536H16.859c-8.549 0-15.549 6.987-15.549 15.536zm31.092-178.738h163.195v163.195H32.402z"},null,-1)]))}const iRe={render:rRe},sRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function oRe(n,e){return Re(),Oe("svg",sRe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M500 166.772c0-80.289-65.083-145.366-145.361-145.366-40.972 0-77.961 16.977-104.389 44.25l-.256-.256-.25.25c-26.427-27.267-63.411-44.239-104.377-44.239C65.083 21.406 0 86.483 0 166.772c0 40.972 16.978 77.956 44.244 104.378l205.75 207.444L455.755 271.15C483.022 244.728 500 207.739 500 166.772","clip-rule":"evenodd"},null,-1)]))}const aRe={render:oRe},cRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function lRe(n,e){return Re(),Oe("svg",cRe,e[0]||(e[0]=[be("path",{d:"M354.639 43.628c67.9 0 123.139 55.239 123.139 123.144 0 33.595-13.311 64.995-37.484 88.417l-.155.155-.156.156-189.944 191.489c-40.645-41.206-148.578-150.528-190.172-191.645-24.278-23.994-37.645-55.45-37.645-88.572 0-67.9 55.245-123.144 123.145-123.144 33.594 0 64.994 13.311 88.422 37.483L249.5 97.322l.411-.411.506.511 15.8-16.3c23.422-24.178 54.822-37.494 88.422-37.494m0-22.222c-40.972 0-77.961 16.977-104.389 44.25l-.256-.256-.25.25c-26.427-27.267-63.411-44.239-104.377-44.239C65.083 21.406 0 86.483 0 166.772c0 40.972 17.239 77.684 44.244 104.378 51.95 51.35 205.75 207.444 205.75 207.444L455.755 271.15C483.022 244.728 500 207.739 500 166.772c0-80.289-65.083-145.366-145.361-145.366"},null,-1)]))}const uRe={render:lRe},hRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function dRe(n,e){return Re(),Oe("svg",hRe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M218.647 405.787c-10.068 0-18.24-8.189-18.24-18.257s8.172-18.257 18.24-18.257h62.724c10.051 0 18.257 8.189 18.257 18.257s-8.206 18.257-18.257 18.257zm194.985-76.484c0-10.085 8.155-18.24 18.24-18.24 10.051 0 18.24 8.155 18.24 18.24v97.308c0 36.983-29.936 66.935-66.919 66.935H116.809c-36.95 0-66.92-29.935-66.92-66.935V179.02a66.93 66.93 0 0 1 25.338-52.438l133.184-105.63c24.365-19.331 58.814-19.331 83.162 0l133.184 105.63c16.008 12.703 25.355 32.017 25.355 52.438v52.941c0 10.068-8.206 18.257-18.257 18.257-10.085 0-18.257-8.189-18.257-18.257V179.02a30.39 30.39 0 0 0-11.528-23.828L268.887 49.562c-11.058-8.793-26.731-8.793-37.789 0L97.914 155.192a30.39 30.39 0 0 0-11.545 23.845v247.607c0 16.831 13.626 30.423 30.44 30.423h266.367c16.814 0 30.422-13.592 30.422-30.423z"},null,-1)]))}const fRe={render:dRe},pRe={xmlns:"http://www.w3.org/2000/svg",style:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2"},viewBox:"0 0 512 512"};function mRe(n,e){return Re(),Oe("svg",pRe,e[0]||(e[0]=[be("g",{transform:"matrix(6.10352 0 0 6.10352 -2443.69 -508.27)"},[be("path",{d:"M462.317 85.217h-40c-10.999 0-20 9.001-20 20v40.002c0 10.996 9.001 20 20 20h40c10.999 0 20-9.004 20-20v-40.002c0-10.999-9.001-20-20-20m13.333 60.002c0 7.35-5.979 13.333-13.333 13.333h-40c-7.351 0-13.333-5.983-13.333-13.333v-40.002c0-7.352 5.982-13.333 13.333-13.333h40c7.354 0 13.333 5.981 13.333 13.333z"}),be("circle",{cx:"463.984",cy:"103.55",r:"5"}),be("path",{d:"M442.317 105.217c-11.048 0-20 8.953-20 20 0 11.043 8.952 20.002 20 20.002 11.045 0 20-8.959 20-20.002 0-11.047-8.955-20-20-20m0 33.335c-7.363 0-13.333-5.97-13.333-13.335s5.97-13.333 13.333-13.333 13.333 5.968 13.333 13.333-5.97 13.335-13.333 13.335"})],-1)]))}const gRe={render:mRe},yRe={xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100"};function wRe(n,e){return Re(),Oe("svg",yRe,e[0]||(e[0]=[be("path",{d:"m82.847 18.639.005-.004L59.75 1.15l-.005.005a1.7 1.7 0 0 0-1.03-.353H30.749c-7.876 0-14.279 6.404-14.279 14.28v69.836c0 7.876 6.403 14.28 14.28 14.28h38.5c7.876 0 14.28-6.404 14.28-14.28V20a1.71 1.71 0 0 0-.683-1.361M60.427 5.96l16.284 12.325H60.428zm19.676 78.957c0 5.984-4.868 10.852-10.852 10.852H30.749c-5.983 0-10.852-4.868-10.852-10.852V15.08c0-5.983 4.87-10.852 10.852-10.852h26.252v14.628a2.86 2.86 0 0 0 2.856 2.856h20.246z"},null,-1),be("path",{d:"M48.604 55.596c6.413 2.512 7.322 3.443 6.496 6.624-.627 2.395-1.704 3.13-2.449 3.463-.766.344-1.663.47-2.615.462-.021 0-.03-.01-.052-.01s-.033.01-.051.01c-2.91-.066-6.238-1.404-7.484-2.04a4.02 4.02 0 0 0-5.41 1.715 4.01 4.01 0 0 0 1.718 5.419c.544.284 3.491 1.747 7.218 2.502v2.917a4.018 4.018 0 0 0 8.037 0v-2.96a12.7 12.7 0 0 0 1.892-.638c2.418-1.068 5.588-3.463 6.982-8.769 2.783-10.619-6.06-14.082-11.345-16.145-5.044-1.965-6.843-3.035-6.916-5.033-.071-2.301.647-2.814.89-2.98 2.125-1.51 8.331-.304 11.992 1.14a4.025 4.025 0 0 0 5.22-2.25c.828-2.062-.187-4.396-2.248-5.221a38.4 38.4 0 0 0-6.467-1.885v-3.003a4.02 4.02 0 0 0-8.037 0v2.688c-1.82.284-3.568.88-5.074 1.937-2.06 1.457-4.486 4.343-4.3 9.848.253 7.604 7.042 10.266 12.003 12.21"},null,-1)]))}const vRe={render:wRe},bRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function _Re(n,e){return Re(),Oe("svg",bRe,e[0]||(e[0]=[be("path",{d:"M417.751 174.574c4.011 0 7.838-1.583 10.667-4.417a15.14 15.14 0 0 0 4.44-10.685v-33.518a15.27 15.27 0 0 0-4.348-9.96L319.206 4.533A15.04 15.04 0 0 0 308.447 0H118.296c-28.284 0-51.2 22.922-51.2 51.2v108.336c0 8.336 6.748 15.107 15.084 15.107 8.353 0 15.101-6.771 15.101-15.107V51.2c0-11.612 9.397-21.014 21.015-21.014h172.939V90.58c.209 28.127 23.078 50.84 51.223 50.84h60.394v18.116h-.023c.046 8.267 6.731 14.968 14.991 15.038zm-75.293-63.339c-11.617 0-21.014-9.421-21.014-21.015v-40.4l60.44 61.415zm90.58 337.565v-.023c0 28.284-22.939 51.223-51.223 51.223H118.296c-28.278 0-51.2-22.939-51.2-51.223v-32.539c0-8.337 6.753-15.108 15.084-15.108 8.353 0 15.107 6.771 15.107 15.108v32.788c0 11.617 9.397 21.015 21.015 21.015H381.71c5.565 0 10.91-2.221 14.852-6.157a21.02 21.02 0 0 0 6.163-14.858v-32.788c0-8.337 6.748-15.108 15.101-15.108 8.336 0 15.084 6.771 15.084 15.108zM189.244 243.528v12.156a12.16 12.16 0 0 0 3.555 8.595 12.16 12.16 0 0 0 8.602 3.553c20.135 0 36.452 16.316 36.452 36.46v12.147c0 20.143-16.317 36.46-36.452 36.46-20.143 0-36.46-16.317-36.46-36.46 0-6.712 5.437-12.147 12.155-12.147 6.712 0 12.148 5.435 12.148 12.147s5.437 12.157 12.157 12.157c6.711 0 12.147-5.444 12.147-12.157v-12.147c0-3.228-1.276-6.323-3.553-8.603a12.16 12.16 0 0 0-8.602-3.553c-20.135 0-36.452-16.317-36.452-36.452v-12.156c0-20.143 16.317-36.451 36.452-36.451 20.143 0 36.46 16.308 36.46 36.451 0 6.712-5.437 12.156-12.157 12.156-6.712 0-12.148-5.444-12.148-12.156s-5.436-12.148-12.155-12.148c-6.712 0-12.149 5.436-12.149 12.148m-48.606-24.304v97.215c0 20.143-16.317 36.46-36.46 36.46H79.874c-6.712 0-12.148-5.445-12.148-12.157 0-6.71 5.436-12.146 12.148-12.146h24.304a12.145 12.145 0 0 0 12.155-12.157v-97.215c0-6.71 5.437-12.155 12.156-12.155 6.712 0 12.149 5.445 12.149 12.155m157.97-12.147c-20.144 0-36.46 16.308-36.46 36.451v72.911c0 20.143 16.316 36.46 36.46 36.46 20.143 0 36.451-16.317 36.451-36.46v-72.911c0-20.143-16.308-36.451-36.451-36.451m12.148 109.362c0 6.713-5.437 12.149-12.148 12.149-6.712 0-12.156-5.436-12.156-12.149v-72.911c0-6.719 5.444-12.156 12.156-12.156 6.711 0 12.148 5.437 12.148 12.156zm121.518-72.911v97.214c0 6.712-5.436 12.149-12.148 12.149s-12.156-5.437-12.156-12.149v-97.214c0-6.719-5.436-12.156-12.148-12.156s-12.155 5.437-12.155 12.156v97.214c0 6.712-5.437 12.149-12.149 12.149s-12.154-5.437-12.154-12.149v-97.214c0-20.143 16.315-36.459 36.458-36.459s36.452 16.316 36.452 36.459"},null,-1)]))}const ERe={render:_Re},xRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function SRe(n,e){return Re(),Oe("svg",xRe,e[0]||(e[0]=[be("path",{d:"M107.326 500 90.94 430.601V500H62.961V356.222H90.76v74.379l15.832-74.379h27.058l-16.566 74.194L135.125 500zM168.813 500V356.222h61.486v24.484h-30.922v31.484h20.244v28.348h-20.244v34.243h30.922V500zM135.49 35.162H62.591v292.896h72.899zM437.409 64.801h-72.904v263.257h72.904zM336.711 0h-72.904v328.058h72.904zM236.008 113.955h-72.899v214.103h72.899zM309.462 500l-9.758-44.914L288.292 500h-26.324l22.09-71.424-20.251-72.354h27.984l9.388 47.5 11.227-47.5h26.145l-21.541 68.67L337.995 500zM409.61 445.877h-10.863V500h-27.799V356.222h38.662c14.542 0 27.244 8.653 27.244 28.724v32.212c0 20.066-12.702 28.719-27.244 28.719m1.105-59.832c0-4.784-2.025-6.438-4.969-6.438h-6.814v44.915h6.814c3.129 0 4.969-1.655 4.969-6.259z"},null,-1)]))}const ARe={render:SRe},CRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function TRe(n,e){return Re(),Oe("svg",CRe,e[0]||(e[0]=[be("path",{d:"M479.131 130.239H20.847C9.364 130.239 0 139.603 0 151.086v197.85c0 11.483 9.342 20.847 20.847 20.847h458.306c11.483 0 20.847-9.364 20.847-20.847v-197.85c0-11.483-9.342-20.847-20.847-20.847zm-426.655-.022h16.135zm436.633 218.719c0 5.5-4.478 9.978-9.978 9.978H20.847c-5.5 0-9.978-4.478-9.978-9.978v-197.85c0-5.5 4.478-9.978 9.978-9.978h458.306c5.5 0 9.978 4.478 9.978 9.978v197.85z"},null,-1),be("path",{d:"M474.463 149.462H26.2a5.43 5.43 0 0 0-5.435 5.434v186.536a5.43 5.43 0 0 0 5.435 5.434h448.241a5.43 5.43 0 0 0 5.434-5.434V154.896a5.43 5.43 0 0 0-5.434-5.434zM378.086 298.7v-26.428h29.7V298.7zm20.277-37.319v-26.428h70.671v26.428zm-40.569 0v-26.428h29.7v26.428zM337.518 298.7v-26.428h29.699V298.7zm-40.548 0v-26.428h29.7V298.7zm-40.563 0v-26.428h29.694V298.7zm-40.547 0v-26.428h29.694V298.7zm-40.569 0v-26.428h29.7V298.7zm-40.547 0v-26.428h29.7V298.7zm-103.11-37.319v-26.428h70.247v26.428zm92.241-63.731v26.428h-29.7V197.65zm40.547 0v26.428h-29.7V197.65zm40.569 0v26.428h-29.7V197.65zm40.547 0v26.428h-29.7V197.65zm40.563 0v26.428h-29.694V197.65zm40.547 0v26.428h-29.699V197.65zm40.569 0v26.428h-29.699V197.65zm40.547 0v26.428h-29.699V197.65zm-90.517 63.731v-26.428h29.699v26.428zm-40.569 0v-26.428h29.7v26.428zm-40.547 0v-26.428h29.699v26.428zm-40.569 0v-26.428h29.7v26.428zm-40.542 0v-26.428h29.694v26.428zm-42.27-26.428h31.379v26.428H112.75zm305.884-10.869V197.65h50.378v26.434zm-21.972-37.303v-26.428h29.699v26.428zm-10.869 0h-29.7v-26.428h29.7zm-40.548 0h-29.694v-26.428h29.694zm-40.563 0h-29.7v-26.428h29.7zm-40.569 0h-29.7v-26.428h29.7zm-40.547 0h-29.7v-26.428h29.7zm-40.569 0h-29.7v-26.428h29.7zm-40.547 0h-29.7v-26.428h29.7zm-40.569 0H72.187v-26.428h29.694zM83.306 197.65v26.434H31.639V197.65zm-51.667 74.6h92.219v26.434l-92.219.021zm70.247 37.325v26.428H72.187v-26.428zm10.87 0h29.694v26.428h-29.694zm40.563 0h203.007v26.428H153.319zm213.877 0h29.699v26.428h-29.699zm51.438-37.325h50.378v26.434h-50.378zm50.4-85.469h-31.803v-26.428h31.803zm-407.7-26.45v26.428h-29.7v-26.428zm-29.7 149.238h29.7v26.428h-29.7zm376.13 26.45v-26.428h61.264v26.428z"},null,-1)]))}const IRe={render:TRe},MRe={xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100"};function RRe(n,e){return Re(),Oe("svg",MRe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M98.64 50c0 12.088-9.798 21.887-21.887 21.887H63.374a3.65 3.65 0 0 1-3.648-3.647 3.65 3.65 0 0 1 3.648-3.648h13.379c8.057 0 14.591-6.535 14.591-14.592S84.81 35.408 76.753 35.408H63.374a3.649 3.649 0 0 1 0-7.295h13.379c12.088 0 21.887 9.798 21.887 21.887M36.626 64.592a3.65 3.65 0 0 1 3.648 3.648 3.65 3.65 0 0 1-3.648 3.647H23.238A21.876 21.876 0 0 1 1.36 50.008v-.017a21.873 21.873 0 0 1 21.878-21.878h13.388a3.649 3.649 0 0 1 0 7.295H23.238a14.58 14.58 0 0 0-10.31 4.273 14.58 14.58 0 0 0-4.272 10.31v.017c0 3.868 1.536 7.58 4.272 10.31a14.58 14.58 0 0 0 10.31 4.274zm-5.471-10.944A3.647 3.647 0 0 1 27.507 50a3.646 3.646 0 0 1 3.648-3.648h37.696a3.648 3.648 0 1 1 0 7.296z"},null,-1)]))}const PRe={render:RRe},NRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function ORe(n,e){return Re(),Oe("svg",NRe,e[0]||(e[0]=[be("path",{d:"M259 507.2C120.4 507.9 6.7 392.7 9.9 252.1c3-134 114.1-245 252.4-243.4 136.6 1.6 249.4 115.4 245.8 256-3.4 133.4-113.4 243.1-249.1 242.5m-218.8-249C41.3 383.5 142.6 479.8 262.4 478c116.2-1.8 215.2-96.4 215.3-220 0-125.2-102.1-222-222.2-220C139.1 39.9 41 134.7 40.2 258.2"},null,-1),be("path",{d:"M326.6 375.6v-6.1c0-26.7.1-53.3-.1-80 0-4.6-.4-9.4-1.5-13.8-3.6-14.8-15.6-22.2-32.9-20.8-12.8 1-24.3 12.4-25.2 25.6-.6 8-.4 16-.5 24-.1 21.7 0 43.3 0 65v6.2h-48.1V219.3H266v19.8c1.7-2 2.7-3 3.4-4.2 21.6-32.4 80.2-28.9 97.6 9.3 4.8 10.6 7.7 21.7 7.8 33.3.3 32.1.2 64.3.2 96.5 0 .5-.1 1-.3 1.8-15.8-.2-31.7-.2-48.1-.2M187.5 375.8h-47.7V220.2h47.7zM162.2 189c-14.3-.1-24.3-10.5-24.2-24.9s10.5-24.3 25.4-24.2c14.2.1 24.5 10.6 24.3 24.9 0 14.2-10.7 24.3-25.5 24.2"},null,-1)]))}const kRe={render:ORe},DRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function LRe(n,e){return Re(),Oe("svg",DRe,e[0]||(e[0]=[be("path",{d:"M363.59 229.679v-116.09a113.59 113.59 0 0 0-227.18 0v116.09a159.026 159.026 0 1 0 227.18 0m-181.744-116.09a68.154 68.154 0 0 1 136.308 0v83.83a156.07 156.07 0 0 0-136.308 0ZM250 454.36a113.59 113.59 0 1 1 113.59-113.59A113.59 113.59 0 0 1 250 454.36"},null,-1),be("path",{d:"M284.077 323.731a34.08 34.08 0 0 1-11.359 25.217v20.22a22.718 22.718 0 0 1-45.436 0v-20.22a34.077 34.077 0 1 1 56.795-25.217"},null,-1)]))}const URe={render:LRe},BRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function FRe(n,e){return Re(),Oe("svg",BRe,e[0]||(e[0]=[be("path",{d:"m460.169 257.97-98.408 98.407c-2.254 2.254-5.052 3.267-7.98 3.267s-5.732-1.121-7.986-3.267a11.19 11.19 0 0 1 0-15.837l79.2-79.2H120.569c-6.168 0-11.226-5.058-11.226-11.227 0-6.174 5.058-11.226 11.226-11.226h304.55l-79.2-79.201a11.196 11.196 0 0 1 0-15.842 11.196 11.196 0 0 1 15.842 0l98.408 98.407a11.197 11.197 0 0 1 0 15.843zm-176.486 81.896c-6.169 0-11.227 5.058-11.227 11.226v112.33c0 6.174-5.052 11.227-11.226 11.227l-190.98.021c-6.169 0-11.227-5.057-11.227-11.226l-.016-426.888c0-6.174 5.052-11.226 11.226-11.226h190.981c6.168 0 11.226 5.052 11.226 11.226v112.33c0 6.169 5.052 11.226 11.227 11.226 6.168 0 11.226-5.057 11.226-11.226l.016-112.33c0-18.538-15.163-33.701-33.701-33.701H70.25c-18.533 0-33.701 15.163-33.701 33.701v426.888c0 18.533 15.168 33.701 33.701 33.701h190.98c18.538 0 33.701-15.168 33.701-33.701v-112.33c0-6.174-5.053-11.226-11.227-11.226z"},null,-1)]))}const $Re={render:FRe},zRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function HRe(n,e){return Re(),Oe("svg",zRe,e[0]||(e[0]=[be("path",{d:"M83.397 494.27h333.222c29.64 0 53.757-24.123 53.757-53.758s-24.116-53.758-53.757-53.758h-60.151V261.506l62.757-62.757c3.178-3.173 3.178-8.327 0-11.522-3.174-3.173-8.323-3.173-11.517 0l-62.757 62.757H155.033l-62.126-62.126c-3.179-3.174-8.327-3.174-11.522 0-3.179 3.173-3.179 8.327 0 11.522l62.127 62.126v125.248H87.758c-.307 0-.573.141-.875.183-1.162-.084-2.324-.183-3.502-.183-29.64 0-53.757 24.122-53.757 53.758 0 29.635 24.122 53.757 53.757 53.757zm128.14-91.236c-9.442 9.687-15.284 22.897-15.284 37.473 0 14.575 5.842 27.785 15.284 37.478h-89.688c9.448-9.693 15.29-22.903 15.29-37.478s-5.842-27.786-15.29-37.473zm166.614 0c-9.443 9.687-15.284 22.897-15.284 37.473 0 14.575 5.841 27.785 15.284 37.478h-89.688c9.448-9.693 15.29-22.903 15.29-37.478s-5.842-27.786-15.29-37.473zm-90.663 37.473c0 20.662-16.81 37.478-37.472 37.478s-37.473-16.816-37.473-37.478c0-20.657 16.81-37.473 37.473-37.473 20.662 0 37.472 16.816 37.472 37.473m166.614 0c0 20.662-16.81 37.478-37.473 37.478-20.661 0-37.472-16.816-37.472-37.478 0-20.657 16.81-37.473 37.472-37.473 20.683 0 37.473 16.816 37.473 37.473M159.838 266.279h180.371v120.465H159.838zM83.402 403.03c20.662 0 37.478 16.816 37.478 37.478s-16.816 37.472-37.478 37.472c-20.678 0-37.473-16.81-37.473-37.472s16.816-37.478 37.473-37.478"},null,-1),be("path",{d:"M192.199 197.4c1.547 2.423 4.195 3.746 6.863 3.746a7.96 7.96 0 0 0 4.398-1.303c3.783-2.423 4.883-7.472 2.46-11.26l-30.287-47.14 43.966-31.433c7.92 7.571 18.63 12.256 30.411 12.256 11.809 0 22.533-4.68 30.454-12.277l43.909 31.475-30.147 47.14c-2.423 3.788-1.302 8.816 2.48 11.24a8.1 8.1 0 0 0 4.378 1.281 8.17 8.17 0 0 0 6.879-3.746l34.32-53.659c2.324-3.642 1.407-8.489-2.116-11.01L289.99 96.736c2.647-5.654 4.153-11.928 4.153-18.562 0-21.537-15.513-39.49-35.967-43.32V13.87c0-4.497-3.648-8.14-8.145-8.14a8.137 8.137 0 0 0-8.14 8.14v20.985c-20.437 3.83-35.972 21.783-35.972 43.32 0 6.676 1.527 12.965 4.195 18.645l-50.24 35.91a8.127 8.127 0 0 0-2.115 11.032l34.46 53.658zM250.01 50.347c15.352 0 27.828 12.475 27.828 27.827 0 15.347-12.476 27.827-27.828 27.827-9.218 0-17.363-4.56-22.428-11.5l-.063-.126c-.062-.083-.161-.12-.203-.203-3.194-4.518-5.128-10.016-5.128-15.977 0-15.352 12.476-27.827 27.822-27.827z"},null,-1)]))}const VRe={render:HRe},WRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function qRe(n,e){return Re(),Oe("svg",WRe,e[0]||(e[0]=[be("path",{d:"M158.71 286.983h299.193c19.99 0 36.649-16.659 36.649-36.65 0-19.99-16.659-36.649-36.649-36.649H158.71c-19.992 0-36.65 16.659-36.65 36.649s15.993 36.65 36.65 36.65M287.982 496.218h169.254c19.991 0 36.65-16.658 36.65-36.65 0-19.99-16.659-36.649-36.65-36.649H287.982c-19.99 0-36.649 16.659-36.649 36.649 0 20.657 16.659 36.65 36.649 36.65M42.097 77.081h415.806c19.99 0 36.649-16.659 36.649-36.649 0-19.992-16.659-36.65-36.649-36.65H42.097c-19.99 0-36.649 16.658-36.649 36.65 0 19.99 15.993 36.649 36.649 36.649"},null,-1)]))}const jRe={render:qRe},GRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function KRe(n,e){return Re(),Oe("svg",GRe,e[0]||(e[0]=[be("path",{d:"M250 0c-53.607 0-97.063 43.457-97.063 97.062v142.366c0 74.72 80.886 121.419 145.594 84.06a97.07 97.07 0 0 0 48.531-84.06V97.062C347.062 43.457 303.605 0 250 0m64.708 239.428c0 49.813-53.924 80.946-97.062 56.04a64.71 64.71 0 0 1-32.354-56.04V97.062c0-49.812 53.923-80.945 97.062-56.039a64.71 64.71 0 0 1 32.354 56.039z"},null,-1),be("path",{d:"M233.818 400.398v67.248H169.11c-12.454.306-19.906 13.979-13.415 24.61A16.18 16.18 0 0 0 169.11 500h161.78c12.453-.306 19.905-13.978 13.413-24.61a16.18 16.18 0 0 0-13.413-7.744h-64.708v-67.248c84.171-8.164 150.179-79.298 150.179-165.569.305-12.453-12.984-20.567-23.922-14.606a16.18 16.18 0 0 0-8.433 14.606c0 73.888-60.118 134.006-134.006 134.006s-134.007-60.108-134.007-133.996c.306-12.453-12.983-20.567-23.921-14.606a16.18 16.18 0 0 0-8.433 14.606c0 86.271 66.017 157.405 150.179 165.559"},null,-1)]))}const YRe={render:KRe},XRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function ZRe(n,e){return Re(),Oe("svg",XRe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M227.277 91.388v-11.84c0-6.284-5.084-11.367-11.36-11.367h-79.548c-18.807 0-34.094-15.258-34.094-34.087C102.275 15.258 117.562 0 136.369 0h249.996c6.277 0 11.36 5.113 11.36 11.367 0 6.276-5.083 11.36-11.36 11.36H136.369c-6.276 0-11.367 5.084-11.367 11.367v.167c.087 6.197 5.142 11.193 11.367 11.193h79.548c18.807 0 34.087 15.258 34.087 34.094v11.847a136.3 136.3 0 0 1 85.053 39.454 136.38 136.38 0 0 1 39.948 96.42v136.362a136.36 136.36 0 0 1-39.948 96.421C309.494 485.651 274.803 500 238.637 500c-36.16 0-70.85-14.349-96.421-39.948a136.38 136.38 0 0 1-39.941-96.421V227.269a136.4 136.4 0 0 1 39.941-96.42 136.4 136.4 0 0 1 85.053-39.454zm11.367 22.247a113.64 113.64 0 0 0-80.37 33.294 113.65 113.65 0 0 0-33.265 80.34v136.362a113.66 113.66 0 0 0 33.265 80.341 113.6 113.6 0 0 0 80.37 33.294 113.6 113.6 0 0 0 80.37-33.294 113.66 113.66 0 0 0 33.265-80.341V227.269a113.67 113.67 0 0 0-33.265-80.34 113.64 113.64 0 0 0-80.37-33.294m-22.727 45.454c0-12.56 10.167-22.727 22.727-22.727s22.727 10.167 22.727 22.727v90.907c0 12.531-10.167 22.727-22.727 22.727s-22.727-10.196-22.727-22.727z"},null,-1)]))}const JRe={render:ZRe},QRe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function ePe(n,e){return Re(),Oe("svg",QRe,e[0]||(e[0]=[be("g",{"data-name":"Layer 2"},[be("path",{d:"M465.649 494.008a17.025 17.025 0 0 0 17.025-17.025V22.985a17.025 17.025 0 0 0-34.05 0v453.998a17.025 17.025 0 0 0 17.025 17.025M50.24 492.6a62.31 62.31 0 0 0 64.083-3.11L395.8 301.923a62.402 62.402 0 0 0 0-103.875L114.368 10.477a62.425 62.425 0 0 0-97.042 51.938v375.138a62.38 62.38 0 0 0 32.915 55.048m1.136-430.185a27.97 27.97 0 0 1 14.982-24.97 28.44 28.44 0 0 1 13.393-3.473 28.1 28.1 0 0 1 15.685 4.835l281.479 187.57a28.352 28.352 0 0 1 0 47.215L95.482 461.093a28.375 28.375 0 0 1-44.106-23.608Z"})],-1)]))}const tPe={render:ePe},nPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function rPe(n,e){return Re(),Oe("svg",nPe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M402.191 496.573H97.763c-23.537 0-42.602-19.089-42.602-42.626V46.028c0-23.542 19.088-42.602 42.602-42.602h304.428c23.536 0 42.601 19.083 42.601 42.602v133.949c0 10.088-8.171 18.265-18.265 18.265-10.064 0-18.264-8.177-18.264-18.265V46.028a6.07 6.07 0 0 0-6.072-6.072H97.763a6.07 6.07 0 0 0-6.073 6.072v407.919c0 3.355 2.719 6.096 6.073 6.096h30.457v-60.889c0-11.304 4.5-22.147 12.49-30.136a42.6 42.6 0 0 1 30.135-12.49h158.309a42.6 42.6 0 0 1 30.136 12.49 42.63 42.63 0 0 1 12.49 30.136v60.889h30.457c3.354 0 6.073-2.741 6.073-6.096v-176.55c0-10.095 8.194-18.265 18.264-18.265 10.088 0 18.265 8.17 18.265 18.265v176.55c0 23.537-19.088 42.626-42.602 42.626zm-66.987-36.53v-60.889a6.14 6.14 0 0 0-1.783-4.32 6.08 6.08 0 0 0-4.29-1.776H170.822a6.05 6.05 0 0 0-4.29 1.776 6.1 6.1 0 0 0-1.783 4.32v60.889zm-188.719-334.86c-10.089 0-18.265-8.177-18.265-18.265 0-10.093 8.176-18.264 18.265-18.264h42.602c10.093 0 18.264 8.171 18.264 18.264 0 10.088-8.171 18.265-18.264 18.265zm164.381 0c-10.087 0-18.264-8.177-18.264-18.265 0-10.093 8.177-18.264 18.264-18.264h42.603c10.093 0 18.265 8.171 18.265 18.264 0 10.088-8.172 18.265-18.265 18.265zm-164.381 91.323c-10.089 0-18.265-8.176-18.265-18.264 0-10.094 8.176-18.265 18.265-18.265h42.602c10.093 0 18.264 8.171 18.264 18.265 0 10.088-8.171 18.264-18.264 18.264zm164.381 0c-10.087 0-18.264-8.176-18.264-18.264 0-10.094 8.177-18.265 18.264-18.265h42.603c10.093 0 18.265 8.171 18.265 18.265 0 10.088-8.172 18.264-18.265 18.264zM146.485 307.83c-10.089 0-18.265-8.177-18.265-18.264 0-10.095 8.176-18.265 18.265-18.265h42.602c10.093 0 18.264 8.17 18.264 18.265 0 10.087-8.171 18.264-18.264 18.264zm164.381 0c-10.087 0-18.264-8.177-18.264-18.264 0-10.095 8.177-18.265 18.264-18.265h42.603c10.093 0 18.265 8.17 18.265 18.265 0 10.087-8.172 18.264-18.265 18.264z"},null,-1)]))}const iPe={render:rPe},sPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function oPe(n,e){return Re(),Oe("svg",sPe,e[0]||(e[0]=[be("path",{d:"M150.404 500h-31.658c-24.085 0-43.752-19.667-43.752-43.752V43.752C74.994 19.667 94.66 0 118.746 0h31.658c24.085 0 43.752 19.667 43.752 43.752v412.496c0 24.085-19.562 43.752-43.752 43.752M118.746 33.655c-5.522 0-10.097 4.575-10.097 10.097v412.496c0 5.521 4.575 10.096 10.097 10.096h31.658c5.521 0 10.096-4.575 10.096-10.096V43.752c0-5.522-4.575-10.097-10.096-10.097zM381.254 500h-31.658c-24.085 0-43.752-19.667-43.752-43.752V43.752C305.844 19.667 325.51 0 349.596 0h31.658c24.085 0 43.752 19.667 43.752 43.752v412.496c0 24.085-19.667 43.752-43.752 43.752M349.596 33.655c-5.522 0-10.097 4.575-10.097 10.097v412.496c0 5.521 4.575 10.096 10.097 10.096h31.658c5.521 0 10.096-4.575 10.096-10.096V43.752c0-5.522-4.575-10.097-10.096-10.097z"},null,-1)]))}const aPe={render:oPe},cPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function lPe(n,e){return Re(),Oe("svg",cPe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M178.816 155.398c7.614-11.808 6.016-27.437-4.03-37.491L150.451 93.58a30.05 30.05 0 0 0-21.246-8.812 30.04 30.04 0 0 0-21.243 8.812c-15.882 15.879-34.333 34.335-48.261 48.616-.041.046-.11.115-.156.161-8.605 8.628-11.108 21.627-6.311 32.822C73.6 221.66 98.677 263.29 128.484 300.08c6.262 7.73 5.068 19.086-2.659 25.343-7.723 6.264-19.078 5.07-25.343-2.652-31.791-39.25-58.552-83.652-80.295-133.196l-.046-.115c-10.659-24.714-5.18-53.419 13.79-72.476 13.987-14.348 32.574-32.937 48.527-48.913a66.08 66.08 0 0 1 46.724-19.351 66.1 66.1 0 0 1 46.727 19.351l24.334 24.333c23.07 23.071 25.839 59.498 6.552 85.815l-6.102 8.341c-7.187 9.798-7.775 22.977-1.465 33.364l.023.046c21.651 35.775 44.876 59.14 80.474 80.116.069.04.11.063.179.11 10.226 6.172 23.162 5.612 32.806-1.466.627-.45 1.279-.877 1.954-1.263 2.348-1.302 4.534-2.969 6.76-4.59 26.317-19.287 62.744-16.495 85.816 6.551l24.332 24.335a66.08 66.08 0 0 1 19.356 46.727 66.06 66.06 0 0 1-19.356 46.723l-48.73 48.735c-19.061 19.08-47.783 24.644-72.612 14.101l-.156-.069c-52.403-22.844-99.063-51.544-139.995-86.109-7.597-6.418-8.564-17.797-2.146-25.388 6.426-7.595 17.799-8.564 25.394-2.14 38.319 32.35 82.008 59.186 131.056 80.567 11.264 4.775 24.31 2.225 32.96-6.425l48.731-48.729a30.04 30.04 0 0 0 8.783-21.243 30.14 30.14 0 0 0-8.783-21.247l-24.333-24.334c-10.475-10.474-27.055-11.737-39.001-2.969-3.176 2.319-6.349 4.613-9.55 6.441-21.247 15.071-49.427 16.173-71.801 2.723-41.093-24.217-67.947-51.14-92.954-92.458-13.9-22.863-12.637-51.861 3.201-73.422 0 0 6.799-9.325 7.139-9.821zM273.957 51.31c-9.914.837-18.634-6.551-19.464-16.465-.837-9.915 6.556-18.635 16.465-19.466 5.479-.45 11.04-.698 16.651-.698 109.063 0 197.63 88.544 197.63 197.63 0 3.581-.093 7.14-.294 10.676-.537 9.936-9.032 17.574-18.947 17.03-9.937-.535-17.573-9.032-17.031-18.945.156-2.908.225-5.815.225-8.738 0-89.172-72.411-161.583-161.583-161.583-4.596 0-9.147.178-13.629.559zM415.85 238.352c-.768 9.913-9.418 17.347-19.334 16.603-9.913-.767-17.365-9.418-16.603-19.326.202-2.752.317-5.544.317-8.341 0-59.704-48.483-108.187-108.188-108.187-4.394 0-8.743.272-13 .768-9.891 1.171-18.853-5.877-20.047-15.744-1.176-9.893 5.876-18.861 15.746-20.032a146 146 0 0 1 17.278-1.038c79.598 0 144.234 64.636 144.234 144.233 0 3.72-.132 7.412-.427 11.087z"},null,-1)]))}const uPe={render:lPe},hPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function dPe(n,e){return Re(),Oe("svg",hPe,e[0]||(e[0]=[be("path",{d:"M84.493 38.319c3.448 0 6.888.927 10.121 2.842l331.239 191.166c9.187 5.294 10.176 14.098 10.176 17.631s-.989 12.328-10.176 17.631L94.614 458.846c-3.233 1.824-6.673 2.843-10.121 2.843-9.816 0-20.466-7.816-20.466-20.474l.023-382.423c0-12.665 10.566-20.473 20.443-20.473m0-38.311c-30.649 0-58.778 24.511-58.778 58.784v382.423C25.715 475.45 53.844 500 84.493 500c9.823 0 19.76-2.521 29.277-7.969l331.155-191.257c39.146-22.535 39.146-79.075 0-101.617L113.77 7.992C104.276 2.551 94.254 0 84.493 0z"},null,-1)]))}const fPe={render:dPe},pPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function mPe(n,e){return Re(),Oe("svg",pPe,e[0]||(e[0]=[be("path",{d:"M266.647 83.816H.293V50.522h266.354zm0 83.236H.293v33.294h266.354zM.293 316.876h149.824v-33.294H.293zM499.707 0v128.995L366.53 174.776v241.988c0 45.882-44.801 83.236-99.883 83.236s-99.883-37.354-99.883-83.236c0-45.887 44.801-83.235 99.883-83.235a111.25 111.25 0 0 1 66.589 21.367V55.141zM333.236 416.759c0-27.53-29.864-49.941-66.589-49.941-36.73 0-66.588 22.411-66.588 49.941s29.858 49.941 66.588 49.941c36.725 0 66.589-22.411 66.589-49.941M466.413 46.111 366.53 79.198v60.366l99.883-34.338z"},null,-1)]))}const gPe={render:mPe},yPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function wPe(n,e){return Re(),Oe("svg",yPe,e[0]||(e[0]=[be("path",{d:"M50 977.362a2 2 0 0 0-2 2v21H27a2 2 0 1 0 0 4h21v21a2 2 0 1 0 4 0v-21h21a2 2 0 1 0 0-4H52v-21a2 2 0 0 0-2-2",overflow:"visible",style:{"text-indent":"0","text-transform":"none",direction:"ltr","block-progression":"tb","baseline-shift":"baseline",color:"#000"},transform:"matrix(2 0 0 2 -50 -1954.724)"},null,-1)]))}const vPe={render:wPe},bPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function _Pe(n,e){return Re(),Oe("svg",bPe,e[0]||(e[0]=[be("g",{"data-name":"Layer 2"},[be("path",{d:"M34.351 494.008a17.025 17.025 0 0 1-17.025-17.025V22.985a17.025 17.025 0 0 1 34.05 0v453.998a17.025 17.025 0 0 1-17.025 17.025M449.759 492.6a62.31 62.31 0 0 1-64.082-3.11L104.198 301.922a62.402 62.402 0 0 1 0-103.874l281.434-187.57a62.425 62.425 0 0 1 97.042 51.938v375.138a62.38 62.38 0 0 1-32.915 55.047m-1.135-430.185a27.97 27.97 0 0 0-14.982-24.97 28.44 28.44 0 0 0-13.393-3.473 28.1 28.1 0 0 0-15.686 4.835l-281.478 187.57a28.352 28.352 0 0 0 0 47.215l281.433 187.501a28.375 28.375 0 0 0 44.106-23.608Z"})],-1)]))}const EPe={render:_Pe},xPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function SPe(n,e){return Re(),Oe("svg",xPe,e[0]||(e[0]=[HC('<path d="M405.051 400.574h-13.574c-6.562 0-10.659-7.103-7.38-12.784a8.52 8.52 0 0 1 7.38-4.262h13.585c43.001-.057 77.841-34.903 77.893-77.903v-56.853c-.074-42.977-34.927-77.784-77.904-77.806H94.949c-42.978.022-77.83 34.829-77.904 77.806v1.233c0 6.563-7.102 10.665-12.784 7.381A8.52 8.52 0 0 1 0 250.005v-1.21c.074-52.392 42.551-94.841 94.949-94.875h310.102c52.387.034 94.864 42.466 94.949 94.852v56.853c-.062 52.415-42.534 94.886-94.949 94.949M112.659 400.574h-17.71C42.534 400.511.062 358.04 0 305.625v-1.21c0-6.557 7.102-10.66 12.784-7.381a8.52 8.52 0 0 1 4.261 7.381v1.21c.051 43.005 34.898 77.852 77.904 77.903h17.71c6.562 0 10.659 7.102 7.381 12.784a8.52 8.52 0 0 1-7.381 4.262"></path><path d="M112.687 170.966a8.52 8.52 0 0 1-8.522-8.523V91.386a8.53 8.53 0 0 1 2.767-6.284l84.04-76.943a8.53 8.53 0 0 1 5.755-2.233H334.04q.844.002 1.665.165c.664.13 65.857 14.108 68.409 95.687.204 6.563-6.773 10.881-12.557 7.779a8.54 8.54 0 0 1-4.489-7.25c-2.006-64.074-47.329-77.682-53.977-79.336H200.04L121.21 95.13v67.313a8.52 8.52 0 0 1-8.523 8.523M422.227 323.63H86.051c-6.562 0-10.659-7.102-7.381-12.784a8.53 8.53 0 0 1 7.381-4.261h336.176c6.563 0 10.659 7.102 7.381 12.784a8.52 8.52 0 0 1-7.381 4.261"></path><path d="M250 494.085h-82.864c-41.272 0-59.159-41.028-62.852-62.727a8.5 8.5 0 0 1-.119-1.426V315.108c0-6.557 7.102-10.659 12.784-7.381a8.52 8.52 0 0 1 4.261 7.381v114.034c1.176 5.994 10.676 47.898 45.926 47.898H250c6.562 0 10.659 7.102 7.381 12.784a8.53 8.53 0 0 1-7.381 4.261"></path><path d="M337.006 494.085h-82.87c-6.562 0-10.659-7.102-7.38-12.784a8.52 8.52 0 0 1 7.38-4.261h82.87c35.011 0 44.772-42.228 45.926-47.915V315.108c0-6.557 7.102-10.659 12.784-7.381a8.52 8.52 0 0 1 4.261 7.381v114.824q0 .717-.119 1.426c-3.693 21.699-21.585 62.727-62.852 62.727"></path><path d="M339.96 380.449H165.954c-6.562 0-10.659-7.103-7.38-12.784a8.52 8.52 0 0 1 7.38-4.262H339.96c6.563 0 10.659 7.102 7.381 12.784a8.52 8.52 0 0 1-7.381 4.262M313.915 440.818H190.812c-6.562 0-10.659-7.102-7.38-12.784a8.52 8.52 0 0 1 7.38-4.261h123.103c6.562 0 10.659 7.102 7.38 12.784a8.52 8.52 0 0 1-7.38 4.261M197.915 99.909h-85.228c-6.562 0-10.659-7.102-7.38-12.784a8.52 8.52 0 0 1 7.38-4.262h76.705V14.449c0-6.557 7.102-10.66 12.784-7.381a8.52 8.52 0 0 1 4.261 7.381v76.937a8.52 8.52 0 0 1-8.522 8.523"></path>',5)]))}const APe={render:SPe},CPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function TPe(n,e){return Re(),Oe("svg",CPe,e[0]||(e[0]=[be("path",{d:"M249.99 181.461c18.912 0 36.055 7.694 48.467 20.086 12.398 12.397 20.091 29.54 20.091 48.467 0 18.913-7.693 36.055-20.091 48.468-12.397 12.397-29.534 20.091-48.467 20.091-18.913 0-36.05-7.694-48.468-20.091-12.397-12.393-20.085-29.535-20.085-48.468 0-18.912 7.688-36.049 20.085-48.467 12.398-12.392 29.535-20.086 48.468-20.086m-116.883-27.463a11.675 11.675 0 0 1 16.443-1.592c4.979 4.082 5.699 11.438 1.612 16.438-9.203 11.183-16.54 24.035-21.56 38.045-4.826 13.453-7.433 27.963-7.433 43.11 0 15.142 2.627 29.652 7.433 43.105a127.4 127.4 0 0 0 21.56 38.045c4.107 4.979 3.388 12.336-1.612 16.438-4.984 4.107-12.336 3.393-16.443-1.592-10.979-13.351-19.688-28.539-25.586-45.018-5.704-15.923-8.811-33.106-8.811-50.978 0-17.877 3.107-35.039 8.811-50.983 5.898-16.458 14.607-31.667 25.586-45.018m215.71 14.826c-4.107-4.98-3.387-12.336 1.618-16.438 4.979-4.107 12.336-3.388 16.438 1.592 10.984 13.351 19.693 28.539 25.591 45.018 5.698 15.923 8.805 33.106 8.805 50.983 0 17.871-3.107 35.034-8.805 50.977-5.898 16.459-14.607 31.667-25.591 45.019-4.102 4.984-11.438 5.699-16.438 1.592-4.985-4.082-5.704-11.439-1.618-16.439 9.209-11.183 16.541-24.034 21.566-38.044 4.821-13.453 7.433-27.963 7.433-43.105 0-15.148-2.632-29.657-7.433-43.111-5.025-14.03-12.377-26.881-21.566-38.044M102.634 422.12c4.902 4.188 5.479 11.581 1.295 16.484-4.183 4.903-11.576 5.479-16.478 1.296-27.265-23.357-49.447-52.493-64.63-85.477C8.168 322.593 0 287.222 0 250.014c0-37.228 8.168-72.599 22.821-104.409 15.183-32.983 37.365-62.12 64.63-85.476 4.897-4.188 12.295-3.627 16.478 1.296 4.184 4.903 3.628 12.275-1.295 16.479-24.714 21.168-44.82 47.59-58.59 77.502-13.234 28.739-20.627 60.804-20.627 94.624s7.373 65.885 20.627 94.623c13.77 29.933 33.881 56.34 58.59 77.502zM412.55 439.9c-4.903 4.183-12.296 3.627-16.479-1.296a11.686 11.686 0 0 1 1.295-16.484c24.709-21.163 44.82-47.59 58.59-77.502 13.229-28.734 20.627-60.804 20.627-94.624s-7.378-65.885-20.627-94.624c-13.775-29.932-33.881-56.339-58.59-77.502-4.902-4.183-5.484-11.576-1.295-16.479 4.183-4.902 11.576-5.479 16.479-1.295 27.264 23.356 49.447 52.492 64.63 85.476C491.827 177.395 500 212.771 500 249.979c0 37.228-8.173 72.599-22.82 104.409-15.183 32.983-37.366 62.12-64.63 85.476z"},null,-1)]))}const IPe={render:TPe},MPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function RPe(n,e){return Re(),Oe("svg",MPe,e[0]||(e[0]=[HC('<path d="M47.363 341.373c.716 11.818 1.433 25.784 2.507 39.751.358 6.088-2.507 12.176-7.878 15.399-6.447 3.939-12.535 3.223-19.339 0-10.743-4.656-13.966-13.609-16.831-23.636-6.446-23.277-8.237-47.271-1.791-71.265 1.791-7.162 6.805-13.966 11.818-19.696 4.297-5.372 10.744-7.162 17.548-4.655 6.446 2.506 10.385 7.52 11.101 14.324 1.075 9.311 1.433 18.98 1.791 28.649.358 6.446.716 12.534 1.074 21.129M453.465 320.244c.717-9.669 1.075-19.338 2.149-28.649.716-6.804 4.297-11.818 11.102-14.324 6.804-2.507 13.25-.717 17.547 4.655 4.656 5.73 9.669 12.534 11.818 19.696 6.446 23.994 4.297 47.988-1.79 71.265-2.865 10.027-6.088 18.98-16.832 23.636-6.804 3.223-12.534 3.939-18.622.358-6.446-3.581-8.953-8.953-8.595-15.757.717-13.967 1.791-27.933 2.507-39.751.358-8.595.358-14.683.716-21.129M450.601 271.183c-2.865 41.899-5.372 83.44-8.237 124.982-1.074 17.547-12.892 30.798-30.44 33.304-14.324 2.149-30.082-7.162-35.453-21.486-1.433-4.298-2.149-8.953-1.791-13.251.358-13.966 1.433-27.933 2.149-41.899 9.669-2.149 16.473-10.744 16.473-21.129 0-8.953-5.372-16.831-13.25-20.054h-.358c1.074-13.967 2.148-28.291 2.865-42.258 1.432-20.771 12.892-32.23 35.811-35.453.716-12.892-4.655-39.035-10.027-47.63-1.074 2.149-1.433 3.582-2.149 5.372-3.223 6.088-9.311 9.669-16.115 9.311-7.162-.358-13.608-4.655-15.399-11.46-10.027-39.75-38.318-60.521-75.562-70.906-39.035-10.386-78.069-9.669-116.029 5.013-29.008 11.46-49.42 31.873-56.941 63.029-2.864 11.459-8.952 16.473-18.98 16.115-8.952-.717-14.324-6.446-15.757-18.98-6.804 16.831-10.027 33.662-11.101 51.568 8.953-.716 17.189 1.075 23.993 7.162 8.953 7.521 12.534 17.548 13.251 29.366q1.43 19.337 2.507 39.034c-8.953 2.865-15.758 11.102-15.758 21.129 0 11.102 7.879 20.055 18.264 21.845h.358c1.075 13.609 2.149 27.217 2.865 40.467.358 11.102-3.939 20.413-11.459 26.501-7.163 6.446-17.19 10.027-26.501 8.594-6.804-1.074-12.892-3.581-17.189-7.52-7.521-5.372-11.818-13.25-12.534-23.277-2.865-33.663-4.656-67.326-6.805-100.989-.716-8.236-1.074-16.473-1.79-24.71-1.433-15.399 4.655-26.5 18.264-33.663a25 25 0 0 1 3.581-1.79c2.507-95.975 83.441-165.091 173.686-167.24 96.332-2.507 179.773 69.833 182.996 165.807 1.791.717 3.581 1.791 5.372 2.865 11.818 7.521 18.264 17.548 17.19 32.231" class="a" style="vector-effect:non-scaling-stroke;"></path><path d="M248.624 374.678c-6.804 18.98-16.832 34.737-30.082 48.345-6.446 6.805-14.683 5.73-17.548-1.79-1.79-5.014 0-8.595 3.224-11.818 16.473-16.831 26.858-36.886 30.439-60.163q7.52-52.283-26.858-91.32c-1.433-1.79-2.865-3.581-4.656-5.013-3.939-4.656-3.939-10.386 0-14.325s10.027-3.939 14.683.716q18.619 18.98 28.649 43.69c.716 1.791 1.074 3.223 1.791 4.298 5.371-10.027 10.385-20.055 16.473-29.724 4.297-6.446 9.669-12.176 14.683-17.905 4.655-5.014 10.743-5.014 15.04-1.075 3.94 4.298 3.582 10.027-1.074 14.683-22.561 23.635-33.305 51.568-31.872 84.157 1.432 27.933 12.176 51.568 31.156 71.981 2.149 2.149 4.655 5.73 4.297 8.595-.358 3.223-3.223 6.804-5.73 8.594-3.939 2.507-8.236.717-11.459-2.506q-17.551-17.549-27.575-40.467c-1.074-2.507-2.149-5.014-3.581-8.953" class="b" style="vector-effect:non-scaling-stroke;"></path><path d="M219.616 327.765c-.358 30.798-10.027 53.717-29.365 72.339-2.507 2.507-7.52 3.939-11.102 3.223-2.506-.358-6.087-5.014-6.446-7.879 0-3.223 2.149-7.52 4.656-10.027 14.683-15.041 22.561-32.588 22.561-53.717s-7.878-39.393-22.919-54.075c-4.298-3.94-6.088-8.237-3.223-13.609 2.865-6.088 10.385-6.804 16.115-1.432 13.966 13.25 22.919 29.007 27.217 47.629 1.432 6.804 2.148 13.967 2.506 17.548" class="b" style="vector-effect:non-scaling-stroke;"></path><path d="M164.109 331.704q-.36-16.831-12.176-28.291c-1.433-1.074-3.223-2.149-4.298-3.581-4.297-3.939-4.655-9.669-1.432-13.609 3.581-4.297 8.953-5.013 13.608-1.432 12.534 8.953 20.413 21.129 22.92 35.811 3.581 22.562-3.223 41.9-21.129 56.583-5.73 5.013-11.46 4.655-15.399 0s-2.865-10.028 2.865-15.041c10.385-8.953 15.041-18.264 15.041-30.44M313.801 328.481c.358-15.399 7.52-30.798 21.845-42.258 6.088-5.013 11.459-4.655 15.399 0 3.939 5.014 2.865 10.744-2.865 15.399-20.055 15.757-20.055 44.407 0 60.522 5.73 4.655 6.804 10.027 3.223 14.683-3.94 5.013-9.669 5.371-15.399.716-13.967-10.744-22.561-28.291-22.203-49.062" class="b" style="vector-effect:non-scaling-stroke;"></path><path d="M147.635 332.062c0 12.176-9.669 22.203-21.845 22.203s-22.203-10.027-22.203-22.203 10.027-21.845 22.203-21.845 21.845 9.669 21.845 21.845M280.496 310.217c3.939-18.622 13.25-34.379 26.859-47.629 5.729-5.372 13.25-4.656 16.473 1.432 2.865 5.372 1.074 9.669-3.223 13.609-15.399 14.682-23.278 32.946-23.278 54.075s7.879 38.676 22.562 53.717c2.506 2.507 5.013 6.804 4.655 10.027 0 2.865-3.581 7.521-6.446 7.879-3.223.716-8.237-.716-10.743-3.223-19.697-18.622-29.366-41.541-29.724-72.339.716-3.581 1.074-10.744 2.865-17.548M393.66 331.704c0 12.176-9.669 22.203-21.845 22.203s-22.203-10.027-22.203-22.203 10.027-21.845 22.203-21.845 21.845 9.669 21.845 21.845" class="b" style="vector-effect:non-scaling-stroke;"></path>',5)]))}const PPe={render:RPe},NPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function OPe(n,e){return Re(),Oe("svg",NPe,e[0]||(e[0]=[be("path",{d:"M56.771 225.954v129.055c0 8.33 6.748 15.101 15.078 15.101 8.36 0 15.108-6.771 15.108-15.101v-46.992h21.739l27.24 53.809a15.08 15.08 0 0 0 13.45 8.284c2.382-.023 4.713-.562 6.84-1.629 7.426-3.78 10.394-12.864 6.638-20.29l-23.438-46.261c19.838-10.417 29.913-33.13 24.319-54.823-5.617-21.716-25.385-36.707-47.803-36.232H71.809a15.06 15.06 0 0 0-10.667 4.412 15.06 15.06 0 0 0-4.371 10.667m30.186 15.101h28.985c10.145 0 18.389 8.244 18.389 18.388s-8.244 18.389-18.389 18.389H86.957zM276.742 370.11c4.006 0 7.855-1.606 10.69-4.435a15.07 15.07 0 0 0 4.412-10.666v-88.835c0-30.568-24.795-55.368-55.363-55.368-30.597 0-55.391 24.8-55.391 55.368v88.835c0 8.336 6.771 15.107 15.101 15.107 8.337 0 15.108-6.771 15.108-15.107v-40.65h50.359v40.65c0 8.336 6.748 15.107 15.084 15.107zm-65.443-85.936v-18.116c0-13.901 11.275-25.177 25.182-25.177 13.902 0 25.177 11.276 25.177 25.177v18.116zm231.93-58.22v108.15a39.84 39.84 0 0 1-22.533 35.826 39.86 39.86 0 0 1-42.076-4.666 39.84 39.84 0 0 1-42.069 4.666 39.83 39.83 0 0 1-22.533-35.826v-108.15c0-8.331 6.747-15.079 15.078-15.079 8.359 0 15.107 6.748 15.107 15.079v108.15a9.664 9.664 0 0 0 9.67 9.67c5.321 0 9.646-4.325 9.646-9.67v-108.15c0-8.331 6.771-15.079 15.107-15.079 8.331 0 15.102 6.748 15.102 15.079v108.15c0 5.345 4.324 9.67 9.646 9.67a9.664 9.664 0 0 0 9.67-9.67v-108.15c0-8.331 6.747-15.079 15.107-15.079 8.33 0 15.078 6.748 15.078 15.079m-25.478-51.38c4.011 0 7.838-1.583 10.667-4.417a15.14 15.14 0 0 0 4.44-10.685v-33.518a15.27 15.27 0 0 0-4.348-9.96L319.206 4.533A15.04 15.04 0 0 0 308.447 0H118.296c-28.284 0-51.2 22.922-51.2 51.2v108.336c0 8.336 6.748 15.107 15.084 15.107 8.353 0 15.101-6.771 15.101-15.107V51.2c0-11.612 9.397-21.014 21.015-21.014h172.939V90.58c.209 28.127 23.078 50.84 51.223 50.84h60.394v18.116h-.023c.046 8.267 6.731 14.968 14.991 15.038zm-75.293-63.339c-11.617 0-21.014-9.421-21.014-21.015v-40.4l60.44 61.415zm90.58 337.565v-.023c0 28.284-22.939 51.223-51.223 51.223H118.296c-28.278 0-51.2-22.939-51.2-51.223v-32.539c0-8.337 6.753-15.108 15.084-15.108 8.353 0 15.107 6.771 15.107 15.108v32.788c0 11.617 9.397 21.015 21.015 21.015H381.71c5.565 0 10.91-2.221 14.852-6.157a21.02 21.02 0 0 0 6.163-14.858v-32.788c0-8.337 6.748-15.108 15.101-15.108 8.336 0 15.084 6.771 15.084 15.108z"},null,-1)]))}const kPe={render:OPe},DPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function LPe(n,e){return Re(),Oe("svg",DPe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M127.184 82.413a22.72 22.72 0 0 0-16.073-6.655 22.7 22.7 0 0 0-16.054 6.655L6.659 170.811c-8.879 8.854-8.879 23.248 0 32.126 8.879 8.879 23.272 8.879 32.151 0l49.574-49.574v172.39c0 54.381 44.103 98.483 98.483 98.483h37.878c12.57 0 22.727-10.182 22.727-22.727s-10.157-22.727-22.727-22.727h-37.878c-29.284 0-53.029-23.745-53.029-53.029v-172.39l49.593 49.574c8.879 8.879 23.272 8.879 32.126 0 8.879-8.878 8.879-23.272 0-32.126zm245.637 335.174a22.72 22.72 0 0 0 16.072 6.655 22.73 22.73 0 0 0 16.054-6.655l88.398-88.398c8.873-8.854 8.873-23.248 0-32.126-8.878-8.879-23.272-8.879-32.15 0l-49.575 49.574v-172.39c0-54.381-44.102-98.483-98.483-98.483h-37.878c-12.545 0-22.727 10.182-22.727 22.727s10.182 22.727 22.727 22.727h37.878c29.284 0 53.029 23.745 53.029 53.029v172.39l-49.592-49.574c-8.879-8.879-23.273-8.879-32.127 0-8.879 8.878-8.879 23.272 0 32.126z"},null,-1)]))}const UPe={render:LPe},BPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function FPe(n,e){return Re(),Oe("svg",BPe,e[0]||(e[0]=[be("path",{d:"M455.019 365.171c-84.117 145.043-293.712 144.633-377.278-.744-83.554-145.376 21.602-326.68 189.286-326.36a217.83 217.83 0 0 1 165.954 77.25H330.477v25.626h128.13c7.086 0 12.813-5.74 12.813-12.813V0h-25.626v91.741C319.086-46.332 90.413 4.549 34.202 183.316-22.022 362.095 136.373 534.687 319.304 493.98a243.42 243.42 0 0 0 158.01-115.996z"},null,-1),be("path",{d:"M252.061 154.781v102.504a12.86 12.86 0 0 0 3.716 9.097l51.252 51.252 18.067-18.066-47.409-47.536v-97.251z"},null,-1)]))}const $Pe={render:FPe},zPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function HPe(n,e){return Re(),Oe("svg",zPe,e[0]||(e[0]=[be("path",{d:"m480.755 102.788-83.57-83.57.027.027C384.904 6.891 368.199-.053 350.765 0h-285.1C29.424.053.046 29.424 0 65.665v368.67C.046 470.576 29.424 499.954 65.665 500h368.67c36.241-.046 65.612-29.424 65.665-65.665v-285.1c.053-17.434-6.891-34.139-19.245-46.447M160.243 18.807h185.369v127.477H160.243zM385.017 481.2H120.845V302.979h264.172zm96.182-46.858c0 25.876-20.982 46.858-46.858 46.858h-30.518V302.72c0-10.385-8.422-18.833-18.833-18.833H121.13c-10.544 0-19.092 8.555-19.092 19.092V481.2H65.671c-25.876 0-46.864-20.982-46.864-46.858V65.672c0-25.876 20.988-46.858 46.864-46.858h75.772v127.914c0 10.233 8.316 18.542 18.548 18.542h184.673a19.67 19.67 0 0 0 13.959-5.776 19.76 19.76 0 0 0 5.803-13.986V20.83a47 47 0 0 1 19.483 11.711l83.57 83.57v-.027a46.97 46.97 0 0 1 13.727 33.158z"},null,-1)]))}const VPe={render:HPe},WPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"};function qPe(n,e){return Re(),Oe("svg",WPe,e[0]||(e[0]=[be("path",{d:"m28.727 27.307-7.41-7.4a11.52 11.52 0 1 0-1.41 1.41l7.4 7.41a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42m-25.71-14.79a9.5 9.5 0 1 1 9.5 9.5 9.51 9.51 0 0 1-9.5-9.5","data-name":"Layer 2"},null,-1)]))}const jPe={render:qPe},GPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function KPe(n,e){return Re(),Oe("svg",GPe,e[0]||(e[0]=[be("path",{d:"M482.347 17.689c-11.82-11.798-28.928-15.535-44.529-9.559L32.414 161.904c-15.83 5.998-26.182 20.227-27.034 37.127s8.024 32.07 23.15 39.624l155.227 77.602 77.602 155.227c7.233 14.465 21.423 23.194 37.406 23.194.749 0 1.492 0 2.24-.044 16.901-.874 31.085-11.219 37.062-27.033L491.884 62.24c5.932-15.617 2.262-32.687-9.559-44.529zM39.476 200.741c.088-1.535.727-5.271 5.015-6.91L427.254 48.654l-234.129 234.13-149.34-74.658c-3.965-1.988-4.391-5.462-4.309-7.385m266.712 254.805c-1.578 4.14-4.992 4.932-6.888 5.014-1.474.022-5.336-.235-7.384-4.31l-74.659-149.338 234.13-234.13-145.199 382.742z"},null,-1)]))}const YPe={render:KPe},XPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function ZPe(n,e){return Re(),Oe("svg",XPe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"m23.333 279.068 38.914 8.58c4.288.894 7.714 4.165 8.764 8.425a182 182 0 0 0 8.242 24.625c3.299 8.025 7.22 15.772 11.662 23.209 2.283 3.765 2.283 8.486 0 12.218l-21.664 33.794 40.952 40.953 33.361-21.51-.033.028c3.765-2.527 8.614-2.682 12.501-.4a173 173 0 0 0 23.298 11.668c7.653 3.205 15.555 5.86 23.608 7.992 4.693.8 8.425 4.382 9.442 9.008l8.552 38.915h58.136l8.552-38.915a11.55 11.55 0 0 1 8.453-8.764 181 181 0 0 0 24.597-8.236 172 172 0 0 0 23.237-11.668 11.77 11.77 0 0 1 12.223 0l33.761 21.665 40.98-40.953-21.542-33.36.033.033c-2.499-3.766-2.654-8.608-.372-12.502a182 182 0 0 0 11.668-23.297c3.177-7.686 5.86-15.55 7.992-23.609a11.655 11.655 0 0 1 9.008-9.44l38.887-8.548v-57.802l-38.887-8.548c-4.315-.927-7.714-4.198-8.764-8.458-2.16-8.391-4.903-16.633-8.236-24.597a178 178 0 0 0-11.668-23.236 11.76 11.76 0 0 1 0-12.218l21.637-33.794-40.953-40.953-33.327 21.51h.028c-3.766 2.504-8.642 2.654-12.53.371a174 174 0 0 0-23.27-11.662c-7.68-3.21-15.583-5.865-23.635-7.998-4.66-.8-8.398-4.348-9.447-9.008L278.946 23.7h-57.797l-8.553 38.886c-.894 4.288-4.193 7.714-8.425 8.764a180 180 0 0 0-24.625 8.242 173.4 173.4 0 0 0-23.236 11.662c-3.738 2.283-8.458 2.283-12.224 0l-33.76-21.665-40.948 40.986 21.51 33.328-.034-.033a11.73 11.73 0 0 1 .4 12.5c-4.47 7.47-8.364 15.273-11.696 23.298a187 187 0 0 0-7.991 23.61 11.65 11.65 0 0 1-8.98 9.44l-38.915 8.553v57.797zm27.402 29.784-41.503-9.047c-5.281-1.138-9.074-5.737-9.169-11.107v-76.874c-.122-5.737 3.982-10.74 9.658-11.696l40.986-8.947h.028a199 199 0 0 1 7.347-20.798 212 212 0 0 1 9.475-19.877l-23.053-35.643c-2.933-4.565-2.283-10.585 1.571-14.445l54.098-54.126c4.105-4.043 10.525-4.538 15.184-1.144l35.183 22.22a207.5 207.5 0 0 1 40.669-16.661l9.047-41.508h.028c1.11-5.276 5.709-9.075 11.113-9.197h76.995c5.77-.094 10.769 4.043 11.724 9.719l8.953 41.014v.033c7.036 2.033 14.006 4.504 20.798 7.314 6.787 2.805 13.39 6.015 19.871 9.503l35.616-23.054c4.598-2.96 10.585-2.316 14.473 1.544l54.098 54.132c4.07 4.07 4.565 10.49 1.172 15.178l-22.498 35.155a208.2 208.2 0 0 1 16.666 40.669l41.508 9.041v.034c5.276 1.144 9.07 5.742 9.164 11.107v77.03c.122 5.675-3.86 10.618-9.441 11.729l-40.986 8.913h-.028a199 199 0 0 1-7.348 20.804 212 212 0 0 1-9.474 19.871l23.053 35.644c2.932 4.57 2.283 10.585-1.572 14.445l-54.009 54.187c-4.07 4.043-10.49 4.537-15.15 1.144l-35.183-22.498a208.3 208.3 0 0 1-40.67 16.694l-9.04 41.48h-.034c-1.144 5.276-5.742 9.07-11.107 9.164h-77.124c-5.709.122-10.674-3.888-11.724-9.475l-8.952-41.013v-.028c-7.037-2.038-14.006-4.51-20.799-7.314a209 209 0 0 1-19.87-9.508l-35.616 23.053c-4.599 2.96-10.585 2.316-14.473-1.544l-54.16-54.004c-4.07-4.104-4.564-10.524-1.171-15.183l22.248-35.15c-7.003-12.962-12.59-26.568-16.661-40.674zm268.053-127.395c21.265 21.326 31.417 51.354 27.462 81.228-3.976 29.873-21.631 56.191-47.739 71.253-26.108 15.028-57.736 17.066-85.576 5.526-27.802-11.574-48.695-35.4-56.47-64.5a96.83 96.83 0 0 1 16.756-84.094 96.88 96.88 0 0 1 76.901-37.926 96.58 96.58 0 0 1 68.666 28.513m-68.666-51.81c37.437 0 72.77 17.405 95.545 47.122a120.29 120.29 0 0 1 20.799 104.52 120.45 120.45 0 0 1-70.27 80.145c-34.594 14.323-73.909 11.757-106.309-6.975a120.55 120.55 0 0 1-59.224-88.631 120.5 120.5 0 0 1 34.255-100.877 120.2 120.2 0 0 1 85.176-35.277z"},null,-1)]))}const JPe={render:ZPe},QPe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function eNe(n,e){return Re(),Oe("svg",QPe,e[0]||(e[0]=[be("path",{d:"M417.751 174.574c4.011 0 7.838-1.583 10.667-4.417a15.14 15.14 0 0 0 4.44-10.685v-33.518a15.27 15.27 0 0 0-4.348-9.96L319.206 4.533A15.04 15.04 0 0 0 308.447 0H118.296c-28.284 0-51.2 22.922-51.2 51.2v108.336c0 8.336 6.748 15.107 15.084 15.107 8.353 0 15.101-6.771 15.101-15.107V51.2c0-11.612 9.397-21.014 21.015-21.014h172.939V90.58c.209 28.127 23.078 50.84 51.223 50.84h60.394v18.116h-.023c.046 8.267 6.731 14.968 14.991 15.038zm-75.293-63.339c-11.617 0-21.014-9.421-21.014-21.015v-40.4l60.44 61.415zm90.58 337.565v-.023c0 28.284-22.939 51.223-51.223 51.223H118.296c-28.278 0-51.2-22.939-51.2-51.223v-32.539c0-8.337 6.753-15.108 15.084-15.108 8.353 0 15.107 6.771 15.107 15.108v32.788c0 11.617 9.397 21.015 21.015 21.015H381.71c5.565 0 10.91-2.221 14.852-6.157a21.02 21.02 0 0 0 6.163-14.858v-32.788c0-8.337 6.748-15.108 15.101-15.108 8.336 0 15.084 6.771 15.084 15.108z"},null,-1),be("path",{d:"M229.566 226.113v20.441a20.45 20.45 0 0 0 5.977 14.45 20.45 20.45 0 0 0 14.463 5.976c33.857 0 61.292 27.433 61.292 61.304v20.425c0 33.87-27.435 61.306-61.292 61.306-33.87 0-61.305-27.436-61.305-61.306 0-11.286 9.143-20.425 20.437-20.425 11.287 0 20.428 9.139 20.428 20.425s9.141 20.441 20.44 20.441c11.285 0 20.426-9.154 20.426-20.441v-20.425a20.46 20.46 0 0 0-5.976-14.465 20.45 20.45 0 0 0-14.463-5.974c-33.857 0-61.292-27.436-61.292-61.291v-20.441c0-33.87 27.435-61.29 61.292-61.29 33.87 0 61.305 27.42 61.305 61.29 0 11.287-9.141 20.441-20.441 20.441-11.286 0-20.425-9.154-20.425-20.441s-9.141-20.425-20.439-20.425c-11.286 0-20.427 9.139-20.427 20.425"},null,-1)]))}const tNe={render:eNe},nNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function rNe(n,e){return Re(),Oe("svg",nNe,e[0]||(e[0]=[be("path",{d:"M57.44 26.809 39.531 37.146a20.8 20.8 0 0 1 3.035 5.239l17.909-10.338v-.005a20.7 20.7 0 0 1-3.035-5.233M42.564 57.617a20.8 20.8 0 0 1-3.034 5.239l17.909 10.337a20.7 20.7 0 0 1 3.034-5.233L42.564 57.622z"},null,-1),be("path",{d:"M23.318 36.009a13.992 13.992 0 0 1 9.896 23.881A13.987 13.987 0 0 1 9.332 50c.005-7.723 6.263-13.98 13.986-13.992m0-5.2A19.19 19.19 0 0 0 5.591 42.654 19.19 19.19 0 0 0 30.664 67.73a19.194 19.194 0 0 0-7.346-36.925zM76.686 5.202a13.987 13.987 0 0 1 9.89 23.882 13.985 13.985 0 0 1-15.242 3.029 13.99 13.99 0 0 1-8.64-12.925c.012-7.723 6.27-13.98 13.993-13.986m0-5.201a19.19 19.19 0 0 0-17.733 11.846A19.192 19.192 0 0 0 84.027 36.92a19.19 19.19 0 0 0 11.846-17.732 19.2 19.2 0 0 0-5.616-13.571A19.2 19.2 0 0 0 76.686 0zM76.686 66.821c5.66 0 10.758 3.412 12.925 8.634a13.98 13.98 0 0 1-3.035 15.248 14 14 0 0 1-15.242 3.034 13.99 13.99 0 0 1-8.64-12.924c.012-7.724 6.27-13.981 13.993-13.992m0-5.201a19.19 19.19 0 0 0-13.572 32.758 19.18 19.18 0 0 0 20.912 4.16 19.18 19.18 0 0 0 11.846-17.727c0-10.6-8.591-19.192-19.187-19.192z"},null,-1)]))}const iNe={render:rNe},sNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function oNe(n,e){return Re(),Oe("svg",sNe,e[0]||(e[0]=[be("path",{d:"M81.389 20.353h4.72l-4.391 4.495a4.12 4.12 0 0 0 .067 5.82 4.12 4.12 0 0 0 2.873 1.174 4.12 4.12 0 0 0 2.939-1.242l11.22-11.481a4.12 4.12 0 0 0-.037-5.79L87.56 2.124a4.12 4.12 0 0 0-5.819 0 4.12 4.12 0 0 0 0 5.82l4.188 4.181h-4.555A18.99 18.99 0 0 0 65.3 20.929L30.989 74.635a10.8 10.8 0 0 1-9.14 5.004H4.114A4.11 4.11 0 0 0 0 83.753a4.11 4.11 0 0 0 4.114 4.114h17.735a18.99 18.99 0 0 0 16.074-8.804l34.311-53.706a10.8 10.8 0 0 1 9.14-5.004z"},null,-1),be("path",{d:"M4.129 20.353h17.735c3.717 0 7.136 1.87 9.14 5.004L39 37.871a4.12 4.12 0 0 0 3.471 1.9c.755 0 1.526-.21 2.214-.651a4.114 4.114 0 0 0 1.249-5.685l-7.996-12.514a18.99 18.99 0 0 0-16.074-8.803H4.129a4.11 4.11 0 0 0-4.114 4.113 4.11 4.11 0 0 0 4.114 4.114zM87.605 69.391a4.12 4.12 0 0 0-5.82-.067 4.12 4.12 0 0 0-.067 5.819l4.391 4.496h-4.72c-3.718 0-7.136-1.87-9.14-5.004l-8.625-13.502a4.114 4.114 0 0 0-5.685-1.249 4.114 4.114 0 0 0-1.249 5.685l8.625 13.501a18.99 18.99 0 0 0 16.074 8.804h4.555l-4.189 4.181a4.114 4.114 0 0 0 0 5.82 4.08 4.08 0 0 0 2.91 1.204 4.12 4.12 0 0 0 2.91-1.204l11.22-11.205a4.125 4.125 0 0 0 .037-5.79l-11.22-11.481z"},null,-1)]))}const aNe={render:oNe},cNe={xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100"};function lNe(n,e){return Re(),Oe("svg",cNe,e[0]||(e[0]=[be("path",{d:"M2.844 32.919h50.233c.094 0 .18-.021.262-.034 1.23 6.241 6.724 10.952 13.333 10.952s12.103-4.708 13.332-10.952c.082 0 .18.034.263.034h16.89a2.67 2.67 0 0 0 2.662-2.664 2.67 2.67 0 0 0-2.663-2.664h-16.89c-.094 0-.18.021-.262.034-1.229-6.24-6.723-10.952-13.332-10.952s-12.104 4.708-13.333 10.952c-.082 0-.168-.034-.262-.034l-50.233-.003A2.67 2.67 0 0 0 .18 30.251a2.67 2.67 0 0 0 2.663 2.663zm63.828-10.92c4.552 0 8.256 3.704 8.256 8.256 0 4.553-3.704 8.256-8.256 8.256s-8.256-3.703-8.256-8.256c0-4.552 3.704-8.256 8.256-8.256M97.164 67.081H46.93c-.094 0-.18.02-.262.033-1.23-6.24-6.723-10.952-13.333-10.952-6.609 0-12.094 4.708-13.332 10.952-.082 0-.168-.033-.262-.033H2.844A2.67 2.67 0 0 0 .18 69.745a2.67 2.67 0 0 0 2.663 2.663h16.89c.094 0 .18-.021.261-.033 1.23 6.24 6.724 10.952 13.333 10.952 6.61 0 12.103-4.709 13.333-10.952.082 0 .18.033.262.033h50.233a2.67 2.67 0 0 0 2.663-2.663 2.67 2.67 0 0 0-2.663-2.664zM33.328 78.01c-4.552 0-8.256-3.705-8.256-8.256s3.704-8.257 8.256-8.257 8.256 3.705 8.256 8.257-3.704 8.256-8.256 8.256"},null,-1)]))}const uNe={render:lNe},hNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function dNe(n,e){return Re(),Oe("svg",hNe,e[0]||(e[0]=[be("path",{d:"M499.353 249.995a250.26 250.26 0 0 0-73.308-176.687A250.23 250.23 0 0 0 249.358 0c-331.652 13.713-331.577 486.325 0 500a250.26 250.26 0 0 0 176.687-73.308 250.27 250.27 0 0 0 73.308-176.687zM249.358 470.588c-58.494-.075-114.56-23.313-155.916-64.668-41.364-41.365-64.593-97.431-64.668-155.915 12.094-292.65 429.12-292.574 441.177 0-.076 58.494-23.313 114.56-64.669 155.915-41.364 41.355-97.43 64.593-155.915 64.668z"},null,-1),be("path",{"fill-rule":"evenodd",d:"M155.29 119.433a9.63 9.63 0 0 1 8.015-4.297h211.928a9.63 9.63 0 0 1 8.497 5.087 9.63 9.63 0 0 1-.482 9.883l-38.533 57.799a9.65 9.65 0 0 1-8.014 4.296H124.772a9.61 9.61 0 0 1-8.496-5.086c-1.676-3.14-1.503-6.936.482-9.884zm13.159 14.97-25.682 38.532h188.77l25.682-38.532zM155.29 312.095a9.63 9.63 0 0 1 8.015-4.297h211.928a9.67 9.67 0 0 1 8.497 5.087 9.64 9.64 0 0 1-.482 9.884l-38.533 57.798a9.65 9.65 0 0 1-8.014 4.297H124.772a9.61 9.61 0 0 1-8.496-5.087c-1.676-3.14-1.503-6.936.482-9.883zm13.159 14.97-25.682 38.532h188.77l25.682-38.532zM155.29 284.236a9.63 9.63 0 0 0 8.015 4.296h211.928a9.63 9.63 0 0 0 8.497-5.086 9.63 9.63 0 0 0-.482-9.883l-38.533-57.799a9.65 9.65 0 0 0-8.014-4.296H124.772a9.64 9.64 0 0 0-8.496 5.086c-1.676 3.14-1.503 6.936.482 9.883zm13.159-14.97-25.682-38.532h188.77l25.682 38.532z","clip-rule":"evenodd"},null,-1)]))}const fNe={render:dNe},pNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function mNe(n,e){return Re(),Oe("svg",pNe,e[0]||(e[0]=[HC('<defs><clipPath id="a"><path d="M0 0h20v20H0z"></path></clipPath><clipPath id="b"><path d="M0 0h20v20H0z"></path></clipPath></defs><g clip-path="url(#a)" transform="translate(-39.382 -20.132)"><path d="M4 10.5H2a.5.5 0 0 1-.5-.5.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5.5.5 0 0 1-.5.5M18 10.5h-2a.5.5 0 0 1-.5-.5.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5.5.5 0 0 1-.5.5M8 3.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V4a.5.5 0 0 1 .5-.5M6 13.638a.5.5 0 0 1-.5-.5V6.861a.5.5 0 0 1 .5-.5.5.5 0 0 1 .5.5v6.277a.5.5 0 0 1-.5.5"></path><path d="M4 12a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 4 8a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5M10 7a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5v-5A.5.5 0 0 1 10 7M12 7.905a.5.5 0 0 1 .5.5v3.189a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V8.405a.5.5 0 0 1 .5-.5M16 12a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 16 8a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5M14 14.5a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5"></path></g><g clip-path="url(#b)" transform="matrix(29.41176 0 0 29.41176 -44.118 -44.118)"><path d="M4 10.5H2a.5.5 0 0 1-.5-.5.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5.5.5 0 0 1-.5.5M18 10.5h-2a.5.5 0 0 1-.5-.5.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5.5.5 0 0 1-.5.5M8 3.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V4a.5.5 0 0 1 .5-.5M6 13.638a.5.5 0 0 1-.5-.5V6.861a.5.5 0 0 1 .5-.5.5.5 0 0 1 .5.5v6.277a.5.5 0 0 1-.5.5"></path><path d="M4 12a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 4 8a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5M10 7a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5v-5A.5.5 0 0 1 10 7M12 7.905a.5.5 0 0 1 .5.5v3.189a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V8.405a.5.5 0 0 1 .5-.5M16 12a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 16 8a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5M14 14.5a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5"></path></g>',3)]))}const gNe={render:mNe},yNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function wNe(n,e){return Re(),Oe("svg",yNe,e[0]||(e[0]=[be("path",{d:"M320.953 25.999c-34.583 0-63.076 26.398-66.475 60.072-14.03-.593-28.14.632-42.053 3.676-70.076 15.414-119.84 73.834-127.706 141.42-41.381 18.26-87.462 45.136-81.415 72.605 4.94 22.37 43.476 31.694 96.162 31.694 2.648 0 5.379-.04 8.106-.075 29.524 48.338 82.68 78.728 140.108 78.728 11.62 0 23.438-1.218 35.216-3.826 70.075-15.414 119.836-73.839 127.701-141.424a398 398 0 0 0 17.308-8.06c32.251-15.927 69.526-40.076 64.15-64.542-6.046-27.469-59.206-32.532-104.421-31.741a161 161 0 0 0-18.853-25.058c12.134-12.41 18.967-29.007 18.967-46.634 0-36.837-29.959-66.835-66.795-66.835m.048 13.833c29.208 0 52.954 23.793 52.954 53.002 0 15.928-7.032 30.828-19.324 40.907-9.446 7.786-21.378 12.058-33.63 12.058-28.932 0-52.73-23.516-53.006-52.369v-.596c0-29.209 23.798-53.002 53.006-53.002m-76.262 60.053c3.273-.056 6.546-.004 9.818.146 3.636 33.397 32.137 59.602 66.444 59.602 13.24 0 26.196-3.996 37.144-11.348 17.983 19.525 30.56 43.358 36.29 69.444 3.084 14.03 4.024 28.026 3.155 41.701-38.773 16.403-86.87 31.22-138.488 42.603-56.242 12.371-104.892 18.146-143.625 19.331-6.482-12.015-11.47-25.101-14.553-39.093-17.786-80.905 33.6-161.221 114.465-179.007 9.723-2.134 19.533-3.221 29.35-3.38m150.483 78.4c57.824-.12 81.143 10.947 83.356 20.947 2.016 9.209-11.817 26.955-56.756 49.167-3.241 1.62-6.64 3.206-10.079 4.787a165.8 165.8 0 0 0-3.754-38.421c-2.807-12.727-7.154-24.94-12.767-36.48m-167.19 45.131c-14.663 0-26.59 11.94-26.59 26.604s11.927 26.6 26.59 26.6 26.604-11.937 26.604-26.6-11.94-26.604-26.603-26.604m0 13.834c7.036 0 12.77 5.735 12.77 12.77s-5.734 12.766-12.77 12.766-12.758-5.731-12.758-12.766 5.723-12.77 12.759-12.77m-144.376 9.564c-.237 12.648.905 25.537 3.75 38.461 2.847 12.845 7.12 24.975 12.653 36.318-50.512-.079-80.63-8.77-83.277-20.785-2.213-10 14.347-29.845 66.874-53.994m312.084 28.339c-10 58.535-54.349 108.106-115.809 121.623-61.499 13.477-122.638-12.964-156.233-61.934 42.527-2.016 91.414-8.976 138.369-19.292 49.246-10.83 95.414-24.825 133.673-40.397m12.845 128.338c-20.552 0-37.278 16.718-37.278 37.27s16.726 37.268 37.278 37.268c20.553 0 37.267-16.715 37.267-37.267s-16.714-37.271-37.267-37.271m0 13.833c12.925 0 23.434 10.513 23.434 23.438s-10.51 23.433-23.434 23.433-23.445-10.509-23.445-23.433c0-12.925 10.521-23.438 23.445-23.438"},null,-1)]))}const vNe={render:wNe},bNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function _Ne(n,e){return Re(),Oe("svg",bNe,e[0]||(e[0]=[be("path",{d:"M250 .005C111.931.005 0 111.935 0 250c0 138.074 111.931 249.995 250 249.995 138.08 0 250-111.921 250-249.995C500 111.945 388.08.015 249.995.015zM364.646 360.57c-4.486 7.355-14.091 9.665-21.436 5.165-58.695-35.856-132.584-43.975-219.609-24.09-8.391 1.905-16.741-3.346-18.656-11.735-1.925-8.39 3.325-16.75 11.72-18.655 95.23-21.76 176.92-12.39 242.815 27.88 7.345 4.51 9.675 14.09 5.166 21.435m30.599-68.07c-5.64 9.17-17.639 12.065-26.805 6.425-67.2-41.305-169.635-53.265-249.12-29.14-10.31 3.115-21.195-2.695-24.325-12.99-3.105-10.3 2.705-21.17 13-24.305 90.79-27.55 203.665-14.205 280.83 33.215 9.17 5.644 12.065 17.644 6.42 26.795m2.63-70.885c-80.575-47.855-213.51-52.255-290.44-28.91-12.35 3.75-25.415-3.225-29.16-15.58-3.75-12.36 3.225-25.415 15.585-29.165 88.31-26.811 235.11-21.63 327.875 33.434 11.125 6.586 14.79 20.941 8.18 32.046-6.564 11.11-20.955 14.775-32.03 8.175z"},null,-1)]))}const ENe={render:_Ne},xNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function SNe(n,e){return Re(),Oe("svg",xNe,e[0]||(e[0]=[be("path",{d:"M494.711 170.557 253.36 69.045a8.69 8.69 0 0 0-6.714 0L5.296 170.557A8.69 8.69 0 0 0 0 178.535a8.68 8.68 0 0 0 5.296 7.978l41.861 17.599v72.423c-10.297 3.605-17.732 13.313-17.732 24.81 0 11.017 6.807 20.454 16.428 24.4l-17.011 95.721a8.65 8.65 0 0 0 1.892 7.078 8.67 8.67 0 0 0 6.622 3.086h36.953c2.572 0 5.007-1.131 6.628-3.086a8.65 8.65 0 0 0 1.892-7.078l-17.011-95.721c9.621-3.946 16.422-13.383 16.422-24.4 0-11.52-7.458-21.205-17.732-24.81l-.046-65.12 30.036 12.639V331.49c0 .185.046.364.046.519.023.387.047.745.116 1.108.046.242.132.473.202.698.092.288.155.606.271.9.109.248.225.473.357.721.139.248.248.519.41.744.156.225.311.427.496.629.179.225.335.45.536.675.185.184.387.363.589.519.225.179.427.386.675.565.225.156.496.294.744.427.225.138.45.271.721.381.317.138.629.23.969.317.202.069.381.161.583.202 52.233 12.079 100.607 33.958 143.76 65.027.115.092.271.116.386.202.52.34 1.079.611 1.668.836.225.093.449.179.674.249.745.201 1.535.357 2.302.357h.087c.79 0 1.557-.133 2.301-.357a8 8 0 0 0 .675-.249 8.7 8.7 0 0 0 1.644-.836c.133-.086.271-.11.404-.202 43.084-31.069 91.418-52.948 143.691-65.027.202-.041.386-.133.588-.202a7 7 0 0 0 .969-.317c.248-.11.473-.243.698-.381.248-.133.52-.271.745-.427.248-.156.449-.363.674-.542.202-.179.404-.335.589-.519.202-.202.357-.427.536-.652.162-.202.341-.404.496-.629.162-.248.271-.496.41-.744.133-.248.265-.473.358-.721.115-.294.178-.588.271-.883.069-.248.155-.473.202-.721.069-.357.092-.721.115-1.101 0-.179.04-.364.04-.543v-.202l-.017-107.257 89.232-37.541a8.68 8.68 0 0 0 5.289-7.978 8.68 8.68 0 0 0-5.289-7.972zM47.682 414.342l8.156-45.807 8.134 45.807zm8.133-103.901c-5.001 0-9.079-4.078-9.079-9.079s4.078-9.08 9.079-9.08 9.08 4.079 9.08 9.08c.023 5.001-4.079 9.079-9.08 9.079m332.359 14.335c-49.932 12.39-96.35 33.439-138.148 62.685-41.867-29.251-88.285-50.295-138.217-62.685v-93.443l134.837 56.715a8.68 8.68 0 0 0 6.714 0l134.814-56.715zm-138.171-54.102L78.145 198.39l126.028-53.023c4.413-1.846 6.466-6.917 4.621-11.329-1.852-4.396-6.9-6.467-11.335-4.621L55.815 188.993l-24.833-10.458 219.021-92.139 219.021 92.139z"},null,-1)]))}const ANe={render:SNe},CNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function TNe(n,e){return Re(),Oe("svg",CNe,e[0]||(e[0]=[be("path",{d:"M6.94 500c.692 0 1.524-.139 2.217-.416l352.822-117.653c1.802-.555 2.91-1.94 3.742-3.465 1.386-.831 2.633-1.94 3.88-3.049 25.499-25.498-23.974-102.271-83.286-161.722-59.312-59.311-136.223-108.784-161.722-83.286-1.108 1.11-1.94 2.356-2.771 3.603-1.802.832-3.188 2.08-3.88 3.88L.425 490.855a6.97 6.97 0 0 0 1.663 7.067C3.475 499.307 5.14 500 6.94 500m127.492-359.751c1.94-1.94 5.128-2.91 9.285-2.91 22.311 0 74.001 27.577 132.759 86.196 69.844 69.843 95.62 129.848 83.286 142.043-5.127 5.128-21.064 4.712-50.443-11.363-28.131-15.383-60.697-41.02-91.6-71.923-30.904-30.903-56.54-63.47-71.923-91.6-16.214-29.38-16.491-45.316-11.364-50.443m-12.749 30.487c2.633 8.038 6.513 16.907 11.918 26.607 16.075 29.24 42.405 62.915 74.278 94.788s65.548 58.204 94.788 74.279c9.701 5.266 18.432 9.285 26.47 11.918L17.886 482.123zM261.787 22.733l1.108-1.108c12.334-11.78 26.469-8.038 34.922-1.386 9.424 7.483 15.105 21.341 6.513 35.753l-38.802 71.092c-1.801 3.325-.554 7.621 2.772 9.423q1.662.831 3.326.831c2.494 0 4.85-1.247 6.097-3.603l38.664-70.952c12.75-21.203 3.741-42.544-9.84-53.492-13.857-10.947-35.614-14.55-53.075 2.218l-1.247 1.247c-2.772 2.771-2.772 7.067 0 9.839s6.79 2.771 9.562.138M366.275 222.426c-3.326 1.802-4.573 6.097-2.771 9.423s6.097 4.573 9.423 2.772l71.368-38.94c14.135-8.454 27.993-2.772 35.615 6.651 6.79 8.453 10.394 22.588-1.386 34.922l-1.108 1.109c-2.772 2.771-2.772 7.067 0 9.839 1.386 1.385 3.187 2.078 4.85 2.078s3.603-.693 4.85-2.078l1.248-1.248c16.768-17.46 13.303-39.356 2.217-53.075-10.948-13.72-32.29-22.589-53.215-10.117zM315.694 184.317c1.386 1.386 3.187 2.078 4.85 2.078s3.603-.692 4.85-2.078L423.37 86.34c2.771-2.771 2.771-7.067 0-9.839s-7.068-2.771-9.84 0l-97.975 97.976c-2.633 2.771-2.633 7.206.139 9.839M183.35 29.524c.97 0 1.802-.139 2.634-.555.831-.277 1.663-.831 2.356-1.385 1.247-1.386 1.94-3.188 1.94-4.99s-.693-3.602-1.94-4.85c-1.94-1.94-5.128-2.494-7.622-1.524-.832.416-1.525.832-2.217 1.525-1.248 1.247-2.08 3.048-2.08 4.85 0 1.94.832 3.603 2.08 4.989 1.247 1.247 3.048 1.94 4.85 1.94M207.88 96.18c1.385 1.248 3.048 1.94 4.988 1.94.832 0 1.802-.138 2.633-.554.832-.277 1.525-.831 2.217-1.386a13.7 13.7 0 0 0 1.525-2.355c.277-.832.554-1.663.554-2.633 0-.832-.277-1.802-.554-2.633-.416-.832-.97-1.525-1.525-2.218-1.94-1.94-4.988-2.494-7.621-1.524-.832.416-1.525.831-2.218 1.524s-1.108 1.386-1.524 2.218a8.7 8.7 0 0 0-.416 2.633c0 .97.139 1.801.416 2.633.416.831.97 1.662 1.524 2.355M354.912 66.663c.554.693 1.386 1.247 2.217 1.524.832.416 1.802.555 2.633.555 1.802 0 3.603-.693 4.85-2.079.693-.554 1.248-1.386 1.525-2.217.415-.832.554-1.663.554-2.633 0-1.802-.693-3.603-2.079-4.85-1.801-1.94-4.85-2.634-7.483-1.525-.831.277-1.663.832-2.217 1.524-1.247 1.248-2.079 3.05-2.079 4.85 0 .97.139 1.802.554 2.634s.832 1.663 1.525 2.217M433.348 145.099c1.247 1.247 3.048 2.079 4.85 2.079.831 0 1.801-.278 2.633-.555.831-.416 1.663-.831 2.217-1.524.693-.554 1.109-1.386 1.525-2.217.277-.832.554-1.663.554-2.633s-.277-1.802-.554-2.633c-.416-.832-.832-1.663-1.525-2.356-.554-.555-1.386-1.109-2.217-1.386-2.633-1.109-5.682-.416-7.483 1.386-.693.693-1.248 1.524-1.525 2.356-.415.831-.554 1.662-.554 2.633 0 .97.139 1.801.554 2.633.277.831.832 1.663 1.525 2.217M421.153 271.067c-1.663-.693-3.465-.693-5.266 0-.832.277-1.525.832-2.218 1.386-1.247 1.386-2.078 3.187-2.078 4.989 0 .831.277 1.801.554 2.633.416.831.97 1.663 1.524 2.217.693.693 1.386 1.109 2.218 1.525.831.415 1.801.554 2.633.554 1.94 0 3.603-.832 4.988-2.079 1.248-1.247 1.94-3.049 1.94-4.85 0-.97-.138-1.802-.554-2.633-.277-.832-.831-1.663-1.386-2.356-.692-.554-1.385-1.109-2.355-1.386M480.049 310.147c-2.633-.97-5.682-.416-7.622 1.524-1.247 1.247-1.94 3.049-1.94 4.989 0 1.801.693 3.603 1.94 4.85 1.386 1.247 3.049 2.079 4.989 2.079.831 0 1.801-.277 2.633-.555.831-.415 1.524-.97 2.217-1.524 1.247-1.247 2.079-3.049 2.079-4.85 0-.97-.277-1.94-.555-2.772-.415-.831-.831-1.524-1.524-2.217-.693-.554-1.386-1.109-2.217-1.524"},null,-1)]))}const INe={render:TNe},MNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function RNe(n,e){return Re(),Oe("svg",MNe,e[0]||(e[0]=[be("path",{d:"M423.112 76.797c-95.216-95.216-250.65-95.216-345.866 0C8.278 145.765-12.824 248.7 22.174 339.285c1.03 3.089 3.602 5.148 6.691 5.663 3.088.514 6.177-.515 8.75-2.574l188.888-188.889c1.545-1.543 2.574-4.117 2.574-6.691v-13.896c7.72-1.544 14.41-5.661 20.587-11.324 16.47-16.47 16.47-43.232 0-59.702s-43.234-16.47-59.704 0-16.47 43.232 0 59.702c5.663 5.663 12.867 9.78 20.588 11.324v10.294L35.042 318.698C9.307 238.408 30.408 150.397 90.627 90.18c88.012-88.012 231.092-88.012 319.618 0 88.01 88.01 88.01 231.092 0 319.617-60.218 60.218-148.228 81.32-228.52 55.586l72.057-72.056h36.028c1.544 7.72 5.661 14.412 11.322 20.587 16.47 16.47 43.234 16.47 59.704 0s16.47-43.233 0-59.702-43.234-16.47-59.704 0c-5.661 5.66-9.778 12.866-11.322 20.587h-39.631c-2.574 0-4.632 1.029-6.692 2.574l-85.952 84.922c-2.058 2.06-3.087 5.662-2.572 8.749.514 2.06 1.029 3.603 2.572 4.632 1.03 1.03 2.06 1.545 3.089 2.06 90.584 35.513 193.52 13.895 261.974-54.557 95.73-95.732 95.73-251.165.514-346.382m-219.769 31.396a23.606 23.606 0 0 1 0-33.454 23.61 23.61 0 0 1 33.455 0 23.61 23.61 0 0 1 0 33.454 23.61 23.61 0 0 1-33.455 0m110.141 258.885a23.61 23.61 0 0 1 33.456 0 23.61 23.61 0 0 1 0 33.455 23.61 23.61 0 0 1-33.456 0c-8.75-9.264-8.75-24.19 0-33.455"},null,-1),be("path",{d:"M353.115 158.631c16.47-16.47 16.47-43.232 0-59.702s-43.232-16.47-59.702 0c-14.412 14.41-15.955 36.028-5.662 52.498L59.747 379.431c-3.603 3.603-3.603 9.778 0 13.381 3.601 3.603 9.778 3.603 13.381 0l228.004-228.004c15.955 10.293 38.088 8.235 51.983-6.177m-46.32-46.32a23.61 23.61 0 0 1 33.454 0 23.61 23.61 0 0 1 0 33.454 23.61 23.61 0 0 1-33.455 0 23.61 23.61 0 0 1 0-33.455M302.162 275.98c1.544 7.72 5.661 14.41 11.322 20.587 16.47 16.47 43.234 16.47 59.704 0s16.47-43.234 0-59.704-43.234-16.47-59.704 0c-5.66 5.663-9.778 12.867-11.322 20.588h-21.101c-2.574 0-4.634 1.03-6.692 2.573L107.611 427.297c-3.603 3.603-3.603 9.778 0 13.381s9.78 3.603 13.383 0l164.184-164.184h16.984zm24.705-25.734a23.606 23.606 0 0 1 33.454 0 23.61 23.61 0 0 1 0 33.454 23.61 23.61 0 0 1-33.454 0 23.606 23.606 0 0 1 0-33.454"},null,-1)]))}const PNe={render:RNe},NNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function ONe(n,e){return Re(),Oe("svg",NNe,e[0]||(e[0]=[be("path",{d:"M250 0c138.076 0 250 111.924 250 250S388.076 500 250 500 0 388.076 0 250 111.924 0 250 0m86.239 351.902c4.598-14.109 26.141-154.717 28.804-182.424.805-8.391-1.847-13.967-7.043-16.456-6.283-3.022-15.587-1.511-26.381 2.38-14.804 5.337-204.065 85.696-215 90.348-10.369 4.402-20.173 9.206-20.173 16.163 0 4.891 2.902 7.641 10.902 10.5 8.326 2.967 29.293 9.326 41.674 12.739 11.924 3.294 25.5.435 33.108-4.293 8.066-5.011 101.142-67.294 107.826-72.75 6.674-5.457 12 1.532 6.544 7-5.457 5.456-69.348 67.467-77.772 76.054-10.228 10.424-2.967 21.228 3.891 25.554 7.837 4.935 64.196 42.739 72.685 48.805 8.489 6.065 17.098 8.815 24.979 8.815 7.88 0 12.032-10.381 15.956-22.435"},null,-1)]))}const kNe={render:ONe},DNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function LNe(n,e){return Re(),Oe("svg",DNe,e[0]||(e[0]=[be("path",{d:"M412.711 106.932a114 114 0 0 1-9.843-5.729 138.4 138.4 0 0 1-25.28-21.478c-18.853-21.572-25.895-43.456-28.488-58.778h.104C347.037 8.229 347.933 0 348.069 0h-85.871v332.046c0 4.458 0 8.864-.188 13.218 0 .542-.052 1.042-.083 1.625 0 .24 0 .489-.052.739v.188a72.91 72.91 0 0 1-36.686 57.872 71.7 71.7 0 0 1-35.529 9.375c-40.009 0-72.434-32.624-72.434-72.913 0-40.29 32.425-72.913 72.434-72.913a71.7 71.7 0 0 1 22.301 3.531l.104-87.433a159.5 159.5 0 0 0-122.911 35.956 168.6 168.6 0 0 0-36.769 45.342c-3.624 6.249-17.301 31.363-18.957 72.121-1.042 23.134 5.906 47.102 9.218 57.007v.209c2.084 5.833 10.156 25.738 23.312 42.519a174.6 174.6 0 0 0 37.196 35.092v-.209l.208.209c41.571 28.248 87.662 26.394 87.662 26.394 7.979-.323 34.707 0 65.06-14.385 33.665-15.947 52.83-39.706 52.83-39.706a165.1 165.1 0 0 0 28.791-47.841c7.77-20.426 10.364-44.925 10.364-54.716V167.169c1.041.625 14.916 9.801 14.916 9.801s19.988 12.812 51.174 21.156c22.374 5.937 52.518 7.187 52.518 7.187v-85.246c-10.562 1.146-32.009-2.187-53.966-13.135"},null,-1)]))}const UNe={render:LNe},BNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function FNe(n,e){return Re(),Oe("svg",BNe,e[0]||(e[0]=[be("path",{d:"M70.678 121.589c0-47.357 38.536-85.875 85.893-85.875 47.125 0 85.572 38.464 85.714 85.696v.179l35.715-.232C277.785 54.428 223.321 0 156.571 0 89.518 0 34.964 54.535 34.964 121.589c0 37.161 17.393 72.875 46.536 95.536a17.82 17.82 0 0 0 10.964 3.768A17.9 17.9 0 0 0 106.571 214c6.054-7.804 4.643-19.018-3.143-25.054-20.5-15.964-32.75-41.125-32.75-67.357"},null,-1),be("path",{d:"M460.321 335.464 416.339 226c-10.643-26.518-37.125-40-62.518-32.268l-92.536 26.25-33.928-84.429c-5.947-14.821-17.929-26.571-32.857-32.232-14.947-5.696-31.697-4.839-45.965 2.286-26.571 13.232-38.696 45.161-27.625 72.696l59.143 147.215-14.321 5.803c-20.982 8.518-37.054 26.643-42.982 48.536-9.625 35.571 8.875 72.839 43.053 86.661l71 28.714A65.1 65.1 0 0 0 261.268 500a65.2 65.2 0 0 0 31.035-7.875l138.536-74.982c29.179-15.804 41.839-50.911 29.482-81.679m-46.482 50.25-138.536 74.982c-7.785 4.25-16.946 4.714-25.107 1.429l-71-28.715c-17.446-7.071-26.893-26.071-21.964-44.232 3.018-11.16 11.214-20.41 21.928-24.75l14.197-5.785 9.411 23.428c.232.768.517 1.536.875 2.286 4.107 8.946 14.767 12.803 23.75 8.696 8.642-3.982 12.625-14.053 9.089-22.875l-82.429-205.196c-4.178-10.375.393-22.411 10.429-27.411 5.446-2.732 11.625-3 17.339-.875 5.714 2.179 10.107 6.482 12.393 12.161l39.911 99.357c3.41 8.464 12.696 13.036 21.446 10.518L363.91 228c7.804-2.375 15.679 2.285 19.286 11.303l43.982 109.482c5.59 13.911-.143 29.804-13.339 36.929"},null,-1)]))}const $Ne={render:FNe},zNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function HNe(n,e){return Re(),Oe("svg",zNe,e[0]||(e[0]=[be("path",{d:"M311.156 483.871a8.064 8.064 0 0 1 0 16.129H55.527c-15.269 0-29.172-6.263-39.231-16.344C6.236 473.597 0 459.694 0 444.446V55.565C0 40.28 6.258 26.376 16.296 16.339l.483-.446C26.817 6.086 40.532.016 55.548.016h22.678a8.07 8.07 0 0 1 8.064 8.065 8.067 8.067 0 0 1-8.064 8.064H55.548c-10.65 0-20.376 4.285-27.639 11.387-7.328 7.35-11.78 17.199-11.78 28.033v388.881c0 10.861 4.43 20.731 11.591 27.871 7.119 7.119 16.99 11.549 27.828 11.549h255.629zm-54.543-282.194L358.575 77.688a8.05 8.05 0 0 1 6.635-3.489h45.424c1.807.043 3.613.629 5.108 1.871 3.419 2.812 3.925 7.898 1.091 11.317l-129.64 157.635 118.635 168.053c2.559 3.635 1.677 8.656-1.957 11.215a8 8 0 0 1-4.618 1.474l-61.742.016a8.09 8.09 0 0 1-6.866-3.818l-87.258-123.634-101.962 123.973a8.07 8.07 0 0 1-6.64 3.484H89.36c-1.806-.043-3.613-.629-5.102-1.871-3.425-2.812-3.93-7.892-1.091-11.317l129.639-157.613L94.172 86.909c-2.565-3.635-1.683-8.656 1.952-11.215a8.03 8.03 0 0 1 4.618-1.474h61.742c2.898 0 5.441 1.538 6.871 3.823l87.279 123.656zm-67.79-185.548a8.065 8.065 0 1 1 0-16.129H444.43c15.285 0 29.188 6.258 39.247 16.296l.447.484C493.93 26.817 500 40.532 500 55.543v388.882c0 15.247-6.258 29.15-16.339 39.252-10.08 10.081-23.984 16.318-39.231 16.318h-22.661a8.065 8.065 0 1 1 0-16.129h22.661c10.855 0 20.726-4.43 27.844-11.549 7.161-7.14 11.597-17.01 11.597-27.871V55.565c0-10.667-4.285-20.371-11.387-27.635-7.35-7.328-17.199-11.785-28.032-11.785H188.844z"},null,-1)]))}const Yk={render:HNe},VNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function WNe(n,e){return Re(),Oe("svg",VNe,e[0]||(e[0]=[be("path",{d:"M108.084 500c-5.359 0-10.514-2.252-14.64-6.518L5.987 398.16C2.066 393.886 0 388.268 0 382.196a24.34 24.34 0 0 1 5.987-15.964l87.457-95.322c8.04-8.77 21.036-8.77 29.083 0s8.046 22.927 0 31.697l-52.185 57.107h244.017c38.362 0 74.666-16.417 102.309-46.093 27.016-29.676 42.078-69.466 42.078-111.286 0-86.776-64.771-157.372-144.387-157.372H25.584c-11.346 0-20.627-10.115-20.627-22.481C4.957 10.122 14.238 0 25.584 0h288.775C416.668 0 500 90.826 500 202.335c0 53.956-19.188 104.761-54.25 143.207-35.274 38.222-81.887 59.128-131.391 59.128H70.342l52.185 57.107c8.046 8.77 8.046 22.928 0 31.698-3.921 4.273-9.076 6.518-14.436 6.518z"},null,-1)]))}const qNe={render:WNe},jNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"};function GNe(n,e){return Re(),Oe("svg",jNe,e[0]||(e[0]=[be("path",{d:"M82.765 47.055H72.057c-2.44 0-4.411 1.97-4.411 4.411s1.97 4.412 4.411 4.412h10.708c4.63 0 8.41 3.78 8.41 8.41v18.469c0 4.63-3.78 8.41-8.41 8.41l-65.531.006c-4.63 0-8.41-3.78-8.41-8.41V64.289c0-4.63 3.78-8.41 8.41-8.41H27.94c2.442 0 4.412-1.97 4.412-4.411s-1.97-4.412-4.412-4.412H17.234C7.738 47.056 0 54.794 0 64.29v18.469c0 9.5 7.738 17.239 17.234 17.239H82.76c9.5 0 17.239-7.738 17.239-17.234V64.291c0-9.495-7.738-17.233-17.234-17.233z"},null,-1),be("path",{d:"m54.411 15.052 17.469 17.47c.856.872 1.987 1.297 3.12 1.297s2.262-.425 3.118-1.292a4.403 4.403 0 0 0 0-6.233l-25-25a4.403 4.403 0 0 0-6.232 0l-25 25a4.403 4.403 0 0 0 0 6.233 4.403 4.403 0 0 0 6.233 0l17.469-17.475V58.82c0 2.442 1.97 4.412 4.412 4.412s4.411-1.97 4.411-4.412zM50 66.7a4.405 4.405 0 0 0-4.412 4.412v6.824c0 2.442 1.97 4.412 4.411 4.412s4.412-1.97 4.412-4.412v-6.824a4.405 4.405 0 0 0-4.412-4.412"},null,-1)]))}const KNe={render:GNe},YNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function XNe(n,e){return Re(),Oe("svg",YNe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M249.997 260.295c-82.44 0-149.388 66.948-149.388 149.387 0 9.096 6.33 16.069 15.212 22.257 19.787 13.759 51.736 22.115 87.014 26.134 10.135 1.153 17.411 10.32 16.276 20.431-1.153 10.136-10.319 17.406-20.455 16.277-42.291-4.829-80.222-16.023-103.933-32.529-20.13-14.013-31.046-31.95-31.046-52.593 0-77.244 47.091-143.572 114.135-171.805-33.433-23.013-55.389-61.547-55.389-105.18C122.423 62.262 179.584 5.1 249.997 5.1c70.418 0 127.573 57.162 127.573 127.574 0 43.633-21.926 82.161-55.383 105.18 67.02 28.239 114.135 94.561 114.135 171.805 0 20.619-10.916 38.58-31.052 52.593-23.705 16.506-61.642 27.7-103.933 32.529-10.13 1.152-19.273-6.141-20.449-16.277-1.158-10.135 6.141-19.278 16.27-20.431 35.278-4.019 67.227-12.375 87.014-26.134 8.888-6.188 15.218-13.161 15.218-22.257 0-82.439-66.948-149.387-149.388-149.387zm0-36.938c50.028 0 90.635-40.607 90.635-90.636s-40.607-90.636-90.635-90.636-90.636 40.608-90.636 90.636c0 50.029 40.607 90.636 90.636 90.636"},null,-1)]))}const ZNe={render:XNe},JNe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function QNe(n,e){return Re(),Oe("svg",JNe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M47.632 144.148h-24.92c-10.32 0-18.68-8.37-18.68-18.68s8.36-18.67 18.68-18.67h24.92v-62.28A43.6 43.6 0 0 1 91.222.928h361.154c24.071 0 43.593 19.52 43.593 43.6v160.106c0 10.318-8.38 18.68-18.679 18.68-10.324 0-18.68-8.362-18.68-18.68V44.528c0-3.44-2.804-6.24-6.234-6.24H91.222c-1.66 0-3.22.65-4.39 1.82a6.24 6.24 0 0 0-1.82 4.42v62.27h12.44c10.32 0 18.69 8.36 18.69 18.68 0 10.3-8.37 18.68-18.69 18.68h-12.44v87.166h12.44c10.32 0 18.69 8.357 18.69 18.68 0 10.318-8.37 18.68-18.69 18.68h-12.44v87.166h12.44c10.32 0 18.69 8.38 18.69 18.68 0 10.317-8.37 18.679-18.69 18.679h-12.44v62.275c0 3.43 2.78 6.235 6.21 6.235h361.154a6.28 6.28 0 0 0 4.41-1.823 6.24 6.24 0 0 0 1.824-4.412V304.269c0-10.323 8.356-18.68 18.68-18.68 10.299 0 18.679 8.357 18.679 18.68v151.215a43.603 43.603 0 0 1-43.593 43.588H91.222c-24.07 0-43.57-19.516-43.57-43.594v-62.275h-24.92c-10.32 0-18.68-8.356-18.68-18.68 0-10.293 8.36-18.679 18.68-18.679h24.92v-87.165h-24.92c-10.32 0-18.68-8.357-18.68-18.68 0-10.318 8.36-18.68 18.68-18.68h24.92v-87.171z"},null,-1),be("path",{"fill-rule":"evenodd",d:"M280.643 269.416c-41.355 0-74.945 26.494-74.945 67.85 0 7.308-5.917 13.224-13.225 13.224-7.291 0-13.222-5.916-13.222-13.224 0-39.883 23.092-67.355 56.613-83.902-15.719-12.939-25.77-32.544-25.77-54.48 0-38.927 31.606-70.533 70.533-70.533 38.925 0 70.514 31.606 70.514 70.533 0 21.936-10.033 41.541-25.77 54.48 33.54 16.551 56.613 51.077 56.613 90.981 0 7.308-5.914 13.224-13.222 13.224-7.304 0-13.223-5.916-13.223-13.224 0-41.355-33.57-74.929-74.93-74.929zm0-26.447c24.332 0 44.068-19.754 44.068-44.085 0-24.332-19.753-44.084-44.068-44.084-24.331 0-44.084 19.752-44.084 44.084 0 24.331 19.753 44.085 44.084 44.085"},null,-1)]))}const eOe={render:QNe},tOe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function nOe(n,e){return Re(),Oe("svg",tOe,e[0]||(e[0]=[be("path",{"fill-rule":"evenodd",d:"M250 .012c137.983 0 250 112.017 250 250 0 137.959-112.017 249.976-250 249.976S0 387.971 0 250.012c0-137.983 112.017-250 250-250m0 17.873c-128.101 0-232.097 104.014-232.097 232.121 0 128.101 103.996 232.097 232.097 232.097s232.097-103.996 232.097-232.097S378.101 17.885 250 17.885m0 138.242c51.823 0 93.879 42.062 93.879 93.879 0 51.799-42.056 93.855-93.879 93.855-51.817 0-93.879-42.056-93.879-93.855 0-51.817 42.062-93.879 93.879-93.879m0 17.878c-41.936 0-75.977 34.059-75.977 76.001 0 41.918 34.041 75.977 75.977 75.977 41.942 0 75.977-34.059 75.977-75.977 0-41.942-34.035-76.001-75.977-76.001m0 32.343c24.087 0 43.64 19.571 43.64 43.658 0 24.063-19.553 43.634-43.64 43.634s-43.634-19.571-43.634-43.634c0-24.087 19.547-43.658 43.634-43.658m0 17.903c-14.205 0-25.755 11.526-25.755 25.755 0 14.211 11.55 25.761 25.755 25.761 14.211 0 25.761-11.55 25.761-25.761 0-14.229-11.55-25.755-25.761-25.755m0 168.068a8.934 8.934 0 0 1 8.942 8.936c0 4.944-3.998 8.966-8.942 8.966-88.49 0-160.209-71.743-160.209-160.209 0-4.944 4.004-8.966 8.942-8.966s8.936 4.022 8.936 8.966c0 78.59 63.723 142.313 142.337 142.313zm0-331.337c-4.938 0-8.936-4.022-8.936-8.936A8.934 8.934 0 0 1 250 43.104c114.275 0 206.902 92.633 206.902 206.902 0 4.92-3.998 8.942-8.936 8.942s-8.936-4.022-8.936-8.942c0-104.394-84.636-189.03-189.03-189.03zm0 46.693a8.934 8.934 0 0 1-8.936-8.942A8.93 8.93 0 0 1 250 89.797c88.49 0 160.209 71.719 160.209 160.209 0 4.914-3.998 8.936-8.936 8.936s-8.936-4.016-8.936-8.936c0-78.614-63.723-142.337-142.337-142.337zm0 331.336c4.944 0 8.942 4.023 8.942 8.961a8.94 8.94 0 0 1-8.942 8.942c-114.275 0-206.902-92.633-206.902-206.902 0-4.944 4.004-8.966 8.942-8.966s8.936 4.022 8.936 8.966c0 104.394 84.637 189.006 189.03 189.006z"},null,-1)]))}const rOe={render:nOe},iOe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function sOe(n,e){return Re(),Oe("svg",iOe,e[0]||(e[0]=[be("path",{d:"M186.56 56.22c16.33-34.55 60.3-48.994 62.185-49.624 1.255-.63 1.885-.63 3.14 0 1.885.63 45.855 14.445 62.185 49.625 1.255 2.51 2.515 5.025 3.14 8.165 1.255-1.26 3.14-1.885 4.4-3.14-.63-2.515-1.885-5.025-3.145-6.91C301.51 17.9 255.025 2.826 253.14 2.2L250 .316l-3.14 1.255c-1.885.63-47.74 15.705-65.325 52.135-1.26 2.515-1.885 4.395-2.515 6.91 1.255 1.255 3.14 1.885 4.395 3.14.63-2.51 1.885-5.025 3.145-7.535M180.905 75.69c-1.255-1.254-3.14-2.51-5.025-3.77-.63 1.886-.63 4.4-.63 6.286 1.885 1.255 3.77 3.14 5.025 5.025.63-2.515.63-5.025.63-7.54M319.095 83.23c1.885-1.884 3.14-3.144 5.025-5.024 0-1.885-.63-4.4-.63-6.285-1.88 1.26-3.14 2.515-5.025 3.77.63 2.515.63 5.025.63 7.54M71.61 324.436c1.885.625 4.395.625 6.28.625 1.255-1.885 3.14-3.765 5.025-5.025h-.63c-1.885 0-4.395 0-6.28-.625-1.885 1.255-3.14 3.14-4.395 5.025M85.425 85.74c-3.765 7.54-17.585 40.83-7.535 68.47 5.025 14.446 16.96 25.75 33.92 32.66l29.52 12.566c11.935-25.125 32.665-45.855 57.79-57.79l-11.935-28.895c-7.535-17.59-18.215-28.895-33.29-34.545-27.64-10.055-60.93 3.765-68.47 7.535"},null,-1),be("path",{d:"m290.83 137.25 11.935-28.894c7.535-17.59 7.535-33.92.625-47.74-12.56-27.01-45.85-40.2-54.02-43.34-7.535 2.51-41.455 16.33-54.02 43.34-6.28 13.82-6.28 30.15.63 47.11l11.935 29.525c12.56-4.4 26.38-6.91 40.83-6.91 15.7 0 29.52 2.51 42.085 6.91M107.41 303.706l29.525-12.565c-4.395-12.56-6.91-26.38-6.91-40.825 0-14.45 2.515-28.27 6.91-40.83L108.04 197.55c-17.59-7.54-33.92-7.54-47.74-.63-27.01 12.565-40.2 45.855-43.34 54.02 2.51 7.54 16.33 41.46 43.34 54.02 13.82 5.655 30.15 5.655 47.11-1.255M417.085 319.41l5.025 5.026c1.885 0 4.395-.63 6.28-.63-1.255-1.885-2.51-3.14-3.765-5.025-2.515.63-4.4.63-7.54.63q.945 0 0 0M483.04 250.316c-2.51-7.54-16.33-41.46-43.34-54.02-13.82-6.285-30.15-6.285-47.11.625l-29.525 12.565c4.395 12.56 6.91 26.38 6.91 40.83 0 14.445-2.515 28.265-6.91 40.825l28.895 11.935c17.59 7.54 33.92 7.54 47.74.63 27.01-11.935 40.2-45.855 43.34-53.39M422.11 175.566c-1.255 1.885-3.14 3.77-5.025 5.025 2.515 0 5.025 0 6.91.63 1.255-1.26 2.51-3.145 3.77-5.025-1.26 0-3.77 0-5.655-.63M342.335 68.15c35.805-13.19 77.265 8.17 78.52 8.796 1.255.63 1.885 1.26 2.51 2.515.63 1.885 21.985 42.71 8.795 78.515-1.255 2.515-1.885 5.025-3.77 7.54 1.885 0 3.77.625 5.655 1.255 1.255-2.51 1.885-4.395 3.14-6.91 13.82-38.315-8.165-81.03-8.795-82.915l-1.255-3.14-3.14-1.255c-1.885-.63-45.225-22.615-82.915-8.795-2.51.63-5.025 1.885-6.91 3.14.63 1.885.63 3.77 1.255 5.655 1.885-2.515 4.4-3.77 6.91-4.4M197.235 392.276c-7.535 17.585-7.535 33.915-.625 47.735 12.56 27.01 45.85 40.205 54.02 43.345 7.535-2.515 41.455-16.335 54.02-43.345 6.28-13.82 6.28-30.15-.63-47.11l-12.565-29.52c-12.56 4.395-26.38 6.91-40.825 6.91-14.45 0-28.27-2.515-40.83-6.91zc0-.63 0 0 0 0"},null,-1),be("path",{d:"M300.88 141.646c25.125 11.935 45.855 32.665 57.79 57.79l28.895-11.935c17.585-7.54 28.89-18.215 34.545-33.29 10.05-27.64-3.77-60.93-7.535-68.47-7.54-3.77-40.83-17.59-68.47-7.535C331.66 83.23 320.35 95.16 313.44 112.12zM77.89 175.566c-1.885 0-4.395.63-6.28.63 1.255 1.88 2.51 3.14 3.765 5.025 2.515 0 4.4-.63 6.91-.63-1.255-1.255-3.14-3.14-4.395-5.025M180.905 417.4l-5.025 5.026c0 1.885.63 4.395.63 6.28 1.88-1.255 3.14-2.515 5.025-3.77-.63-2.51-.63-5.025-.63-7.535M199.12 358.98c-25.125-11.934-45.855-32.66-57.79-57.784l-28.895 11.93c-17.585 7.54-28.89 18.22-34.545 33.295-10.05 28.265 3.77 60.93 7.535 68.465 7.54 3.77 40.83 17.59 68.47 7.54 14.445-5.025 25.755-16.96 32.665-33.92zM313.44 444.41c-16.33 34.546-60.3 48.996-62.185 49.62h-3.77c-1.88-.624-45.85-14.444-62.185-49.62-1.255-2.514-2.51-5.024-3.14-8.164-1.255 1.255-3.14 1.88-4.395 3.14.625 2.51 1.885 5.025 3.14 6.91 16.96 36.43 63.44 51.505 65.325 52.135l3.14 1.255 3.145-1.255c1.88-.63 47.735-15.705 65.325-52.135 1.255-2.515 1.885-4.4 2.51-6.91-1.255-1.26-3.14-1.885-4.395-3.14 0 3.14-1.255 5.65-2.515 8.165M319.095 424.936c1.255 1.255 3.14 2.515 5.025 3.77.63-1.885.63-4.395.63-6.28-1.885-1.26-3.77-3.14-5.025-5.025-.63 2.51-.63 5.025-.63 7.535M498.745 247.17c-.63-1.88-15.705-47.734-52.135-65.324-2.515-1.255-4.4-1.885-6.91-2.51-1.26 1.255-1.885 3.14-3.14 4.395 2.51.63 5.65 1.885 8.165 3.14 34.545 16.335 48.995 60.3 49.62 62.185.63 1.26.63 1.885 0 3.145-.625 1.88-14.445 45.85-49.62 62.185-2.515 1.255-5.025 2.51-8.165 3.14 1.255 1.255 1.88 3.14 3.14 4.395 2.51-.625 5.025-1.885 6.91-3.14 36.43-16.96 51.505-63.44 52.135-65.325l1.255-3.14zM414.575 414.886c3.765-7.535 17.585-40.83 7.535-68.465-5.025-14.45-16.96-25.755-33.92-32.665l-29.52-12.56c-11.935 25.125-32.665 45.85-57.79 57.785l11.935 28.895c7.535 17.59 18.215 28.895 33.29 34.55 27.64 10.05 60.93-3.77 68.47-7.54M65.955 166.77c1.885-.63 3.77-.63 5.655-1.254-1.26-2.515-2.515-5.025-3.77-7.54-13.19-35.805 8.165-77.26 8.795-78.515.625-1.255 1.255-1.885 2.51-2.515 1.885-.625 42.715-21.985 78.52-8.795 2.51 1.26 5.025 1.885 7.535 3.77 0-1.885.63-3.77 1.255-5.65-2.51-1.26-4.395-1.885-6.905-3.145-38.32-13.815-81.03 8.17-82.915 8.795l-3.14 1.26-1.26 3.14c-.625 1.885-22.61 45.225-8.795 82.915 0 3.14 1.26 5.025 2.515 7.535"},null,-1),be("path",{d:"M157.665 432.476c-8.795 3.14-17.59 4.395-25.755 4.395-27.64 0-51.51-12.56-52.765-13.19s-1.885-1.255-2.51-2.515c-.63-1.88-21.985-42.71-8.795-78.515 1.255-2.515 1.885-5.025 3.77-7.54-1.885 0-3.77-.625-5.655-1.255-1.255 2.515-1.885 4.4-3.14 6.91-13.82 38.315 8.165 81.03 8.795 82.915l1.255 3.14 3.14 1.255c1.885.63 45.225 23.245 82.915 8.795 2.51-.625 5.025-1.885 6.91-3.14-.63-1.885-.63-3.77-1.255-5.655-1.885 2.515-4.4 3.77-6.91 4.4M64.07 316.896c-2.51-.625-5.655-1.885-8.165-3.14-34.55-16.33-48.995-60.3-49.625-62.185-.625-1.255-.625-1.885 0-3.14.63-1.885 14.45-45.855 49.625-62.185 2.51-1.26 5.025-2.515 8.165-3.145-1.255-1.255-1.885-3.14-3.14-4.395-2.515.63-5.025 1.885-6.91 3.14-36.43 16.96-51.505 63.445-52.135 65.325L0 250.316l1.255 3.14c.63 1.885 15.705 47.74 52.135 65.325 2.515 1.255 4.4 1.885 6.91 2.515 1.26-1.26 2.515-3.145 3.77-4.4M434.045 333.856c-1.885.63-3.77.63-5.655 1.255 1.26 2.515 2.515 5.025 3.77 7.54 13.19 35.805-8.165 77.26-8.795 78.515-.625 1.26-1.255 1.885-2.51 2.515s-25.755 13.19-52.765 13.19c-8.795 0-16.96-1.255-25.755-4.395-2.51-1.255-5.025-1.885-7.535-3.77 0 1.885-.63 3.77-1.255 5.655 2.51 1.255 4.395 1.885 6.905 3.14 38.32 13.82 81.03-8.165 82.915-8.795l3.14-1.255 1.26-3.14c.625-1.885 22.61-45.23 8.795-82.915 0-3.14-1.26-5.025-2.515-7.54"},null,-1)]))}const oOe={render:sOe},aOe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function cOe(n,e){return Re(),Oe("svg",aOe,e[0]||(e[0]=[be("g",{"data-name":"Layer 4"},[be("path",{d:"M499.328 79.487a8.6 8.6 0 0 0-1.81-2.844L423.382 2.507a8.62 8.62 0 0 0-12.155 0L334.16 79.574 2.532 411.203a8.62 8.62 0 0 0 0 12.154l74.136 74.136a8.62 8.62 0 0 0 12.154 0L497.518 88.798a8.6 8.6 0 0 0 1.81-2.759 8.62 8.62 0 0 0 0-6.552m-416.54 399.73-61.981-61.98L340.281 98.28l61.895 61.895ZM414.331 147.59l-61.895-61.895 64.826-64.912 61.98 61.981ZM30.203 168.623a8.62 8.62 0 0 0 6.035 2.5 8.62 8.62 0 0 0 6.12-2.5l39.396-39.31 39.395 39.396a8.62 8.62 0 0 0 12.241 0 8.62 8.62 0 0 0 0-12.24l-39.395-39.483 39.395-39.395a8.625 8.625 0 0 0-12.24-12.155l-39.396 39.396-39.396-39.396a8.62 8.62 0 0 0-12.155 12.155L69.6 116.986l-39.396 39.396a8.62 8.62 0 0 0 0 12.241M231.922 71.298a8.62 8.62 0 0 0 12.155 0l18.103-18.103 18.103 18.103a8.625 8.625 0 1 0 12.24-12.155L274.422 41.04l18.103-18.103a8.656 8.656 0 1 0-12.241-12.24L262.18 28.884l-18.103-18.189a8.62 8.62 0 0 0-12.155 0 8.62 8.62 0 0 0 0 12.241l18.103 18.103-18.103 18.103a8.62 8.62 0 0 0 0 12.155M470.364 222.587a8.62 8.62 0 0 0-12.241 0l-18.448 18.103-18.103-18.103a8.62 8.62 0 1 0-12.155 12.155l18.103 18.103-18.103 18.189a8.62 8.62 0 0 0 6.034 14.655 8.62 8.62 0 0 0 6.12-2.5l18.104-18.103 18.103 18.103a8.62 8.62 0 0 0 12.24 0 8.62 8.62 0 0 0 0-12.155l-18.102-18.19 18.103-18.102a8.62 8.62 0 0 0 .345-12.155M447.002 339.911a8.62 8.62 0 0 0-12.24 0l-41.638 41.637-41.636-41.637a8.62 8.62 0 0 0-12.155 0 8.62 8.62 0 0 0 0 12.155l41.637 41.723-41.637 41.637a8.62 8.62 0 0 0 6.034 14.741 8.62 8.62 0 0 0 6.12-2.586l41.637-41.637 41.637 41.637a8.62 8.62 0 0 0 6.12 2.586 8.62 8.62 0 0 0 6.121-14.741l-41.809-41.637 41.637-41.723a8.62 8.62 0 0 0 .172-12.155"})],-1)]))}const lOe={render:cOe},uOe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"};function hOe(n,e){return Re(),Oe("svg",uOe,e[0]||(e[0]=[be("path",{d:"M115.601 30.824h268.798c31.814 0 60.709 13.016 81.659 33.947C487.009 85.716 500 114.617 500 146.43c0 31.809-12.991 60.709-33.942 81.66-20.945 20.951-49.845 33.942-81.659 33.942h-70.22v110.32h46.56c13.317 0 25.435 5.439 34.201 14.21 8.751 8.771 14.211 20.89 14.211 34.202s-5.44 25.436-14.211 34.202c-8.771 8.771-20.889 14.21-34.201 14.21H139.261c-13.312 0-25.43-5.439-34.201-14.21-8.772-8.751-14.211-20.869-14.211-34.202 0-13.312 5.439-25.431 14.211-34.202 8.771-8.751 20.869-14.21 34.201-14.21h46.56v-110.32h-70.22c-31.808 0-60.709-13.017-81.659-33.942C12.996 207.139 0 178.239 0 146.43c0-31.813 12.996-60.709 33.942-81.659 20.95-20.951 49.851-33.947 81.659-33.947m175.137 341.528v-110.32h-81.481v110.32zm70.001 23.441H139.221c-6.858 0-13.093 2.811-17.619 7.352-4.526 4.526-7.353 10.787-7.353 17.624 0 6.853 2.806 13.093 7.353 17.639 4.526 4.521 10.781 7.353 17.619 7.353h221.477c6.857 0 13.098-2.812 17.619-7.353 4.525-4.526 7.357-10.786 7.357-17.639 0-6.858-2.811-13.098-7.357-17.624-4.521-4.521-10.782-7.352-17.619-7.352zM249.98 98.039c13.353 0 25.471 5.424 34.222 14.169 8.75 8.751 14.169 20.869 14.169 34.222 0 13.359-5.419 25.477-14.169 34.223-8.751 8.75-20.869 14.174-34.222 14.174s-25.472-5.424-34.223-14.174c-8.75-8.746-14.169-20.864-14.169-34.223 0-13.353 5.419-25.451 14.169-34.222 8.751-8.745 20.869-14.169 34.223-14.169m17.659 30.752c-4.526-4.521-10.761-7.312-17.659-7.312-6.894 0-13.134 2.791-17.66 7.312-4.521 4.526-7.312 10.766-7.312 17.66 0 6.898 2.806 13.133 7.312 17.659 4.526 4.526 10.766 7.317 17.66 7.317 6.898 0 13.133-2.811 17.659-7.317 4.526-4.526 7.317-10.761 7.317-17.659 0-6.894-2.811-13.134-7.317-17.66m52.142-74.521a120 120 0 0 1 11.96 10.424c20.926 20.93 33.865 49.831 33.865 81.741 0 31.916-12.939 60.832-33.865 81.742-3.73 3.73-7.755 7.215-11.96 10.424h64.618c25.333 0 48.376-10.383 65.097-27.084 16.721-16.726 27.089-39.763 27.089-65.097 0-25.354-10.389-48.397-27.089-65.097-16.701-16.726-39.743-27.089-65.097-27.089h-64.618zM180.203 238.596a119 119 0 0 1-11.96-10.424c-20.925-20.925-33.86-49.826-33.86-81.742 0-31.91 12.935-60.811 33.86-81.741a120 120 0 0 1 11.96-10.424h-64.617c-25.334 0-48.371 10.388-65.097 27.089-16.701 16.7-27.089 39.763-27.089 65.097s10.388 48.371 27.089 65.097c16.721 16.7 39.763 27.089 65.097 27.089h64.617zM315.179 81.257c-16.665-16.66-39.723-26.987-65.159-26.987-25.451 0-48.493 10.327-65.158 26.987-16.68 16.664-26.987 39.727-26.987 65.158 0 25.456 10.322 48.494 26.987 65.174 16.665 16.664 39.723 26.987 65.158 26.987 25.451 0 48.494-10.323 65.159-26.987 16.685-16.68 26.987-39.723 26.987-65.174 0-25.446-10.323-48.494-26.987-65.158"},null,-1)]))}const dOe={render:hOe},fOe=Ar({__name:"Icon",props:{icon:{}},setup(n){const e={add:kTe,"album-artwork":UTe,alien:$Te,"arrow-down":VTe,audius:jTe,"audius-verified":YTe,back:JTe,bitcoin:tIe,browser:iIe,buffer:aIe,business:uIe,camera:fIe,card:gIe,cart:vIe,check:EIe,"chevron-down":AIe,"chevron-left":IIe,"chevron-right":PIe,"chevron-up":kIe,"circle-arrow-left":UIe,"circle-arrow-right":$Ie,clients:VIe,clone:jIe,close:YIe,code:JIe,coffee:tMe,comment:iMe,data:aMe,delete:uMe,discord:fMe,download:gMe,drag:vMe,edit:EMe,email:AMe,ethereum:IMe,eye:PMe,"eye-closed":kMe,"eye-open":UMe,facebook:$Me,fork:VMe,forward:jMe,fractal:YMe,fullscreen:JMe,globe:tRe,grid:iRe,heart:aRe,"heart-outline":uRe,home:fRe,instagram:gRe,invoice:vRe,json:ERe,kexp:ARe,keyboard:IRe,link:PRe,linkedin:kRe,lock:URe,logout:$Re,manufacturing:VRe,menu:jRe,microphone:YRe,mouse:JRe,next:tPe,office:iPe,pause:aPe,phone:uPe,play:fPe,playlist:gPe,plus:vPe,previous:EPe,print:APe,radio:IPe,"radio-paradise":PPe,raw:kPe,repost:UPe,restore:$Pe,save:VPe,search:jPe,send:YPe,settings:JPe,shadertoy:tNe,share:iNe,shuffle:aNe,sliders:uNe,solana:fNe,sound:gNe,space:vNe,spotify:ENe,study:ANe,surprise:INe,technology:PNe,telegram:kNe,tiktok:UNe,touch:$Ne,twitter:Yk,undo:qNe,upload:KNe,user:ZNe,users:eOe,vinyl:rOe,visualizer:oOe,wand:lOe,webcam:dOe,x:Yk};return(t,r)=>(Re(),si(UC(e[t.icon]),{class:"icon"}))}}),Xk=Lo(fOe,[["__scopeId","data-v-8b41b632"]]),pOe=["href"],mOe={key:0},gOe={key:0},yOe=Ar({__name:"IconButton",props:{icon:{},background:{},disabled:{type:Boolean},active:{type:Boolean},tooltip:{},href:{},to:{},small:{type:Boolean},label:{}},emits:["click"],setup(n,{emit:e}){const t=e,r=n,i=l5();function s(o){r.to?i.push(r.to):t("click",o)}return(o,a)=>o.href?(Re(),Oe("a",Dg({key:0,href:o.href,target:"_blank",rel:"noopener noreferrer",style:{background:o.background||"var(--black)"},class:["icon-button",{propActive:o.active,disabled:o.disabled,small:o.small,label:o.label}]},o.$attrs),[o.label?(Re(),Oe("span",mOe,Rc(o.label),1)):bh("",!0),en(Xk,{icon:o.icon},null,8,["icon"])],16,pOe)):(Re(),Oe("button",Dg({key:1,style:{background:o.background||"var(--black)"},onClick:s,class:["icon-button",{propActive:o.active,disabled:o.disabled,small:o.small,label:o.label}]},o.$attrs),[o.label?(Re(),Oe("span",gOe,Rc(o.label),1)):bh("",!0),en(Xk,{icon:o.icon},null,8,["icon"])],16))}}),wOe=Lo(yOe,[["__scopeId","data-v-0518ea51"]]),Q9=Symbol.for("yaml.alias"),vOe=Symbol.for("yaml.document"),Xd=Symbol.for("yaml.map"),Fq=Symbol.for("yaml.pair"),eT=Symbol.for("yaml.scalar"),$y=Symbol.for("yaml.seq"),Xc=Symbol.for("yaml.node.type"),Bf=n=>!!n&&typeof n=="object"&&n[Xc]===Q9,w4=n=>!!n&&typeof n=="object"&&n[Xc]===vOe,$q=n=>!!n&&typeof n=="object"&&n[Xc]===Xd,zi=n=>!!n&&typeof n=="object"&&n[Xc]===Fq,ci=n=>!!n&&typeof n=="object"&&n[Xc]===eT,tT=n=>!!n&&typeof n=="object"&&n[Xc]===$y;function Ao(n){if(n&&typeof n=="object")switch(n[Xc]){case Xd:case $y:return!0}return!1}function ls(n){if(n&&typeof n=="object")switch(n[Xc]){case Q9:case Xd:case eT:case $y:return!0}return!1}const zq=n=>(ci(n)||Ao(n))&&!!n.anchor,md=Symbol("break visit"),bOe=Symbol("skip children"),gg=Symbol("remove node");function v4(n,e){const t=_Oe(e);w4(n)?Kp(null,n.contents,t,Object.freeze([n]))===gg&&(n.contents=null):Kp(null,n,t,Object.freeze([]))}v4.BREAK=md;v4.SKIP=bOe;v4.REMOVE=gg;function Kp(n,e,t,r){const i=EOe(n,e,t,r);if(ls(i)||zi(i))return xOe(n,r,i),Kp(n,i,t,r);if(typeof i!="symbol"){if(Ao(e)){r=Object.freeze(r.concat(e));for(let s=0;s<e.items.length;++s){const o=Kp(s,e.items[s],t,r);if(typeof o=="number")s=o-1;else{if(o===md)return md;o===gg&&(e.items.splice(s,1),s-=1)}}}else if(zi(e)){r=Object.freeze(r.concat(e));const s=Kp("key",e.key,t,r);if(s===md)return md;s===gg&&(e.key=null);const o=Kp("value",e.value,t,r);if(o===md)return md;o===gg&&(e.value=null)}}return i}function _Oe(n){return typeof n=="object"&&(n.Collection||n.Node||n.Value)?Object.assign({Alias:n.Node,Map:n.Node,Scalar:n.Node,Seq:n.Node},n.Value&&{Map:n.Value,Scalar:n.Value,Seq:n.Value},n.Collection&&{Map:n.Collection,Seq:n.Collection},n):n}function EOe(n,e,t,r){if(typeof t=="function")return t(n,e,r);if($q(e))return t.Map?.(n,e,r);if(tT(e))return t.Seq?.(n,e,r);if(zi(e))return t.Pair?.(n,e,r);if(ci(e))return t.Scalar?.(n,e,r);if(Bf(e))return t.Alias?.(n,e,r)}function xOe(n,e,t){const r=e[e.length-1];if(Ao(r))r.items[n]=t;else if(zi(r))n==="key"?r.key=t:r.value=t;else if(w4(r))r.contents=t;else{const i=Bf(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}function Hq(n){if(/[\x00-\x19\s,[\]{}]/.test(n)){const t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(n)}`;throw new Error(t)}return!0}function Um(n,e,t,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,s=r.length;i<s;++i){const o=r[i],a=Um(n,r,String(i),o);a===void 0?delete r[i]:a!==o&&(r[i]=a)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const s=r.get(i),o=Um(n,r,i,s);o===void 0?r.delete(i):o!==s&&r.set(i,o)}else if(r instanceof Set)for(const i of Array.from(r)){const s=Um(n,r,i,i);s===void 0?r.delete(i):s!==i&&(r.delete(i),r.add(s))}else for(const[i,s]of Object.entries(r)){const o=Um(n,r,i,s);o===void 0?delete r[i]:o!==s&&(r[i]=o)}return n.call(e,t,r)}function ja(n,e,t){if(Array.isArray(n))return n.map((r,i)=>ja(r,String(i),t));if(n&&typeof n.toJSON=="function"){if(!t||!zq(n))return n.toJSON(e,t);const r={aliasCount:0,count:1,res:void 0};t.anchors.set(n,r),t.onCreate=s=>{r.res=s,delete t.onCreate};const i=n.toJSON(e,t);return t.onCreate&&t.onCreate(i),i}return typeof n=="bigint"&&!t?.keep?Number(n):n}class nT{constructor(e){Object.defineProperty(this,Xc,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:r,onAnchor:i,reviver:s}={}){if(!w4(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=ja(this,"",o);if(typeof i=="function")for(const{count:c,res:l}of o.anchors.values())i(l,c);return typeof s=="function"?Um(s,{"":a},"",a):a}}class SOe extends nT{constructor(e){super(Q9),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,t){let r;t?.aliasResolveCache?r=t.aliasResolveCache:(r=[],v4(e,{Node:(s,o)=>{(Bf(o)||zq(o))&&r.push(o)}}),t&&(t.aliasResolveCache=r));let i;for(const s of r){if(s===this)break;s.anchor===this.source&&(i=s)}return i}toJSON(e,t){if(!t)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:s}=t,o=this.resolve(i,t);if(!o){const c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let a=r.get(o);if(a||(ja(o,null,t),a=r.get(o)),!a||a.res===void 0){const c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(s>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=M3(i,o,r)),a.count*a.aliasCount>s)){const c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return a.res}toString(e,t,r){const i=`*${this.source}`;if(e){if(Hq(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(e.implicitKey)return`${i} `}return i}}function M3(n,e,t){if(Bf(e)){const r=e.resolve(n),i=t&&r&&t.get(r);return i?i.count*i.aliasCount:0}else if(Ao(e)){let r=0;for(const i of e.items){const s=M3(n,i,t);s>r&&(r=s)}return r}else if(zi(e)){const r=M3(n,e.key,t),i=M3(n,e.value,t);return Math.max(r,i)}return 1}const Vq=n=>!n||typeof n!="function"&&typeof n!="object";class Or extends nT{constructor(e){super(eT),this.value=e}toJSON(e,t){return t?.keep?this.value:ja(this.value,e,t)}toString(){return String(this.value)}}Or.BLOCK_FOLDED="BLOCK_FOLDED";Or.BLOCK_LITERAL="BLOCK_LITERAL";Or.PLAIN="PLAIN";Or.QUOTE_DOUBLE="QUOTE_DOUBLE";Or.QUOTE_SINGLE="QUOTE_SINGLE";function AOe(n,e,t){return t.find(r=>r.identify?.(n)&&!r.format)}function Gb(n,e,t){if(w4(n)&&(n=n.contents),ls(n))return n;if(zi(n)){const h=t.schema[Xd].createNode?.(t.schema,null,t);return h.items.push(n),h}(n instanceof String||n instanceof Number||n instanceof Boolean||typeof BigInt<"u"&&n instanceof BigInt)&&(n=n.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:s,schema:o,sourceObjects:a}=t;let c;if(r&&n&&typeof n=="object"){if(c=a.get(n),c)return c.anchor??(c.anchor=i(n)),new SOe(c.anchor);c={anchor:null,node:null},a.set(n,c)}let l=AOe(n,e,o.tags);if(!l){if(n&&typeof n.toJSON=="function"&&(n=n.toJSON()),!n||typeof n!="object"){const h=new Or(n);return c&&(c.node=h),h}l=n instanceof Map?o[Xd]:Symbol.iterator in Object(n)?o[$y]:o[Xd]}s&&(s(l),delete t.onTagObj);const u=l?.createNode?l.createNode(t.schema,n,t):typeof l?.nodeClass?.from=="function"?l.nodeClass.from(t.schema,n,t):new Or(n);return l.default||(u.tag=l.tag),c&&(c.node=u),u}function Zk(n,e,t){let r=t;for(let i=e.length-1;i>=0;--i){const s=e[i];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){const o=[];o[s]=r,r=o}else r=new Map([[s,r]])}return Gb(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:n,sourceObjects:new Map})}const COe=n=>n==null||typeof n=="object"&&!!n[Symbol.iterator]().next().done;class Wq extends nT{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(r=>ls(r)||zi(r)?r.clone(e):r),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(COe(e))this.add(t);else{const[r,...i]=e,s=this.get(r,!0);if(Ao(s))s.addIn(i,t);else if(s===void 0&&this.schema)this.set(r,Zk(this.schema,i,t));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(e){const[t,...r]=e;if(r.length===0)return this.delete(t);const i=this.get(t,!0);if(Ao(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${r}`)}getIn(e,t){const[r,...i]=e,s=this.get(r,!0);return i.length===0?!t&&ci(s)?s.value:s:Ao(s)?s.getIn(i,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!zi(t))return!1;const r=t.value;return r==null||e&&ci(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){const[t,...r]=e;if(r.length===0)return this.has(t);const i=this.get(t,!0);return Ao(i)?i.hasIn(r):!1}setIn(e,t){const[r,...i]=e;if(i.length===0)this.set(r,t);else{const s=this.get(r,!0);if(Ao(s))s.setIn(i,t);else if(s===void 0&&this.schema)this.set(r,Zk(this.schema,i,t));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}const TOe=n=>n.replace(/^(?!$)(?: $)?/gm,"#");function z2(n,e){return/^\n+$/.test(n)?n.substring(1):e?n.replace(/^(?! *$)/gm,e):n}const Yp=(n,e,t)=>n.endsWith(`
`)?z2(t,e):t.includes(`
`)?`
`+z2(t,e):(n.endsWith(" ")?"":" ")+t,qq="flow",JA="block",R3="quoted";function b4(n,e,t="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:s=20,onFold:o,onOverflow:a}={}){if(!i||i<0)return n;i<s&&(s=0);const c=Math.max(1+s,1+i-e.length);if(n.length<=c)return n;const l=[],u={};let h=i-e.length;typeof r=="number"&&(r>i-Math.max(2,s)?l.push(0):h=i-r);let d,f,p=!1,m=-1,g=-1,y=-1;t===JA&&(m=Jk(n,m,e.length),m!==-1&&(h=m+c));for(let w;w=n[m+=1];){if(t===R3&&w==="\\"){switch(g=m,n[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}y=m}if(w===`
`)t===JA&&(m=Jk(n,m,e.length)),h=m+e.length+c,d=void 0;else{if(w===" "&&f&&f!==" "&&f!==`
`&&f!=="	"){const E=n[m+1];E&&E!==" "&&E!==`
`&&E!=="	"&&(d=m)}if(m>=h)if(d)l.push(d),h=d+c,d=void 0;else if(t===R3){for(;f===" "||f==="	";)f=w,w=n[m+=1],p=!0;const E=m>y+1?m-2:g-1;if(u[E])return n;l.push(E),u[E]=!0,h=E+c,d=void 0}else p=!0}f=w}if(p&&a&&a(),l.length===0)return n;o&&o();let b=n.slice(0,l[0]);for(let w=0;w<l.length;++w){const E=l[w],x=l[w+1]||n.length;E===0?b=`
${e}${n.slice(0,x)}`:(t===R3&&u[E]&&(b+=`${n[E]}\\`),b+=`
${e}${n.slice(E+1,x)}`)}return b}function Jk(n,e,t){let r=e,i=e+1,s=n[i];for(;s===" "||s==="	";)if(e<i+t)s=n[++e];else{do s=n[++e];while(s&&s!==`
`);r=e,i=e+1,s=n[i]}return r}const _4=(n,e)=>({indentAtStart:e?n.indent.length:n.indentAtStart,lineWidth:n.options.lineWidth,minContentWidth:n.options.minContentWidth}),E4=n=>/^(%|---|\.\.\.)/m.test(n);function IOe(n,e,t){if(!e||e<0)return!1;const r=e-t,i=n.length;if(i<=r)return!1;for(let s=0,o=0;s<i;++s)if(n[s]===`
`){if(s-o>r)return!0;if(o=s+1,i-o<=r)return!1}return!0}function yg(n,e){const t=JSON.stringify(n);if(e.options.doubleQuotedAsJSON)return t;const{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,s=e.indent||(E4(n)?"  ":"");let o="",a=0;for(let c=0,l=t[c];l;l=t[++c])if(l===" "&&t[c+1]==="\\"&&t[c+2]==="n"&&(o+=t.slice(a,c)+"\\ ",c+=1,a=c,l="\\"),l==="\\")switch(t[c+1]){case"u":{o+=t.slice(a,c);const u=t.substr(c+2,4);switch(u){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:u.substr(0,2)==="00"?o+="\\x"+u.substr(2):o+=t.substr(c,6)}c+=5,a=c+1}break;case"n":if(r||t[c+2]==='"'||t.length<i)c+=1;else{for(o+=t.slice(a,c)+`

`;t[c+2]==="\\"&&t[c+3]==="n"&&t[c+4]!=='"';)o+=`
`,c+=2;o+=s,t[c+2]===" "&&(o+="\\"),c+=1,a=c+1}break;default:c+=1}return o=a?o+t.slice(a):t,r?o:b4(o,s,R3,_4(e,!1))}function QA(n,e){if(e.options.singleQuote===!1||e.implicitKey&&n.includes(`
`)||/[ \t]\n|\n[ \t]/.test(n))return yg(n,e);const t=e.indent||(E4(n)?"  ":""),r="'"+n.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?r:b4(r,t,qq,_4(e,!1))}function Xp(n,e){const{singleQuote:t}=e.options;let r;if(t===!1)r=yg;else{const i=n.includes('"'),s=n.includes("'");i&&!s?r=QA:s&&!i?r=yg:r=t?QA:yg}return r(n,e)}let eC;try{eC=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{eC=/\n+(?!\n|$)/g}function P3({comment:n,type:e,value:t},r,i,s){const{blockQuote:o,commentString:a,lineWidth:c}=r.options;if(!o||/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return Xp(t,r);const l=r.indent||(r.forceBlockIndent||E4(t)?"  ":""),u=o==="literal"?!0:o==="folded"||e===Or.BLOCK_FOLDED?!1:e===Or.BLOCK_LITERAL?!0:!IOe(t,c,l.length);if(!t)return u?`|
`:`>
`;let h,d;for(d=t.length;d>0;--d){const x=t[d-1];if(x!==`
`&&x!=="	"&&x!==" ")break}let f=t.substring(d);const p=f.indexOf(`
`);p===-1?h="-":t===f||p!==f.length-1?(h="+",s&&s()):h="",f&&(t=t.slice(0,-f.length),f[f.length-1]===`
`&&(f=f.slice(0,-1)),f=f.replace(eC,`$&${l}`));let m=!1,g,y=-1;for(g=0;g<t.length;++g){const x=t[g];if(x===" ")m=!0;else if(x===`
`)y=g;else break}let b=t.substring(0,y<g?y+1:g);b&&(t=t.substring(b.length),b=b.replace(/\n+/g,`$&${l}`));let E=(m?l?"2":"1":"")+h;if(n&&(E+=" "+a(n.replace(/ ?[\r\n]+/g," ")),i&&i()),!u){const x=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`);let C=!1;const R=_4(r,!0);o!=="folded"&&e!==Or.BLOCK_FOLDED&&(R.onOverflow=()=>{C=!0});const k=b4(`${b}${x}${f}`,l,JA,R);if(!C)return`>${E}
${l}${k}`}return t=t.replace(/\n+/g,`$&${l}`),`|${E}
${l}${b}${t}${f}`}function MOe(n,e,t,r){const{type:i,value:s}=n,{actualString:o,implicitKey:a,indent:c,indentStep:l,inFlow:u}=e;if(a&&s.includes(`
`)||u&&/[[\]{},]/.test(s))return Xp(s,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return a||u||!s.includes(`
`)?Xp(s,e):P3(n,e,t,r);if(!a&&!u&&i!==Or.PLAIN&&s.includes(`
`))return P3(n,e,t,r);if(E4(s)){if(c==="")return e.forceBlockIndent=!0,P3(n,e,t,r);if(a&&c===l)return Xp(s,e)}const h=s.replace(/\n+/g,`$&
${c}`);if(o){const d=m=>m.default&&m.tag!=="tag:yaml.org,2002:str"&&m.test?.test(h),{compat:f,tags:p}=e.doc.schema;if(p.some(d)||f?.some(d))return Xp(s,e)}return a?h:b4(h,c,qq,_4(e,!1))}function ROe(n,e,t,r){const{implicitKey:i,inFlow:s}=e,o=typeof n.value=="string"?n:Object.assign({},n,{value:String(n.value)});let{type:a}=n;a!==Or.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=Or.QUOTE_DOUBLE);const c=u=>{switch(u){case Or.BLOCK_FOLDED:case Or.BLOCK_LITERAL:return i||s?Xp(o.value,e):P3(o,e,t,r);case Or.QUOTE_DOUBLE:return yg(o.value,e);case Or.QUOTE_SINGLE:return QA(o.value,e);case Or.PLAIN:return MOe(o,e,t,r);default:return null}};let l=c(a);if(l===null){const{defaultKeyType:u,defaultStringType:h}=e.options,d=i&&u||h;if(l=c(d),l===null)throw new Error(`Unsupported default string type ${d}`)}return l}function POe(n,e){const t=Object.assign({blockQuote:!0,commentString:TOe,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},n.schema.toStringOptions,e);let r;switch(t.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:n,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:r,options:t}}function NOe(n,e){if(e.tag){const i=n.filter(s=>s.tag===e.tag);if(i.length>0)return i.find(s=>s.format===e.format)??i[0]}let t,r;if(ci(e)){r=e.value;let i=n.filter(s=>s.identify?.(r));if(i.length>1){const s=i.filter(o=>o.test);s.length>0&&(i=s)}t=i.find(s=>s.format===e.format)??i.find(s=>!s.format)}else r=e,t=n.find(i=>i.nodeClass&&r instanceof i.nodeClass);if(!t){const i=r?.constructor?.name??(r===null?"null":typeof r);throw new Error(`Tag not resolved for ${i} value`)}return t}function OOe(n,e,{anchors:t,doc:r}){if(!r.directives)return"";const i=[],s=(ci(n)||Ao(n))&&n.anchor;s&&Hq(s)&&(t.add(s),i.push(`&${s}`));const o=n.tag??(e.default?null:e.tag);return o&&i.push(r.directives.tagString(o)),i.join(" ")}function Kb(n,e,t,r){if(zi(n))return n.toString(e,t,r);if(Bf(n)){if(e.doc.directives)return n.toString(e);if(e.resolvedAliases?.has(n))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(n):e.resolvedAliases=new Set([n]),n=n.resolve(e.doc)}let i;const s=ls(n)?n:e.doc.createNode(n,{onTagObj:c=>i=c});i??(i=NOe(e.doc.schema.tags,s));const o=OOe(s,i,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const a=typeof i.stringify=="function"?i.stringify(s,e,t,r):ci(s)?ROe(s,e,t,r):s.toString(e,t,r);return o?ci(s)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}function kOe({key:n,value:e},t,r,i){const{allNullValues:s,doc:o,indent:a,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:h}}=t;let d=ls(n)&&n.comment||null;if(h){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(Ao(n)||!ls(n)&&typeof n=="object"){const R="With simple keys, collection cannot be used as a key value";throw new Error(R)}}let f=!h&&(!n||d&&e==null&&!t.inFlow||Ao(n)||(ci(n)?n.type===Or.BLOCK_FOLDED||n.type===Or.BLOCK_LITERAL:typeof n=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!f&&(h||!s),indent:a+c});let p=!1,m=!1,g=Kb(n,t,()=>p=!0,()=>m=!0);if(!f&&!t.inFlow&&g.length>1024){if(h)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");f=!0}if(t.inFlow){if(s||e==null)return p&&r&&r(),g===""?"?":f?`? ${g}`:g}else if(s&&!h||e==null&&f)return g=`? ${g}`,d&&!p?g+=Yp(g,t.indent,l(d)):m&&i&&i(),g;p&&(d=null),f?(d&&(g+=Yp(g,t.indent,l(d))),g=`? ${g}
${a}:`):(g=`${g}:`,d&&(g+=Yp(g,t.indent,l(d))));let y,b,w;ls(e)?(y=!!e.spaceBefore,b=e.commentBefore,w=e.comment):(y=!1,b=null,w=null,e&&typeof e=="object"&&(e=o.createNode(e))),t.implicitKey=!1,!f&&!d&&ci(e)&&(t.indentAtStart=g.length+1),m=!1,!u&&c.length>=2&&!t.inFlow&&!f&&tT(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substring(2));let E=!1;const x=Kb(e,t,()=>E=!0,()=>m=!0);let C=" ";if(d||y||b){if(C=y?`
`:"",b){const R=l(b);C+=`
${z2(R,t.indent)}`}x===""&&!t.inFlow?C===`
`&&(C=`

`):C+=`
${t.indent}`}else if(!f&&Ao(e)){const R=x[0],k=x.indexOf(`
`),_=k!==-1,A=t.inFlow??e.flow??e.items.length===0;if(_||!A){let M=!1;if(_&&(R==="&"||R==="!")){let D=x.indexOf(" ");R==="&"&&D!==-1&&D<k&&x[D+1]==="!"&&(D=x.indexOf(" ",D+1)),(D===-1||k<D)&&(M=!0)}M||(C=`
${t.indent}`)}}else(x===""||x[0]===`
`)&&(C="");return g+=C+x,t.inFlow?E&&r&&r():w&&!E?g+=Yp(g,t.indent,l(w)):m&&i&&i(),g}function DOe(n,e){(n==="debug"||n==="warn")&&console.warn(e)}const ev="<<",M8={identify:n=>n===ev||typeof n=="symbol"&&n.description===ev,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Or(Symbol(ev)),{addToJSMap:jq}),stringify:()=>ev},LOe=(n,e)=>(M8.identify(e)||ci(e)&&(!e.type||e.type===Or.PLAIN)&&M8.identify(e.value))&&n?.doc.schema.tags.some(t=>t.tag===M8.tag&&t.default);function jq(n,e,t){if(t=n&&Bf(t)?t.resolve(n.doc):t,tT(t))for(const r of t.items)R8(n,e,r);else if(Array.isArray(t))for(const r of t)R8(n,e,r);else R8(n,e,t)}function R8(n,e,t){const r=n&&Bf(t)?t.resolve(n.doc):t;if(!$q(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,n,Map);for(const[s,o]of i)e instanceof Map?e.has(s)||e.set(s,o):e instanceof Set?e.add(s):Object.prototype.hasOwnProperty.call(e,s)||Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function Gq(n,e,{key:t,value:r}){if(ls(t)&&t.addToJSMap)t.addToJSMap(n,e,r);else if(LOe(n,t))jq(n,e,r);else{const i=ja(t,"",n);if(e instanceof Map)e.set(i,ja(r,i,n));else if(e instanceof Set)e.add(i);else{const s=UOe(t,i,n),o=ja(r,s,n);s in e?Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[s]=o}}return e}function UOe(n,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(ls(n)&&t?.doc){const r=POe(t.doc,{});r.anchors=new Set;for(const s of t.anchors.keys())r.anchors.add(s.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=n.toString(r);if(!t.mapKeyWarned){let s=JSON.stringify(i);s.length>40&&(s=s.substring(0,36)+'..."'),DOe(t.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),t.mapKeyWarned=!0}return i}return JSON.stringify(e)}function rT(n,e,t){const r=Gb(n,void 0,t),i=Gb(e,void 0,t);return new Hl(r,i)}class Hl{constructor(e,t=null){Object.defineProperty(this,Xc,{value:Fq}),this.key=e,this.value=t}clone(e){let{key:t,value:r}=this;return ls(t)&&(t=t.clone(e)),ls(r)&&(r=r.clone(e)),new Hl(t,r)}toJSON(e,t){const r=t?.mapAsMap?new Map:{};return Gq(t,r,this)}toString(e,t,r){return e?.doc?kOe(this,e,t,r):JSON.stringify(this)}}function Kq(n,e,t){return(e.inFlow??n.flow?FOe:BOe)(n,e,t)}function BOe({comment:n,items:e},t,{blockItemPrefix:r,flowChars:i,itemIndent:s,onChompKeep:o,onComment:a}){const{indent:c,options:{commentString:l}}=t,u=Object.assign({},t,{indent:s,type:null});let h=!1;const d=[];for(let p=0;p<e.length;++p){const m=e[p];let g=null;if(ls(m))!h&&m.spaceBefore&&d.push(""),Yb(t,d,m.commentBefore,h),m.comment&&(g=m.comment);else if(zi(m)){const b=ls(m.key)?m.key:null;b&&(!h&&b.spaceBefore&&d.push(""),Yb(t,d,b.commentBefore,h))}h=!1;let y=Kb(m,u,()=>g=null,()=>h=!0);g&&(y+=Yp(y,s,l(g))),h&&g&&(h=!1),d.push(r+y)}let f;if(d.length===0)f=i.start+i.end;else{f=d[0];for(let p=1;p<d.length;++p){const m=d[p];f+=m?`
${c}${m}`:`
`}}return n?(f+=`
`+z2(l(n),c),a&&a()):h&&o&&o(),f}function FOe({items:n},e,{flowChars:t,itemIndent:r}){const{indent:i,indentStep:s,flowCollectionPadding:o,options:{commentString:a}}=e;r+=s;const c=Object.assign({},e,{indent:r,inFlow:!0,type:null});let l=!1,u=0;const h=[];for(let p=0;p<n.length;++p){const m=n[p];let g=null;if(ls(m))m.spaceBefore&&h.push(""),Yb(e,h,m.commentBefore,!1),m.comment&&(g=m.comment);else if(zi(m)){const b=ls(m.key)?m.key:null;b&&(b.spaceBefore&&h.push(""),Yb(e,h,b.commentBefore,!1),b.comment&&(l=!0));const w=ls(m.value)?m.value:null;w?(w.comment&&(g=w.comment),w.commentBefore&&(l=!0)):m.value==null&&b?.comment&&(g=b.comment)}g&&(l=!0);let y=Kb(m,c,()=>g=null);p<n.length-1&&(y+=","),g&&(y+=Yp(y,r,a(g))),!l&&(h.length>u||y.includes(`
`))&&(l=!0),h.push(y),u=h.length}const{start:d,end:f}=t;if(h.length===0)return d+f;if(!l){const p=h.reduce((m,g)=>m+g.length+2,2);l=e.options.lineWidth>0&&p>e.options.lineWidth}if(l){let p=d;for(const m of h)p+=m?`
${s}${i}${m}`:`
`;return`${p}
${i}${f}`}else return`${d}${o}${h.join(" ")}${o}${f}`}function Yb({indent:n,options:{commentString:e}},t,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const s=z2(e(r),n);t.push(s.trimStart())}}function Bd(n,e){const t=ci(e)?e.value:e;for(const r of n)if(zi(r)&&(r.key===e||r.key===t||ci(r.key)&&r.key.value===t))return r}class $p extends Wq{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Xd,e),this.items=[]}static from(e,t,r){const{keepUndefined:i,replacer:s}=r,o=new this(e),a=(c,l)=>{if(typeof s=="function")l=s.call(t,c,l);else if(Array.isArray(s)&&!s.includes(c))return;(l!==void 0||i)&&o.items.push(rT(c,l,r))};if(t instanceof Map)for(const[c,l]of t)a(c,l);else if(t&&typeof t=="object")for(const c of Object.keys(t))a(c,t[c]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,t){let r;zi(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new Hl(e,e?.value):r=new Hl(e.key,e.value);const i=Bd(this.items,r.key),s=this.schema?.sortMapEntries;if(i){if(!t)throw new Error(`Key ${r.key} already set`);ci(i.value)&&Vq(r.value)?i.value.value=r.value:i.value=r.value}else if(s){const o=this.items.findIndex(a=>s(r,a)<0);o===-1?this.items.push(r):this.items.splice(o,0,r)}else this.items.push(r)}delete(e){const t=Bd(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){const i=Bd(this.items,e)?.value;return(!t&&ci(i)?i.value:i)??void 0}has(e){return!!Bd(this.items,e)}set(e,t){this.add(new Hl(e,t),!0)}toJSON(e,t,r){const i=r?new r:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(i);for(const s of this.items)Gq(t,i,s);return i}toString(e,t,r){if(!e)return JSON.stringify(this);for(const i of this.items)if(!zi(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Kq(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:t})}}class Yq extends Wq{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super($y,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=tv(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){const r=tv(e);if(typeof r!="number")return;const i=this.items[r];return!t&&ci(i)?i.value:i}has(e){const t=tv(e);return typeof t=="number"&&t<this.items.length}set(e,t){const r=tv(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[r];ci(i)&&Vq(t)?i.value=t:this.items[r]=t}toJSON(e,t){const r=[];t?.onCreate&&t.onCreate(r);let i=0;for(const s of this.items)r.push(ja(s,String(i++),t));return r}toString(e,t,r){return e?Kq(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:t}):JSON.stringify(this)}static from(e,t,r){const{replacer:i}=r,s=new this(e);if(t&&Symbol.iterator in Object(t)){let o=0;for(let a of t){if(typeof i=="function"){const c=t instanceof Set?a:String(o++);a=i.call(t,c,a)}s.items.push(Gb(a,void 0,r))}}return s}}function tv(n){let e=ci(n)?n.value:n;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}function $Oe(n,e,t){const{replacer:r}=t,i=new Yq(n);i.tag="tag:yaml.org,2002:pairs";let s=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof r=="function"&&(o=r.call(e,String(s++),o));let a,c;if(Array.isArray(o))if(o.length===2)a=o[0],c=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const l=Object.keys(o);if(l.length===1)a=l[0],c=o[a];else throw new TypeError(`Expected tuple with one key, not ${l.length} keys`)}else a=o;i.items.push(rT(a,c,t))}return i}class iT extends Yq{constructor(){super(),this.add=$p.prototype.add.bind(this),this.delete=$p.prototype.delete.bind(this),this.get=$p.prototype.get.bind(this),this.has=$p.prototype.has.bind(this),this.set=$p.prototype.set.bind(this),this.tag=iT.tag}toJSON(e,t){if(!t)return super.toJSON(e);const r=new Map;t?.onCreate&&t.onCreate(r);for(const i of this.items){let s,o;if(zi(i)?(s=ja(i.key,"",t),o=ja(i.value,s,t)):s=ja(i,"",t),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,o)}return r}static from(e,t,r){const i=$Oe(e,t,r),s=new this;return s.items=i.items,s}}iT.tag="tag:yaml.org,2002:omap";class sT extends $p{constructor(e){super(e),this.tag=sT.tag}add(e){let t;zi(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new Hl(e.key,null):t=new Hl(e,null),Bd(this.items,t.key)||this.items.push(t)}get(e,t){const r=Bd(this.items,e);return!t&&zi(r)?ci(r.key)?r.key.value:r.key:r}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);const r=Bd(this.items,e);r&&!t?this.items.splice(this.items.indexOf(r),1):!r&&t&&this.items.push(new Hl(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,r);throw new Error("Set items must all have null values")}static from(e,t,r){const{replacer:i}=r,s=new this(e);if(t&&Symbol.iterator in Object(t))for(let o of t)typeof i=="function"&&(o=i.call(t,o,o)),s.items.push(rT(o,null,r));return s}}sT.tag="tag:yaml.org,2002:set";new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);const zOe=Ar({__name:"Button",emits:["click"],setup(n){return(e,t)=>(Re(),Oe("button",Dg(e.$attrs,{onClick:t[0]||(t[0]=r=>e.$emit("click"))}),[As(e.$slots,"default",{},void 0,!0)],16))}}),fc=Lo(zOe,[["__scopeId","data-v-ea741ebe"]]),Qk=Symbol.for("constructDateFrom");function Xb(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&Qk in n?n[Qk](e):n instanceof Date?new n.constructor(e):new Date(e)}function yf(n,e){return Xb(n,n)}function HOe(n,e,t){const r=yf(n);if(isNaN(e))return Xb(n,NaN);const i=r.getDate(),s=Xb(n,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function VOe(n,e,t){return HOe(n,e*12)}function WOe(n,e){const t=yf(n);return t.setDate(1),t.setHours(0,0,0,0),t}function qOe(n,e){const t=yf(n),r=t.getFullYear(),i=t.getMonth(),s=Xb(t,0);return s.setFullYear(r,i+1,0),s.setHours(0,0,0,0),s.getDate()}function jOe(n,e){return+yf(n)>+yf(e)}function GOe(n,e){return+yf(n)<+yf(e)}const KOe={class:"selected"},YOe={class:"month"},XOe={class:"year"};VOe(new Date,1);const ZOe=Ar({__name:"FormElement",props:{label:{},disabled:{type:Boolean},hideLabel:{type:Boolean}},setup(n,{expose:e}){const t=Ae(),r=Ee(()=>t.value?.element?.value);return e({element:r}),(i,s)=>(Re(),si(J9,{ref_key:"el",ref:t,class:Io(["form-element",{disabled:i.disabled===!0}])},{default:Wn(()=>[As(i.$slots,"label",{},()=>[i.label?(Re(),Oe("label",{key:0,class:Io({hidden:i.hideLabel})},Rc(i.label),3)):bh("",!0)],!0),As(i.$slots,"default",{},void 0,!0)]),_:3},8,["class"]))}}),oT=Lo(ZOe,[["__scopeId","data-v-c5167488"]]),JOe=["type","value","placeholder","disabled","min","max","step"],QOe=Ar({__name:"BaseInput",props:{type:{default:"text"},label:{},modelValue:{},disabled:{type:Boolean,default:!1},placeholder:{},autofocus:{type:Boolean,default:!1},min:{},max:{},step:{}},emits:["update:model-value","keypress","keydown","keyup","blur","focus"],setup(n,{emit:e}){const t=e,r=n,i=Ae();function s(o){const a=o.target;t("update:model-value",a.value)}return No(()=>{r.autofocus&&i.value?.focus()}),(o,a)=>(Re(),si(oT,{label:o.label,disabled:o.disabled},{default:Wn(()=>[As(o.$slots,"left"),be("input",{ref_key:"input",ref:i,type:o.type,value:o.modelValue,placeholder:o.placeholder,disabled:o.disabled,min:o.min,max:o.max,step:o.step,onInput:s,onKeypress:a[0]||(a[0]=c=>o.$emit("keypress",c)),onKeydown:a[1]||(a[1]=c=>o.$emit("keydown",c)),onKeyup:a[2]||(a[2]=c=>o.$emit("keyup",c)),onBlur:a[3]||(a[3]=c=>o.$emit("blur",c)),onFocus:a[4]||(a[4]=c=>o.$emit("focus",c))},null,40,JOe),As(o.$slots,"right")]),_:3},8,["label","disabled"]))}}),eke=Ar({__name:"TextInput",props:{type:{},modelValue:{},label:{},disabled:{type:Boolean},placeholder:{},autofocus:{type:Boolean},name:{}},emits:["update:model-value","keypress","keydown","keyup","blur","focus"],setup(n){return(e,t)=>(Re(),si(QOe,{type:"text",label:e.label,"model-value":String(e.modelValue),disabled:e.disabled,placeholder:e.placeholder,autofocus:e.autofocus,"onUpdate:modelValue":t[0]||(t[0]=r=>e.$emit("update:model-value",r)),onKeypress:t[1]||(t[1]=r=>e.$emit("keypress",r)),onKeydown:t[2]||(t[2]=r=>e.$emit("keydown",r)),onKeyup:t[3]||(t[3]=r=>e.$emit("keyup",r)),onBlur:t[4]||(t[4]=r=>e.$emit("blur",r)),onFocus:t[5]||(t[5]=r=>e.$emit("focus",r))},{left:Wn(()=>[As(e.$slots,"left")]),right:Wn(()=>[As(e.$slots,"right")]),_:3},8,["label","model-value","disabled","placeholder","autofocus"]))}}),tke=["value","min","max","step","disabled"],nke=Ar({__name:"RangeInput",props:{min:{},max:{},step:{},showRanges:{type:Boolean},modelValue:{},label:{},disabled:{type:Boolean},placeholder:{},autofocus:{type:Boolean},name:{}},emits:["update:model-value","blur","focus","input"],setup(n,{emit:e}){const t=e;function r(o){t("input",o),t("update:model-value",parseFloat(o.target.value))}const i=Ae(),s=cTe(i);return(o,a)=>(Re(),si(oT,{label:o.label,disabled:o.disabled},{default:Wn(()=>[be("input",{type:"range",value:o.modelValue,min:o.min,max:o.max,step:o.step,onPointerup:a[0]||(a[0]=c=>o.$emit("blur")),onInput:a[1]||(a[1]=c=>r(c)),disabled:o.disabled},null,40,tke),be("div",{class:"value",style:Dh(ht(s)),ref_key:"val",ref:i},Rc(Number(o.modelValue)?.toFixed?.(3)),5)]),_:1},8,["label","disabled"]))}}),rke=Lo(nke,[["__scopeId","data-v-6009585b"]]),ike={class:"inner"},ske=["disabled","checked"],oke=Ar({__name:"Toggle",props:{placeholder:{},autofocus:{},modelValue:{},label:{},disabled:{type:Boolean},name:{}},emits:["update:model-value"],setup(n,{emit:e}){const t=e;function r({target:{checked:i}}){t("update:model-value",i)}return(i,s)=>(Re(),si(oT,{label:i.label,disabled:i.disabled===!0,class:Io({checked:i.modelValue})},{label:Wn(()=>[As(i.$slots,"label",{},void 0,!0)]),default:Wn(()=>[As(i.$slots,"before",{},void 0,!0),be("div",ike,[be("input",{type:"checkbox",disabled:i.disabled===!0,checked:i.modelValue,onInput:r},null,40,ske),s[0]||(s[0]=be("i",null,null,-1))]),As(i.$slots,"after",{},void 0,!0)]),_:3},8,["label","disabled","class"]))}}),ake=Lo(oke,[["__scopeId","data-v-282d10a6"]]),cke=Ar({__name:"Popover",setup(n){py();const e=Z9(),t=YAe(),r=Ae(),i=Ae(null),s=Ae(null),o=Ae(null),a=Ee(()=>typeof i.value=="number"&&typeof s.value=="number"&&typeof o.value=="number"&&t.uniformKey&&typeof e.uniforms[t.uniformKey].value=="number"),c=Ee(()=>t.uniformKey&&typeof e.uniforms[t.uniformKey].value=="boolean");wt(()=>t.uniformKey,u=>{if(!u||!e.uniforms?.[u]||typeof e.uniforms[u].value!="number")return;const h=e.uniforms[u].value;i.value=Jv.getMin(t.uniformKey,h),s.value=Jv.getMax(t.uniformKey,h),o.value=Jv.getStep(t.uniformKey,h)},{immediate:!0});function l(u){u.key==="Enter"&&t.acceptText()}return cZ(r,()=>{t.visible=!1}),(u,h)=>(Re(),si(dB,{name:"fade"},{default:Wn(()=>[ht(t).visible&&ht(t).uniformKey?(Re(),Oe("aside",{onClick:h[4]||(h[4]=UX(()=>{},["stop"])),key:JSON.stringify([ht(t).uniformKey,ht(t).visible,ht(t).inputTextKey]),ref_key:"element",ref:r,class:"popover",style:Dh({transform:ht(t).transform})},[a.value?(Re(),si(rke,{key:0,label:ht(t).uniformKey,modelValue:ht(e).uniforms[ht(t).uniformKey].value,"onUpdate:modelValue":h[0]||(h[0]=d=>ht(e).uniforms[ht(t).uniformKey].value=d),min:i.value,max:s.value,step:o.value},null,8,["label","modelValue","min","max","step"])):c.value?(Re(),si(ake,{key:1,label:ht(t).uniformKey,modelValue:ht(e).uniforms[ht(t).uniformKey].value,"onUpdate:modelValue":h[1]||(h[1]=d=>ht(e).uniforms[ht(t).uniformKey].value=d)},null,8,["label","modelValue"])):ht(t).inputTextKey?(Re(),si(eke,{key:2,onKeypress:l,modelValue:ht(t).inputText,"onUpdate:modelValue":h[3]||(h[3]=d=>ht(t).inputText=d),autofocus:!0,placeholder:ht(t).inputTextKey},{right:Wn(()=>[en(wOe,{icon:"save",onClick:h[2]||(h[2]=d=>ht(t).acceptText()),small:!0})]),_:1},8,["modelValue","placeholder"])):bh("",!0)],4)):bh("",!0)]),_:1}))}}),lke=Lo(cke,[["__scopeId","data-v-d0c8d60a"]]),uke={key:1,class:"sage-router-loading"},hke={key:2,class:"sage-router-not-found"},dke=Ar({__name:"SageRouterView",setup(n){const e=J0(),t=Tt(null),r=Ae(!1);return wt(()=>e.value.matched,async i=>{if(!i){t.value=null;return}try{r.value=!0,console.log("🔄 Loading component for route:",e.value.path);const s=await i.component();t.value=s?.default||s,console.log("✅ Component loaded:",e.value.path)}catch(s){console.error("💥 Failed to load component:",s),t.value=null}finally{r.value=!1}},{immediate:!0}),(i,s)=>t.value&&!r.value?(Re(),si(UC(t.value),{key:ht(e).path})):r.value?(Re(),Oe("div",uke,[As(i.$slots,"loading",{},()=>[s[0]||(s[0]=be("p",null,"Loading...",-1))],!0)])):(Re(),Oe("div",hke,[As(i.$slots,"not-found",{},()=>[s[1]||(s[1]=be("h1",null,"404 - Page Not Found",-1)),be("p",null,"Route: "+Rc(ht(e).path),1)],!0)]))}}),fke=Lo(dke,[["__scopeId","data-v-b9c65e60"]]),pke=[];new Map(pke.map(n=>[n.path,n]));const mke=Ar({__name:"Loading",props:{transparent:{type:Boolean,default:!1}},setup(n){const e=rq();return(t,r)=>ht(e).loadingDots?(Re(),Oe("div",{key:0,class:Io(["loading",{transparent:t.transparent}])},r[0]||(r[0]=[be("i",{class:"loader"},null,-1)]),2)):bh("",!0)}}),eD=Lo(mke,[["__scopeId","data-v-76f7572e"]]),gke=5,yke=Ar({__name:"View",props:{centered:{type:Boolean},cascade:{type:Boolean}},emits:["wheel"],setup(n,{emit:e}){const t=p4(),r=J0(),i=Ae(),s=Ae("view:scrollTop"+r.path),o=e,a=Uf();let c=0,l=0,u=0,h=0,d=Ae(!1),f=Ae(!1),p=[];function m(C){localStorage.setItem(s.value,`${C.target.scrollTop}`),t.setScrollPosition(C.target.scrollLeft||0,C.target.scrollTop||0)}function g(C){a.preFrame.push(()=>{t.onScroll(C.deltaY)})}function y(C){a.preFrame.push(()=>{t.mouseMove(C)})}function b(C){const R=C.target;if(R&&(R.tagName==="INPUT"||R.tagName==="BUTTON"||R.tagName==="SELECT"||R.tagName==="TEXTAREA"||R.closest("input, button, select, textarea, [contenteditable]"))){d.value=!1;return}const k=C.touches[0];k.clientY,c=Date.now(),l=k.clientY,u=c,h=0,d.value=!0,f&&(a.remove("inertial-scroll"),f.value=!1),p=[]}function w(C){if(!d)return;const R=C.target;if(R&&(R.tagName==="INPUT"||R.tagName==="BUTTON"||R.tagName==="SELECT"||R.tagName==="TEXTAREA"||R.closest("input, button, select, textarea, [contenteditable]")))return;const _=C.touches[0].clientY,A=Date.now(),M=l-_;a.preFrame.push(()=>{t.onScroll(M)}),o("wheel",M);const D=A-u;if(D>0){const P=M/D;p.push({velocity:P,time:A}),p.length>gke&&p.shift()}l=_,u=A,C.preventDefault()}function E(C){if(!d)return;d.value=!1;let R=0;if(p.length<=0)return;let k=0,_=0;p.forEach((M,D)=>{const P=D+1;_+=M.velocity*P,k+=P}),R=k>0?_/k:0,Math.abs(R)>.1&&(h=R,x())}function x(){if(f.value)return;f.value=!0;const C=Math.abs(h),R=C*1e3,k=Vx([C*20,0]),_=C*(h>0?1:-1);a.add((A,M)=>{if(!f.value)return;const P=k(M)*_;t.onScroll(P),o("wheel",P),M===1&&(f.value=!1)},{duration:R,easing:ZC(0,1.04,.63,1),id:"inertial-scroll"})}return No(()=>{try{const C=Number(localStorage.getItem(s.value));isNaN(C)||(i.value.scrollTop=C)}catch{}}),(C,R)=>(Re(),Oe("main",{ref_key:"container",ref:i,class:Io({centered:C.centered,cascade:C.cascade}),onScroll:m,onWheel:R[0]||(R[0]=k=>g(k)),onMousemove:R[1]||(R[1]=k=>y(k)),onTouchstart:b,onTouchmove:w,onTouchend:E},[As(C.$slots,"default",{},void 0,!0)],34))}}),wke=Lo(yke,[["__scopeId","data-v-94205ce6"]]),vke=Ar({__name:"Root",setup(n){const e=Lf(),t=J0(),r=l5();return wt([()=>e.isAuthenticated,()=>t.value,()=>e.user],([i,s,o])=>{if(i&&s.meta?.redirectWhenAuthenticated){console.log("🎉 Authenticated user on redirect page - redirecting to",s.meta.redirectWhenAuthenticated),r.replace(s.meta.redirectWhenAuthenticated);return}if(s.meta?.requiresAuth&&!i){console.log("🚫 Auth required but not authenticated - redirecting to homepage"),r.replace("/");return}if(i&&o){if(s.meta?.requiresAdmin&&!e.isAdmin){console.log("🚫 Admin access required - redirecting to homepage"),r.replace("/");return}if(s.meta?.requiresArtist&&!e.isArtist){console.log("🚫 Artist access required - redirecting to homepage"),r.replace("/");return}if(s.meta?.requiresSubscriber&&!e.isSubscriber){console.log("🚫 Subscriber access required - redirecting to homepage"),r.replace("/");return}if(s.meta?.requiresPaidTier&&!e.isPaidTier){console.log("🚫 Paid tier access required - redirecting to homepage"),r.replace("/");return}if(s.meta?.requiresArtistOrAdmin&&!e.isArtistOrAdmin){console.log("🚫 Artist or Admin access required - redirecting to homepage"),r.replace("/");return}}},{immediate:!0}),(i,s)=>(Re(),Oe(ni,null,[en(dB,{name:"view"},{default:Wn(()=>[ht(e).loading?bh("",!0):(Re(),si(ht(fke),{key:ht(t).path},{loading:Wn(()=>[en(eD)]),"not-found":Wn(()=>[en(wke,{padding:1,gap:1,center:"",cascade:""},{default:Wn(()=>[en(J9,null,{default:Wn(()=>s[0]||(s[0]=[be("h1",null,"404",-1),be("h2",null,"Page Not Found",-1)])),_:1,__:[0]})]),_:1})]),_:1}))]),_:1}),en(eD)],64))}}),bke=["src"],_ke=Ar({__name:"Toast",setup(n){const e=py();return(t,r)=>(Re(),Oe("header",{class:Io({visible:ht(e)?.visible,[`${ht(e)?.type}`]:!0})},[ht(e)?.image?(Re(),Oe("img",{key:0,src:ht(e)?.image},null,8,bke)):bh("",!0),be("p",null,Rc(ht(e)?.text),1)],2))}}),Eke=Lo(_ke,[["__scopeId","data-v-f02bab40"]]),xke=["visible","position","scale"],Ske=["args"],Ake=["vertex-shader","fragment-shader","uniforms"],Xq=Ar({__name:"SketchMesh",props:{shader:{},uniforms:{},width:{},height:{},dpr:{},animate:{type:Boolean,default:!1},volume:{default:1},stream:{default:0},fixed:{type:Boolean},time:{},renderMode:{default:"manual"},position:{default:[0,0,0]},visible:{type:Boolean,default:!0},scale:{default:1},meshKey:{type:Boolean,default:!1}},emits:["select"],setup(n,{expose:e,emit:t}){const r=t,i=n,s=Tt(),{aspectRatio:o,vertexShader:a,fragmentShader:c,uniforms:l,render:u}=Q9e(i,s);return e({update:u}),(h,d)=>(Re(),Oe("TresMesh",{ref_key:"mesh",ref:s,onClick:d[0]||(d[0]=f=>r("select")),visible:h.scale>0,position:h.position,scale:h.scale},[As(h.$slots,"default",{},()=>[be("TresPlaneGeometry",{args:[ht(o),1]},null,8,Ske)]),be("TresShaderMaterial",{side:0,"vertex-shader":ht(a),"fragment-shader":ht(c),uniforms:ht(l)},null,8,Ake)],8,xke))}}),Cke=["position"],Tke=["args"],Ike=Ar({__name:"ShaderScroll",props:{sketches:{default:[]},scrollY:{},visible:{type:Boolean,default:!1},shader:{},uniforms:{},width:{},height:{},dpr:{},animate:{type:Boolean,default:!0},volume:{default:1},stream:{default:0},fixed:{type:Boolean},time:{},renderMode:{default:"manual"},position:{},scale:{},meshKey:{type:Boolean}},emits:["select"],setup(n,{expose:e}){const t=iq(),r=n,i=Tt(),s=Ee(()=>r.sketches||[]);e({update(h){i.value?.forEach?.(d=>{try{d.update(h)}catch(f){console.log(f)}})}});const{getPosition:o,getScale:a,scrollOffset:c}=tTe(r),l=Ee(()=>s.value.map((h,d)=>a(d))),u=Ee(()=>s.value.map((h,d)=>o(d)));return(h,d)=>(Re(),Oe("TresGroup",{position:[0,ht(c),0]},[(Re(!0),Oe(ni,null,$U(s.value,(f,p)=>(Re(),si(Xq,{ref_for:!0,ref_key:"meshes",ref:i,onSelect:m=>h.$emit("select",f),shader:f.shader,uniforms:f.variants[0],width:h.width,height:h.width,volume:h.volume,stream:h.stream,visible:l.value[p]>0,scale:l.value[p],position:u.value[p]},{default:Wn(()=>[be("TresCircleGeometry",{args:[ht(t).isMobile?.165:.175,32]},null,8,Tke)]),_:2},1032,["onSelect","shader","uniforms","width","height","volume","stream","visible","scale","position"]))),256))],8,Cke))}}),Mke={mounted(n,e){tD(n,e)},updated(n,e){tD(n,e)}};function tD(n,e){const{isAdmin:t,isAdminWallet:r,isAdminRole:i}=ETe();let s=!1;const o=e.value;o===void 0||o===!0?s=t.value:o===!1?s=!t.value:o==="wallet"?s=r.value:o==="role"?s=i.value:typeof o=="boolean"?s=o?t.value:!t.value:(console.warn(`v-admin: Invalid value "${o}". Use true/false/'wallet'/'role' or no value.`),s=t.value),s?(n.style.removeProperty("display"),n.removeAttribute("hidden")):(n.style.display="none",n.setAttribute("hidden",""))}function Rke(n){n.directive("admin",Mke)}function Pke(n){Rke(n)}const Nke={install(n){Pke(n)}};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const zy="177",Oke={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kke={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Zq=0,tC=1,Jq=2,Dke=3,Lke=0,aT=1,cT=2,_c=3,eu=0,Is=1,Da=2,Vl=0,Zd=1,nC=2,rC=3,iC=4,Qq=5,th=100,ej=101,tj=102,nj=103,rj=104,ij=200,sj=201,oj=202,aj=203,Zb=204,Jb=205,cj=206,lj=207,uj=208,hj=209,dj=210,fj=211,pj=212,mj=213,gj=214,Qb=0,e_=1,t_=2,wf=3,n_=4,r_=5,i_=6,s_=7,Hy=0,yj=1,wj=2,Dc=0,vj=1,bj=2,_j=3,x4=4,Ej=5,xj=6,Sj=7,sC="attached",Aj="detached",S4=300,tu=301,Nh=302,H2=303,V2=304,p1=306,W2=1e3,ta=1001,q2=1002,Bi=1003,lT=1004,Uke=1004,Zp=1005,Bke=1005,oi=1006,wg=1007,Fke=1007,Mc=1008,$ke=1008,Ja=1009,uT=1010,hT=1011,$0=1012,A4=1013,nu=1014,to=1015,m1=1016,C4=1017,T4=1018,z0=1020,dT=35902,fT=1021,pT=1022,Ss=1023,H0=1026,V0=1027,I4=1028,Vy=1029,mT=1030,M4=1031,zke=1032,R4=1033,vg=33776,bg=33777,_g=33778,Eg=33779,o_=35840,a_=35841,c_=35842,l_=35843,u_=36196,h_=37492,d_=37496,f_=37808,p_=37809,m_=37810,g_=37811,y_=37812,w_=37813,v_=37814,b_=37815,__=37816,E_=37817,x_=37818,S_=37819,A_=37820,C_=37821,xg=36492,T_=36494,I_=36495,gT=36283,M_=36284,R_=36285,P_=36286,Cj=2200,Tj=2201,Ij=2202,j2=2300,N_=2301,N3=2302,Fd=2400,$d=2401,G2=2402,P4=2500,yT=2501,Hke=0,Vke=1,Wke=2,Mj=3200,Rj=3201,qke=3202,jke=3203,Uh=0,Pj=1,Nl="",bs="srgb",vf="srgb-linear",K2="linear",Vn="srgb",Gke=0,gd=7680,Kke=7681,Yke=7682,Xke=7683,Zke=34055,Jke=34056,Qke=5386,eDe=512,tDe=513,nDe=514,rDe=515,iDe=516,sDe=517,oDe=518,oC=519,Nj=512,Oj=513,kj=514,wT=515,Dj=516,Lj=517,Uj=518,Bj=519,Y2=35044,aDe=35048,cDe=35040,lDe=35045,uDe=35049,hDe=35041,dDe=35046,fDe=35050,pDe=35042,mDe="100",aC="300 es",na=2e3,X2=2001,gDe={COMPUTE:"compute",RENDER:"render"},yDe={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},wDe={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};class Zc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const es=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let nD=1234567;const Jd=Math.PI/180,W0=180/Math.PI;function Mo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(es[n&255]+es[n>>8&255]+es[n>>16&255]+es[n>>24&255]+"-"+es[e&255]+es[e>>8&255]+"-"+es[e>>16&15|64]+es[e>>24&255]+"-"+es[t&63|128]+es[t>>8&255]+"-"+es[t>>16&255]+es[t>>24&255]+es[r&255]+es[r>>8&255]+es[r>>16&255]+es[r>>24&255]).toLowerCase()}function Zt(n,e,t){return Math.max(e,Math.min(t,n))}function vT(n,e){return(n%e+e)%e}function vDe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function bDe(n,e,t){return n!==e?(t-n)/(e-n):0}function Sg(n,e,t){return(1-t)*n+t*e}function _De(n,e,t,r){return Sg(n,e,1-Math.exp(-t*r))}function EDe(n,e=1){return e-Math.abs(vT(n,e*2)-e)}function xDe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function SDe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function ADe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function CDe(n,e){return n+Math.random()*(e-n)}function TDe(n){return n*(.5-Math.random())}function IDe(n){n!==void 0&&(nD=n);let e=nD+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function MDe(n){return n*Jd}function RDe(n){return n*W0}function PDe(n){return(n&n-1)===0&&n!==0}function NDe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ODe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function kDe(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),f=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":n.set(a*u,c*h,c*d,a*l);break;case"YZY":n.set(c*d,a*u,c*h,a*l);break;case"ZXZ":n.set(c*h,c*d,a*u,a*l);break;case"XZX":n.set(a*u,c*p,c*f,a*l);break;case"YXY":n.set(c*f,a*u,c*p,a*l);break;case"ZYZ":n.set(c*p,c*f,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function xs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function nn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const bT={DEG2RAD:Jd,RAD2DEG:W0,generateUUID:Mo,clamp:Zt,euclideanModulo:vT,mapLinear:vDe,inverseLerp:bDe,lerp:Sg,damp:_De,pingpong:EDe,smoothstep:xDe,smootherstep:SDe,randInt:ADe,randFloat:CDe,randFloatSpread:TDe,seededRandom:IDe,degToRad:MDe,radToDeg:RDe,isPowerOfTwo:PDe,ceilPowerOfTwo:NDe,floorPowerOfTwo:ODe,setQuaternionFromProperEuler:kDe,normalize:nn,denormalize:xs};class Ue{constructor(e=0,t=0){Ue.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Zt(this.x,e.x,t.x),this.y=Zt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Zt(this.x,e,t),this.y=Zt(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Zt(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Zt(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class oo{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let c=r[i+0],l=r[i+1],u=r[i+2],h=r[i+3];const d=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(a===0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=m;return}if(h!==m||c!==d||l!==f||u!==p){let g=1-a;const y=c*d+l*f+u*p+h*m,b=y>=0?1:-1,w=1-y*y;if(w>Number.EPSILON){const x=Math.sqrt(w),C=Math.atan2(x,y*b);g=Math.sin(g*C)/x,a=Math.sin(a*C)/x}const E=a*b;if(c=c*g+d*E,l=l*g+f*E,u=u*g+p*E,h=h*g+m*E,g===1-a){const x=1/Math.sqrt(c*c+l*l+u*u+h*h);c*=x,l*=x,u*=x,h*=x}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],c=r[i+1],l=r[i+2],u=r[i+3],h=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*h+c*f-l*d,e[t+1]=c*p+u*d+l*h-a*f,e[t+2]=l*p+u*f+a*d-c*h,e[t+3]=u*p-a*h-c*d-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(r/2),u=a(i/2),h=a(s/2),d=c(r/2),f=c(i/2),p=c(s/2);switch(o){case"XYZ":this._x=d*u*h+l*f*p,this._y=l*f*h-d*u*p,this._z=l*u*p+d*f*h,this._w=l*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+l*f*p,this._y=l*f*h-d*u*p,this._z=l*u*p-d*f*h,this._w=l*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-l*f*p,this._y=l*f*h+d*u*p,this._z=l*u*p+d*f*h,this._w=l*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-l*f*p,this._y=l*f*h+d*u*p,this._z=l*u*p-d*f*h,this._w=l*u*h+d*f*p;break;case"YZX":this._x=d*u*h+l*f*p,this._y=l*f*h+d*u*p,this._z=l*u*p-d*f*h,this._w=l*u*h-d*f*p;break;case"XZY":this._x=d*u*h-l*f*p,this._y=l*f*h-d*u*p,this._z=l*u*p+d*f*h,this._w=l*u*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],h=t[10],d=r+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-c)*f,this._y=(s-l)*f,this._z=(o-i)*f}else if(r>a&&r>h){const f=2*Math.sqrt(1+r-a-h);this._w=(u-c)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+l)/f}else if(a>h){const f=2*Math.sqrt(1+a-r-h);this._w=(s-l)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(c+u)/f}else{const f=2*Math.sqrt(1+h-r-a);this._w=(o-i)/f,this._x=(s+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zt(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=r*u+o*a+i*l-s*c,this._y=i*u+o*c+s*a-r*l,this._z=s*u+o*l+r*c-i*a,this._w=o*u-r*a-i*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),h=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=i*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ne{constructor(e=0,t=0,r=0){ne.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(rD.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(rD.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*i-a*r),u=2*(a*t-s*i),h=2*(s*r-o*t);return this.x=t+c*l+o*h-a*u,this.y=r+c*u+a*l-s*h,this.z=i+c*h+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Zt(this.x,e.x,t.x),this.y=Zt(this.y,e.y,t.y),this.z=Zt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Zt(this.x,e,t),this.y=Zt(this.y,e,t),this.z=Zt(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Zt(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=i*c-s*a,this.y=s*o-r*c,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return P8.copy(this).projectOnVector(e),this.sub(P8)}reflect(e){return this.sub(P8.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Zt(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const P8=new ne,rD=new oo;class Qt{constructor(e,t,r,i,s,o,a,c,l){Qt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,c,l)}set(e,t,r,i,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=r,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],c=r[6],l=r[1],u=r[4],h=r[7],d=r[2],f=r[5],p=r[8],m=i[0],g=i[3],y=i[6],b=i[1],w=i[4],E=i[7],x=i[2],C=i[5],R=i[8];return s[0]=o*m+a*b+c*x,s[3]=o*g+a*w+c*C,s[6]=o*y+a*E+c*R,s[1]=l*m+u*b+h*x,s[4]=l*g+u*w+h*C,s[7]=l*y+u*E+h*R,s[2]=d*m+f*b+p*x,s[5]=d*g+f*w+p*C,s[8]=d*y+f*E+p*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-r*s*u+r*a*c+i*s*l-i*o*c}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*o-a*l,d=a*c-u*s,f=l*s-o*c,p=t*h+r*d+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=h*m,e[1]=(i*l-u*r)*m,e[2]=(a*r-i*o)*m,e[3]=d*m,e[4]=(u*t-i*c)*m,e[5]=(i*s-a*t)*m,e[6]=f*m,e[7]=(r*c-l*t)*m,e[8]=(o*t-r*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(r*c,r*l,-r*(c*o+l*a)+o+e,-i*l,i*c,-i*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(N8.makeScale(e,t)),this}rotate(e){return this.premultiply(N8.makeRotation(-e)),this}translate(e,t){return this.premultiply(N8.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const N8=new Qt;function Fj(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const DDe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Jp(n,e){return new DDe[n](e)}function Z2(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function $j(){const n=Z2("canvas");return n.style.display="block",n}const iD={};function g0(n){n in iD||(iD[n]=!0,console.warn(n))}function LDe(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function UDe(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function BDe(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const sD=new Qt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),oD=new Qt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function FDe(){const n={enabled:!0,workingColorSpace:vf,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Vn&&(i.r=Wl(i.r),i.g=Wl(i.g),i.b=Wl(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Vn&&(i.r=y0(i.r),i.g=y0(i.g),i.b=y0(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Nl?K2:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return g0("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return g0("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[vf]:{primaries:e,whitePoint:r,transfer:K2,toXYZ:sD,fromXYZ:oD,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:bs},outputColorSpaceConfig:{drawingBufferColorSpace:bs}},[bs]:{primaries:e,whitePoint:r,transfer:Vn,toXYZ:sD,fromXYZ:oD,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:bs}}}),n}const vn=FDe();function Wl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function y0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let gp;class zj{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{gp===void 0&&(gp=Z2("canvas")),gp.width=e.width,gp.height=e.height;const i=gp.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=gp}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Z2("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Wl(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Wl(t[r]/255)*255):t[r]=Wl(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let $De=0;class oh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:$De++}),this.uuid=Mo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(O8(i[o].image)):s.push(O8(i[o]))}else s=O8(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function O8(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?zj.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let zDe=0;const k8=new ne;class kr extends Zc{constructor(e=kr.DEFAULT_IMAGE,t=kr.DEFAULT_MAPPING,r=ta,i=ta,s=oi,o=Mc,a=Ss,c=Ja,l=kr.DEFAULT_ANISOTROPY,u=Nl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:zDe++}),this.uuid=Mo(),this.name="",this.source=new oh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Ue(0,0),this.repeat=new Ue(1,1),this.center=new Ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(k8).x}get height(){return this.source.getSize(k8).y}get depth(){return this.source.getSize(k8).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==S4)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case W2:e.x=e.x-Math.floor(e.x);break;case ta:e.x=e.x<0?0:1;break;case q2:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case W2:e.y=e.y-Math.floor(e.y);break;case ta:e.y=e.y<0?0:1;break;case q2:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}kr.DEFAULT_IMAGE=null;kr.DEFAULT_MAPPING=S4;kr.DEFAULT_ANISOTROPY=1;class Sn{constructor(e=0,t=0,r=0,i=1){Sn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const c=e.elements,l=c[0],u=c[4],h=c[8],d=c[1],f=c[5],p=c[9],m=c[2],g=c[6],y=c[10];if(Math.abs(u-d)<.01&&Math.abs(h-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+m)<.1&&Math.abs(p+g)<.1&&Math.abs(l+f+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(l+1)/2,E=(f+1)/2,x=(y+1)/2,C=(u+d)/4,R=(h+m)/4,k=(p+g)/4;return w>E&&w>x?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=C/r,s=R/r):E>x?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=C/i,s=k/i):x<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(x),r=R/s,i=k/s),this.set(r,i,s,t),this}let b=Math.sqrt((g-p)*(g-p)+(h-m)*(h-m)+(d-u)*(d-u));return Math.abs(b)<.001&&(b=1),this.x=(g-p)/b,this.y=(h-m)/b,this.z=(d-u)/b,this.w=Math.acos((l+f+y-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Zt(this.x,e.x,t.x),this.y=Zt(this.y,e.y,t.y),this.z=Zt(this.z,e.z,t.z),this.w=Zt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Zt(this.x,e,t),this.y=Zt(this.y,e,t),this.z=Zt(this.z,e,t),this.w=Zt(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Zt(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class _T extends Zc{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new Sn(0,0,e,t),this.scissorTest=!1,this.viewport=new Sn(0,0,e,t);const i={width:e,height:t,depth:r.depth},s=new kr(i);this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:oi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new oh(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jc extends _T{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class N4 extends kr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Bi,this.minFilter=Bi,this.wrapR=ta,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class HDe extends jc{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new N4(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class O4 extends kr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Bi,this.minFilter=Bi,this.wrapR=ta,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class VDe extends jc{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new O4(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class us{constructor(e=new ne(1/0,1/0,1/0),t=new ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(xa.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(xa.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=xa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,xa):xa.fromBufferAttribute(s,o),xa.applyMatrix4(e.matrixWorld),this.expandByPoint(xa);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),nv.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),nv.copy(r.boundingBox)),nv.applyMatrix4(e.matrixWorld),this.union(nv)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,xa),xa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cm),rv.subVectors(this.max,cm),yp.subVectors(e.a,cm),wp.subVectors(e.b,cm),vp.subVectors(e.c,cm),Iu.subVectors(wp,yp),Mu.subVectors(vp,wp),Jh.subVectors(yp,vp);let t=[0,-Iu.z,Iu.y,0,-Mu.z,Mu.y,0,-Jh.z,Jh.y,Iu.z,0,-Iu.x,Mu.z,0,-Mu.x,Jh.z,0,-Jh.x,-Iu.y,Iu.x,0,-Mu.y,Mu.x,0,-Jh.y,Jh.x,0];return!D8(t,yp,wp,vp,rv)||(t=[1,0,0,0,1,0,0,0,1],!D8(t,yp,wp,vp,rv))?!1:(iv.crossVectors(Iu,Mu),t=[iv.x,iv.y,iv.z],D8(t,yp,wp,vp,rv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(xa).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(pl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),pl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),pl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),pl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),pl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),pl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),pl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),pl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(pl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const pl=[new ne,new ne,new ne,new ne,new ne,new ne,new ne,new ne],xa=new ne,nv=new us,yp=new ne,wp=new ne,vp=new ne,Iu=new ne,Mu=new ne,Jh=new ne,cm=new ne,rv=new ne,iv=new ne,Qh=new ne;function D8(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Qh.fromArray(n,s);const a=i.x*Math.abs(Qh.x)+i.y*Math.abs(Qh.y)+i.z*Math.abs(Qh.z),c=e.dot(Qh),l=t.dot(Qh),u=r.dot(Qh);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const WDe=new us,lm=new ne,L8=new ne;class Fi{constructor(e=new ne,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):WDe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;lm.subVectors(e,this.center);const t=lm.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(lm,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(L8.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(lm.copy(e.center).add(L8)),this.expandByPoint(lm.copy(e.center).sub(L8))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const ml=new ne,U8=new ne,sv=new ne,Ru=new ne,B8=new ne,ov=new ne,F8=new ne;class g1{constructor(e=new ne,t=new ne(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ml)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ml.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ml.copy(this.origin).addScaledVector(this.direction,t),ml.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){U8.copy(e).add(t).multiplyScalar(.5),sv.copy(t).sub(e).normalize(),Ru.copy(this.origin).sub(U8);const s=e.distanceTo(t)*.5,o=-this.direction.dot(sv),a=Ru.dot(this.direction),c=-Ru.dot(sv),l=Ru.lengthSq(),u=Math.abs(1-o*o);let h,d,f,p;if(u>0)if(h=o*c-a,d=o*a-c,p=s*u,h>=0)if(d>=-p)if(d<=p){const m=1/u;h*=m,d*=m,f=h*(h+o*d+2*a)+d*(o*h+d+2*c)+l}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*c)+l;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*c)+l;else d<=-p?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-c),s),f=-h*h+d*(d+2*c)+l):d<=p?(h=0,d=Math.min(Math.max(-s,-c),s),f=d*(d+2*c)+l):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-c),s),f=-h*h+d*(d+2*c)+l);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*c)+l;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(U8).addScaledVector(sv,d),f}intersectSphere(e,t){ml.subVectors(e.center,this.origin);const r=ml.dot(this.direction),i=ml.dot(ml)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,c=r+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return l>=0?(r=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(r=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-d.z)*h,c=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,c=(e.min.z-d.z)*h),r>c||a>i)||((a>r||r!==r)&&(r=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,ml)!==null}intersectTriangle(e,t,r,i,s){B8.subVectors(t,e),ov.subVectors(r,e),F8.crossVectors(B8,ov);let o=this.direction.dot(F8),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ru.subVectors(this.origin,e);const c=a*this.direction.dot(ov.crossVectors(Ru,ov));if(c<0)return null;const l=a*this.direction.dot(B8.cross(Ru));if(l<0||c+l>o)return null;const u=-a*Ru.dot(F8);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class jt{constructor(e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g){jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g)}set(e,t,r,i,s,o,a,c,l,u,h,d,f,p,m,g){const y=this.elements;return y[0]=e,y[4]=t,y[8]=r,y[12]=i,y[1]=s,y[5]=o,y[9]=a,y[13]=c,y[2]=l,y[6]=u,y[10]=h,y[14]=d,y[3]=f,y[7]=p,y[11]=m,y[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new jt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/bp.setFromMatrixColumn(e,0).length(),s=1/bp.setFromMatrixColumn(e,1).length(),o=1/bp.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),c=Math.cos(i),l=Math.sin(i),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,p=a*u,m=a*h;t[0]=c*u,t[4]=-c*h,t[8]=l,t[1]=f+p*l,t[5]=d-m*l,t[9]=-a*c,t[2]=m-d*l,t[6]=p+f*l,t[10]=o*c}else if(e.order==="YXZ"){const d=c*u,f=c*h,p=l*u,m=l*h;t[0]=d+m*a,t[4]=p*a-f,t[8]=o*l,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=m+d*a,t[10]=o*c}else if(e.order==="ZXY"){const d=c*u,f=c*h,p=l*u,m=l*h;t[0]=d-m*a,t[4]=-o*h,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=m-d*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){const d=o*u,f=o*h,p=a*u,m=a*h;t[0]=c*u,t[4]=p*l-f,t[8]=d*l+m,t[1]=c*h,t[5]=m*l+d,t[9]=f*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){const d=o*c,f=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=m-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=f*h+p,t[10]=d-m*h}else if(e.order==="XZY"){const d=o*c,f=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=-h,t[8]=l*u,t[1]=d*h+m,t[5]=o*u,t[9]=f*h-p,t[2]=p*h-f,t[6]=a*u,t[10]=m*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(qDe,e,jDe)}lookAt(e,t,r){const i=this.elements;return mo.subVectors(e,t),mo.lengthSq()===0&&(mo.z=1),mo.normalize(),Pu.crossVectors(r,mo),Pu.lengthSq()===0&&(Math.abs(r.z)===1?mo.x+=1e-4:mo.z+=1e-4,mo.normalize(),Pu.crossVectors(r,mo)),Pu.normalize(),av.crossVectors(mo,Pu),i[0]=Pu.x,i[4]=av.x,i[8]=mo.x,i[1]=Pu.y,i[5]=av.y,i[9]=mo.y,i[2]=Pu.z,i[6]=av.z,i[10]=mo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],c=r[8],l=r[12],u=r[1],h=r[5],d=r[9],f=r[13],p=r[2],m=r[6],g=r[10],y=r[14],b=r[3],w=r[7],E=r[11],x=r[15],C=i[0],R=i[4],k=i[8],_=i[12],A=i[1],M=i[5],D=i[9],P=i[13],v=i[2],S=i[6],T=i[10],L=i[14],U=i[3],V=i[7],W=i[11],F=i[15];return s[0]=o*C+a*A+c*v+l*U,s[4]=o*R+a*M+c*S+l*V,s[8]=o*k+a*D+c*T+l*W,s[12]=o*_+a*P+c*L+l*F,s[1]=u*C+h*A+d*v+f*U,s[5]=u*R+h*M+d*S+f*V,s[9]=u*k+h*D+d*T+f*W,s[13]=u*_+h*P+d*L+f*F,s[2]=p*C+m*A+g*v+y*U,s[6]=p*R+m*M+g*S+y*V,s[10]=p*k+m*D+g*T+y*W,s[14]=p*_+m*P+g*L+y*F,s[3]=b*C+w*A+E*v+x*U,s[7]=b*R+w*M+E*S+x*V,s[11]=b*k+w*D+E*T+x*W,s[15]=b*_+w*P+E*L+x*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],h=e[6],d=e[10],f=e[14],p=e[3],m=e[7],g=e[11],y=e[15];return p*(+s*c*h-i*l*h-s*a*d+r*l*d+i*a*f-r*c*f)+m*(+t*c*f-t*l*d+s*o*d-i*o*f+i*l*u-s*c*u)+g*(+t*l*h-t*a*f-s*o*h+r*o*f+s*a*u-r*l*u)+y*(-i*a*u-t*c*h+t*a*d+i*o*h-r*o*d+r*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15],b=h*g*l-m*d*l+m*c*f-a*g*f-h*c*y+a*d*y,w=p*d*l-u*g*l-p*c*f+o*g*f+u*c*y-o*d*y,E=u*m*l-p*h*l+p*a*f-o*m*f-u*a*y+o*h*y,x=p*h*c-u*m*c-p*a*d+o*m*d+u*a*g-o*h*g,C=t*b+r*w+i*E+s*x;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/C;return e[0]=b*R,e[1]=(m*d*s-h*g*s-m*i*f+r*g*f+h*i*y-r*d*y)*R,e[2]=(a*g*s-m*c*s+m*i*l-r*g*l-a*i*y+r*c*y)*R,e[3]=(h*c*s-a*d*s-h*i*l+r*d*l+a*i*f-r*c*f)*R,e[4]=w*R,e[5]=(u*g*s-p*d*s+p*i*f-t*g*f-u*i*y+t*d*y)*R,e[6]=(p*c*s-o*g*s-p*i*l+t*g*l+o*i*y-t*c*y)*R,e[7]=(o*d*s-u*c*s+u*i*l-t*d*l-o*i*f+t*c*f)*R,e[8]=E*R,e[9]=(p*h*s-u*m*s-p*r*f+t*m*f+u*r*y-t*h*y)*R,e[10]=(o*m*s-p*a*s+p*r*l-t*m*l-o*r*y+t*a*y)*R,e[11]=(u*a*s-o*h*s-u*r*l+t*h*l+o*r*f-t*a*f)*R,e[12]=x*R,e[13]=(u*m*i-p*h*i+p*r*d-t*m*d-u*r*g+t*h*g)*R,e[14]=(p*a*i-o*m*i-p*r*c+t*m*c+o*r*g-t*a*g)*R,e[15]=(o*h*i-u*a*i+u*r*c-t*h*c-o*r*d+t*a*d)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+r,l*a-i*c,l*c+i*a,0,l*a+i*c,u*a+r,u*c-i*o,0,l*c-i*a,u*c+i*o,s*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,h=a+a,d=s*l,f=s*u,p=s*h,m=o*u,g=o*h,y=a*h,b=c*l,w=c*u,E=c*h,x=r.x,C=r.y,R=r.z;return i[0]=(1-(m+y))*x,i[1]=(f+E)*x,i[2]=(p-w)*x,i[3]=0,i[4]=(f-E)*C,i[5]=(1-(d+y))*C,i[6]=(g+b)*C,i[7]=0,i[8]=(p+w)*R,i[9]=(g-b)*R,i[10]=(1-(d+m))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=bp.set(i[0],i[1],i[2]).length();const o=bp.set(i[4],i[5],i[6]).length(),a=bp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Sa.copy(this);const l=1/s,u=1/o,h=1/a;return Sa.elements[0]*=l,Sa.elements[1]*=l,Sa.elements[2]*=l,Sa.elements[4]*=u,Sa.elements[5]*=u,Sa.elements[6]*=u,Sa.elements[8]*=h,Sa.elements[9]*=h,Sa.elements[10]*=h,t.setFromRotationMatrix(Sa),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=na){const c=this.elements,l=2*s/(t-e),u=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i);let f,p;if(a===na)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===X2)f=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=l,c[4]=0,c[8]=h,c[12]=0,c[1]=0,c[5]=u,c[9]=d,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=na){const c=this.elements,l=1/(t-e),u=1/(r-i),h=1/(o-s),d=(t+e)*l,f=(r+i)*u;let p,m;if(a===na)p=(o+s)*h,m=-2*h;else if(a===X2)p=s*h,m=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-d,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=m,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const bp=new ne,Sa=new jt,qDe=new ne(0,0,0),jDe=new ne(1,1,1),Pu=new ne,av=new ne,mo=new ne,aD=new jt,cD=new oo;class Po{constructor(e=0,t=0,r=0,i=Po.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],c=i[1],l=i[5],u=i[9],h=i[2],d=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(Zt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Zt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Zt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Zt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Zt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Zt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return aD.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aD,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return cD.setFromEuler(this),this.setFromQuaternion(cD,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Po.DEFAULT_ORDER="XYZ";class Wy{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let GDe=0;const lD=new ne,_p=new oo,gl=new jt,cv=new ne,um=new ne,KDe=new ne,YDe=new oo,uD=new ne(1,0,0),hD=new ne(0,1,0),dD=new ne(0,0,1),fD={type:"added"},XDe={type:"removed"},Ep={type:"childadded",child:null},$8={type:"childremoved",child:null};class bn extends Zc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:GDe++}),this.uuid=Mo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bn.DEFAULT_UP.clone();const e=new ne,t=new Po,r=new oo,i=new ne(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new jt},normalMatrix:{value:new Qt}}),this.matrix=new jt,this.matrixWorld=new jt,this.matrixAutoUpdate=bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Wy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _p.setFromAxisAngle(e,t),this.quaternion.multiply(_p),this}rotateOnWorldAxis(e,t){return _p.setFromAxisAngle(e,t),this.quaternion.premultiply(_p),this}rotateX(e){return this.rotateOnAxis(uD,e)}rotateY(e){return this.rotateOnAxis(hD,e)}rotateZ(e){return this.rotateOnAxis(dD,e)}translateOnAxis(e,t){return lD.copy(e).applyQuaternion(this.quaternion),this.position.add(lD.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(uD,e)}translateY(e){return this.translateOnAxis(hD,e)}translateZ(e){return this.translateOnAxis(dD,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(gl.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?cv.copy(e):cv.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),um.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gl.lookAt(um,cv,this.up):gl.lookAt(cv,um,this.up),this.quaternion.setFromRotationMatrix(gl),i&&(gl.extractRotation(i.matrixWorld),_p.setFromRotationMatrix(gl),this.quaternion.premultiply(_p.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(fD),Ep.child=e,this.dispatchEvent(Ep),Ep.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(XDe),$8.child=e,this.dispatchEvent($8),$8.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),gl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),gl.multiply(e.parent.matrixWorld)),e.applyMatrix4(gl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(fD),Ep.child=e,this.dispatchEvent(Ep),Ep.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(um,e,KDe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(um,YDe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(a=>({...a})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let l=0,u=c.length;l<u;l++){const h=c[l];s(e.shapes,h)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,l=this.material.length;c<l;c++)a.push(s(e.materials,this.material[c]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];i.animations.push(s(e.animations,c))}}if(t){const a=o(e.geometries),c=o(e.materials),l=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),c.length>0&&(r.materials=c),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const c=[];for(const l in a){const u=a[l];delete u.metadata,c.push(u)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}bn.DEFAULT_UP=new ne(0,1,0);bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Aa=new ne,yl=new ne,z8=new ne,wl=new ne,xp=new ne,Sp=new ne,pD=new ne,H8=new ne,V8=new ne,W8=new ne,q8=new Sn,j8=new Sn,G8=new Sn;class Zs{constructor(e=new ne,t=new ne,r=new ne){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Aa.subVectors(e,t),i.cross(Aa);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Aa.subVectors(i,t),yl.subVectors(r,t),z8.subVectors(e,t);const o=Aa.dot(Aa),a=Aa.dot(yl),c=Aa.dot(z8),l=yl.dot(yl),u=yl.dot(z8),h=o*l-a*a;if(h===0)return s.set(0,0,0),null;const d=1/h,f=(l*c-a*u)*d,p=(o*u-a*c)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,wl)===null?!1:wl.x>=0&&wl.y>=0&&wl.x+wl.y<=1}static getInterpolation(e,t,r,i,s,o,a,c){return this.getBarycoord(e,t,r,i,wl)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,wl.x),c.addScaledVector(o,wl.y),c.addScaledVector(a,wl.z),c)}static getInterpolatedAttribute(e,t,r,i,s,o){return q8.setScalar(0),j8.setScalar(0),G8.setScalar(0),q8.fromBufferAttribute(e,t),j8.fromBufferAttribute(e,r),G8.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(q8,s.x),o.addScaledVector(j8,s.y),o.addScaledVector(G8,s.z),o}static isFrontFacing(e,t,r,i){return Aa.subVectors(r,t),yl.subVectors(e,t),Aa.cross(yl).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Aa.subVectors(this.c,this.b),yl.subVectors(this.a,this.b),Aa.cross(yl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Zs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Zs.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Zs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;xp.subVectors(i,r),Sp.subVectors(s,r),H8.subVectors(e,r);const c=xp.dot(H8),l=Sp.dot(H8);if(c<=0&&l<=0)return t.copy(r);V8.subVectors(e,i);const u=xp.dot(V8),h=Sp.dot(V8);if(u>=0&&h<=u)return t.copy(i);const d=c*h-u*l;if(d<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(r).addScaledVector(xp,o);W8.subVectors(e,s);const f=xp.dot(W8),p=Sp.dot(W8);if(p>=0&&f<=p)return t.copy(s);const m=f*l-c*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(r).addScaledVector(Sp,a);const g=u*p-f*h;if(g<=0&&h-u>=0&&f-p>=0)return pD.subVectors(s,i),a=(h-u)/(h-u+(f-p)),t.copy(i).addScaledVector(pD,a);const y=1/(g+m+d);return o=m*y,a=d*y,t.copy(r).addScaledVector(xp,o).addScaledVector(Sp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Hj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Nu={h:0,s:0,l:0},lv={h:0,s:0,l:0};function K8(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ft{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=bs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,vn.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=vn.workingColorSpace){return this.r=e,this.g=t,this.b=r,vn.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=vn.workingColorSpace){if(e=vT(e,1),t=Zt(t,0,1),r=Zt(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=K8(o,s,e+1/3),this.g=K8(o,s,e),this.b=K8(o,s,e-1/3)}return vn.colorSpaceToWorking(this,i),this}setStyle(e,t=bs){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=bs){const r=Hj[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Wl(e.r),this.g=Wl(e.g),this.b=Wl(e.b),this}copyLinearToSRGB(e){return this.r=y0(e.r),this.g=y0(e.g),this.b=y0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=bs){return vn.workingToColorSpace(ts.copy(this),e),Math.round(Zt(ts.r*255,0,255))*65536+Math.round(Zt(ts.g*255,0,255))*256+Math.round(Zt(ts.b*255,0,255))}getHexString(e=bs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=vn.workingColorSpace){vn.workingToColorSpace(ts.copy(this),t);const r=ts.r,i=ts.g,s=ts.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let c,l;const u=(a+o)/2;if(a===o)c=0,l=0;else{const h=o-a;switch(l=u<=.5?h/(o+a):h/(2-o-a),o){case r:c=(i-s)/h+(i<s?6:0);break;case i:c=(s-r)/h+2;break;case s:c=(r-i)/h+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=vn.workingColorSpace){return vn.workingToColorSpace(ts.copy(this),t),e.r=ts.r,e.g=ts.g,e.b=ts.b,e}getStyle(e=bs){vn.workingToColorSpace(ts.copy(this),e);const t=ts.r,r=ts.g,i=ts.b;return e!==bs?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Nu),this.setHSL(Nu.h+e,Nu.s+t,Nu.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Nu),e.getHSL(lv);const r=Sg(Nu.h,lv.h,t),i=Sg(Nu.s,lv.s,t),s=Sg(Nu.l,lv.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ts=new ft;ft.NAMES=Hj;let ZDe=0;class fs extends Zc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ZDe++}),this.uuid=Mo(),this.name="",this.type="Material",this.blending=Zd,this.side=eu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Zb,this.blendDst=Jb,this.blendEquation=th,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ft(0,0,0),this.blendAlpha=0,this.depthFunc=wf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=oC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=gd,this.stencilZFail=gd,this.stencilZPass=gd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Zd&&(r.blending=this.blending),this.side!==eu&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Zb&&(r.blendSrc=this.blendSrc),this.blendDst!==Jb&&(r.blendDst=this.blendDst),this.blendEquation!==th&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==wf&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==oC&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==gd&&(r.stencilFail=this.stencilFail),this.stencilZFail!==gd&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==gd&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class cu extends fs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Po,this.combine=Hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ol=JDe();function JDe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const l=c-127;l<-27?(r[c]=0,r[c|256]=32768,i[c]=24,i[c|256]=24):l<-14?(r[c]=1024>>-l-14,r[c|256]=1024>>-l-14|32768,i[c]=-l-1,i[c|256]=-l-1):l<=15?(r[c]=l+15<<10,r[c|256]=l+15<<10|32768,i[c]=13,i[c|256]=13):l<128?(r[c]=31744,r[c|256]=64512,i[c]=24,i[c|256]=24):(r[c]=31744,r[c|256]=64512,i[c]=13,i[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,u=0;for(;(l&8388608)===0;)l<<=1,u-=8388608;l&=-8388609,u+=947912704,s[c]=l|u}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Ws(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Zt(n,-65504,65504),Ol.floatView[0]=n;const e=Ol.uint32View[0],t=e>>23&511;return Ol.baseTable[t]+((e&8388607)>>Ol.shiftTable[t])}function Bm(n){const e=n>>10;return Ol.uint32View[0]=Ol.mantissaTable[Ol.offsetTable[e]+(n&1023)]+Ol.exponentTable[e],Ol.floatView[0]}class QDe{static toHalfFloat(e){return Ws(e)}static fromHalfFloat(e){return Bm(e)}}const qr=new ne,uv=new Ue;let eLe=0;class Gn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:eLe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Y2,this.updateRanges=[],this.gpuType=to,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)uv.fromBufferAttribute(this,t),uv.applyMatrix3(e),this.setXY(t,uv.x,uv.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)qr.fromBufferAttribute(this,t),qr.applyMatrix3(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)qr.fromBufferAttribute(this,t),qr.applyMatrix4(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)qr.fromBufferAttribute(this,t),qr.applyNormalMatrix(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)qr.fromBufferAttribute(this,t),qr.transformDirection(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=xs(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=nn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=xs(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=xs(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=xs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=xs(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),r=nn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),r=nn(r,this.array),i=nn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),r=nn(r,this.array),i=nn(i,this.array),s=nn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Y2&&(e.usage=this.usage),e}}class tLe extends Gn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class nLe extends Gn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class rLe extends Gn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class iLe extends Gn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class ET extends Gn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class sLe extends Gn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class xT extends Gn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class oLe extends Gn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Bm(this.array[e*this.itemSize]);return this.normalized&&(t=xs(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=Ws(t),this}getY(e){let t=Bm(this.array[e*this.itemSize+1]);return this.normalized&&(t=xs(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=Ws(t),this}getZ(e){let t=Bm(this.array[e*this.itemSize+2]);return this.normalized&&(t=xs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=Ws(t),this}getW(e){let t=Bm(this.array[e*this.itemSize+3]);return this.normalized&&(t=xs(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=Ws(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),r=nn(r,this.array)),this.array[e+0]=Ws(t),this.array[e+1]=Ws(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),r=nn(r,this.array),i=nn(i,this.array)),this.array[e+0]=Ws(t),this.array[e+1]=Ws(r),this.array[e+2]=Ws(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),r=nn(r,this.array),i=nn(i,this.array),s=nn(s,this.array)),this.array[e+0]=Ws(t),this.array[e+1]=Ws(r),this.array[e+2]=Ws(i),this.array[e+3]=Ws(s),this}}class It extends Gn{constructor(e,t,r){super(new Float32Array(e),t,r)}}let aLe=0;const Wo=new jt,Y8=new bn,Ap=new ne,go=new us,hm=new us,fi=new ne;class on extends Zc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:aLe++}),this.uuid=Mo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Fj(e)?xT:ET)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Qt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Wo.makeRotationFromQuaternion(e),this.applyMatrix4(Wo),this}rotateX(e){return Wo.makeRotationX(e),this.applyMatrix4(Wo),this}rotateY(e){return Wo.makeRotationY(e),this.applyMatrix4(Wo),this}rotateZ(e){return Wo.makeRotationZ(e),this.applyMatrix4(Wo),this}translate(e,t,r){return Wo.makeTranslation(e,t,r),this.applyMatrix4(Wo),this}scale(e,t,r){return Wo.makeScale(e,t,r),this.applyMatrix4(Wo),this}lookAt(e){return Y8.lookAt(e),Y8.updateMatrix(),this.applyMatrix4(Y8.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ap).negate(),this.translate(Ap.x,Ap.y,Ap.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new It(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new us);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ne(-1/0,-1/0,-1/0),new ne(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];go.setFromBufferAttribute(s),this.morphTargetsRelative?(fi.addVectors(this.boundingBox.min,go.min),this.boundingBox.expandByPoint(fi),fi.addVectors(this.boundingBox.max,go.max),this.boundingBox.expandByPoint(fi)):(this.boundingBox.expandByPoint(go.min),this.boundingBox.expandByPoint(go.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ne,1/0);return}if(e){const r=this.boundingSphere.center;if(go.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];hm.setFromBufferAttribute(a),this.morphTargetsRelative?(fi.addVectors(go.min,hm.min),go.expandByPoint(fi),fi.addVectors(go.max,hm.max),go.expandByPoint(fi)):(go.expandByPoint(hm.min),go.expandByPoint(hm.max))}go.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)fi.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(fi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)fi.fromBufferAttribute(a,l),c&&(Ap.fromBufferAttribute(e,l),fi.add(Ap)),i=Math.max(i,r.distanceToSquared(fi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gn(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],c=[];for(let k=0;k<r.count;k++)a[k]=new ne,c[k]=new ne;const l=new ne,u=new ne,h=new ne,d=new Ue,f=new Ue,p=new Ue,m=new ne,g=new ne;function y(k,_,A){l.fromBufferAttribute(r,k),u.fromBufferAttribute(r,_),h.fromBufferAttribute(r,A),d.fromBufferAttribute(s,k),f.fromBufferAttribute(s,_),p.fromBufferAttribute(s,A),u.sub(l),h.sub(l),f.sub(d),p.sub(d);const M=1/(f.x*p.y-p.x*f.y);isFinite(M)&&(m.copy(u).multiplyScalar(p.y).addScaledVector(h,-f.y).multiplyScalar(M),g.copy(h).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(M),a[k].add(m),a[_].add(m),a[A].add(m),c[k].add(g),c[_].add(g),c[A].add(g))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let k=0,_=b.length;k<_;++k){const A=b[k],M=A.start,D=A.count;for(let P=M,v=M+D;P<v;P+=3)y(e.getX(P+0),e.getX(P+1),e.getX(P+2))}const w=new ne,E=new ne,x=new ne,C=new ne;function R(k){x.fromBufferAttribute(i,k),C.copy(x);const _=a[k];w.copy(_),w.sub(x.multiplyScalar(x.dot(_))).normalize(),E.crossVectors(C,_);const M=E.dot(c[k])<0?-1:1;o.setXYZW(k,w.x,w.y,w.z,M)}for(let k=0,_=b.length;k<_;++k){const A=b[k],M=A.start,D=A.count;for(let P=M,v=M+D;P<v;P+=3)R(e.getX(P+0)),R(e.getX(P+1)),R(e.getX(P+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Gn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);const i=new ne,s=new ne,o=new ne,a=new ne,c=new ne,l=new ne,u=new ne,h=new ne;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),a.fromBufferAttribute(r,p),c.fromBufferAttribute(r,m),l.fromBufferAttribute(r,g),a.add(u),c.add(u),l.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(m,c.x,c.y,c.z),r.setXYZ(g,l.x,l.y,l.z)}else for(let d=0,f=t.count;d<f;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)fi.fromBufferAttribute(e,t),fi.normalize(),e.setXYZ(t,fi.x,fi.y,fi.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,h=a.normalized,d=new l.constructor(c.length*u);let f=0,p=0;for(let m=0,g=c.length;m<g;m++){a.isInterleavedBufferAttribute?f=c[m]*a.data.stride+a.offset:f=c[m]*u;for(let y=0;y<u;y++)d[p++]=l[f++]}return new Gn(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new on,r=this.index.array,i=this.attributes;for(const a in i){const c=i[a],l=e(c,r);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,h=l.length;u<h;u++){const d=l[u],f=e(d,r);c.push(f)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const c in r){const l=r[c];e.data.attributes[c]=l.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let h=0,d=l.length;h<d;h++){const f=l[h];u.push(f.toJSON(e.data))}u.length>0&&(i[c]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const l in i){const u=i[l];this.setAttribute(l,u.clone(t))}const s=e.morphAttributes;for(const l in s){const u=[],h=s[l];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const h=o[l];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const mD=new jt,ed=new g1,hv=new Fi,gD=new ne,dv=new ne,fv=new ne,pv=new ne,X8=new ne,mv=new ne,yD=new ne,gv=new ne;class Vr extends bn{constructor(e=new on,t=new cu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){mv.set(0,0,0);for(let c=0,l=s.length;c<l;c++){const u=a[c],h=s[c];u!==0&&(X8.fromBufferAttribute(h,e),o?mv.addScaledVector(X8,u):mv.addScaledVector(X8.sub(t),u))}t.add(mv)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),hv.copy(r.boundingSphere),hv.applyMatrix4(s),ed.copy(e.ray).recast(e.near),!(hv.containsPoint(ed.origin)===!1&&(ed.intersectSphere(hv,gD)===null||ed.origin.distanceToSquared(gD)>(e.far-e.near)**2))&&(mD.copy(s).invert(),ed.copy(e.ray).applyMatrix4(mD),!(r.boundingBox!==null&&ed.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,ed)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,m=d.length;p<m;p++){const g=d[p],y=o[g.materialIndex],b=Math.max(g.start,f.start),w=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let E=b,x=w;E<x;E+=3){const C=a.getX(E),R=a.getX(E+1),k=a.getX(E+2);i=yv(this,y,e,r,l,u,h,C,R,k),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),m=Math.min(a.count,f.start+f.count);for(let g=p,y=m;g<y;g+=3){const b=a.getX(g),w=a.getX(g+1),E=a.getX(g+2);i=yv(this,o,e,r,l,u,h,b,w,E),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(o))for(let p=0,m=d.length;p<m;p++){const g=d[p],y=o[g.materialIndex],b=Math.max(g.start,f.start),w=Math.min(c.count,Math.min(g.start+g.count,f.start+f.count));for(let E=b,x=w;E<x;E+=3){const C=E,R=E+1,k=E+2;i=yv(this,y,e,r,l,u,h,C,R,k),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),m=Math.min(c.count,f.start+f.count);for(let g=p,y=m;g<y;g+=3){const b=g,w=g+1,E=g+2;i=yv(this,o,e,r,l,u,h,b,w,E),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}}}function cLe(n,e,t,r,i,s,o,a){let c;if(e.side===Is?c=r.intersectTriangle(o,s,i,!0,a):c=r.intersectTriangle(i,s,o,e.side===eu,a),c===null)return null;gv.copy(a),gv.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(gv);return l<t.near||l>t.far?null:{distance:l,point:gv.clone(),object:n}}function yv(n,e,t,r,i,s,o,a,c,l){n.getVertexPosition(a,dv),n.getVertexPosition(c,fv),n.getVertexPosition(l,pv);const u=cLe(n,e,t,r,dv,fv,pv,yD);if(u){const h=new ne;Zs.getBarycoord(yD,dv,fv,pv,h),i&&(u.uv=Zs.getInterpolatedAttribute(i,a,c,l,h,new Ue)),s&&(u.uv1=Zs.getInterpolatedAttribute(s,a,c,l,h,new Ue)),o&&(u.normal=Zs.getInterpolatedAttribute(o,a,c,l,h,new ne),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:c,c:l,normal:new ne,materialIndex:0};Zs.getNormal(dv,fv,pv,d.normal),u.face=d,u.barycoord=h}return u}class Ff extends on{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,r,t,e,o,s,0),p("z","y","x",1,-1,r,t,-e,o,s,1),p("x","z","y",1,1,e,r,t,i,o,2),p("x","z","y",1,-1,e,r,-t,i,o,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new It(l,3)),this.setAttribute("normal",new It(u,3)),this.setAttribute("uv",new It(h,2));function p(m,g,y,b,w,E,x,C,R,k,_){const A=E/R,M=x/k,D=E/2,P=x/2,v=C/2,S=R+1,T=k+1;let L=0,U=0;const V=new ne;for(let W=0;W<T;W++){const F=W*M-P;for(let I=0;I<S;I++){const N=I*A-D;V[m]=N*b,V[g]=F*w,V[y]=v,l.push(V.x,V.y,V.z),V[m]=0,V[g]=0,V[y]=C>0?1:-1,u.push(V.x,V.y,V.z),h.push(I/R),h.push(1-W/k),L+=1}}for(let W=0;W<k;W++)for(let F=0;F<R;F++){const I=d+F+S*W,N=d+F+S*(W+1),$=d+(F+1)+S*(W+1),j=d+(F+1)+S*W;c.push(I,N,j),c.push(N,$,j),U+=6}a.addGroup(f,U,_),f+=U,d+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ff(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function q0(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function ws(n){const e={};for(let t=0;t<n.length;t++){const r=q0(n[t]);for(const i in r)e[i]=r[i]}return e}function lLe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Vj(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:vn.workingColorSpace}const Wj={clone:q0,merge:ws};var uLe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hLe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Qa extends fs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=uLe,this.fragmentShader=hLe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=q0(e.uniforms),this.uniformsGroups=lLe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class qy extends bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new jt,this.projectionMatrix=new jt,this.projectionMatrixInverse=new jt,this.coordinateSystem=na}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ou=new ne,wD=new Ue,vD=new Ue;class Gr extends qy{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=W0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Jd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return W0*2*Math.atan(Math.tan(Jd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Ou.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ou.x,Ou.y).multiplyScalar(-e/Ou.z),Ou.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Ou.x,Ou.y).multiplyScalar(-e/Ou.z)}getViewSize(e,t){return this.getViewBounds(e,wD,vD),t.subVectors(vD,wD)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Jd*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*i/c,t-=o.offsetY*r/l,i*=o.width/c,r*=o.height/l}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Cp=-90,Tp=1;class qj extends bn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Gr(Cp,Tp,e,t);i.layers=this.layers,this.add(i);const s=new Gr(Cp,Tp,e,t);s.layers=this.layers,this.add(s);const o=new Gr(Cp,Tp,e,t);o.layers=this.layers,this.add(o);const a=new Gr(Cp,Tp,e,t);a.layers=this.layers,this.add(a);const c=new Gr(Cp,Tp,e,t);c.layers=this.layers,this.add(c);const l=new Gr(Cp,Tp,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,c]=t;for(const l of t)this.remove(l);if(e===na)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===X2)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,l,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,c),e.setRenderTarget(r,4,i),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(h,d,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class jy extends kr{constructor(e=[],t=tu,r,i,s,o,a,c,l,u){super(e,t,r,i,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class jj extends jc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new jy(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ff(5,5,5),s=new Qa({name:"CubemapFromEquirect",uniforms:q0(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Is,blending:Vl});s.uniforms.tEquirect.value=t;const o=new Vr(i,s),a=t.minFilter;return t.minFilter===Mc&&(t.minFilter=oi),new qj(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class Qp extends bn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const dLe={type:"move"};class O3{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Qp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Qp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Qp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ne),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,r),y=this._getHandJoint(l,m);g!==null&&(y.matrix.fromArray(g.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=g.radius),y.visible=g!==null}const u=l.joints["index-finger-tip"],h=l.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,p=.005;l.inputState.pinching&&d>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&d<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(dLe)))}return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=s!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Qp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class k4{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ft(e),this.density=t}clone(){return new k4(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class D4{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new ft(e),this.near=t,this.far=r}clone(){return new D4(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class L4 extends bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Po,this.environmentIntensity=1,this.environmentRotation=new Po,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class U4{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Y2,this.updateRanges=[],this.version=0,this.uuid=Mo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const gs=new ne;class bf{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)gs.fromBufferAttribute(this,t),gs.applyMatrix4(e),this.setXYZ(t,gs.x,gs.y,gs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)gs.fromBufferAttribute(this,t),gs.applyNormalMatrix(e),this.setXYZ(t,gs.x,gs.y,gs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)gs.fromBufferAttribute(this,t),gs.transformDirection(e),this.setXYZ(t,gs.x,gs.y,gs.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=xs(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=nn(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=xs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=xs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=xs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=xs(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),r=nn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),r=nn(r,this.array),i=nn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),r=nn(r,this.array),i=nn(i,this.array),s=nn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Gn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new bf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ST extends fs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ip;const dm=new ne,Mp=new ne,Rp=new ne,Pp=new Ue,fm=new Ue,Gj=new jt,wv=new ne,pm=new ne,vv=new ne,bD=new Ue,Z8=new Ue,_D=new Ue;class Kj extends bn{constructor(e=new ST){if(super(),this.isSprite=!0,this.type="Sprite",Ip===void 0){Ip=new on;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new U4(t,5);Ip.setIndex([0,1,2,0,2,3]),Ip.setAttribute("position",new bf(r,3,0,!1)),Ip.setAttribute("uv",new bf(r,2,3,!1))}this.geometry=Ip,this.material=e,this.center=new Ue(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Mp.setFromMatrixScale(this.matrixWorld),Gj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Mp.multiplyScalar(-Rp.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;bv(wv.set(-.5,-.5,0),Rp,o,Mp,i,s),bv(pm.set(.5,-.5,0),Rp,o,Mp,i,s),bv(vv.set(.5,.5,0),Rp,o,Mp,i,s),bD.set(0,0),Z8.set(1,0),_D.set(1,1);let a=e.ray.intersectTriangle(wv,pm,vv,!1,dm);if(a===null&&(bv(pm.set(-.5,.5,0),Rp,o,Mp,i,s),Z8.set(0,1),a=e.ray.intersectTriangle(wv,vv,pm,!1,dm),a===null))return;const c=e.ray.origin.distanceTo(dm);c<e.near||c>e.far||t.push({distance:c,point:dm.clone(),uv:Zs.getInterpolation(dm,wv,pm,vv,bD,Z8,_D,new Ue),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function bv(n,e,t,r,i,s){Pp.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(fm.x=s*Pp.x-i*Pp.y,fm.y=i*Pp.x+s*Pp.y):fm.copy(Pp),n.copy(e),n.x+=fm.x,n.y+=fm.y,n.applyMatrix4(Gj)}const _v=new ne,ED=new ne;class Yj extends bn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){_v.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(_v);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){_v.setFromMatrixPosition(e.matrixWorld),ED.setFromMatrixPosition(this.matrixWorld);const r=_v.distanceTo(ED)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const xD=new ne,SD=new Sn,AD=new Sn,fLe=new ne,CD=new jt,Ev=new ne,J8=new Fi,TD=new jt,Q8=new g1;class Xj extends Vr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=sC,this.bindMatrix=new jt,this.bindMatrixInverse=new jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new us),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ev),this.boundingBox.expandByPoint(Ev)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ev),this.boundingSphere.expandByPoint(Ev)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),J8.copy(this.boundingSphere),J8.applyMatrix4(i),e.ray.intersectsSphere(J8)!==!1&&(TD.copy(i).invert(),Q8.copy(e.ray).applyMatrix4(TD),!(this.boundingBox!==null&&Q8.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Q8)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Sn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===sC?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Aj?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;SD.fromBufferAttribute(i.attributes.skinIndex,e),AD.fromBufferAttribute(i.attributes.skinWeight,e),xD.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=AD.getComponent(s);if(o!==0){const a=SD.getComponent(s);CD.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(fLe.copy(xD).applyMatrix4(CD),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class AT extends bn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Lc extends kr{constructor(e=null,t=1,r=1,i,s,o,a,c,l=Bi,u=Bi,h,d){super(null,o,a,c,l,u,i,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ID=new jt,pLe=new jt;class B4{constructor(e=[],t=[]){this.uuid=Mo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new jt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:pLe;ID.multiplyMatrices(a,t[s]),ID.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new B4(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Lc(t,e,e,Ss,to);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new AT),this.bones.push(o),this.boneInverses.push(new jt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class j0 extends Gn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Np=new jt,MD=new jt,xv=[],RD=new us,mLe=new jt,mm=new Vr,gm=new Fi;class Zj extends Vr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new j0(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,mLe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new us),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Np),RD.copy(e.boundingBox).applyMatrix4(Np),this.boundingBox.union(RD)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Np),gm.copy(e.boundingSphere).applyMatrix4(Np),this.boundingSphere.union(gm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(mm.geometry=this.geometry,mm.material=this.material,mm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gm.copy(this.boundingSphere),gm.applyMatrix4(r),e.ray.intersectsSphere(gm)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Np),MD.multiplyMatrices(r,Np),mm.matrixWorld=MD,mm.raycast(e,xv);for(let o=0,a=xv.length;o<a;o++){const c=xv[o];c.instanceId=s,c.object=this,t.push(c)}xv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new j0(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Lc(new Float32Array(i*this.count),i,this.count,I4,to));const s=this.morphTexture.source.data.data;let o=0;for(let l=0;l<r.length;l++)o+=r[l];const a=this.geometry.morphTargetsRelative?1:1-o,c=i*e;s[c]=a,s.set(r,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const ex=new ne,gLe=new ne,yLe=new Qt;class Yu{constructor(e=new ne(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=ex.subVectors(r,t).cross(gLe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(ex),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||yLe.getNormalMatrix(e),i=this.coplanarPoint(ex).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const td=new Fi,Sv=new ne;class y1{constructor(e=new Yu,t=new Yu,r=new Yu,i=new Yu,s=new Yu,o=new Yu){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=na){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],c=i[3],l=i[4],u=i[5],h=i[6],d=i[7],f=i[8],p=i[9],m=i[10],g=i[11],y=i[12],b=i[13],w=i[14],E=i[15];if(r[0].setComponents(c-s,d-l,g-f,E-y).normalize(),r[1].setComponents(c+s,d+l,g+f,E+y).normalize(),r[2].setComponents(c+o,d+u,g+p,E+b).normalize(),r[3].setComponents(c-o,d-u,g-p,E-b).normalize(),r[4].setComponents(c-a,d-h,g-m,E-w).normalize(),t===na)r[5].setComponents(c+a,d+h,g+m,E+w).normalize();else if(t===X2)r[5].setComponents(a,h,m,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),td.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),td.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(td)}intersectsSprite(e){return td.center.set(0,0,0),td.radius=.7071067811865476,td.applyMatrix4(e.matrixWorld),this.intersectsSphere(td)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Sv.x=i.normal.x>0?e.max.x:e.min.x,Sv.y=i.normal.y>0?e.max.y:e.min.y,Sv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Sv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const pc=new jt,mc=new y1;class F4{constructor(){this.coordinateSystem=na}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(pc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),mc.setFromProjectionMatrix(pc,this.coordinateSystem),mc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(pc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),mc.setFromProjectionMatrix(pc,this.coordinateSystem),mc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(pc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),mc.setFromProjectionMatrix(pc,this.coordinateSystem),mc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(pc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),mc.setFromProjectionMatrix(pc,this.coordinateSystem),mc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let r=0;r<t.cameras.length;r++){const i=t.cameras[r];if(pc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),mc.setFromProjectionMatrix(pc,this.coordinateSystem),mc.containsPoint(e))return!0}return!1}clone(){return new F4}}function tx(n,e){return n-e}function wLe(n,e){return n.z-e.z}function vLe(n,e){return e.z-n.z}class bLe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Vs=new jt,_Le=new ft(1,1,1),PD=new y1,ELe=new F4,Av=new us,nd=new Fi,ym=new ne,ND=new ne,xLe=new ne,nx=new bLe,ns=new Vr,Cv=[];function SLe(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function rd(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class Jj extends Vr{constructor(e,t,r=t*2,i){super(new on,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Lc(t,e,e,Ss,to);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new Lc(t,e,e,Vy,nu);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Lc(t,e,e,Ss,to);r.colorSpace=vn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:c,normalized:l}=o,u=new a.constructor(r*c),h=new Gn(u,c,l);t.setAttribute(s,h)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Gn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new us);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Vs),this.getBoundingBoxAt(s,Av).applyMatrix4(Vs),e.union(Av)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Vs),this.getBoundingSphereAt(s,nd).applyMatrix4(Vs),e.union(nd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(tx),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Vs.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(_Le.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(tx),c=this._availableGeometryIds.shift(),s[c]=i):(c=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(c,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=a.vertexStart,l=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in r.attributes){const h=t.getAttribute(u),d=r.getAttribute(u);SLe(h,d,c);const f=h.itemSize;for(let p=h.count,m=l;p<m;p++){const g=c+p;for(let y=0;y<f;y++)d.setComponent(g,y,0)}d.needsUpdate=!0,d.addUpdateRange(c*f,l*f)}if(i){const u=a.indexStart,h=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let d=0;d<o.count;d++)s.setX(u+d,c+o.getX(d));for(let d=o.count,f=h;d<f;d++)s.setX(u+d,c);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const c=i[o],l=r[c];if(l.active!==!1){if(s.index!==null){if(l.indexStart!==t){const{indexStart:u,vertexStart:h,reservedIndexCount:d}=l,f=s.index,p=f.array,m=e-h;for(let g=u;g<u+d;g++)p[g]=p[g]+m;f.array.copyWithin(t,u,u+d),f.addUpdateRange(t,d),l.indexStart=t}t+=l.reservedIndexCount}if(l.vertexStart!==e){const{vertexStart:u,reservedVertexCount:h}=l,d=s.attributes;for(const f in d){const p=d[f],{array:m,itemSize:g}=p;m.copyWithin(e*g,u*g,(u+h)*g),p.addUpdateRange(e*g,h*g)}l.vertexStart=e}e+=l.reservedVertexCount,l.start=s.index?l.indexStart:l.vertexStart,this._nextIndexStart=s.index?l.indexStart+l.reservedIndexCount:0,this._nextVertexStart=l.vertexStart+l.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new us,o=r.index,a=r.attributes.position;for(let c=i.start,l=i.start+i.count;c<l;c++){let u=c;o&&(u=o.getX(u)),s.expandByPoint(ym.fromBufferAttribute(a,u))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new Fi;this.getBoundingBoxAt(e,Av),Av.getCenter(s.center);const o=r.index,a=r.attributes.position;let c=0;for(let l=i.start,u=i.start+i.count;l<u;l++){let h=l;o&&(h=o.getX(h)),ym.fromBufferAttribute(a,h),c=Math.max(c,s.center.distanceToSquared(ym))}s.radius=Math.sqrt(c),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(tx);t[t.length-1]===r.length;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);rd(this._multiDrawCounts,i),rd(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,c=this._colorsTexture;o.dispose(),this._initIndirectTexture(),rd(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),rd(a.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),rd(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new on,this._initializeGeometry(s));const o=this.geometry;s.index&&rd(s.index.array,o.index.array);for(const a in s.attributes)rd(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;ns.material=this.material,ns.geometry.index=o.index,ns.geometry.attributes=o.attributes,ns.geometry.boundingBox===null&&(ns.geometry.boundingBox=new us),ns.geometry.boundingSphere===null&&(ns.geometry.boundingSphere=new Fi);for(let a=0,c=r.length;a<c;a++){if(!r[a].visible||!r[a].active)continue;const l=r[a].geometryIndex,u=i[l];ns.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,ns.matrixWorld).premultiply(s),this.getBoundingBoxAt(l,ns.geometry.boundingBox),this.getBoundingSphereAt(l,ns.geometry.boundingSphere),ns.raycast(e,Cv);for(let h=0,d=Cv.length;h<d;h++){const f=Cv[h];f.object=this,f.batchId=a,t.push(f)}Cv.length=0}ns.material=null,ns.geometry.index=null,ns.geometry.attributes={},ns.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._instanceInfo,l=this._multiDrawStarts,u=this._multiDrawCounts,h=this._geometryInfo,d=this.perObjectFrustumCulled,f=this._indirectTexture,p=f.image.data,m=r.isArrayCamera?ELe:PD;d&&!r.isArrayCamera&&(Vs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),PD.setFromProjectionMatrix(Vs,e.coordinateSystem));let g=0;if(this.sortObjects){Vs.copy(this.matrixWorld).invert(),ym.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Vs),ND.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Vs);for(let w=0,E=c.length;w<E;w++)if(c[w].visible&&c[w].active){const x=c[w].geometryIndex;this.getMatrixAt(w,Vs),this.getBoundingSphereAt(x,nd).applyMatrix4(Vs);let C=!1;if(d&&(C=!m.intersectsSphere(nd,r)),!C){const R=h[x],k=xLe.subVectors(nd.center,ym).dot(ND);nx.push(R.start,R.count,k,w)}}const y=nx.list,b=this.customSort;b===null?y.sort(s.transparent?vLe:wLe):b.call(this,y,r);for(let w=0,E=y.length;w<E;w++){const x=y[w];l[g]=x.start*a,u[g]=x.count,p[g]=x.index,g++}nx.reset()}else for(let y=0,b=c.length;y<b;y++)if(c[y].visible&&c[y].active){const w=c[y].geometryIndex;let E=!1;if(d&&(this.getMatrixAt(y,Vs),this.getBoundingSphereAt(w,nd).applyMatrix4(Vs),E=!m.intersectsSphere(nd,r)),!E){const x=h[w];l[g]=x.start*a,u[g]=x.count,p[g]=y,g++}}f.needsUpdate=!0,this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Os extends fs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ft(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const O_=new ne,k_=new ne,OD=new jt,wm=new g1,Tv=new Fi,rx=new ne,kD=new ne;class Oh extends bn{constructor(e=new on,t=new Os){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)O_.fromBufferAttribute(t,i-1),k_.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=O_.distanceTo(k_);e.setAttribute("lineDistance",new It(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Tv.copy(r.boundingSphere),Tv.applyMatrix4(i),Tv.radius+=s,e.ray.intersectsSphere(Tv)===!1)return;OD.copy(i).invert(),wm.copy(e.ray).applyMatrix4(OD);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,u=r.index,d=r.attributes.position;if(u!==null){const f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let m=f,g=p-1;m<g;m+=l){const y=u.getX(m),b=u.getX(m+1),w=Iv(this,e,wm,c,y,b,m);w&&t.push(w)}if(this.isLineLoop){const m=u.getX(p-1),g=u.getX(f),y=Iv(this,e,wm,c,m,g,p-1);y&&t.push(y)}}else{const f=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);for(let m=f,g=p-1;m<g;m+=l){const y=Iv(this,e,wm,c,m,m+1,m);y&&t.push(y)}if(this.isLineLoop){const m=Iv(this,e,wm,c,p-1,f,p-1);m&&t.push(m)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Iv(n,e,t,r,i,s,o){const a=n.geometry.attributes.position;if(O_.fromBufferAttribute(a,i),k_.fromBufferAttribute(a,s),t.distanceSqToSegment(O_,k_,rx,kD)>r)return;rx.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(rx);if(!(l<e.near||l>e.far))return{distance:l,point:kD.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const DD=new ne,LD=new ne;class Jc extends Oh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)DD.fromBufferAttribute(t,i),LD.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+DD.distanceTo(LD);e.setAttribute("lineDistance",new It(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Qj extends Oh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class CT extends fs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const UD=new jt,cC=new g1,Mv=new Fi,Rv=new ne;class eG extends bn{constructor(e=new on,t=new CT){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Mv.copy(r.boundingSphere),Mv.applyMatrix4(i),Mv.radius+=s,e.ray.intersectsSphere(Mv)===!1)return;UD.copy(i).invert(),cC.copy(e.ray).applyMatrix4(UD);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=r.index,h=r.attributes.position;if(l!==null){const d=Math.max(0,o.start),f=Math.min(l.count,o.start+o.count);for(let p=d,m=f;p<m;p++){const g=l.getX(p);Rv.fromBufferAttribute(h,g),BD(Rv,g,c,i,e,t,this)}}else{const d=Math.max(0,o.start),f=Math.min(h.count,o.start+o.count);for(let p=d,m=f;p<m;p++)Rv.fromBufferAttribute(h,p),BD(Rv,p,c,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function BD(n,e,t,r,i,s,o){const a=cC.distanceSqToPoint(n);if(a<t){const c=new ne;cC.closestPointToPoint(n,c),c.applyMatrix4(r);const l=i.ray.origin.distanceTo(c);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class tG extends kr{constructor(e,t,r,i,s=oi,o=oi,a,c,l){super(e,t,r,i,s,o,a,c,l),this.isVideoTexture=!0,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ALe extends tG{constructor(e,t,r,i,s,o,a,c){super({},e,t,r,i,s,o,a,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class CLe extends kr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Bi,this.minFilter=Bi,this.generateMipmaps=!1,this.needsUpdate=!0}}class $4 extends kr{constructor(e,t,r,i,s,o,a,c,l,u,h,d){super(null,o,a,c,l,u,i,s,h,d),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class TLe extends $4{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ta,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ILe extends $4{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,tu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class MLe extends kr{constructor(e,t,r,i,s,o,a,c,l){super(e,t,r,i,s,o,a,c,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class TT extends kr{constructor(e,t,r=nu,i,s,o,a=Bi,c=Bi,l,u=H0,h=1){if(u!==H0&&u!==V0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const d={width:e,height:t,depth:h};super(d,i,s,o,a,c,u,r,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new oh(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class z4 extends on{constructor(e=1,t=1,r=4,i=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i,heightSegments:s},t=Math.max(0,t),r=Math.max(1,Math.floor(r)),i=Math.max(3,Math.floor(i)),s=Math.max(1,Math.floor(s));const o=[],a=[],c=[],l=[],u=t/2,h=Math.PI/2*e,d=t,f=2*h+d,p=r*2+s,m=i+1,g=new ne,y=new ne;for(let b=0;b<=p;b++){let w=0,E=0,x=0,C=0;if(b<=r){const _=b/r,A=_*Math.PI/2;E=-u-e*Math.cos(A),x=e*Math.sin(A),C=-e*Math.cos(A),w=_*h}else if(b<=r+s){const _=(b-r)/s;E=-u+_*t,x=e,C=0,w=h+_*d}else{const _=(b-r-s)/r,A=_*Math.PI/2;E=u+e*Math.sin(A),x=e*Math.cos(A),C=e*Math.sin(A),w=h+d+_*h}const R=Math.max(0,Math.min(1,w/f));let k=0;b===0?k=.5/i:b===p&&(k=-.5/i);for(let _=0;_<=i;_++){const A=_/i,M=A*Math.PI*2,D=Math.sin(M),P=Math.cos(M);y.x=-x*P,y.y=E,y.z=x*D,a.push(y.x,y.y,y.z),g.set(-x*P,C,x*D),g.normalize(),c.push(g.x,g.y,g.z),l.push(A+k,R)}if(b>0){const _=(b-1)*m;for(let A=0;A<i;A++){const M=_+A,D=_+A+1,P=b*m+A,v=b*m+A+1;o.push(M,D,P),o.push(D,v,P)}}}this.setIndex(o),this.setAttribute("position",new It(a,3)),this.setAttribute("normal",new It(c,3)),this.setAttribute("uv",new It(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z4(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class H4 extends on{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],c=[],l=new ne,u=new Ue;o.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const f=r+h/t*i;l.x=e*Math.cos(f),l.y=e*Math.sin(f),o.push(l.x,l.y,l.z),a.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,c.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new It(o,3)),this.setAttribute("normal",new It(a,3)),this.setAttribute("uv",new It(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H4(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Gy extends on{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c};const l=this;i=Math.floor(i),s=Math.floor(s);const u=[],h=[],d=[],f=[];let p=0;const m=[],g=r/2;let y=0;b(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new It(h,3)),this.setAttribute("normal",new It(d,3)),this.setAttribute("uv",new It(f,2));function b(){const E=new ne,x=new ne;let C=0;const R=(t-e)/r;for(let k=0;k<=s;k++){const _=[],A=k/s,M=A*(t-e)+e;for(let D=0;D<=i;D++){const P=D/i,v=P*c+a,S=Math.sin(v),T=Math.cos(v);x.x=M*S,x.y=-A*r+g,x.z=M*T,h.push(x.x,x.y,x.z),E.set(S,R,T).normalize(),d.push(E.x,E.y,E.z),f.push(P,1-A),_.push(p++)}m.push(_)}for(let k=0;k<i;k++)for(let _=0;_<s;_++){const A=m[_][k],M=m[_+1][k],D=m[_+1][k+1],P=m[_][k+1];(e>0||_!==0)&&(u.push(A,M,P),C+=3),(t>0||_!==s-1)&&(u.push(M,D,P),C+=3)}l.addGroup(y,C,0),y+=C}function w(E){const x=p,C=new Ue,R=new ne;let k=0;const _=E===!0?e:t,A=E===!0?1:-1;for(let D=1;D<=i;D++)h.push(0,g*A,0),d.push(0,A,0),f.push(.5,.5),p++;const M=p;for(let D=0;D<=i;D++){const v=D/i*c+a,S=Math.cos(v),T=Math.sin(v);R.x=_*T,R.y=g*A,R.z=_*S,h.push(R.x,R.y,R.z),d.push(0,A,0),C.x=S*.5+.5,C.y=T*.5*A+.5,f.push(C.x,C.y),p++}for(let D=0;D<i;D++){const P=x+D,v=M+D;E===!0?u.push(v,v+1,P):u.push(v+1,v,P),k+=3}l.addGroup(y,k,E===!0?1:2),y+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gy(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ky extends Gy{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Ky(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bh extends on{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),l(r),u(),this.setAttribute("position",new It(s,3)),this.setAttribute("normal",new It(s.slice(),3)),this.setAttribute("uv",new It(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const w=new ne,E=new ne,x=new ne;for(let C=0;C<t.length;C+=3)f(t[C+0],w),f(t[C+1],E),f(t[C+2],x),c(w,E,x,b)}function c(b,w,E,x){const C=x+1,R=[];for(let k=0;k<=C;k++){R[k]=[];const _=b.clone().lerp(E,k/C),A=w.clone().lerp(E,k/C),M=C-k;for(let D=0;D<=M;D++)D===0&&k===C?R[k][D]=_:R[k][D]=_.clone().lerp(A,D/M)}for(let k=0;k<C;k++)for(let _=0;_<2*(C-k)-1;_++){const A=Math.floor(_/2);_%2===0?(d(R[k][A+1]),d(R[k+1][A]),d(R[k][A])):(d(R[k][A+1]),d(R[k+1][A+1]),d(R[k+1][A]))}}function l(b){const w=new ne;for(let E=0;E<s.length;E+=3)w.x=s[E+0],w.y=s[E+1],w.z=s[E+2],w.normalize().multiplyScalar(b),s[E+0]=w.x,s[E+1]=w.y,s[E+2]=w.z}function u(){const b=new ne;for(let w=0;w<s.length;w+=3){b.x=s[w+0],b.y=s[w+1],b.z=s[w+2];const E=g(b)/2/Math.PI+.5,x=y(b)/Math.PI+.5;o.push(E,1-x)}p(),h()}function h(){for(let b=0;b<o.length;b+=6){const w=o[b+0],E=o[b+2],x=o[b+4],C=Math.max(w,E,x),R=Math.min(w,E,x);C>.9&&R<.1&&(w<.2&&(o[b+0]+=1),E<.2&&(o[b+2]+=1),x<.2&&(o[b+4]+=1))}}function d(b){s.push(b.x,b.y,b.z)}function f(b,w){const E=b*3;w.x=e[E+0],w.y=e[E+1],w.z=e[E+2]}function p(){const b=new ne,w=new ne,E=new ne,x=new ne,C=new Ue,R=new Ue,k=new Ue;for(let _=0,A=0;_<s.length;_+=9,A+=6){b.set(s[_+0],s[_+1],s[_+2]),w.set(s[_+3],s[_+4],s[_+5]),E.set(s[_+6],s[_+7],s[_+8]),C.set(o[A+0],o[A+1]),R.set(o[A+2],o[A+3]),k.set(o[A+4],o[A+5]),x.copy(b).add(w).add(E).divideScalar(3);const M=g(x);m(C,A+0,b,M),m(R,A+2,w,M),m(k,A+4,E,M)}}function m(b,w,E,x){x<0&&b.x===1&&(o[w]=b.x-1),E.x===0&&E.z===0&&(o[w]=x/2/Math.PI+.5)}function g(b){return Math.atan2(b.z,-b.x)}function y(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bh(e.vertices,e.indices,e.radius,e.details)}}class V4 extends Bh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new V4(e.radius,e.detail)}}const Pv=new ne,Nv=new ne,ix=new ne,Ov=new Zs;class nG extends on{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Jd*t),o=e.getIndex(),a=e.getAttribute("position"),c=o?o.count:a.count,l=[0,0,0],u=["a","b","c"],h=new Array(3),d={},f=[];for(let p=0;p<c;p+=3){o?(l[0]=o.getX(p),l[1]=o.getX(p+1),l[2]=o.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);const{a:m,b:g,c:y}=Ov;if(m.fromBufferAttribute(a,l[0]),g.fromBufferAttribute(a,l[1]),y.fromBufferAttribute(a,l[2]),Ov.getNormal(ix),h[0]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,h[1]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,h[2]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let b=0;b<3;b++){const w=(b+1)%3,E=h[b],x=h[w],C=Ov[u[b]],R=Ov[u[w]],k=`${E}_${x}`,_=`${x}_${E}`;_ in d&&d[_]?(ix.dot(d[_].normal)<=s&&(f.push(C.x,C.y,C.z),f.push(R.x,R.y,R.z)),d[_]=null):k in d||(d[k]={index0:l[b],index1:l[w],normal:ix.clone()})}}for(const p in d)if(d[p]){const{index0:m,index1:g}=d[p];Pv.fromBufferAttribute(a,m),Nv.fromBufferAttribute(a,g),f.push(Pv.x,Pv.y,Pv.z),f.push(Nv.x,Nv.y,Nv.z)}this.setAttribute("position",new It(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ic{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,c=s-1,l;for(;a<=c;)if(i=Math.floor(a+(c-a)/2),l=r[i]-o,l<0)a=i+1;else if(l>0)c=i-1;else{c=i;break}if(i=c,r[i]===o)return i/(s-1);const u=r[i],d=r[i+1]-u,f=(o-u)/d;return(i+f)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),c=t||(o.isVector2?new Ue:new ne);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new ne,i=[],s=[],o=[],a=new ne,c=new jt;for(let f=0;f<=e;f++){const p=f/e;i[f]=this.getTangentAt(p,new ne)}s[0]=new ne,o[0]=new ne;let l=Number.MAX_VALUE;const u=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);u<=l&&(l=u,r.set(1,0,0)),h<=l&&(l=h,r.set(0,1,0)),d<=l&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Zt(i[f-1].dot(i[f]),-1,1));s[f].applyMatrix4(c.makeRotationAxis(a,p))}o[f].crossVectors(i[f],s[f])}if(t===!0){let f=Math.acos(Zt(s[0].dot(s[e]),-1,1));f/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(c.makeRotationAxis(i[p],f*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class W4 extends ic{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t=new Ue){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=c-this.aX,f=l-this.aY;c=d*u-f*h+this.aX,l=d*h+f*u+this.aY}return r.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class rG extends W4{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function IT(){let n=0,e=0,t=0,r=0;function i(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,r=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){i(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,h){let d=(o-s)/l-(a-s)/(l+u)+(a-o)/u,f=(a-o)/u-(c-o)/(u+h)+(c-a)/h;d*=u,f*=u,i(o,a,d,f)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const kv=new ne,sx=new IT,ox=new IT,ax=new IT;class iG extends ic{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new ne){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let l,u;this.closed||a>0?l=i[(a-1)%s]:(kv.subVectors(i[0],i[1]).add(i[0]),l=kv);const h=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(kv.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=kv),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(l.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(u),f);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),sx.initNonuniformCatmullRom(l.x,h.x,d.x,u.x,p,m,g),ox.initNonuniformCatmullRom(l.y,h.y,d.y,u.y,p,m,g),ax.initNonuniformCatmullRom(l.z,h.z,d.z,u.z,p,m,g)}else this.curveType==="catmullrom"&&(sx.initCatmullRom(l.x,h.x,d.x,u.x,this.tension),ox.initCatmullRom(l.y,h.y,d.y,u.y,this.tension),ax.initCatmullRom(l.z,h.z,d.z,u.z,this.tension));return r.set(sx.calc(c),ox.calc(c),ax.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ne().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function FD(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,c=n*a;return(2*t-2*r+s+o)*c+(-3*t+3*r-2*s-o)*a+s*n+t}function RLe(n,e){const t=1-n;return t*t*e}function PLe(n,e){return 2*(1-n)*n*e}function NLe(n,e){return n*n*e}function Ag(n,e,t,r){return RLe(n,e)+PLe(n,t)+NLe(n,r)}function OLe(n,e){const t=1-n;return t*t*t*e}function kLe(n,e){const t=1-n;return 3*t*t*n*e}function DLe(n,e){return 3*(1-n)*n*n*e}function LLe(n,e){return n*n*n*e}function Cg(n,e,t,r,i){return OLe(n,e)+kLe(n,t)+DLe(n,r)+LLe(n,i)}class MT extends ic{constructor(e=new Ue,t=new Ue,r=new Ue,i=new Ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ue){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Cg(e,i.x,s.x,o.x,a.x),Cg(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sG extends ic{constructor(e=new ne,t=new ne,r=new ne,i=new ne){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ne){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Cg(e,i.x,s.x,o.x,a.x),Cg(e,i.y,s.y,o.y,a.y),Cg(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RT extends ic{constructor(e=new Ue,t=new Ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ue){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oG extends ic{constructor(e=new ne,t=new ne){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ne){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ne){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PT extends ic{constructor(e=new Ue,t=new Ue,r=new Ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ue){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Ag(e,i.x,s.x,o.x),Ag(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class NT extends ic{constructor(e=new ne,t=new ne,r=new ne){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ne){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Ag(e,i.x,s.x,o.x),Ag(e,i.y,s.y,o.y),Ag(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OT extends ic{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ue){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,c=i[o===0?o:o-1],l=i[o],u=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(FD(a,c.x,l.x,u.x,h.x),FD(a,c.y,l.y,u.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ue().fromArray(i))}return this}}var D_=Object.freeze({__proto__:null,ArcCurve:rG,CatmullRomCurve3:iG,CubicBezierCurve:MT,CubicBezierCurve3:sG,EllipseCurve:W4,LineCurve:RT,LineCurve3:oG,QuadraticBezierCurve:PT,QuadraticBezierCurve3:NT,SplineCurve:OT});class aG extends ic{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new D_[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],c=a.getLength(),l=c===0?0:1-o/c;return a.getPointAt(l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let l=0;l<c.length;l++){const u=c[l];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new D_[i.type]().fromJSON(i))}return this}}class L_ extends aG{constructor(e){super(),this.type="Path",this.currentPoint=new Ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new RT(this.currentPoint.clone(),new Ue(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new PT(this.currentPoint.clone(),new Ue(e,t),new Ue(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new MT(this.currentPoint.clone(),new Ue(e,t),new Ue(r,i),new Ue(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new OT(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,c){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,i,s,o,a,c),this}absellipse(e,t,r,i,s,o,a,c){const l=new W4(e,t,r,i,s,o,a,c);if(this.curves.length>0){const h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Qd extends L_{constructor(e){super(e),this.uuid=Mo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new L_().fromJSON(i))}return this}}function ULe(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=cG(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l;if(r&&(s=HLe(n,e,s,t)),n.length>80*t){a=1/0,c=1/0;let u=-1/0,h=-1/0;for(let d=t;d<i;d+=t){const f=n[d],p=n[d+1];f<a&&(a=f),p<c&&(c=p),f>u&&(u=f),p>h&&(h=p)}l=Math.max(u-a,h-c),l=l!==0?32767/l:0}return J2(s,o,t,a,c,l,0),o}function cG(n,e,t,r,i){let s;if(i===QLe(n,e,t,r)>0)for(let o=e;o<t;o+=r)s=$D(o/r|0,n[o],n[o+1],s);else for(let o=t-r;o>=e;o-=r)s=$D(o/r|0,n[o],n[o+1],s);return s&&G0(s,s.next)&&(ey(s),s=s.next),s}function _f(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(G0(t,t.next)||Sr(t.prev,t,t.next)===0)){if(ey(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function J2(n,e,t,r,i,s,o){if(!n)return;!o&&s&&GLe(n,r,i,s);let a=n;for(;n.prev!==n.next;){const c=n.prev,l=n.next;if(s?FLe(n,r,i,s):BLe(n)){e.push(c.i,n.i,l.i),ey(n),n=l.next,a=l.next;continue}if(n=l,n===a){o?o===1?(n=$Le(_f(n),e),J2(n,e,t,r,i,s,2)):o===2&&zLe(n,e,t,r,i,s):J2(_f(n),e,t,r,i,s,1);break}}}function BLe(n){const e=n.prev,t=n,r=n.next;if(Sr(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,c=t.y,l=r.y,u=Math.min(i,s,o),h=Math.min(a,c,l),d=Math.max(i,s,o),f=Math.max(a,c,l);let p=r.next;for(;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&Fm(i,a,s,c,o,l,p.x,p.y)&&Sr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function FLe(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Sr(i,s,o)>=0)return!1;const a=i.x,c=s.x,l=o.x,u=i.y,h=s.y,d=o.y,f=Math.min(a,c,l),p=Math.min(u,h,d),m=Math.max(a,c,l),g=Math.max(u,h,d),y=lC(f,p,e,t,r),b=lC(m,g,e,t,r);let w=n.prevZ,E=n.nextZ;for(;w&&w.z>=y&&E&&E.z<=b;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=g&&w!==i&&w!==o&&Fm(a,u,c,h,l,d,w.x,w.y)&&Sr(w.prev,w,w.next)>=0||(w=w.prevZ,E.x>=f&&E.x<=m&&E.y>=p&&E.y<=g&&E!==i&&E!==o&&Fm(a,u,c,h,l,d,E.x,E.y)&&Sr(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;w&&w.z>=y;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=g&&w!==i&&w!==o&&Fm(a,u,c,h,l,d,w.x,w.y)&&Sr(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=b;){if(E.x>=f&&E.x<=m&&E.y>=p&&E.y<=g&&E!==i&&E!==o&&Fm(a,u,c,h,l,d,E.x,E.y)&&Sr(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function $Le(n,e){let t=n;do{const r=t.prev,i=t.next.next;!G0(r,i)&&uG(r,t,t.next,i)&&Q2(r,i)&&Q2(i,r)&&(e.push(r.i,t.i,i.i),ey(t),ey(t.next),t=n=i),t=t.next}while(t!==n);return _f(t)}function zLe(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&XLe(o,a)){let c=hG(o,a);o=_f(o,o.next),c=_f(c,c.next),J2(o,e,t,r,i,s,0),J2(c,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function HLe(n,e,t,r){const i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*r,c=s<o-1?e[s+1]*r:n.length,l=cG(n,a,c,r,!1);l===l.next&&(l.steiner=!0),i.push(YLe(l))}i.sort(VLe);for(let s=0;s<i.length;s++)t=WLe(i[s],t);return t}function VLe(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const r=(n.next.y-n.y)/(n.next.x-n.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=r-i}return t}function WLe(n,e){const t=qLe(n,e);if(!t)return e;const r=hG(t,n);return _f(r,r.next),_f(t,t.next)}function qLe(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,o;if(G0(n,t))return t;do{if(G0(n,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const h=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=r&&h>s&&(s=h,o=t.x<t.next.x?t:t.next,h===r))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,c=o.x,l=o.y;let u=1/0;t=o;do{if(r>=t.x&&t.x>=c&&r!==t.x&&lG(i<l?r:s,i,c,l,i<l?s:r,i,t.x,t.y)){const h=Math.abs(i-t.y)/(r-t.x);Q2(t,n)&&(h<u||h===u&&(t.x>o.x||t.x===o.x&&jLe(o,t)))&&(o=t,u=h)}t=t.next}while(t!==a);return o}function jLe(n,e){return Sr(n.prev,n,e.prev)<0&&Sr(e.next,n,n.next)<0}function GLe(n,e,t,r){let i=n;do i.z===0&&(i.z=lC(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,KLe(i)}function KLe(n){let e,t=1;do{let r=n,i;n=null;let s=null;for(e=0;r;){e++;let o=r,a=0;for(let l=0;l<t&&(a++,o=o.nextZ,!!o);l++);let c=t;for(;a>0||c>0&&o;)a!==0&&(c===0||!o||r.z<=o.z)?(i=r,r=r.nextZ,a--):(i=o,o=o.nextZ,c--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;r=o}s.nextZ=null,t*=2}while(e>1);return n}function lC(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function YLe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function lG(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function Fm(n,e,t,r,i,s,o,a){return!(n===o&&e===a)&&lG(n,e,t,r,i,s,o,a)}function XLe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!ZLe(n,e)&&(Q2(n,e)&&Q2(e,n)&&JLe(n,e)&&(Sr(n.prev,n,e.prev)||Sr(n,e.prev,e))||G0(n,e)&&Sr(n.prev,n,n.next)>0&&Sr(e.prev,e,e.next)>0)}function Sr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function G0(n,e){return n.x===e.x&&n.y===e.y}function uG(n,e,t,r){const i=Lv(Sr(n,e,t)),s=Lv(Sr(n,e,r)),o=Lv(Sr(t,r,n)),a=Lv(Sr(t,r,e));return!!(i!==s&&o!==a||i===0&&Dv(n,t,e)||s===0&&Dv(n,r,e)||o===0&&Dv(t,n,r)||a===0&&Dv(t,e,r))}function Dv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Lv(n){return n>0?1:n<0?-1:0}function ZLe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&uG(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Q2(n,e){return Sr(n.prev,n,n.next)<0?Sr(n,e,n.next)>=0&&Sr(n,n.prev,e)>=0:Sr(n,e,n.prev)<0||Sr(n,n.next,e)<0}function JLe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function hG(n,e){const t=uC(n.i,n.x,n.y),r=uC(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function $D(n,e,t,r){const i=uC(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ey(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function uC(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function QLe(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class eUe{static triangulate(e,t,r=2){return ULe(e,t,r)}}class Ba{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Ba.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];zD(e),HD(r,e);let o=e.length;t.forEach(zD);for(let c=0;c<t.length;c++)i.push(o),o+=t[c].length,HD(r,t[c]);const a=eUe.triangulate(r,i);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function zD(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function HD(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class q4 extends on{constructor(e=new Qd([new Ue(.5,.5),new Ue(-.5,.5),new Ue(-.5,-.5),new Ue(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,c=e.length;a<c;a++){const l=e[a];o(l)}this.setAttribute("position",new It(i,3)),this.setAttribute("uv",new It(s,2)),this.computeVertexNormals();function o(a){const c=[],l=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:f-.1,m=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:tUe;let w,E=!1,x,C,R,k;y&&(w=y.getSpacedPoints(u),E=!0,d=!1,x=y.computeFrenetFrames(u,!1),C=new ne,R=new ne,k=new ne),d||(g=0,f=0,p=0,m=0);const _=a.extractPoints(l);let A=_.shape;const M=_.holes;if(!Ba.isClockWise(A)){A=A.reverse();for(let H=0,oe=M.length;H<oe;H++){const le=M[H];Ba.isClockWise(le)&&(M[H]=le.reverse())}}function P(H){const le=10000000000000001e-36;let Q=H[0];for(let ie=1;ie<=H.length;ie++){const xe=ie%H.length,fe=H[xe],me=fe.x-Q.x,De=fe.y-Q.y,K=me*me+De*De,q=Math.max(Math.abs(fe.x),Math.abs(fe.y),Math.abs(Q.x),Math.abs(Q.y)),he=le*q*q;if(K<=he){H.splice(xe,1),ie--;continue}Q=fe}}P(A),M.forEach(P);const v=M.length,S=A;for(let H=0;H<v;H++){const oe=M[H];A=A.concat(oe)}function T(H,oe,le){return oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),H.clone().addScaledVector(oe,le)}const L=A.length;function U(H,oe,le){let Q,ie,xe;const fe=H.x-oe.x,me=H.y-oe.y,De=le.x-H.x,K=le.y-H.y,q=fe*fe+me*me,he=fe*K-me*De;if(Math.abs(he)>Number.EPSILON){const ge=Math.sqrt(q),z=Math.sqrt(De*De+K*K),O=oe.x-me/ge,B=oe.y+fe/ge,G=le.x-K/z,re=le.y+De/z,ae=((G-O)*K-(re-B)*De)/(fe*K-me*De);Q=O+fe*ae-H.x,ie=B+me*ae-H.y;const se=Q*Q+ie*ie;if(se<=2)return new Ue(Q,ie);xe=Math.sqrt(se/2)}else{let ge=!1;fe>Number.EPSILON?De>Number.EPSILON&&(ge=!0):fe<-Number.EPSILON?De<-Number.EPSILON&&(ge=!0):Math.sign(me)===Math.sign(K)&&(ge=!0),ge?(Q=-me,ie=fe,xe=Math.sqrt(q)):(Q=fe,ie=me,xe=Math.sqrt(q/2))}return new Ue(Q/xe,ie/xe)}const V=[];for(let H=0,oe=S.length,le=oe-1,Q=H+1;H<oe;H++,le++,Q++)le===oe&&(le=0),Q===oe&&(Q=0),V[H]=U(S[H],S[le],S[Q]);const W=[];let F,I=V.concat();for(let H=0,oe=v;H<oe;H++){const le=M[H];F=[];for(let Q=0,ie=le.length,xe=ie-1,fe=Q+1;Q<ie;Q++,xe++,fe++)xe===ie&&(xe=0),fe===ie&&(fe=0),F[Q]=U(le[Q],le[xe],le[fe]);W.push(F),I=I.concat(F)}let N;if(g===0)N=Ba.triangulateShape(S,M);else{const H=[],oe=[];for(let le=0;le<g;le++){const Q=le/g,ie=f*Math.cos(Q*Math.PI/2),xe=p*Math.sin(Q*Math.PI/2)+m;for(let fe=0,me=S.length;fe<me;fe++){const De=T(S[fe],V[fe],xe);Te(De.x,De.y,-ie),Q===0&&H.push(De)}for(let fe=0,me=v;fe<me;fe++){const De=M[fe];F=W[fe];const K=[];for(let q=0,he=De.length;q<he;q++){const ge=T(De[q],F[q],xe);Te(ge.x,ge.y,-ie),Q===0&&K.push(ge)}Q===0&&oe.push(K)}}N=Ba.triangulateShape(H,oe)}const $=N.length,j=p+m;for(let H=0;H<L;H++){const oe=d?T(A[H],I[H],j):A[H];E?(R.copy(x.normals[0]).multiplyScalar(oe.x),C.copy(x.binormals[0]).multiplyScalar(oe.y),k.copy(w[0]).add(R).add(C),Te(k.x,k.y,k.z)):Te(oe.x,oe.y,0)}for(let H=1;H<=u;H++)for(let oe=0;oe<L;oe++){const le=d?T(A[oe],I[oe],j):A[oe];E?(R.copy(x.normals[H]).multiplyScalar(le.x),C.copy(x.binormals[H]).multiplyScalar(le.y),k.copy(w[H]).add(R).add(C),Te(k.x,k.y,k.z)):Te(le.x,le.y,h/u*H)}for(let H=g-1;H>=0;H--){const oe=H/g,le=f*Math.cos(oe*Math.PI/2),Q=p*Math.sin(oe*Math.PI/2)+m;for(let ie=0,xe=S.length;ie<xe;ie++){const fe=T(S[ie],V[ie],Q);Te(fe.x,fe.y,h+le)}for(let ie=0,xe=M.length;ie<xe;ie++){const fe=M[ie];F=W[ie];for(let me=0,De=fe.length;me<De;me++){const K=T(fe[me],F[me],Q);E?Te(K.x,K.y+w[u-1].y,w[u-1].x+le):Te(K.x,K.y,h+le)}}}te(),ce();function te(){const H=i.length/3;if(d){let oe=0,le=L*oe;for(let Q=0;Q<$;Q++){const ie=N[Q];$e(ie[2]+le,ie[1]+le,ie[0]+le)}oe=u+g*2,le=L*oe;for(let Q=0;Q<$;Q++){const ie=N[Q];$e(ie[0]+le,ie[1]+le,ie[2]+le)}}else{for(let oe=0;oe<$;oe++){const le=N[oe];$e(le[2],le[1],le[0])}for(let oe=0;oe<$;oe++){const le=N[oe];$e(le[0]+L*u,le[1]+L*u,le[2]+L*u)}}r.addGroup(H,i.length/3-H,0)}function ce(){const H=i.length/3;let oe=0;ve(S,oe),oe+=S.length;for(let le=0,Q=M.length;le<Q;le++){const ie=M[le];ve(ie,oe),oe+=ie.length}r.addGroup(H,i.length/3-H,1)}function ve(H,oe){let le=H.length;for(;--le>=0;){const Q=le;let ie=le-1;ie<0&&(ie=H.length-1);for(let xe=0,fe=u+g*2;xe<fe;xe++){const me=L*xe,De=L*(xe+1),K=oe+Q+me,q=oe+ie+me,he=oe+ie+De,ge=oe+Q+De;pe(K,q,he,ge)}}}function Te(H,oe,le){c.push(H),c.push(oe),c.push(le)}function $e(H,oe,le){X(H),X(oe),X(le);const Q=i.length/3,ie=b.generateTopUV(r,i,Q-3,Q-2,Q-1);Z(ie[0]),Z(ie[1]),Z(ie[2])}function pe(H,oe,le,Q){X(H),X(oe),X(Q),X(oe),X(le),X(Q);const ie=i.length/3,xe=b.generateSideWallUV(r,i,ie-6,ie-3,ie-2,ie-1);Z(xe[0]),Z(xe[1]),Z(xe[3]),Z(xe[1]),Z(xe[2]),Z(xe[3])}function X(H){i.push(c[H*3+0]),i.push(c[H*3+1]),i.push(c[H*3+2])}function Z(H){s.push(H.x),s.push(H.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return nUe(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new D_[i.type]().fromJSON(i)),new q4(r,e.options)}}const tUe={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],c=e[r*3+1],l=e[i*3],u=e[i*3+1];return[new Ue(s,o),new Ue(a,c),new Ue(l,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],c=e[t*3+2],l=e[r*3],u=e[r*3+1],h=e[r*3+2],d=e[i*3],f=e[i*3+1],p=e[i*3+2],m=e[s*3],g=e[s*3+1],y=e[s*3+2];return Math.abs(a-u)<Math.abs(o-l)?[new Ue(o,1-c),new Ue(l,1-h),new Ue(d,1-p),new Ue(m,1-y)]:[new Ue(a,1-c),new Ue(u,1-h),new Ue(f,1-p),new Ue(g,1-y)]}};function nUe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class j4 extends Bh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new j4(e.radius,e.detail)}}class G4 extends on{constructor(e=[new Ue(0,-.5),new Ue(.5,0),new Ue(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Zt(i,0,Math.PI*2);const s=[],o=[],a=[],c=[],l=[],u=1/t,h=new ne,d=new Ue,f=new ne,p=new ne,m=new ne;let g=0,y=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:g=e[b+1].x-e[b].x,y=e[b+1].y-e[b].y,f.x=y*1,f.y=-g,f.z=y*0,m.copy(f),f.normalize(),c.push(f.x,f.y,f.z);break;case e.length-1:c.push(m.x,m.y,m.z);break;default:g=e[b+1].x-e[b].x,y=e[b+1].y-e[b].y,f.x=y*1,f.y=-g,f.z=y*0,p.copy(f),f.x+=m.x,f.y+=m.y,f.z+=m.z,f.normalize(),c.push(f.x,f.y,f.z),m.copy(p)}for(let b=0;b<=t;b++){const w=r+b*u*i,E=Math.sin(w),x=Math.cos(w);for(let C=0;C<=e.length-1;C++){h.x=e[C].x*E,h.y=e[C].y,h.z=e[C].x*x,o.push(h.x,h.y,h.z),d.x=b/t,d.y=C/(e.length-1),a.push(d.x,d.y);const R=c[3*C+0]*E,k=c[3*C+1],_=c[3*C+0]*x;l.push(R,k,_)}}for(let b=0;b<t;b++)for(let w=0;w<e.length-1;w++){const E=w+b*e.length,x=E,C=E+e.length,R=E+e.length+1,k=E+1;s.push(x,C,k),s.push(R,k,C)}this.setIndex(s),this.setAttribute("position",new It(o,3)),this.setAttribute("uv",new It(a,2)),this.setAttribute("normal",new It(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new G4(e.points,e.segments,e.phiStart,e.phiLength)}}class Yy extends Bh{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yy(e.radius,e.detail)}}class w1 extends on{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),c=Math.floor(i),l=a+1,u=c+1,h=e/a,d=t/c,f=[],p=[],m=[],g=[];for(let y=0;y<u;y++){const b=y*d-o;for(let w=0;w<l;w++){const E=w*h-s;p.push(E,-b,0),m.push(0,0,1),g.push(w/a),g.push(1-y/c)}}for(let y=0;y<c;y++)for(let b=0;b<a;b++){const w=b+l*y,E=b+l*(y+1),x=b+1+l*(y+1),C=b+1+l*y;f.push(w,E,C),f.push(E,x,C)}this.setIndex(f),this.setAttribute("position",new It(p,3)),this.setAttribute("normal",new It(m,3)),this.setAttribute("uv",new It(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w1(e.width,e.height,e.widthSegments,e.heightSegments)}}class K4 extends on{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],c=[],l=[],u=[];let h=e;const d=(t-e)/i,f=new ne,p=new Ue;for(let m=0;m<=i;m++){for(let g=0;g<=r;g++){const y=s+g/r*o;f.x=h*Math.cos(y),f.y=h*Math.sin(y),c.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(f.x/t+1)/2,p.y=(f.y/t+1)/2,u.push(p.x,p.y)}h+=d}for(let m=0;m<i;m++){const g=m*(r+1);for(let y=0;y<r;y++){const b=y+g,w=b,E=b+r+1,x=b+r+2,C=b+1;a.push(w,E,C),a.push(E,x,C)}}this.setIndex(a),this.setAttribute("position",new It(c,3)),this.setAttribute("normal",new It(l,3)),this.setAttribute("uv",new It(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new K4(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Y4 extends on{constructor(e=new Qd([new Ue(0,.5),new Ue(-.5,-.5),new Ue(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,c=0;if(Array.isArray(e)===!1)l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,c,u),a+=c,c=0;this.setIndex(r),this.setAttribute("position",new It(i,3)),this.setAttribute("normal",new It(s,3)),this.setAttribute("uv",new It(o,2));function l(u){const h=i.length/3,d=u.extractPoints(t);let f=d.shape;const p=d.holes;Ba.isClockWise(f)===!1&&(f=f.reverse());for(let g=0,y=p.length;g<y;g++){const b=p[g];Ba.isClockWise(b)===!0&&(p[g]=b.reverse())}const m=Ba.triangulateShape(f,p);for(let g=0,y=p.length;g<y;g++){const b=p[g];f=f.concat(b)}for(let g=0,y=f.length;g<y;g++){const b=f[g];i.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let g=0,y=m.length;g<y;g++){const b=m[g],w=b[0]+h,E=b[1]+h,x=b[2]+h;r.push(w,E,x),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return rUe(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new Y4(r,e.curveSegments)}}function rUe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Xy extends on{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const c=Math.min(o+a,Math.PI);let l=0;const u=[],h=new ne,d=new ne,f=[],p=[],m=[],g=[];for(let y=0;y<=r;y++){const b=[],w=y/r;let E=0;y===0&&o===0?E=.5/t:y===r&&c===Math.PI&&(E=-.5/t);for(let x=0;x<=t;x++){const C=x/t;h.x=-e*Math.cos(i+C*s)*Math.sin(o+w*a),h.y=e*Math.cos(o+w*a),h.z=e*Math.sin(i+C*s)*Math.sin(o+w*a),p.push(h.x,h.y,h.z),d.copy(h).normalize(),m.push(d.x,d.y,d.z),g.push(C+E,1-w),b.push(l++)}u.push(b)}for(let y=0;y<r;y++)for(let b=0;b<t;b++){const w=u[y][b+1],E=u[y][b],x=u[y+1][b],C=u[y+1][b+1];(y!==0||o>0)&&f.push(w,E,C),(y!==r-1||c<Math.PI)&&f.push(E,x,C)}this.setIndex(f),this.setAttribute("position",new It(p,3)),this.setAttribute("normal",new It(m,3)),this.setAttribute("uv",new It(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class X4 extends Bh{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new X4(e.radius,e.detail)}}class Z4 extends on{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],c=[],l=[],u=new ne,h=new ne,d=new ne;for(let f=0;f<=r;f++)for(let p=0;p<=i;p++){const m=p/i*s,g=f/r*Math.PI*2;h.x=(e+t*Math.cos(g))*Math.cos(m),h.y=(e+t*Math.cos(g))*Math.sin(m),h.z=t*Math.sin(g),a.push(h.x,h.y,h.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),d.subVectors(h,u).normalize(),c.push(d.x,d.y,d.z),l.push(p/i),l.push(f/r)}for(let f=1;f<=r;f++)for(let p=1;p<=i;p++){const m=(i+1)*f+p-1,g=(i+1)*(f-1)+p-1,y=(i+1)*(f-1)+p,b=(i+1)*f+p;o.push(m,g,b),o.push(g,y,b)}this.setIndex(o),this.setAttribute("position",new It(a,3)),this.setAttribute("normal",new It(c,3)),this.setAttribute("uv",new It(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Z4(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class J4 extends on{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],c=[],l=[],u=[],h=new ne,d=new ne,f=new ne,p=new ne,m=new ne,g=new ne,y=new ne;for(let w=0;w<=r;++w){const E=w/r*s*Math.PI*2;b(E,s,o,e,f),b(E+.01,s,o,e,p),g.subVectors(p,f),y.addVectors(p,f),m.crossVectors(g,y),y.crossVectors(m,g),m.normalize(),y.normalize();for(let x=0;x<=i;++x){const C=x/i*Math.PI*2,R=-t*Math.cos(C),k=t*Math.sin(C);h.x=f.x+(R*y.x+k*m.x),h.y=f.y+(R*y.y+k*m.y),h.z=f.z+(R*y.z+k*m.z),c.push(h.x,h.y,h.z),d.subVectors(h,f).normalize(),l.push(d.x,d.y,d.z),u.push(w/r),u.push(x/i)}}for(let w=1;w<=r;w++)for(let E=1;E<=i;E++){const x=(i+1)*(w-1)+(E-1),C=(i+1)*w+(E-1),R=(i+1)*w+E,k=(i+1)*(w-1)+E;a.push(x,C,k),a.push(C,R,k)}this.setIndex(a),this.setAttribute("position",new It(c,3)),this.setAttribute("normal",new It(l,3)),this.setAttribute("uv",new It(u,2));function b(w,E,x,C,R){const k=Math.cos(w),_=Math.sin(w),A=x/E*w,M=Math.cos(A);R.x=C*(2+M)*.5*k,R.y=C*(2+M)*_*.5,R.z=C*Math.sin(A)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J4(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Q4 extends on{constructor(e=new NT(new ne(-1,-1,0),new ne(-1,1,0),new ne(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ne,c=new ne,l=new Ue;let u=new ne;const h=[],d=[],f=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new It(h,3)),this.setAttribute("normal",new It(d,3)),this.setAttribute("uv",new It(f,2));function m(){for(let w=0;w<t;w++)g(w);g(s===!1?t:0),b(),y()}function g(w){u=e.getPointAt(w/t,u);const E=o.normals[w],x=o.binormals[w];for(let C=0;C<=i;C++){const R=C/i*Math.PI*2,k=Math.sin(R),_=-Math.cos(R);c.x=_*E.x+k*x.x,c.y=_*E.y+k*x.y,c.z=_*E.z+k*x.z,c.normalize(),d.push(c.x,c.y,c.z),a.x=u.x+r*c.x,a.y=u.y+r*c.y,a.z=u.z+r*c.z,h.push(a.x,a.y,a.z)}}function y(){for(let w=1;w<=t;w++)for(let E=1;E<=i;E++){const x=(i+1)*(w-1)+(E-1),C=(i+1)*w+(E-1),R=(i+1)*w+E,k=(i+1)*(w-1)+E;p.push(x,C,k),p.push(C,R,k)}}function b(){for(let w=0;w<=t;w++)for(let E=0;E<=i;E++)l.x=w/t,l.y=E/i,f.push(l.x,l.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Q4(new D_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class dG extends on{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new ne,s=new ne;if(e.index!==null){const o=e.attributes.position,a=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:a.count,materialIndex:0}]);for(let l=0,u=c.length;l<u;++l){const h=c[l],d=h.start,f=h.count;for(let p=d,m=d+f;p<m;p+=3)for(let g=0;g<3;g++){const y=a.getX(p+g),b=a.getX(p+(g+1)%3);i.fromBufferAttribute(o,y),s.fromBufferAttribute(o,b),VD(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,c=o.count/3;a<c;a++)for(let l=0;l<3;l++){const u=3*a+l,h=3*a+(l+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,h),VD(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new It(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function VD(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var WD=Object.freeze({__proto__:null,BoxGeometry:Ff,CapsuleGeometry:z4,CircleGeometry:H4,ConeGeometry:Ky,CylinderGeometry:Gy,DodecahedronGeometry:V4,EdgesGeometry:nG,ExtrudeGeometry:q4,IcosahedronGeometry:j4,LatheGeometry:G4,OctahedronGeometry:Yy,PlaneGeometry:w1,PolyhedronGeometry:Bh,RingGeometry:K4,ShapeGeometry:Y4,SphereGeometry:Xy,TetrahedronGeometry:X4,TorusGeometry:Z4,TorusKnotGeometry:J4,TubeGeometry:Q4,WireframeGeometry:dG});class fG extends fs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ft(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class pG extends Qa{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class kT extends fs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ft(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Po,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mG extends kT{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ue(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Zt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ft(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ft(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ft(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class gG extends fs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ft(16777215),this.specular=new ft(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Po,this.combine=Hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yG extends fs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ft(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class wG extends fs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class vG extends fs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Po,this.combine=Hy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DT extends fs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Mj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class LT extends fs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class bG extends fs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ft(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Uh,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _G extends Os{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function zd(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function EG(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function xG(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function hC(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let c=0;c!==e;++c)i[o++]=n[a+c]}return i}function UT(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function iUe(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const l=s.tracks[c],u=l.getValueSize(),h=[],d=[];for(let f=0;f<l.times.length;++f){const p=l.times[f]*i;if(!(p<t||p>=r)){h.push(l.times[f]);for(let m=0;m<u;++m)d.push(l.values[f*u+m])}}h.length!==0&&(l.times=zd(h,l.times.constructor),l.values=zd(d,l.values.constructor),o.push(l))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s}function sUe(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const l=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===c});if(l===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let d=0;const f=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=a.times.length-1;let m;if(s<=a.times[0]){const y=u,b=h-u;m=a.values.slice(y,b)}else if(s>=a.times[p]){const y=p*h+u,b=y+h-u;m=a.values.slice(y,b)}else{const y=a.createInterpolant(),b=u,w=h-u;y.evaluate(s),m=y.resultBuffer.slice(b,w)}c==="quaternion"&&new oo().fromArray(m).normalize().conjugate().toArray(m);const g=l.times.length;for(let y=0;y<g;++y){const b=y*f+d;if(c==="quaternion")oo.multiplyQuaternionsFlat(l.values,b,m,0,l.values,b);else{const w=f-d*2;for(let E=0;E<w;++E)l.values[b+E]-=m[E]}}}return n.blendMode=yT,n}class oUe{static convertArray(e,t){return zd(e,t)}static isTypedArray(e){return EG(e)}static getKeyframeOrder(e){return xG(e)}static sortedArray(e,t,r){return hC(e,t,r)}static flattenJSON(e,t,r,i){UT(e,t,r,i)}static subclip(e,t,r,i,s=30){return iUe(e,t,r,i,s)}static makeClipAdditive(e,t=0,r=e,i=30){return sUe(e,t,r,i)}}class Zy{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let c=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class SG extends Zy{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Fd,endingEnd:Fd}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],c=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case $d:s=e,a=2*t-r;break;case G2:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(c===void 0)switch(this.getSettings_().endingEnd){case $d:o=e,c=2*r-t;break;case G2:o=1,c=r+i[1]-i[0];break;default:o=e-1,c=t}const l=(r-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(r-t)/(i-t),m=p*p,g=m*p,y=-d*g+2*d*m-d*p,b=(1+d)*g+(-1.5-2*d)*m+(-.5+d)*p+1,w=(-1-f)*g+(1.5+f)*m+.5*p,E=f*g-f*m;for(let x=0;x!==a;++x)s[x]=y*o[u+x]+b*o[l+x]+w*o[c+x]+E*o[h+x];return s}}class BT extends Zy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(r-t)/(i-t),h=1-u;for(let d=0;d!==a;++d)s[d]=o[l+d]*h+o[c+d]*u;return s}}class AG extends Zy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ga{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zd(t,this.TimeBufferType),this.values=zd(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:zd(e.times,Array),values:zd(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new AG(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new BT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new SG(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case j2:t=this.InterpolantFactoryMethodDiscrete;break;case N_:t=this.InterpolantFactoryMethodLinear;break;case N3:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return j2;case this.InterpolantFactoryMethodLinear:return N_;case this.InterpolantFactoryMethodSmooth:return N3}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=r[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(i!==void 0&&EG(i))for(let a=0,c=i.length;a!==c;++a){const l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===N3,s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(i)c=!0;else{const h=a*r,d=h-r,f=h+r;for(let p=0;p!==r;++p){const m=t[h+p];if(m!==t[d+p]||m!==t[f+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const h=a*r,d=o*r;for(let f=0;f!==r;++f)t[d+f]=t[h+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,c=o*r,l=0;l!==r;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ga.prototype.ValueTypeName="";ga.prototype.TimeBufferType=Float32Array;ga.prototype.ValueBufferType=Float32Array;ga.prototype.DefaultInterpolation=N_;class $f extends ga{constructor(e,t,r){super(e,t,r)}}$f.prototype.ValueTypeName="bool";$f.prototype.ValueBufferType=Array;$f.prototype.DefaultInterpolation=j2;$f.prototype.InterpolantFactoryMethodLinear=void 0;$f.prototype.InterpolantFactoryMethodSmooth=void 0;class FT extends ga{constructor(e,t,r,i){super(e,t,r,i)}}FT.prototype.ValueTypeName="color";class ty extends ga{constructor(e,t,r,i){super(e,t,r,i)}}ty.prototype.ValueTypeName="number";class CG extends Zy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(r-t)/(i-t);let l=e*a;for(let u=l+a;l!==u;l+=4)oo.slerpFlat(s,0,o,l-a,o,l,c);return s}}class Jy extends ga{constructor(e,t,r,i){super(e,t,r,i)}InterpolantFactoryMethodLinear(e){return new CG(this.times,this.values,this.getValueSize(),e)}}Jy.prototype.ValueTypeName="quaternion";Jy.prototype.InterpolantFactoryMethodSmooth=void 0;class zf extends ga{constructor(e,t,r){super(e,t,r)}}zf.prototype.ValueTypeName="string";zf.prototype.ValueBufferType=Array;zf.prototype.DefaultInterpolation=j2;zf.prototype.InterpolantFactoryMethodLinear=void 0;zf.prototype.InterpolantFactoryMethodSmooth=void 0;class ny extends ga{constructor(e,t,r,i){super(e,t,r,i)}}ny.prototype.ValueTypeName="vector";class ry{constructor(e="",t=-1,r=[],i=P4){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Mo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(cUe(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(ga.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=xG(c);c=hC(c,1,u),l=hC(l,1,u),!i&&c[0]===0&&(c.push(s),l.push(l[0])),o.push(new ty(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const h=u[1];let d=i[h];d||(i[h]=d=[]),d.push(l)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,d,f,p,m){if(f.length!==0){const g=[],y=[];UT(f,g,y,p),g.length!==0&&m.push(new h(d,g,y))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let h=0;h<l.length;h++){const d=l[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let m=0;m<d[p].morphTargets.length;m++)f[d[p].morphTargets[m]]=-1;for(const m in f){const g=[],y=[];for(let b=0;b!==d[p].morphTargets.length;++b){const w=d[p];g.push(w.time),y.push(w.morphTarget===m?1:0)}i.push(new ty(".morphTargetInfluence["+m+"]",g,y))}c=f.length*o}else{const f=".bones["+t[h].name+"]";r(ny,f+".position",d,"pos",i),r(Jy,f+".quaternion",d,"rot",i),r(ny,f+".scale",d,"scl",i)}}return i.length===0?null:new this(s,c,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function aUe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ty;case"vector":case"vector2":case"vector3":case"vector4":return ny;case"color":return FT;case"quaternion":return Jy;case"bool":case"boolean":return $f;case"string":return zf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function cUe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=aUe(n.type);if(n.times===void 0){const t=[],r=[];UT(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ll={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class $T{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,c;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,h){return l.push(u,h),this},this.removeHandler=function(u){const h=l.indexOf(u);return h!==-1&&l.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=l.length;h<d;h+=2){const f=l[h],p=l[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const TG=new $T;class uo{constructor(e){this.manager=e!==void 0?e:TG,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}uo.DEFAULT_MATERIAL_NAME="__DEFAULT";const vl={};class lUe extends Error{constructor(e,t){super(e),this.response=t}}class ru extends uo{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ll.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(vl[e]!==void 0){vl[e].push({onLoad:t,onProgress:r,onError:i});return}vl[e]=[],vl[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;const u=vl[e],h=l.body.getReader(),d=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),f=d?parseInt(d):0,p=f!==0;let m=0;const g=new ReadableStream({start(y){b();function b(){h.read().then(({done:w,value:E})=>{if(w)y.close();else{m+=E.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let C=0,R=u.length;C<R;C++){const k=u[C];k.onProgress&&k.onProgress(x)}y.enqueue(E),b()}},w=>{y.error(w)})}}});return new Response(g)}else throw new lUe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return l.json();default:if(a==="")return l.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{Ll.add(e,l);const u=vl[e];delete vl[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(l)}}).catch(l=>{const u=vl[e];if(u===void 0)throw this.manager.itemError(e),l;delete vl[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class uUe extends uo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ru(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=ry.parse(e[r]);t.push(i)}return t}}class hUe extends uo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new $4,c=new ru(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let l=0;function u(h){c.load(e[h],function(d){const f=s.parse(d,!0);o[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},l+=1,l===6&&(f.mipmapCount===1&&(a.minFilter=oi),a.image=o,a.format=f.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)u(h);else c.load(e,function(h){const d=s.parse(h,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let p=0;p<f;p++){o[p]={mipmaps:[]};for(let m=0;m<d.mipmapCount;m++)o[p].mipmaps.push(d.mipmaps[p*d.mipmapCount+m]),o[p].format=d.format,o[p].width=d.width,o[p].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=oi),a.format=d.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class iy extends uo{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ll.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Z2("img");function c(){u(),Ll.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(h){u(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class dUe extends uo{constructor(e){super(e)}load(e,t,r,i){const s=new jy;s.colorSpace=bs;const o=new iy(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(l){o.load(e[l],function(u){s.images[l]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let l=0;l<e.length;++l)c(l);return s}}class fUe extends uo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Lc,a=new ru(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){let l;try{l=s.parse(c)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}l.image!==void 0?o.image=l.image:l.data!==void 0&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=l.wrapS!==void 0?l.wrapS:ta,o.wrapT=l.wrapT!==void 0?l.wrapT:ta,o.magFilter=l.magFilter!==void 0?l.magFilter:oi,o.minFilter=l.minFilter!==void 0?l.minFilter:oi,o.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.colorSpace!==void 0&&(o.colorSpace=l.colorSpace),l.flipY!==void 0&&(o.flipY=l.flipY),l.format!==void 0&&(o.format=l.format),l.type!==void 0&&(o.type=l.type),l.mipmaps!==void 0&&(o.mipmaps=l.mipmaps,o.minFilter=Mc),l.mipmapCount===1&&(o.minFilter=oi),l.generateMipmaps!==void 0&&(o.generateMipmaps=l.generateMipmaps),o.needsUpdate=!0,t&&t(o,l)},r,i),o}}class pUe extends uo{constructor(e){super(e)}load(e,t,r,i){const s=new kr,o=new iy(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Fh extends bn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ft(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class IG extends Fh{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ft(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const cx=new jt,qD=new ne,jD=new ne;class zT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ue(512,512),this.mapType=Ja,this.map=null,this.mapPass=null,this.matrix=new jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new y1,this._frameExtents=new Ue(1,1),this._viewportCount=1,this._viewports=[new Sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;qD.setFromMatrixPosition(e.matrixWorld),t.position.copy(qD),jD.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(jD),t.updateMatrixWorld(),cx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cx),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(cx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class mUe extends zT{constructor(){super(new Gr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=W0*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class MG extends Fh{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.target=new bn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new mUe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const GD=new jt,vm=new ne,lx=new ne;class gUe extends zT{constructor(){super(new Gr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ue(4,2),this._viewportCount=6,this._viewports=[new Sn(2,1,1,1),new Sn(0,1,1,1),new Sn(3,1,1,1),new Sn(1,1,1,1),new Sn(3,0,1,1),new Sn(1,0,1,1)],this._cubeDirections=[new ne(1,0,0),new ne(-1,0,0),new ne(0,0,1),new ne(0,0,-1),new ne(0,1,0),new ne(0,-1,0)],this._cubeUps=[new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,0,1),new ne(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),vm.setFromMatrixPosition(e.matrixWorld),r.position.copy(vm),lx.copy(r.position),lx.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(lx),r.updateMatrixWorld(),i.makeTranslation(-vm.x,-vm.y,-vm.z),GD.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GD)}}class RG extends Fh{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new gUe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class eE extends qy{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class yUe extends zT{constructor(){super(new eE(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class PG extends Fh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.target=new bn,this.shadow=new yUe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class NG extends Fh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class OG extends Fh{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class kG{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ne)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class DG extends Fh{constructor(e=new kG,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class tE extends uo{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new ru(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new ft().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new ft().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ue().fromArray(o.value);break;case"v3":i.uniforms[s].value=new ne().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Sn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Qt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new jt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ue().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ue().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return tE.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:fG,SpriteMaterial:ST,RawShaderMaterial:pG,ShaderMaterial:Qa,PointsMaterial:CT,MeshPhysicalMaterial:mG,MeshStandardMaterial:kT,MeshPhongMaterial:gG,MeshToonMaterial:yG,MeshNormalMaterial:wG,MeshLambertMaterial:vG,MeshDepthMaterial:DT,MeshDistanceMaterial:LT,MeshBasicMaterial:cu,MeshMatcapMaterial:bG,LineDashedMaterial:_G,LineBasicMaterial:Os,Material:fs};return new t[e]}}class dC{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class LG extends on{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class UG extends uo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ru(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(f,p){if(t[p]!==void 0)return t[p];const g=f.interleavedBuffers[p],y=s(f,g.buffer),b=Jp(g.type,y),w=new U4(b,g.stride);return w.uuid=g.uuid,t[p]=w,w}function s(f,p){if(r[p]!==void 0)return r[p];const g=f.arrayBuffers[p],y=new Uint32Array(g).buffer;return r[p]=y,y}const o=e.isInstancedBufferGeometry?new LG:new on,a=e.data.index;if(a!==void 0){const f=Jp(a.type,a.array);o.setIndex(new Gn(f,1))}const c=e.data.attributes;for(const f in c){const p=c[f];let m;if(p.isInterleavedBufferAttribute){const g=i(e.data,p.data);m=new bf(g,p.itemSize,p.offset,p.normalized)}else{const g=Jp(p.type,p.array),y=p.isInstancedBufferAttribute?j0:Gn;m=new y(g,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),o.setAttribute(f,m)}const l=e.data.morphAttributes;if(l)for(const f in l){const p=l[f],m=[];for(let g=0,y=p.length;g<y;g++){const b=p[g];let w;if(b.isInterleavedBufferAttribute){const E=i(e.data,b.data);w=new bf(E,b.itemSize,b.offset,b.normalized)}else{const E=Jp(b.type,b.array);w=new Gn(E,b.itemSize,b.normalized)}b.name!==void 0&&(w.name=b.name),m.push(w)}o.morphAttributes[f]=m}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let f=0,p=h.length;f!==p;++f){const m=h[f];o.addGroup(m.start,m.count,m.materialIndex)}const d=e.data.boundingSphere;return d!==void 0&&(o.boundingSphere=new Fi().fromJSON(d)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class wUe extends uo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?dC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ru(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){let l=null;try{l=JSON.parse(c)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(l,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?dC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new ru(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),c=a.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(l)}),a=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,s,c,a,r),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),this.bindLightTargets(l),t!==void 0){let h=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,i,a,o,t),l=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,l),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Qd().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new B4().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new UG;for(let s=0,o=e.length;s<o;s++){let a;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(c);break;default:c.type in WD?a=WD[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}a.uuid=c.uuid,c.name!==void 0&&(a.name=c.name),c.userData!==void 0&&(a.userData=c.userData),r[c.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new tE;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const c=e[o];r[c.uuid]===void 0&&(r[c.uuid]=s.parse(c)),i[c.uuid]=r[c.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=ry.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(c){return r.manager.itemStart(c),s.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function a(c){if(typeof c=="string"){const l=c,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:r.resourcePath+l;return o(u)}else return c.data?{data:Jp(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new $T(t);s=new iy(c),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const h=e[l],d=h.url;if(Array.isArray(d)){const f=[];for(let p=0,m=d.length;p<m;p++){const g=d[p],y=a(g);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new Lc(y.data,y.width,y.height)))}i[h.uuid]=new oh(f)}else{const f=a(h.url);i[h.uuid]=new oh(f)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(c)}else return o.data?{data:Jp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new iy(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const c=e[o],l=c.url;if(Array.isArray(l)){const u=[];for(let h=0,d=l.length;h<d;h++){const f=l[h],p=await s(f);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new Lc(p.data,p.width,p.height)))}r[c.uuid]=new oh(u)}else{const u=await s(c.url);r[c.uuid]=new oh(u)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const c=t[a.image],l=c.data;let u;Array.isArray(l)?(u=new jy,l.length===6&&(u.needsUpdate=!0)):(l&&l.data?u=new Lc:u=new kr,l&&(u.needsUpdate=!0)),u.source=c,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,vUe)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],KD),u.wrapT=r(a.wrap[1],KD)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,YD)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,YD)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,t,r,i,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function c(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let p=0,m=d.length;p<m;p++){const g=d[p];r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),f.push(r[g])}return f}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function l(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let u,h;switch(e.type){case"Scene":o=new L4,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ft(e.background):o.background=l(e.background)),e.environment!==void 0&&(o.environment=l(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new D4(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new k4(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Gr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new eE(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new NG(e.color,e.intensity);break;case"DirectionalLight":o=new PG(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new RG(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new OG(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new MG(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new IG(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new DG().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=c(e.material),o=new Xj(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=c(e.material),o=new Vr(u,h);break;case"InstancedMesh":u=a(e.geometry),h=c(e.material);const d=e.count,f=e.instanceMatrix,p=e.instanceColor;o=new Zj(u,h,d),o.instanceMatrix=new j0(new Float32Array(f.array),16),p!==void 0&&(o.instanceColor=new j0(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":u=a(e.geometry),h=c(e.material),o=new Jj(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(m=>{let g=null,y=null;return m.boundingBox!==void 0&&(g=new us().fromJSON(m.boundingBox)),m.boundingSphere!==void 0&&(y=new Fi().fromJSON(m.boundingSphere)),{...m,boundingBox:g,boundingSphere:y}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=l(e.matricesTexture.uuid),o._indirectTexture=l(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=l(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new Fi().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new us().fromJSON(e.boundingBox));break;case"LOD":o=new Yj;break;case"Line":o=new Oh(a(e.geometry),c(e.material));break;case"LineLoop":o=new Qj(a(e.geometry),c(e.material));break;case"LineSegments":o=new Jc(a(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new eG(a(e.geometry),c(e.material));break;case"Sprite":o=new Kj(c(e.material));break;case"Group":o=new Qp;break;case"Bone":o=new AT;break;default:o=new bn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)o.add(this.parseObject(d[f],t,r,i,s))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const p=d[f];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const p=d[f],m=o.getObjectByProperty("uuid",p.object);m!==void 0&&o.addLevel(m,p.distance,p.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new bn}})}}const vUe={UVMapping:S4,CubeReflectionMapping:tu,CubeRefractionMapping:Nh,EquirectangularReflectionMapping:H2,EquirectangularRefractionMapping:V2,CubeUVReflectionMapping:p1},KD={RepeatWrapping:W2,ClampToEdgeWrapping:ta,MirroredRepeatWrapping:q2},YD={NearestFilter:Bi,NearestMipmapNearestFilter:lT,NearestMipmapLinearFilter:Zp,LinearFilter:oi,LinearMipmapNearestFilter:wg,LinearMipmapLinearFilter:Mc},ux=new WeakMap;class bUe extends uo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ll.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(l=>{if(ux.has(o)===!0)i&&i(ux.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(l),s.manager.itemEnd(e),l});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const c=fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){return Ll.add(e,l),t&&t(l),s.manager.itemEnd(e),l}).catch(function(l){i&&i(l),ux.set(c,l),Ll.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ll.add(e,c),s.manager.itemStart(e)}}let Uv,HT=class{static getContext(){return Uv===void 0&&(Uv=new(window.AudioContext||window.webkitAudioContext)),Uv}static setContext(e){Uv=e}};class _Ue extends uo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ru(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const l=c.slice(0);HT.getContext().decodeAudioData(l,function(h){t(h)}).catch(a)}catch(l){a(l)}},r,i);function a(c){i?i(c):console.error(c),s.manager.itemError(e)}}}const XD=new jt,ZD=new jt,id=new jt;class EUe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,id.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Jd*t.fov*.5)/t.zoom;let a,c;ZD.elements[12]=-i,XD.elements[12]=i,a=-o*t.aspect+s,c=o*t.aspect+s,id.elements[0]=2*t.near/(c-a),id.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(id),a=-o*t.aspect-s,c=o*t.aspect-s,id.elements[0]=2*t.near/(c-a),id.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(id)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ZD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(XD)}}class BG extends Gr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class nE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=JD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=JD();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function JD(){return performance.now()}const sd=new ne,hx=new oo,xUe=new ne,od=new ne,ad=new ne;class SUe extends bn{constructor(){super(),this.type="AudioListener",this.context=HT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new nE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(sd,hx,xUe),od.set(0,0,-1).applyQuaternion(hx),ad.set(0,1,0).applyQuaternion(hx),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(sd.x,r),t.positionY.linearRampToValueAtTime(sd.y,r),t.positionZ.linearRampToValueAtTime(sd.z,r),t.forwardX.linearRampToValueAtTime(od.x,r),t.forwardY.linearRampToValueAtTime(od.y,r),t.forwardZ.linearRampToValueAtTime(od.z,r),t.upX.linearRampToValueAtTime(ad.x,r),t.upY.linearRampToValueAtTime(ad.y,r),t.upZ.linearRampToValueAtTime(ad.z,r)}else t.setPosition(sd.x,sd.y,sd.z),t.setOrientation(od.x,od.y,od.z,ad.x,ad.y,ad.z)}}class FG extends bn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const cd=new ne,QD=new oo,AUe=new ne,ld=new ne;class CUe extends FG{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(cd,QD,AUe),ld.set(0,0,1).applyQuaternion(QD);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(cd.x,r),t.positionY.linearRampToValueAtTime(cd.y,r),t.positionZ.linearRampToValueAtTime(cd.z,r),t.orientationX.linearRampToValueAtTime(ld.x,r),t.orientationY.linearRampToValueAtTime(ld.y,r),t.orientationZ.linearRampToValueAtTime(ld.z,r)}else t.setPosition(cd.x,cd.y,cd.z),t.setOrientation(ld.x,ld.y,ld.z)}}class TUe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class $G{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(r,i,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let c=t,l=t+t;c!==l;++c)if(r[c]!==r[c+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){oo.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;oo.multiplyQuaternionsFlat(e,o,e,t,e,r),oo.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const VT="\\[\\]\\.:\\/",IUe=new RegExp("["+VT+"]","g"),WT="[^"+VT+"]",MUe="[^"+VT.replace("\\.","")+"]",RUe=/((?:WC+[\/:])*)/.source.replace("WC",WT),PUe=/(WCOD+)?/.source.replace("WCOD",MUe),NUe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",WT),OUe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",WT),kUe=new RegExp("^"+RUe+PUe+NUe+OUe+"$"),DUe=["material","materials","bones","map"];class LUe{constructor(e,t,r){const i=r||xn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class xn{constructor(e,t,r){this.path=t,this.parsedPath=r||xn.parseTrackName(t),this.node=xn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new xn.Composite(e,t,r):new xn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(IUe,"")}static parseTrackName(e){const t=kUe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);DUe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const c=r(a.children);if(c)return c}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=xn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const o=e[i];if(o===void 0){const l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xn.Composite=LUe;xn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};xn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};xn.prototype.GetterByBindingType=[xn.prototype._getValue_direct,xn.prototype._getValue_array,xn.prototype._getValue_arrayElement,xn.prototype._getValue_toArray];xn.prototype.SetterByBindingTypeAndVersioning=[[xn.prototype._setValue_direct,xn.prototype._setValue_direct_setNeedsUpdate,xn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_array,xn.prototype._setValue_array_setNeedsUpdate,xn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_arrayElement,xn.prototype._setValue_arrayElement_setNeedsUpdate,xn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_fromArray,xn.prototype._setValue_fromArray_setNeedsUpdate,xn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class UUe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Mo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,c=e.length,l=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],f=d.uuid;let p=t[f];if(p===void 0){p=c++,t[f]=p,e.push(d);for(let m=0,g=o;m!==g;++m)s[m].push(new xn(d,r[m],i[m]))}else if(p<l){a=e[p];const m=--l,g=e[m];t[g.uuid]=p,e[p]=g,t[f]=m,e[m]=d;for(let y=0,b=o;y!==b;++y){const w=s[y],E=w[m];let x=w[p];w[p]=E,x===void 0&&(x=new xn(d,r[y],i[y])),w[m]=x}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const c=arguments[o],l=c.uuid,u=t[l];if(u!==void 0&&u>=s){const h=s++,d=e[h];t[d.uuid]=u,e[u]=d,t[l]=h,e[h]=c;for(let f=0,p=i;f!==p;++f){const m=r[f],g=m[h],y=m[u];m[u]=g,m[h]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,c=arguments.length;a!==c;++a){const l=arguments[a],u=l.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<s){const d=--s,f=e[d],p=--o,m=e[p];t[f.uuid]=h,e[h]=f,t[m.uuid]=d,e[d]=m,e.pop();for(let g=0,y=i;g!==y;++g){const b=r[g],w=b[d],E=b[p];b[h]=w,b[d]=E,b.pop()}}else{const d=--o,f=e[d];d>0&&(t[f.uuid]=h),e[h]=f,e.pop();for(let p=0,m=i;p!==m;++p){const g=r[p];g[h]=g[d],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,c=this._objects,l=c.length,u=this.nCachedObjects_,h=new Array(l);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(h);for(let d=u,f=c.length;d!==f;++d){const p=c[d];h[d]=new xn(p,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,c=o[a],l=e[a];t[l]=r,o[r]=c,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class zG{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:Fd,endingEnd:Fd};for(let l=0;l!==o;++l){const u=s[l].createInterpolant(null);a[l]=u,u.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Tj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r=!1){if(e.fadeOut(t),this.fadeIn(t),r===!0){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r=!1){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,l=a.sampleValues;return c[0]=s,c[1]=s+r,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*r;c<0||r===0?t=0:(this._startTime=null,t=r*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case yT:for(let u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulateAdditive(a);break;case P4:default:for(let u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===Ij;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===Cj){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=$d,i.endingEnd=$d):(e?i.endingStart=this.zeroSlopeAtStart?$d:Fd:i.endingStart=G2,t?i.endingEnd=this.zeroSlopeAtEnd?$d:Fd:i.endingEnd=G2)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=r,this}}const BUe=new Float32Array(1);class FUe extends Zc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,c=r.uuid,l=this._bindingsByRootAndName;let u=l[c];u===void 0&&(u={},l[c]=u);for(let h=0;h!==s;++h){const d=i[h],f=d.name;let p=u[f];if(p!==void 0)++p.referenceCount,o[h]=p;else{if(p=o[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,c,f));continue}const m=t&&t._propertyBindings[h].binding.parsedPath;p=new $G(xn.create(r,f,m),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,c,f),o[h]=p}a[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,l=c[c.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,c[u]=l,c.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],c=t[t.length-1],l=e._cacheIndex;c._cacheIndex=l,t[l]=c,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new BT(new Float32Array(2),new Float32Array(2),1,BUe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?ry.findByName(i,e):e;const a=o!==null?o.uuid:e,c=this._actionsByClip[a];let l=null;if(r===void 0&&(o!==null?r=o.blendMode:r=P4),c!==void 0){const h=c.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;l=c.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const u=new zG(this,o,t,r);return this._bindAction(u,l),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?ry.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(i,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const l=o[a];this._deactivateAction(l);const u=l._cacheIndex,h=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,c=a[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class $Ue extends _T{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new O4(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class qT{constructor(e){this.value=e}clone(){return new qT(this.value.clone===void 0?this.value:this.value.clone())}}let zUe=0;class HUe extends Zc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:zUe++}),this.name="",this.usage=Y2,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class VUe extends U4{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class WUe{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const eL=new jt;class HG{constructor(e,t,r=0,i=1/0){this.ray=new g1(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Wy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return eL.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(eL),this}intersectObject(e,t=!0,r=[]){return fC(e,this,r,t),r.sort(tL),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)fC(e[i],this,r,t);return r.sort(tL),r}}function tL(n,e){return n.distance-e.distance}function fC(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)fC(s[o],e,t,!0)}}class qUe{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Zt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Zt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class jUe{constructor(e=1,t=0,r=0){this.radius=e,this.theta=t,this.y=r}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class jT{constructor(e,t,r,i){jT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const nL=new Ue;class GUe{constructor(e=new Ue(1/0,1/0),t=new Ue(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=nL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,nL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rL=new ne,Bv=new ne;class KUe{constructor(e=new ne,t=new ne){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){rL.subVectors(e,this.start),Bv.subVectors(this.end,this.start);const r=Bv.dot(Bv);let s=Bv.dot(rL)/r;return t&&(s=Zt(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const iL=new ne;class YUe extends bn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new on,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,c=32;o<c;o++,a++){const l=o/c*Math.PI*2,u=a/c*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new It(i,3));const s=new Os({fog:!1,toneMapped:!1});this.cone=new Jc(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),iL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(iL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ku=new ne,Fv=new jt,dx=new jt;class XUe extends Jc{constructor(e){const t=VG(e),r=new on,i=[],s=[],o=new ft(0,0,1),a=new ft(0,1,0);for(let l=0;l<t.length;l++){const u=t[l];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new It(i,3)),r.setAttribute("color",new It(s,3));const c=new Os({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");dx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Fv.multiplyMatrices(dx,a.matrixWorld),ku.setFromMatrixPosition(Fv),i.setXYZ(o,ku.x,ku.y,ku.z),Fv.multiplyMatrices(dx,a.parent.matrixWorld),ku.setFromMatrixPosition(Fv),i.setXYZ(o+1,ku.x,ku.y,ku.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function VG(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...VG(n.children[t]));return e}class ZUe extends Vr{constructor(e,t,r){const i=new Xy(t,4,2),s=new cu({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const JUe=new ne,sL=new ft,oL=new ft;class QUe extends bn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Yy(t);i.rotateY(Math.PI*.5),this.material=new cu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Gn(o,3)),this.add(new Vr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");sL.copy(this.light.color),oL.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?sL:oL;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(JUe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class eBe extends Jc{constructor(e=10,t=10,r=4473924,i=8947848){r=new ft(r),i=new ft(i);const s=t/2,o=e/t,a=e/2,c=[],l=[];for(let d=0,f=0,p=-a;d<=t;d++,p+=o){c.push(-a,0,p,a,0,p),c.push(p,0,-a,p,0,a);const m=d===s?r:i;m.toArray(l,f),f+=3,m.toArray(l,f),f+=3,m.toArray(l,f),f+=3,m.toArray(l,f),f+=3}const u=new on;u.setAttribute("position",new It(c,3)),u.setAttribute("color",new It(l,3));const h=new Os({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class tBe extends Jc{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new ft(s),o=new ft(o);const a=[],c=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),f=Math.sin(d)*e,p=Math.cos(d)*e;a.push(0,0,0),a.push(f,0,p);const m=h&1?s:o;c.push(m.r,m.g,m.b),c.push(m.r,m.g,m.b)}for(let h=0;h<r;h++){const d=h&1?s:o,f=e-e/r*h;for(let p=0;p<i;p++){let m=p/i*(Math.PI*2),g=Math.sin(m)*f,y=Math.cos(m)*f;a.push(g,0,y),c.push(d.r,d.g,d.b),m=(p+1)/i*(Math.PI*2),g=Math.sin(m)*f,y=Math.cos(m)*f,a.push(g,0,y),c.push(d.r,d.g,d.b)}}const l=new on;l.setAttribute("position",new It(a,3)),l.setAttribute("color",new It(c,3));const u=new Os({vertexColors:!0,toneMapped:!1});super(l,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const aL=new ne,$v=new ne,cL=new ne;class nBe extends bn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new on;i.setAttribute("position",new It([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Os({fog:!1,toneMapped:!1});this.lightPlane=new Oh(i,s),this.add(this.lightPlane),i=new on,i.setAttribute("position",new It([0,0,0,0,0,1],3)),this.targetLine=new Oh(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),aL.setFromMatrixPosition(this.light.matrixWorld),$v.setFromMatrixPosition(this.light.target.matrixWorld),cL.subVectors($v,aL),this.lightPlane.lookAt($v),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt($v),this.targetLine.scale.z=cL.length()}}const zv=new ne,Pr=new qy;class rBe extends Jc{constructor(e){const t=new on,r=new Os({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,m){c(p),c(m)}function c(p){i.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(i.length/3-1)}t.setAttribute("position",new It(i,3)),t.setAttribute("color",new It(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new ft(16755200),u=new ft(16711680),h=new ft(43775),d=new ft(16777215),f=new ft(3355443);this.setColors(l,u,h,d,f)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Pr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===na?-1:0;Br("c",t,e,Pr,0,0,s),Br("t",t,e,Pr,0,0,1),Br("n1",t,e,Pr,-1,-1,s),Br("n2",t,e,Pr,r,-1,s),Br("n3",t,e,Pr,-1,i,s),Br("n4",t,e,Pr,r,i,s),Br("f1",t,e,Pr,-1,-1,1),Br("f2",t,e,Pr,r,-1,1),Br("f3",t,e,Pr,-1,i,1),Br("f4",t,e,Pr,r,i,1),Br("u1",t,e,Pr,r*.7,i*1.1,s),Br("u2",t,e,Pr,-1*.7,i*1.1,s),Br("u3",t,e,Pr,0,i*2,s),Br("cf1",t,e,Pr,-1,0,1),Br("cf2",t,e,Pr,r,0,1),Br("cf3",t,e,Pr,0,-1,1),Br("cf4",t,e,Pr,0,i,1),Br("cn1",t,e,Pr,-1,0,s),Br("cn2",t,e,Pr,r,0,s),Br("cn3",t,e,Pr,0,-1,s),Br("cn4",t,e,Pr,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Br(n,e,t,r,i,s,o){zv.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const c=t.getAttribute("position");for(let l=0,u=a.length;l<u;l++)c.setXYZ(a[l],zv.x,zv.y,zv.z)}}const Hv=new us;class iBe extends Jc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new on;s.setIndex(new Gn(r,1)),s.setAttribute("position",new Gn(i,3)),super(s,new Os({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Hv.setFromObject(this.object),Hv.isEmpty())return;const e=Hv.min,t=Hv.max,r=this.geometry.attributes.position,i=r.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class sBe extends Jc{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new on;s.setIndex(new Gn(r,1)),s.setAttribute("position",new It(i,3)),super(s,new Os({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class oBe extends Oh{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new on;o.setAttribute("position",new It(s,3)),o.computeBoundingSphere(),super(o,new Os({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new on;c.setAttribute("position",new It(a,3)),c.computeBoundingSphere(),this.add(new Vr(c,new cu({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const lL=new ne;let Vv,fx;class aBe extends bn{constructor(e=new ne(0,0,1),t=new ne(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Vv===void 0&&(Vv=new on,Vv.setAttribute("position",new It([0,0,0,0,1,0],3)),fx=new Ky(.5,1,5,1),fx.translate(0,-.5,0)),this.position.copy(t),this.line=new Oh(Vv,new Os({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Vr(fx,new cu({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lL,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class cBe extends Jc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new on;i.setAttribute("position",new It(t,3)),i.setAttribute("color",new It(r,3));const s=new Os({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new ft,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lBe{constructor(){this.type="ShapePath",this.color=new ft,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new L_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const b=[];for(let w=0,E=y.length;w<E;w++){const x=y[w],C=new Qd;C.curves=x.curves,b.push(C)}return b}function r(y,b){const w=b.length;let E=!1;for(let x=w-1,C=0;C<w;x=C++){let R=b[x],k=b[C],_=k.x-R.x,A=k.y-R.y;if(Math.abs(A)>Number.EPSILON){if(A<0&&(R=b[C],_=-_,k=b[x],A=-A),y.y<R.y||y.y>k.y)continue;if(y.y===R.y){if(y.x===R.x)return!0}else{const M=A*(y.x-R.x)-_*(y.y-R.y);if(M===0)return!0;if(M<0)continue;E=!E}}else{if(y.y!==R.y)continue;if(k.x<=y.x&&y.x<=R.x||R.x<=y.x&&y.x<=k.x)return!0}}return E}const i=Ba.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,c;const l=[];if(s.length===1)return a=s[0],c=new Qd,c.curves=a.curves,l.push(c),l;let u=!i(s[0].getPoints());u=e?!u:u;const h=[],d=[];let f=[],p=0,m;d[p]=void 0,f[p]=[];for(let y=0,b=s.length;y<b;y++)a=s[y],m=a.getPoints(),o=i(m),o=e?!o:o,o?(!u&&d[p]&&p++,d[p]={s:new Qd,p:m},d[p].s.curves=a.curves,u&&p++,f[p]=[]):f[p].push({h:a,p:m[0]});if(!d[0])return t(s);if(d.length>1){let y=!1,b=0;for(let w=0,E=d.length;w<E;w++)h[w]=[];for(let w=0,E=d.length;w<E;w++){const x=f[w];for(let C=0;C<x.length;C++){const R=x[C];let k=!0;for(let _=0;_<d.length;_++)r(R.p,d[_].p)&&(w!==_&&b++,k?(k=!1,h[_].push(R)):y=!0);k&&h[w].push(R)}}b>0&&y===!1&&(f=h)}let g;for(let y=0,b=d.length;y<b;y++){c=d[y].s,l.push(c),g=f[y];for(let w=0,E=g.length;w<E;w++)c.holes.push(g[w].h)}return l}}class uBe extends Zc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function hBe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function dBe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function fBe(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function pC(n,e,t,r){const i=pBe(r);switch(t){case fT:return n*e;case I4:return n*e/i.components*i.byteLength;case Vy:return n*e/i.components*i.byteLength;case mT:return n*e*2/i.components*i.byteLength;case M4:return n*e*2/i.components*i.byteLength;case pT:return n*e*3/i.components*i.byteLength;case Ss:return n*e*4/i.components*i.byteLength;case R4:return n*e*4/i.components*i.byteLength;case vg:case bg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case _g:case Eg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case a_:case l_:return Math.max(n,16)*Math.max(e,8)/4;case o_:case c_:return Math.max(n,8)*Math.max(e,8)/2;case u_:case h_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case d_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case f_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case p_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case m_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case g_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case y_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case w_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case v_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case b_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case __:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case E_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case x_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case S_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case A_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case C_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case xg:case T_:case I_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case gT:case M_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case R_:case P_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function pBe(n){switch(n){case Ja:case uT:return{byteLength:1,components:1};case $0:case hT:case m1:return{byteLength:2,components:1};case C4:case T4:return{byteLength:2,components:4};case nu:case A4:case to:return{byteLength:4,components:1};case dT:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class mBe{static contain(e,t){return hBe(e,t)}static cover(e,t){return dBe(e,t)}static fill(e){return fBe(e)}static getByteLength(e,t,r,i){return pC(e,t,r,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zy);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WG(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function gBe(n){const e=new WeakMap;function t(a,c){const l=a.array,u=a.usage,h=l.byteLength,d=n.createBuffer();n.bindBuffer(c,d),n.bufferData(c,l,u),a.onUploadCallback();let f;if(l instanceof Float32Array)f=n.FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=n.SHORT;else if(l instanceof Uint32Array)f=n.UNSIGNED_INT;else if(l instanceof Int32Array)f=n.INT;else if(l instanceof Int8Array)f=n.BYTE;else if(l instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:d,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:h}}function r(a,c,l){const u=c.array,h=c.updateRanges;if(n.bindBuffer(l,a),h.length===0)n.bufferSubData(l,0,u);else{h.sort((f,p)=>f.start-p.start);let d=0;for(let f=1;f<h.length;f++){const p=h[d],m=h[f];m.start<=p.start+p.count+1?p.count=Math.max(p.count,m.start+m.count-p.start):(++d,h[d]=m)}h.length=d+1;for(let f=0,p=h.length;f<p;f++){const m=h[f];n.bufferSubData(l,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const l=e.get(a);if(l===void 0)e.set(a,t(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(l.buffer,a,c),l.version=a.version}}return{get:i,remove:s,update:o}}var yBe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wBe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,vBe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bBe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_Be=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,EBe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xBe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,SBe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ABe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,CBe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,TBe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,IBe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,MBe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,RBe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,PBe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,NBe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,OBe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,kBe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,DBe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,LBe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,UBe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,BBe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,FBe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,$Be=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,zBe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,HBe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,VBe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,WBe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,qBe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jBe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,GBe="gl_FragColor = linearToOutputTexel( gl_FragColor );",KBe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,YBe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XBe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ZBe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,JBe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,QBe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,eFe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,tFe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,nFe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,rFe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,iFe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,sFe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,oFe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,aFe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cFe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lFe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,uFe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,hFe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dFe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,fFe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pFe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,mFe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gFe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yFe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wFe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,vFe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bFe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_Fe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,EFe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,xFe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,SFe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AFe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,CFe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TFe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,IFe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MFe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,RFe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,PFe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,NFe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,OFe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kFe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,DFe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,LFe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,UFe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BFe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,FFe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,$Fe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,zFe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,HFe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,VFe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,WFe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qFe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,jFe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,GFe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,KFe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,YFe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,XFe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ZFe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,JFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,QFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,e$e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,t$e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,n$e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,r$e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,i$e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,s$e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,o$e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,a$e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,c$e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,l$e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,u$e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,h$e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,d$e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,f$e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,p$e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,m$e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const g$e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,y$e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,w$e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,v$e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,b$e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_$e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,E$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,x$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,S$e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,A$e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,C$e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,T$e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,I$e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,M$e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,R$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,P$e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N$e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,O$e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,k$e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,D$e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,L$e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,U$e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,B$e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,F$e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$$e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,z$e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H$e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V$e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,W$e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,q$e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,j$e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,G$e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,K$e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Y$e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,an={alphahash_fragment:yBe,alphahash_pars_fragment:wBe,alphamap_fragment:vBe,alphamap_pars_fragment:bBe,alphatest_fragment:_Be,alphatest_pars_fragment:EBe,aomap_fragment:xBe,aomap_pars_fragment:SBe,batching_pars_vertex:ABe,batching_vertex:CBe,begin_vertex:TBe,beginnormal_vertex:IBe,bsdfs:MBe,iridescence_fragment:RBe,bumpmap_pars_fragment:PBe,clipping_planes_fragment:NBe,clipping_planes_pars_fragment:OBe,clipping_planes_pars_vertex:kBe,clipping_planes_vertex:DBe,color_fragment:LBe,color_pars_fragment:UBe,color_pars_vertex:BBe,color_vertex:FBe,common:$Be,cube_uv_reflection_fragment:zBe,defaultnormal_vertex:HBe,displacementmap_pars_vertex:VBe,displacementmap_vertex:WBe,emissivemap_fragment:qBe,emissivemap_pars_fragment:jBe,colorspace_fragment:GBe,colorspace_pars_fragment:KBe,envmap_fragment:YBe,envmap_common_pars_fragment:XBe,envmap_pars_fragment:ZBe,envmap_pars_vertex:JBe,envmap_physical_pars_fragment:lFe,envmap_vertex:QBe,fog_vertex:eFe,fog_pars_vertex:tFe,fog_fragment:nFe,fog_pars_fragment:rFe,gradientmap_pars_fragment:iFe,lightmap_pars_fragment:sFe,lights_lambert_fragment:oFe,lights_lambert_pars_fragment:aFe,lights_pars_begin:cFe,lights_toon_fragment:uFe,lights_toon_pars_fragment:hFe,lights_phong_fragment:dFe,lights_phong_pars_fragment:fFe,lights_physical_fragment:pFe,lights_physical_pars_fragment:mFe,lights_fragment_begin:gFe,lights_fragment_maps:yFe,lights_fragment_end:wFe,logdepthbuf_fragment:vFe,logdepthbuf_pars_fragment:bFe,logdepthbuf_pars_vertex:_Fe,logdepthbuf_vertex:EFe,map_fragment:xFe,map_pars_fragment:SFe,map_particle_fragment:AFe,map_particle_pars_fragment:CFe,metalnessmap_fragment:TFe,metalnessmap_pars_fragment:IFe,morphinstance_vertex:MFe,morphcolor_vertex:RFe,morphnormal_vertex:PFe,morphtarget_pars_vertex:NFe,morphtarget_vertex:OFe,normal_fragment_begin:kFe,normal_fragment_maps:DFe,normal_pars_fragment:LFe,normal_pars_vertex:UFe,normal_vertex:BFe,normalmap_pars_fragment:FFe,clearcoat_normal_fragment_begin:$Fe,clearcoat_normal_fragment_maps:zFe,clearcoat_pars_fragment:HFe,iridescence_pars_fragment:VFe,opaque_fragment:WFe,packing:qFe,premultiplied_alpha_fragment:jFe,project_vertex:GFe,dithering_fragment:KFe,dithering_pars_fragment:YFe,roughnessmap_fragment:XFe,roughnessmap_pars_fragment:ZFe,shadowmap_pars_fragment:JFe,shadowmap_pars_vertex:QFe,shadowmap_vertex:e$e,shadowmask_pars_fragment:t$e,skinbase_vertex:n$e,skinning_pars_vertex:r$e,skinning_vertex:i$e,skinnormal_vertex:s$e,specularmap_fragment:o$e,specularmap_pars_fragment:a$e,tonemapping_fragment:c$e,tonemapping_pars_fragment:l$e,transmission_fragment:u$e,transmission_pars_fragment:h$e,uv_pars_fragment:d$e,uv_pars_vertex:f$e,uv_vertex:p$e,worldpos_vertex:m$e,background_vert:g$e,background_frag:y$e,backgroundCube_vert:w$e,backgroundCube_frag:v$e,cube_vert:b$e,cube_frag:_$e,depth_vert:E$e,depth_frag:x$e,distanceRGBA_vert:S$e,distanceRGBA_frag:A$e,equirect_vert:C$e,equirect_frag:T$e,linedashed_vert:I$e,linedashed_frag:M$e,meshbasic_vert:R$e,meshbasic_frag:P$e,meshlambert_vert:N$e,meshlambert_frag:O$e,meshmatcap_vert:k$e,meshmatcap_frag:D$e,meshnormal_vert:L$e,meshnormal_frag:U$e,meshphong_vert:B$e,meshphong_frag:F$e,meshphysical_vert:$$e,meshphysical_frag:z$e,meshtoon_vert:H$e,meshtoon_frag:V$e,points_vert:W$e,points_frag:q$e,shadow_vert:j$e,shadow_frag:G$e,sprite_vert:K$e,sprite_frag:Y$e},ot={common:{diffuse:{value:new ft(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Qt}},envmap:{envMap:{value:null},envMapRotation:{value:new Qt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Qt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Qt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Qt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Qt},normalScale:{value:new Ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Qt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Qt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Qt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Qt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ft(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ft(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0},uvTransform:{value:new Qt}},sprite:{diffuse:{value:new ft(16777215)},opacity:{value:1},center:{value:new Ue(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}}},Pa={basic:{uniforms:ws([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:an.meshbasic_vert,fragmentShader:an.meshbasic_frag},lambert:{uniforms:ws([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new ft(0)}}]),vertexShader:an.meshlambert_vert,fragmentShader:an.meshlambert_frag},phong:{uniforms:ws([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new ft(0)},specular:{value:new ft(1118481)},shininess:{value:30}}]),vertexShader:an.meshphong_vert,fragmentShader:an.meshphong_frag},standard:{uniforms:ws([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new ft(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag},toon:{uniforms:ws([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new ft(0)}}]),vertexShader:an.meshtoon_vert,fragmentShader:an.meshtoon_frag},matcap:{uniforms:ws([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:an.meshmatcap_vert,fragmentShader:an.meshmatcap_frag},points:{uniforms:ws([ot.points,ot.fog]),vertexShader:an.points_vert,fragmentShader:an.points_frag},dashed:{uniforms:ws([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:an.linedashed_vert,fragmentShader:an.linedashed_frag},depth:{uniforms:ws([ot.common,ot.displacementmap]),vertexShader:an.depth_vert,fragmentShader:an.depth_frag},normal:{uniforms:ws([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:an.meshnormal_vert,fragmentShader:an.meshnormal_frag},sprite:{uniforms:ws([ot.sprite,ot.fog]),vertexShader:an.sprite_vert,fragmentShader:an.sprite_frag},background:{uniforms:{uvTransform:{value:new Qt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:an.background_vert,fragmentShader:an.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Qt}},vertexShader:an.backgroundCube_vert,fragmentShader:an.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:an.cube_vert,fragmentShader:an.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:an.equirect_vert,fragmentShader:an.equirect_frag},distanceRGBA:{uniforms:ws([ot.common,ot.displacementmap,{referencePosition:{value:new ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:an.distanceRGBA_vert,fragmentShader:an.distanceRGBA_frag},shadow:{uniforms:ws([ot.lights,ot.fog,{color:{value:new ft(0)},opacity:{value:1}}]),vertexShader:an.shadow_vert,fragmentShader:an.shadow_frag}};Pa.physical={uniforms:ws([Pa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Qt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Qt},clearcoatNormalScale:{value:new Ue(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Qt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Qt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Qt},sheen:{value:0},sheenColor:{value:new ft(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Qt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Qt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Qt},transmissionSamplerSize:{value:new Ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Qt},attenuationDistance:{value:0},attenuationColor:{value:new ft(0)},specularColor:{value:new ft(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Qt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Qt},anisotropyVector:{value:new Ue},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Qt}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag};const Wv={r:0,b:0,g:0},ud=new Po,X$e=new jt;function Z$e(n,e,t,r,i,s,o){const a=new ft(0);let c=s===!0?0:1,l,u,h=null,d=0,f=null;function p(w){let E=w.isScene===!0?w.background:null;return E&&E.isTexture&&(E=(w.backgroundBlurriness>0?t:e).get(E)),E}function m(w){let E=!1;const x=p(w);x===null?y(a,c):x&&x.isColor&&(y(x,1),E=!0);const C=n.xr.getEnvironmentBlendMode();C==="additive"?r.buffers.color.setClear(0,0,0,1,o):C==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(w,E){const x=p(E);x&&(x.isCubeTexture||x.mapping===p1)?(u===void 0&&(u=new Vr(new Ff(1,1,1),new Qa({name:"BackgroundCubeMaterial",uniforms:q0(Pa.backgroundCube.uniforms),vertexShader:Pa.backgroundCube.vertexShader,fragmentShader:Pa.backgroundCube.fragmentShader,side:Is,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,R,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),ud.copy(E.backgroundRotation),ud.x*=-1,ud.y*=-1,ud.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(ud.y*=-1,ud.z*=-1),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(X$e.makeRotationFromEuler(ud)),u.material.toneMapped=vn.getTransfer(x.colorSpace)!==Vn,(h!==x||d!==x.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=x,d=x.version,f=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(l===void 0&&(l=new Vr(new w1(2,2),new Qa({name:"BackgroundMaterial",uniforms:q0(Pa.background.uniforms),vertexShader:Pa.background.vertexShader,fragmentShader:Pa.background.fragmentShader,side:eu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=x,l.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,l.material.toneMapped=vn.getTransfer(x.colorSpace)!==Vn,x.matrixAutoUpdate===!0&&x.updateMatrix(),l.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||d!==x.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,h=x,d=x.version,f=n.toneMapping),l.layers.enableAll(),w.unshift(l,l.geometry,l.material,0,0,null))}function y(w,E){w.getRGB(Wv,Vj(n)),r.buffers.color.setClear(Wv.r,Wv.g,Wv.b,E,o)}function b(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),l!==void 0&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}return{getClearColor:function(){return a},setClearColor:function(w,E=1){a.set(w),c=E,y(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(w){c=w,y(a,c)},render:m,addToRenderList:g,dispose:b}}function J$e(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=d(null);let s=i,o=!1;function a(A,M,D,P,v){let S=!1;const T=h(P,D,M);s!==T&&(s=T,l(s.object)),S=f(A,P,D,v),S&&p(A,P,D,v),v!==null&&e.update(v,n.ELEMENT_ARRAY_BUFFER),(S||o)&&(o=!1,E(A,M,D,P),v!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(v).buffer))}function c(){return n.createVertexArray()}function l(A){return n.bindVertexArray(A)}function u(A){return n.deleteVertexArray(A)}function h(A,M,D){const P=D.wireframe===!0;let v=r[A.id];v===void 0&&(v={},r[A.id]=v);let S=v[M.id];S===void 0&&(S={},v[M.id]=S);let T=S[P];return T===void 0&&(T=d(c()),S[P]=T),T}function d(A){const M=[],D=[],P=[];for(let v=0;v<t;v++)M[v]=0,D[v]=0,P[v]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:M,enabledAttributes:D,attributeDivisors:P,object:A,attributes:{},index:null}}function f(A,M,D,P){const v=s.attributes,S=M.attributes;let T=0;const L=D.getAttributes();for(const U in L)if(L[U].location>=0){const W=v[U];let F=S[U];if(F===void 0&&(U==="instanceMatrix"&&A.instanceMatrix&&(F=A.instanceMatrix),U==="instanceColor"&&A.instanceColor&&(F=A.instanceColor)),W===void 0||W.attribute!==F||F&&W.data!==F.data)return!0;T++}return s.attributesNum!==T||s.index!==P}function p(A,M,D,P){const v={},S=M.attributes;let T=0;const L=D.getAttributes();for(const U in L)if(L[U].location>=0){let W=S[U];W===void 0&&(U==="instanceMatrix"&&A.instanceMatrix&&(W=A.instanceMatrix),U==="instanceColor"&&A.instanceColor&&(W=A.instanceColor));const F={};F.attribute=W,W&&W.data&&(F.data=W.data),v[U]=F,T++}s.attributes=v,s.attributesNum=T,s.index=P}function m(){const A=s.newAttributes;for(let M=0,D=A.length;M<D;M++)A[M]=0}function g(A){y(A,0)}function y(A,M){const D=s.newAttributes,P=s.enabledAttributes,v=s.attributeDivisors;D[A]=1,P[A]===0&&(n.enableVertexAttribArray(A),P[A]=1),v[A]!==M&&(n.vertexAttribDivisor(A,M),v[A]=M)}function b(){const A=s.newAttributes,M=s.enabledAttributes;for(let D=0,P=M.length;D<P;D++)M[D]!==A[D]&&(n.disableVertexAttribArray(D),M[D]=0)}function w(A,M,D,P,v,S,T){T===!0?n.vertexAttribIPointer(A,M,D,v,S):n.vertexAttribPointer(A,M,D,P,v,S)}function E(A,M,D,P){m();const v=P.attributes,S=D.getAttributes(),T=M.defaultAttributeValues;for(const L in S){const U=S[L];if(U.location>=0){let V=v[L];if(V===void 0&&(L==="instanceMatrix"&&A.instanceMatrix&&(V=A.instanceMatrix),L==="instanceColor"&&A.instanceColor&&(V=A.instanceColor)),V!==void 0){const W=V.normalized,F=V.itemSize,I=e.get(V);if(I===void 0)continue;const N=I.buffer,$=I.type,j=I.bytesPerElement,te=$===n.INT||$===n.UNSIGNED_INT||V.gpuType===A4;if(V.isInterleavedBufferAttribute){const ce=V.data,ve=ce.stride,Te=V.offset;if(ce.isInstancedInterleavedBuffer){for(let $e=0;$e<U.locationSize;$e++)y(U.location+$e,ce.meshPerAttribute);A.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let $e=0;$e<U.locationSize;$e++)g(U.location+$e);n.bindBuffer(n.ARRAY_BUFFER,N);for(let $e=0;$e<U.locationSize;$e++)w(U.location+$e,F/U.locationSize,$,W,ve*j,(Te+F/U.locationSize*$e)*j,te)}else{if(V.isInstancedBufferAttribute){for(let ce=0;ce<U.locationSize;ce++)y(U.location+ce,V.meshPerAttribute);A.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let ce=0;ce<U.locationSize;ce++)g(U.location+ce);n.bindBuffer(n.ARRAY_BUFFER,N);for(let ce=0;ce<U.locationSize;ce++)w(U.location+ce,F/U.locationSize,$,W,F*j,F/U.locationSize*ce*j,te)}}else if(T!==void 0){const W=T[L];if(W!==void 0)switch(W.length){case 2:n.vertexAttrib2fv(U.location,W);break;case 3:n.vertexAttrib3fv(U.location,W);break;case 4:n.vertexAttrib4fv(U.location,W);break;default:n.vertexAttrib1fv(U.location,W)}}}}b()}function x(){k();for(const A in r){const M=r[A];for(const D in M){const P=M[D];for(const v in P)u(P[v].object),delete P[v];delete M[D]}delete r[A]}}function C(A){if(r[A.id]===void 0)return;const M=r[A.id];for(const D in M){const P=M[D];for(const v in P)u(P[v].object),delete P[v];delete M[D]}delete r[A.id]}function R(A){for(const M in r){const D=r[M];if(D[A.id]===void 0)continue;const P=D[A.id];for(const v in P)u(P[v].object),delete P[v];delete D[A.id]}}function k(){_(),o=!0,s!==i&&(s=i,l(s.object))}function _(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:k,resetDefaultState:_,dispose:x,releaseStatesOfGeometry:C,releaseStatesOfProgram:R,initAttributes:m,enableAttribute:g,disableUnusedAttributes:b}}function Q$e(n,e,t){let r;function i(l){r=l}function s(l,u){n.drawArrays(r,l,u),t.update(u,r,1)}function o(l,u,h){h!==0&&(n.drawArraysInstanced(r,l,u,h),t.update(u,r,h))}function a(l,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,l,0,u,0,h);let f=0;for(let p=0;p<h;p++)f+=u[p];t.update(f,r,1)}function c(l,u,h,d){if(h===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<l.length;p++)o(l[p],u[p],d[p]);else{f.multiDrawArraysInstancedWEBGL(r,l,0,u,0,d,0,h);let p=0;for(let m=0;m<h;m++)p+=u[m]*d[m];t.update(p,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function eze(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(R){return!(R!==Ss&&r.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(R){const k=R===m1&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==Ja&&r.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==to&&!k)}function c(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=t.precision!==void 0?t.precision:"highp";const u=c(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const h=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),b=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=p>0,C=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:h,reverseDepthBuffer:d,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:g,maxAttributes:y,maxVertexUniforms:b,maxVaryings:w,maxFragmentUniforms:E,vertexTextures:x,maxSamples:C}}function tze(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Yu,a=new Qt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||r!==0||i;return i=d,r=h.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const p=h.clippingPlanes,m=h.clipIntersection,g=h.clipShadows,y=n.get(h);if(!i||p===null||p.length===0||s&&!g)s?u(null):l();else{const b=s?0:r,w=b*4;let E=y.clippingState||null;c.value=E,E=u(p,d,w,f);for(let x=0;x!==w;++x)E[x]=t[x];y.clippingState=E,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=b}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,d,f,p){const m=h!==null?h.length:0;let g=null;if(m!==0){if(g=c.value,p!==!0||g===null){const y=f+m*4,b=d.matrixWorldInverse;a.getNormalMatrix(b),(g===null||g.length<y)&&(g=new Float32Array(y));for(let w=0,E=f;w!==m;++w,E+=4)o.copy(h[w]).applyMatrix4(b,a),o.normal.toArray(g,E),g[E+3]=o.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function nze(n){let e=new WeakMap;function t(o,a){return a===H2?o.mapping=tu:a===V2&&(o.mapping=Nh),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===H2||a===V2)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const l=new jj(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",i),t(l.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const e0=4,uL=[.125,.215,.35,.446,.526,.582],xd=20,px=new eE,hL=new ft;let mx=null,gx=0,yx=0,wx=!1;const yd=(1+Math.sqrt(5))/2,Op=1/yd,dL=[new ne(-yd,Op,0),new ne(yd,Op,0),new ne(-Op,0,yd),new ne(Op,0,yd),new ne(0,yd,-Op),new ne(0,yd,Op),new ne(-1,1,-1),new ne(1,1,-1),new ne(-1,1,1),new ne(1,1,1)],rze=new ne;class mC{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100,s={}){const{size:o=256,position:a=rze}=s;mx=this._renderer.getRenderTarget(),gx=this._renderer.getActiveCubeFace(),yx=this._renderer.getActiveMipmapLevel(),wx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,r,i,c,a),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=mL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=pL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mx,gx,yx),this._renderer.xr.enabled=wx,e.scissorTest=!1,qv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===tu||e.mapping===Nh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mx=this._renderer.getRenderTarget(),gx=this._renderer.getActiveCubeFace(),yx=this._renderer.getActiveMipmapLevel(),wx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:m1,format:Ss,colorSpace:vf,depthBuffer:!1},i=fL(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=fL(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ize(s)),this._blurMaterial=sze(s,e,t)}return i}_compileMaterial(e){const t=new Vr(this._lodPlanes[0],e);this._renderer.compile(t,px)}_sceneToCubeUV(e,t,r,i,s){const c=new Gr(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,f=h.toneMapping;h.getClearColor(hL),h.toneMapping=Dc,h.autoClear=!1;const p=new cu({name:"PMREM.Background",side:Is,depthWrite:!1,depthTest:!1}),m=new Vr(new Ff,p);let g=!1;const y=e.background;y?y.isColor&&(p.color.copy(y),e.background=null,g=!0):(p.color.copy(hL),g=!0);for(let b=0;b<6;b++){const w=b%3;w===0?(c.up.set(0,l[b],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+u[b],s.y,s.z)):w===1?(c.up.set(0,0,l[b]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+u[b],s.z)):(c.up.set(0,l[b],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+u[b]));const E=this._cubeSize;qv(i,w*E,b>2?E:0,E,E),h.setRenderTarget(i),g&&h.render(m,c),h.render(e,c)}m.geometry.dispose(),m.material.dispose(),h.toneMapping=f,h.autoClear=d,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===tu||e.mapping===Nh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=mL()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=pL());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Vr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const c=this._cubeSize;qv(t,0,0,3*c,2*c),r.setRenderTarget(t),r.render(o,px)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=dL[(i-s-1)%dL.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const c=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Vr(this._lodPlanes[i],l),d=l.uniforms,f=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*xd-1),m=s/p,g=isFinite(s)?1+Math.floor(u*m):xd;g>xd&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${xd}`);const y=[];let b=0;for(let R=0;R<xd;++R){const k=R/m,_=Math.exp(-k*k/2);y.push(_),R===0?b+=_:R<g&&(b+=2*_)}for(let R=0;R<y.length;R++)y[R]=y[R]/b;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=y,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:w}=this;d.dTheta.value=p,d.mipInt.value=w-r;const E=this._sizeLods[i],x=3*E*(i>w-e0?i-w+e0:0),C=4*(this._cubeSize-E);qv(t,x,C,3*E,2*E),c.setRenderTarget(t),c.render(h,px)}}function ize(n){const e=[],t=[],r=[];let i=n;const s=n-e0+1+uL.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let c=1/a;o>n-e0?c=uL[o-n+e0-1]:o===0&&(c=0),r.push(c);const l=1/(a-2),u=-l,h=1+l,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,p=6,m=3,g=2,y=1,b=new Float32Array(m*p*f),w=new Float32Array(g*p*f),E=new Float32Array(y*p*f);for(let C=0;C<f;C++){const R=C%3*2/3-1,k=C>2?0:-1,_=[R,k,0,R+2/3,k,0,R+2/3,k+1,0,R,k,0,R+2/3,k+1,0,R,k+1,0];b.set(_,m*p*C),w.set(d,g*p*C);const A=[C,C,C,C,C,C];E.set(A,y*p*C)}const x=new on;x.setAttribute("position",new Gn(b,m)),x.setAttribute("uv",new Gn(w,g)),x.setAttribute("faceIndex",new Gn(E,y)),e.push(x),i>e0&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function fL(n,e,t){const r=new jc(n,e,t);return r.texture.mapping=p1,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function qv(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function sze(n,e,t){const r=new Float32Array(xd),i=new ne(0,1,0);return new Qa({name:"SphericalGaussianBlur",defines:{n:xd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:GT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Vl,depthTest:!1,depthWrite:!1})}function pL(){return new Qa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:GT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Vl,depthTest:!1,depthWrite:!1})}function mL(){return new Qa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:GT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Vl,depthTest:!1,depthWrite:!1})}function GT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function oze(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const c=a.mapping,l=c===H2||c===V2,u=c===tu||c===Nh;if(l||u){let h=e.get(a);const d=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new mC(n)),h=l?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const f=a.image;return l&&f&&f.height>0||u&&f&&i(f)?(t===null&&(t=new mC(n)),h=l?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function i(a){let c=0;const l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function aze(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&g0("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function cze(n,e,t,r){const i={},s=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete i[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function c(h){const d=h.attributes;for(const f in d)e.update(d[f],n.ARRAY_BUFFER)}function l(h){const d=[],f=h.index,p=h.attributes.position;let m=0;if(f!==null){const b=f.array;m=f.version;for(let w=0,E=b.length;w<E;w+=3){const x=b[w+0],C=b[w+1],R=b[w+2];d.push(x,C,C,R,R,x)}}else if(p!==void 0){const b=p.array;m=p.version;for(let w=0,E=b.length/3-1;w<E;w+=3){const x=w+0,C=w+1,R=w+2;d.push(x,C,C,R,R,x)}}else return;const g=new(Fj(d)?xT:ET)(d,1);g.version=m;const y=s.get(h);y&&e.remove(y),s.set(h,g)}function u(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&l(h)}else l(h);return s.get(h)}return{get:a,update:c,getWireframeAttribute:u}}function lze(n,e,t){let r;function i(d){r=d}let s,o;function a(d){s=d.type,o=d.bytesPerElement}function c(d,f){n.drawElements(r,f,s,d*o),t.update(f,r,1)}function l(d,f,p){p!==0&&(n.drawElementsInstanced(r,f,s,d*o,p),t.update(f,r,p))}function u(d,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,f,0,s,d,0,p);let g=0;for(let y=0;y<p;y++)g+=f[y];t.update(g,r,1)}function h(d,f,p,m){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let y=0;y<d.length;y++)l(d[y]/o,f[y],m[y]);else{g.multiDrawElementsInstancedWEBGL(r,f,0,s,d,0,m,0,p);let y=0;for(let b=0;b<p;b++)y+=f[b]*m[b];t.update(y,r,1)}}this.setMode=i,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function uze(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function hze(n,e,t){const r=new WeakMap,i=new Sn;function s(o,a,c){const l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let d=r.get(a);if(d===void 0||d.count!==h){let _=function(){R.dispose(),r.delete(a),a.removeEventListener("dispose",_)};d!==void 0&&d.texture.dispose();const f=a.morphAttributes.position!==void 0,p=a.morphAttributes.normal!==void 0,m=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],y=a.morphAttributes.normal||[],b=a.morphAttributes.color||[];let w=0;f===!0&&(w=1),p===!0&&(w=2),m===!0&&(w=3);let E=a.attributes.position.count*w,x=1;E>e.maxTextureSize&&(x=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const C=new Float32Array(E*x*4*h),R=new N4(C,E,x,h);R.type=to,R.needsUpdate=!0;const k=w*4;for(let A=0;A<h;A++){const M=g[A],D=y[A],P=b[A],v=E*x*4*A;for(let S=0;S<M.count;S++){const T=S*k;f===!0&&(i.fromBufferAttribute(M,S),C[v+T+0]=i.x,C[v+T+1]=i.y,C[v+T+2]=i.z,C[v+T+3]=0),p===!0&&(i.fromBufferAttribute(D,S),C[v+T+4]=i.x,C[v+T+5]=i.y,C[v+T+6]=i.z,C[v+T+7]=0),m===!0&&(i.fromBufferAttribute(P,S),C[v+T+8]=i.x,C[v+T+9]=i.y,C[v+T+10]=i.z,C[v+T+11]=P.itemSize===4?i.w:1)}}d={count:h,texture:R,size:new Ue(E,x)},r.set(a,d),a.addEventListener("dispose",_)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let f=0;for(let m=0;m<l.length;m++)f+=l[m];const p=a.morphTargetsRelative?1:1-f;c.getUniforms().setValue(n,"morphTargetBaseInfluence",p),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:s}}function dze(n,e,t,r){let i=new WeakMap;function s(c){const l=r.render.frame,u=c.geometry,h=e.get(c,u);if(i.get(h)!==l&&(e.update(h),i.set(h,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),i.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),i.set(c,l))),c.isSkinnedMesh){const d=c.skeleton;i.get(d)!==l&&(d.update(),i.set(d,l))}return h}function o(){i=new WeakMap}function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}const qG=new kr,gL=new TT(1,1),jG=new N4,GG=new O4,KG=new jy,yL=[],wL=[],vL=new Float32Array(16),bL=new Float32Array(9),_L=new Float32Array(4);function v1(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=yL[i];if(s===void 0&&(s=new Float32Array(i),yL[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function li(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ui(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function rE(n,e){let t=wL[e];t===void 0&&(t=new Int32Array(e),wL[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function fze(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function pze(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(li(t,e))return;n.uniform2fv(this.addr,e),ui(t,e)}}function mze(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(li(t,e))return;n.uniform3fv(this.addr,e),ui(t,e)}}function gze(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(li(t,e))return;n.uniform4fv(this.addr,e),ui(t,e)}}function yze(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(li(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ui(t,e)}else{if(li(t,r))return;_L.set(r),n.uniformMatrix2fv(this.addr,!1,_L),ui(t,r)}}function wze(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(li(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ui(t,e)}else{if(li(t,r))return;bL.set(r),n.uniformMatrix3fv(this.addr,!1,bL),ui(t,r)}}function vze(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(li(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ui(t,e)}else{if(li(t,r))return;vL.set(r),n.uniformMatrix4fv(this.addr,!1,vL),ui(t,r)}}function bze(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function _ze(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(li(t,e))return;n.uniform2iv(this.addr,e),ui(t,e)}}function Eze(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(li(t,e))return;n.uniform3iv(this.addr,e),ui(t,e)}}function xze(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(li(t,e))return;n.uniform4iv(this.addr,e),ui(t,e)}}function Sze(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Aze(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(li(t,e))return;n.uniform2uiv(this.addr,e),ui(t,e)}}function Cze(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(li(t,e))return;n.uniform3uiv(this.addr,e),ui(t,e)}}function Tze(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(li(t,e))return;n.uniform4uiv(this.addr,e),ui(t,e)}}function Ize(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(gL.compareFunction=wT,s=gL):s=qG,t.setTexture2D(e||s,i)}function Mze(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||GG,i)}function Rze(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||KG,i)}function Pze(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||jG,i)}function Nze(n){switch(n){case 5126:return fze;case 35664:return pze;case 35665:return mze;case 35666:return gze;case 35674:return yze;case 35675:return wze;case 35676:return vze;case 5124:case 35670:return bze;case 35667:case 35671:return _ze;case 35668:case 35672:return Eze;case 35669:case 35673:return xze;case 5125:return Sze;case 36294:return Aze;case 36295:return Cze;case 36296:return Tze;case 35678:case 36198:case 36298:case 36306:case 35682:return Ize;case 35679:case 36299:case 36307:return Mze;case 35680:case 36300:case 36308:case 36293:return Rze;case 36289:case 36303:case 36311:case 36292:return Pze}}function Oze(n,e){n.uniform1fv(this.addr,e)}function kze(n,e){const t=v1(e,this.size,2);n.uniform2fv(this.addr,t)}function Dze(n,e){const t=v1(e,this.size,3);n.uniform3fv(this.addr,t)}function Lze(n,e){const t=v1(e,this.size,4);n.uniform4fv(this.addr,t)}function Uze(n,e){const t=v1(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Bze(n,e){const t=v1(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Fze(n,e){const t=v1(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $ze(n,e){n.uniform1iv(this.addr,e)}function zze(n,e){n.uniform2iv(this.addr,e)}function Hze(n,e){n.uniform3iv(this.addr,e)}function Vze(n,e){n.uniform4iv(this.addr,e)}function Wze(n,e){n.uniform1uiv(this.addr,e)}function qze(n,e){n.uniform2uiv(this.addr,e)}function jze(n,e){n.uniform3uiv(this.addr,e)}function Gze(n,e){n.uniform4uiv(this.addr,e)}function Kze(n,e,t){const r=this.cache,i=e.length,s=rE(t,i);li(r,s)||(n.uniform1iv(this.addr,s),ui(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||qG,s[o])}function Yze(n,e,t){const r=this.cache,i=e.length,s=rE(t,i);li(r,s)||(n.uniform1iv(this.addr,s),ui(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||GG,s[o])}function Xze(n,e,t){const r=this.cache,i=e.length,s=rE(t,i);li(r,s)||(n.uniform1iv(this.addr,s),ui(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||KG,s[o])}function Zze(n,e,t){const r=this.cache,i=e.length,s=rE(t,i);li(r,s)||(n.uniform1iv(this.addr,s),ui(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||jG,s[o])}function Jze(n){switch(n){case 5126:return Oze;case 35664:return kze;case 35665:return Dze;case 35666:return Lze;case 35674:return Uze;case 35675:return Bze;case 35676:return Fze;case 5124:case 35670:return $ze;case 35667:case 35671:return zze;case 35668:case 35672:return Hze;case 35669:case 35673:return Vze;case 5125:return Wze;case 36294:return qze;case 36295:return jze;case 36296:return Gze;case 35678:case 36198:case 36298:case 36306:case 35682:return Kze;case 35679:case 36299:case 36307:return Yze;case 35680:case 36300:case 36308:case 36293:return Xze;case 36289:case 36303:case 36311:case 36292:return Zze}}class Qze{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Nze(t.type)}}class eHe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Jze(t.type)}}class tHe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const vx=/(\w+)(\])?(\[|\.)?/g;function EL(n,e){n.seq.push(e),n.map[e.id]=e}function nHe(n,e,t){const r=n.name,i=r.length;for(vx.lastIndex=0;;){const s=vx.exec(r),o=vx.lastIndex;let a=s[1];const c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===i){EL(t,l===void 0?new Qze(a,n,e):new eHe(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new tHe(a),EL(t,h)),t=h}}}class k3{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);nHe(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=r[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function xL(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const rHe=37297;let iHe=0;function sHe(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const SL=new Qt;function oHe(n){vn._getMatrix(SL,vn.workingColorSpace,n);const e=`mat3( ${SL.elements.map(t=>t.toFixed(4))} )`;switch(vn.getTransfer(n)){case K2:return[e,"LinearTransferOETF"];case Vn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function AL(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+sHe(n.getShaderSource(e),o)}else return i}function aHe(n,e){const t=oHe(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function cHe(n,e){let t;switch(e){case vj:t="Linear";break;case bj:t="Reinhard";break;case _j:t="Cineon";break;case x4:t="ACESFilmic";break;case xj:t="AgX";break;case Sj:t="Neutral";break;case Ej:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const jv=new ne;function lHe(){vn.getLuminanceCoefficients(jv);const n=jv.x.toFixed(4),e=jv.y.toFixed(4),t=jv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function uHe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter($m).join(`
`)}function hHe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function dHe(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function $m(n){return n!==""}function CL(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TL(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fHe=/^[ \t]*#include +<([\w\d./]+)>/gm;function gC(n){return n.replace(fHe,mHe)}const pHe=new Map;function mHe(n,e){let t=an[e];if(t===void 0){const r=pHe.get(e);if(r!==void 0)t=an[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return gC(t)}const gHe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function IL(n){return n.replace(gHe,yHe)}function yHe(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function ML(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wHe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===aT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===cT?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===_c&&(e="SHADOWMAP_TYPE_VSM"),e}function vHe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case tu:case Nh:e="ENVMAP_TYPE_CUBE";break;case p1:e="ENVMAP_TYPE_CUBE_UV";break}return e}function bHe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Nh:e="ENVMAP_MODE_REFRACTION";break}return e}function _He(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Hy:e="ENVMAP_BLENDING_MULTIPLY";break;case yj:e="ENVMAP_BLENDING_MIX";break;case wj:e="ENVMAP_BLENDING_ADD";break}return e}function EHe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function xHe(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=wHe(t),l=vHe(t),u=bHe(t),h=_He(t),d=EHe(t),f=uHe(t),p=hHe(s),m=i.createProgram();let g,y,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter($m).join(`
`),g.length>0&&(g+=`
`),y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter($m).join(`
`),y.length>0&&(y+=`
`)):(g=[ML(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($m).join(`
`),y=[ML(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Dc?"#define TONE_MAPPING":"",t.toneMapping!==Dc?an.tonemapping_pars_fragment:"",t.toneMapping!==Dc?cHe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",an.colorspace_pars_fragment,aHe("linearToOutputTexel",t.outputColorSpace),lHe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter($m).join(`
`)),o=gC(o),o=CL(o,t),o=TL(o,t),a=gC(a),a=CL(a,t),a=TL(a,t),o=IL(o),a=IL(a),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,y=["#define varying in",t.glslVersion===aC?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===aC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const w=b+g+o,E=b+y+a,x=xL(i,i.VERTEX_SHADER,w),C=xL(i,i.FRAGMENT_SHADER,E);i.attachShader(m,x),i.attachShader(m,C),t.index0AttributeName!==void 0?i.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function R(M){if(n.debug.checkShaderErrors){const D=i.getProgramInfoLog(m).trim(),P=i.getShaderInfoLog(x).trim(),v=i.getShaderInfoLog(C).trim();let S=!0,T=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if(S=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,m,x,C);else{const L=AL(i,x,"vertex"),U=AL(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+`

Material Name: `+M.name+`
Material Type: `+M.type+`

Program Info Log: `+D+`
`+L+`
`+U)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(P===""||v==="")&&(T=!1);T&&(M.diagnostics={runnable:S,programLog:D,vertexShader:{log:P,prefix:g},fragmentShader:{log:v,prefix:y}})}i.deleteShader(x),i.deleteShader(C),k=new k3(i,m),_=dHe(i,m)}let k;this.getUniforms=function(){return k===void 0&&R(this),k};let _;this.getAttributes=function(){return _===void 0&&R(this),_};let A=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return A===!1&&(A=i.getProgramParameter(m,rHe)),A},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=iHe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=C,this}let SHe=0;class AHe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new CHe(e),t.set(e,r)),r}}class CHe{constructor(e){this.id=SHe++,this.code=e,this.usedTimes=0}}function THe(n,e,t,r,i,s,o){const a=new Wy,c=new AHe,l=new Set,u=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(_){return l.add(_),_===0?"uv":`uv${_}`}function g(_,A,M,D,P){const v=D.fog,S=P.geometry,T=_.isMeshStandardMaterial?D.environment:null,L=(_.isMeshStandardMaterial?t:e).get(_.envMap||T),U=L&&L.mapping===p1?L.image.height:null,V=p[_.type];_.precision!==null&&(f=i.getMaxPrecision(_.precision),f!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",f,"instead."));const W=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,F=W!==void 0?W.length:0;let I=0;S.morphAttributes.position!==void 0&&(I=1),S.morphAttributes.normal!==void 0&&(I=2),S.morphAttributes.color!==void 0&&(I=3);let N,$,j,te;if(V){const $t=Pa[V];N=$t.vertexShader,$=$t.fragmentShader}else N=_.vertexShader,$=_.fragmentShader,c.update(_),j=c.getVertexShaderID(_),te=c.getFragmentShaderID(_);const ce=n.getRenderTarget(),ve=n.state.buffers.depth.getReversed(),Te=P.isInstancedMesh===!0,$e=P.isBatchedMesh===!0,pe=!!_.map,X=!!_.matcap,Z=!!L,H=!!_.aoMap,oe=!!_.lightMap,le=!!_.bumpMap,Q=!!_.normalMap,ie=!!_.displacementMap,xe=!!_.emissiveMap,fe=!!_.metalnessMap,me=!!_.roughnessMap,De=_.anisotropy>0,K=_.clearcoat>0,q=_.dispersion>0,he=_.iridescence>0,ge=_.sheen>0,z=_.transmission>0,O=De&&!!_.anisotropyMap,B=K&&!!_.clearcoatMap,G=K&&!!_.clearcoatNormalMap,re=K&&!!_.clearcoatRoughnessMap,ae=he&&!!_.iridescenceMap,se=he&&!!_.iridescenceThicknessMap,Le=ge&&!!_.sheenColorMap,ze=ge&&!!_.sheenRoughnessMap,Be=!!_.specularMap,He=!!_.specularColorMap,Ye=!!_.specularIntensityMap,de=z&&!!_.transmissionMap,at=z&&!!_.thicknessMap,ke=!!_.gradientMap,Qe=!!_.alphaMap,Ge=_.alphaTest>0,Ne=!!_.alphaHash,tt=!!_.extensions;let Kt=Dc;_.toneMapped&&(ce===null||ce.isXRRenderTarget===!0)&&(Kt=n.toneMapping);const Yt={shaderID:V,shaderType:_.type,shaderName:_.name,vertexShader:N,fragmentShader:$,defines:_.defines,customVertexShaderID:j,customFragmentShaderID:te,isRawShaderMaterial:_.isRawShaderMaterial===!0,glslVersion:_.glslVersion,precision:f,batching:$e,batchingColor:$e&&P._colorsTexture!==null,instancing:Te,instancingColor:Te&&P.instanceColor!==null,instancingMorph:Te&&P.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:ce===null?n.outputColorSpace:ce.isXRRenderTarget===!0?ce.texture.colorSpace:vf,alphaToCoverage:!!_.alphaToCoverage,map:pe,matcap:X,envMap:Z,envMapMode:Z&&L.mapping,envMapCubeUVHeight:U,aoMap:H,lightMap:oe,bumpMap:le,normalMap:Q,displacementMap:d&&ie,emissiveMap:xe,normalMapObjectSpace:Q&&_.normalMapType===Pj,normalMapTangentSpace:Q&&_.normalMapType===Uh,metalnessMap:fe,roughnessMap:me,anisotropy:De,anisotropyMap:O,clearcoat:K,clearcoatMap:B,clearcoatNormalMap:G,clearcoatRoughnessMap:re,dispersion:q,iridescence:he,iridescenceMap:ae,iridescenceThicknessMap:se,sheen:ge,sheenColorMap:Le,sheenRoughnessMap:ze,specularMap:Be,specularColorMap:He,specularIntensityMap:Ye,transmission:z,transmissionMap:de,thicknessMap:at,gradientMap:ke,opaque:_.transparent===!1&&_.blending===Zd&&_.alphaToCoverage===!1,alphaMap:Qe,alphaTest:Ge,alphaHash:Ne,combine:_.combine,mapUv:pe&&m(_.map.channel),aoMapUv:H&&m(_.aoMap.channel),lightMapUv:oe&&m(_.lightMap.channel),bumpMapUv:le&&m(_.bumpMap.channel),normalMapUv:Q&&m(_.normalMap.channel),displacementMapUv:ie&&m(_.displacementMap.channel),emissiveMapUv:xe&&m(_.emissiveMap.channel),metalnessMapUv:fe&&m(_.metalnessMap.channel),roughnessMapUv:me&&m(_.roughnessMap.channel),anisotropyMapUv:O&&m(_.anisotropyMap.channel),clearcoatMapUv:B&&m(_.clearcoatMap.channel),clearcoatNormalMapUv:G&&m(_.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:re&&m(_.clearcoatRoughnessMap.channel),iridescenceMapUv:ae&&m(_.iridescenceMap.channel),iridescenceThicknessMapUv:se&&m(_.iridescenceThicknessMap.channel),sheenColorMapUv:Le&&m(_.sheenColorMap.channel),sheenRoughnessMapUv:ze&&m(_.sheenRoughnessMap.channel),specularMapUv:Be&&m(_.specularMap.channel),specularColorMapUv:He&&m(_.specularColorMap.channel),specularIntensityMapUv:Ye&&m(_.specularIntensityMap.channel),transmissionMapUv:de&&m(_.transmissionMap.channel),thicknessMapUv:at&&m(_.thicknessMap.channel),alphaMapUv:Qe&&m(_.alphaMap.channel),vertexTangents:!!S.attributes.tangent&&(Q||De),vertexColors:_.vertexColors,vertexAlphas:_.vertexColors===!0&&!!S.attributes.color&&S.attributes.color.itemSize===4,pointsUvs:P.isPoints===!0&&!!S.attributes.uv&&(pe||Qe),fog:!!v,useFog:_.fog===!0,fogExp2:!!v&&v.isFogExp2,flatShading:_.flatShading===!0,sizeAttenuation:_.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:ve,skinning:P.isSkinnedMesh===!0,morphTargets:S.morphAttributes.position!==void 0,morphNormals:S.morphAttributes.normal!==void 0,morphColors:S.morphAttributes.color!==void 0,morphTargetsCount:F,morphTextureStride:I,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:_.dithering,shadowMapEnabled:n.shadowMap.enabled&&M.length>0,shadowMapType:n.shadowMap.type,toneMapping:Kt,decodeVideoTexture:pe&&_.map.isVideoTexture===!0&&vn.getTransfer(_.map.colorSpace)===Vn,decodeVideoTextureEmissive:xe&&_.emissiveMap.isVideoTexture===!0&&vn.getTransfer(_.emissiveMap.colorSpace)===Vn,premultipliedAlpha:_.premultipliedAlpha,doubleSided:_.side===Da,flipSided:_.side===Is,useDepthPacking:_.depthPacking>=0,depthPacking:_.depthPacking||0,index0AttributeName:_.index0AttributeName,extensionClipCullDistance:tt&&_.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(tt&&_.extensions.multiDraw===!0||$e)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:_.customProgramCacheKey()};return Yt.vertexUv1s=l.has(1),Yt.vertexUv2s=l.has(2),Yt.vertexUv3s=l.has(3),l.clear(),Yt}function y(_){const A=[];if(_.shaderID?A.push(_.shaderID):(A.push(_.customVertexShaderID),A.push(_.customFragmentShaderID)),_.defines!==void 0)for(const M in _.defines)A.push(M),A.push(_.defines[M]);return _.isRawShaderMaterial===!1&&(b(A,_),w(A,_),A.push(n.outputColorSpace)),A.push(_.customProgramCacheKey),A.join()}function b(_,A){_.push(A.precision),_.push(A.outputColorSpace),_.push(A.envMapMode),_.push(A.envMapCubeUVHeight),_.push(A.mapUv),_.push(A.alphaMapUv),_.push(A.lightMapUv),_.push(A.aoMapUv),_.push(A.bumpMapUv),_.push(A.normalMapUv),_.push(A.displacementMapUv),_.push(A.emissiveMapUv),_.push(A.metalnessMapUv),_.push(A.roughnessMapUv),_.push(A.anisotropyMapUv),_.push(A.clearcoatMapUv),_.push(A.clearcoatNormalMapUv),_.push(A.clearcoatRoughnessMapUv),_.push(A.iridescenceMapUv),_.push(A.iridescenceThicknessMapUv),_.push(A.sheenColorMapUv),_.push(A.sheenRoughnessMapUv),_.push(A.specularMapUv),_.push(A.specularColorMapUv),_.push(A.specularIntensityMapUv),_.push(A.transmissionMapUv),_.push(A.thicknessMapUv),_.push(A.combine),_.push(A.fogExp2),_.push(A.sizeAttenuation),_.push(A.morphTargetsCount),_.push(A.morphAttributeCount),_.push(A.numDirLights),_.push(A.numPointLights),_.push(A.numSpotLights),_.push(A.numSpotLightMaps),_.push(A.numHemiLights),_.push(A.numRectAreaLights),_.push(A.numDirLightShadows),_.push(A.numPointLightShadows),_.push(A.numSpotLightShadows),_.push(A.numSpotLightShadowsWithMaps),_.push(A.numLightProbes),_.push(A.shadowMapType),_.push(A.toneMapping),_.push(A.numClippingPlanes),_.push(A.numClipIntersection),_.push(A.depthPacking)}function w(_,A){a.disableAll(),A.supportsVertexTextures&&a.enable(0),A.instancing&&a.enable(1),A.instancingColor&&a.enable(2),A.instancingMorph&&a.enable(3),A.matcap&&a.enable(4),A.envMap&&a.enable(5),A.normalMapObjectSpace&&a.enable(6),A.normalMapTangentSpace&&a.enable(7),A.clearcoat&&a.enable(8),A.iridescence&&a.enable(9),A.alphaTest&&a.enable(10),A.vertexColors&&a.enable(11),A.vertexAlphas&&a.enable(12),A.vertexUv1s&&a.enable(13),A.vertexUv2s&&a.enable(14),A.vertexUv3s&&a.enable(15),A.vertexTangents&&a.enable(16),A.anisotropy&&a.enable(17),A.alphaHash&&a.enable(18),A.batching&&a.enable(19),A.dispersion&&a.enable(20),A.batchingColor&&a.enable(21),_.push(a.mask),a.disableAll(),A.fog&&a.enable(0),A.useFog&&a.enable(1),A.flatShading&&a.enable(2),A.logarithmicDepthBuffer&&a.enable(3),A.reverseDepthBuffer&&a.enable(4),A.skinning&&a.enable(5),A.morphTargets&&a.enable(6),A.morphNormals&&a.enable(7),A.morphColors&&a.enable(8),A.premultipliedAlpha&&a.enable(9),A.shadowMapEnabled&&a.enable(10),A.doubleSided&&a.enable(11),A.flipSided&&a.enable(12),A.useDepthPacking&&a.enable(13),A.dithering&&a.enable(14),A.transmission&&a.enable(15),A.sheen&&a.enable(16),A.opaque&&a.enable(17),A.pointsUvs&&a.enable(18),A.decodeVideoTexture&&a.enable(19),A.decodeVideoTextureEmissive&&a.enable(20),A.alphaToCoverage&&a.enable(21),_.push(a.mask)}function E(_){const A=p[_.type];let M;if(A){const D=Pa[A];M=Wj.clone(D.uniforms)}else M=_.uniforms;return M}function x(_,A){let M;for(let D=0,P=u.length;D<P;D++){const v=u[D];if(v.cacheKey===A){M=v,++M.usedTimes;break}}return M===void 0&&(M=new xHe(n,A,_,s),u.push(M)),M}function C(_){if(--_.usedTimes===0){const A=u.indexOf(_);u[A]=u[u.length-1],u.pop(),_.destroy()}}function R(_){c.remove(_)}function k(){c.dispose()}return{getParameters:g,getProgramCacheKey:y,getUniforms:E,acquireProgram:x,releaseProgram:C,releaseShaderCache:R,programs:u,dispose:k}}function IHe(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,c){n.get(o)[a]=c}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function MHe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function RL(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function PL(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(h,d,f,p,m,g){let y=n[e];return y===void 0?(y={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:m,group:g},n[e]=y):(y.id=h.id,y.object=h,y.geometry=d,y.material=f,y.groupOrder=p,y.renderOrder=h.renderOrder,y.z=m,y.group=g),e++,y}function a(h,d,f,p,m,g){const y=o(h,d,f,p,m,g);f.transmission>0?r.push(y):f.transparent===!0?i.push(y):t.push(y)}function c(h,d,f,p,m,g){const y=o(h,d,f,p,m,g);f.transmission>0?r.unshift(y):f.transparent===!0?i.unshift(y):t.unshift(y)}function l(h,d){t.length>1&&t.sort(h||MHe),r.length>1&&r.sort(d||RL),i.length>1&&i.sort(d||RL)}function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:c,finish:u,sort:l}}function RHe(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new PL,n.set(r,[o])):i>=s.length?(o=new PL,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function PHe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ne,color:new ft};break;case"SpotLight":t={position:new ne,direction:new ne,color:new ft,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ne,color:new ft,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ne,skyColor:new ft,groundColor:new ft};break;case"RectAreaLight":t={color:new ft,position:new ne,halfWidth:new ne,halfHeight:new ne};break}return n[e.id]=t,t}}}function NHe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let OHe=0;function kHe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function DHe(n){const e=new PHe,t=NHe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)r.probe.push(new ne);const i=new ne,s=new jt,o=new jt;function a(l){let u=0,h=0,d=0;for(let _=0;_<9;_++)r.probe[_].set(0,0,0);let f=0,p=0,m=0,g=0,y=0,b=0,w=0,E=0,x=0,C=0,R=0;l.sort(kHe);for(let _=0,A=l.length;_<A;_++){const M=l[_],D=M.color,P=M.intensity,v=M.distance,S=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)u+=D.r*P,h+=D.g*P,d+=D.b*P;else if(M.isLightProbe){for(let T=0;T<9;T++)r.probe[T].addScaledVector(M.sh.coefficients[T],P);R++}else if(M.isDirectionalLight){const T=e.get(M);if(T.color.copy(M.color).multiplyScalar(M.intensity),M.castShadow){const L=M.shadow,U=t.get(M);U.shadowIntensity=L.intensity,U.shadowBias=L.bias,U.shadowNormalBias=L.normalBias,U.shadowRadius=L.radius,U.shadowMapSize=L.mapSize,r.directionalShadow[f]=U,r.directionalShadowMap[f]=S,r.directionalShadowMatrix[f]=M.shadow.matrix,b++}r.directional[f]=T,f++}else if(M.isSpotLight){const T=e.get(M);T.position.setFromMatrixPosition(M.matrixWorld),T.color.copy(D).multiplyScalar(P),T.distance=v,T.coneCos=Math.cos(M.angle),T.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),T.decay=M.decay,r.spot[m]=T;const L=M.shadow;if(M.map&&(r.spotLightMap[x]=M.map,x++,L.updateMatrices(M),M.castShadow&&C++),r.spotLightMatrix[m]=L.matrix,M.castShadow){const U=t.get(M);U.shadowIntensity=L.intensity,U.shadowBias=L.bias,U.shadowNormalBias=L.normalBias,U.shadowRadius=L.radius,U.shadowMapSize=L.mapSize,r.spotShadow[m]=U,r.spotShadowMap[m]=S,E++}m++}else if(M.isRectAreaLight){const T=e.get(M);T.color.copy(D).multiplyScalar(P),T.halfWidth.set(M.width*.5,0,0),T.halfHeight.set(0,M.height*.5,0),r.rectArea[g]=T,g++}else if(M.isPointLight){const T=e.get(M);if(T.color.copy(M.color).multiplyScalar(M.intensity),T.distance=M.distance,T.decay=M.decay,M.castShadow){const L=M.shadow,U=t.get(M);U.shadowIntensity=L.intensity,U.shadowBias=L.bias,U.shadowNormalBias=L.normalBias,U.shadowRadius=L.radius,U.shadowMapSize=L.mapSize,U.shadowCameraNear=L.camera.near,U.shadowCameraFar=L.camera.far,r.pointShadow[p]=U,r.pointShadowMap[p]=S,r.pointShadowMatrix[p]=M.shadow.matrix,w++}r.point[p]=T,p++}else if(M.isHemisphereLight){const T=e.get(M);T.skyColor.copy(M.color).multiplyScalar(P),T.groundColor.copy(M.groundColor).multiplyScalar(P),r.hemi[y]=T,y++}}g>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ot.LTC_FLOAT_1,r.rectAreaLTC2=ot.LTC_FLOAT_2):(r.rectAreaLTC1=ot.LTC_HALF_1,r.rectAreaLTC2=ot.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=d;const k=r.hash;(k.directionalLength!==f||k.pointLength!==p||k.spotLength!==m||k.rectAreaLength!==g||k.hemiLength!==y||k.numDirectionalShadows!==b||k.numPointShadows!==w||k.numSpotShadows!==E||k.numSpotMaps!==x||k.numLightProbes!==R)&&(r.directional.length=f,r.spot.length=m,r.rectArea.length=g,r.point.length=p,r.hemi.length=y,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=E+x-C,r.spotLightMap.length=x,r.numSpotLightShadowsWithMaps=C,r.numLightProbes=R,k.directionalLength=f,k.pointLength=p,k.spotLength=m,k.rectAreaLength=g,k.hemiLength=y,k.numDirectionalShadows=b,k.numPointShadows=w,k.numSpotShadows=E,k.numSpotMaps=x,k.numLightProbes=R,r.version=OHe++)}function c(l,u){let h=0,d=0,f=0,p=0,m=0;const g=u.matrixWorldInverse;for(let y=0,b=l.length;y<b;y++){const w=l[y];if(w.isDirectionalLight){const E=r.directional[h];E.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(g),h++}else if(w.isSpotLight){const E=r.spot[f];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(g),E.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(g),f++}else if(w.isRectAreaLight){const E=r.rectArea[p];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(g),o.identity(),s.copy(w.matrixWorld),s.premultiply(g),o.extractRotation(s),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),p++}else if(w.isPointLight){const E=r.point[d];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(g),d++}else if(w.isHemisphereLight){const E=r.hemi[m];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(g),m++}}}return{setup:a,setupView:c,state:r}}function NL(n){const e=new DHe(n),t=[],r=[];function i(u){l.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function c(u){e.setupView(t,u)}const l={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:l,setupLights:a,setupLightsView:c,pushLight:s,pushShadow:o}}function LHe(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new NL(n),e.set(i,[a])):s>=o.length?(a=new NL(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const UHe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,BHe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function FHe(n,e,t){let r=new y1;const i=new Ue,s=new Ue,o=new Sn,a=new DT({depthPacking:Rj}),c=new LT,l={},u=t.maxTextureSize,h={[eu]:Is,[Is]:eu,[Da]:Da},d=new Qa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ue},radius:{value:4}},vertexShader:UHe,fragmentShader:BHe}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new on;p.setAttribute("position",new Gn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Vr(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=aT;let y=this.type;this.render=function(C,R,k){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||C.length===0)return;const _=n.getRenderTarget(),A=n.getActiveCubeFace(),M=n.getActiveMipmapLevel(),D=n.state;D.setBlending(Vl),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const P=y!==_c&&this.type===_c,v=y===_c&&this.type!==_c;for(let S=0,T=C.length;S<T;S++){const L=C[S],U=L.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;i.copy(U.mapSize);const V=U.getFrameExtents();if(i.multiply(V),s.copy(U.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/V.x),i.x=s.x*V.x,U.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/V.y),i.y=s.y*V.y,U.mapSize.y=s.y)),U.map===null||P===!0||v===!0){const F=this.type!==_c?{minFilter:Bi,magFilter:Bi}:{};U.map!==null&&U.map.dispose(),U.map=new jc(i.x,i.y,F),U.map.texture.name=L.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();const W=U.getViewportCount();for(let F=0;F<W;F++){const I=U.getViewport(F);o.set(s.x*I.x,s.y*I.y,s.x*I.z,s.y*I.w),D.viewport(o),U.updateMatrices(L,F),r=U.getFrustum(),E(R,k,U.camera,L,this.type)}U.isPointLightShadow!==!0&&this.type===_c&&b(U,k),U.needsUpdate=!1}y=this.type,g.needsUpdate=!1,n.setRenderTarget(_,A,M)};function b(C,R){const k=e.update(m);d.defines.VSM_SAMPLES!==C.blurSamples&&(d.defines.VSM_SAMPLES=C.blurSamples,f.defines.VSM_SAMPLES=C.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new jc(i.x,i.y)),d.uniforms.shadow_pass.value=C.map.texture,d.uniforms.resolution.value=C.mapSize,d.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(R,null,k,d,m,null),f.uniforms.shadow_pass.value=C.mapPass.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(R,null,k,f,m,null)}function w(C,R,k,_){let A=null;const M=k.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(M!==void 0)A=M;else if(A=k.isPointLight===!0?c:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0||R.alphaToCoverage===!0){const D=A.uuid,P=R.uuid;let v=l[D];v===void 0&&(v={},l[D]=v);let S=v[P];S===void 0&&(S=A.clone(),v[P]=S,R.addEventListener("dispose",x)),A=S}if(A.visible=R.visible,A.wireframe=R.wireframe,_===_c?A.side=R.shadowSide!==null?R.shadowSide:R.side:A.side=R.shadowSide!==null?R.shadowSide:h[R.side],A.alphaMap=R.alphaMap,A.alphaTest=R.alphaToCoverage===!0?.5:R.alphaTest,A.map=R.map,A.clipShadows=R.clipShadows,A.clippingPlanes=R.clippingPlanes,A.clipIntersection=R.clipIntersection,A.displacementMap=R.displacementMap,A.displacementScale=R.displacementScale,A.displacementBias=R.displacementBias,A.wireframeLinewidth=R.wireframeLinewidth,A.linewidth=R.linewidth,k.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const D=n.properties.get(A);D.light=k}return A}function E(C,R,k,_,A){if(C.visible===!1)return;if(C.layers.test(R.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&A===_c)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,C.matrixWorld);const P=e.update(C),v=C.material;if(Array.isArray(v)){const S=P.groups;for(let T=0,L=S.length;T<L;T++){const U=S[T],V=v[U.materialIndex];if(V&&V.visible){const W=w(C,V,_,A);C.onBeforeShadow(n,C,R,k,P,W,U),n.renderBufferDirect(k,null,P,W,C,U),C.onAfterShadow(n,C,R,k,P,W,U)}}}else if(v.visible){const S=w(C,v,_,A);C.onBeforeShadow(n,C,R,k,P,S,null),n.renderBufferDirect(k,null,P,S,C,null),C.onAfterShadow(n,C,R,k,P,S,null)}}const D=C.children;for(let P=0,v=D.length;P<v;P++)E(D[P],R,k,_,A)}function x(C){C.target.removeEventListener("dispose",x);for(const k in l){const _=l[k],A=C.target.uuid;A in _&&(_[A].dispose(),delete _[A])}}}const $He={[Qb]:e_,[t_]:i_,[n_]:s_,[wf]:r_,[e_]:Qb,[i_]:t_,[s_]:n_,[r_]:wf};function zHe(n,e){function t(){let de=!1;const at=new Sn;let ke=null;const Qe=new Sn(0,0,0,0);return{setMask:function(Ge){ke!==Ge&&!de&&(n.colorMask(Ge,Ge,Ge,Ge),ke=Ge)},setLocked:function(Ge){de=Ge},setClear:function(Ge,Ne,tt,Kt,Yt){Yt===!0&&(Ge*=Kt,Ne*=Kt,tt*=Kt),at.set(Ge,Ne,tt,Kt),Qe.equals(at)===!1&&(n.clearColor(Ge,Ne,tt,Kt),Qe.copy(at))},reset:function(){de=!1,ke=null,Qe.set(-1,0,0,0)}}}function r(){let de=!1,at=!1,ke=null,Qe=null,Ge=null;return{setReversed:function(Ne){if(at!==Ne){const tt=e.get("EXT_clip_control");Ne?tt.clipControlEXT(tt.LOWER_LEFT_EXT,tt.ZERO_TO_ONE_EXT):tt.clipControlEXT(tt.LOWER_LEFT_EXT,tt.NEGATIVE_ONE_TO_ONE_EXT),at=Ne;const Kt=Ge;Ge=null,this.setClear(Kt)}},getReversed:function(){return at},setTest:function(Ne){Ne?ce(n.DEPTH_TEST):ve(n.DEPTH_TEST)},setMask:function(Ne){ke!==Ne&&!de&&(n.depthMask(Ne),ke=Ne)},setFunc:function(Ne){if(at&&(Ne=$He[Ne]),Qe!==Ne){switch(Ne){case Qb:n.depthFunc(n.NEVER);break;case e_:n.depthFunc(n.ALWAYS);break;case t_:n.depthFunc(n.LESS);break;case wf:n.depthFunc(n.LEQUAL);break;case n_:n.depthFunc(n.EQUAL);break;case r_:n.depthFunc(n.GEQUAL);break;case i_:n.depthFunc(n.GREATER);break;case s_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Qe=Ne}},setLocked:function(Ne){de=Ne},setClear:function(Ne){Ge!==Ne&&(at&&(Ne=1-Ne),n.clearDepth(Ne),Ge=Ne)},reset:function(){de=!1,ke=null,Qe=null,Ge=null,at=!1}}}function i(){let de=!1,at=null,ke=null,Qe=null,Ge=null,Ne=null,tt=null,Kt=null,Yt=null;return{setTest:function($t){de||($t?ce(n.STENCIL_TEST):ve(n.STENCIL_TEST))},setMask:function($t){at!==$t&&!de&&(n.stencilMask($t),at=$t)},setFunc:function($t,ks,Un){(ke!==$t||Qe!==ks||Ge!==Un)&&(n.stencilFunc($t,ks,Un),ke=$t,Qe=ks,Ge=Un)},setOp:function($t,ks,Un){(Ne!==$t||tt!==ks||Kt!==Un)&&(n.stencilOp($t,ks,Un),Ne=$t,tt=ks,Kt=Un)},setLocked:function($t){de=$t},setClear:function($t){Yt!==$t&&(n.clearStencil($t),Yt=$t)},reset:function(){de=!1,at=null,ke=null,Qe=null,Ge=null,Ne=null,tt=null,Kt=null,Yt=null}}}const s=new t,o=new r,a=new i,c=new WeakMap,l=new WeakMap;let u={},h={},d=new WeakMap,f=[],p=null,m=!1,g=null,y=null,b=null,w=null,E=null,x=null,C=null,R=new ft(0,0,0),k=0,_=!1,A=null,M=null,D=null,P=null,v=null;const S=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let T=!1,L=0;const U=n.getParameter(n.VERSION);U.indexOf("WebGL")!==-1?(L=parseFloat(/^WebGL (\d)/.exec(U)[1]),T=L>=1):U.indexOf("OpenGL ES")!==-1&&(L=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),T=L>=2);let V=null,W={};const F=n.getParameter(n.SCISSOR_BOX),I=n.getParameter(n.VIEWPORT),N=new Sn().fromArray(F),$=new Sn().fromArray(I);function j(de,at,ke,Qe){const Ge=new Uint8Array(4),Ne=n.createTexture();n.bindTexture(de,Ne),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let tt=0;tt<ke;tt++)de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?n.texImage3D(at,0,n.RGBA,1,1,Qe,0,n.RGBA,n.UNSIGNED_BYTE,Ge):n.texImage2D(at+tt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ge);return Ne}const te={};te[n.TEXTURE_2D]=j(n.TEXTURE_2D,n.TEXTURE_2D,1),te[n.TEXTURE_CUBE_MAP]=j(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),te[n.TEXTURE_2D_ARRAY]=j(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),te[n.TEXTURE_3D]=j(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ce(n.DEPTH_TEST),o.setFunc(wf),le(!1),Q(tC),ce(n.CULL_FACE),H(Vl);function ce(de){u[de]!==!0&&(n.enable(de),u[de]=!0)}function ve(de){u[de]!==!1&&(n.disable(de),u[de]=!1)}function Te(de,at){return h[de]!==at?(n.bindFramebuffer(de,at),h[de]=at,de===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=at),de===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=at),!0):!1}function $e(de,at){let ke=f,Qe=!1;if(de){ke=d.get(at),ke===void 0&&(ke=[],d.set(at,ke));const Ge=de.textures;if(ke.length!==Ge.length||ke[0]!==n.COLOR_ATTACHMENT0){for(let Ne=0,tt=Ge.length;Ne<tt;Ne++)ke[Ne]=n.COLOR_ATTACHMENT0+Ne;ke.length=Ge.length,Qe=!0}}else ke[0]!==n.BACK&&(ke[0]=n.BACK,Qe=!0);Qe&&n.drawBuffers(ke)}function pe(de){return p!==de?(n.useProgram(de),p=de,!0):!1}const X={[th]:n.FUNC_ADD,[ej]:n.FUNC_SUBTRACT,[tj]:n.FUNC_REVERSE_SUBTRACT};X[nj]=n.MIN,X[rj]=n.MAX;const Z={[ij]:n.ZERO,[sj]:n.ONE,[oj]:n.SRC_COLOR,[Zb]:n.SRC_ALPHA,[dj]:n.SRC_ALPHA_SATURATE,[uj]:n.DST_COLOR,[cj]:n.DST_ALPHA,[aj]:n.ONE_MINUS_SRC_COLOR,[Jb]:n.ONE_MINUS_SRC_ALPHA,[hj]:n.ONE_MINUS_DST_COLOR,[lj]:n.ONE_MINUS_DST_ALPHA,[fj]:n.CONSTANT_COLOR,[pj]:n.ONE_MINUS_CONSTANT_COLOR,[mj]:n.CONSTANT_ALPHA,[gj]:n.ONE_MINUS_CONSTANT_ALPHA};function H(de,at,ke,Qe,Ge,Ne,tt,Kt,Yt,$t){if(de===Vl){m===!0&&(ve(n.BLEND),m=!1);return}if(m===!1&&(ce(n.BLEND),m=!0),de!==Qq){if(de!==g||$t!==_){if((y!==th||E!==th)&&(n.blendEquation(n.FUNC_ADD),y=th,E=th),$t)switch(de){case Zd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nC:n.blendFunc(n.ONE,n.ONE);break;case rC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iC:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case Zd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nC:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case rC:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iC:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}b=null,w=null,x=null,C=null,R.set(0,0,0),k=0,g=de,_=$t}return}Ge=Ge||at,Ne=Ne||ke,tt=tt||Qe,(at!==y||Ge!==E)&&(n.blendEquationSeparate(X[at],X[Ge]),y=at,E=Ge),(ke!==b||Qe!==w||Ne!==x||tt!==C)&&(n.blendFuncSeparate(Z[ke],Z[Qe],Z[Ne],Z[tt]),b=ke,w=Qe,x=Ne,C=tt),(Kt.equals(R)===!1||Yt!==k)&&(n.blendColor(Kt.r,Kt.g,Kt.b,Yt),R.copy(Kt),k=Yt),g=de,_=!1}function oe(de,at){de.side===Da?ve(n.CULL_FACE):ce(n.CULL_FACE);let ke=de.side===Is;at&&(ke=!ke),le(ke),de.blending===Zd&&de.transparent===!1?H(Vl):H(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),o.setFunc(de.depthFunc),o.setTest(de.depthTest),o.setMask(de.depthWrite),s.setMask(de.colorWrite);const Qe=de.stencilWrite;a.setTest(Qe),Qe&&(a.setMask(de.stencilWriteMask),a.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),a.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),xe(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?ce(n.SAMPLE_ALPHA_TO_COVERAGE):ve(n.SAMPLE_ALPHA_TO_COVERAGE)}function le(de){A!==de&&(de?n.frontFace(n.CW):n.frontFace(n.CCW),A=de)}function Q(de){de!==Zq?(ce(n.CULL_FACE),de!==M&&(de===tC?n.cullFace(n.BACK):de===Jq?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ve(n.CULL_FACE),M=de}function ie(de){de!==D&&(T&&n.lineWidth(de),D=de)}function xe(de,at,ke){de?(ce(n.POLYGON_OFFSET_FILL),(P!==at||v!==ke)&&(n.polygonOffset(at,ke),P=at,v=ke)):ve(n.POLYGON_OFFSET_FILL)}function fe(de){de?ce(n.SCISSOR_TEST):ve(n.SCISSOR_TEST)}function me(de){de===void 0&&(de=n.TEXTURE0+S-1),V!==de&&(n.activeTexture(de),V=de)}function De(de,at,ke){ke===void 0&&(V===null?ke=n.TEXTURE0+S-1:ke=V);let Qe=W[ke];Qe===void 0&&(Qe={type:void 0,texture:void 0},W[ke]=Qe),(Qe.type!==de||Qe.texture!==at)&&(V!==ke&&(n.activeTexture(ke),V=ke),n.bindTexture(de,at||te[de]),Qe.type=de,Qe.texture=at)}function K(){const de=W[V];de!==void 0&&de.type!==void 0&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function q(){try{n.compressedTexImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function he(){try{n.compressedTexImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ge(){try{n.texSubImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function z(){try{n.texSubImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function O(){try{n.compressedTexSubImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function B(){try{n.compressedTexSubImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function G(){try{n.texStorage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function re(){try{n.texStorage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ae(){try{n.texImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function se(){try{n.texImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Le(de){N.equals(de)===!1&&(n.scissor(de.x,de.y,de.z,de.w),N.copy(de))}function ze(de){$.equals(de)===!1&&(n.viewport(de.x,de.y,de.z,de.w),$.copy(de))}function Be(de,at){let ke=l.get(at);ke===void 0&&(ke=new WeakMap,l.set(at,ke));let Qe=ke.get(de);Qe===void 0&&(Qe=n.getUniformBlockIndex(at,de.name),ke.set(de,Qe))}function He(de,at){const Qe=l.get(at).get(de);c.get(at)!==Qe&&(n.uniformBlockBinding(at,Qe,de.__bindingPointIndex),c.set(at,Qe))}function Ye(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},V=null,W={},h={},d=new WeakMap,f=[],p=null,m=!1,g=null,y=null,b=null,w=null,E=null,x=null,C=null,R=new ft(0,0,0),k=0,_=!1,A=null,M=null,D=null,P=null,v=null,N.set(0,0,n.canvas.width,n.canvas.height),$.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ce,disable:ve,bindFramebuffer:Te,drawBuffers:$e,useProgram:pe,setBlending:H,setMaterial:oe,setFlipSided:le,setCullFace:Q,setLineWidth:ie,setPolygonOffset:xe,setScissorTest:fe,activeTexture:me,bindTexture:De,unbindTexture:K,compressedTexImage2D:q,compressedTexImage3D:he,texImage2D:ae,texImage3D:se,updateUBOMapping:Be,uniformBlockBinding:He,texStorage2D:G,texStorage3D:re,texSubImage2D:ge,texSubImage3D:z,compressedTexSubImage2D:O,compressedTexSubImage3D:B,scissor:Le,viewport:ze,reset:Ye}}function HHe(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new Ue,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(K,q){return f?new OffscreenCanvas(K,q):Z2("canvas")}function m(K,q,he){let ge=1;const z=De(K);if((z.width>he||z.height>he)&&(ge=he/Math.max(z.width,z.height)),ge<1)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap||typeof VideoFrame<"u"&&K instanceof VideoFrame){const O=Math.floor(ge*z.width),B=Math.floor(ge*z.height);h===void 0&&(h=p(O,B));const G=q?p(O,B):h;return G.width=O,G.height=B,G.getContext("2d").drawImage(K,0,0,O,B),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+z.width+"x"+z.height+") to ("+O+"x"+B+")."),G}else return"data"in K&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+z.width+"x"+z.height+")."),K;return K}function g(K){return K.generateMipmaps}function y(K){n.generateMipmap(K)}function b(K){return K.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:K.isWebGL3DRenderTarget?n.TEXTURE_3D:K.isWebGLArrayRenderTarget||K.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(K,q,he,ge,z=!1){if(K!==null){if(n[K]!==void 0)return n[K];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let O=q;if(q===n.RED&&(he===n.FLOAT&&(O=n.R32F),he===n.HALF_FLOAT&&(O=n.R16F),he===n.UNSIGNED_BYTE&&(O=n.R8)),q===n.RED_INTEGER&&(he===n.UNSIGNED_BYTE&&(O=n.R8UI),he===n.UNSIGNED_SHORT&&(O=n.R16UI),he===n.UNSIGNED_INT&&(O=n.R32UI),he===n.BYTE&&(O=n.R8I),he===n.SHORT&&(O=n.R16I),he===n.INT&&(O=n.R32I)),q===n.RG&&(he===n.FLOAT&&(O=n.RG32F),he===n.HALF_FLOAT&&(O=n.RG16F),he===n.UNSIGNED_BYTE&&(O=n.RG8)),q===n.RG_INTEGER&&(he===n.UNSIGNED_BYTE&&(O=n.RG8UI),he===n.UNSIGNED_SHORT&&(O=n.RG16UI),he===n.UNSIGNED_INT&&(O=n.RG32UI),he===n.BYTE&&(O=n.RG8I),he===n.SHORT&&(O=n.RG16I),he===n.INT&&(O=n.RG32I)),q===n.RGB_INTEGER&&(he===n.UNSIGNED_BYTE&&(O=n.RGB8UI),he===n.UNSIGNED_SHORT&&(O=n.RGB16UI),he===n.UNSIGNED_INT&&(O=n.RGB32UI),he===n.BYTE&&(O=n.RGB8I),he===n.SHORT&&(O=n.RGB16I),he===n.INT&&(O=n.RGB32I)),q===n.RGBA_INTEGER&&(he===n.UNSIGNED_BYTE&&(O=n.RGBA8UI),he===n.UNSIGNED_SHORT&&(O=n.RGBA16UI),he===n.UNSIGNED_INT&&(O=n.RGBA32UI),he===n.BYTE&&(O=n.RGBA8I),he===n.SHORT&&(O=n.RGBA16I),he===n.INT&&(O=n.RGBA32I)),q===n.RGB&&he===n.UNSIGNED_INT_5_9_9_9_REV&&(O=n.RGB9_E5),q===n.RGBA){const B=z?K2:vn.getTransfer(ge);he===n.FLOAT&&(O=n.RGBA32F),he===n.HALF_FLOAT&&(O=n.RGBA16F),he===n.UNSIGNED_BYTE&&(O=B===Vn?n.SRGB8_ALPHA8:n.RGBA8),he===n.UNSIGNED_SHORT_4_4_4_4&&(O=n.RGBA4),he===n.UNSIGNED_SHORT_5_5_5_1&&(O=n.RGB5_A1)}return(O===n.R16F||O===n.R32F||O===n.RG16F||O===n.RG32F||O===n.RGBA16F||O===n.RGBA32F)&&e.get("EXT_color_buffer_float"),O}function E(K,q){let he;return K?q===null||q===nu||q===z0?he=n.DEPTH24_STENCIL8:q===to?he=n.DEPTH32F_STENCIL8:q===$0&&(he=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===nu||q===z0?he=n.DEPTH_COMPONENT24:q===to?he=n.DEPTH_COMPONENT32F:q===$0&&(he=n.DEPTH_COMPONENT16),he}function x(K,q){return g(K)===!0||K.isFramebufferTexture&&K.minFilter!==Bi&&K.minFilter!==oi?Math.log2(Math.max(q.width,q.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?q.mipmaps.length:1}function C(K){const q=K.target;q.removeEventListener("dispose",C),k(q),q.isVideoTexture&&u.delete(q)}function R(K){const q=K.target;q.removeEventListener("dispose",R),A(q)}function k(K){const q=r.get(K);if(q.__webglInit===void 0)return;const he=K.source,ge=d.get(he);if(ge){const z=ge[q.__cacheKey];z.usedTimes--,z.usedTimes===0&&_(K),Object.keys(ge).length===0&&d.delete(he)}r.remove(K)}function _(K){const q=r.get(K);n.deleteTexture(q.__webglTexture);const he=K.source,ge=d.get(he);delete ge[q.__cacheKey],o.memory.textures--}function A(K){const q=r.get(K);if(K.depthTexture&&(K.depthTexture.dispose(),r.remove(K.depthTexture)),K.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(q.__webglFramebuffer[ge]))for(let z=0;z<q.__webglFramebuffer[ge].length;z++)n.deleteFramebuffer(q.__webglFramebuffer[ge][z]);else n.deleteFramebuffer(q.__webglFramebuffer[ge]);q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer[ge])}else{if(Array.isArray(q.__webglFramebuffer))for(let ge=0;ge<q.__webglFramebuffer.length;ge++)n.deleteFramebuffer(q.__webglFramebuffer[ge]);else n.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let ge=0;ge<q.__webglColorRenderbuffer.length;ge++)q.__webglColorRenderbuffer[ge]&&n.deleteRenderbuffer(q.__webglColorRenderbuffer[ge]);q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const he=K.textures;for(let ge=0,z=he.length;ge<z;ge++){const O=r.get(he[ge]);O.__webglTexture&&(n.deleteTexture(O.__webglTexture),o.memory.textures--),r.remove(he[ge])}r.remove(K)}let M=0;function D(){M=0}function P(){const K=M;return K>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+i.maxTextures),M+=1,K}function v(K){const q=[];return q.push(K.wrapS),q.push(K.wrapT),q.push(K.wrapR||0),q.push(K.magFilter),q.push(K.minFilter),q.push(K.anisotropy),q.push(K.internalFormat),q.push(K.format),q.push(K.type),q.push(K.generateMipmaps),q.push(K.premultiplyAlpha),q.push(K.flipY),q.push(K.unpackAlignment),q.push(K.colorSpace),q.join()}function S(K,q){const he=r.get(K);if(K.isVideoTexture&&fe(K),K.isRenderTargetTexture===!1&&K.version>0&&he.__version!==K.version){const ge=K.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{te(he,K,q);return}}t.bindTexture(n.TEXTURE_2D,he.__webglTexture,n.TEXTURE0+q)}function T(K,q){const he=r.get(K);if(K.version>0&&he.__version!==K.version){te(he,K,q);return}t.bindTexture(n.TEXTURE_2D_ARRAY,he.__webglTexture,n.TEXTURE0+q)}function L(K,q){const he=r.get(K);if(K.version>0&&he.__version!==K.version){te(he,K,q);return}t.bindTexture(n.TEXTURE_3D,he.__webglTexture,n.TEXTURE0+q)}function U(K,q){const he=r.get(K);if(K.version>0&&he.__version!==K.version){ce(he,K,q);return}t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture,n.TEXTURE0+q)}const V={[W2]:n.REPEAT,[ta]:n.CLAMP_TO_EDGE,[q2]:n.MIRRORED_REPEAT},W={[Bi]:n.NEAREST,[lT]:n.NEAREST_MIPMAP_NEAREST,[Zp]:n.NEAREST_MIPMAP_LINEAR,[oi]:n.LINEAR,[wg]:n.LINEAR_MIPMAP_NEAREST,[Mc]:n.LINEAR_MIPMAP_LINEAR},F={[Nj]:n.NEVER,[Bj]:n.ALWAYS,[Oj]:n.LESS,[wT]:n.LEQUAL,[kj]:n.EQUAL,[Uj]:n.GEQUAL,[Dj]:n.GREATER,[Lj]:n.NOTEQUAL};function I(K,q){if(q.type===to&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===oi||q.magFilter===wg||q.magFilter===Zp||q.magFilter===Mc||q.minFilter===oi||q.minFilter===wg||q.minFilter===Zp||q.minFilter===Mc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(K,n.TEXTURE_WRAP_S,V[q.wrapS]),n.texParameteri(K,n.TEXTURE_WRAP_T,V[q.wrapT]),(K===n.TEXTURE_3D||K===n.TEXTURE_2D_ARRAY)&&n.texParameteri(K,n.TEXTURE_WRAP_R,V[q.wrapR]),n.texParameteri(K,n.TEXTURE_MAG_FILTER,W[q.magFilter]),n.texParameteri(K,n.TEXTURE_MIN_FILTER,W[q.minFilter]),q.compareFunction&&(n.texParameteri(K,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(K,n.TEXTURE_COMPARE_FUNC,F[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===Bi||q.minFilter!==Zp&&q.minFilter!==Mc||q.type===to&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||r.get(q).__currentAnisotropy){const he=e.get("EXT_texture_filter_anisotropic");n.texParameterf(K,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,i.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy}}}function N(K,q){let he=!1;K.__webglInit===void 0&&(K.__webglInit=!0,q.addEventListener("dispose",C));const ge=q.source;let z=d.get(ge);z===void 0&&(z={},d.set(ge,z));const O=v(q);if(O!==K.__cacheKey){z[O]===void 0&&(z[O]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,he=!0),z[O].usedTimes++;const B=z[K.__cacheKey];B!==void 0&&(z[K.__cacheKey].usedTimes--,B.usedTimes===0&&_(q)),K.__cacheKey=O,K.__webglTexture=z[O].texture}return he}function $(K,q,he){return Math.floor(Math.floor(K/he)/q)}function j(K,q,he,ge){const O=K.updateRanges;if(O.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,q.width,q.height,he,ge,q.data);else{O.sort((se,Le)=>se.start-Le.start);let B=0;for(let se=1;se<O.length;se++){const Le=O[B],ze=O[se],Be=Le.start+Le.count,He=$(ze.start,q.width,4),Ye=$(Le.start,q.width,4);ze.start<=Be+1&&He===Ye&&$(ze.start+ze.count-1,q.width,4)===He?Le.count=Math.max(Le.count,ze.start+ze.count-Le.start):(++B,O[B]=ze)}O.length=B+1;const G=n.getParameter(n.UNPACK_ROW_LENGTH),re=n.getParameter(n.UNPACK_SKIP_PIXELS),ae=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,q.width);for(let se=0,Le=O.length;se<Le;se++){const ze=O[se],Be=Math.floor(ze.start/4),He=Math.ceil(ze.count/4),Ye=Be%q.width,de=Math.floor(Be/q.width),at=He,ke=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ye),n.pixelStorei(n.UNPACK_SKIP_ROWS,de),t.texSubImage2D(n.TEXTURE_2D,0,Ye,de,at,ke,he,ge,q.data)}K.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,G),n.pixelStorei(n.UNPACK_SKIP_PIXELS,re),n.pixelStorei(n.UNPACK_SKIP_ROWS,ae)}}function te(K,q,he){let ge=n.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(ge=n.TEXTURE_2D_ARRAY),q.isData3DTexture&&(ge=n.TEXTURE_3D);const z=N(K,q),O=q.source;t.bindTexture(ge,K.__webglTexture,n.TEXTURE0+he);const B=r.get(O);if(O.version!==B.__version||z===!0){t.activeTexture(n.TEXTURE0+he);const G=vn.getPrimaries(vn.workingColorSpace),re=q.colorSpace===Nl?null:vn.getPrimaries(q.colorSpace),ae=q.colorSpace===Nl||G===re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ae);let se=m(q.image,!1,i.maxTextureSize);se=me(q,se);const Le=s.convert(q.format,q.colorSpace),ze=s.convert(q.type);let Be=w(q.internalFormat,Le,ze,q.colorSpace,q.isVideoTexture);I(ge,q);let He;const Ye=q.mipmaps,de=q.isVideoTexture!==!0,at=B.__version===void 0||z===!0,ke=O.dataReady,Qe=x(q,se);if(q.isDepthTexture)Be=E(q.format===V0,q.type),at&&(de?t.texStorage2D(n.TEXTURE_2D,1,Be,se.width,se.height):t.texImage2D(n.TEXTURE_2D,0,Be,se.width,se.height,0,Le,ze,null));else if(q.isDataTexture)if(Ye.length>0){de&&at&&t.texStorage2D(n.TEXTURE_2D,Qe,Be,Ye[0].width,Ye[0].height);for(let Ge=0,Ne=Ye.length;Ge<Ne;Ge++)He=Ye[Ge],de?ke&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,He.width,He.height,Le,ze,He.data):t.texImage2D(n.TEXTURE_2D,Ge,Be,He.width,He.height,0,Le,ze,He.data);q.generateMipmaps=!1}else de?(at&&t.texStorage2D(n.TEXTURE_2D,Qe,Be,se.width,se.height),ke&&j(q,se,Le,ze)):t.texImage2D(n.TEXTURE_2D,0,Be,se.width,se.height,0,Le,ze,se.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){de&&at&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Be,Ye[0].width,Ye[0].height,se.depth);for(let Ge=0,Ne=Ye.length;Ge<Ne;Ge++)if(He=Ye[Ge],q.format!==Ss)if(Le!==null)if(de){if(ke)if(q.layerUpdates.size>0){const tt=pC(He.width,He.height,q.format,q.type);for(const Kt of q.layerUpdates){const Yt=He.data.subarray(Kt*tt/He.data.BYTES_PER_ELEMENT,(Kt+1)*tt/He.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,Kt,He.width,He.height,1,Le,Yt)}q.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,He.width,He.height,se.depth,Le,He.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ge,Be,He.width,He.height,se.depth,0,He.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else de?ke&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,He.width,He.height,se.depth,Le,ze,He.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ge,Be,He.width,He.height,se.depth,0,Le,ze,He.data)}else{de&&at&&t.texStorage2D(n.TEXTURE_2D,Qe,Be,Ye[0].width,Ye[0].height);for(let Ge=0,Ne=Ye.length;Ge<Ne;Ge++)He=Ye[Ge],q.format!==Ss?Le!==null?de?ke&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ge,0,0,He.width,He.height,Le,He.data):t.compressedTexImage2D(n.TEXTURE_2D,Ge,Be,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):de?ke&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,He.width,He.height,Le,ze,He.data):t.texImage2D(n.TEXTURE_2D,Ge,Be,He.width,He.height,0,Le,ze,He.data)}else if(q.isDataArrayTexture)if(de){if(at&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Be,se.width,se.height,se.depth),ke)if(q.layerUpdates.size>0){const Ge=pC(se.width,se.height,q.format,q.type);for(const Ne of q.layerUpdates){const tt=se.data.subarray(Ne*Ge/se.data.BYTES_PER_ELEMENT,(Ne+1)*Ge/se.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ne,se.width,se.height,1,Le,ze,tt)}q.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,se.width,se.height,se.depth,Le,ze,se.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Be,se.width,se.height,se.depth,0,Le,ze,se.data);else if(q.isData3DTexture)de?(at&&t.texStorage3D(n.TEXTURE_3D,Qe,Be,se.width,se.height,se.depth),ke&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,se.width,se.height,se.depth,Le,ze,se.data)):t.texImage3D(n.TEXTURE_3D,0,Be,se.width,se.height,se.depth,0,Le,ze,se.data);else if(q.isFramebufferTexture){if(at)if(de)t.texStorage2D(n.TEXTURE_2D,Qe,Be,se.width,se.height);else{let Ge=se.width,Ne=se.height;for(let tt=0;tt<Qe;tt++)t.texImage2D(n.TEXTURE_2D,tt,Be,Ge,Ne,0,Le,ze,null),Ge>>=1,Ne>>=1}}else if(Ye.length>0){if(de&&at){const Ge=De(Ye[0]);t.texStorage2D(n.TEXTURE_2D,Qe,Be,Ge.width,Ge.height)}for(let Ge=0,Ne=Ye.length;Ge<Ne;Ge++)He=Ye[Ge],de?ke&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Le,ze,He):t.texImage2D(n.TEXTURE_2D,Ge,Be,Le,ze,He);q.generateMipmaps=!1}else if(de){if(at){const Ge=De(se);t.texStorage2D(n.TEXTURE_2D,Qe,Be,Ge.width,Ge.height)}ke&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Le,ze,se)}else t.texImage2D(n.TEXTURE_2D,0,Be,Le,ze,se);g(q)&&y(ge),B.__version=O.version,q.onUpdate&&q.onUpdate(q)}K.__version=q.version}function ce(K,q,he){if(q.image.length!==6)return;const ge=N(K,q),z=q.source;t.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+he);const O=r.get(z);if(z.version!==O.__version||ge===!0){t.activeTexture(n.TEXTURE0+he);const B=vn.getPrimaries(vn.workingColorSpace),G=q.colorSpace===Nl?null:vn.getPrimaries(q.colorSpace),re=q.colorSpace===Nl||B===G?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,re);const ae=q.isCompressedTexture||q.image[0].isCompressedTexture,se=q.image[0]&&q.image[0].isDataTexture,Le=[];for(let Ne=0;Ne<6;Ne++)!ae&&!se?Le[Ne]=m(q.image[Ne],!0,i.maxCubemapSize):Le[Ne]=se?q.image[Ne].image:q.image[Ne],Le[Ne]=me(q,Le[Ne]);const ze=Le[0],Be=s.convert(q.format,q.colorSpace),He=s.convert(q.type),Ye=w(q.internalFormat,Be,He,q.colorSpace),de=q.isVideoTexture!==!0,at=O.__version===void 0||ge===!0,ke=z.dataReady;let Qe=x(q,ze);I(n.TEXTURE_CUBE_MAP,q);let Ge;if(ae){de&&at&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Ye,ze.width,ze.height);for(let Ne=0;Ne<6;Ne++){Ge=Le[Ne].mipmaps;for(let tt=0;tt<Ge.length;tt++){const Kt=Ge[tt];q.format!==Ss?Be!==null?de?ke&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,tt,0,0,Kt.width,Kt.height,Be,Kt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,tt,Ye,Kt.width,Kt.height,0,Kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):de?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,tt,0,0,Kt.width,Kt.height,Be,He,Kt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,tt,Ye,Kt.width,Kt.height,0,Be,He,Kt.data)}}}else{if(Ge=q.mipmaps,de&&at){Ge.length>0&&Qe++;const Ne=De(Le[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Ye,Ne.width,Ne.height)}for(let Ne=0;Ne<6;Ne++)if(se){de?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,Le[Ne].width,Le[Ne].height,Be,He,Le[Ne].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,Ye,Le[Ne].width,Le[Ne].height,0,Be,He,Le[Ne].data);for(let tt=0;tt<Ge.length;tt++){const Yt=Ge[tt].image[Ne].image;de?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,tt+1,0,0,Yt.width,Yt.height,Be,He,Yt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,tt+1,Ye,Yt.width,Yt.height,0,Be,He,Yt.data)}}else{de?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,Be,He,Le[Ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,Ye,Be,He,Le[Ne]);for(let tt=0;tt<Ge.length;tt++){const Kt=Ge[tt];de?ke&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,tt+1,0,0,Be,He,Kt.image[Ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,tt+1,Ye,Be,He,Kt.image[Ne])}}}g(q)&&y(n.TEXTURE_CUBE_MAP),O.__version=z.version,q.onUpdate&&q.onUpdate(q)}K.__version=q.version}function ve(K,q,he,ge,z,O){const B=s.convert(he.format,he.colorSpace),G=s.convert(he.type),re=w(he.internalFormat,B,G,he.colorSpace),ae=r.get(q),se=r.get(he);if(se.__renderTarget=q,!ae.__hasExternalTextures){const Le=Math.max(1,q.width>>O),ze=Math.max(1,q.height>>O);z===n.TEXTURE_3D||z===n.TEXTURE_2D_ARRAY?t.texImage3D(z,O,re,Le,ze,q.depth,0,B,G,null):t.texImage2D(z,O,re,Le,ze,0,B,G,null)}t.bindFramebuffer(n.FRAMEBUFFER,K),xe(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ge,z,se.__webglTexture,0,ie(q)):(z===n.TEXTURE_2D||z>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&z<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ge,z,se.__webglTexture,O),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(K,q,he){if(n.bindRenderbuffer(n.RENDERBUFFER,K),q.depthBuffer){const ge=q.depthTexture,z=ge&&ge.isDepthTexture?ge.type:null,O=E(q.stencilBuffer,z),B=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,G=ie(q);xe(q)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,G,O,q.width,q.height):he?n.renderbufferStorageMultisample(n.RENDERBUFFER,G,O,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,O,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,B,n.RENDERBUFFER,K)}else{const ge=q.textures;for(let z=0;z<ge.length;z++){const O=ge[z],B=s.convert(O.format,O.colorSpace),G=s.convert(O.type),re=w(O.internalFormat,B,G,O.colorSpace),ae=ie(q);he&&xe(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ae,re,q.width,q.height):xe(q)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ae,re,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,re,q.width,q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function $e(K,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,K),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ge=r.get(q.depthTexture);ge.__renderTarget=q,(!ge.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),S(q.depthTexture,0);const z=ge.__webglTexture,O=ie(q);if(q.depthTexture.format===H0)xe(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,z,0,O):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,z,0);else if(q.depthTexture.format===V0)xe(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,z,0,O):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,z,0);else throw new Error("Unknown depthTexture format")}function pe(K){const q=r.get(K),he=K.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==K.depthTexture){const ge=K.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),ge){const z=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,ge.removeEventListener("dispose",z)};ge.addEventListener("dispose",z),q.__depthDisposeCallback=z}q.__boundDepthTexture=ge}if(K.depthTexture&&!q.__autoAllocateDepthBuffer){if(he)throw new Error("target.depthTexture not supported in Cube render targets");const ge=K.texture.mipmaps;ge&&ge.length>0?$e(q.__webglFramebuffer[0],K):$e(q.__webglFramebuffer,K)}else if(he){q.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)if(t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[ge]),q.__webglDepthbuffer[ge]===void 0)q.__webglDepthbuffer[ge]=n.createRenderbuffer(),Te(q.__webglDepthbuffer[ge],K,!1);else{const z=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,O=q.__webglDepthbuffer[ge];n.bindRenderbuffer(n.RENDERBUFFER,O),n.framebufferRenderbuffer(n.FRAMEBUFFER,z,n.RENDERBUFFER,O)}}else{const ge=K.texture.mipmaps;if(ge&&ge.length>0?t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=n.createRenderbuffer(),Te(q.__webglDepthbuffer,K,!1);else{const z=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,O=q.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,O),n.framebufferRenderbuffer(n.FRAMEBUFFER,z,n.RENDERBUFFER,O)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function X(K,q,he){const ge=r.get(K);q!==void 0&&ve(ge.__webglFramebuffer,K,K.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),he!==void 0&&pe(K)}function Z(K){const q=K.texture,he=r.get(K),ge=r.get(q);K.addEventListener("dispose",R);const z=K.textures,O=K.isWebGLCubeRenderTarget===!0,B=z.length>1;if(B||(ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture()),ge.__version=q.version,o.memory.textures++),O){he.__webglFramebuffer=[];for(let G=0;G<6;G++)if(q.mipmaps&&q.mipmaps.length>0){he.__webglFramebuffer[G]=[];for(let re=0;re<q.mipmaps.length;re++)he.__webglFramebuffer[G][re]=n.createFramebuffer()}else he.__webglFramebuffer[G]=n.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){he.__webglFramebuffer=[];for(let G=0;G<q.mipmaps.length;G++)he.__webglFramebuffer[G]=n.createFramebuffer()}else he.__webglFramebuffer=n.createFramebuffer();if(B)for(let G=0,re=z.length;G<re;G++){const ae=r.get(z[G]);ae.__webglTexture===void 0&&(ae.__webglTexture=n.createTexture(),o.memory.textures++)}if(K.samples>0&&xe(K)===!1){he.__webglMultisampledFramebuffer=n.createFramebuffer(),he.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,he.__webglMultisampledFramebuffer);for(let G=0;G<z.length;G++){const re=z[G];he.__webglColorRenderbuffer[G]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,he.__webglColorRenderbuffer[G]);const ae=s.convert(re.format,re.colorSpace),se=s.convert(re.type),Le=w(re.internalFormat,ae,se,re.colorSpace,K.isXRRenderTarget===!0),ze=ie(K);n.renderbufferStorageMultisample(n.RENDERBUFFER,ze,Le,K.width,K.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+G,n.RENDERBUFFER,he.__webglColorRenderbuffer[G])}n.bindRenderbuffer(n.RENDERBUFFER,null),K.depthBuffer&&(he.__webglDepthRenderbuffer=n.createRenderbuffer(),Te(he.__webglDepthRenderbuffer,K,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(O){t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture),I(n.TEXTURE_CUBE_MAP,q);for(let G=0;G<6;G++)if(q.mipmaps&&q.mipmaps.length>0)for(let re=0;re<q.mipmaps.length;re++)ve(he.__webglFramebuffer[G][re],K,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+G,re);else ve(he.__webglFramebuffer[G],K,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+G,0);g(q)&&y(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(B){for(let G=0,re=z.length;G<re;G++){const ae=z[G],se=r.get(ae);t.bindTexture(n.TEXTURE_2D,se.__webglTexture),I(n.TEXTURE_2D,ae),ve(he.__webglFramebuffer,K,ae,n.COLOR_ATTACHMENT0+G,n.TEXTURE_2D,0),g(ae)&&y(n.TEXTURE_2D)}t.unbindTexture()}else{let G=n.TEXTURE_2D;if((K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(G=K.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(G,ge.__webglTexture),I(G,q),q.mipmaps&&q.mipmaps.length>0)for(let re=0;re<q.mipmaps.length;re++)ve(he.__webglFramebuffer[re],K,q,n.COLOR_ATTACHMENT0,G,re);else ve(he.__webglFramebuffer,K,q,n.COLOR_ATTACHMENT0,G,0);g(q)&&y(G),t.unbindTexture()}K.depthBuffer&&pe(K)}function H(K){const q=K.textures;for(let he=0,ge=q.length;he<ge;he++){const z=q[he];if(g(z)){const O=b(K),B=r.get(z).__webglTexture;t.bindTexture(O,B),y(O),t.unbindTexture()}}}const oe=[],le=[];function Q(K){if(K.samples>0){if(xe(K)===!1){const q=K.textures,he=K.width,ge=K.height;let z=n.COLOR_BUFFER_BIT;const O=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,B=r.get(K),G=q.length>1;if(G)for(let ae=0;ae<q.length;ae++)t.bindFramebuffer(n.FRAMEBUFFER,B.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ae,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ae,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,B.__webglMultisampledFramebuffer);const re=K.texture.mipmaps;re&&re.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,B.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,B.__webglFramebuffer);for(let ae=0;ae<q.length;ae++){if(K.resolveDepthBuffer&&(K.depthBuffer&&(z|=n.DEPTH_BUFFER_BIT),K.stencilBuffer&&K.resolveStencilBuffer&&(z|=n.STENCIL_BUFFER_BIT)),G){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,B.__webglColorRenderbuffer[ae]);const se=r.get(q[ae]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,se,0)}n.blitFramebuffer(0,0,he,ge,0,0,he,ge,z,n.NEAREST),c===!0&&(oe.length=0,le.length=0,oe.push(n.COLOR_ATTACHMENT0+ae),K.depthBuffer&&K.resolveDepthBuffer===!1&&(oe.push(O),le.push(O),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,le)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,oe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),G)for(let ae=0;ae<q.length;ae++){t.bindFramebuffer(n.FRAMEBUFFER,B.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ae,n.RENDERBUFFER,B.__webglColorRenderbuffer[ae]);const se=r.get(q[ae]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ae,n.TEXTURE_2D,se,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,B.__webglMultisampledFramebuffer)}else if(K.depthBuffer&&K.resolveDepthBuffer===!1&&c){const q=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[q])}}}function ie(K){return Math.min(i.maxSamples,K.samples)}function xe(K){const q=r.get(K);return K.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function fe(K){const q=o.render.frame;u.get(K)!==q&&(u.set(K,q),K.update())}function me(K,q){const he=K.colorSpace,ge=K.format,z=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||he!==vf&&he!==Nl&&(vn.getTransfer(he)===Vn?(ge!==Ss||z!==Ja)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",he)),q}function De(K){return typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement?(l.width=K.naturalWidth||K.width,l.height=K.naturalHeight||K.height):typeof VideoFrame<"u"&&K instanceof VideoFrame?(l.width=K.displayWidth,l.height=K.displayHeight):(l.width=K.width,l.height=K.height),l}this.allocateTextureUnit=P,this.resetTextureUnits=D,this.setTexture2D=S,this.setTexture2DArray=T,this.setTexture3D=L,this.setTextureCube=U,this.rebindTextures=X,this.setupRenderTarget=Z,this.updateRenderTargetMipmap=H,this.updateMultisampleRenderTarget=Q,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=xe}function YG(n,e){function t(r,i=Nl){let s;const o=vn.getTransfer(i);if(r===Ja)return n.UNSIGNED_BYTE;if(r===C4)return n.UNSIGNED_SHORT_4_4_4_4;if(r===T4)return n.UNSIGNED_SHORT_5_5_5_1;if(r===dT)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===uT)return n.BYTE;if(r===hT)return n.SHORT;if(r===$0)return n.UNSIGNED_SHORT;if(r===A4)return n.INT;if(r===nu)return n.UNSIGNED_INT;if(r===to)return n.FLOAT;if(r===m1)return n.HALF_FLOAT;if(r===fT)return n.ALPHA;if(r===pT)return n.RGB;if(r===Ss)return n.RGBA;if(r===H0)return n.DEPTH_COMPONENT;if(r===V0)return n.DEPTH_STENCIL;if(r===I4)return n.RED;if(r===Vy)return n.RED_INTEGER;if(r===mT)return n.RG;if(r===M4)return n.RG_INTEGER;if(r===R4)return n.RGBA_INTEGER;if(r===vg||r===bg||r===_g||r===Eg)if(o===Vn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===vg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===bg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===_g)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Eg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===vg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===bg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===_g)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Eg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===o_||r===a_||r===c_||r===l_)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===o_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===a_)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===c_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===l_)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===u_||r===h_||r===d_)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===u_||r===h_)return o===Vn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===d_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===f_||r===p_||r===m_||r===g_||r===y_||r===w_||r===v_||r===b_||r===__||r===E_||r===x_||r===S_||r===A_||r===C_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===f_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===p_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===m_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===g_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===y_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===w_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===v_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===b_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===__)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===E_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===x_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===S_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===A_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===C_)return o===Vn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===xg||r===T_||r===I_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===xg)return o===Vn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===T_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===I_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===gT||r===M_||r===R_||r===P_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===xg)return s.COMPRESSED_RED_RGTC1_EXT;if(r===M_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===R_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===P_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===z0?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const VHe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,WHe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class qHe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new kr,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!==r.depthNear||t.depthFar!==r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Qa({vertexShader:VHe,fragmentShader:WHe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Vr(new w1(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class jHe extends Zc{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,h=null,d=null,f=null,p=null;const m=new qHe,g=t.getContextAttributes();let y=null,b=null;const w=[],E=[],x=new Ue;let C=null;const R=new Gr;R.viewport=new Sn;const k=new Gr;k.viewport=new Sn;const _=[R,k],A=new BG;let M=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let j=w[$];return j===void 0&&(j=new O3,w[$]=j),j.getTargetRaySpace()},this.getControllerGrip=function($){let j=w[$];return j===void 0&&(j=new O3,w[$]=j),j.getGripSpace()},this.getHand=function($){let j=w[$];return j===void 0&&(j=new O3,w[$]=j),j.getHandSpace()};function P($){const j=E.indexOf($.inputSource);if(j===-1)return;const te=w[j];te!==void 0&&(te.update($.inputSource,$.frame,l||o),te.dispatchEvent({type:$.type,data:$.inputSource}))}function v(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",v),i.removeEventListener("inputsourceschange",S);for(let $=0;$<w.length;$++){const j=E[$];j!==null&&(E[$]=null,w[$].disconnect(j))}M=null,D=null,m.reset(),e.setRenderTarget(y),f=null,d=null,h=null,i=null,b=null,N.stop(),r.isPresenting=!1,e.setPixelRatio(C),e.setSize(x.width,x.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function($){s=$,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){a=$,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function($){l=$},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function($){if(i=$,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",v),i.addEventListener("inputsourceschange",S),g.xrCompatible!==!0&&await t.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(x),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let te=null,ce=null,ve=null;g.depth&&(ve=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,te=g.stencil?V0:H0,ce=g.stencil?z0:nu);const Te={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:s};h=new XRWebGLBinding(i,t),d=h.createProjectionLayer(Te),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),b=new jc(d.textureWidth,d.textureHeight,{format:Ss,type:Ja,depthTexture:new TT(d.textureWidth,d.textureHeight,ce,void 0,void 0,void 0,void 0,void 0,void 0,te),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1,resolveStencilBuffer:d.ignoreDepthValues===!1})}else{const te={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(i,t,te),i.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),b=new jc(f.framebufferWidth,f.framebufferHeight,{format:Ss,type:Ja,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=await i.requestReferenceSpace(a),N.setContext(i),N.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function S($){for(let j=0;j<$.removed.length;j++){const te=$.removed[j],ce=E.indexOf(te);ce>=0&&(E[ce]=null,w[ce].disconnect(te))}for(let j=0;j<$.added.length;j++){const te=$.added[j];let ce=E.indexOf(te);if(ce===-1){for(let Te=0;Te<w.length;Te++)if(Te>=E.length){E.push(te),ce=Te;break}else if(E[Te]===null){E[Te]=te,ce=Te;break}if(ce===-1)break}const ve=w[ce];ve&&ve.connect(te)}}const T=new ne,L=new ne;function U($,j,te){T.setFromMatrixPosition(j.matrixWorld),L.setFromMatrixPosition(te.matrixWorld);const ce=T.distanceTo(L),ve=j.projectionMatrix.elements,Te=te.projectionMatrix.elements,$e=ve[14]/(ve[10]-1),pe=ve[14]/(ve[10]+1),X=(ve[9]+1)/ve[5],Z=(ve[9]-1)/ve[5],H=(ve[8]-1)/ve[0],oe=(Te[8]+1)/Te[0],le=$e*H,Q=$e*oe,ie=ce/(-H+oe),xe=ie*-H;if(j.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(xe),$.translateZ(ie),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert(),ve[10]===-1)$.projectionMatrix.copy(j.projectionMatrix),$.projectionMatrixInverse.copy(j.projectionMatrixInverse);else{const fe=$e+ie,me=pe+ie,De=le-xe,K=Q+(ce-xe),q=X*pe/me*fe,he=Z*pe/me*fe;$.projectionMatrix.makePerspective(De,K,q,he,fe,me),$.projectionMatrixInverse.copy($.projectionMatrix).invert()}}function V($,j){j===null?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(j.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCamera=function($){if(i===null)return;let j=$.near,te=$.far;m.texture!==null&&(m.depthNear>0&&(j=m.depthNear),m.depthFar>0&&(te=m.depthFar)),A.near=k.near=R.near=j,A.far=k.far=R.far=te,(M!==A.near||D!==A.far)&&(i.updateRenderState({depthNear:A.near,depthFar:A.far}),M=A.near,D=A.far),R.layers.mask=$.layers.mask|2,k.layers.mask=$.layers.mask|4,A.layers.mask=R.layers.mask|k.layers.mask;const ce=$.parent,ve=A.cameras;V(A,ce);for(let Te=0;Te<ve.length;Te++)V(ve[Te],ce);ve.length===2?U(A,R,k):A.projectionMatrix.copy(R.projectionMatrix),W($,A,ce)};function W($,j,te){te===null?$.matrix.copy(j.matrixWorld):($.matrix.copy(te.matrixWorld),$.matrix.invert(),$.matrix.multiply(j.matrixWorld)),$.matrix.decompose($.position,$.quaternion,$.scale),$.updateMatrixWorld(!0),$.projectionMatrix.copy(j.projectionMatrix),$.projectionMatrixInverse.copy(j.projectionMatrixInverse),$.isPerspectiveCamera&&($.fov=W0*2*Math.atan(1/$.projectionMatrix.elements[5]),$.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(d===null&&f===null))return c},this.setFoveation=function($){c=$,d!==null&&(d.fixedFoveation=$),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=$)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(A)};let F=null;function I($,j){if(u=j.getViewerPose(l||o),p=j,u!==null){const te=u.views;f!==null&&(e.setRenderTargetFramebuffer(b,f.framebuffer),e.setRenderTarget(b));let ce=!1;te.length!==A.cameras.length&&(A.cameras.length=0,ce=!0);for(let $e=0;$e<te.length;$e++){const pe=te[$e];let X=null;if(f!==null)X=f.getViewport(pe);else{const H=h.getViewSubImage(d,pe);X=H.viewport,$e===0&&(e.setRenderTargetTextures(b,H.colorTexture,H.depthStencilTexture),e.setRenderTarget(b))}let Z=_[$e];Z===void 0&&(Z=new Gr,Z.layers.enable($e),Z.viewport=new Sn,_[$e]=Z),Z.matrix.fromArray(pe.transform.matrix),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.projectionMatrix.fromArray(pe.projectionMatrix),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert(),Z.viewport.set(X.x,X.y,X.width,X.height),$e===0&&(A.matrix.copy(Z.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),ce===!0&&A.cameras.push(Z)}const ve=i.enabledFeatures;if(ve&&ve.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&h){const $e=h.getDepthInformation(te[0]);$e&&$e.isValid&&$e.texture&&m.init(e,$e,i.renderState)}}for(let te=0;te<w.length;te++){const ce=E[te],ve=w[te];ce!==null&&ve!==void 0&&ve.update(ce,j,l||o)}F&&F($,j),j.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:j}),p=null}const N=new WG;N.setAnimationLoop(I),this.setAnimationLoop=function($){F=$},this.dispose=function(){}}}const hd=new Po,GHe=new jt;function KHe(n,e){function t(g,y){g.matrixAutoUpdate===!0&&g.updateMatrix(),y.value.copy(g.matrix)}function r(g,y){y.color.getRGB(g.fogColor.value,Vj(n)),y.isFog?(g.fogNear.value=y.near,g.fogFar.value=y.far):y.isFogExp2&&(g.fogDensity.value=y.density)}function i(g,y,b,w,E){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(g,y):y.isMeshToonMaterial?(s(g,y),h(g,y)):y.isMeshPhongMaterial?(s(g,y),u(g,y)):y.isMeshStandardMaterial?(s(g,y),d(g,y),y.isMeshPhysicalMaterial&&f(g,y,E)):y.isMeshMatcapMaterial?(s(g,y),p(g,y)):y.isMeshDepthMaterial?s(g,y):y.isMeshDistanceMaterial?(s(g,y),m(g,y)):y.isMeshNormalMaterial?s(g,y):y.isLineBasicMaterial?(o(g,y),y.isLineDashedMaterial&&a(g,y)):y.isPointsMaterial?c(g,y,b,w):y.isSpriteMaterial?l(g,y):y.isShadowMaterial?(g.color.value.copy(y.color),g.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(g,y){g.opacity.value=y.opacity,y.color&&g.diffuse.value.copy(y.color),y.emissive&&g.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(g.map.value=y.map,t(y.map,g.mapTransform)),y.alphaMap&&(g.alphaMap.value=y.alphaMap,t(y.alphaMap,g.alphaMapTransform)),y.bumpMap&&(g.bumpMap.value=y.bumpMap,t(y.bumpMap,g.bumpMapTransform),g.bumpScale.value=y.bumpScale,y.side===Is&&(g.bumpScale.value*=-1)),y.normalMap&&(g.normalMap.value=y.normalMap,t(y.normalMap,g.normalMapTransform),g.normalScale.value.copy(y.normalScale),y.side===Is&&g.normalScale.value.negate()),y.displacementMap&&(g.displacementMap.value=y.displacementMap,t(y.displacementMap,g.displacementMapTransform),g.displacementScale.value=y.displacementScale,g.displacementBias.value=y.displacementBias),y.emissiveMap&&(g.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,g.emissiveMapTransform)),y.specularMap&&(g.specularMap.value=y.specularMap,t(y.specularMap,g.specularMapTransform)),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest);const b=e.get(y),w=b.envMap,E=b.envMapRotation;w&&(g.envMap.value=w,hd.copy(E),hd.x*=-1,hd.y*=-1,hd.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(hd.y*=-1,hd.z*=-1),g.envMapRotation.value.setFromMatrix4(GHe.makeRotationFromEuler(hd)),g.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=y.reflectivity,g.ior.value=y.ior,g.refractionRatio.value=y.refractionRatio),y.lightMap&&(g.lightMap.value=y.lightMap,g.lightMapIntensity.value=y.lightMapIntensity,t(y.lightMap,g.lightMapTransform)),y.aoMap&&(g.aoMap.value=y.aoMap,g.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,g.aoMapTransform))}function o(g,y){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,y.map&&(g.map.value=y.map,t(y.map,g.mapTransform))}function a(g,y){g.dashSize.value=y.dashSize,g.totalSize.value=y.dashSize+y.gapSize,g.scale.value=y.scale}function c(g,y,b,w){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,g.size.value=y.size*b,g.scale.value=w*.5,y.map&&(g.map.value=y.map,t(y.map,g.uvTransform)),y.alphaMap&&(g.alphaMap.value=y.alphaMap,t(y.alphaMap,g.alphaMapTransform)),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest)}function l(g,y){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,g.rotation.value=y.rotation,y.map&&(g.map.value=y.map,t(y.map,g.mapTransform)),y.alphaMap&&(g.alphaMap.value=y.alphaMap,t(y.alphaMap,g.alphaMapTransform)),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest)}function u(g,y){g.specular.value.copy(y.specular),g.shininess.value=Math.max(y.shininess,1e-4)}function h(g,y){y.gradientMap&&(g.gradientMap.value=y.gradientMap)}function d(g,y){g.metalness.value=y.metalness,y.metalnessMap&&(g.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,g.metalnessMapTransform)),g.roughness.value=y.roughness,y.roughnessMap&&(g.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,g.roughnessMapTransform)),y.envMap&&(g.envMapIntensity.value=y.envMapIntensity)}function f(g,y,b){g.ior.value=y.ior,y.sheen>0&&(g.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),g.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(g.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,g.sheenColorMapTransform)),y.sheenRoughnessMap&&(g.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,g.sheenRoughnessMapTransform))),y.clearcoat>0&&(g.clearcoat.value=y.clearcoat,g.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(g.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,g.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(g.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Is&&g.clearcoatNormalScale.value.negate())),y.dispersion>0&&(g.dispersion.value=y.dispersion),y.iridescence>0&&(g.iridescence.value=y.iridescence,g.iridescenceIOR.value=y.iridescenceIOR,g.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(g.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,g.iridescenceMapTransform)),y.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),y.transmission>0&&(g.transmission.value=y.transmission,g.transmissionSamplerMap.value=b.texture,g.transmissionSamplerSize.value.set(b.width,b.height),y.transmissionMap&&(g.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,g.transmissionMapTransform)),g.thickness.value=y.thickness,y.thicknessMap&&(g.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=y.attenuationDistance,g.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(g.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(g.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=y.specularIntensity,g.specularColor.value.copy(y.specularColor),y.specularColorMap&&(g.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,g.specularColorMapTransform)),y.specularIntensityMap&&(g.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,y){y.matcap&&(g.matcap.value=y.matcap)}function m(g,y){const b=e.get(y).light;g.referencePosition.value.setFromMatrixPosition(b.matrixWorld),g.nearDistance.value=b.shadow.camera.near,g.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function YHe(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(b,w){const E=w.program;r.uniformBlockBinding(b,E)}function l(b,w){let E=i[b.id];E===void 0&&(p(b),E=u(b),i[b.id]=E,b.addEventListener("dispose",g));const x=w.program;r.updateUBOMapping(b,x);const C=e.render.frame;s[b.id]!==C&&(d(b),s[b.id]=C)}function u(b){const w=h();b.__bindingPointIndex=w;const E=n.createBuffer(),x=b.__size,C=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,x,C),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,E),E}function h(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(b){const w=i[b.id],E=b.uniforms,x=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let C=0,R=E.length;C<R;C++){const k=Array.isArray(E[C])?E[C]:[E[C]];for(let _=0,A=k.length;_<A;_++){const M=k[_];if(f(M,C,_,x)===!0){const D=M.__offset,P=Array.isArray(M.value)?M.value:[M.value];let v=0;for(let S=0;S<P.length;S++){const T=P[S],L=m(T);typeof T=="number"||typeof T=="boolean"?(M.__data[0]=T,n.bufferSubData(n.UNIFORM_BUFFER,D+v,M.__data)):T.isMatrix3?(M.__data[0]=T.elements[0],M.__data[1]=T.elements[1],M.__data[2]=T.elements[2],M.__data[3]=0,M.__data[4]=T.elements[3],M.__data[5]=T.elements[4],M.__data[6]=T.elements[5],M.__data[7]=0,M.__data[8]=T.elements[6],M.__data[9]=T.elements[7],M.__data[10]=T.elements[8],M.__data[11]=0):(T.toArray(M.__data,v),v+=L.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,D,M.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(b,w,E,x){const C=b.value,R=w+"_"+E;if(x[R]===void 0)return typeof C=="number"||typeof C=="boolean"?x[R]=C:x[R]=C.clone(),!0;{const k=x[R];if(typeof C=="number"||typeof C=="boolean"){if(k!==C)return x[R]=C,!0}else if(k.equals(C)===!1)return k.copy(C),!0}return!1}function p(b){const w=b.uniforms;let E=0;const x=16;for(let R=0,k=w.length;R<k;R++){const _=Array.isArray(w[R])?w[R]:[w[R]];for(let A=0,M=_.length;A<M;A++){const D=_[A],P=Array.isArray(D.value)?D.value:[D.value];for(let v=0,S=P.length;v<S;v++){const T=P[v],L=m(T),U=E%x,V=U%L.boundary,W=U+V;E+=V,W!==0&&x-W<L.storage&&(E+=x-W),D.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=E,E+=L.storage}}}const C=E%x;return C>0&&(E+=x-C),b.__size=E,b.__cache={},this}function m(b){const w={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(w.boundary=4,w.storage=4):b.isVector2?(w.boundary=8,w.storage=8):b.isVector3||b.isColor?(w.boundary=16,w.storage=12):b.isVector4?(w.boundary=16,w.storage=16):b.isMatrix3?(w.boundary=48,w.storage=48):b.isMatrix4?(w.boundary=64,w.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),w}function g(b){const w=b.target;w.removeEventListener("dispose",g);const E=o.indexOf(w.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function y(){for(const b in i)n.deleteBuffer(i[b]);o=[],i={},s={}}return{bind:c,update:l,dispose:y}}class D3{constructor(e={}){const{canvas:t=$j(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let f;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=r.getContextAttributes().alpha}else f=o;const p=new Uint32Array(4),m=new Int32Array(4);let g=null,y=null;const b=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Dc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const E=this;let x=!1;this._outputColorSpace=bs;let C=0,R=0,k=null,_=-1,A=null;const M=new Sn,D=new Sn;let P=null;const v=new ft(0);let S=0,T=t.width,L=t.height,U=1,V=null,W=null;const F=new Sn(0,0,T,L),I=new Sn(0,0,T,L);let N=!1;const $=new y1;let j=!1,te=!1;const ce=new jt,ve=new jt,Te=new ne,$e=new Sn,pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let X=!1;function Z(){return k===null?U:1}let H=r;function oe(J,ye){return t.getContext(J,ye)}try{const J={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${zy}`),t.addEventListener("webglcontextlost",Qe,!1),t.addEventListener("webglcontextrestored",Ge,!1),t.addEventListener("webglcontextcreationerror",Ne,!1),H===null){const ye="webgl2";if(H=oe(ye,J),H===null)throw oe(ye)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(J){throw console.error("THREE.WebGLRenderer: "+J.message),J}let le,Q,ie,xe,fe,me,De,K,q,he,ge,z,O,B,G,re,ae,se,Le,ze,Be,He,Ye,de;function at(){le=new aze(H),le.init(),He=new YG(H,le),Q=new eze(H,le,e,He),ie=new zHe(H,le),Q.reverseDepthBuffer&&d&&ie.buffers.depth.setReversed(!0),xe=new uze(H),fe=new IHe,me=new HHe(H,le,ie,fe,Q,He,xe),De=new nze(E),K=new oze(E),q=new gBe(H),Ye=new J$e(H,q),he=new cze(H,q,xe,Ye),ge=new dze(H,he,q,xe),Le=new hze(H,Q,me),re=new tze(fe),z=new THe(E,De,K,le,Q,Ye,re),O=new KHe(E,fe),B=new RHe,G=new LHe(le),se=new Z$e(E,De,K,ie,ge,f,c),ae=new FHe(E,ge,Q),de=new YHe(H,xe,Q,ie),ze=new Q$e(H,le,xe),Be=new lze(H,le,xe),xe.programs=z.programs,E.capabilities=Q,E.extensions=le,E.properties=fe,E.renderLists=B,E.shadowMap=ae,E.state=ie,E.info=xe}at();const ke=new jHe(E,H);this.xr=ke,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){const J=le.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=le.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return U},this.setPixelRatio=function(J){J!==void 0&&(U=J,this.setSize(T,L,!1))},this.getSize=function(J){return J.set(T,L)},this.setSize=function(J,ye,Ie=!0){if(ke.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}T=J,L=ye,t.width=Math.floor(J*U),t.height=Math.floor(ye*U),Ie===!0&&(t.style.width=J+"px",t.style.height=ye+"px"),this.setViewport(0,0,J,ye)},this.getDrawingBufferSize=function(J){return J.set(T*U,L*U).floor()},this.setDrawingBufferSize=function(J,ye,Ie){T=J,L=ye,U=Ie,t.width=Math.floor(J*Ie),t.height=Math.floor(ye*Ie),this.setViewport(0,0,J,ye)},this.getCurrentViewport=function(J){return J.copy(M)},this.getViewport=function(J){return J.copy(F)},this.setViewport=function(J,ye,Ie,Me){J.isVector4?F.set(J.x,J.y,J.z,J.w):F.set(J,ye,Ie,Me),ie.viewport(M.copy(F).multiplyScalar(U).round())},this.getScissor=function(J){return J.copy(I)},this.setScissor=function(J,ye,Ie,Me){J.isVector4?I.set(J.x,J.y,J.z,J.w):I.set(J,ye,Ie,Me),ie.scissor(D.copy(I).multiplyScalar(U).round())},this.getScissorTest=function(){return N},this.setScissorTest=function(J){ie.setScissorTest(N=J)},this.setOpaqueSort=function(J){V=J},this.setTransparentSort=function(J){W=J},this.getClearColor=function(J){return J.copy(se.getClearColor())},this.setClearColor=function(){se.setClearColor(...arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha(...arguments)},this.clear=function(J=!0,ye=!0,Ie=!0){let Me=0;if(J){let we=!1;if(k!==null){const Ke=k.texture.format;we=Ke===R4||Ke===M4||Ke===Vy}if(we){const Ke=k.texture.type,st=Ke===Ja||Ke===nu||Ke===$0||Ke===z0||Ke===C4||Ke===T4,xt=se.getClearColor(),gt=se.getClearAlpha(),Bt=xt.r,zt=xt.g,Rt=xt.b;st?(p[0]=Bt,p[1]=zt,p[2]=Rt,p[3]=gt,H.clearBufferuiv(H.COLOR,0,p)):(m[0]=Bt,m[1]=zt,m[2]=Rt,m[3]=gt,H.clearBufferiv(H.COLOR,0,m))}else Me|=H.COLOR_BUFFER_BIT}ye&&(Me|=H.DEPTH_BUFFER_BIT),Ie&&(Me|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(Me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Qe,!1),t.removeEventListener("webglcontextrestored",Ge,!1),t.removeEventListener("webglcontextcreationerror",Ne,!1),se.dispose(),B.dispose(),G.dispose(),fe.dispose(),De.dispose(),K.dispose(),ge.dispose(),Ye.dispose(),de.dispose(),z.dispose(),ke.dispose(),ke.removeEventListener("sessionstart",vr),ke.removeEventListener("sessionend",b1),Kn.stop()};function Qe(J){J.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const J=xe.autoReset,ye=ae.enabled,Ie=ae.autoUpdate,Me=ae.needsUpdate,we=ae.type;at(),xe.autoReset=J,ae.enabled=ye,ae.autoUpdate=Ie,ae.needsUpdate=Me,ae.type=we}function Ne(J){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function tt(J){const ye=J.target;ye.removeEventListener("dispose",tt),Kt(ye)}function Kt(J){Yt(J),fe.remove(J)}function Yt(J){const ye=fe.get(J).programs;ye!==void 0&&(ye.forEach(function(Ie){z.releaseProgram(Ie)}),J.isShaderMaterial&&z.releaseShaderCache(J))}this.renderBufferDirect=function(J,ye,Ie,Me,we,Ke){ye===null&&(ye=pe);const st=we.isMesh&&we.matrixWorld.determinant()<0,xt=Tr(J,ye,Ie,Me,we);ie.setMaterial(Me,st);let gt=Ie.index,Bt=1;if(Me.wireframe===!0){if(gt=he.getWireframeAttribute(Ie),gt===void 0)return;Bt=2}const zt=Ie.drawRange,Rt=Ie.attributes.position;let dn=zt.start*Bt,_n=(zt.start+zt.count)*Bt;Ke!==null&&(dn=Math.max(dn,Ke.start*Bt),_n=Math.min(_n,(Ke.start+Ke.count)*Bt)),gt!==null?(dn=Math.max(dn,0),_n=Math.min(_n,gt.count)):Rt!=null&&(dn=Math.max(dn,0),_n=Math.min(_n,Rt.count));const Xn=_n-dn;if(Xn<0||Xn===1/0)return;Ye.setup(we,Me,xt,Ie,gt);let Mr,An=ze;if(gt!==null&&(Mr=q.get(gt),An=Be,An.setIndex(Mr)),we.isMesh)Me.wireframe===!0?(ie.setLineWidth(Me.wireframeLinewidth*Z()),An.setMode(H.LINES)):An.setMode(H.TRIANGLES);else if(we.isLine){let Ft=Me.linewidth;Ft===void 0&&(Ft=1),ie.setLineWidth(Ft*Z()),we.isLineSegments?An.setMode(H.LINES):we.isLineLoop?An.setMode(H.LINE_LOOP):An.setMode(H.LINE_STRIP)}else we.isPoints?An.setMode(H.POINTS):we.isSprite&&An.setMode(H.TRIANGLES);if(we.isBatchedMesh)if(we._multiDrawInstances!==null)g0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),An.renderMultiDrawInstances(we._multiDrawStarts,we._multiDrawCounts,we._multiDrawCount,we._multiDrawInstances);else if(le.get("WEBGL_multi_draw"))An.renderMultiDraw(we._multiDrawStarts,we._multiDrawCounts,we._multiDrawCount);else{const Ft=we._multiDrawStarts,xi=we._multiDrawCounts,Bn=we._multiDrawCount,ya=gt?q.get(gt).bytesPerElement:1,Hf=fe.get(Me).currentProgram.getUniforms();for(let ho=0;ho<Bn;ho++)Hf.setValue(H,"_gl_DrawID",ho),An.render(Ft[ho]/ya,xi[ho])}else if(we.isInstancedMesh)An.renderInstances(dn,Xn,we.count);else if(Ie.isInstancedBufferGeometry){const Ft=Ie._maxInstanceCount!==void 0?Ie._maxInstanceCount:1/0,xi=Math.min(Ie.instanceCount,Ft);An.renderInstances(dn,Xn,xi)}else An.render(dn,Xn)};function $t(J,ye,Ie){J.transparent===!0&&J.side===Da&&J.forceSinglePass===!1?(J.side=Is,J.needsUpdate=!0,lr(J,ye,Ie),J.side=eu,J.needsUpdate=!0,lr(J,ye,Ie),J.side=Da):lr(J,ye,Ie)}this.compile=function(J,ye,Ie=null){Ie===null&&(Ie=J),y=G.get(Ie),y.init(ye),w.push(y),Ie.traverseVisible(function(we){we.isLight&&we.layers.test(ye.layers)&&(y.pushLight(we),we.castShadow&&y.pushShadow(we))}),J!==Ie&&J.traverseVisible(function(we){we.isLight&&we.layers.test(ye.layers)&&(y.pushLight(we),we.castShadow&&y.pushShadow(we))}),y.setupLights();const Me=new Set;return J.traverse(function(we){if(!(we.isMesh||we.isPoints||we.isLine||we.isSprite))return;const Ke=we.material;if(Ke)if(Array.isArray(Ke))for(let st=0;st<Ke.length;st++){const xt=Ke[st];$t(xt,Ie,we),Me.add(xt)}else $t(Ke,Ie,we),Me.add(Ke)}),y=w.pop(),Me},this.compileAsync=function(J,ye,Ie=null){const Me=this.compile(J,ye,Ie);return new Promise(we=>{function Ke(){if(Me.forEach(function(st){fe.get(st).currentProgram.isReady()&&Me.delete(st)}),Me.size===0){we(J);return}setTimeout(Ke,10)}le.get("KHR_parallel_shader_compile")!==null?Ke():setTimeout(Ke,10)})};let ks=null;function Un(J){ks&&ks(J)}function vr(){Kn.stop()}function b1(){Kn.start()}const Kn=new WG;Kn.setAnimationLoop(Un),typeof self<"u"&&Kn.setContext(self),this.setAnimationLoop=function(J){ks=J,ke.setAnimationLoop(J),J===null?Kn.stop():Kn.start()},ke.addEventListener("sessionstart",vr),ke.addEventListener("sessionend",b1),this.render=function(J,ye){if(ye!==void 0&&ye.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;if(J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),ye.parent===null&&ye.matrixWorldAutoUpdate===!0&&ye.updateMatrixWorld(),ke.enabled===!0&&ke.isPresenting===!0&&(ke.cameraAutoUpdate===!0&&ke.updateCamera(ye),ye=ke.getCamera()),J.isScene===!0&&J.onBeforeRender(E,J,ye,k),y=G.get(J,w.length),y.init(ye),w.push(y),ve.multiplyMatrices(ye.projectionMatrix,ye.matrixWorldInverse),$.setFromProjectionMatrix(ve),te=this.localClippingEnabled,j=re.init(this.clippingPlanes,te),g=B.get(J,b.length),g.init(),b.push(g),ke.enabled===!0&&ke.isPresenting===!0){const Ke=E.xr.getDepthSensingMesh();Ke!==null&&fr(Ke,ye,-1/0,E.sortObjects)}fr(J,ye,0,E.sortObjects),g.finish(),E.sortObjects===!0&&g.sort(V,W),X=ke.enabled===!1||ke.isPresenting===!1||ke.hasDepthSensing()===!1,X&&se.addToRenderList(g,J),this.info.render.frame++,j===!0&&re.beginShadows();const Ie=y.state.shadowsArray;ae.render(Ie,J,ye),j===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset();const Me=g.opaque,we=g.transmissive;if(y.setupLights(),ye.isArrayCamera){const Ke=ye.cameras;if(we.length>0)for(let st=0,xt=Ke.length;st<xt;st++){const gt=Ke[st];br(Me,we,J,gt)}X&&se.render(J);for(let st=0,xt=Ke.length;st<xt;st++){const gt=Ke[st];_1(g,J,gt,gt.viewport)}}else we.length>0&&br(Me,we,J,ye),X&&se.render(J),_1(g,J,ye);k!==null&&R===0&&(me.updateMultisampleRenderTarget(k),me.updateRenderTargetMipmap(k)),J.isScene===!0&&J.onAfterRender(E,J,ye),Ye.resetDefaultState(),_=-1,A=null,w.pop(),w.length>0?(y=w[w.length-1],j===!0&&re.setGlobalState(E.clippingPlanes,y.state.camera)):y=null,b.pop(),b.length>0?g=b[b.length-1]:g=null};function fr(J,ye,Ie,Me){if(J.visible===!1)return;if(J.layers.test(ye.layers)){if(J.isGroup)Ie=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(ye);else if(J.isLight)y.pushLight(J),J.castShadow&&y.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||$.intersectsSprite(J)){Me&&$e.setFromMatrixPosition(J.matrixWorld).applyMatrix4(ve);const st=ge.update(J),xt=J.material;xt.visible&&g.push(J,st,xt,Ie,$e.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(!J.frustumCulled||$.intersectsObject(J))){const st=ge.update(J),xt=J.material;if(Me&&(J.boundingSphere!==void 0?(J.boundingSphere===null&&J.computeBoundingSphere(),$e.copy(J.boundingSphere.center)):(st.boundingSphere===null&&st.computeBoundingSphere(),$e.copy(st.boundingSphere.center)),$e.applyMatrix4(J.matrixWorld).applyMatrix4(ve)),Array.isArray(xt)){const gt=st.groups;for(let Bt=0,zt=gt.length;Bt<zt;Bt++){const Rt=gt[Bt],dn=xt[Rt.materialIndex];dn&&dn.visible&&g.push(J,st,dn,Ie,$e.z,Rt)}}else xt.visible&&g.push(J,st,xt,Ie,$e.z,null)}}const Ke=J.children;for(let st=0,xt=Ke.length;st<xt;st++)fr(Ke[st],ye,Ie,Me)}function _1(J,ye,Ie,Me){const we=J.opaque,Ke=J.transmissive,st=J.transparent;y.setupLightsView(Ie),j===!0&&re.setGlobalState(E.clippingPlanes,Ie),Me&&ie.viewport(M.copy(Me)),we.length>0&&cr(we,ye,Ie),Ke.length>0&&cr(Ke,ye,Ie),st.length>0&&cr(st,ye,Ie),ie.buffers.depth.setTest(!0),ie.buffers.depth.setMask(!0),ie.buffers.color.setMask(!0),ie.setPolygonOffset(!1)}function br(J,ye,Ie,Me){if((Ie.isScene===!0?Ie.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[Me.id]===void 0&&(y.state.transmissionRenderTarget[Me.id]=new jc(1,1,{generateMipmaps:!0,type:le.has("EXT_color_buffer_half_float")||le.has("EXT_color_buffer_float")?m1:Ja,minFilter:Mc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:vn.workingColorSpace}));const Ke=y.state.transmissionRenderTarget[Me.id],st=Me.viewport||M;Ke.setSize(st.z*E.transmissionResolutionScale,st.w*E.transmissionResolutionScale);const xt=E.getRenderTarget();E.setRenderTarget(Ke),E.getClearColor(v),S=E.getClearAlpha(),S<1&&E.setClearColor(16777215,.5),E.clear(),X&&se.render(Ie);const gt=E.toneMapping;E.toneMapping=Dc;const Bt=Me.viewport;if(Me.viewport!==void 0&&(Me.viewport=void 0),y.setupLightsView(Me),j===!0&&re.setGlobalState(E.clippingPlanes,Me),cr(J,Ie,Me),me.updateMultisampleRenderTarget(Ke),me.updateRenderTargetMipmap(Ke),le.has("WEBGL_multisampled_render_to_texture")===!1){let zt=!1;for(let Rt=0,dn=ye.length;Rt<dn;Rt++){const _n=ye[Rt],Xn=_n.object,Mr=_n.geometry,An=_n.material,Ft=_n.group;if(An.side===Da&&Xn.layers.test(Me.layers)){const xi=An.side;An.side=Is,An.needsUpdate=!0,E1(Xn,Ie,Me,Mr,An,Ft),An.side=xi,An.needsUpdate=!0,zt=!0}}zt===!0&&(me.updateMultisampleRenderTarget(Ke),me.updateRenderTargetMipmap(Ke))}E.setRenderTarget(xt),E.setClearColor(v,S),Bt!==void 0&&(Me.viewport=Bt),E.toneMapping=gt}function cr(J,ye,Ie){const Me=ye.isScene===!0?ye.overrideMaterial:null;for(let we=0,Ke=J.length;we<Ke;we++){const st=J[we],xt=st.object,gt=st.geometry,Bt=st.group;let zt=st.material;zt.allowOverride===!0&&Me!==null&&(zt=Me),xt.layers.test(Ie.layers)&&E1(xt,ye,Ie,gt,zt,Bt)}}function E1(J,ye,Ie,Me,we,Ke){J.onBeforeRender(E,ye,Ie,Me,we,Ke),J.modelViewMatrix.multiplyMatrices(Ie.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),we.onBeforeRender(E,ye,Ie,Me,J,Ke),we.transparent===!0&&we.side===Da&&we.forceSinglePass===!1?(we.side=Is,we.needsUpdate=!0,E.renderBufferDirect(Ie,ye,Me,we,J,Ke),we.side=eu,we.needsUpdate=!0,E.renderBufferDirect(Ie,ye,Me,we,J,Ke),we.side=Da):E.renderBufferDirect(Ie,ye,Me,we,J,Ke),J.onAfterRender(E,ye,Ie,Me,we,Ke)}function lr(J,ye,Ie){ye.isScene!==!0&&(ye=pe);const Me=fe.get(J),we=y.state.lights,Ke=y.state.shadowsArray,st=we.state.version,xt=z.getParameters(J,we.state,Ke,ye,Ie),gt=z.getProgramCacheKey(xt);let Bt=Me.programs;Me.environment=J.isMeshStandardMaterial?ye.environment:null,Me.fog=ye.fog,Me.envMap=(J.isMeshStandardMaterial?K:De).get(J.envMap||Me.environment),Me.envMapRotation=Me.environment!==null&&J.envMap===null?ye.environmentRotation:J.envMapRotation,Bt===void 0&&(J.addEventListener("dispose",tt),Bt=new Map,Me.programs=Bt);let zt=Bt.get(gt);if(zt!==void 0){if(Me.currentProgram===zt&&Me.lightsStateVersion===st)return x1(J,xt),zt}else xt.uniforms=z.getUniforms(J),J.onBeforeCompile(xt,E),zt=z.acquireProgram(xt,gt),Bt.set(gt,zt),Me.uniforms=xt.uniforms;const Rt=Me.uniforms;return(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(Rt.clippingPlanes=re.uniform),x1(J,xt),Me.needsLights=S1(J),Me.lightsStateVersion=st,Me.needsLights&&(Rt.ambientLightColor.value=we.state.ambient,Rt.lightProbe.value=we.state.probe,Rt.directionalLights.value=we.state.directional,Rt.directionalLightShadows.value=we.state.directionalShadow,Rt.spotLights.value=we.state.spot,Rt.spotLightShadows.value=we.state.spotShadow,Rt.rectAreaLights.value=we.state.rectArea,Rt.ltc_1.value=we.state.rectAreaLTC1,Rt.ltc_2.value=we.state.rectAreaLTC2,Rt.pointLights.value=we.state.point,Rt.pointLightShadows.value=we.state.pointShadow,Rt.hemisphereLights.value=we.state.hemi,Rt.directionalShadowMap.value=we.state.directionalShadowMap,Rt.directionalShadowMatrix.value=we.state.directionalShadowMatrix,Rt.spotShadowMap.value=we.state.spotShadowMap,Rt.spotLightMatrix.value=we.state.spotLightMatrix,Rt.spotLightMap.value=we.state.spotLightMap,Rt.pointShadowMap.value=we.state.pointShadowMap,Rt.pointShadowMatrix.value=we.state.pointShadowMatrix),Me.currentProgram=zt,Me.uniformsList=null,zt}function _r(J){if(J.uniformsList===null){const ye=J.currentProgram.getUniforms();J.uniformsList=k3.seqWithValue(ye.seq,J.uniforms)}return J.uniformsList}function x1(J,ye){const Ie=fe.get(J);Ie.outputColorSpace=ye.outputColorSpace,Ie.batching=ye.batching,Ie.batchingColor=ye.batchingColor,Ie.instancing=ye.instancing,Ie.instancingColor=ye.instancingColor,Ie.instancingMorph=ye.instancingMorph,Ie.skinning=ye.skinning,Ie.morphTargets=ye.morphTargets,Ie.morphNormals=ye.morphNormals,Ie.morphColors=ye.morphColors,Ie.morphTargetsCount=ye.morphTargetsCount,Ie.numClippingPlanes=ye.numClippingPlanes,Ie.numIntersection=ye.numClipIntersection,Ie.vertexAlphas=ye.vertexAlphas,Ie.vertexTangents=ye.vertexTangents,Ie.toneMapping=ye.toneMapping}function Tr(J,ye,Ie,Me,we){ye.isScene!==!0&&(ye=pe),me.resetTextureUnits();const Ke=ye.fog,st=Me.isMeshStandardMaterial?ye.environment:null,xt=k===null?E.outputColorSpace:k.isXRRenderTarget===!0?k.texture.colorSpace:vf,gt=(Me.isMeshStandardMaterial?K:De).get(Me.envMap||st),Bt=Me.vertexColors===!0&&!!Ie.attributes.color&&Ie.attributes.color.itemSize===4,zt=!!Ie.attributes.tangent&&(!!Me.normalMap||Me.anisotropy>0),Rt=!!Ie.morphAttributes.position,dn=!!Ie.morphAttributes.normal,_n=!!Ie.morphAttributes.color;let Xn=Dc;Me.toneMapped&&(k===null||k.isXRRenderTarget===!0)&&(Xn=E.toneMapping);const Mr=Ie.morphAttributes.position||Ie.morphAttributes.normal||Ie.morphAttributes.color,An=Mr!==void 0?Mr.length:0,Ft=fe.get(Me),xi=y.state.lights;if(j===!0&&(te===!0||J!==A)){const ps=J===A&&Me.id===_;re.setState(Me,J,ps)}let Bn=!1;Me.version===Ft.__version?(Ft.needsLights&&Ft.lightsStateVersion!==xi.state.version||Ft.outputColorSpace!==xt||we.isBatchedMesh&&Ft.batching===!1||!we.isBatchedMesh&&Ft.batching===!0||we.isBatchedMesh&&Ft.batchingColor===!0&&we.colorTexture===null||we.isBatchedMesh&&Ft.batchingColor===!1&&we.colorTexture!==null||we.isInstancedMesh&&Ft.instancing===!1||!we.isInstancedMesh&&Ft.instancing===!0||we.isSkinnedMesh&&Ft.skinning===!1||!we.isSkinnedMesh&&Ft.skinning===!0||we.isInstancedMesh&&Ft.instancingColor===!0&&we.instanceColor===null||we.isInstancedMesh&&Ft.instancingColor===!1&&we.instanceColor!==null||we.isInstancedMesh&&Ft.instancingMorph===!0&&we.morphTexture===null||we.isInstancedMesh&&Ft.instancingMorph===!1&&we.morphTexture!==null||Ft.envMap!==gt||Me.fog===!0&&Ft.fog!==Ke||Ft.numClippingPlanes!==void 0&&(Ft.numClippingPlanes!==re.numPlanes||Ft.numIntersection!==re.numIntersection)||Ft.vertexAlphas!==Bt||Ft.vertexTangents!==zt||Ft.morphTargets!==Rt||Ft.morphNormals!==dn||Ft.morphColors!==_n||Ft.toneMapping!==Xn||Ft.morphTargetsCount!==An)&&(Bn=!0):(Bn=!0,Ft.__version=Me.version);let ya=Ft.currentProgram;Bn===!0&&(ya=lr(Me,ye,we));let Hf=!1,ho=!1,I1=!1;const pr=ya.getUniforms(),Uo=Ft.uniforms;if(ie.useProgram(ya.program)&&(Hf=!0,ho=!0,I1=!0),Me.id!==_&&(_=Me.id,ho=!0),Hf||A!==J){ie.buffers.depth.getReversed()?(ce.copy(J.projectionMatrix),UDe(ce),BDe(ce),pr.setValue(H,"projectionMatrix",ce)):pr.setValue(H,"projectionMatrix",J.projectionMatrix),pr.setValue(H,"viewMatrix",J.matrixWorldInverse);const Ds=pr.map.cameraPosition;Ds!==void 0&&Ds.setValue(H,Te.setFromMatrixPosition(J.matrixWorld)),Q.logarithmicDepthBuffer&&pr.setValue(H,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),(Me.isMeshPhongMaterial||Me.isMeshToonMaterial||Me.isMeshLambertMaterial||Me.isMeshBasicMaterial||Me.isMeshStandardMaterial||Me.isShaderMaterial)&&pr.setValue(H,"isOrthographic",J.isOrthographicCamera===!0),A!==J&&(A=J,ho=!0,I1=!0)}if(we.isSkinnedMesh){pr.setOptional(H,we,"bindMatrix"),pr.setOptional(H,we,"bindMatrixInverse");const ps=we.skeleton;ps&&(ps.boneTexture===null&&ps.computeBoneTexture(),pr.setValue(H,"boneTexture",ps.boneTexture,me))}we.isBatchedMesh&&(pr.setOptional(H,we,"batchingTexture"),pr.setValue(H,"batchingTexture",we._matricesTexture,me),pr.setOptional(H,we,"batchingIdTexture"),pr.setValue(H,"batchingIdTexture",we._indirectTexture,me),pr.setOptional(H,we,"batchingColorTexture"),we._colorsTexture!==null&&pr.setValue(H,"batchingColorTexture",we._colorsTexture,me));const Bo=Ie.morphAttributes;if((Bo.position!==void 0||Bo.normal!==void 0||Bo.color!==void 0)&&Le.update(we,Ie,ya),(ho||Ft.receiveShadow!==we.receiveShadow)&&(Ft.receiveShadow=we.receiveShadow,pr.setValue(H,"receiveShadow",we.receiveShadow)),Me.isMeshGouraudMaterial&&Me.envMap!==null&&(Uo.envMap.value=gt,Uo.flipEnvMap.value=gt.isCubeTexture&&gt.isRenderTargetTexture===!1?-1:1),Me.isMeshStandardMaterial&&Me.envMap===null&&ye.environment!==null&&(Uo.envMapIntensity.value=ye.environmentIntensity),ho&&(pr.setValue(H,"toneMappingExposure",E.toneMappingExposure),Ft.needsLights&&Ir(Uo,I1),Ke&&Me.fog===!0&&O.refreshFogUniforms(Uo,Ke),O.refreshMaterialUniforms(Uo,Me,U,L,y.state.transmissionRenderTarget[J.id]),k3.upload(H,_r(Ft),Uo,me)),Me.isShaderMaterial&&Me.uniformsNeedUpdate===!0&&(k3.upload(H,_r(Ft),Uo,me),Me.uniformsNeedUpdate=!1),Me.isSpriteMaterial&&pr.setValue(H,"center",we.center),pr.setValue(H,"modelViewMatrix",we.modelViewMatrix),pr.setValue(H,"normalMatrix",we.normalMatrix),pr.setValue(H,"modelMatrix",we.matrixWorld),Me.isShaderMaterial||Me.isRawShaderMaterial){const ps=Me.uniformsGroups;for(let Ds=0,sE=ps.length;Ds<sE;Ds++){const $h=ps[Ds];de.update($h,ya),de.bind($h,ya)}}return ya}function Ir(J,ye){J.ambientLightColor.needsUpdate=ye,J.lightProbe.needsUpdate=ye,J.directionalLights.needsUpdate=ye,J.directionalLightShadows.needsUpdate=ye,J.pointLights.needsUpdate=ye,J.pointLightShadows.needsUpdate=ye,J.spotLights.needsUpdate=ye,J.spotLightShadows.needsUpdate=ye,J.rectAreaLights.needsUpdate=ye,J.hemisphereLights.needsUpdate=ye}function S1(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(J,ye,Ie){const Me=fe.get(J);Me.__autoAllocateDepthBuffer=J.resolveDepthBuffer===!1,Me.__autoAllocateDepthBuffer===!1&&(Me.__useRenderToTexture=!1),fe.get(J.texture).__webglTexture=ye,fe.get(J.depthTexture).__webglTexture=Me.__autoAllocateDepthBuffer?void 0:Ie,Me.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(J,ye){const Ie=fe.get(J);Ie.__webglFramebuffer=ye,Ie.__useDefaultFramebuffer=ye===void 0};const A1=H.createFramebuffer();this.setRenderTarget=function(J,ye=0,Ie=0){k=J,C=ye,R=Ie;let Me=!0,we=null,Ke=!1,st=!1;if(J){const gt=fe.get(J);if(gt.__useDefaultFramebuffer!==void 0)ie.bindFramebuffer(H.FRAMEBUFFER,null),Me=!1;else if(gt.__webglFramebuffer===void 0)me.setupRenderTarget(J);else if(gt.__hasExternalTextures)me.rebindTextures(J,fe.get(J.texture).__webglTexture,fe.get(J.depthTexture).__webglTexture);else if(J.depthBuffer){const Rt=J.depthTexture;if(gt.__boundDepthTexture!==Rt){if(Rt!==null&&fe.has(Rt)&&(J.width!==Rt.image.width||J.height!==Rt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");me.setupDepthRenderbuffer(J)}}const Bt=J.texture;(Bt.isData3DTexture||Bt.isDataArrayTexture||Bt.isCompressedArrayTexture)&&(st=!0);const zt=fe.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Array.isArray(zt[ye])?we=zt[ye][Ie]:we=zt[ye],Ke=!0):J.samples>0&&me.useMultisampledRTT(J)===!1?we=fe.get(J).__webglMultisampledFramebuffer:Array.isArray(zt)?we=zt[Ie]:we=zt,M.copy(J.viewport),D.copy(J.scissor),P=J.scissorTest}else M.copy(F).multiplyScalar(U).floor(),D.copy(I).multiplyScalar(U).floor(),P=N;if(Ie!==0&&(we=A1),ie.bindFramebuffer(H.FRAMEBUFFER,we)&&Me&&ie.drawBuffers(J,we),ie.viewport(M),ie.scissor(D),ie.setScissorTest(P),Ke){const gt=fe.get(J.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+ye,gt.__webglTexture,Ie)}else if(st){const gt=fe.get(J.texture),Bt=ye;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,gt.__webglTexture,Ie,Bt)}else if(J!==null&&Ie!==0){const gt=fe.get(J.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,gt.__webglTexture,Ie)}_=-1},this.readRenderTargetPixels=function(J,ye,Ie,Me,we,Ke,st,xt=0){if(!(J&&J.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let gt=fe.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&st!==void 0&&(gt=gt[st]),gt){ie.bindFramebuffer(H.FRAMEBUFFER,gt);try{const Bt=J.textures[xt],zt=Bt.format,Rt=Bt.type;if(!Q.textureFormatReadable(zt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Q.textureTypeReadable(Rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ye>=0&&ye<=J.width-Me&&Ie>=0&&Ie<=J.height-we&&(J.textures.length>1&&H.readBuffer(H.COLOR_ATTACHMENT0+xt),H.readPixels(ye,Ie,Me,we,He.convert(zt),He.convert(Rt),Ke))}finally{const Bt=k!==null?fe.get(k).__webglFramebuffer:null;ie.bindFramebuffer(H.FRAMEBUFFER,Bt)}}},this.readRenderTargetPixelsAsync=async function(J,ye,Ie,Me,we,Ke,st,xt=0){if(!(J&&J.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let gt=fe.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&st!==void 0&&(gt=gt[st]),gt)if(ye>=0&&ye<=J.width-Me&&Ie>=0&&Ie<=J.height-we){ie.bindFramebuffer(H.FRAMEBUFFER,gt);const Bt=J.textures[xt],zt=Bt.format,Rt=Bt.type;if(!Q.textureFormatReadable(zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Q.textureTypeReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const dn=H.createBuffer();H.bindBuffer(H.PIXEL_PACK_BUFFER,dn),H.bufferData(H.PIXEL_PACK_BUFFER,Ke.byteLength,H.STREAM_READ),J.textures.length>1&&H.readBuffer(H.COLOR_ATTACHMENT0+xt),H.readPixels(ye,Ie,Me,we,He.convert(zt),He.convert(Rt),0);const _n=k!==null?fe.get(k).__webglFramebuffer:null;ie.bindFramebuffer(H.FRAMEBUFFER,_n);const Xn=H.fenceSync(H.SYNC_GPU_COMMANDS_COMPLETE,0);return H.flush(),await LDe(H,Xn,4),H.bindBuffer(H.PIXEL_PACK_BUFFER,dn),H.getBufferSubData(H.PIXEL_PACK_BUFFER,0,Ke),H.deleteBuffer(dn),H.deleteSync(Xn),Ke}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(J,ye=null,Ie=0){const Me=Math.pow(2,-Ie),we=Math.floor(J.image.width*Me),Ke=Math.floor(J.image.height*Me),st=ye!==null?ye.x:0,xt=ye!==null?ye.y:0;me.setTexture2D(J,0),H.copyTexSubImage2D(H.TEXTURE_2D,Ie,0,0,st,xt,we,Ke),ie.unbindTexture()};const C1=H.createFramebuffer(),T1=H.createFramebuffer();this.copyTextureToTexture=function(J,ye,Ie=null,Me=null,we=0,Ke=null){Ke===null&&(we!==0?(g0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ke=we,we=0):Ke=0);let st,xt,gt,Bt,zt,Rt,dn,_n,Xn;const Mr=J.isCompressedTexture?J.mipmaps[Ke]:J.image;if(Ie!==null)st=Ie.max.x-Ie.min.x,xt=Ie.max.y-Ie.min.y,gt=Ie.isBox3?Ie.max.z-Ie.min.z:1,Bt=Ie.min.x,zt=Ie.min.y,Rt=Ie.isBox3?Ie.min.z:0;else{const Bo=Math.pow(2,-we);st=Math.floor(Mr.width*Bo),xt=Math.floor(Mr.height*Bo),J.isDataArrayTexture?gt=Mr.depth:J.isData3DTexture?gt=Math.floor(Mr.depth*Bo):gt=1,Bt=0,zt=0,Rt=0}Me!==null?(dn=Me.x,_n=Me.y,Xn=Me.z):(dn=0,_n=0,Xn=0);const An=He.convert(ye.format),Ft=He.convert(ye.type);let xi;ye.isData3DTexture?(me.setTexture3D(ye,0),xi=H.TEXTURE_3D):ye.isDataArrayTexture||ye.isCompressedArrayTexture?(me.setTexture2DArray(ye,0),xi=H.TEXTURE_2D_ARRAY):(me.setTexture2D(ye,0),xi=H.TEXTURE_2D),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,ye.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ye.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,ye.unpackAlignment);const Bn=H.getParameter(H.UNPACK_ROW_LENGTH),ya=H.getParameter(H.UNPACK_IMAGE_HEIGHT),Hf=H.getParameter(H.UNPACK_SKIP_PIXELS),ho=H.getParameter(H.UNPACK_SKIP_ROWS),I1=H.getParameter(H.UNPACK_SKIP_IMAGES);H.pixelStorei(H.UNPACK_ROW_LENGTH,Mr.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Mr.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Bt),H.pixelStorei(H.UNPACK_SKIP_ROWS,zt),H.pixelStorei(H.UNPACK_SKIP_IMAGES,Rt);const pr=J.isDataArrayTexture||J.isData3DTexture,Uo=ye.isDataArrayTexture||ye.isData3DTexture;if(J.isDepthTexture){const Bo=fe.get(J),ps=fe.get(ye),Ds=fe.get(Bo.__renderTarget),sE=fe.get(ps.__renderTarget);ie.bindFramebuffer(H.READ_FRAMEBUFFER,Ds.__webglFramebuffer),ie.bindFramebuffer(H.DRAW_FRAMEBUFFER,sE.__webglFramebuffer);for(let $h=0;$h<gt;$h++)pr&&(H.framebufferTextureLayer(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,fe.get(J).__webglTexture,we,Rt+$h),H.framebufferTextureLayer(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,fe.get(ye).__webglTexture,Ke,Xn+$h)),H.blitFramebuffer(Bt,zt,st,xt,dn,_n,st,xt,H.DEPTH_BUFFER_BIT,H.NEAREST);ie.bindFramebuffer(H.READ_FRAMEBUFFER,null),ie.bindFramebuffer(H.DRAW_FRAMEBUFFER,null)}else if(we!==0||J.isRenderTargetTexture||fe.has(J)){const Bo=fe.get(J),ps=fe.get(ye);ie.bindFramebuffer(H.READ_FRAMEBUFFER,C1),ie.bindFramebuffer(H.DRAW_FRAMEBUFFER,T1);for(let Ds=0;Ds<gt;Ds++)pr?H.framebufferTextureLayer(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,Bo.__webglTexture,we,Rt+Ds):H.framebufferTexture2D(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Bo.__webglTexture,we),Uo?H.framebufferTextureLayer(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,ps.__webglTexture,Ke,Xn+Ds):H.framebufferTexture2D(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,ps.__webglTexture,Ke),we!==0?H.blitFramebuffer(Bt,zt,st,xt,dn,_n,st,xt,H.COLOR_BUFFER_BIT,H.NEAREST):Uo?H.copyTexSubImage3D(xi,Ke,dn,_n,Xn+Ds,Bt,zt,st,xt):H.copyTexSubImage2D(xi,Ke,dn,_n,Bt,zt,st,xt);ie.bindFramebuffer(H.READ_FRAMEBUFFER,null),ie.bindFramebuffer(H.DRAW_FRAMEBUFFER,null)}else Uo?J.isDataTexture||J.isData3DTexture?H.texSubImage3D(xi,Ke,dn,_n,Xn,st,xt,gt,An,Ft,Mr.data):ye.isCompressedArrayTexture?H.compressedTexSubImage3D(xi,Ke,dn,_n,Xn,st,xt,gt,An,Mr.data):H.texSubImage3D(xi,Ke,dn,_n,Xn,st,xt,gt,An,Ft,Mr):J.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,Ke,dn,_n,st,xt,An,Ft,Mr.data):J.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,Ke,dn,_n,Mr.width,Mr.height,An,Mr.data):H.texSubImage2D(H.TEXTURE_2D,Ke,dn,_n,st,xt,An,Ft,Mr);H.pixelStorei(H.UNPACK_ROW_LENGTH,Bn),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,ya),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Hf),H.pixelStorei(H.UNPACK_SKIP_ROWS,ho),H.pixelStorei(H.UNPACK_SKIP_IMAGES,I1),Ke===0&&ye.generateMipmaps&&H.generateMipmap(xi),ie.unbindTexture()},this.copyTextureToTexture3D=function(J,ye,Ie=null,Me=null,we=0){return g0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(J,ye,Ie,Me,we)},this.initRenderTarget=function(J){fe.get(J).__webglFramebuffer===void 0&&me.setupRenderTarget(J)},this.initTexture=function(J){J.isCubeTexture?me.setTextureCube(J,0):J.isData3DTexture?me.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?me.setTexture2DArray(J,0):me.setTexture2D(J,0),ie.unbindTexture()},this.resetState=function(){C=0,R=0,k=null,ie.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return na}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=vn._getDrawingBufferColorSpace(e),t.unpackColorSpace=vn._getUnpackColorSpace()}}const XHe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:x4,AddEquation:th,AddOperation:wj,AdditiveAnimationBlendMode:yT,AdditiveBlending:nC,AgXToneMapping:xj,AlphaFormat:fT,AlwaysCompare:Bj,AlwaysDepth:e_,AlwaysStencilFunc:oC,AmbientLight:NG,AnimationAction:zG,AnimationClip:ry,AnimationLoader:uUe,AnimationMixer:FUe,AnimationObjectGroup:UUe,AnimationUtils:oUe,ArcCurve:rG,ArrayCamera:BG,ArrowHelper:aBe,AttachedBindMode:sC,Audio:FG,AudioAnalyser:TUe,AudioContext:HT,AudioListener:SUe,AudioLoader:_Ue,AxesHelper:cBe,BackSide:Is,BasicDepthPacking:Mj,BasicShadowMap:Lke,BatchedMesh:Jj,Bone:AT,BooleanKeyframeTrack:$f,Box2:GUe,Box3:us,Box3Helper:sBe,BoxGeometry:Ff,BoxHelper:iBe,BufferAttribute:Gn,BufferGeometry:on,BufferGeometryLoader:UG,ByteType:uT,Cache:Ll,Camera:qy,CameraHelper:rBe,CanvasTexture:MLe,CapsuleGeometry:z4,CatmullRomCurve3:iG,CineonToneMapping:_j,CircleGeometry:H4,ClampToEdgeWrapping:ta,Clock:nE,Color:ft,ColorKeyframeTrack:FT,ColorManagement:vn,CompressedArrayTexture:TLe,CompressedCubeTexture:ILe,CompressedTexture:$4,CompressedTextureLoader:hUe,ConeGeometry:Ky,ConstantAlphaFactor:mj,ConstantColorFactor:fj,Controls:uBe,CubeCamera:qj,CubeReflectionMapping:tu,CubeRefractionMapping:Nh,CubeTexture:jy,CubeTextureLoader:dUe,CubeUVReflectionMapping:p1,CubicBezierCurve:MT,CubicBezierCurve3:sG,CubicInterpolant:SG,CullFaceBack:tC,CullFaceFront:Jq,CullFaceFrontBack:Dke,CullFaceNone:Zq,Curve:ic,CurvePath:aG,CustomBlending:Qq,CustomToneMapping:Ej,CylinderGeometry:Gy,Cylindrical:jUe,Data3DTexture:O4,DataArrayTexture:N4,DataTexture:Lc,DataTextureLoader:fUe,DataUtils:QDe,DecrementStencilOp:Xke,DecrementWrapStencilOp:Jke,DefaultLoadingManager:TG,DepthFormat:H0,DepthStencilFormat:V0,DepthTexture:TT,DetachedBindMode:Aj,DirectionalLight:PG,DirectionalLightHelper:nBe,DiscreteInterpolant:AG,DodecahedronGeometry:V4,DoubleSide:Da,DstAlphaFactor:cj,DstColorFactor:uj,DynamicCopyUsage:fDe,DynamicDrawUsage:aDe,DynamicReadUsage:uDe,EdgesGeometry:nG,EllipseCurve:W4,EqualCompare:kj,EqualDepth:n_,EqualStencilFunc:nDe,EquirectangularReflectionMapping:H2,EquirectangularRefractionMapping:V2,Euler:Po,EventDispatcher:Zc,ExtrudeGeometry:q4,FileLoader:ru,Float16BufferAttribute:oLe,Float32BufferAttribute:It,FloatType:to,Fog:D4,FogExp2:k4,FramebufferTexture:CLe,FrontSide:eu,Frustum:y1,FrustumArray:F4,GLBufferAttribute:WUe,GLSL1:mDe,GLSL3:aC,GreaterCompare:Dj,GreaterDepth:i_,GreaterEqualCompare:Uj,GreaterEqualDepth:r_,GreaterEqualStencilFunc:oDe,GreaterStencilFunc:iDe,GridHelper:eBe,Group:Qp,HalfFloatType:m1,HemisphereLight:IG,HemisphereLightHelper:QUe,IcosahedronGeometry:j4,ImageBitmapLoader:bUe,ImageLoader:iy,ImageUtils:zj,IncrementStencilOp:Yke,IncrementWrapStencilOp:Zke,InstancedBufferAttribute:j0,InstancedBufferGeometry:LG,InstancedInterleavedBuffer:VUe,InstancedMesh:Zj,Int16BufferAttribute:iLe,Int32BufferAttribute:sLe,Int8BufferAttribute:tLe,IntType:A4,InterleavedBuffer:U4,InterleavedBufferAttribute:bf,Interpolant:Zy,InterpolateDiscrete:j2,InterpolateLinear:N_,InterpolateSmooth:N3,InterpolationSamplingMode:wDe,InterpolationSamplingType:yDe,InvertStencilOp:Qke,KeepStencilOp:gd,KeyframeTrack:ga,LOD:Yj,LatheGeometry:G4,Layers:Wy,LessCompare:Oj,LessDepth:t_,LessEqualCompare:wT,LessEqualDepth:wf,LessEqualStencilFunc:rDe,LessStencilFunc:tDe,Light:Fh,LightProbe:DG,Line:Oh,Line3:KUe,LineBasicMaterial:Os,LineCurve:RT,LineCurve3:oG,LineDashedMaterial:_G,LineLoop:Qj,LineSegments:Jc,LinearFilter:oi,LinearInterpolant:BT,LinearMipMapLinearFilter:$ke,LinearMipMapNearestFilter:Fke,LinearMipmapLinearFilter:Mc,LinearMipmapNearestFilter:wg,LinearSRGBColorSpace:vf,LinearToneMapping:vj,LinearTransfer:K2,Loader:uo,LoaderUtils:dC,LoadingManager:$T,LoopOnce:Cj,LoopPingPong:Ij,LoopRepeat:Tj,MOUSE:Oke,Material:fs,MaterialLoader:tE,MathUtils:bT,Matrix2:jT,Matrix3:Qt,Matrix4:jt,MaxEquation:rj,Mesh:Vr,MeshBasicMaterial:cu,MeshDepthMaterial:DT,MeshDistanceMaterial:LT,MeshLambertMaterial:vG,MeshMatcapMaterial:bG,MeshNormalMaterial:wG,MeshPhongMaterial:gG,MeshPhysicalMaterial:mG,MeshStandardMaterial:kT,MeshToonMaterial:yG,MinEquation:nj,MirroredRepeatWrapping:q2,MixOperation:yj,MultiplyBlending:iC,MultiplyOperation:Hy,NearestFilter:Bi,NearestMipMapLinearFilter:Bke,NearestMipMapNearestFilter:Uke,NearestMipmapLinearFilter:Zp,NearestMipmapNearestFilter:lT,NeutralToneMapping:Sj,NeverCompare:Nj,NeverDepth:Qb,NeverStencilFunc:eDe,NoBlending:Vl,NoColorSpace:Nl,NoToneMapping:Dc,NormalAnimationBlendMode:P4,NormalBlending:Zd,NotEqualCompare:Lj,NotEqualDepth:s_,NotEqualStencilFunc:sDe,NumberKeyframeTrack:ty,Object3D:bn,ObjectLoader:wUe,ObjectSpaceNormalMap:Pj,OctahedronGeometry:Yy,OneFactor:sj,OneMinusConstantAlphaFactor:gj,OneMinusConstantColorFactor:pj,OneMinusDstAlphaFactor:lj,OneMinusDstColorFactor:hj,OneMinusSrcAlphaFactor:Jb,OneMinusSrcColorFactor:aj,OrthographicCamera:eE,PCFShadowMap:aT,PCFSoftShadowMap:cT,PMREMGenerator:mC,Path:L_,PerspectiveCamera:Gr,Plane:Yu,PlaneGeometry:w1,PlaneHelper:oBe,PointLight:RG,PointLightHelper:ZUe,Points:eG,PointsMaterial:CT,PolarGridHelper:tBe,PolyhedronGeometry:Bh,PositionalAudio:CUe,PropertyBinding:xn,PropertyMixer:$G,QuadraticBezierCurve:PT,QuadraticBezierCurve3:NT,Quaternion:oo,QuaternionKeyframeTrack:Jy,QuaternionLinearInterpolant:CG,RED_GREEN_RGTC2_Format:R_,RED_RGTC1_Format:gT,REVISION:zy,RGBADepthPacking:Rj,RGBAFormat:Ss,RGBAIntegerFormat:R4,RGBA_ASTC_10x10_Format:S_,RGBA_ASTC_10x5_Format:__,RGBA_ASTC_10x6_Format:E_,RGBA_ASTC_10x8_Format:x_,RGBA_ASTC_12x10_Format:A_,RGBA_ASTC_12x12_Format:C_,RGBA_ASTC_4x4_Format:f_,RGBA_ASTC_5x4_Format:p_,RGBA_ASTC_5x5_Format:m_,RGBA_ASTC_6x5_Format:g_,RGBA_ASTC_6x6_Format:y_,RGBA_ASTC_8x5_Format:w_,RGBA_ASTC_8x6_Format:v_,RGBA_ASTC_8x8_Format:b_,RGBA_BPTC_Format:xg,RGBA_ETC2_EAC_Format:d_,RGBA_PVRTC_2BPPV1_Format:l_,RGBA_PVRTC_4BPPV1_Format:c_,RGBA_S3TC_DXT1_Format:bg,RGBA_S3TC_DXT3_Format:_g,RGBA_S3TC_DXT5_Format:Eg,RGBDepthPacking:qke,RGBFormat:pT,RGBIntegerFormat:zke,RGB_BPTC_SIGNED_Format:T_,RGB_BPTC_UNSIGNED_Format:I_,RGB_ETC1_Format:u_,RGB_ETC2_Format:h_,RGB_PVRTC_2BPPV1_Format:a_,RGB_PVRTC_4BPPV1_Format:o_,RGB_S3TC_DXT1_Format:vg,RGDepthPacking:jke,RGFormat:mT,RGIntegerFormat:M4,RawShaderMaterial:pG,Ray:g1,Raycaster:HG,RectAreaLight:OG,RedFormat:I4,RedIntegerFormat:Vy,ReinhardToneMapping:bj,RenderTarget:_T,RenderTarget3D:$Ue,RepeatWrapping:W2,ReplaceStencilOp:Kke,ReverseSubtractEquation:tj,RingGeometry:K4,SIGNED_RED_GREEN_RGTC2_Format:P_,SIGNED_RED_RGTC1_Format:M_,SRGBColorSpace:bs,SRGBTransfer:Vn,Scene:L4,ShaderChunk:an,ShaderLib:Pa,ShaderMaterial:Qa,ShadowMaterial:fG,Shape:Qd,ShapeGeometry:Y4,ShapePath:lBe,ShapeUtils:Ba,ShortType:hT,Skeleton:B4,SkeletonHelper:XUe,SkinnedMesh:Xj,Source:oh,Sphere:Fi,SphereGeometry:Xy,Spherical:qUe,SphericalHarmonics3:kG,SplineCurve:OT,SpotLight:MG,SpotLightHelper:YUe,Sprite:Kj,SpriteMaterial:ST,SrcAlphaFactor:Zb,SrcAlphaSaturateFactor:dj,SrcColorFactor:oj,StaticCopyUsage:dDe,StaticDrawUsage:Y2,StaticReadUsage:lDe,StereoCamera:EUe,StreamCopyUsage:pDe,StreamDrawUsage:cDe,StreamReadUsage:hDe,StringKeyframeTrack:zf,SubtractEquation:ej,SubtractiveBlending:rC,TOUCH:kke,TangentSpaceNormalMap:Uh,TetrahedronGeometry:X4,Texture:kr,TextureLoader:pUe,TextureUtils:mBe,TimestampQuery:gDe,TorusGeometry:Z4,TorusKnotGeometry:J4,Triangle:Zs,TriangleFanDrawMode:Wke,TriangleStripDrawMode:Vke,TrianglesDrawMode:Hke,TubeGeometry:Q4,UVMapping:S4,Uint16BufferAttribute:ET,Uint32BufferAttribute:xT,Uint8BufferAttribute:nLe,Uint8ClampedBufferAttribute:rLe,Uniform:qT,UniformsGroup:HUe,UniformsLib:ot,UniformsUtils:Wj,UnsignedByteType:Ja,UnsignedInt248Type:z0,UnsignedInt5999Type:dT,UnsignedIntType:nu,UnsignedShort4444Type:C4,UnsignedShort5551Type:T4,UnsignedShortType:$0,VSMShadowMap:_c,Vector2:Ue,Vector3:ne,Vector4:Sn,VectorKeyframeTrack:ny,VideoFrameTexture:ALe,VideoTexture:tG,WebGL3DRenderTarget:VDe,WebGLArrayRenderTarget:HDe,WebGLCoordinateSystem:na,WebGLCubeRenderTarget:jj,WebGLRenderTarget:jc,WebGLRenderer:D3,WebGLUtils:YG,WebGPUCoordinateSystem:X2,WebXRController:O3,WireframeGeometry:dG,WrapAroundEnding:G2,ZeroCurvatureEnding:Fd,ZeroFactor:ij,ZeroSlopeEnding:$d,ZeroStencilOp:Gke,createCanvasElement:$j},Symbol.toStringTag,{value:"Module"}));function kh(n){return V_()?(MC(n),!0):!1}function Ko(){const n=new Set,e=s=>{n.delete(s)};return{on:s=>{n.add(s);const o=()=>e(s);return kh(o),{off:o}},off:e,trigger:(...s)=>Promise.all(Array.from(n).map(o=>o(...s))),clear:()=>{n.clear()}}}const bx=new WeakMap,ZHe=(...n)=>{var e;const t=n[0],r=(e=Bc())==null?void 0:e.proxy;if(r==null&&!BC())throw new Error("injectLocal must be called in setup");return r&&bx.has(r)&&t in bx.get(r)?bx.get(r)[t]:Wd(...n)},yC=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const JHe=n=>n!=null,QHe=Object.prototype.toString,eVe=n=>QHe.call(n)==="[object Object]",wC=()=>{};function tVe(n,e){function t(...r){return new Promise((i,s)=>{Promise.resolve(n(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(i).catch(s)})}return t}function nVe(n,e={}){let t,r,i=wC;const s=c=>{clearTimeout(c),i(),i=wC};let o;return c=>{const l=Ot(n),u=Ot(e.maxWait);return t&&s(t),l<=0||u!==void 0&&u<=0?(r&&(s(r),r=null),Promise.resolve(c())):new Promise((h,d)=>{i=e.rejectOnCancel?d:h,o=c,u&&!r&&(r=setTimeout(()=>{t&&s(t),r=null,h(o())},u)),t=setTimeout(()=>{r&&s(r),r=null,h(c())},l)})}}function OL(n){return n.endsWith("rem")?Number.parseFloat(n)*16:Number.parseFloat(n)}function rVe(n,e,t=!1){return e.reduce((r,i)=>(i in n&&(!t||n[i]!==void 0)&&(r[i]=n[i]),r),{})}function iVe(n){return Bc()}function Tg(n){return Array.isArray(n)?n:[n]}function sVe(n,e=200,t={}){return tVe(nVe(e,t),n)}function kL(n,e=200,t={}){const r=Ae(n.value),i=sVe(()=>{r.value=n.value},e,t);return wt(n,()=>i()),r}function oVe(n,e={}){if(!or(n))return bU(n);const t=Array.isArray(n.value)?Array.from({length:n.value.length}):{};for(const r in n.value)t[r]=vU(()=>({get(){return n.value[r]},set(i){var s;if((s=Ot(e.replaceRef))!=null?s:!0)if(Array.isArray(n.value)){const a=[...n.value];a[r]=i,n.value=a}else{const a={...n.value,[r]:i};Object.setPrototypeOf(a,Object.getPrototypeOf(n.value)),n.value=a}else n.value[r]=i}}));return t}const Pi=Ot;function KT(n,e=!0,t){iVe()?No(n,t):e?n():K_(n)}function aVe(n,e=1e3,t={}){const{immediate:r=!0,immediateCallback:i=!1}=t;let s=null;const o=Tt(!1);function a(){s&&(clearInterval(s),s=null)}function c(){o.value=!1,a()}function l(){const u=Ot(e);u<=0||(o.value=!0,i&&n(),a(),o.value&&(s=setInterval(n,u)))}if(r&&yC&&l(),or(e)||typeof e=="function"){const u=wt(e,()=>{o.value&&yC&&l()});kh(u)}return kh(c),{isActive:o,pause:c,resume:l}}function XG(n,e,t){return wt(n,e,{...t,immediate:!0})}const lu=yC?window:void 0;function Fa(n){var e;const t=Ot(n);return(e=t?.$el)!=null?e:t}function Ef(...n){const e=[],t=()=>{e.forEach(a=>a()),e.length=0},r=(a,c,l,u)=>(a.addEventListener(c,l,u),()=>a.removeEventListener(c,l,u)),i=Ee(()=>{const a=Tg(Ot(n[0])).filter(c=>c!=null);return a.every(c=>typeof c!="string")?a:void 0}),s=XG(()=>{var a,c;return[(c=(a=i.value)==null?void 0:a.map(l=>Fa(l)))!=null?c:[lu].filter(l=>l!=null),Tg(Ot(i.value?n[1]:n[0])),Tg(ht(i.value?n[2]:n[1])),Ot(i.value?n[3]:n[2])]},([a,c,l,u])=>{if(t(),!a?.length||!c?.length||!l?.length)return;const h=eVe(u)?{...u}:u;e.push(...a.flatMap(d=>c.flatMap(f=>l.map(p=>r(d,f,p,h)))))},{flush:"post"}),o=()=>{s(),t()};return kh(t),o}function cVe(){const n=Tt(!1),e=Bc();return e&&No(()=>{n.value=!0},e),n}function iE(n){const e=cVe();return Ee(()=>(e.value,!!n()))}function lVe(n,e,t={}){const{window:r=lu,...i}=t;let s;const o=iE(()=>r&&"MutationObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},c=Ee(()=>{const d=Ot(n),f=Tg(d).map(Fa).filter(JHe);return new Set(f)}),l=wt(()=>c.value,d=>{a(),o.value&&d.size&&(s=new MutationObserver(e),d.forEach(f=>s.observe(f,i)))},{immediate:!0,flush:"post"}),u=()=>s?.takeRecords(),h=()=>{l(),a()};return kh(h),{isSupported:o,stop:h,takeRecords:u}}function YT(n,e={}){const{immediate:t=!0,fpsLimit:r=void 0,window:i=lu,once:s=!1}=e,o=Tt(!1),a=Ee(()=>r?1e3/Ot(r):null);let c=0,l=null;function u(f){if(!o.value||!i)return;c||(c=f);const p=f-c;if(a.value&&p<a.value){l=i.requestAnimationFrame(u);return}if(c=f,n({delta:p,timestamp:f}),s){o.value=!1,l=null;return}l=i.requestAnimationFrame(u)}function h(){!o.value&&i&&(o.value=!0,c=0,l=i.requestAnimationFrame(u))}function d(){o.value=!1,l!=null&&i&&(i.cancelAnimationFrame(l),l=null)}return t&&h(),kh(d),{isActive:Qo(o),pause:d,resume:h}}const uVe=Symbol("vueuse-ssr-width");function hVe(){const n=BC()?ZHe(uVe,null):null;return typeof n=="number"?n:void 0}function ZG(n,e={}){const{window:t=lu,ssrWidth:r=hVe()}=e,i=iE(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function"),s=Tt(typeof r=="number"),o=Tt(),a=Tt(!1),c=l=>{a.value=l.matches};return ef(()=>{if(s.value){s.value=!i.value;const l=Ot(n).split(",");a.value=l.some(u=>{const h=u.includes("not all"),d=u.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),f=u.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let p=!!(d||f);return d&&p&&(p=r>=OL(d[1])),f&&p&&(p=r<=OL(f[1])),h?!p:p});return}i.value&&(o.value=t.matchMedia(Ot(n)),a.value=o.value.matches)}),Ef(o,"change",c,{passive:!0}),Ee(()=>a.value)}function dVe(n={}){const{window:e=lu}=n,t=Tt(1),r=ZG(()=>`(resolution: ${t.value}dppx)`,n);let i=wC;return e&&(i=XG(r,()=>t.value=e.devicePixelRatio)),{pixelRatio:Qo(t),stop:i}}function JG(n,e,t={}){const{window:r=lu,...i}=t;let s;const o=iE(()=>r&&"ResizeObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},c=Ee(()=>{const h=Ot(n);return Array.isArray(h)?h.map(d=>Fa(d)):[Fa(h)]}),l=wt(c,h=>{if(a(),o.value&&r){s=new ResizeObserver(e);for(const d of h)d&&s.observe(d,i)}},{immediate:!0,flush:"post"}),u=()=>{a(),l()};return kh(u),{isSupported:o,stop:u}}function fVe(n,e={}){const{reset:t=!0,windowResize:r=!0,windowScroll:i=!0,immediate:s=!0,updateTiming:o="sync"}=e,a=Tt(0),c=Tt(0),l=Tt(0),u=Tt(0),h=Tt(0),d=Tt(0),f=Tt(0),p=Tt(0);function m(){const y=Fa(n);if(!y){t&&(a.value=0,c.value=0,l.value=0,u.value=0,h.value=0,d.value=0,f.value=0,p.value=0);return}const b=y.getBoundingClientRect();a.value=b.height,c.value=b.bottom,l.value=b.left,u.value=b.right,h.value=b.top,d.value=b.width,f.value=b.x,p.value=b.y}function g(){o==="sync"?m():o==="next-frame"&&requestAnimationFrame(()=>m())}return JG(n,g),wt(()=>Fa(n),y=>!y&&g()),lVe(n,g,{attributeFilter:["style","class"]}),i&&Ef("scroll",g,{capture:!0,passive:!0}),r&&Ef("resize",g,{passive:!0}),KT(()=>{s&&g()}),{height:a,bottom:c,left:l,right:u,top:h,width:d,x:f,y:p,update:g}}function pVe(n,e={width:0,height:0},t={}){const{window:r=lu,box:i="content-box"}=t,s=Ee(()=>{var h,d;return(d=(h=Fa(n))==null?void 0:h.namespaceURI)==null?void 0:d.includes("svg")}),o=Tt(e.width),a=Tt(e.height),{stop:c}=JG(n,([h])=>{const d=i==="border-box"?h.borderBoxSize:i==="content-box"?h.contentBoxSize:h.devicePixelContentBoxSize;if(r&&s.value){const f=Fa(n);if(f){const p=f.getBoundingClientRect();o.value=p.width,a.value=p.height}}else if(d){const f=Tg(d);o.value=f.reduce((p,{inlineSize:m})=>p+m,0),a.value=f.reduce((p,{blockSize:m})=>p+m,0)}else o.value=h.contentRect.width,a.value=h.contentRect.height},t);KT(()=>{const h=Fa(n);h&&(o.value="offsetWidth"in h?h.offsetWidth:e.width,a.value="offsetHeight"in h?h.offsetHeight:e.height)});const l=wt(()=>Fa(n),h=>{o.value=h?e.width:0,a.value=h?e.height:0});function u(){c(),l()}return{width:o,height:a,stop:u}}function mVe(n){var e;const t=Tt(0);if(typeof performance>"u")return t;const r=(e=n?.every)!=null?e:10;let i=performance.now(),s=0;return YT(()=>{if(s+=1,s>=r){const o=performance.now(),a=o-i;t.value=Math.round(1e3/(a/s)),i=o,s=0}}),t}function gVe(n={}){const e=Ae(),t=iE(()=>typeof performance<"u"&&"memory"in performance);if(t.value){const{interval:r=1e3}=n;aVe(()=>{e.value=performance.memory},r,{immediate:n.immediate,immediateCallback:n.immediateCallback})}return{isSupported:t,memory:e}}const QG={x:0,y:0,pointerId:0,pressure:0,tiltX:0,tiltY:0,width:0,height:0,twist:0,pointerType:null},yVe=Object.keys(QG);function wVe(n={}){const{target:e=lu}=n,t=Tt(!1),r=Ae(n.initialValue||{});Object.assign(r.value,QG,r.value);const i=s=>{t.value=!0,!(n.pointerTypes&&!n.pointerTypes.includes(s.pointerType))&&(r.value=rVe(s,yVe,!1))};if(e){const s={passive:!0};Ef(e,["pointerdown","pointermove","pointerup"],i,s),Ef(e,"pointerleave",()=>t.value=!1,s)}return{...oVe(r),isInside:t}}function vVe(n={}){const{window:e=lu,initialWidth:t=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:s=!0,type:o="inner"}=n,a=Tt(t),c=Tt(r),l=()=>{if(e)if(o==="outer")a.value=e.outerWidth,c.value=e.outerHeight;else if(o==="visual"&&e.visualViewport){const{width:h,height:d,scale:f}=e.visualViewport;a.value=Math.round(h*f),c.value=Math.round(d*f)}else s?(a.value=e.innerWidth,c.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,c.value=e.document.documentElement.clientHeight)};l(),KT(l);const u={passive:!0};if(Ef("resize",l,u),e&&o==="visual"&&e.visualViewport&&Ef(e.visualViewport,"resize",l,u),i){const h=ZG("(orientation: portrait)");wt(h,()=>l())}return{width:a,height:c}}var bVe=Object.defineProperty,_Ve=(n,e,t)=>e in n?bVe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,DL=(n,e,t)=>_Ve(n,typeof e!="symbol"?e+"":e,t);const EVe="@tresjs/core",xVe="module",SVe="4.3.6",AVe="pnpm@10.6.3",CVe="Declarative ThreeJS using Vue Components",TVe="Alvaro Saburido <hola@alvarosaburido.dev> (https://github.com/alvarosabu/)",IVe="MIT",MVe={type:"git",url:"git+https://github.com/Tresjs/tres.git"},RVe=["vue","3d","threejs","three","threejs-vue"],PVe=!1,NVe={".":{types:"./dist/index.d.ts",import:"./dist/tres.js",require:"./dist/tres.umd.cjs"},"./components":{types:"./dist/src/components/index.d.ts"},"./composables":{types:"./dist/src/composables/index.d.ts"},"./types":{types:"./dist/src/types/index.d.ts"},"./utils":{types:"./dist/src/utils/index.d.ts"},"./*":"./*"},OVe="./dist/tres.js",kVe="./dist/tres.js",DVe="./dist/index.d.ts",LVe=["*.d.ts","dist"],UVe={access:"public"},BVe={dev:"pnpm --filter='./playground/vue' dev","dev:nuxt":"pnpm --filter='./playground/nuxt' dev",build:"vite build",test:"vitest","test:ci":"vitest run","test:ui":"vitest --ui --coverage.enabled=true",release:"release-it",coverage:"vitest run --coverage",lint:"eslint .","lint:fix":"eslint . --fix","docs:dev":"vitepress dev docs","docs:build":"vitepress build docs","docs:serve":"vitepress serve docs","docs:preview":"vitepress preview docs","docs:contributors":"esno scripts/update-contributors.ts"},FVe={three:">=0.133",vue:">=3.4"},$Ve={"@alvarosabu/utils":"^3.2.0","@vue/devtools-api":"^6.6.3","@vueuse/core":"^12.5.0"},zVe={"@release-it/conventional-changelog":"^10.0.0","@stackblitz/sdk":"^1.11.0","@tresjs/cientos":"4.1.0","@tresjs/eslint-config":"^1.4.0","@types/three":"^0.173.0","@typescript-eslint/eslint-plugin":"^8.23.0","@typescript-eslint/parser":"^8.23.0","@vitejs/plugin-vue":"^5.2.1","@vitest/coverage-c8":"^0.33.0","@vitest/coverage-v8":"^3.0.5","@vitest/ui":"^3.0.5","@vue/test-utils":"^2.4.6",eslint:"^9.19.0","eslint-plugin-vue":"^9.32.0",esno:"^4.8.0",gsap:"^3.12.7",jsdom:"^26.0.0",kolorist:"^1.8.0",ohmyfetch:"^0.4.21",pathe:"^2.0.2","release-it":"^18.1.2","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-copy":"^3.5.0","rollup-plugin-visualizer":"^5.14.0",sponsorkit:"^16.3.0",three:"^0.173.0",unocss:"^65.4.3",unplugin:"^2.1.2","unplugin-vue-components":"^28.0.0",vite:"^6.1.0","vite-plugin-banner":"^0.8.0","vite-plugin-dts":"4.5.0","vite-plugin-inspect":"^10.1.0","vite-plugin-require-transform":"^1.0.21","vite-svg-loader":"^5.1.0",vitepress:"1.6.3",vitest:"3.0.5",vue:"3.5.13","vue-demi":"^0.14.10"},HVe={name:EVe,type:xVe,version:SVe,packageManager:AVe,description:CVe,author:TVe,license:IVe,repository:MVe,keywords:RVe,sideEffects:PVe,exports:NVe,main:OVe,module:kVe,types:DVe,files:LVe,publishConfig:UVe,scripts:BVe,peerDependencies:FVe,dependencies:$Ve,devDependencies:zVe};class VVe extends Vr{constructor(...e){super(...e),DL(this,"type","HightlightMesh"),DL(this,"createTime"),this.createTime=Date.now()}onBeforeRender(){const e=(Date.now()-this.createTime)/1e3,t=1+.07*Math.sin(2.5*e);this.scale.set(t,t,t)}}function vC(n){return typeof n>"u"}function XT(n){return Array.isArray(n)}function WVe(n){return typeof n=="number"}function eK(n){return typeof n=="string"}function t0(n){return typeof n=="function"}function Qc(n){return n===Object(n)&&!XT(n)&&!t0(n)}function ah(n){return Qc(n)&&!!n.isObject3D}function tK(n){return Qc(n)&&!!n.isColor}function qVe(n){return n!=null&&(typeof n=="string"||typeof n=="number"||tK(n))}function bC(n){return n!==null&&typeof n=="object"&&"set"in n&&typeof n.set=="function"}function jVe(n){return bC(n)&&"copy"in n&&typeof n.copy=="function"}function GVe(n){return!!(n!=null&&n.constructor)}function LL(n){return n instanceof Wy}function UL(n){return Qc(n)&&!!n.isCamera}function KVe(n){return Qc(n)&&!!n.isBufferGeometry}function YVe(n){return Qc(n)&&!!n.isMaterial}function XVe(n){return Qc(n)&&!!n.isLight}function ZVe(n){return Qc(n)&&!!n.isFog}function JVe(n){return Qc(n)&&!!n.isScene}function Gv(n){return ah(n)||KVe(n)||YVe(n)||ZVe(n)}function QVe(n){return Qc(n)&&!!n.isPrimitive}const nK=(n,e)=>{for(const t of Object.keys(e))e[t]instanceof Object&&Object.assign(e[t],nK(n[t],e[t]));return Object.assign(n||{},e),n},eWe="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",tWe=iWe(eWe);function BL(n){return n&&n.nodeType===1}function _x(n){return n.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}const nWe=/\B([A-Z])/g;function rWe(n){return n.replace(nWe,"-$1").toLowerCase()}function iWe(n,e){const t=Object.create(null),r=n.split(",");for(let i=0;i<r.length;i++)t[r[i]]=!0;return e?i=>!!t[i.toLowerCase()]:i=>!!t[i]}const FL=(n,e)=>{if(!e)return;const t=Array.isArray(e)?e:e.match(/([^[.\]])+/g);return t?.reduce((r,i)=>r&&r[i],n)},sWe=(n,e,t)=>{const r=Array.isArray(e)?e:e.match(/([^[.\]])+/g);r&&r.reduce((i,s,o)=>(i[s]===void 0&&(i[s]={}),o===r.length-1&&(i[s]=t),i[s]),n)};function rK(n,e){if(BL(n)&&BL(e)){const i=n.attributes,s=e.attributes;return i.length!==s.length?!1:Array.from(i).every(({name:o,value:a})=>e.getAttribute(o)===a)}if(n===e)return!0;if(n===null||typeof n!="object"||e===null||typeof e!="object")return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t)if(!r.includes(i)||!rK(n[i],e[i]))return!1;return!0}function oWe(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!rK(n[t],e[t]))return!1;return!0}function aWe(n,e,t,r){const i=c=>{if(c.uuid===e)return c;for(const l of c.children){const u=i(l);if(u)return u}},s=i(n);if(!s){console.warn("Object with UUID not found in the scene.");return}let o=s;for(let c=0;c<t.length-1;c++)if(o[t[c]]!==void 0)o=o[t[c]];else{console.warn(`Property path is not valid: ${t.join(".")}`);return}const a=t[t.length-1];o[a]!==void 0?o[a]=r:console.warn(`Property path is not valid: ${t.join(".")}`)}function cWe(n){const e=new cu({color:11003607,transparent:!0,opacity:.2,depthTest:!1,side:Da});return new VVe(n.geometry.clone(),e)}function lWe(n){return"map"in n}function $L(n){lWe(n)&&n.map&&n.map.dispose(),n.dispose()}function iK(n){var e,t;if(n.parent&&((e=n.removeFromParent)==null||e.call(n)),delete n.__tres,[...n.children].forEach(r=>iK(r)),!(n instanceof L4)){const r=n;n&&((t=n.dispose)==null||t.call(n)),r.geometry&&r.geometry.dispose(),Array.isArray(r.material)?r.material.forEach(i=>$L(i)):r.material&&$L(r.material)}}function uWe(n,e){let t=0;for(let r=0;r<n.length;r++)e(n[r],r)&&(n[t]=n[r],t++);return n.length=t,n}function _C(n,e){let t=n;if(e.includes("-")){const r=e.split("-");let i=r.shift();for(;t&&r.length;)i in t?(t=t[i],i=r.shift()):i=zL(i,r.shift());return{target:t,key:zL(i,...r)}}else return{target:t,key:e}}function zL(...n){return n.map((e,t)=>t===0?e:e.charAt(0).toUpperCase()+e.slice(1)).join("")}const HL=/-\d+$/;function hWe(n,e,t){if(eK(t)){if(HL.test(t)){const s=t.replace(HL,""),{target:o,key:a}=_C(n,s);if(!Array.isArray(o[a])){const c=o[a],l=[];l.__tresDetach=()=>{l.every(u=>vC(u))&&(o[a]=c)},o[a]=l}}const{target:r,key:i}=_C(n,t);e.__tres.previousAttach=r[i],r[i]=K0(e)}else e.__tres.previousAttach=t(n,e)}function dWe(n,e,t){var r,i,s;if(eK(t)){const{target:o,key:a}=_C(n,t),c=e.__tres.previousAttach;c===void 0?delete o[a]:o[a]=c,"__tresDetach"in o&&o.__tresDetach()}else(i=(r=e.__tres)==null?void 0:r.previousAttach)==null||i.call(r,n,e);(s=e.__tres)==null||delete s.previousAttach}function wd(n,e,t){const r=n;return r.__tres={type:"unknown",eventCount:0,root:t,handlers:{},memoizedProps:{},objects:[],parent:null,previousAttach:null,...e},r.__tres.attach||(r.isMaterial?r.__tres.attach="material":r.isBufferGeometry?r.__tres.attach="geometry":r.isFog&&(r.__tres.attach="fog")),r}function sK(n){var e;const t=(e=n?.__tres)==null?void 0:e.root;t&&t.render&&t.render.canBeInvalidated.value&&t.invalidate()}function fWe(n,e,t){var r;if(!t0(n.setPixelRatio))return;let i=0;if(t&&XT(t)&&t.length>=2){const[s,o]=t;i=bT.clamp(e,s,o)}else WVe(t)?i=t:i=e;i!==((r=n.getPixelRatio)==null?void 0:r.call(n))&&n.setPixelRatio(i)}function pWe(n,e,t,r,i){const s=[...e.__tres.objects],o=K0(e);if(n=K0(n),o===n)return!0;const a=wd(n,e.__tres??{},i),c=e.parent??e.__tres.parent??null,l={...e.__tres.memoizedProps};delete l.object;for(const u of s)oK(u,i),aK(u,i);o.__tres.objects=[],r.remove(e);for(const[u,h]of Object.entries(l))r.patchProp(a,u,a[u],h);t(n),r.insert(e,c);for(const u of s)r.insert(u,e);return!0}function K0(n){return QVe(n)?(n.object.__tres=n.__tres,n.object):n}function oK(n,e){var t,r,i,s;const o=((t=n.__tres)==null?void 0:t.parent)||e.scene.value;n.__tres&&(n.__tres.parent=null),o&&o.__tres&&"objects"in o.__tres&&uWe(o.__tres.objects,a=>a!==n),(r=n.__tres)!=null&&r.attach?dWe(o,n,n.__tres.attach):((s=(i=n.parent)==null?void 0:i.remove)==null||s.call(i,K0(n)),n.parent=null)}function aK(n,e){var t;(t=n.traverse)==null||t.call(n,r=>{var i;e.deregisterCamera(r),(i=e.eventManager)==null||i.deregisterPointerMissedObject(r)}),e.deregisterCamera(n),sK(n)}const mWe=({sizes:n})=>{const e=Ae([]),t=Ee(()=>e.value[0]),r=o=>{const a=o instanceof qy?o:e.value.find(l=>l.uuid===o);if(!a)return;const c=e.value.filter(({uuid:l})=>l!==a.uuid);e.value=[a,...c]},i=(o,a=!1)=>{if(UL(o)){const c=o;if(e.value.some(({uuid:l})=>l===c.uuid))return;a?r(c):e.value.push(c)}},s=o=>{if(UL(o)){const a=o;e.value=e.value.filter(({uuid:c})=>c!==a.uuid)}};return ef(()=>{n.aspectRatio.value&&e.value.forEach(o=>{!o.manual&&(o instanceof Gr||gWe(o))&&(o instanceof Gr?o.aspect=n.aspectRatio.value:(o.left=n.width.value*-.5,o.right=n.width.value*.5,o.top=n.height.value*.5,o.bottom=n.height.value*-.5),o.updateProjectionMatrix())})}),ca(()=>{e.value=[]}),{camera:t,cameras:e,registerCamera:i,deregisterCamera:s,setCameraActive:r}};function gWe(n){return n.hasOwnProperty("isOrthographicCamera")&&n.isOrthographicCamera}const U_="[TresJS ▲ ■ ●] ";function yWe(...n){typeof n[0]=="string"?n[0]=U_+n[0]:n.unshift(U_),console.error(...n)}function wWe(...n){typeof n[0]=="string"?n[0]=U_+n[0]:n.unshift(U_),console.warn(...n)}function vWe(n,e){}function cK(){return{logError:yWe,logWarning:wWe,logMessage:vWe}}const EC=Ae({}),xC=n=>Object.assign(EC.value,n);function Ex(){const n=new Map,e=new Set;let t=0,r=!1;const i=()=>{const o=Array.from(n.entries()).sort((a,c)=>{const l=a[1].priority-c[1].priority;return l===0?a[1].addI-c[1].addI:l});e.clear(),o.forEach(a=>e.add(a[0]))},s=o=>{n.delete(o),e.delete(o)};return{on:(o,a=0)=>{n.set(o,{priority:a,addI:t++});const c=()=>s(o);return kh(c),r=!0,{off:c}},off:s,trigger:(...o)=>{r&&(i(),r=!1),e.forEach(a=>a(...o))},dispose:()=>{n.clear(),e.clear()},get count(){return n.size}}}function bWe(){let n=!0,e=!0,t=!1;const r=new nE(!1),i=Ae(r.running),s=Ae(!1);let o;const a=bT.generateUUID();let c=null;const l=Ex(),u=Ex(),h=Ex();C();let d={};function f(R){d=R}function p(R,k,_=0){switch(k){case"before":return l.on(R,_);case"render":return c||(c=R),u.dispose(),u.on(R);case"after":return h.on(R,_)}}function m(){e&&(e=!1,C(),x())}function g(){e=!0,C(),cancelAnimationFrame(o)}function y(){t=!1,C()}function b(){t=!0,C()}function w(){s.value=!0}function E(){s.value=!1}function x(){if(!n){o=requestAnimationFrame(x);return}const R=r.getDelta(),k=r.getElapsedTime(),_={camera:ht(d.camera),scene:ht(d.scene),renderer:ht(d.renderer),raycaster:ht(d.raycaster),controls:ht(d.controls),invalidate:d.invalidate,advance:d.advance},A={delta:R,elapsed:k,clock:r,..._};i.value&&l.trigger(A),s.value||(u.count?u.trigger(A):c&&c(A)),i.value&&h.trigger(A),o=requestAnimationFrame(x)}function C(){const R=!e&&!t;r.running!==R&&(r.running?r.stop():r.start()),i.value=r.running}return{loopId:a,register:(R,k,_)=>p(R,k,_),start:m,stop:g,pause:b,resume:y,pauseRender:w,resumeRender:E,isRenderPaused:s,isActive:i,setContext:f,setReady:R=>n=R}}function ZT(n){let e=0;return n.traverse(t=>{if(t.isMesh&&t.geometry&&t.type!=="HightlightMesh"){const r=t.geometry,i=r.attributes.position.count*3*Float32Array.BYTES_PER_ELEMENT,s=r.index?r.index.count*Uint32Array.BYTES_PER_ELEMENT:0,o=r.attributes.normal?r.attributes.normal.count*3*Float32Array.BYTES_PER_ELEMENT:0,a=r.attributes.uv?r.attributes.uv.count*2*Float32Array.BYTES_PER_ELEMENT:0,c=i+s+o+a;e+=c}}),e}function _We(n){return(n/1024).toFixed(2)}const EWe=Number.parseInt(zy.replace("dev",""));function xWe(n){return n instanceof ft?n:Array.isArray(n)?new ft(...n):new ft(n)}const Kv={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:bs,toneMapping:x4,toneMappingExposure:3,shadowMap:{enabled:!0,type:cT}},flat:{toneMapping:Dc,toneMappingExposure:1}};function SWe({canvas:n,options:e,contextParts:{sizes:t,render:r,invalidate:i,advance:s}}){const o=Ee(()=>({alpha:Pi(e.alpha)??!0,depth:Pi(e.depth),canvas:Fa(n),context:Pi(e.context),stencil:Pi(e.stencil),antialias:Pi(e.antialias)??!0,precision:Pi(e.precision),powerPreference:Pi(e.powerPreference),premultipliedAlpha:Pi(e.premultipliedAlpha),preserveDrawingBuffer:Pi(e.preserveDrawingBuffer),logarithmicDepthBuffer:Pi(e.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:Pi(e.failIfMajorPerformanceCaveat)})),a=Tt(new D3(o.value));function c(){e.renderMode==="on-demand"&&i()}wt(o,()=>{a.value.dispose(),a.value=new D3(o.value),c()}),wt([t.width,t.height],()=>{a.value.setSize(t.width.value,t.height.value),c()},{immediate:!0}),wt(()=>e.clearColor,c);const{pixelRatio:l}=dVe(),{logError:u}=cK(),h=(()=>{const f=new D3,p={shadowMap:{enabled:f.shadowMap.enabled,type:f.shadowMap.type},toneMapping:f.toneMapping,toneMappingExposure:f.toneMappingExposure,outputColorSpace:f.outputColorSpace};return f.dispose(),p})(),d=Pi(e.renderMode);return d==="on-demand"&&i(),d==="manual"&&setTimeout(()=>{s()},100),ef(()=>{const f=Pi(e.preset);f&&(f in Kv||u(`Renderer Preset must be one of these: ${Object.keys(Kv).join(", ")}`),nK(a.value,Kv[f])),fWe(a.value,l.value,Pi(e.dpr)),d==="always"&&(r.frames.value=Math.max(1,r.frames.value));const p=(y,b)=>{const w=Pi(y),E=()=>{if(f)return FL(Kv[f],b)};if(w!==void 0)return w;const x=E();return x!==void 0?x:FL(h,b)},m=(y,b)=>sWe(a.value,b,p(y,b));m(e.shadows,"shadowMap.enabled"),m(e.toneMapping??x4,"toneMapping"),m(e.shadowMapType,"shadowMap.type"),EWe<150&&m(!e.useLegacyLights,"physicallyCorrectLights"),m(e.outputColorSpace,"outputColorSpace"),m(e.toneMappingExposure,"toneMappingExposure");const g=p(e.clearColor,"clearColor");g&&a.value.setClearColor(g?xWe(g):new ft(0))}),ca(()=>{a.value.dispose(),a.value.forceContextLoss()}),{renderer:a}}function AWe(n,e,t=10){const r=Pi(n)?vVe():pVe(Ee(()=>Pi(e).parentElement)),i=Qo(kL(r.width,t)),s=Qo(kL(r.height,t)),o=Ee(()=>i.value/s.value);return{height:s,width:i,aspectRatio:o}}const CWe=(n,e)=>{const t=Ee(()=>e.renderer.value.domElement),r=Tt([]),{x:i,y:s}=wVe({target:t});let o=0;const{width:a,height:c,top:l,left:u}=fVe(t),h=({x:F,y:I})=>{if(t.value)return{x:(F-u.value)/a.value*2-1,y:-((I-l.value)/c.value)*2+1}},d=({x:F,y:I})=>{if(e.camera.value)return e.raycaster.value.setFromCamera(new Ue(F,I),e.camera.value),r.value=e.raycaster.value.intersectObjects(n.value,!0),r.value},f=F=>{const I=h({x:F?.clientX??i.value,y:F?.clientY??s.value});return I?d(I)||[]:[]},p=Ko(),m=Ko(),g=Ko(),y=Ko(),b=Ko(),w=Ko(),E=Ko(),x=Ko();function C(F){const I={};for(const N in F)typeof N!="function"&&(I[N]=F[N]);return I}const R=(F,I)=>{var N,$,j;const te=C(I),ce=new ne(I?.clientX,I?.clientY,0).unproject((N=e.camera)==null?void 0:N.value);F.trigger({...te,intersections:r.value,unprojectedPoint:ce,ray:($=e.raycaster)==null?void 0:$.value.ray,camera:(j=e.camera)==null?void 0:j.value,sourceEvent:I,delta:o,stopPropagating:!1})};let k;const _=F=>{f(F),R(g,F),k=F},A=()=>{k&&_(k)};let M,D,P;const v=F=>{var I;M=(I=r.value[0])==null?void 0:I.object,o=0,D=new Ue(F?.clientX??i.value,F?.clientY??s.value),R(b,F)};let S,T=!1;const L=F=>{var I,N,$;F instanceof PointerEvent&&(r.value.length===0&&R(w,F),M===((I=r.value[0])==null?void 0:I.object)&&(P=new Ue(F?.clientX??i.value,F?.clientY??s.value),o=D?.distanceTo(P),F.button===0?(R(p,F),S===((N=r.value[0])==null?void 0:N.object)?T=!0:(S=($=r.value[0])==null?void 0:$.object,T=!1)):F.button===2&&R(E,F)),R(y,F))},U=F=>{T&&(R(m,F),S=void 0,T=!1)},V=F=>R(g,F),W=F=>R(x,F);return t.value.addEventListener("pointerup",L),t.value.addEventListener("pointerdown",v),t.value.addEventListener("pointermove",_),t.value.addEventListener("pointerleave",V),t.value.addEventListener("dblclick",U),t.value.addEventListener("wheel",W),ca(()=>{t!=null&&t.value&&(t.value.removeEventListener("pointerup",L),t.value.removeEventListener("pointerdown",v),t.value.removeEventListener("pointermove",_),t.value.removeEventListener("pointerleave",V),t.value.removeEventListener("dblclick",U),t.value.removeEventListener("wheel",W))}),{intersects:r,onClick:F=>p.on(F).off,onDblClick:F=>m.on(F).off,onContextMenu:F=>E.on(F).off,onPointerMove:F=>g.on(F).off,onPointerUp:F=>y.on(F).off,onPointerDown:F=>b.on(F).off,onPointerMissed:F=>w.on(F).off,onWheel:F=>x.on(F).off,forceUpdate:A}};function xx(n,e){if(Array.isArray(n))for(const t of n)t(e);typeof n=="function"&&n(e)}function TWe(n,e,t){var r;const i=Tt(),s=Tt();n&&(i.value=n),e&&(s.value=e);const o=_=>{var A;return((A=_.__tres)==null?void 0:A.eventCount)>0},a=_=>{var A;return((A=_.children)==null?void 0:A.some(M=>a(M)))||o(_)},c=Tt(((r=i.value)==null?void 0:r.children).filter(a)||[]);function l(_,A){const M=[],D=()=>A.stopPropagating=!0;A.stopPropagation=D;for(const P of A?.intersections){if(A.stopPropagating)return;A={...A,...P};const{object:v}=P;A.eventObject=v,xx(v[_],A),M.push(v);let S=v.parent;for(;S!==null&&!A.stopPropagating&&!M.includes(S);)A.eventObject=S,xx(S[_],A),M.push(S),S=S.parent;const T=rWe(_.slice(2));t(T,{intersection:P,event:A})}}const{onClick:u,onDblClick:h,onContextMenu:d,onPointerMove:f,onPointerDown:p,onPointerUp:m,onPointerMissed:g,onWheel:y,forceUpdate:b}=CWe(c,e);m(_=>l("onPointerUp",_)),p(_=>l("onPointerDown",_)),u(_=>l("onClick",_)),h(_=>l("onDoubleClick",_)),d(_=>l("onContextMenu",_)),y(_=>l("onWheel",_));let w=[];f(_=>{const A=_.intersections.map(({object:D})=>D),M=_.intersections;w.forEach(({object:D})=>{A.includes(D)||(_.intersections=w,l("onPointerLeave",_),l("onPointerOut",_))}),_.intersections=M,_.intersections.forEach(({object:D})=>{w.includes(D)||(l("onPointerEnter",_),l("onPointerOver",_))}),l("onPointerMove",_),w=_.intersections});const E=[];g(_=>{const A=()=>_.stopPropagating=!0;_.stopPropagation=A,E.forEach(M=>{_.stopPropagating||(_.eventObject=M,xx(M.onPointerMissed,_))}),t("pointer-missed",{event:_})});function x(_){Gv(_)&&ah(_)&&c.value.push(_)}function C(_){if(Gv(_)&&ah(_)){const A=c.value.indexOf(_);A>-1&&c.value.splice(A,1)}}function R(_){Gv(_)&&ah(_)&&_.onPointerMissed&&E.push(_)}function k(_){if(Gv(_)&&ah(_)){const A=E.indexOf(_);A>-1&&E.splice(A,1)}}return e.eventManager={forceUpdate:b,registerObject:x,deregisterObject:C,registerPointerMissedObject:R,deregisterPointerMissedObject:k},{forceUpdate:b,registerObject:x,deregisterObject:C,registerPointerMissedObject:R,deregisterPointerMissedObject:k}}function IWe(n,e,t=100){t=t<=0?100:t;const r=Ko(),i=new Set;let s=!1,o=!1,a=null;function c(){a&&clearTimeout(a),!o&&!s&&n()?(r.trigger(e),i.forEach(h=>h()),i.clear(),s=!0):!o&&!s&&(a=setTimeout(c,t))}function l(){o=!0,a&&clearTimeout(a)}c();const u=(h,...d)=>{h(...d)};return{on:h=>{if(s)return u(h,e),{off:()=>{}};{const d=r.on(h);return i.add(d.off),r.on(h)}},off:r.off,trigger:r.trigger,clear:r.clear,cancel:l}}const Sx=new WeakMap;function MWe(n){if(n=n||PWe(),Sx.has(n))return Sx.get(n);const e=100,t=Date.now(),r=IWe(()=>{if(Date.now()-t>=e)return!0;{const i=n.renderer.value,s=i?.domElement||{width:0,height:0};return!!(i&&s.width>0&&s.height>0)}},n);return Sx.set(n,r),r}function RWe({scene:n,canvas:e,windowSize:t,rendererOptions:r,emit:i}){const s=Tt(n),o=AWe(t,e),{camera:a,cameras:c,registerCamera:l,deregisterCamera:u,setCameraActive:h}=mWe({sizes:o}),d={mode:Ae(r.renderMode||"always"),priority:Ae(0),frames:Ae(0),maxFrames:60,canBeInvalidated:Ee(()=>d.mode.value==="on-demand"&&d.frames.value===0)};function f(P=1){r.renderMode==="on-demand"&&(d.frames.value=Math.min(d.maxFrames,d.frames.value+P))}function p(){r.renderMode==="manual"&&(d.frames.value=1)}const{renderer:m}=SWe({canvas:e,options:r,contextParts:{sizes:o,render:d,invalidate:f,advance:p}}),g={sizes:o,scene:s,camera:a,cameras:Qo(c),renderer:m,raycaster:Tt(new HG),controls:Ae(null),perf:{maxFrames:160,fps:{value:0,accumulator:[]},memory:{currentMem:0,allocatedMem:0,accumulator:[]}},render:d,advance:p,extend:xC,invalidate:f,registerCamera:l,setCameraActive:h,deregisterCamera:u,loop:bWe()};jm("useTres",g),g.scene.value.__tres={root:g},g.loop.register(()=>{a.value&&d.frames.value>0&&(m.value.render(n,a.value),i("render",g.renderer.value)),d.priority.value=0,d.mode.value==="always"?d.frames.value=1:d.frames.value=Math.max(0,d.frames.value-1)},"render");const{on:y,cancel:b}=MWe(g);g.loop.setReady(!1),g.loop.start(),y(()=>{i("ready",g),g.loop.setReady(!0),TWe(n,g,i)}),ca(()=>{b(),g.loop.stop()});const w=100,E=mVe({every:w}),{isSupported:x,memory:C}=gVe({interval:w}),R=160;let k=performance.now();const _=({timestamp:P})=>{g.scene.value&&(g.perf.memory.allocatedMem=ZT(g.scene.value)),P-k>=w&&(k=P,g.perf.fps.accumulator.push(E.value),g.perf.fps.accumulator.length>R&&g.perf.fps.accumulator.shift(),g.perf.fps.value=E.value,x.value&&C.value&&(g.perf.memory.accumulator.push(C.value.usedJSHeapSize/1024/1024),g.perf.memory.accumulator.length>R&&g.perf.memory.accumulator.shift(),g.perf.memory.currentMem=g.perf.memory.accumulator.reduce((v,S)=>v+S,0)/g.perf.memory.accumulator.length))};let A=0;const M=1,{pause:D}=YT(({delta:P})=>{window.__TRES__DEVTOOLS__&&(_({timestamp:performance.now()}),A+=P,A>=M&&(window.__TRES__DEVTOOLS__.cb(g),A=0))},{immediate:!0});return ca(()=>{D()}),g}function PWe(){const n=Wd("useTres");if(!n)throw new Error("useTresContext must be used together with useTresContextProvider");return n}const NWe=Ko(),OWe=Ko(),lK=Ko(),Ig=new nE;let L3=0,U3=0;YT(()=>{NWe.trigger({delta:L3,elapsed:U3,clock:Ig}),OWe.trigger({delta:L3,elapsed:U3,clock:Ig}),lK.trigger({delta:L3,elapsed:U3,clock:Ig})},{immediate:!1});lK.on(()=>{L3=Ig.getDelta(),U3=Ig.getElapsedTime()});function kWe(n,e={},t={}){let r=n;const i=a=>{r=a};let s=new Proxy({},{});const o={has(a,c){return c in e||c in r},get(a,c,l){return c in e?e[c](r):r[c]},set(a,c,l){return t[c]?t[c](l,r,s,i):r[c]=l,!0}};return s=new Proxy({},o),s}const{logError:VL}=cK(),WL=["onClick","onContextMenu","onPointerMove","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onDoubleClick","onPointerDown","onPointerUp","onPointerCancel","onPointerMissed","onLostPointerCapture","onWheel"],DWe=n=>{const e=n.scene.value;function t(l,u,h,d){if(d||(d={}),d.args||(d.args=[]),l==="template"||tWe(l))return null;let f=l.replace("Tres",""),p;if(l==="primitive"){(!Qc(d.object)||or(d.object))&&VL("Tres primitives need an 'object' prop, whose value is an object or shallowRef<object>"),f=d.object.type;const m={};p=kWe(d.object,{object:g=>g,isPrimitive:()=>!0,__tres:()=>m},{object:(g,y,b,w)=>{pWe(g,b,w,{patchProp:s,remove:i,insert:r},n)},__tres:g=>{Object.assign(m,g)}})}else{const m=EC.value[f];m||VL(`${f} is not defined on the THREE namespace. Use extend to add it to the catalog.`),p=new m(...d.args)}return p?(p.isCamera&&(d!=null&&d.position||p.position.set(3,3,3),d!=null&&d.lookAt||p.lookAt(0,0,0)),p=wd(p,{...p.__tres,type:f,memoizedProps:d,eventCount:0,primitive:l==="primitive",attach:d.attach},n),p):null}function r(l,u){var h,d,f;if(!l)return;u=u||e;const p=l.__tres?l:wd(l,{},n),m=u.__tres?u:wd(u,{},n);l=K0(p),u=K0(m),l.__tres&&((h=l.__tres)==null?void 0:h.eventCount)>0&&((d=n.eventManager)==null||d.registerObject(l)),n.registerCamera(l),(f=n.eventManager)==null||f.registerPointerMissedObject(l),p.__tres.attach?hWe(m,p,p.__tres.attach):ah(l)&&ah(m)&&(m.add(l),l.dispatchEvent({type:"added"})),p.__tres.parent=m,m.__tres.objects&&!m.__tres.objects.includes(p)&&m.__tres.objects.push(p)}function i(l,u){var h,d,f,p;if(!l)return;l!=null&&l.__tres&&((h=l.__tres)==null?void 0:h.eventCount)>0&&((d=n.eventManager)==null||d.deregisterObject(l)),u=vC(u)?"default":u;const m=(f=l.__tres)==null?void 0:f.dispose;vC(m)||(m===null?u=!1:u=m);const g=(p=l.__tres)==null?void 0:p.primitive,y=u==="default"?!g:!!u;if(l.__tres&&"objects"in l.__tres&&[...l.__tres.objects].forEach(b=>i(b,u)),y&&l.children&&[...l.children].forEach(b=>i(b,u)),oK(l,n),aK(l,n),y&&!JVe(l)){if(t0(u))u(l);else if(t0(l.dispose))try{l.dispose()}catch{}}"__tres"in l&&delete l.__tres}function s(l,u,h,d){var f,p;if(!l)return;let m=l,g=u;if(l.__tres&&(l.__tres.memoizedProps[u]=d),u==="attach"){const E=((f=l.__tres)==null?void 0:f.parent)||l.parent;i(l),wd(l,{attach:d},n),E&&r(l,E);return}if(u==="dispose"){l.__tres||(l=wd(l,{},n)),l.__tres.dispose=d;return}if(ah(l)&&g==="blocks-pointer-events"){d||d===""?l[g]=d:delete l[g];return}WL.includes(u)&&l.__tres&&(l.__tres.eventCount+=1);let y=_x(g),b=m?.[y];if(g==="args"){const E=l,x=h??[],C=d??[],R=((p=l.__tres)==null?void 0:p.type)||l.type;R&&x.length&&!oWe(x,C)&&(m=Object.assign(E,new EC.value[R](...d)));return}if(m.type==="BufferGeometry"){if(g==="args")return;m.setAttribute(_x(g),new Gn(...d));return}if(g.includes("-")&&b===void 0){b=m;for(const E of g.split("-"))y=g=_x(E),m=b,b=b?.[g]}let w=d;if(w===""&&(w=!0),t0(b)){WL.includes(u)||(XT(w)?l[y](...w):l[y](w)),y.startsWith("on")&&t0(w)&&(m[y]=w);return}LL(b)&&LL(w)?b.mask=w.mask:tK(b)&&qVe(w)?b.set(w):jVe(b)&&GVe(w)&&b.constructor===w.constructor?b.copy(w):bC(b)&&Array.isArray(w)?"fromArray"in b&&typeof b.fromArray=="function"?b.fromArray(w):b.set(...w):bC(b)&&typeof w=="number"?"setScalar"in b&&typeof b.setScalar=="function"?b.setScalar(w):b.set(w):m[y]=w,sK(l)}function o(l){var u;return((u=l?.__tres)==null?void 0:u.parent)||null}function a(l){const u=wd(new bn,{type:"Comment"},n);return u.name=l,u}function c(l){var u;const h=o(l),d=((u=h?.__tres)==null?void 0:u.objects)||[],f=d.indexOf(l);return f<0||f>=d.length-1?null:d[f+1]}return{insert:r,remove:i,createElement:t,patchProp:s,parentNode:o,createText:()=>{},createComment:a,setText:()=>{},setElementText:()=>{},nextSibling:c,querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}}};function LWe(){return uK().__VUE_DEVTOOLS_GLOBAL_HOOK__}function uK(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const UWe=typeof Proxy=="function",BWe="devtools-plugin:setup",FWe="plugin:settings:set";let bm,SC;function $We(){var n;return bm!==void 0||(typeof window<"u"&&window.performance?(bm=!0,SC=window.performance):typeof globalThis<"u"&&!((n=globalThis.perf_hooks)===null||n===void 0)&&n.performance?(bm=!0,SC=globalThis.perf_hooks.performance):bm=!1),bm}function zWe(){return $We()?SC.now():Date.now()}class HWe{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},r);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}s=o},now(){return zWe()}},t&&t.on(FWe,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(l=>{this.targetQueue.push({method:a,args:c,resolve:l})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function VWe(n,e){const t=n,r=uK(),i=LWe(),s=UWe&&t.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit(BWe,n,e);else{const o=s?new HWe(t,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}function WWe(n,e){const t=`▲ ■ ●${n}`;typeof qL=="function"?qL(t,e):console.log(t)}function qL(n,e){throw new Error(n+e)}const hK=n=>{const e={id:n.uuid,label:n.type,children:[],tags:[]};n.name!==""&&e.tags.push({label:n.name,textColor:5750629,backgroundColor:15793395});const t=ZT(n);return t>0&&e.tags.push({label:`${_We(t)} KB`,textColor:15707189,backgroundColor:16775644,tooltip:"Memory usage"}),n.type.includes("Light")&&(XVe(n)&&e.tags.push({label:`${n.intensity}`,textColor:9738662,backgroundColor:16316922,tooltip:"Intensity"}),e.tags.push({label:`#${new ft(n.color).getHexString()}`,textColor:9738662,backgroundColor:16316922,tooltip:"Color"})),n.type.includes("Camera")&&(e.tags.push({label:`${n.fov}°`,textColor:9738662,backgroundColor:16316922,tooltip:"Field of view"}),e.tags.push({label:`x: ${Math.round(n.position.x)} y: ${Math.round(n.position.y)} z: ${Math.round(n.position.z)}`,textColor:9738662,backgroundColor:16316922,tooltip:"Position"})),e};function dK(n,e,t=""){n.children.forEach(r=>{if(r.type==="HightlightMesh"||t&&!r.type.includes(t)&&!r.name.includes(t))return;const i=hK(r);e.children.push(i),dK(r,i,t)})}const qWe=[],_m="tres:inspector",jWe=Uc({sceneGraph:null});function GWe(n,e){VWe({id:"dev.esm.tres",label:"TresJS 🪐",logo:"https://raw.githubusercontent.com/Tresjs/tres/main/public/favicon.svg",packageName:"tresjs",homepage:"https://tresjs.org",componentStateTypes:qWe,app:n},t=>{typeof t.now!="function"&&WWe("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),t.addInspector({id:_m,label:"TresJS 🪐",icon:"account_tree",treeFilterPlaceholder:"Search instances"}),setInterval(()=>{t.sendInspectorTree(_m)},1e3),setInterval(()=>{t.notifyComponentUpdate()},5e3),t.on.getInspectorTree(s=>{if(s.inspectorId===_m){const o=hK(e.scene.value);dK(e.scene.value,o,s.filter),jWe.sceneGraph=o,s.rootNodes=[o]}});let r=null,i=null;t.on.getInspectorState(s=>{var o;if(s.inspectorId===_m){const[a]=e.scene.value.getObjectsByProperty("uuid",s.nodeId);if(!a)return;if(i&&r&&r.parent&&i.remove(r),a.isMesh){const c=cWe(a);a.add(c),r=c,i=a}s.state={object:Object.entries(a).map(([c,l])=>c==="children"?{key:c,value:l.filter(u=>u.type!=="HightlightMesh")}:{key:c,value:l,editable:!0}).filter(({key:c})=>c!=="parent")},a.isScene&&(s.state={...s.state,state:[{key:"Scene Info",value:{objects:a.children.length,memory:ZT(a),calls:e.renderer.value.info.render.calls,triangles:e.renderer.value.info.render.triangles,points:e.renderer.value.info.render.points,lines:e.renderer.value.info.render.lines}},{key:"Programs",value:((o=e.renderer.value.info.programs)==null?void 0:o.map(c=>({...c,programName:c.name})))||[]}]})}}),t.on.editInspectorState(s=>{s.inspectorId===_m&&aWe(e.scene.value,s.nodeId,s.path,s.state.value)})})}const KWe=["data-scene","data-tres"],YWe=Ar({__name:"TresCanvas",props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},renderMode:{default:"always"},dpr:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},enableProvideBridge:{type:Boolean,default:!0},context:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0},precision:{},logarithmicDepthBuffer:{type:Boolean,default:void 0},reverseDepthBuffer:{type:Boolean}},emits:["render","click","double-click","context-menu","pointer-move","pointer-up","pointer-down","pointer-enter","pointer-leave","pointer-over","pointer-out","pointer-missed","wheel","ready"],setup(n,{expose:e,emit:t}){const r=n,i=t,s=xY(),o=Ae(),a=Tt(new L4),c=Bc();xC(XHe);const l=(p,m=!1)=>Ar({setup(){var g;const y=(g=Bc())==null?void 0:g.appContext;y&&(y.app=c?.appContext.app);const b={};function w(E){E&&(E.parent&&w(E.parent),E.provides&&Object.assign(b,E.provides))}return c!=null&&c.parent&&r.enableProvideBridge&&(w(c.parent),Reflect.ownKeys(b).forEach(E=>{jm(E,b[E])})),jm("useTres",p),jm("extend",xC),typeof window<"u"&&GWe(y?.app,p),()=>Lx(ni,null,m?[]:s.default())}}),u=(p,m=!1)=>{const g=l(p,m),{render:y}=QU(DWe(p));y(Lx(g),a.value)},h=(p,m=!1)=>{iK(p.scene.value),m&&(p.renderer.value.dispose(),p.renderer.value.renderLists.dispose(),p.renderer.value.forceContextLoss()),a.value.__tres={root:p}},d=Tt(null);e({context:d,dispose:()=>h(d.value,!0)});const f=()=>{h(d.value),u(d.value,!0)};return No(()=>{const p=o;d.value=RWe({scene:a.value,canvas:p,windowSize:r.windowSize??!1,rendererOptions:r,emit:i});const{registerCamera:m,camera:g,cameras:y,deregisterCamera:b}=d.value;u(d.value);const w=()=>{const E=new Gr(45,window.innerWidth/window.innerHeight,.1,1e3);E.position.set(3,3,3),E.lookAt(0,0,0),m(E);const x=ef(()=>{y.value.length>=2&&(E.removeFromParent(),b(E),x?.())})};wt(()=>r.camera,(E,x)=>{E&&m(E),x&&(x.removeFromParent(),b(x))},{immediate:!0}),g.value||w()}),ca(f),(p,m)=>(Re(),Oe("canvas",{ref_key:"canvas",ref:o,"data-scene":a.value.uuid,class:Io(p.$attrs.class),"data-tres":`tresjs ${ht(HVe).version}`,style:Dh({display:"block",width:"100%",height:"100%",position:p.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",...p.$attrs.style})},null,14,KWe))}}),XWe={install(n){n.component("TresCanvas",YWe)}},ZWe=({store:n,pinia:e})=>{e._appInitialized||(e._appInitialized=!0,Promise.resolve().then(async()=>{console.log("🚀 Initializing app via Pinia plugin...");try{const{useSocketCore:t}=await Ct(async()=>{const{useSocketCore:h}=await Promise.resolve().then(()=>WA);return{useSocketCore:h}},void 0),{useAuth:r}=await Ct(async()=>{const{useAuth:h}=await Promise.resolve().then(()=>GAe);return{useAuth:h}},void 0),{useSessionLogger:i}=await Ct(async()=>{const{useSessionLogger:h}=await import("./session-logger-CAMlmg_a.js");return{useSessionLogger:h}},[]),{useSocketSpace:s}=await Ct(async()=>{const{useSocketSpace:h}=await import("./socket-space-C1jh9DmC.js");return{useSocketSpace:h}},[]),{initGlobalPerformanceTracking:o}=await Ct(async()=>{const{initGlobalPerformanceTracking:h}=await Promise.resolve().then(()=>ITe);return{initGlobalPerformanceTracking:h}},void 0),a=t(e),c=r(e),l=i(e),u=s(e);await c.initialize(),console.log("🔐 Auth initialized"),await a.connect(),console.log("🔌 Socket connected via Pinia plugin"),a.startHeartbeat(),console.log("💓 Socket heartbeat started"),u.setupSpaceListeners(),console.log("🚀 Unified space listeners setup"),c.isAuthenticated&&(await u.autoJoinUserProjects(),console.log("🎯 Auto-joined user projects as spaces with unified toast notifications")),console.log("📊 Session logging initialized"),o(),console.log("⚡ Performance tracking initialized")}catch(t){console.error("❌ App initialization failed:",t)}}))};async function JWe(n,e){const{target:t="#app",routes:r}=e||{},i=VX();i.use(ZWe);const o=await Aee(r),a=$X(n);return a.use(i),a.use(XWe),a.use(Nke),a.mount(t),console.log("🔥 Sage Router initialized!"),{app:a,router:o,pinia:i}}const JT=[{path:"/audius/users/:id",component:()=>Ct(()=>import("./audius.users._id_-Dqco_tQM.js"),__vite__mapDeps([45,46,47,48,49,50])),name:"Audius User Detail",meta:{description:"view an Audius user",requiresAuth:!0},params:["id"]},{path:"/audius/playlists/:id",component:()=>Ct(()=>import("./audius.playlists._id_-DXLRU9XV.js"),__vite__mapDeps([51,46,47,48,52,53])),name:"Audius Playlist Detail",meta:{description:"view an Audius playlist",requiresAuth:!0},params:["id"]},{path:"/studies/:id",component:()=>Ct(()=>import("./studies._id_-DwqrQBzK.js"),[]),meta:{},params:["id"]},{path:"/g/:id",component:()=>Ct(()=>import("./g._id_-DMBRZxJR.js"),__vite__mapDeps([54,55])),name:"Gist",meta:{description:"view shared content",requiresAuth:!1},params:["id"]},{path:"/visualizer",component:()=>Ct(()=>import("./visualizer-C_L3-rgc.js"),__vite__mapDeps([56,48,52,57,58])),name:"Visualizer",meta:{description:"the main visualizer",requiresAuth:!0},params:[]},{path:"/studies",component:()=>Ct(()=>import("./studies-DCGrgkEY.js"),[]),meta:{},params:[]},{path:"/settings",component:()=>Ct(()=>import("./settings-D_NAWqNn.js"),__vite__mapDeps([59,48,52,57,58,60])),name:"Settings",meta:{description:"configure the visualizer",requiresAuth:!0},params:[]},{path:"/design",component:()=>Ct(()=>import("./design-DNMzqvOE.js"),__vite__mapDeps([61,48,55,52,57,58,62])),name:"Design",meta:{description:"customize your visuals",requiresAuth:!0},params:[]},{path:"/audius",component:()=>Ct(()=>import("./audius-Bkhrw88f.js"),__vite__mapDeps([63,46,48,49,52,64])),name:"Audius Home",meta:{description:"audius library dashboard",requiresAuth:!0},params:[]},{path:"/",component:()=>Ct(()=>import("./index-Dzbx7dgp.js"),__vite__mapDeps([65,52,48,58])),name:"Homepage",meta:{description:"the homepage",requiresAuth:!1,redirectWhenAuthenticated:"/visualizer"},params:[]}],QT=new Map(JT.map(n=>[n.path,n]));function fK(n){const e=QT.get(n);if(e)return e;for(const t of JT)if(t.params.length>0){const r=t.path.replace(/:(\w+)(\*)?/g,(s,o,a)=>a?"(.*)":"([^/]+)");if(new RegExp("^"+r+"$").test(n))return t}return null}function QWe(n,e){const t=QT.get(n)||fK(e);if(!t||t.params.length===0)return{};const r=t.path.replace(/:(\w+)(\*)?/g,(a,c,l)=>`(${l?".*":"[^/]+"})`),i=new RegExp("^"+r+"$"),s=e.match(i);if(!s)return{};const o={};return t.params.forEach((a,c)=>{o[a]=s[c+1]}),o}const eqe=Object.freeze(Object.defineProperty({__proto__:null,extractParams:QWe,matchRoute:fK,routeMap:QT,routes:JT},Symbol.toStringTag,{value:"Module"})),tqe=Ar({__name:"Renderer",setup(n){const e=Uf(),t=Z9(),r=$2(),i=J0();iq();const s=p4(),o=_Te(),a=Ee(()=>s.width),c=Ee(()=>s.height),l=Ee(()=>1),u=Tt(),h=Tt(),d=Tt(),{error:f,setup:p,isSetup:m}=eTe(_U(t.shader)),g=Ee(()=>!1),y=Ae(0),b=Ee(()=>({width:a.value+"px",height:c.value+"px",opacity:o.isOnHomepage?.15:1}));wt(()=>i.value.path,()=>{t.magicTween(1e3)}),wt(f,E=>{t.shaderError=E?.message?E:null}),wt(()=>[t.shader,t.uniformKeysSerialized],()=>{y.value++},{immediate:!0,deep:!0});function w(E){console.log(E)}return tCe(E=>{if(!u.value?.context)return;const{renderer:x,scene:C,camera:R}=u.value?.context;!m.value&&i.value.path==="/design"&&p(x.value),h.value?.update?.(E),d.value?.update?.(E),x.value.render(C.value,R.value)}),t.sketch||t.sampleSketches(),(E,x)=>{const C=_Y("TresCanvas");return Re(),Oe("figure",{class:"renderer",style:Dh(b.value)},[en(C,{width:a.value,height:c.value,dpr:l.value,class:"canvas","render-mode":"manual",antialias:!1,alpha:!1,"premultiplied-alpha":!1,"preserve-drawing-buffer":!1,"power-preference":"high-performance",ref_key:"context",ref:u},{default:Wn(()=>[x[0]||(x[0]=be("TresPerspectiveCamera",{position:[0,0,1]},null,-1)),(Re(),si(ht(Xq),{ref_key:"sketch",ref:h,key:y.value,width:a.value,height:c.value,shader:ht(t).shader,uniforms:ht(t).uniforms,volume:ht(o).disableFlashing?1:ht(r).volume,stream:ht(r).stream*ht(o).visualizerSpeed,time:ht(e).time*ht(o).visualizerSpeed},null,8,["width","height","shader","uniforms","volume","stream","time"])),en(ht(Ike),{onSelect:w,ref_key:"scroll",ref:d,scrollY:ht(s).scrollY,width:ht(s).width,height:ht(s).height,dpr:l.value,visible:g.value,sketches:ht(t).iterations,volume:ht(o).disableFlashing?1:ht(r).volume,stream:ht(r).stream*ht(o).visualizerSpeed,time:ht(e).time*ht(o).visualizerSpeed},null,8,["scrollY","width","height","dpr","visible","sketches","volume","stream","time"])]),_:1,__:[0]},8,["width","height","dpr"])],4)}}}),nqe=Lo(tqe,[["__scopeId","data-v-81d983bf"]]),rqe=Ar({__name:"App",setup(n){return(e,t)=>(Re(),Oe(ni,null,[en(ht(vke)),en(nqe),en(ht(Eke)),en(ht(lke))],64))}});JWe(rqe,{routes:eqe});export{YAe as $,py as A,sqe as B,Lf as C,XSe as D,UX as E,ni as F,_Te as G,Ze as H,Xk as I,p4 as J,oqe as K,ake as L,rke as M,Hx as N,FZ as O,Uc as P,ca as Q,J9 as R,K_ as S,dB as T,oT as U,wke as V,Dh as W,Tt as X,Jv as Y,As as Z,Lo as _,si as a,gr as a$,iqe as a0,Ct as a1,tCe as a2,_Y as a3,Xq as a4,Dg as a5,Gx as a6,eke as a7,Oo as a8,eh as a9,u0 as aA,p3 as aB,Rn as aC,Vje as aD,rt as aE,Ks as aF,kl as aG,Ln as aH,Kje as aI,_e as aJ,tg as aK,At as aL,_t as aM,ee as aN,qn as aO,Ms as aP,ai as aQ,Ic as aR,Yje as aS,So as aT,ct as aU,Fe as aV,dr as aW,m4e as aX,ir as aY,g4e as aZ,je as a_,Ku as aa,iq as ab,fc as ac,SJ as ad,AY as ae,nTe as af,lTe as ag,aTe as ah,UC as ai,RTe as aj,fa as ak,Qo as al,pn as am,nGe as an,aqe as ao,Uf as ap,cqe as aq,Kbe as ar,Sf as as,Es as at,Mt as au,ii as av,Wt as aw,cs as ax,Ph as ay,Ia as az,Wn as b,xh as b$,zee as b0,On as b1,cF as b2,ko as b3,Qn as b4,Lt as b5,vte as b6,z7 as b7,uF as b8,Ei as b9,ei as bA,Gu as bB,z$ as bC,e4 as bD,Wg as bE,y7 as bF,Eh as bG,Mqe as bH,v5 as bI,w7 as bJ,Iqe as bK,Tqe as bL,XF as bM,au as bN,nb as bO,yne as bP,_ne as bQ,Bqe as bR,xre as bS,We as bT,_7 as bU,ia as bV,Ure as bW,Uie as bX,k$ as bY,A0 as bZ,Xm as b_,_i as ba,Nt as bb,CS as bc,Am as bd,Xo as be,JV as bf,CA as bg,O0 as bh,Xje as bi,wi as bj,Wje as bk,qee as bl,kn as bm,d3 as bn,tb as bo,Kr as bp,AA as bq,Tc as br,Toe as bs,xo as bt,Gje as bu,Zje as bv,Td as bw,$c as bx,k2 as by,mt as bz,Ee as c,Vg as c0,$F as c1,W$ as c2,Dl as c3,f$ as c4,bU as c5,S0 as c6,yS as c7,T9 as c8,uW as c9,Sc as ca,hW as cb,my as cc,Ooe as cd,b9 as ce,y6e as cf,LEe as cg,wy as ch,Ha as ci,hre as cj,$i as ck,ao as cl,Dqe as cm,Yr as cn,Rqe as co,f5 as cp,Rs as cq,w5 as cr,Pl as cs,pTe as ct,Ar as d,Oe as e,$U as f,en as g,be as h,bh as i,l5 as j,_X as k,wOe as l,V9 as m,Io as n,Re as o,$2 as p,rGe as q,Ae as r,J0 as s,Rc as t,ht as u,Ca as v,wt as w,No as x,X_ as y,Z9 as z};
//# sourceMappingURL=index-xeh6oSzU.js.map
