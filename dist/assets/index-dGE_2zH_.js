import{w as O,a2 as A,a3 as W,L as j,c as k,a4 as y,Q as x,u as K}from"./index-DLc9lyo5.js";function B(t){return A()?(W(t),!0):!1}const G=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const P=Object.prototype.toString,T=t=>P.call(t)==="[object Object]",F=()=>{};function C(t){return Array.isArray(t)?t:[t]}function I(t,r,a){return O(t,r,{...a,immediate:!0})}const D=G?window:void 0;function J(t){var r;const a=y(t);return(r=a?.$el)!=null?r:a}function E(...t){const r=[],a=()=>{r.forEach(i=>i()),r.length=0},v=(i,n,s,l)=>(i.addEventListener(n,s,l),()=>i.removeEventListener(n,s,l)),u=k(()=>{const i=C(y(t[0])).filter(n=>n!=null);return i.every(n=>typeof n!="string")?i:void 0}),S=I(()=>{var i,n;return[(n=(i=u.value)==null?void 0:i.map(s=>J(s)))!=null?n:[D].filter(s=>s!=null),C(y(u.value?t[1]:t[0])),C(K(u.value?t[2]:t[1])),y(u.value?t[3]:t[2])]},([i,n,s,l])=>{if(a(),!i?.length||!n?.length||!s?.length)return;const g=T(l)?{...l}:l;r.push(...i.flatMap(m=>n.flatMap(w=>s.map(b=>v(m,w,b,g)))))},{flush:"post"}),f=()=>{S(),a()};return B(a),f}const N={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function V(t={}){const{reactive:r=!1,target:a=D,aliasMap:v=N,passive:u=!0,onEventFired:S=F}=t,f=j(new Set),i={toJSON(){return{}},current:f},n=r?j(i):i,s=new Set,l=new Set,g=new Set;function m(o,e){o in n&&(r?n[o]=e:n[o].value=e)}function w(){f.clear();for(const o of g)m(o,!1)}function b(o,e){var h,p;const d=(h=o.key)==null?void 0:h.toLowerCase(),L=[(p=o.code)==null?void 0:p.toLowerCase(),d].filter(Boolean);d&&(e?f.add(d):f.delete(d));for(const c of L)g.add(c),m(c,e);d==="shift"&&!e?(l.forEach(c=>{f.delete(c),m(c,!1)}),l.clear()):typeof o.getModifierState=="function"&&o.getModifierState("Shift")&&e&&[...f,...L].forEach(c=>l.add(c)),d==="meta"&&!e?(s.forEach(c=>{f.delete(c),m(c,!1)}),s.clear()):typeof o.getModifierState=="function"&&o.getModifierState("Meta")&&e&&[...f,...L].forEach(c=>s.add(c))}E(a,"keydown",o=>(b(o,!0),S(o)),{passive:u}),E(a,"keyup",o=>(b(o,!1),S(o)),{passive:u}),E("blur",w,{passive:u}),E("focus",w,{passive:u});const R=new Proxy(n,{get(o,e,h){if(typeof e!="string")return Reflect.get(o,e,h);if(e=e.toLowerCase(),e in v&&(e=v[e]),!(e in n))if(/[+_-]/.test(e)){const d=e.split(/[+_-]/g).map(M=>M.trim());n[e]=k(()=>d.map(M=>y(R[M])).every(Boolean))}else n[e]=x(!1);const p=Reflect.get(o,e,h);return r?y(p):p}});return R}export{V as u};
//# sourceMappingURL=index-dGE_2zH_.js.map
