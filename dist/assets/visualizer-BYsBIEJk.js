import{A as K,r as $,B as Q,d as A,p as M,c as g,a as y,u as o,l as v,n as V,o as u,_ as P,m as Y,C as G,R as D,b as k,g as a,T,i as S,h as f,e as h,I as W,v as J,t as N,D as L,z as Z,E as ee,x as oe,j as se,w as I,V as te}from"./index-DLc9lyo5.js";import{u as ae}from"./index-dGE_2zH_.js";import{C as ne}from"./Column-nUbANzCb.js";import{A as w,R as le}from"./index-D0Qh0Tnp.js";import{M as x}from"./MenuHeader-bL5KFWNp.js";/* empty css                                                             */function re(){return[...new URLSearchParams(location.search).entries()].reduce((l,[m,t])=>(l[m]=t,l),{})}function ie(){const C=K(),l=$("https://beta.kaleidosync.com"),{copy:m}=Q({source:l});async function t(){if(navigator?.canShare({url:l.value})){navigator?.share({url:l.value});return}await m(),C.message("Link copied to clipboard!")}return t}const ue=A({__name:"AudioSourceButton",emits:["click"],setup(C){const l=M(),m=g(()=>l.prettySource??"Audio Source");return(t,i)=>(u(),y(o(v),{onClick:i[0]||(i[0]=d=>t.$emit("click")),class:V({[`source_${o(l)?.source}`]:o(l)?.source!==void 0}),icon:o(l).sourceIcon,label:m.value},null,8,["class","icon","label"]))}}),ce=P(ue,[["__scopeId","data-v-f1ccdc0a"]]),de={class:"track-artwork"},pe=["src","alt"],me={key:1,class:"artwork-placeholder"},fe={class:"track-title"},ve={class:"title"},ke={key:0,class:"artist"},ge={key:0,class:"none"},Se=A({__name:"TrackDisplay",setup(C){const l=Y(),m=M(),t=g(()=>{const s=l.currentTrack;return console.log("üñºÔ∏è TrackDisplay currentTrack updated:",s),s}),i=g(()=>m.source===G.SPOTIFY),d=g(()=>t.value?.title||"Unknown Track"),c=g(()=>t.value?.artist||"Unknown Artist");g(()=>t.value?.album);const r=g(()=>{const s=t.value?.artwork;return console.log("üñºÔ∏è TrackDisplay artwork debug:",{hasTrack:!!t.value,artwork:s,medium:s?.medium,large:s?.large,small:s?.small,track:t.value}),s?.medium||s?.large||s?.small});g(()=>{const s=t.value?.durationSeconds;if(!s)return null;const e=Math.floor(s/60),n=s%60;return`${e}:${n.toString().padStart(2,"0")}`}),g(()=>{const s=t.value?.progress;return s?Math.round(s*100):0}),g(()=>{const s=t.value?.position;if(!s)return"0:00";const e=Math.floor(s/1e3),n=Math.floor(e/60),b=e%60;return`${n}:${b.toString().padStart(2,"0")}`});function _(s){console.warn("üñºÔ∏è Artwork failed to load:",s.target?.src)}return(s,e)=>(u(),y(o(D),{class:"track-display",align:"center",justify:"center"},{default:k(()=>[a(T,{name:"fade"},{default:k(()=>[t.value?(u(),y(o(D),{key:0,center:""},{default:k(()=>[f("div",de,[r.value?(u(),h("img",{key:0,src:r.value,alt:`${d.value} by ${c.value}`,onError:_},null,40,pe)):(u(),h("div",me,[a(o(W),{icon:"vinyl"})]))]),a(o(D),{justify:"center",padding:"1",gap:"1",class:"meta"},{default:k(()=>[f("h3",fe,[f("span",ve,N(d.value),1),e[0]||(e[0]=J()),e[1]||(e[1]=f("em",null," | ",-1)),c.value?(u(),h("span",ke,N(c.value),1)):S("",!0)])]),_:1})]),_:1})):S("",!0)]),_:1}),a(T,{name:"fade"},{default:k(()=>[!t.value&&i.value?(u(),h("h3",ge,"No track currently playing")):S("",!0)]),_:1})]),_:1}))}}),_e=P(Se,[["__scopeId","data-v-311f4c80"]]),ye="/images/radio-paradise/main-mix.jpg",be="/images/radio-paradise/mellow-mix.jpg",$e="/images/radio-paradise/rock-mix.jpg",we="/images/radio-paradise/global-mix.jpg",he={key:0},Ce={key:0},Ie={class:"file-container"},Te=A({__name:"AudioSources",emits:["select-source","close","select-radio-paradise"],setup(C,{emit:l}){const m=l,t=$(!1),i=$(),d=M();function c(){t.value=!t.value}function r(s){const e=le[s];m("select-radio-paradise",{station:e}),t.value=!1}async function _(s){const e=s.target,n=e.files;if(n&&n.length>0){console.log(`üìÅ Selected ${n.length} file(s):`);for(let b=0;b<n.length;b++)console.log(`üìÅ - ${n[b].name} (${n[b].type})`);await d.selectSource(w.FILE),await d.loadFiles(n),m("close")}e.value=""}return(s,e)=>(u(),h("div",null,[a(T,{name:"fade"},{default:k(()=>[t.value?(u(),h("nav",he,[a(x,{title:"Choose your station",onClose:c}),a(o(ne),{cascade:"",gap:".5"},{default:k(()=>[f("button",{class:"rp-btn",onClick:e[0]||(e[0]=n=>r("MAIN_MIX"))},e[9]||(e[9]=[f("img",{src:ye},null,-1)])),f("button",{class:"rp-btn",onClick:e[1]||(e[1]=n=>r("MELLOW_MIX"))},e[10]||(e[10]=[f("img",{src:be},null,-1)])),f("button",{class:"rp-btn",onClick:e[2]||(e[2]=n=>r("ROCK_MIX"))},e[11]||(e[11]=[f("img",{src:$e},null,-1)])),f("button",{class:"rp-btn",onClick:e[3]||(e[3]=n=>r("GLOBAL_MIX"))},e[12]||(e[12]=[f("img",{src:we},null,-1)]))]),_:1})])):S("",!0)]),_:1}),a(T,{name:"fade"},{default:k(()=>[t.value?S("",!0):(u(),h("nav",Ce,[a(x,{onClose:e[4]||(e[4]=n=>s.$emit("close")),title:"choose your audio source"}),a(o(v),{icon:"spotify",onClick:e[5]||(e[5]=n=>s.$emit("select-source",o(w).SPOTIFY)),label:"Spotify"}),a(o(v),{icon:"audius",onClick:e[6]||(e[6]=n=>s.$emit("select-source",o(w).AUDIUS)),label:"Audius"}),a(o(v),{icon:"radio-paradise",onClick:c,label:"Radio Paradise"}),a(o(v),{icon:"kexp",onClick:e[7]||(e[7]=n=>s.$emit("select-source",o(w).KEXP)),label:"KEXP"}),a(o(v),{icon:"microphone",onClick:e[8]||(e[8]=n=>s.$emit("select-source",o(w).MICROPHONE)),label:"Microphone"}),f("span",Ie,[a(o(v),{icon:"upload",label:"File"}),f("input",{ref_key:"fileInput",ref:i,type:"file",multiple:"",accept:"audio/*",onChange:_},null,544)])]))]),_:1})]))}}),Ae=P(Te,[["__scopeId","data-v-75ef01a0"]]),Me=A({__name:"Menu",emits:["open-sources","open-designs"],setup(C){const l=L(),m=M(),t=ie();return(i,d)=>(u(),h("nav",null,[a(o(ce),{onClick:d[0]||(d[0]=c=>i.$emit("open-sources"))}),o(m).source===o(w).AUDIUS?(u(),y(o(v),{key:0,to:"/audius",label:void 0,icon:"vinyl"},null,8,["label"])):S("",!0),a(o(v),{icon:"eye",label:void 0,onClick:d[1]||(d[1]=c=>i.$emit("open-designs"))},null,8,["label"]),a(o(v),{to:"/design",icon:"sliders",label:void 0},null,8,["label"]),a(o(v),{to:"/settings",icon:"settings",label:void 0},null,8,["label"]),a(o(v),{onClick:o(t),icon:"share",label:void 0},null,8,["onClick","label"]),o(l).fullscreenSupported?(u(),y(o(v),{key:1,onClick:o(l).toggleFullscreen,icon:"fullscreen",label:void 0},null,8,["onClick","label"])):S("",!0)]))}}),Pe=P(Me,[["__scopeId","data-v-e8be6e10"]]),B=2e3,j=A({__name:"visualizer",setup(C){const l=se(),m=L(),t=M(),i=Z(),d=ee(),c=$(!t.source),r=$(!c.value),_=$(!1),{ArrowUp:s,ArrowDown:e,ArrowLeft:n,ArrowRight:b}=ae(),R=$(null),O=$(null);oe(async()=>{re().spotify==="connected"&&(t.selectSource(w.SPOTIFY),l.cleanQuery("spotify"),U(),E())}),I(()=>m.mouse,()=>{_.value||c.value||d.showShaderScroll||(clearTimeout(R.value),r.value=!0,R.value=setTimeout(()=>{r.value=!1},B))}),I(r,p=>{p?i.stopMagicInterval():i.startMagicInterval()},{immediate:!0}),I(()=>i.sketch,()=>E()),I(n,p=>{p&&i.selectPreviousSketch("keyboard")}),I(s,p=>{p&&i.selectPreviousSketch("keyboard")}),I(b,p=>{p&&i.selectNextSketch("keyboard")}),I(e,p=>{p&&i.selectNextSketch("keyboard")});function E(){clearTimeout(R.value),clearTimeout(O.value),_.value=!0,r.value=!1,O.value=setTimeout(()=>{_.value=!1},B/2)}function z(){r.value=!1,c.value=!0}function U(){c.value=!1,r.value=!0}function X(p){t.selectSource(p),c.value=!1,r.value=!1}function H(){r.value=!1,d.showShaderScroll=!0}function q(p){t.selectRadioParadiseStation(p.station),t.selectSource(w.RADIO_PARADISE),c.value=!1,r.value=!1}return(p,Oe)=>(u(),y(o(te),{class:V({hidden:o(d).showShaderScroll})},{default:k(()=>[a(T,{name:"fade"},{default:k(()=>[r.value&&!_.value?(u(),y(o(Pe),{key:0,onOpenSources:z,onOpenDesigns:H})):S("",!0)]),_:1}),a(T,{name:"fade"},{default:k(()=>[c.value?(u(),y(o(Ae),{key:0,onClose:U,onSelectSource:X,onSelectRadioParadise:q})):S("",!0)]),_:1}),a(T,{name:"fade-down"},{default:k(()=>[r.value&&!_.value&&o(t).source?(u(),y(o(_e),{key:0})):S("",!0)]),_:1})]),_:1},8,["class"]))}}),Re="Visualizer",De={description:"the main visualizer",requiresAuth:!0},F={name:Re,meta:De};typeof F=="function"&&F(j);const Ve=P(j,[["__scopeId","data-v-36007e3e"]]);export{Ve as default};
//# sourceMappingURL=visualizer-BYsBIEJk.js.map
