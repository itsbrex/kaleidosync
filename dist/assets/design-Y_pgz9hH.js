const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Bxg_QigZ.js","assets/index-DmvewjL6.js","assets/index-C5gDw7Rs.css","assets/index-QUf9y9Qj.css"])))=>i.map(i=>d[i]);
import{N as ke,O as le,r as M,P as we,w as K,c as q,x as oe,Q as Ce,S as Ve,d as N,a as S,o as w,U as ye,n as J,b as $,g as P,h as j,e as F,i as R,l as B,T as Q,W as Me,_ as G,z as O,X as Se,u,f as ue,F as se,R as re,L as He,M as Pe,Y as $e,Z as te,A as Ie,$ as Ee,K as Le,j as Te,a0 as Ue,V as Re,a1 as xe}from"./index-DmvewjL6.js";import{C as ie}from"./Column-DyjFxAtN.js";import{_ as Be}from"./Sketch.vue_vue_type_script_setup_true_lang-DlNSlhB3.js";import"./index-D0Qh0Tnp.js";import{M as Ae}from"./MenuHeader-CzvO8fJh.js";/* empty css                                                             */function ze(n){const f=d=>{const V=Math.max(0,Math.min(1,d));return Math.round(V*255).toString(16).padStart(2,"0")},[h,e,s]=n.map(f);return`#${h}${e}${s}`}function ne(n,f){if(f){const h=ke(n);return[h.r/255,h.g/255,h.b/255]}else return n}function Ke(n){const f=le(n);return{h:f.h||0,s:f.s||0,l:f.l||0}}function z(n,f,h){return le(n,f,h).formatHex()}function Fe(n){return!(!n||n.length===0||!/^[a-zA-Z_]/.test(n)||!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(n))}function Ne(n,f,h){const e=M(null),s=M(null),d=we({x:0,y:0,k:1});K(()=>f.value,async()=>{await Ve(),p()},{deep:!0}),K(()=>d,()=>{requestAnimationFrame(()=>{e.value&&e.value.canvas.dispatchEvent(new CustomEvent("transform-changed"))})},{deep:!0});const V=q(()=>{const{width:a,height:l,dpr:v}=f.value;return{ctx:e.value,canvas:n.value,width:a,height:l,center:{x:a/2,y:l/2},dpr:v,mouse:s.value}});function p(){if(!n.value)return;const{width:a,height:l,dpr:v}=f.value;n.value.width=a*v,n.value.height=l*v,n.value.style.width=a+"px",n.value.style.height=l+"px"}function C(){!n.value||!e.value||(e.value.save(),e.value.resetTransform(),e.value.clearRect(0,0,n.value.width,n.value.height),e.value.restore())}function g(a="#ffffff"){!n.value||!e.value||(e.value.save(),e.value.resetTransform(),e.value.fillStyle=a,e.value.fillRect(0,0,n.value.width,n.value.height),e.value.restore())}function I(){if(!e.value)return;const{dpr:a}=f.value;e.value.resetTransform(),e.value.scale(a,a);const l=d;e.value.translate(l.x,l.y),e.value.scale(l.k,l.k)}function T(a){e.value&&(e.value.save(),a(e.value),e.value.restore())}function U({x:a,y:l,radius:v,lineWidth:b,strokeStyle:y,fillStyle:L}){e.value&&(b&&(e.value.lineWidth=b),y&&(e.value.strokeStyle=y),L&&(e.value.fillStyle=L),e.value.beginPath(),e.value.arc(a,l,v,0,Math.PI*2),e.value.closePath(),(!b&&!y||L)&&e.value.fill(),(y||b)&&e.value.stroke())}function E({x:a,y:l,rX:v,rY:b,rotation:y,lineWidth:L,strokeStyle:x,fillStyle:A}){e.value&&(L&&(e.value.lineWidth=L),x&&(e.value.strokeStyle=x),A&&(e.value.fillStyle=A),e.value.beginPath(),e.value.ellipse(a,l,v,b,y,0,Math.PI*2),e.value.closePath(),A&&e.value.fill(),(x||L)&&e.value.stroke())}function r(a){if(!n.value)return;const l=n.value.getBoundingClientRect(),v=a.clientX-l.left,b=a.clientY-l.top;if(d){const y=d;s.value=[(v-y.x)/y.k,(b-y.y)/y.k]}else s.value=[v,b]}function _(){s.value=null}return oe(()=>{p(),e.value=n.value?.getContext("2d")||null,n.value&&(n.value.addEventListener("mousemove",r),n.value.addEventListener("mouseleave",_))}),Ce(()=>{n.value&&(n.value.removeEventListener("mousemove",r),n.value.removeEventListener("mouseleave",_))}),{state:V,ctx:e,draw:T,clear:C,normalize:I,circle:U,mouse:s,ellipse:E,fill:g}}const Ge={key:0},Xe=["value"],Ye=N({__name:"ColorInput",props:{label:{},modelValue:{default:"#000000"},disabled:{type:Boolean,default:!1},webgl:{type:Boolean}},emits:["update:model-value","pointerdown"],setup(n,{expose:f,emit:h}){const e=M();f({container:e});const s=h,d=n,V=q(()=>d.webgl?ze(d.modelValue):d.modelValue),p=q(()=>Ke(V.value)),C=M({width:200,height:150,dpr:window.devicePixelRatio}),g=M(),{draw:I,clear:T,normalize:U}=Ne(g,C),E=M(null),r=M(!1),_=M(!1);function a(){if(!g.value)return;const{width:t,height:i}=C.value;T(),U(),I(c=>{const o=Math.floor(i*.1),m=i-o-5;l(c,t,m,p.value.h),v(c,t,o,i-o,p.value.h),b(c,t,m,p.value),y(c,t,o,i-o,p.value.h)})}K(()=>d.modelValue,()=>a());function l(t,i,c,o){const m=t.createLinearGradient(0,0,i,0);m.addColorStop(0,"#ffffff"),m.addColorStop(1,z(o,1,.5)),t.fillStyle=m,t.fillRect(0,0,i,c);const k=t.createLinearGradient(0,0,0,c);k.addColorStop(0,"rgba(0, 0, 0, 0)"),k.addColorStop(1,"rgba(0, 0, 0, 1)"),t.fillStyle=k,t.fillRect(0,0,i,c)}function v(t,i,c,o,m){const k=t.createLinearGradient(0,o,i,o);for(let H=0;H<=360;H+=30)k.addColorStop(H/360,z(H,1,.5));t.fillStyle=k,t.fillRect(0,o,i,c)}function b(t,i,c,o){const m=de(o.h,o.s,o.l),k=m.s*i,H=(1-m.v)*c;t.beginPath(),t.arc(k,H,8,0,Math.PI*2),t.fillStyle="white",t.fill(),t.strokeStyle="black",t.lineWidth=2,t.stroke()}function y(t,i,c,o,m){const k=m/360*i,H=o+c/2;t.beginPath(),t.arc(k,H,6,0,Math.PI*2),t.fillStyle="white",t.fill(),t.strokeStyle="black",t.lineWidth=2,t.stroke()}function L(t){if(d.disabled||(r.value=!0,!g.value||!_.value))return;const i=g.value.getBoundingClientRect(),c=(t.clientY-i.top)*(C.value.height/i.height),{height:o}=C.value,m=Math.floor(o*.1),k=o-m-5;c<=k?E.value="saturation-lightness":c>=o-m&&(E.value="hue"),x(t)}function x(t){if(!g.value)return;const i=g.value.getBoundingClientRect(),c=(t.clientX-i.left)*(C.value.width/i.width),o=(t.clientY-i.top)*(C.value.height/i.height),{width:m,height:k}=C.value,H=Math.floor(k*.1),X=k-H-5,W=r.value?E.value:o<=X?"saturation-lightness":o>=k-H?"hue":null;if(W==="saturation-lightness"){const ee=Math.max(0,Math.min(m,c)),Y=Math.max(0,Math.min(X,o)),Z=ee/m,D=1-Y/X,{s:pe,l:ge}=A(p.value.h,Z,D),_e=z(p.value.h,pe,ge),be=ne(_e,!!d.webgl);s("update:model-value",be)}else if(W==="hue"){const Y=Math.max(0,Math.min(m,c))/m*360,Z=z(Y,p.value.s,p.value.l),D=ne(Z,!!d.webgl);s("update:model-value",D)}}function A(t,i,c){const o=c*(1-i/2),m=o===0||o===1?0:(c-o)/Math.min(o,1-o);return{h:t,s:m,l:o}}function de(t,i,c){const o=c+i*Math.min(c,1-c),m=o===0?0:2*(1-c/o);return{h:t,s:m,v:o}}function fe(){r.value=!1,E.value=null}function ve(t){r.value&&x(t)}oe(()=>{a()});function me(t){_.value=!1}function he(t){d.disabled||(_.value=!0)}return(t,i)=>(w(),S(ye,{ref_key:"container",ref:e,label:t.label,disabled:t.disabled,class:J({open:_.value}),"hide-label":_.value},{default:$(()=>[P(Q,{name:"fade"},{default:$(()=>[_.value?(w(),F("nav",Ge,[P(B,{class:"close",onClick:me,icon:"close"})])):R("",!0)]),_:1}),j("div",{class:"canvas-container",onClick:he,style:Me({background:V.value}),onMousedown:L,onMousemove:ve,onMouseup:fe},[j("input",{type:"color",value:V.value},null,8,Xe),j("canvas",{ref_key:"canvas",ref:g},null,512)],36)]),_:1},8,["label","disabled","class","hide-label"]))}}),Ze=G(Ye,[["__scopeId","data-v-f0053cd0"]]),De=N({__name:"Uniforms",props:{focused:{type:Boolean},focusedKey:{}},emits:["focus","blur"],setup(n,{emit:f}){const h=f,e=n,s=O(),d=Se({}),{getMin:V,getMax:p,getStep:C}=$e;K(()=>s.uniformKeysSerialized,()=>{d.value={},s.uniformKeys.forEach(r=>{const _=s.uniforms[r].value;typeof _=="number"&&(d.value[r]={min:V(r,_),max:p(r,_),step:C(r,_)||1e-5})})},{immediate:!0});function g(r){return{active:r===s.uniformKeys?.[s.keyboardIndex],hidden:e.focused&&e.focusedKey!==r,focused:e.focused&&e.focusedKey===r}}function I(r){return!!(Array.isArray(r)&&r.length===3||r?.isColor)}function T(r){return typeof r=="boolean"}function U(r){h("focus",r)}function E(){h("blur")}return(r,_)=>u(s).uniforms?(w(),S(u(ie),{key:0,justify:"end",align:"end"},{default:$(()=>[(w(!0),F(se,null,ue(u(s).uniforms,(a,l)=>(w(),S(u(re),{class:J(["uniform",g(l)]),cascade:""},{default:$(()=>[I(a.value)?(w(),S(u(Ze),{key:0,label:l,webgl:!0,modelValue:a.value,"onUpdate:modelValue":v=>a.value=v},null,8,["label","modelValue","onUpdate:modelValue"])):R("",!0),T(a.value)?(w(),S(u(He),{key:1,label:l,modelValue:a.value,"onUpdate:modelValue":v=>a.value=v},null,8,["label","modelValue","onUpdate:modelValue"])):R("",!0),typeof a.value=="number"?(w(),S(u(Pe),{key:2,onInput:v=>U(l),onBlur:E,modelValue:a.value,"onUpdate:modelValue":v=>a.value=v,ref_for:!0,ref:"range",min:d.value?.[l]?.min,max:d.value?.[l]?.max,step:d.value?.[l]?.step,label:l},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","step","label"])):R("",!0)]),_:2},1032,["class"]))),256))]),_:1})):R("",!0)}}),je=G(De,[["__scopeId","data-v-82535a81"]]),qe=["onClick"],Qe=N({__name:"Variants",setup(n){const f=O();return(h,e)=>(w(),S(u(re),{class:"variants",align:"center",cascade:"",is:"ul",gap:".5"},{default:$(()=>[te(h.$slots,"left",{},void 0,!0),(w(!0),F(se,null,ue(u(f).sketch?.variants||[],(s,d)=>(w(),F("li",{onClick:V=>u(f).selectVariant(d),class:J({active:d===u(f).variant})},[P(u(Be),{onClick:V=>u(f).selectVariant(d),animate:!1,shader:u(f).sketch?.shader||"",uniforms:s},null,8,["onClick","shader","uniforms"])],10,qe))),256)),te(h.$slots,"right",{},void 0,!0)]),_:3}))}}),Je=G(Qe,[["__scopeId","data-v-60c81426"]]),ce=N({__name:"design",setup(n){const f=Ue(()=>xe(()=>import("./index-Bxg_QigZ.js"),__vite__mapDeps([0,1,2,3])).then(a=>a.ShaderEditor)),h=Ie(),e=Ee(),s=O(),d=Te(),{meta:V}=Le(),p=M(!1),C=M(null),g=M(!0),I=M(!1);function T(){g.value=!g.value}function U(){I.value=!I.value}function E(a){C.value=a,p.value=!0}function r(){p.value=!1,C.value=null}async function _({value:a,type:l,range:v}){if(l==="uniform")return e.editUniform(a);if(!V.value||l==="number")return;const b=await e.getText("choose uniform name");if(b.length<3)return h.error("Friends don't let friends code golf (2 characters minimum)");if(!Fe(b))return h.error("Invalid uniform name.");s.addUniform({value:a,type:l,range:v,name:b}),h.message(`Added uniform \`${b}\``)}return(a,l)=>(w(),S(u(Re),null,{default:$(()=>[P(u(ie),{padding:"1",gap:"1",is:"aside",align:"end"},{default:$(()=>[P(u(Ae),{title:"design",class:"header transition",onClose:l[1]||(l[1]=v=>u(d).push("/visualizer"))},{default:$(()=>[P(u(B),{icon:"code",active:I.value,onClick:U},null,8,["active"]),P(u(B),{icon:"sliders",active:g.value,onClick:T},null,8,["active"]),P(u(B),{icon:"wand",onClick:l[0]||(l[0]=v=>u(s).magicTween(500))})]),_:1}),P(u(Je),null,{right:$(()=>[g.value?(w(),S(u(B),{key:0,icon:"plus",disabled:u(s).canAddVariant,onClick:u(s).addVariant},null,8,["disabled","onClick"])):(w(),S(u(B),{key:1,icon:"shuffle",disabled:u(s).sketch?.variants.length===1,active:u(s).shuffleVariants,onClick:u(s).toggleShuffleVariants},null,8,["disabled","active","onClick"]))]),_:1}),P(Q,{name:"fade"},{default:$(()=>[g.value?(w(),S(u(je),{key:0,onFocus:E,onBlur:r,focused:p.value,"focused-key":C.value},null,8,["focused","focused-key"])):R("",!0)]),_:1})]),_:1}),P(Q,{name:"fade"},{default:$(()=>[I.value?(w(),S(u(f),{key:0,modelValue:u(s).shader,"onUpdate:modelValue":l[2]||(l[2]=v=>u(s).shader=v),error:u(s).shaderError,"uniform-keys":u(s).uniformKeys,onNodeClick:_},null,8,["modelValue","error","uniform-keys"])):R("",!0)]),_:1})]),_:1}))}}),Oe="Design",We={description:"customize your visuals",requiresAuth:!0},ae={name:Oe,meta:We};typeof ae=="function"&&ae(ce);const ut=G(ce,[["__scopeId","data-v-a85f3e60"]]);export{ut as default};
//# sourceMappingURL=design-Y_pgz9hH.js.map
