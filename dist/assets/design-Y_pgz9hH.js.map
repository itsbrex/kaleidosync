{"version":3,"mappings":"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","names":["glslColorToHex","color","clampAndConvert","value","clamped","r","g","b","hexToModelValue","hex","isWebgl","rgb","hexToHsl","hsl","hslToHex","h","s","l","isValidGLSLVariableName","name","useCanvas2d","canvas","artboard","transform","ctx","ref","mouse","$transform","reactive","watch","nextTick","resize","state","computed","width","height","dpr","clear","fill","normalize","t","draw","fn","circle","x","y","radius","lineWidth","strokeStyle","fillStyle","ellipse","rX","rY","rotation","handleMouseMove","e","rect","handleMouseLeave","onMounted","onUnmounted","container","__expose","emit","__emit","props","__props","currentHsl","interactionMode","clicked","open","drawColorPicker","hueHeight","pickerHeight","drawSaturationLightnessPicker","drawHueStrip","drawSaturationLightnessIndicator","drawHueIndicator","hue","saturationGradient","lightnessGradient","yOffset","currentHue","hueGradient","i","hsv","hslToHsv","onPointerDown","updateColorFromPointer","mode","clampedX","clampedY","saturationHSV","valueHSV","saturationHSL","lightnessHSL","hsvToHsl","newHex","newValue","v","sl","sv","onPointerUp","onPointerMove","close","activate","_createBlock","FormElement","label","disabled","_createVNode","_Transition","_createElementBlock","_hoisted_1","IconButton","_createElementVNode","$emits","sketches","useSketches","ranges","shallowRef","getMin","getMax","getStep","uniformRangeUtils","key","val","getClasses","isColor","isBoolean","onFocus","onBlur","_unref","Column","_openBlock","_Fragment","_","Row","_normalizeClass","ColorInput","$event","Toggle","RangeInput","_renderSlot","_ctx","_renderList","variant","Sketch","ShaderEditor","defineAsyncComponent","m","toast","useToast","popover","usePopover","router","useRouter","meta","useMagicKeys","focused","focusedKey","showUniforms","showEditor","toggleUniforms","toggleEditor","onEditorNodeClick","type","range","uniformName","View","MenuHeader","_cache","Variants","Uniforms"],"ignoreList":[0,1,2,3,4,5,6,7,8],"sources":["../../node_modules/@wearesage/vue/src/util/glsl-color-to-hex.ts","../../node_modules/@wearesage/vue/src/util/hex-to-model-value.ts","../../node_modules/@wearesage/vue/src/util/hex-to-hsl.ts","../../node_modules/@wearesage/vue/src/util/hsl-to-hex.ts","../../node_modules/@wearesage/vue/src/util/is-valid-glsl-variable-name.ts","../../node_modules/@wearesage/vue/src/composables/graphics/useCanvas2d.ts","../../node_modules/@wearesage/vue/src/components/forms/ColorInput.vue","../../node_modules/@wearesage/vue/src/components/webgl/Uniforms.vue","../../node_modules/@wearesage/vue/src/components/webgl/Variants.vue","../../src/pages/design.vue"],"sourcesContent":["export function glslColorToHex(color: [number, number, number]): string {\n  const clampAndConvert = (value: number) => {\n    const clamped = Math.max(0, Math.min(1, value));\n    return Math.round(clamped * 255)\n      .toString(16)\n      .padStart(2, \"0\");\n  };\n\n  const [r, g, b] = color.map(clampAndConvert);\n  return `#${r}${g}${b}`;\n}","import { rgb } from \"d3-color\";\n\nexport function hexToModelValue(hex: string, isWebgl: boolean): any {\n  if (isWebgl) {\n    // Convert hex to [r, g, b] array (0-1 range)\n    const color = rgb(hex);\n    return [color.r / 255, color.g / 255, color.b / 255];\n  } else {\n    // Return hex string\n    return hex;\n  }\n}","import { hsl } from \"d3-color\";\n\nexport function hexToHsl(hex: string) {\n  const color = hsl(hex);\n  return {\n    h: color.h || 0,\n    s: color.s || 0,\n    l: color.l || 0,\n  };\n}","import { hsl } from \"d3-color\";\n\nexport function hslToHex(h: number, s: number, l: number) {\n  const color = hsl(h, s, l);\n  return color.formatHex();\n}","export function isValidGLSLVariableName(name: string): boolean {\n  if (!name || name.length === 0) return false;\n  if (!/^[a-zA-Z_]/.test(name)) return false;\n  if (!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(name)) return false;\n  return true;\n}","import { onMounted, ref, computed, watch, type Ref, onUnmounted, nextTick, type Reactive, reactive, type ComputedRef } from \"vue\";\nimport type { ZoomTransform } from \"d3-zoom\";\n\nexport type Artboard =\n  | Ref\n  | ComputedRef<{\n      width: number;\n      height: number;\n      dpr: number;\n    }>;\n\nexport type CanvasState = {\n  ctx: CanvasRenderingContext2D | null;\n  canvas: HTMLCanvasElement | null;\n  width: number;\n  height: number;\n  center: {\n    x: number;\n    y: number;\n  };\n  dpr: number;\n  mouse: [number, number];\n};\n\nexport function useCanvas2d(canvas: Ref<HTMLCanvasElement | null>, artboard: Artboard, transform?: Ref | Reactive<ZoomTransform>) {\n  const ctx = ref<CanvasRenderingContext2D | null>(null);\n  const mouse = ref<[number, number] | null>(null);\n  const $transform = reactive(transform || { x: 0, y: 0, k: 1 });\n\n  watch(\n    () => artboard.value,\n    async () => {\n      await nextTick();\n      resize();\n    },\n    { deep: true }\n  );\n\n  // Watch for changes in transform to ensure we redraw when zoom changes\n  watch(\n    () => $transform,\n    () => {\n      // Request an animation frame to redraw with the new transform\n      requestAnimationFrame(() => {\n        if (ctx.value) {\n          // Signal that the transform has changed and a redraw might be needed\n          ctx.value.canvas.dispatchEvent(new CustomEvent(\"transform-changed\"));\n        }\n      });\n    },\n    { deep: true }\n  );\n\n  const state = computed(() => {\n    const { width, height, dpr } = artboard.value;\n\n    return {\n      ctx: ctx.value,\n      canvas: canvas.value,\n      width,\n      height,\n      center: {\n        x: width / 2,\n        y: height / 2,\n      },\n      dpr: dpr,\n      mouse: mouse.value,\n    };\n  });\n\n  function resize() {\n    if (!canvas.value) return;\n\n    const { width, height, dpr } = artboard.value;\n\n    canvas.value.width = width * dpr;\n    canvas.value.height = height * dpr;\n    canvas.value.style.width = width + \"px\";\n    canvas.value.style.height = height + \"px\";\n  }\n\n  function clear() {\n    if (!canvas.value || !ctx.value) return;\n\n    // Save the current transform\n    ctx.value.save();\n\n    // Reset the transform to identity to clear the entire canvas\n    ctx.value.resetTransform();\n\n    // Clear the entire canvas\n    ctx.value.clearRect(0, 0, canvas.value.width, canvas.value.height);\n\n    // Restore the transform\n    ctx.value.restore();\n  }\n\n  function fill(color = \"#ffffff\") {\n    if (!canvas.value || !ctx.value) return;\n    ctx.value.save();\n    ctx.value.resetTransform();\n    ctx.value.fillStyle = color;\n    ctx.value.fillRect(0, 0, canvas.value.width, canvas.value.height);\n    ctx.value.restore();\n  }\n\n  function normalize() {\n    if (!ctx.value) return;\n\n    const { dpr } = artboard.value;\n\n    // Reset to identity transform\n    ctx.value.resetTransform();\n\n    // Apply device pixel ratio scaling\n    ctx.value.scale(dpr, dpr);\n\n    // Apply d3-zoom transform\n    const t = $transform;\n    ctx.value.translate(t.x, t.y);\n    ctx.value.scale(t.k, t.k);\n  }\n\n  function draw(fn: (s: CanvasRenderingContext2D) => void) {\n    if (!ctx.value) return;\n    ctx.value.save();\n    fn(ctx.value as CanvasRenderingContext2D);\n    ctx.value.restore();\n  }\n\n  type CircleProps = {\n    x: number;\n    y: number;\n    radius: number;\n    lineWidth?: number;\n    strokeStyle?: string;\n    fillStyle?: string;\n  };\n\n  function circle({ x, y, radius, lineWidth, strokeStyle, fillStyle }: CircleProps) {\n    if (!ctx.value) return;\n    if (lineWidth) ctx.value.lineWidth = lineWidth;\n    if (strokeStyle) ctx.value.strokeStyle = strokeStyle;\n    if (fillStyle) ctx.value.fillStyle = fillStyle;\n    ctx.value.beginPath();\n    ctx.value.arc(x, y, radius, 0, Math.PI * 2);\n    ctx.value.closePath();\n    if ((!lineWidth && !strokeStyle) || fillStyle) ctx.value.fill();\n    if (strokeStyle || lineWidth) ctx.value.stroke();\n  }\n\n  type RadiusProps = {\n    x: number;\n    y: number;\n    rX: number;\n    rY: number;\n    rotation: number;\n    lineWidth?: number;\n    strokeStyle?: string;\n    fillStyle?: string;\n  };\n\n  function ellipse({ x, y, rX, rY, rotation, lineWidth, strokeStyle, fillStyle }: RadiusProps) {\n    if (!ctx.value) return;\n    if (lineWidth) ctx.value.lineWidth = lineWidth;\n    if (strokeStyle) ctx.value.strokeStyle = strokeStyle;\n    if (fillStyle) ctx.value.fillStyle = fillStyle;\n    ctx.value.beginPath();\n    ctx.value.ellipse(x, y, rX, rY, rotation, 0, Math.PI * 2);\n    ctx.value.closePath();\n    if (fillStyle) ctx.value.fill();\n    if (strokeStyle || lineWidth) ctx.value.stroke();\n  }\n\n  function handleMouseMove(e: MouseEvent) {\n    if (!canvas.value) return;\n\n    const rect = canvas.value.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    if ($transform) {\n      const t = $transform;\n      mouse.value = [(x - t.x) / t.k, (y - t.y) / t.k];\n    } else {\n      mouse.value = [x, y];\n    }\n  }\n\n  function handleMouseLeave() {\n    mouse.value = null;\n  }\n\n  onMounted(() => {\n    resize();\n    ctx.value = canvas.value?.getContext(\"2d\") || null;\n\n    if (canvas.value) {\n      canvas.value.addEventListener(\"mousemove\", handleMouseMove);\n      canvas.value.addEventListener(\"mouseleave\", handleMouseLeave);\n    }\n  });\n\n  onUnmounted(() => {\n    if (canvas.value) {\n      canvas.value.removeEventListener(\"mousemove\", handleMouseMove);\n      canvas.value.removeEventListener(\"mouseleave\", handleMouseLeave);\n    }\n  });\n\n  return {\n    state,\n    ctx,\n    draw,\n    clear,\n    normalize,\n    circle,\n    mouse,\n    ellipse,\n    fill,\n  };\n}\n","<template>\n  <FormElement ref=\"container\" :label=\"label\" :disabled=\"disabled\" :class=\"{ open }\" :hide-label=\"open\">\n    <Transition name=\"fade\">\n      <nav v-if=\"open\">\n        <IconButton class=\"close\" @click=\"close\" icon=\"close\" />\n      </nav>\n    </Transition>\n    <div\n      class=\"canvas-container\"\n      @click=\"activate\"\n      :style=\"{ background: value }\"\n      @mousedown=\"onPointerDown\"\n      @mousemove=\"onPointerMove\"\n      @mouseup=\"onPointerUp\">\n      <input type=\"color\" :value=\"value\" />\n      <canvas ref=\"canvas\" />\n    </div>\n  </FormElement>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, watch } from \"vue\";\nimport FormElement from \"./FormElement.vue\";\nimport { glslColorToHex, hslToHex, hexToHsl, hexToModelValue } from \"../../util\";\nimport { useCanvas2d } from \"../../composables\";\nimport IconButton from \"../common/IconButton.vue\";\n\nconst container = ref();\n\ndefineExpose({ container });\n\nconst emit = defineEmits<{\n  \"update:model-value\": [value: string | [number, number, number]];\n  pointerdown: [event: MouseEvent];\n}>();\n\nconst props = withDefaults(\n  defineProps<{\n    label?: string;\n    modelValue: string | [number, number, number];\n    disabled?: boolean;\n    webgl?: boolean;\n  }>(),\n  {\n    disabled: false,\n    modelValue: \"#000000\"\n  }\n);\n\nconst value = computed(() => (props.webgl ? glslColorToHex(props.modelValue as [number, number, number]) : props.modelValue));\nconst currentHsl = computed(() => hexToHsl(value.value as string));\n\nconst artboard = ref({\n  width: 200,\n  height: 150,\n  dpr: window.devicePixelRatio\n});\nconst canvas = ref();\nconst { draw, clear, normalize } = useCanvas2d(canvas, artboard);\nconst interactionMode = ref<\"saturation-lightness\" | \"hue\" | null>(null);\nconst clicked = ref(false);\nconst open = ref(false);\n\nfunction drawColorPicker() {\n  if (!canvas.value) return;\n  const { width, height } = artboard.value;\n  clear();\n  normalize();\n  draw(ctx => {\n    const hueHeight = Math.floor(height * 0.1);\n    const pickerHeight = height - hueHeight - 5;\n    drawSaturationLightnessPicker(ctx, width, pickerHeight, currentHsl.value.h);\n    drawHueStrip(ctx, width, hueHeight, height - hueHeight, currentHsl.value.h);\n    drawSaturationLightnessIndicator(ctx, width, pickerHeight, currentHsl.value);\n    drawHueIndicator(ctx, width, hueHeight, height - hueHeight, currentHsl.value.h);\n  });\n}\n\nwatch(\n  () => props.modelValue,\n  () => drawColorPicker()\n);\n\nfunction drawSaturationLightnessPicker(ctx: CanvasRenderingContext2D, width: number, height: number, hue: number) {\n  const saturationGradient = ctx.createLinearGradient(0, 0, width, 0);\n  saturationGradient.addColorStop(0, \"#ffffff\");\n  saturationGradient.addColorStop(1, hslToHex(hue, 1, 0.5));\n  ctx.fillStyle = saturationGradient;\n  ctx.fillRect(0, 0, width, height);\n  const lightnessGradient = ctx.createLinearGradient(0, 0, 0, height);\n  lightnessGradient.addColorStop(0, \"rgba(0, 0, 0, 0)\");\n  lightnessGradient.addColorStop(1, \"rgba(0, 0, 0, 1)\");\n  ctx.fillStyle = lightnessGradient;\n  ctx.fillRect(0, 0, width, height);\n}\n\nfunction drawHueStrip(ctx: CanvasRenderingContext2D, width: number, height: number, yOffset: number, currentHue: number) {\n  const hueGradient = ctx.createLinearGradient(0, yOffset, width, yOffset);\n  for (let i = 0; i <= 360; i += 30) {\n    hueGradient.addColorStop(i / 360, hslToHex(i, 1, 0.5));\n  }\n\n  ctx.fillStyle = hueGradient;\n  ctx.fillRect(0, yOffset, width, height);\n}\n\nfunction drawSaturationLightnessIndicator(\n  ctx: CanvasRenderingContext2D,\n  width: number,\n  height: number,\n  hsl: { h: number; s: number; l: number }\n) {\n  const hsv = hslToHsv(hsl.h, hsl.s, hsl.l);\n  const x = hsv.s * width;\n  const y = (1 - hsv.v) * height;\n  ctx.beginPath();\n  ctx.arc(x, y, 8, 0, Math.PI * 2);\n  ctx.fillStyle = \"white\";\n  ctx.fill();\n  ctx.strokeStyle = \"black\";\n  ctx.lineWidth = 2;\n  ctx.stroke();\n}\n\nfunction drawHueIndicator(ctx: CanvasRenderingContext2D, width: number, height: number, yOffset: number, hue: number) {\n  const x = (hue / 360) * width;\n  const y = yOffset + height / 2;\n  ctx.beginPath();\n  ctx.arc(x, y, 6, 0, Math.PI * 2);\n  ctx.fillStyle = \"white\";\n  ctx.fill();\n  ctx.strokeStyle = \"black\";\n  ctx.lineWidth = 2;\n  ctx.stroke();\n}\n\nfunction onPointerDown(e: MouseEvent) {\n  if (props.disabled) return;\n  clicked.value = true;\n  if (!canvas.value || !open.value) return;\n\n  const rect = canvas.value.getBoundingClientRect();\n  const y = (e.clientY - rect.top) * (artboard.value.height / rect.height);\n  const { height } = artboard.value;\n  const hueHeight = Math.floor(height * 0.1);\n  const pickerHeight = height - hueHeight - 5;\n\n  if (y <= pickerHeight) {\n    interactionMode.value = \"saturation-lightness\";\n  } else if (y >= height - hueHeight) {\n    interactionMode.value = \"hue\";\n  }\n\n  updateColorFromPointer(e);\n}\n\nfunction updateColorFromPointer(e: MouseEvent) {\n  if (!canvas.value) return;\n\n  const rect = canvas.value.getBoundingClientRect();\n  const x = (e.clientX - rect.left) * (artboard.value.width / rect.width);\n  const y = (e.clientY - rect.top) * (artboard.value.height / rect.height);\n  const { width, height } = artboard.value;\n  const hueHeight = Math.floor(height * 0.1);\n  const pickerHeight = height - hueHeight - 5;\n  const mode = clicked.value ? interactionMode.value : y <= pickerHeight ? \"saturation-lightness\" : y >= height - hueHeight ? \"hue\" : null;\n\n  if (mode === \"saturation-lightness\") {\n    const clampedX = Math.max(0, Math.min(width, x));\n    const clampedY = Math.max(0, Math.min(pickerHeight, y));\n    const saturationHSV = clampedX / width;\n    const valueHSV = 1 - clampedY / pickerHeight;\n    const { s: saturationHSL, l: lightnessHSL } = hsvToHsl(currentHsl.value.h, saturationHSV, valueHSV);\n    const newHex = hslToHex(currentHsl.value.h, saturationHSL, lightnessHSL);\n    const newValue = hexToModelValue(newHex, !!props.webgl);\n    emit(\"update:model-value\", newValue);\n  } else if (mode === \"hue\") {\n    const clampedX = Math.max(0, Math.min(width, x));\n    const hue = (clampedX / width) * 360;\n    const newHex = hslToHex(hue, currentHsl.value.s, currentHsl.value.l);\n    const newValue = hexToModelValue(newHex, !!props.webgl);\n    emit(\"update:model-value\", newValue);\n  }\n}\n\nfunction hsvToHsl(h: number, s: number, v: number): { h: number; s: number; l: number } {\n  const l = v * (1 - s / 2);\n  const sl = l === 0 || l === 1 ? 0 : (v - l) / Math.min(l, 1 - l);\n  return { h, s: sl, l };\n}\n\nfunction hslToHsv(h: number, s: number, l: number): { h: number; s: number; v: number } {\n  const v = l + s * Math.min(l, 1 - l);\n  const sv = v === 0 ? 0 : 2 * (1 - l / v);\n  return { h, s: sv, v };\n}\n\nfunction onPointerUp() {\n  clicked.value = false;\n  interactionMode.value = null;\n}\n\nfunction onPointerMove(e: MouseEvent) {\n  if (clicked.value) {\n    updateColorFromPointer(e);\n  }\n}\n\nonMounted(() => {\n  drawColorPicker();\n});\n\nfunction close(e: any) {\n  open.value = false;\n}\n\nfunction activate(e: any) {\n  if (props.disabled) return;\n  open.value = true;\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.form-element {\n  position: relative;\n\n  :deep(label) {\n    min-width: calc(3rem);\n    display: flex;\n  }\n}\n\ninput {\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n}\n\ndiv {\n  @include flex-row;\n  @include size(3.5rem, 1.5rem);\n  transition: width var(--transition-duration) var(--transition-easing), height var(--transition-duration) var(--transition-easing);\n  border-radius: 1.25rem;\n  overflow: hidden;\n}\n\nnav {\n  @include position(absolute, 50% null null 0.75rem, 20);\n  @include flex-column;\n  @include box(0, 0.5);\n  transform: translateY(-50%) !important;\n\n  button {\n    border: 1px solid $gray;\n  }\n}\n\ncanvas {\n  opacity: 0;\n  z-index: 10;\n  border-radius: 1.25rem;\n  transition: var(--transition);\n  pointer-events: none;\n}\n\n.open {\n  div {\n    @include size(200px, 150px);\n  }\n\n  canvas {\n    opacity: 1;\n    pointer-events: all;\n  }\n}\n</style>\n","<template>\n  <Column v-if=\"sketches.uniforms\" justify=\"end\" align=\"end\">\n    <Row v-for=\"(_, key) in sketches.uniforms\" class=\"uniform\" :class=\"getClasses(key)\" cascade>\n      <ColorInput v-if=\"isColor(_.value)\" :label=\"key\" :webgl=\"true\" v-model=\"(_.value as [number, number, number])\" />\n      <Toggle v-if=\"isBoolean(_.value)\" :label=\"key\" v-model=\"_.value\" />\n      <RangeInput\n        v-if=\"typeof _.value === 'number'\"\n        @input=\"onFocus(key)\"\n        @blur=\"onBlur\"\n        v-model=\"_.value\"\n        ref=\"range\"\n        :min=\"ranges?.[key]?.min\"\n        :max=\"ranges?.[key]?.max\"\n        :step=\"ranges?.[key]?.step\"\n        :label=\"key\" />\n    </Row>\n  </Column>\n</template>\n\n<script setup lang=\"ts\">\nimport { watch, shallowRef } from \"vue\";\nimport { Row, Column, useSketches, Toggle, RangeInput, ColorInput, uniformRangeUtils } from \"@wearesage/vue\";\n\nconst $emits = defineEmits([\"focus\", \"blur\"]);\nconst props = defineProps<{\n  focused: boolean;\n  focusedKey: string | null;\n}>();\n\nconst sketches = useSketches();\nconst ranges = shallowRef<any>({});\nconst { getMin, getMax, getStep } = uniformRangeUtils;\n\nwatch(\n  () => sketches.uniformKeysSerialized,\n  () => {\n    ranges.value = {};\n    sketches.uniformKeys.forEach(key => {\n      const val = sketches.uniforms[key].value;\n      if (typeof val !== \"number\") return;\n      ranges.value[key] = {\n        min: getMin(key, val),\n        max: getMax(key, val),\n        step: getStep(key, val) || 0.00001\n      };\n    });\n  },\n  {\n    immediate: true\n  }\n);\n\nfunction getClasses(key: string) {\n  return {\n    active: key === sketches.uniformKeys?.[sketches.keyboardIndex],\n    hidden: props.focused && props.focusedKey !== key,\n    focused: props.focused && props.focusedKey === key\n  };\n}\n\nfunction isColor(val: any) {\n  if (Array.isArray(val) && val.length === 3) return true;\n  if (val?.isColor) return true;\n  return false;\n}\n\nfunction isBoolean(val: any) {\n  return typeof val === \"boolean\";\n}\n\nfunction onFocus(key: string) {\n  $emits(\"focus\", key);\n}\n\nfunction onBlur() {\n  $emits(\"blur\");\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.uniform {\n  transition: opacity $transition-duration $transition-easing;\n}\n\n.hidden {\n  opacity: 0 !important;\n}\n</style>\n","<template>\n  <Row class=\"variants\" align=\"center\" cascade is=\"ul\" gap=\".5\">\n    <slot name=\"left\"></slot>\n\n    <li\n      v-for=\"(variant, i) in sketches.sketch?.variants || []\"\n      @click=\"sketches.selectVariant(i)\"\n      :class=\"{ active: i === sketches.variant }\">\n      <Sketch @click=\"sketches.selectVariant(i)\" :animate=\"false\" :shader=\"sketches.sketch?.shader || ''\" :uniforms=\"variant\" />\n    </li>\n\n    <slot name=\"right\"></slot>\n  </Row>\n</template>\n\n<script setup lang=\"ts\">\nimport { Row, Sketch, useSketches } from \"@wearesage/vue\";\n\nconst sketches = useSketches();\n</script>\n\n<style lang=\"scss\" scoped>\nli {\n  @include size(48px);\n  border-radius: 3rem;\n  overflow: hidden;\n  transition: var(--transition);\n  border: 2px solid transparent;\n}\n\n.active {\n  border-color: $pink;\n}\n</style>\n","<template>\n  <View>\n    <Column padding=\"1\" gap=\"1\" is=\"aside\" align=\"end\">\n      <MenuHeader title=\"design\" class=\"header transition\" @close=\"router.push('/visualizer')\">\n        <IconButton icon=\"code\" :active=\"showEditor\" @click=\"toggleEditor\" />\n        <IconButton icon=\"sliders\" :active=\"showUniforms\" @click=\"toggleUniforms\" />\n        <IconButton icon=\"wand\" @click=\"sketches.magicTween(500)\" />\n      </MenuHeader>\n\n      <Variants>\n        <template #right>\n          <IconButton v-if=\"showUniforms\" icon=\"plus\" :disabled=\"sketches.canAddVariant\" @click=\"sketches.addVariant\" />\n          <IconButton\n            v-else\n            icon=\"shuffle\"\n            :disabled=\"sketches.sketch?.variants.length === 1\"\n            :active=\"sketches.shuffleVariants\"\n            @click=\"sketches.toggleShuffleVariants\" />\n        </template>\n      </Variants>\n\n      <Transition name=\"fade\">\n        <Uniforms v-if=\"showUniforms\" @focus=\"onFocus\" @blur=\"onBlur\" :focused=\"focused\" :focused-key=\"focusedKey\" />\n      </Transition>\n    </Column>\n\n    <Transition name=\"fade\">\n      <ShaderEditor\n        v-if=\"showEditor\"\n        v-model=\"sketches.shader\"\n        :error=\"sketches.shaderError\"\n        :uniform-keys=\"sketches.uniformKeys\"\n        @node-click=\"onEditorNodeClick\" />\n    </Transition>\n  </View>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, defineAsyncComponent } from \"vue\";\nimport { useMagicKeys } from \"@vueuse/core\";\nimport { MenuHeader } from \"../components\";\nimport {\n  Column,\n  View,\n  IconButton,\n  useSketches,\n  usePopover,\n  useToast,\n  useRouter,\n  isValidGLSLVariableName,\n  Variants,\n  Uniforms\n} from \"@wearesage/vue\";\n\n// Lazy load the editor - only loads when component is actually rendered\nconst ShaderEditor = defineAsyncComponent(() => \n  import('@wearesage/editor/vue').then(m => m.ShaderEditor)\n);\n\nconst toast = useToast();\nconst popover = usePopover();\nconst sketches = useSketches();\nconst router = useRouter();\nconst { meta } = useMagicKeys();\nconst focused = ref(false);\nconst focusedKey = ref<string | null>(null);\nconst showUniforms = ref(true);\nconst showEditor = ref(false);\n\nfunction toggleUniforms() {\n  showUniforms.value = !showUniforms.value;\n}\n\nfunction toggleEditor() {\n  showEditor.value = !showEditor.value;\n}\n\nfunction onFocus(key: string) {\n  focusedKey.value = key;\n  focused.value = true;\n}\n\nfunction onBlur() {\n  focused.value = false;\n  focusedKey.value = null;\n}\n\nasync function onEditorNodeClick({ value, type, range }: any) {\n  if (type === \"uniform\") return popover.editUniform(value);\n  if (!meta.value || type === \"number\") return;\n  const uniformName: string = (await popover.getText(\"choose uniform name\")) as string;\n  if (uniformName.length < 3) return toast.error(`Friends don't let friends code golf (2 characters minimum)`);\n  if (!isValidGLSLVariableName(uniformName)) return toast.error(\"Invalid uniform name.\");\n  sketches.addUniform({ value, type, range, name: uniformName });\n  toast.message(`Added uniform \\`${uniformName}\\``);\n}\n</script>\n\n<route lang=\"json\">\n{\n  \"name\": \"Design\",\n  \"meta\": {\n    \"description\": \"customize your visuals\",\n    \"requiresAuth\": true\n  }\n}\n</route>\n\n<style lang=\"scss\" scoped>\naside {\n  @include position(fixed, 0 0 0 null, 50);\n  @include hide-scroll-bar;\n  will-change: transform, opacity;\n  transition: var(--transition);\n  overflow-y: scroll;\n}\n</style>\n"],"file":"assets/design-Y_pgz9hH.js"}